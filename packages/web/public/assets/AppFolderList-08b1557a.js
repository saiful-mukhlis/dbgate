import{S as Y,i as Z,s as P,a9 as z,aa as ae,B as _,K as b,ab as se,ac as oe,O as h,Q as g,T as v,ad as E,c as Q,a as re,as as W,ae as ie,X as le,n as q,e as x,_ as X,j as y,af as T,ah as ce,ag as ue,ai as pe,aj as fe,D as F,I as M,R as L,av as de,al as me,a0 as G,am as H,an as $e,ap as J,aq as U,ar as _e,r as be,F as ee}from"./index-632e4f1b.js";import{_ as V}from"./lodash-29c9ec56.js";import{l as he}from"./dbgate-datalib-0d3b84db.js";function ge(a){var o;let e,s;const n=[a[7],{data:a[0]},{title:a[0].name},{icon:"img app"},{statusIcon:a[6](a[3],a[2])?"icon check":null},{statusTitle:`Application ${a[0].name} is used for database ${(o=a[3])==null?void 0:o.name}`},{isBold:a[0].name==a[4]},{menu:a[5]}];let i={};for(let t=0;t<n.length;t+=1)i=z(i,n[t]);return e=new ae({props:i}),e.$on("click",a[8]),{c(){_(e.$$.fragment)},m(t,l){b(e,t,l),s=!0},p(t,[l]){var c;const m=l&253?se(n,[l&128&&oe(t[7]),l&1&&{data:t[0]},l&1&&{title:t[0].name},n[3],l&76&&{statusIcon:t[6](t[3],t[2])?"icon check":null},l&9&&{statusTitle:`Application ${t[0].name} is used for database ${(c=t[3])==null?void 0:c.name}`},l&17&&{isBold:t[0].name==t[4]},l&32&&{menu:t[5]}]):{};e.$set(m)},i(t){s||(h(e.$$.fragment,t),s=!0)},o(t){g(e.$$.fragment,t),s=!1},d(t){v(e,t)}}}globalThis&&globalThis.__awaiter;const ve=a=>a.name,we=a=>e=>he.filterName(e,a.name);function Ce(a,e,s){let n;const i=["data"];let o=E(e,i),t,l=q,m=()=>(l(),l=x(n,u=>s(2,t=u)),n),c,p;Q(a,re,u=>s(3,c=u)),Q(a,W,u=>s(4,p=u)),a.$$.on_destroy.push(()=>l());var w=this&&this.__awaiter||function(u,$,j,k){function R(C){return C instanceof j?C:new j(function(A){A(C)})}return new(j||(j=Promise))(function(C,A){function ne(O){try{K(k.next(O))}catch(N){A(N)}}function te(O){try{K(k.throw(O))}catch(N){A(N)}}function K(O){O.done?C(O.value):R(O.value).then(ne,te)}K((k=k.apply(u,$||[])).next())})};let{data:f}=e;const D=()=>{y(ce,{message:`Really delete application ${f.name}?`,onConfirm:()=>{T("apps/delete-folder",{folder:f.name})}})},I=()=>{const{name:u}=f;y(ue,{value:u,label:"New application name",header:"Rename application",onConfirm:$=>w(void 0,void 0,void 0,function*(){yield T("apps/rename-folder",{folder:f.name,newFolder:$}),p==f.name&&X(W,p=$,p)})})};function r(u){var $;T("connections/update-database",{conid:($=c==null?void 0:c.connection)===null||$===void 0?void 0:$._id,database:c==null?void 0:c.name,values:{[`useApp:${f.name}`]:u}})}function d(){return[{text:"Delete",onClick:D},{text:"Rename",onClick:I},c&&[!B(c,t)&&{text:"Enable on current database",onClick:()=>r(!0)},B(c,t)&&{text:"Disable on current database",onClick:()=>r(!1)}]]}function B(u,$){var j;if(!u||!$)return!1;const k=$.find(C=>{var A;return C._id==((A=u==null?void 0:u.connection)===null||A===void 0?void 0:A._id)}),R=(j=k==null?void 0:k.databases)===null||j===void 0?void 0:j.find(C=>C.name==(u==null?void 0:u.name));return R&&R[`useApp:${f.name}`]}const S=()=>X(W,p=f.name,p);return a.$$set=u=>{e=z(z({},e),ie(u)),s(7,o=E(e,i)),"data"in u&&s(0,f=u.data)},m(s(1,n=le())),[f,n,t,c,p,d,B,o,S]}class je extends Y{constructor(e){super(),Z(this,e,Ce,ge,P,{data:0})}}const ke=Object.freeze(Object.defineProperty({__proto__:null,createMatcher:we,default:je,extractKey:ve},Symbol.toStringTag,{value:"Module"}));function Ae(a){let e,s;return e=new ee({props:{icon:"icon plus-thick"}}),{c(){_(e.$$.fragment)},m(n,i){b(e,n,i),s=!0},p:q,i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){v(e,n)}}}function Oe(a){let e,s;return e=new ee({props:{icon:"icon refresh"}}),{c(){_(e.$$.fragment)},m(n,i){b(e,n,i),s=!0},p:q,i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){v(e,n)}}}function Be(a){let e,s,n,i,o,t,l,m,c,p;function w(r){a[4](r)}let f={placeholder:"Search applications"};a[0]!==void 0&&(f.value=a[0]),e=new me({props:f}),G.push(()=>H(e,"value",w));function D(r){a[5](r)}let I={};return a[0]!==void 0&&(I.filter=a[0]),i=new $e({props:I}),G.push(()=>H(i,"filter",D)),l=new J({props:{title:"Create new application",$$slots:{default:[Ae]},$$scope:{ctx:a}}}),l.$on("click",a[6]),c=new J({props:{title:"Refresh application list",$$slots:{default:[Oe]},$$scope:{ctx:a}}}),c.$on("click",a[3]),{c(){_(e.$$.fragment),n=F(),_(i.$$.fragment),t=F(),_(l.$$.fragment),m=F(),_(c.$$.fragment)},m(r,d){b(e,r,d),M(r,n,d),b(i,r,d),M(r,t,d),b(l,r,d),M(r,m,d),b(c,r,d),p=!0},p(r,d){const B={};!s&&d&1&&(s=!0,B.value=r[0],U(()=>s=!1)),e.$set(B);const S={};!o&&d&1&&(o=!0,S.filter=r[0],U(()=>o=!1)),i.$set(S);const u={};d&128&&(u.$$scope={dirty:d,ctx:r}),l.$set(u);const $={};d&128&&($.$$scope={dirty:d,ctx:r}),c.$set($)},i(r){p||(h(e.$$.fragment,r),h(i.$$.fragment,r),h(l.$$.fragment,r),h(c.$$.fragment,r),p=!0)},o(r){g(e.$$.fragment,r),g(i.$$.fragment,r),g(l.$$.fragment,r),g(c.$$.fragment,r),p=!1},d(r){r&&(L(n),L(t),L(m)),v(e,r),v(i,r),v(l,r),v(c,r)}}}function Ie(a){let e,s;return e=new _e({props:{list:V.sortBy(a[2],"name"),module:ke,filter:a[0]}}),{c(){_(e.$$.fragment)},m(n,i){b(e,n,i),s=!0},p(n,i){const o={};i&4&&(o.list=V.sortBy(n[2],"name")),i&1&&(o.filter=n[0]),e.$set(o)},i(n){s||(h(e.$$.fragment,n),s=!0)},o(n){g(e.$$.fragment,n),s=!1},d(n){v(e,n)}}}function Se(a){let e,s,n,i;return e=new pe({props:{$$slots:{default:[Be]},$$scope:{ctx:a}}}),n=new fe({props:{$$slots:{default:[Ie]},$$scope:{ctx:a}}}),{c(){_(e.$$.fragment),s=F(),_(n.$$.fragment)},m(o,t){b(e,o,t),M(o,s,t),b(n,o,t),i=!0},p(o,[t]){const l={};t&129&&(l.$$scope={dirty:t,ctx:o}),e.$set(l);const m={};t&133&&(m.$$scope={dirty:t,ctx:o}),n.$set(m)},i(o){i||(h(e.$$.fragment,o),h(n.$$.fragment,o),i=!0)},o(o){g(e.$$.fragment,o),g(n.$$.fragment,o),i=!1},d(o){o&&L(s),v(e,o),v(n,o)}}}function Re(a,e,s){let n,i,o=q,t=()=>(o(),o=x(n,f=>s(2,i=f)),n);a.$$.on_destroy.push(()=>o());let l="";const m=()=>{T("apps/refresh-folders")};function c(f){l=f,s(0,l)}function p(f){l=f,s(0,l)}const w=()=>be("new.application");return t(s(1,n=de())),[l,n,i,m,c,p,w]}class Le extends Y{constructor(e){super(),Z(this,e,Re,Se,P,{})}}export{Le as default};
//# sourceMappingURL=AppFolderList-08b1557a.js.map
