{"version":3,"file":"HistoryWidget-7188b389.js","sources":["../../src/appobj/ClosedTabAppObject.svelte","../../src/widgets/HistoryWidget.svelte"],"sourcesContent":["<script lang=\"ts\" context=\"module\">\n  export const extractKey = data => data.tabid;\n</script>\n\n<script lang=\"ts\">\n  import FontIcon from '../icons/FontIcon.svelte';\n  import { openedTabs } from '../stores';\n  import { setSelectedTabFunc } from '../utility/common';\n  import moment from 'moment';\n\n  import AppObjectCore from './AppObjectCore.svelte';\n\n  export let data;\n\n  const handleDelete = () => {\n    openedTabs.update(tabs => tabs.filter(x => x.tabid != data.tabid));\n  };\n  const handleDeleteOlder = () => {\n    openedTabs.update(tabs => tabs.filter(x => !x.closedTime || x.closedTime >= data.closedTime));\n  };\n\n  const onClick = () => {\n    openedTabs.update(files =>\n      setSelectedTabFunc(\n        files.map(x => ({\n          ...x,\n          closedTime: x.tabid == data.tabid ? undefined : x.closedTime,\n        })),\n        data.tabid\n      )\n    );\n  };\n\n  function createMenu() {\n    return [\n      { text: 'Delete', onClick: handleDelete },\n      { text: 'Delete older', onClick: handleDeleteOlder },\n    ];\n  }\n</script>\n\n<AppObjectCore\n  {...$$restProps}\n  {data}\n  title={`${data.title} ${moment(data.closedTime).fromNow()}`}\n  icon={data.icon}\n  isBold={!!data.selected}\n  on:click={onClick}\n  isBusy={data.busy}\n  menu={createMenu}\n>\n  {#if data.props && data.props.database}\n    <div class=\"info\">\n      <FontIcon icon=\"icon database\" />\n      {data.props.database}\n    </div>\n  {/if}\n  {#if data.contentPreview}\n    <div class=\"info\">\n      {data.contentPreview}\n    </div>\n  {/if}\n</AppObjectCore>\n\n<style>\n  .info {\n    margin-left: 30px;\n    color: var(--theme-font-3);\n  }\n</style>\n","<script lang=\"ts\">\n  import _ from 'lodash';\n\n  import AppObjectList from '../appobj/AppObjectList.svelte';\n  import * as closedTabAppObject from '../appobj/ClosedTabAppObject.svelte';\n  import * as favoriteFileAppObject from '../appobj/FavoriteFileAppObject.svelte';\n  import { openedTabs } from '../stores';\n\n  import hasPermission from '../utility/hasPermission';\n  import { useFavorites } from '../utility/metadataLoaders';\n  import QueryHistoryList from './QueryHistoryList.svelte';\n\n  import WidgetColumnBar from './WidgetColumnBar.svelte';\n  import WidgetColumnBarItem from './WidgetColumnBarItem.svelte';\n  import WidgetsInnerContainer from './WidgetsInnerContainer.svelte';\n\n  $: favorites = useFavorites();\n\n</script>\n\n<WidgetColumnBar>\n  <WidgetColumnBarItem title=\"Recently closed tabs\" name=\"closedTabs\" storageName='closedTabsWidget'>\n    <WidgetsInnerContainer>\n      <AppObjectList\n        list={_.sortBy(\n          $openedTabs.filter(x => x.closedTime),\n          x => -x.closedTime\n        )}\n        module={closedTabAppObject}\n      />\n    </WidgetsInnerContainer>\n  </WidgetColumnBarItem>\n  <WidgetColumnBarItem title=\"Query history\" name=\"queryHistory\" storageName='queryHistoryWidget'>\n    <QueryHistoryList />\n  </WidgetColumnBarItem>\n</WidgetColumnBar>\n"],"names":["ctx","insert","target","div","anchor","set_data","t1","t1_value","t_value","dirty","t","if_block0","create_if_block_1","if_block1","create_if_block","moment","extractKey","data","_","func","func_1","closedTabAppObject","appobjectlist_changes","x"],"mappings":"8bAsDOA,EAAI,CAAA,EAAC,MAAM,SAAQ,8IAFtBC,EAGKC,EAAAC,EAAAC,CAAA,2DADFJ,EAAI,CAAA,EAAC,MAAM,SAAQ,KAAAK,EAAAC,EAAAC,CAAA,4GAKnBC,EAAAR,KAAK,eAAc,4EADtBC,EAEKC,EAAAC,EAAAC,CAAA,iBADFK,EAAA,GAAAD,KAAAA,EAAAR,KAAK,eAAc,KAAAK,EAAAK,EAAAF,CAAA,0CARnBG,EAAAX,KAAK,OAASA,EAAK,CAAA,EAAA,MAAM,UAAQY,EAAAZ,CAAA,EAMjCa,EAAAb,KAAK,gBAAcc,EAAAd,CAAA,0GANnBA,KAAK,OAASA,EAAK,CAAA,EAAA,MAAM,+GAMzBA,KAAK,gMAfNA,EAAW,CAAA,wBAELA,EAAI,CAAA,EAAC,KAAK,IAAIe,EAAOf,EAAI,CAAA,EAAC,UAAU,EAAE,QAAO,CAAA,IACjD,CAAA,KAAAA,KAAK,IAAI,EACL,CAAA,OAAA,CAAA,CAAAA,KAAK,QAAQ,EAEf,CAAA,OAAAA,KAAK,IAAI,QACXA,EAAU,CAAA,CAAA,iIAFNA,EAAO,CAAA,CAAA,iFALbA,EAAW,CAAA,CAAA,kCAELA,EAAI,CAAA,EAAC,KAAK,IAAIe,EAAOf,EAAI,CAAA,EAAC,UAAU,EAAE,QAAO,CAAA,IACjDS,EAAA,GAAA,CAAA,KAAAT,KAAK,IAAI,EACLS,EAAA,GAAA,CAAA,OAAA,CAAA,CAAAT,KAAK,QAAQ,EAEfS,EAAA,GAAA,CAAA,OAAAT,KAAK,IAAI,aACXA,EAAU,CAAA,CAAA,mIAjDgB,MAAAgB,GAAAC,GAAAA,EAAA,8tBCwBpB,KAAAC,EAAE,OACNlB,KAAY,OAAMmB,CAAA,EAAAC,CAAA,SAGZC,qEAJFZ,EAAA,IAAAa,EAAA,KAAAJ,EAAE,OACNlB,KAAY,OAAMmB,CAAA,EAAAC,CAAA,86CAACG,GAAKA,EAAE,aAC1BA,GAAC,CAAKA,EAAE"}