{"version":3,"file":"Toolbar-be252657.js","sources":["../../src/widgets/Toolbar.svelte"],"sourcesContent":["<script context=\"module\">\n  function getCommandTitle(command) {\n    let res = command.text;\n    if (command.keyText || command.keyTextFromGroup) {\n      res += ` (${formatKeyText(command.keyText || command.keyTextFromGroup)})`;\n    }\n    return res;\n  }\n</script>\n\n<script>\n  import _ from 'lodash';\n  import { openFavorite } from '../appobj/FavoriteFileAppObject.svelte';\n  import runCommand from '../commands/runCommand';\n  import FontIcon from '../icons/FontIcon.svelte';\n  import { activeTab, commands, commandsCustomized } from '../stores';\n  import getElectron from '../utility/getElectron';\n  import { useFavorites } from '../utility/metadataLoaders';\n  import ToolbarButton from '../buttons/ToolbarButton.svelte';\n  import { formatKeyText } from '../utility/common';\n\n  const electron = getElectron();\n\n  $: favorites = useFavorites();\n\n  $: list = _.sortBy(\n    Object.values($commandsCustomized).filter(x => (x.enabled || x.showDisabled) && x.toolbar && x.onClick),\n    x => (x.toolbarOrder == null ? 100 : x.toolbarOrder)\n  );\n</script>\n\n<div class=\"root\">\n  <div class=\"container\">\n    {#if !electron}\n      <ToolbarButton externalImage=\"logo192.png\" on:click={() => runCommand('about.show')} />\n    {/if}\n    {#each ($favorites || []).filter(x => x.showInToolbar) as item}\n      <ToolbarButton on:click={() => openFavorite(item)} icon={item.icon || 'icon favorite'}>\n        {item.title}\n      </ToolbarButton>\n    {/each}\n\n    {#each list.filter(x => !x.isRelatedToTab) as command}\n      <ToolbarButton\n        icon={command.icon}\n        on:click={command.onClick}\n        disabled={!command.enabled}\n        title={getCommandTitle(command)}\n      >\n        {command.toolbarName || command.name}\n      </ToolbarButton>\n    {/each}\n  </div>\n  <div class=\"container\">\n    {#if $activeTab && list.filter(x => x.isRelatedToTab).length > 0}\n      <div class=\"activeTab\">\n        <div class=\"activeTabInner\">\n          <FontIcon icon={$activeTab.icon} />\n          {$activeTab.title}:\n        </div>\n      </div>\n    {/if}\n    {#each list.filter(x => x.isRelatedToTab) as command}\n      <ToolbarButton\n        icon={command.icon}\n        on:click={command.onClick}\n        disabled={!command.enabled}\n        title={getCommandTitle(command)}\n      >\n        {command.toolbarName || command.name}\n      </ToolbarButton>\n    {/each}\n  </div>\n</div>\n\n<style>\n  .container {\n    display: flex;\n    user-select: none;\n    align-items: stretch;\n    height: var(--dim-toolbar-height);\n  }\n  .root {\n    display: flex;\n    align-items: stretch;\n    justify-content: space-between;\n  }\n\n  .activeTab {\n    background-color: var(--theme-bg-2);\n    white-space: nowrap;\n    display: flex;\n    padding-left: 15px;\n    padding-right: 15px;\n  }\n\n  .activeTabInner {\n    align-self: center;\n  }\n</style>\n"],"names":["t_value","ctx","dirty","set_data","t","t0_value","t0","getCommandTitle","is_function","toolbarbutton_changes","t1_value","insert","target","div1","anchor","append","div0","fonticon_changes","current","t1","show_if","func","create_if_block_1","each_value_2","ensure_array_like","func_1","each_value_1","func_2","each_value","func_3","div2","if_block0","i","each_blocks_2","each_blocks_1","each_blocks","command","res","formatKeyText","x","electron","getElectron","click_handler","runCommand","click_handler_1","item","openFavorite","$$invalidate","list","_","$commandsCustomized","$$subscribe_favorites","favorites","useFavorites"],"mappings":"gwBAsCS,IAAAA,EAAAC,MAAK,MAAK,gDAAVC,EAAA,GAAAF,KAAAA,EAAAC,MAAK,MAAK,KAAAE,EAAAC,EAAAJ,CAAA,oGAD4CC,EAAI,EAAA,EAAC,MAAQ,2JAAbA,EAAI,EAAA,EAAC,MAAQ,+JAYnE,IAAAI,GAAAJ,EAAQ,CAAA,EAAA,aAAeA,KAAQ,MAAI,iEAAnCC,EAAA,GAAAG,KAAAA,GAAAJ,EAAQ,CAAA,EAAA,aAAeA,KAAQ,MAAI,KAAAE,EAAAG,EAAAD,CAAA,sEAL9B,KAAAJ,KAAQ,KAEH,SAAA,CAAAA,KAAQ,QACZ,MAAAM,EAAgBN,EAAO,CAAA,CAAA,qEAFpBO,GAAAP,EAAQ,CAAA,EAAA,OAAO,GAAfA,KAAQ,QAAO,MAAA,KAAA,SAAA,uEADnBC,EAAA,IAAAO,EAAA,KAAAR,KAAQ,MAEHC,EAAA,IAAAO,EAAA,SAAA,CAAAR,KAAQ,SACZC,EAAA,IAAAO,EAAA,MAAAF,EAAgBN,EAAO,CAAA,CAAA,4JAW3BS,EAAAT,KAAW,MAAK,0BADD,MAAA,CAAA,KAAAA,KAAW,IAAI,iEACb,GACpB,+FAJFU,EAKKC,EAAAC,EAAAC,CAAA,EAJHC,EAGKF,EAAAG,CAAA,2DAFad,EAAA,IAAAe,EAAA,KAAAhB,KAAW,iBAC1B,CAAAiB,GAAAhB,EAAA,IAAAQ,KAAAA,EAAAT,KAAW,MAAK,KAAAE,EAAAgB,EAAAT,CAAA,uGAWlB,IAAAL,GAAAJ,EAAQ,CAAA,EAAA,aAAeA,KAAQ,MAAI,iEAAnCC,EAAA,GAAAG,KAAAA,GAAAJ,EAAQ,CAAA,EAAA,aAAeA,KAAQ,MAAI,KAAAE,EAAAG,EAAAD,CAAA,sEAL9B,KAAAJ,KAAQ,KAEH,SAAA,CAAAA,KAAQ,QACZ,MAAAM,EAAgBN,EAAO,CAAA,CAAA,qEAFpBO,GAAAP,EAAQ,CAAA,EAAA,OAAO,GAAfA,KAAQ,QAAO,MAAA,KAAA,SAAA,uEADnBC,EAAA,IAAAO,EAAA,KAAAR,KAAQ,MAEHC,EAAA,IAAAO,EAAA,SAAA,CAAAR,KAAQ,SACZC,EAAA,IAAAO,EAAA,MAAAF,EAAgBN,EAAO,CAAA,CAAA,iKAb7BmB,EAAAnB,MAAcA,EAAI,CAAA,EAAC,OAA8BoB,CAAA,EAAA,OAAS,SArBzDpB,EAAQ,CAAA,GAAAqB,GAAArB,CAAA,EAGNsB,EAAAC,GAAAvB,UAAkB,OAAMwB,CAAA,CAAA,uBAA9B,OAAI,GAAA,0DAMC,IAAAC,EAAAF,EAAAvB,KAAK,OAAM0B,CAAA,CAAA,uBAAhB,OAAI,GAAA,yEAoBCC,EAAAJ,EAAAvB,KAAK,OAAM4B,CAAA,CAAA,uBAAhB,OAAI,GAAA,2XA/BVlB,EA0CKC,EAAAkB,EAAAhB,CAAA,EAzCHC,EAoBKe,EAAAd,CAAA,wIACLD,EAmBKe,EAAAjB,CAAA,2FAvCGZ,EAAQ,CAAA,GAAA8B,EAAA,EAAA9B,EAAAC,CAAA,OAGNqB,EAAAC,GAAAvB,UAAkB,OAAMwB,CAAA,CAAA,oBAA9B,OAAIO,GAAA,EAAA,sGAAJ,OAAIA,EAAAC,EAAA,OAAAD,GAAA,mBAMCN,EAAAF,EAAAvB,KAAK,OAAM0B,CAAA,CAAA,oBAAhB,OAAIK,GAAA,EAAA,yGAAJ,OAAIA,EAAAE,EAAA,OAAAF,GAAA,eAYD9B,EAAA,IAAAkB,EAAAnB,MAAcA,EAAI,CAAA,EAAC,OAA8BoB,CAAA,EAAA,OAAS,qGAQxDO,EAAAJ,EAAAvB,KAAK,OAAM4B,CAAA,CAAA,oBAAhB,OAAIG,GAAA,EAAA,yGAAJ,OAAIA,EAAAG,EAAA,OAAAH,GAAA,+CA1BJ,OAAIA,GAAA,0BAMJ,OAAIA,GAAA,+BAoBJ,OAAIA,GAAA,oQA7DC,SAAAzB,EAAgB6B,EAAO,KAC1BC,EAAMD,EAAQ,KACd,OAAAA,EAAQ,SAAWA,EAAQ,oBAC7BC,GAAG,KAASC,GAAcF,EAAQ,SAAWA,EAAQ,gBAAgB,CAAA,KAEhEC,UAgDwBE,GAAKA,EAAE,iBAlBLA,GAAKA,EAAE,gBAMrBA,GAAC,CAAKA,EAAE,iBAoBRA,GAAKA,EAAE,6JAzCtB,MAAAC,EAAWC,KAa8CC,EAAA,IAAAC,GAAW,YAAY,EAGnDC,EAAAC,GAAAC,GAAaD,CAAI,yCAZnDE,EAAA,EAAEC,EAAOC,GAAE,OACV,OAAO,OAAOC,CAAmB,EAAE,OAAOX,IAAMA,EAAE,SAAWA,EAAE,eAAiBA,EAAE,SAAWA,EAAE,OAAO,EACtGA,GAAMA,EAAE,cAAgB,KAAO,IAAMA,EAAE,YAAY,CAAA,GAJpDY,EAAAJ,EAAA,EAAEK,EAAYC,GAAY,CAAA,CAAA"}