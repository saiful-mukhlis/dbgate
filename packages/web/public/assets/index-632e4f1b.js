var Ji=Object.defineProperty;var Zi=(o,e,t)=>e in o?Ji(o,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[e]=t;var Mn=(o,e,t)=>(Zi(o,typeof e!="symbol"?e+"":e,t),t);import{c as commonjsGlobal,g as getDefaultExportFromCjs,_}from"./lodash-29c9ec56.js";import{u as uuidv1,l as lib,h as hooks,s as stableStringify,d as dbgateTools,a as lib$1,b as lib$2,c as lib$3,e as lib$4,f as debug}from"./dbgate-datalib-0d3b84db.js";const databaseObjectAppObject=Object.freeze(Object.defineProperty({__proto__:null,get createAppObjectMenu(){return createAppObjectMenu},get createDatabaseObjectMenu(){return createDatabaseObjectMenu},get createMatcher(){return createMatcher$2},get createTitle(){return createTitle$1},get databaseObjectIcons(){return databaseObjectIcons},get default(){return DatabaseObjectAppObject},get extractKey(){return extractKey$6},get handleDatabaseObjectClick(){return handleDatabaseObjectClick},get openDatabaseObjectDetail(){return openDatabaseObjectDetail}},Symbol.toStringTag,{value:"Module"}));(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const s of a.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=t(r);fetch(r.href,a)}})();const scriptRel="modulepreload",assetsURL=function(o){return"/"+o},seen={},__vitePreload=function(e,t,n){if(!t||t.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(t.map(a=>{if(a=assetsURL(a),a in seen)return;seen[a]=!0;const s=a.endsWith(".css"),l=s?'[rel="stylesheet"]':"";if(!!n)for(let f=r.length-1;f>=0;f--){const m=r[f];if(m.href===a&&(!s||m.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=s?"stylesheet":scriptRel,s||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),s)return new Promise((f,m)=>{d.addEventListener("load",f),d.addEventListener("error",()=>m(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const s=new Event("vite:preloadError",{cancelable:!0});if(s.payload=a,window.dispatchEvent(s),!s.defaultPrevented)throw a})},__variableDynamicImportRuntimeHelper=(o,e)=>{const t=o[e];return t?typeof t=="function"?t():Promise.resolve(t):new Promise((n,r)=>{(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(r.bind(null,new Error("Unknown variable dynamic import: "+e)))})};let loadUtilitySvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./utility/AppTitleProvider.svelte":()=>__vitePreload(()=>import("./AppTitleProvider-c9c3d92b.js"),["assets/AppTitleProvider-c9c3d92b.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./utility/ErrorHandler.svelte":()=>__vitePreload(()=>import("./ErrorHandler-b6704367.js"),["assets/ErrorHandler-b6704367.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./utility/OpenTabsOnStartup.svelte":()=>__vitePreload(()=>import("./OpenTabsOnStartup-f139c67f.js"),["assets/OpenTabsOnStartup-f139c67f.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./utility/SettingsListener.svelte":()=>__vitePreload(()=>import("./SettingsListener-df75089f.js"),["assets/SettingsListener-df75089f.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js"])}),`./utility/${o}.svelte`)).default,loadDataGridSvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./datagrid/CellValue.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CellValue$1),void 0),"./datagrid/CollapseButton.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CollapseButton$1),void 0),"./datagrid/CollectionDataGridCore.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CollectionDataGridCore$1),void 0),"./datagrid/ColumnHeaderControl.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ColumnHeaderControl$1),void 0),"./datagrid/ColumnManager.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ColumnManager$1),void 0),"./datagrid/ColumnManagerRow.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ColumnManagerRow$1),void 0),"./datagrid/DataFilterControl.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataFilterControl$1),void 0),"./datagrid/DataGrid.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataGrid$1),void 0),"./datagrid/DataGridCell.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataGridCell$1),void 0),"./datagrid/DataGridCore.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataGridCore$1),void 0),"./datagrid/DataGridRow.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataGridRow$1),void 0),"./datagrid/DataGridRowHeightMeter.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DataGridRowHeightMeter$1),void 0),"./datagrid/DbKeyTableControl.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DbKeyTableControl$1),void 0),"./datagrid/HorizontalScrollBar.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>HorizontalScrollBar$1),void 0),"./datagrid/InplaceEditor.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>InplaceEditor$1),void 0),"./datagrid/JslDataGrid.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>JslDataGrid$1),void 0),"./datagrid/JslDataGridCore.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>JslDataGridCore$1),void 0),"./datagrid/LoadingDataGridCore.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>LoadingDataGridCore$1),void 0),"./datagrid/ReferenceHeader.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ReferenceHeader$1),void 0),"./datagrid/ReferenceManager.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ReferenceManager$1),void 0),"./datagrid/RowHeaderCell.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>RowHeaderCell$1),void 0),"./datagrid/SqlDataGridCore.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SqlDataGridCore$1),void 0),"./datagrid/TableDataGrid.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>TableDataGrid$1),void 0),"./datagrid/VerticalScrollBar.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>VerticalScrollBar$1),void 0)}),`./datagrid/${o}.svelte`)).default,loadCommandsSvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./commands/CommandListener.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CommandListener$1),void 0),"./commands/CommandPalette.svelte":()=>__vitePreload(()=>import("./CommandPalette-b4e536ad.js"),["assets/CommandPalette-b4e536ad.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js","assets/CommandPalette-f1fa6ada.css"])}),`./commands/${o}.svelte`)).default,loadWidgetsSvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./widgets/AppFilesList.svelte":()=>__vitePreload(()=>import("./AppFilesList-2bb90fc6.js"),["assets/AppFilesList-2bb90fc6.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js"]),"./widgets/AppFolderList.svelte":()=>__vitePreload(()=>import("./AppFolderList-08b1557a.js"),["assets/AppFolderList-08b1557a.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./widgets/AppStartInfo.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>AppStartInfo$1),void 0),"./widgets/AppWidget.svelte":()=>__vitePreload(()=>import("./AppWidget-78502c53.js"),["assets/AppWidget-78502c53.js","assets/AppFilesList-2bb90fc6.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js","assets/AppFolderList-08b1557a.js"]),"./widgets/ArchiveFilesList.svelte":()=>__vitePreload(()=>import("./ArchiveFilesList-778892be.js"),["assets/ArchiveFilesList-778892be.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js"]),"./widgets/ArchiveFolderList.svelte":()=>__vitePreload(()=>import("./ArchiveFolderList-aafa3a8e.js"),["assets/ArchiveFolderList-aafa3a8e.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./widgets/ArchiveWidget.svelte":()=>__vitePreload(()=>import("./ArchiveWidget-af909828.js"),["assets/ArchiveWidget-af909828.js","assets/ArchiveFilesList-778892be.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js","assets/ArchiveFolderList-aafa3a8e.js"]),"./widgets/CellDataWidget.svelte":()=>__vitePreload(()=>import("./CellDataWidget-a6df8f75.js"),["assets/CellDataWidget-a6df8f75.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/CellDataWidget-74477352.css"]),"./widgets/ConnectionList.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConnectionList$1),void 0),"./widgets/DatabaseWidget.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DatabaseWidget$1),void 0),"./widgets/DbKeysSubTree.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DbKeysSubTree$1),void 0),"./widgets/DbKeysTree.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DbKeysTree$1),void 0),"./widgets/DbKeysTreeNode.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DbKeysTreeNode$1),void 0),"./widgets/FilesWidget.svelte":()=>__vitePreload(()=>import("./FilesWidget-e48f5d0c.js"),["assets/FilesWidget-e48f5d0c.js","assets/SavedFilesList-59ba38bb.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./widgets/HistoryWidget.svelte":()=>__vitePreload(()=>import("./HistoryWidget-7188b389.js"),["assets/HistoryWidget-7188b389.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/QueryHistoryList-d359c5c7.js","assets/QueryHistoryList-a35dfa3b.css","assets/HistoryWidget-5e45f882.css"]),"./widgets/PinnedObjectsList.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>PinnedObjectsList$1),void 0),"./widgets/PluginsWidget.svelte":()=>__vitePreload(()=>import("./PluginsWidget-74bff537.js"),["assets/PluginsWidget-74bff537.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/PluginsWidget-3df095c2.css"]),"./widgets/QueryHistoryList.svelte":()=>__vitePreload(()=>import("./QueryHistoryList-d359c5c7.js"),["assets/QueryHistoryList-d359c5c7.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/QueryHistoryList-a35dfa3b.css"]),"./widgets/SavedFilesList.svelte":()=>__vitePreload(()=>import("./SavedFilesList-59ba38bb.js"),["assets/SavedFilesList-59ba38bb.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./widgets/SingleConnectionDatabaseList.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SingleConnectionDatabaseList$1),void 0),"./widgets/Snackbar.svelte":()=>__vitePreload(()=>import("./Snackbar-22958ff9.js"),["assets/Snackbar-22958ff9.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/Snackbar-390d516b.css"]),"./widgets/SqlObjectList.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SqlObjectList$1),void 0),"./widgets/StatusBar.svelte":()=>__vitePreload(()=>import("./StatusBar-49e84339.js"),["assets/StatusBar-49e84339.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js","assets/ChooseConnectionColorModal-635d5fcc.js","assets/StatusBar-43788373.css"]),"./widgets/StatusBarTabItem.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>StatusBarTabItem$1),void 0),"./widgets/TitleBar.svelte":()=>__vitePreload(()=>import("./TitleBar-3f58b3b4.js"),["assets/TitleBar-3f58b3b4.js","assets/lodash-29c9ec56.js","assets/mainMenuDefinition-8f53d26e.js","assets/HorizontalMenu-6b59b3ec.js","assets/dbgate-datalib-0d3b84db.js","assets/HorizontalMenu-c795c5c1.css","assets/TitleBar-ade9ab05.css"]),"./widgets/Toolbar.svelte":()=>__vitePreload(()=>import("./Toolbar-be252657.js"),["assets/Toolbar-be252657.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/Toolbar-482c16b8.css"]),"./widgets/WidgetColumnBar.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>WidgetColumnBar$1),void 0),"./widgets/WidgetColumnBarItem.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>WidgetColumnBarItem$1),void 0),"./widgets/WidgetContainer.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>WidgetContainer$1),void 0),"./widgets/WidgetIconPanel.svelte":()=>__vitePreload(()=>import("./WidgetIconPanel-5e1814fb.js"),["assets/WidgetIconPanel-5e1814fb.js","assets/mainMenuDefinition-8f53d26e.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/WidgetIconPanel-25e61a55.css"]),"./widgets/WidgetTitle.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>WidgetTitle$1),void 0),"./widgets/WidgetsInnerContainer.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>WidgetsInnerContainer$1),void 0)}),`./widgets/${o}.svelte`)).default,loadModalsSvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./modals/AboutModal.svelte":()=>__vitePreload(()=>import("./AboutModal-4d150acd.js"),["assets/AboutModal-4d150acd.js","assets/dbgate-datalib-0d3b84db.js","assets/lodash-29c9ec56.js","assets/AboutModal-584fe85b.css"]),"./modals/AddDbKeyModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>AddDbKeyModal$1),void 0),"./modals/ChangeDownloadUrlModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ChangeDownloadUrlModal$1),void 0),"./modals/ChooseColorModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ChooseColorModal$1),void 0),"./modals/ChooseConnectionColorModal.svelte":()=>__vitePreload(()=>import("./ChooseConnectionColorModal-635d5fcc.js"),["assets/ChooseConnectionColorModal-635d5fcc.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./modals/CloseTabModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CloseTabModal$1),void 0),"./modals/ColumnMapModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ColumnMapModal$1),void 0),"./modals/CommandModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>CommandModal$1),void 0),"./modals/ConfirmModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConfirmModal$1),void 0),"./modals/ConfirmNoSqlModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConfirmNoSqlModal$1),void 0),"./modals/ConfirmSqlModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConfirmSqlModal$1),void 0),"./modals/CurrentDropDownMenu.svelte":()=>__vitePreload(()=>import("./CurrentDropDownMenu-4ccd94c4.js"),["assets/CurrentDropDownMenu-4ccd94c4.js","assets/DropDownMenu-1cbbebe0.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/DropDownMenu-c08ec13a.css"]),"./modals/DatabaseLoginModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DatabaseLoginModal$1),void 0),"./modals/DbKeyAddItemModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DbKeyAddItemModal$1),void 0),"./modals/DefineDictionaryDescriptionModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DefineDictionaryDescriptionModal$1),void 0),"./modals/DictionaryLookupModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>DictionaryLookupModal$1),void 0),"./modals/DropDownMenu.svelte":()=>__vitePreload(()=>import("./DropDownMenu-1cbbebe0.js"),["assets/DropDownMenu-1cbbebe0.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/DropDownMenu-c08ec13a.css"]),"./modals/EditCellDataModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>EditCellDataModal$1),void 0),"./modals/EditJsonModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>EditJsonModal$1),void 0),"./modals/ErrorMessageModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ErrorMessageModal$1),void 0),"./modals/ExportDatabaseDumpModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ExportDatabaseDumpModal$1),void 0),"./modals/FavoriteModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>FavoriteModal$1),void 0),"./modals/FilterMultipleValuesModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>FilterMultipleValuesModal$1),void 0),"./modals/GenerateSqlFromDataModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>GenerateSqlFromDataModal$1),void 0),"./modals/HorizontalMenu.svelte":()=>__vitePreload(()=>import("./HorizontalMenu-6b59b3ec.js"),["assets/HorizontalMenu-6b59b3ec.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/HorizontalMenu-c795c5c1.css"]),"./modals/ImportDatabaseDumpModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ImportDatabaseDumpModal$1),void 0),"./modals/ImportExportModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ImportExportModal$1),void 0),"./modals/InputTextModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>InputTextModal$1),void 0),"./modals/InsertJoinModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>InsertJoinModal$1),void 0),"./modals/KeyboardModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>KeyboardModal$1),void 0),"./modals/ModalBase.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ModalBase$1),void 0),"./modals/ModalLayer.svelte":()=>__vitePreload(()=>import("./ModalLayer-cad302f0.js"),["assets/ModalLayer-cad302f0.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js"]),"./modals/RunScriptModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>RunScriptModal$1),void 0),"./modals/SaveArchiveModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SaveArchiveModal$1),void 0),"./modals/SaveFileModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SaveFileModal$1),void 0),"./modals/SetFilterModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SetFilterModal$1),void 0),"./modals/SetFilterModal_Select.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SetFilterModal_Select$1),void 0),"./modals/SqlGeneratorModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>SqlGeneratorModal$1),void 0),"./modals/ValueLookupModal.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ValueLookupModal$1),void 0)}),`./modals/${o}.svelte`)).default,loadSettingsSvelte$1=async o=>(await __variableDynamicImportRuntimeHelper(Object.assign({"./settings/ConnectionDriverFields.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConnectionDriverFields$1),void 0),"./settings/ConnectionSshTunnelFields.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConnectionSshTunnelFields$1),void 0),"./settings/ConnectionSslFields.svelte":()=>__vitePreload(()=>Promise.resolve().then(()=>ConnectionSslFields$1),void 0),"./settings/SettingsModal.svelte":()=>__vitePreload(()=>import("./SettingsModal-89547944.js"),["assets/SettingsModal-89547944.js","assets/ThemeSkeleton-cd153abf.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/ThemeSkeleton-fa15fd5b.css","assets/SettingsModal-03f44c4a.css"]),"./settings/ThemeSkeleton.svelte":()=>__vitePreload(()=>import("./ThemeSkeleton-cd153abf.js"),["assets/ThemeSkeleton-cd153abf.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/ThemeSkeleton-fa15fd5b.css"])}),`./settings/${o}.svelte`)).default;window.loadUtilitySvelte=loadUtilitySvelte$1;window.loadDataGridSvelte=loadDataGridSvelte$1;window.loadCommandsSvelte=loadCommandsSvelte$1;window.loadWidgetsSvelte=loadWidgetsSvelte$1;window.loadModalsSvelte=loadModalsSvelte$1;window.loadSettingsSvelte=loadSettingsSvelte$1;function noop$1(){}function assign(o,e){for(const t in e)o[t]=e[t];return o}function is_promise(o){return!!o&&(typeof o=="object"||typeof o=="function")&&typeof o.then=="function"}function run(o){return o()}function blank_object(){return Object.create(null)}function run_all(o){o.forEach(run)}function is_function(o){return typeof o=="function"}function safe_not_equal(o,e){return o!=o?e==e:o!==e||o&&typeof o=="object"||typeof o=="function"}let src_url_equal_anchor;function src_url_equal(o,e){return o===e?!0:(src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=e,o===src_url_equal_anchor.href)}function is_empty(o){return Object.keys(o).length===0}function subscribe(o,...e){if(o==null){for(const n of e)n(void 0);return noop$1}const t=o.subscribe(...e);return t.unsubscribe?()=>t.unsubscribe():t}function get_store_value(o){let e;return subscribe(o,t=>e=t)(),e}function component_subscribe(o,e,t){o.$$.on_destroy.push(subscribe(e,t))}function create_slot(o,e,t,n){if(o){const r=get_slot_context(o,e,t,n);return o[0](r)}}function get_slot_context(o,e,t,n){return o[1]&&n?assign(t.ctx.slice(),o[1](n(e))):t.ctx}function get_slot_changes(o,e,t,n){if(o[2]&&n){const r=o[2](n(t));if(e.dirty===void 0)return r;if(typeof r=="object"){const a=[],s=Math.max(e.dirty.length,r.length);for(let l=0;l<s;l+=1)a[l]=e.dirty[l]|r[l];return a}return e.dirty|r}return e.dirty}function update_slot_base(o,e,t,n,r,a){if(r){const s=get_slot_context(e,t,n,a);o.p(s,r)}}function get_all_dirty_from_scope(o){if(o.ctx.length>32){const e=[],t=o.ctx.length/32;for(let n=0;n<t;n++)e[n]=-1;return e}return-1}function exclude_internal_props(o){const e={};for(const t in o)t[0]!=="$"&&(e[t]=o[t]);return e}function compute_rest_props(o,e){const t={};e=new Set(e);for(const n in o)!e.has(n)&&n[0]!=="$"&&(t[n]=o[n]);return t}function compute_slots(o){const e={};for(const t in o)e[t]=!0;return e}function null_to_empty(o){return o??""}function set_store_value(o,e,t){return o.set(t),e}function action_destroyer(o){return o&&is_function(o.destroy)?o.destroy:noop$1}const contenteditable_truthy_values=["",!0,1,"true","contenteditable"];function append(o,e){o.appendChild(e)}function insert(o,e,t){o.insertBefore(e,t||null)}function detach(o){o.parentNode&&o.parentNode.removeChild(o)}function destroy_each(o,e){for(let t=0;t<o.length;t+=1)o[t]&&o[t].d(e)}function element(o){return document.createElement(o)}function svg_element(o){return document.createElementNS("http://www.w3.org/2000/svg",o)}function text(o){return document.createTextNode(o)}function space(){return text(" ")}function empty(){return text("")}function listen(o,e,t,n){return o.addEventListener(e,t,n),()=>o.removeEventListener(e,t,n)}function prevent_default(o){return function(e){return e.preventDefault(),o.call(this,e)}}function stop_propagation(o){return function(e){return e.stopPropagation(),o.call(this,e)}}function attr(o,e,t){t==null?o.removeAttribute(e):o.getAttribute(e)!==t&&o.setAttribute(e,t)}const always_set_through_set_attribute=["width","height"];function set_attributes(o,e){const t=Object.getOwnPropertyDescriptors(o.__proto__);for(const n in e)e[n]==null?o.removeAttribute(n):n==="style"?o.style.cssText=e[n]:n==="__value"?o.value=o[n]=e[n]:t[n]&&t[n].set&&always_set_through_set_attribute.indexOf(n)===-1?o[n]=e[n]:attr(o,n,e[n])}function set_custom_element_data(o,e,t){e in o?o[e]=typeof o[e]=="boolean"&&t===""?!0:t:attr(o,e,t)}function init_binding_group(o){let e;return{p(...t){e=t,e.forEach(n=>o.push(n))},r(){e.forEach(t=>o.splice(o.indexOf(t),1))}}}function children(o){return Array.from(o.childNodes)}function set_data(o,e){e=""+e,o.data!==e&&(o.data=e)}function set_data_contenteditable(o,e){e=""+e,o.wholeText!==e&&(o.data=e)}function set_data_maybe_contenteditable(o,e,t){~contenteditable_truthy_values.indexOf(t)?set_data_contenteditable(o,e):set_data(o,e)}function set_input_value(o,e){o.value=e??""}function set_style(o,e,t,n){t==null?o.style.removeProperty(e):o.style.setProperty(e,t,n?"important":"")}function select_option(o,e,t){for(let n=0;n<o.options.length;n+=1){const r=o.options[n];if(r.__value===e){r.selected=!0;return}}(!t||e!==void 0)&&(o.selectedIndex=-1)}function select_options(o,e){for(let t=0;t<o.options.length;t+=1){const n=o.options[t];n.selected=~e.indexOf(n.__value)}}let crossorigin;function is_crossorigin(){if(crossorigin===void 0){crossorigin=!1;try{typeof window<"u"&&window.parent&&window.parent.document}catch{crossorigin=!0}}return crossorigin}function add_iframe_resize_listener(o,e){getComputedStyle(o).position==="static"&&(o.style.position="relative");const n=element("iframe");n.setAttribute("style","display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;"),n.setAttribute("aria-hidden","true"),n.tabIndex=-1;const r=is_crossorigin();let a;return r?(n.src="data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}<\/script>",a=listen(window,"message",s=>{s.source===n.contentWindow&&e()})):(n.src="about:blank",n.onload=()=>{a=listen(n.contentWindow,"resize",e),e()}),append(o,n),()=>{(r||a&&n.contentWindow)&&a(),detach(n)}}function toggle_class(o,e,t){o.classList.toggle(e,!!t)}function custom_event(o,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(o,{detail:e,bubbles:t,cancelable:n})}class HtmlTag{constructor(e=!1){Mn(this,"is_svg",!1);Mn(this,"e");Mn(this,"n");Mn(this,"t");Mn(this,"a");this.is_svg=e,this.e=this.n=null}c(e){this.h(e)}m(e,t,n=null){this.e||(this.is_svg?this.e=svg_element(t.nodeName):this.e=element(t.nodeType===11?"TEMPLATE":t.nodeName),this.t=t.tagName!=="TEMPLATE"?t:t.content,this.c(e)),this.i(n)}h(e){this.e.innerHTML=e,this.n=Array.from(this.e.nodeName==="TEMPLATE"?this.e.content.childNodes:this.e.childNodes)}i(e){for(let t=0;t<this.n.length;t+=1)insert(this.t,this.n[t],e)}p(e){this.d(),this.h(e),this.i(this.a)}d(){this.n.forEach(detach)}}function construct_svelte_component(o,e){return new o(e)}let current_component;function set_current_component(o){current_component=o}function get_current_component(){if(!current_component)throw new Error("Function called outside component initialization");return current_component}function beforeUpdate(o){get_current_component().$$.before_update.push(o)}function onMount(o){get_current_component().$$.on_mount.push(o)}function afterUpdate(o){get_current_component().$$.after_update.push(o)}function onDestroy(o){get_current_component().$$.on_destroy.push(o)}function createEventDispatcher(){const o=get_current_component();return(e,t,{cancelable:n=!1}={})=>{const r=o.$$.callbacks[e];if(r){const a=custom_event(e,t,{cancelable:n});return r.slice().forEach(s=>{s.call(o,a)}),!a.defaultPrevented}return!0}}function setContext(o,e){return get_current_component().$$.context.set(o,e),e}function getContext(o){return get_current_component().$$.context.get(o)}function bubble(o,e){const t=o.$$.callbacks[e.type];t&&t.slice().forEach(n=>n.call(this,e))}const dirty_components=[],binding_callbacks=[];let render_callbacks=[];const flush_callbacks=[],resolved_promise=Promise.resolve();let update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function tick(){return schedule_update(),resolved_promise}function add_render_callback(o){render_callbacks.push(o)}function add_flush_callback(o){flush_callbacks.push(o)}const seen_callbacks=new Set;let flushidx=0;function flush(){if(flushidx!==0)return;const o=current_component;do{try{for(;flushidx<dirty_components.length;){const e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){const t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length);for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(o)}function update(o){if(o.fragment!==null){o.update(),run_all(o.before_update);const e=o.dirty;o.dirty=[-1],o.fragment&&o.fragment.p(o.ctx,e),o.after_update.forEach(add_render_callback)}}function flush_render_callbacks(o){const e=[],t=[];render_callbacks.forEach(n=>o.indexOf(n)===-1?e.push(n):t.push(n)),t.forEach(n=>n()),render_callbacks=e}const outroing=new Set;let outros;function group_outros(){outros={r:0,c:[],p:outros}}function check_outros(){outros.r||run_all(outros.c),outros=outros.p}function transition_in(o,e){o&&o.i&&(outroing.delete(o),o.i(e))}function transition_out(o,e,t,n){if(o&&o.o){if(outroing.has(o))return;outroing.add(o),outros.c.push(()=>{outroing.delete(o),n&&(t&&o.d(1),n())}),o.o(e)}else n&&n()}function handle_promise(o,e){const t=e.token={};function n(r,a,s,l){if(e.token!==t)return;e.resolved=l;let u=e.ctx;s!==void 0&&(u=u.slice(),u[s]=l);const d=r&&(e.current=r)(u);let f=!1;e.block&&(e.blocks?e.blocks.forEach((m,h)=>{h!==a&&m&&(group_outros(),transition_out(m,1,1,()=>{e.blocks[h]===m&&(e.blocks[h]=null)}),check_outros())}):e.block.d(1),d.c(),transition_in(d,1),d.m(e.mount(),e.anchor),f=!0),e.block=d,e.blocks&&(e.blocks[a]=d),f&&flush()}if(is_promise(o)){const r=get_current_component();if(o.then(a=>{set_current_component(r),n(e.then,1,e.value,a),set_current_component(null)},a=>{if(set_current_component(r),n(e.catch,2,e.error,a),set_current_component(null),!e.hasCatch)throw a}),e.current!==e.pending)return n(e.pending,0),!0}else{if(e.current!==e.then)return n(e.then,1,e.value,o),!0;e.resolved=o}}function update_await_block_branch(o,e,t){const n=e.slice(),{resolved:r}=o;o.current===o.then&&(n[o.value]=r),o.current===o.catch&&(n[o.error]=r),o.block.p(n,t)}function ensure_array_like(o){return(o==null?void 0:o.length)!==void 0?o:Array.from(o)}function destroy_block(o,e){o.d(1),e.delete(o.key)}function outro_and_destroy_block(o,e){transition_out(o,1,1,()=>{e.delete(o.key)})}function update_keyed_each(o,e,t,n,r,a,s,l,u,d,f,m){let h=o.length,p=a.length,g=h;const b={};for(;g--;)b[o[g].key]=g;const v=[],y=new Map,C=new Map,E=[];for(g=p;g--;){const $=m(r,a,g),S=t($);let I=s.get(S);I?n&&E.push(()=>I.p($,e)):(I=d(S,$),I.c()),y.set(S,v[g]=I),S in b&&C.set(S,Math.abs(g-b[S]))}const A=new Set,k=new Set;function T($){transition_in($,1),$.m(l,f),s.set($.key,$),f=$.first,p--}for(;h&&p;){const $=v[p-1],S=o[h-1],I=$.key,R=S.key;$===S?(f=$.first,h--,p--):y.has(R)?!s.has(I)||A.has(I)?T($):k.has(R)?h--:C.get(I)>C.get(R)?(k.add(I),T($)):(A.add(R),h--):(u(S,s),h--)}for(;h--;){const $=o[h];y.has($.key)||u($,s)}for(;p;)T(v[p-1]);return run_all(E),v}function get_spread_update(o,e){const t={},n={},r={$$scope:1};let a=o.length;for(;a--;){const s=o[a],l=e[a];if(l){for(const u in s)u in l||(n[u]=1);for(const u in l)r[u]||(t[u]=l[u],r[u]=1);o[a]=l}else for(const u in s)r[u]=1}for(const s in n)s in t||(t[s]=void 0);return t}function get_spread_object(o){return typeof o=="object"&&o!==null?o:{}}function bind(o,e,t){const n=o.$$.props[e];n!==void 0&&(o.$$.bound[n]=t,t(o.$$.ctx[n]))}function create_component(o){o&&o.c()}function mount_component(o,e,t){const{fragment:n,after_update:r}=o.$$;n&&n.m(e,t),add_render_callback(()=>{const a=o.$$.on_mount.map(run).filter(is_function);o.$$.on_destroy?o.$$.on_destroy.push(...a):run_all(a),o.$$.on_mount=[]}),r.forEach(add_render_callback)}function destroy_component(o,e){const t=o.$$;t.fragment!==null&&(flush_render_callbacks(t.after_update),run_all(t.on_destroy),t.fragment&&t.fragment.d(e),t.on_destroy=t.fragment=null,t.ctx=[])}function make_dirty(o,e){o.$$.dirty[0]===-1&&(dirty_components.push(o),schedule_update(),o.$$.dirty.fill(0)),o.$$.dirty[e/31|0]|=1<<e%31}function init(o,e,t,n,r,a,s,l=[-1]){const u=current_component;set_current_component(o);const d=o.$$={fragment:null,ctx:[],props:a,update:noop$1,not_equal:r,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(e.context||(u?u.$$.context:[])),callbacks:blank_object(),dirty:l,skip_bound:!1,root:e.target||u.$$.root};s&&s(d.root);let f=!1;if(d.ctx=t?t(o,e.props||{},(m,h,...p)=>{const g=p.length?p[0]:h;return d.ctx&&r(d.ctx[m],d.ctx[m]=g)&&(!d.skip_bound&&d.bound[m]&&d.bound[m](g),f&&make_dirty(o,m)),h}):[],d.update(),f=!0,run_all(d.before_update),d.fragment=n?n(d.ctx):!1,e.target){if(e.hydrate){const m=children(e.target);d.fragment&&d.fragment.l(m),m.forEach(detach)}else d.fragment&&d.fragment.c();e.intro&&transition_in(o.$$.fragment),mount_component(o,e.target,e.anchor),flush()}set_current_component(u)}class SvelteComponent{constructor(){Mn(this,"$$");Mn(this,"$$set")}$destroy(){destroy_component(this,1),this.$destroy=noop$1}$on(e,t){if(!is_function(t))return noop$1;const n=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return n.push(t),()=>{const r=n.indexOf(t);r!==-1&&n.splice(r,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}const PUBLIC_VERSION="4";typeof window<"u"&&(window.__svelte||(window.__svelte={v:new Set})).v.add(PUBLIC_VERSION);const subscriber_queue=[];function readable(o,e){return{subscribe:writable(o,e).subscribe}}function writable(o,e=noop$1){let t;const n=new Set;function r(l){if(safe_not_equal(o,l)&&(o=l,t)){const u=!subscriber_queue.length;for(const d of n)d[1](),subscriber_queue.push(d,o);if(u){for(let d=0;d<subscriber_queue.length;d+=2)subscriber_queue[d][0](subscriber_queue[d+1]);subscriber_queue.length=0}}}function a(l){r(l(o))}function s(l,u=noop$1){const d=[l,u];return n.add(d),n.size===1&&(t=e(r,a)||noop$1),l(o),()=>{n.delete(d),n.size===0&&t&&(t(),t=null)}}return{set:r,update:a,subscribe:s}}function derived(o,e,t){const n=!Array.isArray(o),r=n?[o]:o;if(!r.every(Boolean))throw new Error("derived() expects stores as input, got a falsy value");const a=e.length<2;return readable(t,(s,l)=>{let u=!1;const d=[];let f=0,m=noop$1;const h=()=>{if(f)return;m();const g=e(n?d[0]:d,s,l);a?s(g):m=is_function(g)?g:noop$1},p=r.map((g,b)=>subscribe(g,v=>{d[b]=v,f&=~(1<<b),u&&h()},()=>{f|=1<<b}));return u=!0,h(),function(){run_all(p),m(),u=!1}})}function commonjsRequire(o){throw new Error('Could not dynamically require "'+o+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var localforage$1={exports:{}};/*!
    localForage -- Offline Storage, Improved
    Version 1.10.0
    https://localforage.github.io/localForage
    (c) 2013-2017 Mozilla, Apache License 2.0
*/(function(o,e){(function(t){o.exports=t()})(function(){return function t(n,r,a){function s(d,f){if(!r[d]){if(!n[d]){var m=typeof commonjsRequire=="function"&&commonjsRequire;if(!f&&m)return m(d,!0);if(l)return l(d,!0);var h=new Error("Cannot find module '"+d+"'");throw h.code="MODULE_NOT_FOUND",h}var p=r[d]={exports:{}};n[d][0].call(p.exports,function(g){var b=n[d][1][g];return s(b||g)},p,p.exports,t,n,r,a)}return r[d].exports}for(var l=typeof commonjsRequire=="function"&&commonjsRequire,u=0;u<a.length;u++)s(a[u]);return s}({1:[function(t,n,r){(function(a){var s=a.MutationObserver||a.WebKitMutationObserver,l;if(s){var u=0,d=new s(g),f=a.document.createTextNode("");d.observe(f,{characterData:!0}),l=function(){f.data=u=++u%2}}else if(!a.setImmediate&&typeof a.MessageChannel<"u"){var m=new a.MessageChannel;m.port1.onmessage=g,l=function(){m.port2.postMessage(0)}}else"document"in a&&"onreadystatechange"in a.document.createElement("script")?l=function(){var v=a.document.createElement("script");v.onreadystatechange=function(){g(),v.onreadystatechange=null,v.parentNode.removeChild(v),v=null},a.document.documentElement.appendChild(v)}:l=function(){setTimeout(g,0)};var h,p=[];function g(){h=!0;for(var v,y,C=p.length;C;){for(y=p,p=[],v=-1;++v<C;)y[v]();C=p.length}h=!1}n.exports=b;function b(v){p.push(v)===1&&!h&&l()}}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{}],2:[function(t,n,r){var a=t(1);function s(){}var l={},u=["REJECTED"],d=["FULFILLED"],f=["PENDING"];n.exports=m;function m(k){if(typeof k!="function")throw new TypeError("resolver must be a function");this.state=f,this.queue=[],this.outcome=void 0,k!==s&&b(this,k)}m.prototype.catch=function(k){return this.then(null,k)},m.prototype.then=function(k,T){if(typeof k!="function"&&this.state===d||typeof T!="function"&&this.state===u)return this;var $=new this.constructor(s);if(this.state!==f){var S=this.state===d?k:T;p($,S,this.outcome)}else this.queue.push(new h($,k,T));return $};function h(k,T,$){this.promise=k,typeof T=="function"&&(this.onFulfilled=T,this.callFulfilled=this.otherCallFulfilled),typeof $=="function"&&(this.onRejected=$,this.callRejected=this.otherCallRejected)}h.prototype.callFulfilled=function(k){l.resolve(this.promise,k)},h.prototype.otherCallFulfilled=function(k){p(this.promise,this.onFulfilled,k)},h.prototype.callRejected=function(k){l.reject(this.promise,k)},h.prototype.otherCallRejected=function(k){p(this.promise,this.onRejected,k)};function p(k,T,$){a(function(){var S;try{S=T($)}catch(I){return l.reject(k,I)}S===k?l.reject(k,new TypeError("Cannot resolve promise with itself")):l.resolve(k,S)})}l.resolve=function(k,T){var $=v(g,T);if($.status==="error")return l.reject(k,$.value);var S=$.value;if(S)b(k,S);else{k.state=d,k.outcome=T;for(var I=-1,R=k.queue.length;++I<R;)k.queue[I].callFulfilled(T)}return k},l.reject=function(k,T){k.state=u,k.outcome=T;for(var $=-1,S=k.queue.length;++$<S;)k.queue[$].callRejected(T);return k};function g(k){var T=k&&k.then;if(k&&(typeof k=="object"||typeof k=="function")&&typeof T=="function")return function(){T.apply(k,arguments)}}function b(k,T){var $=!1;function S(M){$||($=!0,l.reject(k,M))}function I(M){$||($=!0,l.resolve(k,M))}function R(){T(I,S)}var N=v(R);N.status==="error"&&S(N.value)}function v(k,T){var $={};try{$.value=k(T),$.status="success"}catch(S){$.status="error",$.value=S}return $}m.resolve=y;function y(k){return k instanceof this?k:l.resolve(new this(s),k)}m.reject=C;function C(k){var T=new this(s);return l.reject(T,k)}m.all=E;function E(k){var T=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var $=k.length,S=!1;if(!$)return this.resolve([]);for(var I=new Array($),R=0,N=-1,M=new this(s);++N<$;)F(k[N],N);return M;function F(D,x){T.resolve(D).then(B,function(K){S||(S=!0,l.reject(M,K))});function B(K){I[x]=K,++R===$&&!S&&(S=!0,l.resolve(M,I))}}}m.race=A;function A(k){var T=this;if(Object.prototype.toString.call(k)!=="[object Array]")return this.reject(new TypeError("must be an array"));var $=k.length,S=!1;if(!$)return this.resolve([]);for(var I=-1,R=new this(s);++I<$;)N(k[I]);return R;function N(M){T.resolve(M).then(function(F){S||(S=!0,l.resolve(R,F))},function(F){S||(S=!0,l.reject(R,F))})}}},{1:1}],3:[function(t,n,r){(function(a){typeof a.Promise!="function"&&(a.Promise=t(2))}).call(this,typeof commonjsGlobal<"u"?commonjsGlobal:typeof self<"u"?self:typeof window<"u"?window:{})},{2:2}],4:[function(t,n,r){var a=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(ne){return typeof ne}:function(ne){return ne&&typeof Symbol=="function"&&ne.constructor===Symbol&&ne!==Symbol.prototype?"symbol":typeof ne};function s(ne,ye){if(!(ne instanceof ye))throw new TypeError("Cannot call a class as a function")}function l(){try{if(typeof indexedDB<"u")return indexedDB;if(typeof webkitIndexedDB<"u")return webkitIndexedDB;if(typeof mozIndexedDB<"u")return mozIndexedDB;if(typeof OIndexedDB<"u")return OIndexedDB;if(typeof msIndexedDB<"u")return msIndexedDB}catch{return}}var u=l();function d(){try{if(!u||!u.open)return!1;var ne=typeof openDatabase<"u"&&/(Safari|iPhone|iPad|iPod)/.test(navigator.userAgent)&&!/Chrome/.test(navigator.userAgent)&&!/BlackBerry/.test(navigator.platform),ye=typeof fetch=="function"&&fetch.toString().indexOf("[native code")!==-1;return(!ne||ye)&&typeof indexedDB<"u"&&typeof IDBKeyRange<"u"}catch{return!1}}function f(ne,ye){ne=ne||[],ye=ye||{};try{return new Blob(ne,ye)}catch(be){if(be.name!=="TypeError")throw be;for(var le=typeof BlobBuilder<"u"?BlobBuilder:typeof MSBlobBuilder<"u"?MSBlobBuilder:typeof MozBlobBuilder<"u"?MozBlobBuilder:WebKitBlobBuilder,we=new le,Se=0;Se<ne.length;Se+=1)we.append(ne[Se]);return we.getBlob(ye.type)}}typeof Promise>"u"&&t(3);var m=Promise;function h(ne,ye){ye&&ne.then(function(le){ye(null,le)},function(le){ye(le)})}function p(ne,ye,le){typeof ye=="function"&&ne.then(ye),typeof le=="function"&&ne.catch(le)}function g(ne){return typeof ne!="string"&&(console.warn(ne+" used as a key, but it is not a string."),ne=String(ne)),ne}function b(){if(arguments.length&&typeof arguments[arguments.length-1]=="function")return arguments[arguments.length-1]}var v="local-forage-detect-blob-support",y=void 0,C={},E=Object.prototype.toString,A="readonly",k="readwrite";function T(ne){for(var ye=ne.length,le=new ArrayBuffer(ye),we=new Uint8Array(le),Se=0;Se<ye;Se++)we[Se]=ne.charCodeAt(Se);return le}function $(ne){return new m(function(ye){var le=ne.transaction(v,k),we=f([""]);le.objectStore(v).put(we,"key"),le.onabort=function(Se){Se.preventDefault(),Se.stopPropagation(),ye(!1)},le.oncomplete=function(){var Se=navigator.userAgent.match(/Chrome\/(\d+)/),be=navigator.userAgent.match(/Edge\//);ye(be||!Se||parseInt(Se[1],10)>=43)}}).catch(function(){return!1})}function S(ne){return typeof y=="boolean"?m.resolve(y):$(ne).then(function(ye){return y=ye,y})}function I(ne){var ye=C[ne.name],le={};le.promise=new m(function(we,Se){le.resolve=we,le.reject=Se}),ye.deferredOperations.push(le),ye.dbReady?ye.dbReady=ye.dbReady.then(function(){return le.promise}):ye.dbReady=le.promise}function R(ne){var ye=C[ne.name],le=ye.deferredOperations.pop();if(le)return le.resolve(),le.promise}function N(ne,ye){var le=C[ne.name],we=le.deferredOperations.pop();if(we)return we.reject(ye),we.promise}function M(ne,ye){return new m(function(le,we){if(C[ne.name]=C[ne.name]||H(),ne.db)if(ye)I(ne),ne.db.close();else return le(ne.db);var Se=[ne.name];ye&&Se.push(ne.version);var be=u.open.apply(u,Se);ye&&(be.onupgradeneeded=function(Fe){var Ve=be.result;try{Ve.createObjectStore(ne.storeName),Fe.oldVersion<=1&&Ve.createObjectStore(v)}catch(Xe){if(Xe.name==="ConstraintError")console.warn('The database "'+ne.name+'" has been upgraded from version '+Fe.oldVersion+" to version "+Fe.newVersion+', but the storage "'+ne.storeName+'" already exists.');else throw Xe}}),be.onerror=function(Fe){Fe.preventDefault(),we(be.error)},be.onsuccess=function(){var Fe=be.result;Fe.onversionchange=function(Ve){Ve.target.close()},le(Fe),R(ne)}})}function F(ne){return M(ne,!1)}function D(ne){return M(ne,!0)}function x(ne,ye){if(!ne.db)return!0;var le=!ne.db.objectStoreNames.contains(ne.storeName),we=ne.version<ne.db.version,Se=ne.version>ne.db.version;if(we&&(ne.version!==ye&&console.warn('The database "'+ne.name+`" can't be downgraded from version `+ne.db.version+" to version "+ne.version+"."),ne.version=ne.db.version),Se||le){if(le){var be=ne.db.version+1;be>ne.version&&(ne.version=be)}return!0}return!1}function B(ne){return new m(function(ye,le){var we=new FileReader;we.onerror=le,we.onloadend=function(Se){var be=btoa(Se.target.result||"");ye({__local_forage_encoded_blob:!0,data:be,type:ne.type})},we.readAsBinaryString(ne)})}function K(ne){var ye=T(atob(ne.data));return f([ye],{type:ne.type})}function U(ne){return ne&&ne.__local_forage_encoded_blob}function G(ne){var ye=this,le=ye._initReady().then(function(){var we=C[ye._dbInfo.name];if(we&&we.dbReady)return we.dbReady});return p(le,ne,ne),le}function W(ne){I(ne);for(var ye=C[ne.name],le=ye.forages,we=0;we<le.length;we++){var Se=le[we];Se._dbInfo.db&&(Se._dbInfo.db.close(),Se._dbInfo.db=null)}return ne.db=null,F(ne).then(function(be){return ne.db=be,x(ne)?D(ne):be}).then(function(be){ne.db=ye.db=be;for(var Fe=0;Fe<le.length;Fe++)le[Fe]._dbInfo.db=be}).catch(function(be){throw N(ne,be),be})}function q(ne,ye,le,we){we===void 0&&(we=1);try{var Se=ne.db.transaction(ne.storeName,ye);le(null,Se)}catch(be){if(we>0&&(!ne.db||be.name==="InvalidStateError"||be.name==="NotFoundError"))return m.resolve().then(function(){if(!ne.db||be.name==="NotFoundError"&&!ne.db.objectStoreNames.contains(ne.storeName)&&ne.version<=ne.db.version)return ne.db&&(ne.version=ne.db.version+1),D(ne)}).then(function(){return W(ne).then(function(){q(ne,ye,le,we-1)})}).catch(le);le(be)}}function H(){return{forages:[],db:null,dbReady:null,deferredOperations:[]}}function z(ne){var ye=this,le={db:null};if(ne)for(var we in ne)le[we]=ne[we];var Se=C[le.name];Se||(Se=H(),C[le.name]=Se),Se.forages.push(ye),ye._initReady||(ye._initReady=ye.ready,ye.ready=G);var be=[];function Fe(){return m.resolve()}for(var Ve=0;Ve<Se.forages.length;Ve++){var Xe=Se.forages[Ve];Xe!==ye&&be.push(Xe._initReady().catch(Fe))}var Ye=Se.forages.slice(0);return m.all(be).then(function(){return le.db=Se.db,F(le)}).then(function(tt){return le.db=tt,x(le,ye._defaultConfig.version)?D(le):tt}).then(function(tt){le.db=Se.db=tt,ye._dbInfo=le;for(var at=0;at<Ye.length;at++){var mt=Ye[at];mt!==ye&&(mt._dbInfo.db=le.db,mt._dbInfo.version=le.version)}})}function Y(ne,ye){var le=this;ne=g(ne);var we=new m(function(Se,be){le.ready().then(function(){q(le._dbInfo,A,function(Fe,Ve){if(Fe)return be(Fe);try{var Xe=Ve.objectStore(le._dbInfo.storeName),Ye=Xe.get(ne);Ye.onsuccess=function(){var tt=Ye.result;tt===void 0&&(tt=null),U(tt)&&(tt=K(tt)),Se(tt)},Ye.onerror=function(){be(Ye.error)}}catch(tt){be(tt)}})}).catch(be)});return h(we,ye),we}function V(ne,ye){var le=this,we=new m(function(Se,be){le.ready().then(function(){q(le._dbInfo,A,function(Fe,Ve){if(Fe)return be(Fe);try{var Xe=Ve.objectStore(le._dbInfo.storeName),Ye=Xe.openCursor(),tt=1;Ye.onsuccess=function(){var at=Ye.result;if(at){var mt=at.value;U(mt)&&(mt=K(mt));var _t=ne(mt,at.key,tt++);_t!==void 0?Se(_t):at.continue()}else Se()},Ye.onerror=function(){be(Ye.error)}}catch(at){be(at)}})}).catch(be)});return h(we,ye),we}function J(ne,ye,le){var we=this;ne=g(ne);var Se=new m(function(be,Fe){var Ve;we.ready().then(function(){return Ve=we._dbInfo,E.call(ye)==="[object Blob]"?S(Ve.db).then(function(Xe){return Xe?ye:B(ye)}):ye}).then(function(Xe){q(we._dbInfo,k,function(Ye,tt){if(Ye)return Fe(Ye);try{var at=tt.objectStore(we._dbInfo.storeName);Xe===null&&(Xe=void 0);var mt=at.put(Xe,ne);tt.oncomplete=function(){Xe===void 0&&(Xe=null),be(Xe)},tt.onabort=tt.onerror=function(){var _t=mt.error?mt.error:mt.transaction.error;Fe(_t)}}catch(_t){Fe(_t)}})}).catch(Fe)});return h(Se,le),Se}function Q(ne,ye){var le=this;ne=g(ne);var we=new m(function(Se,be){le.ready().then(function(){q(le._dbInfo,k,function(Fe,Ve){if(Fe)return be(Fe);try{var Xe=Ve.objectStore(le._dbInfo.storeName),Ye=Xe.delete(ne);Ve.oncomplete=function(){Se()},Ve.onerror=function(){be(Ye.error)},Ve.onabort=function(){var tt=Ye.error?Ye.error:Ye.transaction.error;be(tt)}}catch(tt){be(tt)}})}).catch(be)});return h(we,ye),we}function X(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){q(ye._dbInfo,k,function(be,Fe){if(be)return Se(be);try{var Ve=Fe.objectStore(ye._dbInfo.storeName),Xe=Ve.clear();Fe.oncomplete=function(){we()},Fe.onabort=Fe.onerror=function(){var Ye=Xe.error?Xe.error:Xe.transaction.error;Se(Ye)}}catch(Ye){Se(Ye)}})}).catch(Se)});return h(le,ne),le}function ie(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){q(ye._dbInfo,A,function(be,Fe){if(be)return Se(be);try{var Ve=Fe.objectStore(ye._dbInfo.storeName),Xe=Ve.count();Xe.onsuccess=function(){we(Xe.result)},Xe.onerror=function(){Se(Xe.error)}}catch(Ye){Se(Ye)}})}).catch(Se)});return h(le,ne),le}function ce(ne,ye){var le=this,we=new m(function(Se,be){if(ne<0){Se(null);return}le.ready().then(function(){q(le._dbInfo,A,function(Fe,Ve){if(Fe)return be(Fe);try{var Xe=Ve.objectStore(le._dbInfo.storeName),Ye=!1,tt=Xe.openKeyCursor();tt.onsuccess=function(){var at=tt.result;if(!at){Se(null);return}ne===0||Ye?Se(at.key):(Ye=!0,at.advance(ne))},tt.onerror=function(){be(tt.error)}}catch(at){be(at)}})}).catch(be)});return h(we,ye),we}function de(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){q(ye._dbInfo,A,function(be,Fe){if(be)return Se(be);try{var Ve=Fe.objectStore(ye._dbInfo.storeName),Xe=Ve.openKeyCursor(),Ye=[];Xe.onsuccess=function(){var tt=Xe.result;if(!tt){we(Ye);return}Ye.push(tt.key),tt.continue()},Xe.onerror=function(){Se(Xe.error)}}catch(tt){Se(tt)}})}).catch(Se)});return h(le,ne),le}function se(ne,ye){ye=b.apply(this,arguments);var le=this.config();ne=typeof ne!="function"&&ne||{},ne.name||(ne.name=ne.name||le.name,ne.storeName=ne.storeName||le.storeName);var we=this,Se;if(!ne.name)Se=m.reject("Invalid arguments");else{var be=ne.name===le.name&&we._dbInfo.db,Fe=be?m.resolve(we._dbInfo.db):F(ne).then(function(Ve){var Xe=C[ne.name],Ye=Xe.forages;Xe.db=Ve;for(var tt=0;tt<Ye.length;tt++)Ye[tt]._dbInfo.db=Ve;return Ve});ne.storeName?Se=Fe.then(function(Ve){if(Ve.objectStoreNames.contains(ne.storeName)){var Xe=Ve.version+1;I(ne);var Ye=C[ne.name],tt=Ye.forages;Ve.close();for(var at=0;at<tt.length;at++){var mt=tt[at];mt._dbInfo.db=null,mt._dbInfo.version=Xe}var _t=new m(function(ee,ae){var _e=u.open(ne.name,Xe);_e.onerror=function(Re){var Ge=_e.result;Ge.close(),ae(Re)},_e.onupgradeneeded=function(){var Re=_e.result;Re.deleteObjectStore(ne.storeName)},_e.onsuccess=function(){var Re=_e.result;Re.close(),ee(Re)}});return _t.then(function(ee){Ye.db=ee;for(var ae=0;ae<tt.length;ae++){var _e=tt[ae];_e._dbInfo.db=ee,R(_e._dbInfo)}}).catch(function(ee){throw(N(ne,ee)||m.resolve()).catch(function(){}),ee})}}):Se=Fe.then(function(Ve){I(ne);var Xe=C[ne.name],Ye=Xe.forages;Ve.close();for(var tt=0;tt<Ye.length;tt++){var at=Ye[tt];at._dbInfo.db=null}var mt=new m(function(_t,ee){var ae=u.deleteDatabase(ne.name);ae.onerror=function(){var _e=ae.result;_e&&_e.close(),ee(ae.error)},ae.onblocked=function(){console.warn('dropInstance blocked for database "'+ne.name+'" until all open connections are closed')},ae.onsuccess=function(){var _e=ae.result;_e&&_e.close(),_t(_e)}});return mt.then(function(_t){Xe.db=_t;for(var ee=0;ee<Ye.length;ee++){var ae=Ye[ee];R(ae._dbInfo)}}).catch(function(_t){throw(N(ne,_t)||m.resolve()).catch(function(){}),_t})})}return h(Se,ye),Se}var me={_driver:"asyncStorage",_initStorage:z,_support:d(),iterate:V,getItem:Y,setItem:J,removeItem:Q,clear:X,length:ie,key:ce,keys:de,dropInstance:se};function ue(){return typeof openDatabase=="function"}var he="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",pe="~~local_forage_type~",Oe=/^~~local_forage_type~([^~]+)~/,qe="__lfsc__:",et=qe.length,Ue="arbf",fe="blob",Ie="si08",We="ui08",$e="uic8",Le="si16",ze="si32",re="ur16",ge="ui32",Be="fl32",Ze="fl64",Pe=et+Ue.length,Ee=Object.prototype.toString;function Ce(ne){var ye=ne.length*.75,le=ne.length,we,Se=0,be,Fe,Ve,Xe;ne[ne.length-1]==="="&&(ye--,ne[ne.length-2]==="="&&ye--);var Ye=new ArrayBuffer(ye),tt=new Uint8Array(Ye);for(we=0;we<le;we+=4)be=he.indexOf(ne[we]),Fe=he.indexOf(ne[we+1]),Ve=he.indexOf(ne[we+2]),Xe=he.indexOf(ne[we+3]),tt[Se++]=be<<2|Fe>>4,tt[Se++]=(Fe&15)<<4|Ve>>2,tt[Se++]=(Ve&3)<<6|Xe&63;return Ye}function je(ne){var ye=new Uint8Array(ne),le="",we;for(we=0;we<ye.length;we+=3)le+=he[ye[we]>>2],le+=he[(ye[we]&3)<<4|ye[we+1]>>4],le+=he[(ye[we+1]&15)<<2|ye[we+2]>>6],le+=he[ye[we+2]&63];return ye.length%3===2?le=le.substring(0,le.length-1)+"=":ye.length%3===1&&(le=le.substring(0,le.length-2)+"=="),le}function pt(ne,ye){var le="";if(ne&&(le=Ee.call(ne)),ne&&(le==="[object ArrayBuffer]"||ne.buffer&&Ee.call(ne.buffer)==="[object ArrayBuffer]")){var we,Se=qe;ne instanceof ArrayBuffer?(we=ne,Se+=Ue):(we=ne.buffer,le==="[object Int8Array]"?Se+=Ie:le==="[object Uint8Array]"?Se+=We:le==="[object Uint8ClampedArray]"?Se+=$e:le==="[object Int16Array]"?Se+=Le:le==="[object Uint16Array]"?Se+=re:le==="[object Int32Array]"?Se+=ze:le==="[object Uint32Array]"?Se+=ge:le==="[object Float32Array]"?Se+=Be:le==="[object Float64Array]"?Se+=Ze:ye(new Error("Failed to get type for BinaryArray"))),ye(Se+je(we))}else if(le==="[object Blob]"){var be=new FileReader;be.onload=function(){var Fe=pe+ne.type+"~"+je(this.result);ye(qe+fe+Fe)},be.readAsArrayBuffer(ne)}else try{ye(JSON.stringify(ne))}catch(Fe){console.error("Couldn't convert value into a JSON string: ",ne),ye(null,Fe)}}function wt(ne){if(ne.substring(0,et)!==qe)return JSON.parse(ne);var ye=ne.substring(Pe),le=ne.substring(et,Pe),we;if(le===fe&&Oe.test(ye)){var Se=ye.match(Oe);we=Se[1],ye=ye.substring(Se[0].length)}var be=Ce(ye);switch(le){case Ue:return be;case fe:return f([be],{type:we});case Ie:return new Int8Array(be);case We:return new Uint8Array(be);case $e:return new Uint8ClampedArray(be);case Le:return new Int16Array(be);case re:return new Uint16Array(be);case ze:return new Int32Array(be);case ge:return new Uint32Array(be);case Be:return new Float32Array(be);case Ze:return new Float64Array(be);default:throw new Error("Unkown type: "+le)}}var ut={serialize:pt,deserialize:wt,stringToBuffer:Ce,bufferToString:je};function Ct(ne,ye,le,we){ne.executeSql("CREATE TABLE IF NOT EXISTS "+ye.storeName+" (id INTEGER PRIMARY KEY, key unique, value)",[],le,we)}function xt(ne){var ye=this,le={db:null};if(ne)for(var we in ne)le[we]=typeof ne[we]!="string"?ne[we].toString():ne[we];var Se=new m(function(be,Fe){try{le.db=openDatabase(le.name,String(le.version),le.description,le.size)}catch(Ve){return Fe(Ve)}le.db.transaction(function(Ve){Ct(Ve,le,function(){ye._dbInfo=le,be()},function(Xe,Ye){Fe(Ye)})},Fe)});return le.serializer=ut,Se}function ht(ne,ye,le,we,Se,be){ne.executeSql(le,we,Se,function(Fe,Ve){Ve.code===Ve.SYNTAX_ERR?Fe.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name = ?",[ye.storeName],function(Xe,Ye){Ye.rows.length?be(Xe,Ve):Ct(Xe,ye,function(){Xe.executeSql(le,we,Se,be)},be)},be):be(Fe,Ve)},be)}function Rt(ne,ye){var le=this;ne=g(ne);var we=new m(function(Se,be){le.ready().then(function(){var Fe=le._dbInfo;Fe.db.transaction(function(Ve){ht(Ve,Fe,"SELECT * FROM "+Fe.storeName+" WHERE key = ? LIMIT 1",[ne],function(Xe,Ye){var tt=Ye.rows.length?Ye.rows.item(0).value:null;tt&&(tt=Fe.serializer.deserialize(tt)),Se(tt)},function(Xe,Ye){be(Ye)})})}).catch(be)});return h(we,ye),we}function Ae(ne,ye){var le=this,we=new m(function(Se,be){le.ready().then(function(){var Fe=le._dbInfo;Fe.db.transaction(function(Ve){ht(Ve,Fe,"SELECT * FROM "+Fe.storeName,[],function(Xe,Ye){for(var tt=Ye.rows,at=tt.length,mt=0;mt<at;mt++){var _t=tt.item(mt),ee=_t.value;if(ee&&(ee=Fe.serializer.deserialize(ee)),ee=ne(ee,_t.key,mt+1),ee!==void 0){Se(ee);return}}Se()},function(Xe,Ye){be(Ye)})})}).catch(be)});return h(we,ye),we}function Me(ne,ye,le,we){var Se=this;ne=g(ne);var be=new m(function(Fe,Ve){Se.ready().then(function(){ye===void 0&&(ye=null);var Xe=ye,Ye=Se._dbInfo;Ye.serializer.serialize(ye,function(tt,at){at?Ve(at):Ye.db.transaction(function(mt){ht(mt,Ye,"INSERT OR REPLACE INTO "+Ye.storeName+" (key, value) VALUES (?, ?)",[ne,tt],function(){Fe(Xe)},function(_t,ee){Ve(ee)})},function(mt){if(mt.code===mt.QUOTA_ERR){if(we>0){Fe(Me.apply(Se,[ne,Xe,le,we-1]));return}Ve(mt)}})})}).catch(Ve)});return h(be,le),be}function xe(ne,ye,le){return Me.apply(this,[ne,ye,le,1])}function Qe(ne,ye){var le=this;ne=g(ne);var we=new m(function(Se,be){le.ready().then(function(){var Fe=le._dbInfo;Fe.db.transaction(function(Ve){ht(Ve,Fe,"DELETE FROM "+Fe.storeName+" WHERE key = ?",[ne],function(){Se()},function(Xe,Ye){be(Ye)})})}).catch(be)});return h(we,ye),we}function rt(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){var be=ye._dbInfo;be.db.transaction(function(Fe){ht(Fe,be,"DELETE FROM "+be.storeName,[],function(){we()},function(Ve,Xe){Se(Xe)})})}).catch(Se)});return h(le,ne),le}function ot(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){var be=ye._dbInfo;be.db.transaction(function(Fe){ht(Fe,be,"SELECT COUNT(key) as c FROM "+be.storeName,[],function(Ve,Xe){var Ye=Xe.rows.item(0).c;we(Ye)},function(Ve,Xe){Se(Xe)})})}).catch(Se)});return h(le,ne),le}function ft(ne,ye){var le=this,we=new m(function(Se,be){le.ready().then(function(){var Fe=le._dbInfo;Fe.db.transaction(function(Ve){ht(Ve,Fe,"SELECT key FROM "+Fe.storeName+" WHERE id = ? LIMIT 1",[ne+1],function(Xe,Ye){var tt=Ye.rows.length?Ye.rows.item(0).key:null;Se(tt)},function(Xe,Ye){be(Ye)})})}).catch(be)});return h(we,ye),we}function kt(ne){var ye=this,le=new m(function(we,Se){ye.ready().then(function(){var be=ye._dbInfo;be.db.transaction(function(Fe){ht(Fe,be,"SELECT key FROM "+be.storeName,[],function(Ve,Xe){for(var Ye=[],tt=0;tt<Xe.rows.length;tt++)Ye.push(Xe.rows.item(tt).key);we(Ye)},function(Ve,Xe){Se(Xe)})})}).catch(Se)});return h(le,ne),le}function $t(ne){return new m(function(ye,le){ne.transaction(function(we){we.executeSql("SELECT name FROM sqlite_master WHERE type='table' AND name <> '__WebKitDatabaseInfoTable__'",[],function(Se,be){for(var Fe=[],Ve=0;Ve<be.rows.length;Ve++)Fe.push(be.rows.item(Ve).name);ye({db:ne,storeNames:Fe})},function(Se,be){le(be)})},function(we){le(we)})})}function Lt(ne,ye){ye=b.apply(this,arguments);var le=this.config();ne=typeof ne!="function"&&ne||{},ne.name||(ne.name=ne.name||le.name,ne.storeName=ne.storeName||le.storeName);var we=this,Se;return ne.name?Se=new m(function(be){var Fe;ne.name===le.name?Fe=we._dbInfo.db:Fe=openDatabase(ne.name,"","",0),ne.storeName?be({db:Fe,storeNames:[ne.storeName]}):be($t(Fe))}).then(function(be){return new m(function(Fe,Ve){be.db.transaction(function(Xe){function Ye(_t){return new m(function(ee,ae){Xe.executeSql("DROP TABLE IF EXISTS "+_t,[],function(){ee()},function(_e,Re){ae(Re)})})}for(var tt=[],at=0,mt=be.storeNames.length;at<mt;at++)tt.push(Ye(be.storeNames[at]));m.all(tt).then(function(){Fe()}).catch(function(_t){Ve(_t)})},function(Xe){Ve(Xe)})})}):Se=m.reject("Invalid arguments"),h(Se,ye),Se}var Ut={_driver:"webSQLStorage",_initStorage:xt,_support:ue(),iterate:Ae,getItem:Rt,setItem:xe,removeItem:Qe,clear:rt,length:ot,key:ft,keys:kt,dropInstance:Lt};function rn(){try{return typeof localStorage<"u"&&"setItem"in localStorage&&!!localStorage.setItem}catch{return!1}}function zt(ne,ye){var le=ne.name+"/";return ne.storeName!==ye.storeName&&(le+=ne.storeName+"/"),le}function lt(){var ne="_localforage_support_test";try{return localStorage.setItem(ne,!0),localStorage.removeItem(ne),!1}catch{return!0}}function Cn(){return!lt()||localStorage.length>0}function an(ne){var ye=this,le={};if(ne)for(var we in ne)le[we]=ne[we];return le.keyPrefix=zt(ne,ye._defaultConfig),Cn()?(ye._dbInfo=le,le.serializer=ut,m.resolve()):m.reject()}function wn(ne){var ye=this,le=ye.ready().then(function(){for(var we=ye._dbInfo.keyPrefix,Se=localStorage.length-1;Se>=0;Se--){var be=localStorage.key(Se);be.indexOf(we)===0&&localStorage.removeItem(be)}});return h(le,ne),le}function vn(ne,ye){var le=this;ne=g(ne);var we=le.ready().then(function(){var Se=le._dbInfo,be=localStorage.getItem(Se.keyPrefix+ne);return be&&(be=Se.serializer.deserialize(be)),be});return h(we,ye),we}function _n(ne,ye){var le=this,we=le.ready().then(function(){for(var Se=le._dbInfo,be=Se.keyPrefix,Fe=be.length,Ve=localStorage.length,Xe=1,Ye=0;Ye<Ve;Ye++){var tt=localStorage.key(Ye);if(tt.indexOf(be)===0){var at=localStorage.getItem(tt);if(at&&(at=Se.serializer.deserialize(at)),at=ne(at,tt.substring(Fe),Xe++),at!==void 0)return at}}});return h(we,ye),we}function sn(ne,ye){var le=this,we=le.ready().then(function(){var Se=le._dbInfo,be;try{be=localStorage.key(ne)}catch{be=null}return be&&(be=be.substring(Se.keyPrefix.length)),be});return h(we,ye),we}function Yt(ne){var ye=this,le=ye.ready().then(function(){for(var we=ye._dbInfo,Se=localStorage.length,be=[],Fe=0;Fe<Se;Fe++){var Ve=localStorage.key(Fe);Ve.indexOf(we.keyPrefix)===0&&be.push(Ve.substring(we.keyPrefix.length))}return be});return h(le,ne),le}function nn(ne){var ye=this,le=ye.keys().then(function(we){return we.length});return h(le,ne),le}function Zt(ne,ye){var le=this;ne=g(ne);var we=le.ready().then(function(){var Se=le._dbInfo;localStorage.removeItem(Se.keyPrefix+ne)});return h(we,ye),we}function ln(ne,ye,le){var we=this;ne=g(ne);var Se=we.ready().then(function(){ye===void 0&&(ye=null);var be=ye;return new m(function(Fe,Ve){var Xe=we._dbInfo;Xe.serializer.serialize(ye,function(Ye,tt){if(tt)Ve(tt);else try{localStorage.setItem(Xe.keyPrefix+ne,Ye),Fe(be)}catch(at){(at.name==="QuotaExceededError"||at.name==="NS_ERROR_DOM_QUOTA_REACHED")&&Ve(at),Ve(at)}})})});return h(Se,le),Se}function cn(ne,ye){if(ye=b.apply(this,arguments),ne=typeof ne!="function"&&ne||{},!ne.name){var le=this.config();ne.name=ne.name||le.name,ne.storeName=ne.storeName||le.storeName}var we=this,Se;return ne.name?Se=new m(function(be){ne.storeName?be(zt(ne,we._defaultConfig)):be(ne.name+"/")}).then(function(be){for(var Fe=localStorage.length-1;Fe>=0;Fe--){var Ve=localStorage.key(Fe);Ve.indexOf(be)===0&&localStorage.removeItem(Ve)}}):Se=m.reject("Invalid arguments"),h(Se,ye),Se}var hn={_driver:"localStorageWrapper",_initStorage:an,_support:rn(),iterate:_n,getItem:vn,setItem:ln,removeItem:Zt,clear:wn,length:nn,key:sn,keys:Yt,dropInstance:cn},un=function(ye,le){return ye===le||typeof ye=="number"&&typeof le=="number"&&isNaN(ye)&&isNaN(le)},En=function(ye,le){for(var we=ye.length,Se=0;Se<we;){if(un(ye[Se],le))return!0;Se++}return!1},ve=Array.isArray||function(ne){return Object.prototype.toString.call(ne)==="[object Array]"},ct={},bt={},At={INDEXEDDB:me,WEBSQL:Ut,LOCALSTORAGE:hn},Wt=[At.INDEXEDDB._driver,At.WEBSQL._driver,At.LOCALSTORAGE._driver],Ot=["dropInstance"],Xt=["clear","getItem","iterate","key","keys","length","removeItem","setItem"].concat(Ot),jt={description:"",driver:Wt.slice(),name:"localforage",size:4980736,storeName:"keyvaluepairs",version:1};function Jt(ne,ye){ne[ye]=function(){var le=arguments;return ne.ready().then(function(){return ne[ye].apply(ne,le)})}}function yn(){for(var ne=1;ne<arguments.length;ne++){var ye=arguments[ne];if(ye)for(var le in ye)ye.hasOwnProperty(le)&&(ve(ye[le])?arguments[0][le]=ye[le].slice():arguments[0][le]=ye[le])}return arguments[0]}var pn=function(){function ne(ye){s(this,ne);for(var le in At)if(At.hasOwnProperty(le)){var we=At[le],Se=we._driver;this[le]=Se,ct[Se]||this.defineDriver(we)}this._defaultConfig=yn({},jt),this._config=yn({},this._defaultConfig,ye),this._driverSet=null,this._initDriver=null,this._ready=!1,this._dbInfo=null,this._wrapLibraryMethodsWithReady(),this.setDriver(this._config.driver).catch(function(){})}return ne.prototype.config=function(le){if((typeof le>"u"?"undefined":a(le))==="object"){if(this._ready)return new Error("Can't call config() after localforage has been used.");for(var we in le){if(we==="storeName"&&(le[we]=le[we].replace(/\W/g,"_")),we==="version"&&typeof le[we]!="number")return new Error("Database version must be a number.");this._config[we]=le[we]}return"driver"in le&&le.driver?this.setDriver(this._config.driver):!0}else return typeof le=="string"?this._config[le]:this._config},ne.prototype.defineDriver=function(le,we,Se){var be=new m(function(Fe,Ve){try{var Xe=le._driver,Ye=new Error("Custom driver not compliant; see https://mozilla.github.io/localForage/#definedriver");if(!le._driver){Ve(Ye);return}for(var tt=Xt.concat("_initStorage"),at=0,mt=tt.length;at<mt;at++){var _t=tt[at],ee=!En(Ot,_t);if((ee||le[_t])&&typeof le[_t]!="function"){Ve(Ye);return}}var ae=function(){for(var Ge=function(Ft){return function(){var Ht=new Error("Method "+Ft+" is not implemented by the current driver"),Fn=m.reject(Ht);return h(Fn,arguments[arguments.length-1]),Fn}},it=0,yt=Ot.length;it<yt;it++){var It=Ot[it];le[It]||(le[It]=Ge(It))}};ae();var _e=function(Ge){ct[Xe]&&console.info("Redefining LocalForage driver: "+Xe),ct[Xe]=le,bt[Xe]=Ge,Fe()};"_support"in le?le._support&&typeof le._support=="function"?le._support().then(_e,Ve):_e(!!le._support):_e(!0)}catch(Re){Ve(Re)}});return p(be,we,Se),be},ne.prototype.driver=function(){return this._driver||null},ne.prototype.getDriver=function(le,we,Se){var be=ct[le]?m.resolve(ct[le]):m.reject(new Error("Driver not found."));return p(be,we,Se),be},ne.prototype.getSerializer=function(le){var we=m.resolve(ut);return p(we,le),we},ne.prototype.ready=function(le){var we=this,Se=we._driverSet.then(function(){return we._ready===null&&(we._ready=we._initDriver()),we._ready});return p(Se,le,le),Se},ne.prototype.setDriver=function(le,we,Se){var be=this;ve(le)||(le=[le]);var Fe=this._getSupportedDrivers(le);function Ve(){be._config.driver=be.driver()}function Xe(at){return be._extend(at),Ve(),be._ready=be._initStorage(be._config),be._ready}function Ye(at){return function(){var mt=0;function _t(){for(;mt<at.length;){var ee=at[mt];return mt++,be._dbInfo=null,be._ready=null,be.getDriver(ee).then(Xe).catch(_t)}Ve();var ae=new Error("No available storage method found.");return be._driverSet=m.reject(ae),be._driverSet}return _t()}}var tt=this._driverSet!==null?this._driverSet.catch(function(){return m.resolve()}):m.resolve();return this._driverSet=tt.then(function(){var at=Fe[0];return be._dbInfo=null,be._ready=null,be.getDriver(at).then(function(mt){be._driver=mt._driver,Ve(),be._wrapLibraryMethodsWithReady(),be._initDriver=Ye(Fe)})}).catch(function(){Ve();var at=new Error("No available storage method found.");return be._driverSet=m.reject(at),be._driverSet}),p(this._driverSet,we,Se),this._driverSet},ne.prototype.supports=function(le){return!!bt[le]},ne.prototype._extend=function(le){yn(this,le)},ne.prototype._getSupportedDrivers=function(le){for(var we=[],Se=0,be=le.length;Se<be;Se++){var Fe=le[Se];this.supports(Fe)&&we.push(Fe)}return we},ne.prototype._wrapLibraryMethodsWithReady=function(){for(var le=0,we=Xt.length;le<we;le++)Jt(this,Xt[le])},ne.prototype.createInstance=function(le){return new ne(le)},ne}(),St=new pn;n.exports=St},{3:3}]},{},[4])(4)})})(localforage$1);var localforageExports=localforage$1.exports;const localforage=getDefaultExportFromCjs(localforageExports);let isInvalidated=!1;async function invalidateCommands(){isInvalidated||(isInvalidated=!0,await tick(),isInvalidated=!1,commands.update(o=>{let e=null;for(const t of Object.values(o)){if(t.isGroupCommand)continue;const{testEnabled:n}=t;let r=t.enabled;n&&(r=n()),r!=t.enabled&&(e||(e={...o}),e[t.id].enabled=r)}if(e){const t=Object.values(e);for(const n of t){if(!n.isGroupCommand)continue;const r=t.filter(a=>a.group==n.group&&!a.isGroupCommand&&a.enabled);n.enabled=r.length>0}}return e||o}))}let isInvalidatedDefinitions=!1;async function invalidateCommandDefinitions(){isInvalidatedDefinitions||(isInvalidatedDefinitions=!0,await tick(),isInvalidatedDefinitions=!1,commands.update(o=>{let e={...o};const t=Object.values(e);for(const n of t){if(!n.isGroupCommand)continue;const r=t.filter(a=>a.group==n.group&&!a.isGroupCommand);for(const a of r)a.keyTextFromGroup=n.keyText}return e}),invalidateCommands())}class ElectronApi{constructor(){this.ipcRenderer=getIpcRenderer()}send(e,t=null){this.ipcRenderer.send(e,t)}async showOpenDialog(e){return await this.ipcRenderer.invoke("showOpenDialog",e)}async showSaveDialog(e){return await this.ipcRenderer.invoke("showSaveDialog",e)}async showItemInFolder(e){return await this.ipcRenderer.invoke("showItemInFolder",e)}async openExternal(e){await this.ipcRenderer.invoke("openExternal",e)}async invoke(e,t){return await this.ipcRenderer.invoke(e,t)}addEventListener(e,t){this.ipcRenderer.on(e,t)}removeEventListener(e,t){this.ipcRenderer.removeListener(e,t)}}function getIpcRenderer(){if(window.require){const o=window.require("electron");return o==null?void 0:o.ipcRenderer}return null}function isElectronAvailable(){return!!getIpcRenderer()}const apiInstance=isElectronAvailable()?new ElectronApi:null;function getElectron(){return apiInstance}let apiUrl=null;try{apiUrl="http://localhost:3000"}catch{}function resolveApi(){return apiUrl||(window.location.origin+window.location.pathname).replace(/\/*$/,"")}function resolveApiHeaders(){const o={},e=localStorage.getItem("accessToken");return e&&(o.Authorization=`Bearer ${e}`),o}let lastSnackbarId=0;function showSnackbar(o){lastSnackbarId+=1;const e=lastSnackbarId.toString();return openedSnackbars.update(t=>[...t,{...o,id:e}]),e}function showSnackbarSuccess(o){showSnackbar({message:o,icon:"img ok",allowClose:!0,autoClose:!0})}function showSnackbarInfo(o){showSnackbar({message:o,icon:"img info",allowClose:!0,autoClose:!0})}function showSnackbarError(o){showSnackbar({message:o,icon:"img error",allowClose:!0,autoClose:!0})}function closeSnackbar(o){openedSnackbars.update(e=>e.filter(t=>t.id!=o))}function isOauthCallback$1(){const o=new URLSearchParams(location.search),e=o.get("code"),t=o.get("state");return e&&t&&t.startsWith("dbg-oauth:")&&t==sessionStorage.getItem("oauthState")}function handleOauthCallback(){const e=new URLSearchParams(location.search).get("code");return isOauthCallback$1()?(sessionStorage.removeItem("oauthState"),apiCall("auth/oauth-token",{code:e,redirectUri:location.origin+location.pathname}).then(t=>{const{accessToken:n,error:r,errorMessage:a}=t;n?(console.log("Settings access token from OAUTH"),localStorage.setItem("accessToken",n),internalRedirectTo("/")):(console.log("Error when processing OAUTH callback",r||a),internalRedirectTo(`/?page=not-logged&error=${r||a}`))}),!0):!1}async function handleAuthOnStartup(o){if(o.oauth&&console.log("OAUTH callback URL:",location.origin+location.pathname),o.oauth||o.isLoginForm){if(localStorage.getItem("accessToken"))return;redirectToLogin(o)}}async function redirectToLogin(o=null,e=!1){if(o||(enableApi(),o=await getConfig()),o.isLoginForm){if(!e){const t=new URLSearchParams(location.search);if(t.get("page")=="login"||t.get("page")=="not-logged")return}internalRedirectTo("/?page=login");return}if(o.oauth){const t=`dbg-oauth:${Math.random().toString().substr(2)}`,n=o.oauthScope?`&scope=${o.oauthScope}`:"";sessionStorage.setItem("oauthState",t),console.log("Redirecting to OAUTH provider"),location.replace(`${o.oauth}?client_id=${o.oauthClient}&response_type=code&redirect_uri=${encodeURIComponent(location.origin+location.pathname)}&state=${encodeURIComponent(t)}${n}`);return}}function internalRedirectTo(o){const e=location.pathname.lastIndexOf("/"),t=e>=0?location.pathname.substring(0,e)+o:o;location.replace(t)}async function doLogout(){enableApi();const o=await getConfig();o.oauth?(localStorage.removeItem("accessToken"),o.oauthLogout?window.location.href=o.oauthLogout:internalRedirectTo("/?page=not-logged")):o.isLoginForm?(localStorage.removeItem("accessToken"),internalRedirectTo("/?page=not-logged")):window.location.href="config/logout"}function showModal(o,e={}){const t=uuidv1();openedModals.update(n=>[...n,{component:o,modalId:t,props:e}])}function closeModal(o){openedModals.update(e=>e.filter(t=>t.modalId!=o))}function closeCurrentModal(){openedModals.update(o=>o.slice(0,o.length-1))}function getActiveModalId(){var e;const o=get_store_value(openedModals);return(e=o[o.length-1])==null?void 0:e.modalId}const FormStyledButton_svelte_svelte_type_style_lang="";function create_fragment$4X(o){let e,t,n,r=[{type:o[0]},{value:o[2]},{title:o[3]},o[6]],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("input"),set_attributes(e,a),toggle_class(e,"disabled",o[1]),toggle_class(e,"svelte-n46s8k",!0)},m(s,l){insert(s,e,l),"value"in a&&(e.value=a.value),e.autofocus&&e.focus(),o[8](e),t||(n=listen(e,"click",o[5]),t=!0)},p(s,[l]){set_attributes(e,a=get_spread_update(r,[l&1&&{type:s[0]},l&4&&e.value!==s[2]&&{value:s[2]},l&8&&{title:s[3]},l&64&&s[6]])),"value"in a&&(e.value=a.value),toggle_class(e,"disabled",s[1]),toggle_class(e,"svelte-n46s8k",!0)},i:noop$1,o:noop$1,d(s){s&&detach(e),o[8](null),t=!1,n()}}}function instance$4V(o,e,t){const n=["type","disabled","value","title","getBoundingClientRect"];let r=compute_rest_props(e,n);const a=createEventDispatcher();let{type:s="button"}=e,{disabled:l=!1}=e,{value:u}=e,{title:d=null}=e;function f(){l||a("click")}let m;function h(){return m.getBoundingClientRect()}function p(g){binding_callbacks[g?"unshift":"push"](()=>{m=g,t(4,m)})}return o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(6,r=compute_rest_props(e,n)),"type"in g&&t(0,s=g.type),"disabled"in g&&t(1,l=g.disabled),"value"in g&&t(2,u=g.value),"title"in g&&t(3,d=g.title)},[s,l,u,d,m,f,r,h,p]}class FormStyledButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$4V,create_fragment$4X,safe_not_equal,{type:0,disabled:1,value:2,title:3,getBoundingClientRect:7})}get getBoundingClientRect(){return this.$$.ctx[7]}}function getAsArray(o){return _.isArray(o)?o:o!=null?[o]:[]}const jsonlFormat={storageType:"jsonl",extension:"jsonl",extensions:["jsonl","ndjson"],name:"JSON lines/NDJSON",readerFunc:"jsonLinesReader",writerFunc:"jsonLinesWriter"},jsonFormat={storageType:"json",extension:"json",name:"JSON",writerFunc:"jsonArrayWriter"},sqlFormat={storageType:"sql",extension:"sql",name:"SQL",writerFunc:"sqlDataWriter"},jsonlQuickExport={label:"JSON lines/NDJSON",extension:"jsonl",createWriter:o=>({functionName:"jsonLinesWriter",props:{fileName:o}})},jsonQuickExport={label:"JSON",extension:"json",createWriter:o=>({functionName:"jsonArrayWriter",props:{fileName:o}})},sqlQuickExport={label:"SQL",extension:"sql",createWriter:(o,e)=>({functionName:"sqlDataWriter",props:{fileName:o,dataName:e}})};function buildFileFormats(o){const e=[jsonlFormat,jsonFormat,sqlFormat];for(const{content:t}of o){const{fileFormats:n}=t;n&&e.push(...n)}return e}function buildQuickExports(o){const e=[jsonQuickExport,jsonlQuickExport,sqlQuickExport];for(const{content:t}of o)t.quickExports&&e.push(...t.quickExports);return e}function findFileFormat(o,e){return o.fileFormats.find(t=>t.storageType==e)}function getFileFormatDirections(o){if(!o)return[];const e=[];return o.readerFunc&&e.push("source"),o.writerFunc&&e.push("target"),e}function getDefaultFileFormat(o){return o.fileFormats.find(e=>e.storageType=="csv")||jsonlFormat}function getTargetName(o,e,t){const n=`targetName_${e}`;if(t[n])return t[n];const r=findFileFormat(o,t.targetStorageType);if(r){const a=r.getDefaultOutputName?r.getDefaultOutputName(e,t):null;return a||`${e}.${r.extension}`}return e}function extractFormatApiParameters(o,e,t){const n=(t.args||[]).filter(r=>r.apiName).map(r=>[r.apiName,o[`${e}_${t.storageType}_${r.name}`]]).filter(r=>r[1]!=null);return _.fromPairs(n)}function extractDriverApiParameters(o,e,t){const n=(t.importExportArgs||[]).filter(r=>r.apiName).map(r=>[r.apiName,o[`${e}_${t.engine}_${r.name}`]]).filter(r=>r[1]!=null);return _.fromPairs(n)}function extractShellConnection(o,e){return getCurrentConfig().allowShellConnection?{..._.omit(o,["_id","displayName","databases","connectionColor"]),database:e}:{_id:o._id,engine:o.engine,database:e}}async function getConnection(o,e,t,n){if(e=="database"||e=="query"){const r=await getConnectionInfo({conid:t}),a=lib.findEngineDriver(r,o);return[extractShellConnection(r,n),a]}return[null,null]}function getSourceExpr(o,e,t,n,r){const{sourceStorageType:a}=t;if(a=="database"){const s={schemaName:t.sourceSchemaName,pureName:e};return["tableReader",{connection:n,...extractDriverApiParameters(t,"source",r),...s}]}if(a=="query")return["queryReader",{connection:n,...extractDriverApiParameters(t,"source",r),queryType:t.sourceQueryType,query:t.sourceQueryType=="json"?JSON.parse(t.sourceQuery):t.sourceQuery}];if(findFileFormat(o,a)){const s=t[`sourceFile_${e}`],l=findFileFormat(o,a);if(l&&l.readerFunc)return[l.readerFunc,{..._.omit(s,["isDownload"]),...extractFormatApiParameters(t,"source",l)}]}if(a=="jsldata")return["jslDataReader",{jslid:t.sourceJslId}];if(a=="archive")return["archiveReader",{folderName:t.sourceArchiveFolder,fileName:e}];throw new Error(`Unknown source storage type: ${a}`)}function getFlagsFroAction(o){switch(o){case"dropCreateTable":return{createIfNotExists:!0,dropIfExists:!0};case"truncate":return{createIfNotExists:!0,truncate:!0};case"appendData":return{createIfNotExists:!1,truncate:!1}}return{createIfNotExists:!0}}function getTargetExpr(o,e,t,n,r){const{targetStorageType:a}=t,s=findFileFormat(o,a);if(s&&s.writerFunc){const l=s.getOutputParams&&s.getOutputParams(e,t);return[s.writerFunc,{...l||{fileName:getTargetName(o,e,t)},...extractFormatApiParameters(t,"target",s)}]}if(a=="database")return["tableWriter",{connection:n,schemaName:t.targetSchemaName,pureName:getTargetName(o,e,t),...extractDriverApiParameters(t,"target",r),...getFlagsFroAction(t[`actionType_${e}`])}];if(a=="archive")return["archiveWriter",{folderName:t.targetArchiveFolder,fileName:getTargetName(o,e,t)}];throw new Error(`Unknown target storage type: ${a}`)}function normalizeExportColumnMap(o){return!o||!o.find(e=>!e.ignore)?null:(o=o.filter(e=>!e.skip),o.length>0?o.map(e=>_.omit(e,["ignore"])):null)}async function createImpExpScript(o,e,t=!0,n=!1){const a=getCurrentConfig().allowShellScripting||n?new lib.ScriptWriter(e.startVariableIndex||0):new lib.ScriptWriterJson(e.startVariableIndex||0),[s,l]=await getConnection(o,e.sourceStorageType,e.sourceConnectionId,e.sourceDatabaseName),[u,d]=await getConnection(o,e.targetStorageType,e.targetConnectionId,e.targetDatabaseName),f=getAsArray(e.sourceList);for(const m of f){const h=a.allocVariable();a.assign(h,...getSourceExpr(o,m,e,s,l));const p=a.allocVariable();a.assign(p,...getTargetExpr(o,m,e,u,d));const g=normalizeExportColumnMap(e[`columns_${m}`]);let b=null;g&&(b=a.allocVariable(),a.assignValue(b,g)),a.copyStream(h,p,b),a.endLine()}return t&&(a.comment("@ImportExportConfigurator"),a.comment(JSON.stringify(e))),a.getScript(e.schedule)}function getActionOptions(o,e,t,n){const r=[];return t.targetStorageType=="database"?(r.push({label:"Create table/append",value:"createTable"}),r.push({label:"Append data",value:"appendData"}),r.push({label:"Truncate and import",value:"truncate"}),r.push({label:"Drop and create table",value:"dropCreateTable"})):r.push({label:"Create file",value:"createFile"}),r}async function createPreviewReader(o,e,t){const[n,r]=await getConnection(o,e.sourceStorageType,e.sourceConnectionId,e.sourceDatabaseName),[a,s]=getSourceExpr(o,t,e,n,r);return{functionName:a,props:{...s,limitRows:100}}}const FormFieldTemplateLarge_svelte_svelte_type_style_lang="";function create_else_block$Z(o){let e,t,n,r,a,s,l,u=[o[4]],d={};for(let g=0;g<u.length;g+=1)d=assign(d,u[g]);let f=[{class:"label"},o[4]],m={};for(let g=0;g<f.length;g+=1)m=assign(m,f[g]);const h=o[6].default,p=create_slot(h,o,o[5],null);return{c(){e=element("div"),t=element("span"),n=text(o[1]),r=space(),p&&p.c(),set_attributes(t,d),toggle_class(t,"disabled",o[3]),toggle_class(t,"svelte-2e9efj",!0),set_attributes(e,m),toggle_class(e,"svelte-2e9efj",!0)},m(g,b){insert(g,e,b),append(e,t),append(t,n),insert(g,r,b),p&&p.m(g,b),a=!0,s||(l=[listen(t,"click",function(){is_function(o[4].onClick)&&o[4].onClick.apply(this,arguments)}),listen(e,"click",function(){is_function(o[4].onClick)&&o[4].onClick.apply(this,arguments)})],s=!0)},p(g,b){o=g,(!a||b&2)&&set_data_maybe_contenteditable(n,o[1],d.contenteditable),set_attributes(t,d=get_spread_update(u,[b&16&&o[4]])),toggle_class(t,"disabled",o[3]),toggle_class(t,"svelte-2e9efj",!0),set_attributes(e,m=get_spread_update(f,[{class:"label"},b&16&&o[4]])),toggle_class(e,"svelte-2e9efj",!0),p&&p.p&&(!a||b&32)&&update_slot_base(p,h,o,o[5],a?get_slot_changes(h,o[5],b,null):get_all_dirty_from_scope(o[5]),null)},i(g){a||(transition_in(p,g),a=!0)},o(g){transition_out(p,g),a=!1},d(g){g&&(detach(e),detach(r)),p&&p.d(g),s=!1,run_all(l)}}}function create_if_block$24(o){let e,t,n,r,a,s;const l=o[6].default,u=create_slot(l,o,o[5],null);let d=[o[4],{class:"checkLabel"}],f={};for(let m=0;m<d.length;m+=1)f=assign(f,d[m]);return{c(){u&&u.c(),e=space(),t=element("span"),n=text(o[1]),set_attributes(t,f),toggle_class(t,"disabled",o[3]),toggle_class(t,"svelte-2e9efj",!0)},m(m,h){u&&u.m(m,h),insert(m,e,h),insert(m,t,h),append(t,n),r=!0,a||(s=listen(t,"click",function(){is_function(o[4].onClick)&&o[4].onClick.apply(this,arguments)}),a=!0)},p(m,h){o=m,u&&u.p&&(!r||h&32)&&update_slot_base(u,l,o,o[5],r?get_slot_changes(l,o[5],h,null):get_all_dirty_from_scope(o[5]),null),(!r||h&2)&&set_data_maybe_contenteditable(n,o[1],f.contenteditable),set_attributes(t,f=get_spread_update(d,[h&16&&o[4],{class:"checkLabel"}])),toggle_class(t,"disabled",o[3]),toggle_class(t,"svelte-2e9efj",!0)},i(m){r||(transition_in(u,m),r=!0)},o(m){transition_out(u,m),r=!1},d(m){m&&(detach(e),detach(t)),u&&u.d(m),a=!1,s()}}}function create_fragment$4W(o){let e,t,n,r;const a=[create_if_block$24,create_else_block$Z],s=[];function l(u,d){return u[0]=="checkbox"?0:1}return t=l(o),n=s[t]=a[t](o),{c(){e=element("div"),n.c(),attr(e,"class","largeFormMarker svelte-2e9efj"),toggle_class(e,"noMargin",o[2])},m(u,d){insert(u,e,d),s[t].m(e,null),r=!0},p(u,[d]){let f=t;t=l(u),t===f?s[t].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),n=s[t],n?n.p(u,d):(n=s[t]=a[t](u),n.c()),transition_in(n,1),n.m(e,null)),(!r||d&4)&&toggle_class(e,"noMargin",u[2])},i(u){r||(transition_in(n),r=!0)},o(u){transition_out(n),r=!1},d(u){u&&detach(e),s[t].d()}}}function instance$4U(o,e,t){let{$$slots:n={},$$scope:r}=e,{type:a}=e,{label:s}=e,{noMargin:l=!1}=e,{disabled:u=!1}=e,{labelProps:d={}}=e;return o.$$set=f=>{"type"in f&&t(0,a=f.type),"label"in f&&t(1,s=f.label),"noMargin"in f&&t(2,l=f.noMargin),"disabled"in f&&t(3,u=f.disabled),"labelProps"in f&&t(4,d=f.labelProps),"$$scope"in f&&t(5,r=f.$$scope)},[a,s,l,u,d,r,n]}class FormFieldTemplateLarge extends SvelteComponent{constructor(e){super(),init(this,e,instance$4U,create_fragment$4W,safe_not_equal,{type:0,label:1,noMargin:2,disabled:3,labelProps:4})}}function createRef(o){return{value:o,initValue:o,set(e){this.value=e},reset(){this.value=this.initValue},get(){return this.value},update(e){this.value=e(this.value)}}}const keycodes={backspace:8,tab:9,enter:13,shift:16,ctrl:17,alt:18,pauseBreak:19,capsLock:20,escape:27,space:32,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,insert:45,delete:46,n0:48,n1:49,n2:50,n3:51,n4:52,n5:53,n6:54,n7:55,n8:56,n9:57,a:65,b:66,c:67,d:68,e:69,f:70,g:71,h:72,i:73,j:74,k:75,l:76,m:77,n:78,o:79,p:80,q:81,r:82,s:83,t:84,u:85,v:86,w:87,x:88,y:89,z:90,leftWindowKey:91,rightWindowKey:93,numPad0:96,numPad1:97,numPad2:98,numPad3:99,numPad4:100,numPad5:101,numPad6:102,numPad7:103,numPad8:104,numPad9:105,numPadAdd:107,numPadSub:109,multiply:106,add:107,subtract:109,decimalPoint:110,divide:111,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f12:123,numLock:144,scrollLock:145,semiColon:186,equalSign:187,comma:188,dash:189,period:190,forwardSlash:191,graveAccent:192,openBracket:219,backSlash:220,closeBracket:221,singleQuote:222};function create_fragment$4V(o){let e,t,n;const r=o[4].default,a=create_slot(r,o,o[3],null);return{c(){a&&a.c()},m(s,l){a&&a.m(s,l),e=!0,t||(n=listen(window,"keydown",o[0]),t=!0)},p(s,[l]){a&&a.p&&(!e||l&8)&&update_slot_base(a,r,s,s[3],e?get_slot_changes(r,s[3],l,null):get_all_dirty_from_scope(s[3]),null)},i(s){e||(transition_in(a,s),e=!0)},o(s){transition_out(a,s),e=!1},d(s){a&&a.d(s),t=!1,n()}}}const contextKey="formProviderContextKey";function getFormContext(){return getContext(contextKey)}function instance$4T(o,e,t){let{$$slots:n={},$$scope:r}=e,{values:a}=e,{template:s=FormFieldTemplateLarge}=e;const u={values:a,template:s,setFieldValue:(f,m)=>{a.update(h=>Object.assign(Object.assign({},h),{[f]:m}))},submitActionRef:createRef(null)};setContext(contextKey,u);function d(f){f.keyCode==keycodes.enter&&u.submitActionRef.get()&&(f.preventDefault(),u.submitActionRef.get()(a))}return o.$$set=f=>{"values"in f&&t(1,a=f.values),"template"in f&&t(2,s=f.template),"$$scope"in f&&t(3,r=f.$$scope)},[d,a,s,r,n]}class FormProviderCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$4T,create_fragment$4V,safe_not_equal,{values:1,template:2})}}function create_default_slot$1K(o){let e;const t=o[3].default,n=create_slot(t,o,o[4],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&16)&&update_slot_base(n,t,r,r[4],e?get_slot_changes(t,r[4],a,null):get_all_dirty_from_scope(r[4]),null)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$4U(o){let e,t;return e=new FormProviderCore({props:{values:o[1],template:o[0],$$slots:{default:[create_default_slot$1K]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.template=n[0]),r&16&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4S(o,e,t){let{$$slots:n={},$$scope:r}=e,{initialValues:a={}}=e,{template:s=FormFieldTemplateLarge}=e;const l=writable(a);return o.$$set=u=>{"initialValues"in u&&t(2,a=u.initialValues),"template"in u&&t(0,s=u.template),"$$scope"in u&&t(4,r=u.$$scope)},[s,l,a,n,r]}class FormProvider extends SvelteComponent{constructor(e){super(),init(this,e,instance$4S,create_fragment$4U,safe_not_equal,{initialValues:2,template:0})}}const FontIcon_svelte_svelte_type_style_lang="";function create_fragment$4T(o){let e,t,n,r;return{c(){e=element("span"),attr(e,"class",t=null_to_empty(o[5][o[0]]||o[0])+" svelte-1p2qnn1"),attr(e,"title",o[1]),attr(e,"style",o[4]),toggle_class(e,"padLeft",o[2]),toggle_class(e,"padRight",o[3])},m(a,s){insert(a,e,s),n||(r=listen(e,"click",o[6]),n=!0)},p(a,[s]){s&1&&t!==(t=null_to_empty(a[5][a[0]]||a[0])+" svelte-1p2qnn1")&&attr(e,"class",t),s&2&&attr(e,"title",a[1]),s&16&&attr(e,"style",a[4]),s&5&&toggle_class(e,"padLeft",a[2]),s&9&&toggle_class(e,"padRight",a[3])},i:noop$1,o:noop$1,d(a){a&&detach(e),n=!1,r()}}}function instance$4R(o,e,t){let{icon:n}=e,{title:r=null}=e,{padLeft:a=!1}=e,{padRight:s=!1}=e,{style:l=null}=e;const u={"icon minus-box":"mdi mdi-minus-box-outline","icon plus-box":"mdi mdi-plus-box-outline","icon plus-thick":"ti ti-plus","icon invisible-box":"mdi mdi-minus-box-outline icon-invisible","icon cloud-upload":"mdi mdi-cloud-upload","icon import":"mdi mdi-application-import","icon export":"mdi mdi-export","icon new-connection":"mdi mdi-database-plus","icon tables":"mdi mdi-table-multiple","icon favorite":"mdi mdi-star","icon share":"mdi mdi-share-variant","icon add":"mdi mdi-plus-circle","icon minus":"mdi mdi-minus-circle-outline","icon connection":"mdi mdi-connection","icon cell-data":"mdi mdi-details","icon sql-generator":"mdi mdi-cog-transfer","icon keyboard":"mdi mdi-keyboard-settings","icon settings":"mdi mdi-cog","icon version":"mdi mdi-ticket-confirmation","icon pin":"mdi mdi-pin","icon arrange":"mdi mdi-arrange-send-to-back","icon app":"mdi mdi-layers-triple","icon open-in-new":"mdi mdi-open-in-new","icon add-folder":"ti ti-folder","icon window-restore":"mdi mdi-window-restore","icon window-maximize":"mdi mdi-window-maximize","icon window-close":"mdi mdi-window-close","icon window-minimize":"mdi mdi-window-minimize","img dbgate":"mdi mdi-database color-icon-gold","icon columns":"mdi mdi-card-text-outline","icon columns-outline":"mdi mdi-book-open-outline","icon locked-database-mode":"mdi mdi-database-lock","icon unlocked-database-mode":"mdi mdi-database-eye","icon database":"mdi mdi-database","icon server":"mdi mdi-server","icon table":"mdi mdi-table-large","icon form":"mdi mdi-form-select","icon archive":"mdi mdi-archive","icon file":"mdi mdi-file","icon loading":"mdi mdi-loading mdi-spin","icon close":"mdi mdi-close","icon unsaved":"mdi mdi-record","icon stop":"mdi mdi-close-octagon","icon play":"mdi mdi-play","icon play-stop":"mdi mdi-stop","icon pause":"mdi mdi-pause","icon filter":"mdi mdi-filter-menu-outline","icon filter-off":"mdi mdi-filter-off","icon reload":"mdi mdi-reload","icon refresh":"ti ti-reload","icon undo":"mdi mdi-undo","icon redo":"mdi mdi-redo","icon save":"mdi mdi-content-save","icon account":"mdi mdi-account","icon sql-file":"mdi mdi-file-code","icon web":"mdi mdi-web","icon home":"mdi mdi-home","icon query-design":"mdi mdi-vector-polyline-edit","icon form":"mdi mdi-form-select","icon history":"mdi mdi-history","icon structure":"mdi mdi-tools","icon square":"mdi mdi-square","icon edit":"mdi mdi-pencil","icon delete":"mdi mdi-delete","icon arrow-up":"mdi mdi-arrow-up","icon arrow-down":"mdi mdi-arrow-down","icon arrow-left":"mdi mdi-arrow-left","icon arrow-begin":"mdi mdi-arrow-collapse-left","icon arrow-end":"mdi mdi-arrow-collapse-right","icon arrow-right":"mdi mdi-arrow-right","icon arrow-left-bold":"mdi mdi-arrow-left-bold","icon arrow-right-bold":"mdi mdi-arrow-right-bold","icon triple-left":"ti ti-layout-width-full","icon triple-right":"ti ti-layout-sidebar-left","icon format-code":"mdi mdi-code-tags-check","icon show-wizard":"mdi mdi-comment-edit","icon disconnected":"mdi mdi-lan-disconnect","icon theme":"mdi mdi-brightness-6","icon error":"mdi mdi-close-circle","icon ok":"mdi mdi-check-circle","icon check":"mdi mdi-check","icon markdown":"mdi mdi-application","icon preview":"mdi mdi-file-find","icon eye":"mdi mdi-eye","icon check-all":"mdi mdi-check-all","icon checkbox-blank":"mdi mdi-checkbox-blank-outline","icon checkbox-marked":"mdi mdi-checkbox-marked-outline","icon dots-horizontal":"mdi mdi-dots-horizontal","icon dots-vertical":"mdi mdi-dots-vertical","icon add":"mdi mdi-plus-circle-outline","icon json":"mdi mdi-code-json","icon lock":"mdi mdi-lock","icon custom-join":"mdi mdi-arrow-left-right-bold","icon parent-filter":"mdi mdi-home-alert","icon parent-filter-outline":"mdi mdi-home-alert-outline","icon run":"mdi mdi-play","icon chevron-down":"mdi mdi-chevron-down","icon chevron-left":"mdi mdi-chevron-left","icon chevron-right":"mdi mdi-chevron-right","icon chevron-up":"mdi mdi-chevron-up","icon chevron-double-down":"mdi mdi-chevron-double-down","icon chevron-double-left":"mdi mdi-chevron-double-left","icon chevron-double-right":"mdi mdi-chevron-double-right","icon chevron-double-up":"mdi mdi-chevron-double-up","icon menu-right":"mdi mdi-menu-right","icon plugin":"mdi mdi-toy-brick","icon menu":"mdi mdi-menu","icon add-column":"mdi mdi-table-column-plus-after","icon add-key":"mdi mdi-key-plus","icon report":"mdi mdi-file-chart","icon swap":"mdi mdi-swap-horizontal-bold","icon deploy":"mdi mdi-content-save-move","icon compare":"mdi mdi-compare","icon no-color":"mdi mdi-format-color-marker-cancel","icon palette":"mdi mdi-palette","icon split":"mdi mdi-view-split-vertical","icon num-0":"mdi mdi-numeric-0-circle","icon num-1":"mdi mdi-numeric-1-circle","icon num-2":"mdi mdi-numeric-2-circle","icon num-3":"mdi mdi-numeric-3-circle","icon num-4":"mdi mdi-numeric-4-circle","icon num-5":"mdi mdi-numeric-5-circle","icon num-6":"mdi mdi-numeric-6-circle","icon num-7":"mdi mdi-numeric-7-circle","icon num-8":"mdi mdi-numeric-8-circle","icon num-9":"mdi mdi-numeric-9-circle","icon num-9-plus":"mdi mdi-numeric-9-plus-circle","icon num-0-outline":"mdi mdi-numeric-0-circle-outline","icon num-1-outline":"mdi mdi-numeric-1-circle-outline","icon num-2-outline":"mdi mdi-numeric-2-circle-outline","icon num-3-outline":"mdi mdi-numeric-3-circle-outline","icon num-4-outline":"mdi mdi-numeric-4-circle-outline","icon num-5-outline":"mdi mdi-numeric-5-circle-outline","icon num-6-outline":"mdi mdi-numeric-6-circle-outline","icon num-7-outline":"mdi mdi-numeric-7-circle-outline","icon num-8-outline":"mdi mdi-numeric-8-circle-outline","icon num-9-outline":"mdi mdi-numeric-9-circle-outline","icon num-9-plus-outline":"mdi mdi-numeric-9-plus-circle-outline","img ok":"mdi mdi-check-circle color-icon-green","img ok-inv":"mdi mdi-check-circle color-icon-inv-green","img alert":"mdi mdi-alert-circle color-icon-blue","img error":"mdi mdi-close-circle color-icon-red","img error-inv":"mdi mdi-close-circle color-icon-inv-red","img warn":"mdi mdi-alert color-icon-gold","img info":"mdi mdi-information color-icon-blue","img circular":"mdi mdi-circular-saw color-icon-red","img archive":"mdi mdi-table-large color-icon-gold","img archive-folder":"mdi mdi-database-outline color-icon-green","img autoincrement":"mdi mdi-numeric-1-box-multiple-outline","img column":"mdi mdi-table-column","img server":"mdi mdi-server color-icon-blue","img primary-key":"mdi mdi-key-star color-icon-yellow","img foreign-key":"mdi mdi-key-link","img sql-file":"mdi mdi-file-code","img shell":"mdi mdi-flash color-icon-blue","img chart":"mdi mdi-chart-bar color-icon-magenta","img markdown":"mdi mdi-application color-icon-red","img preview":"mdi mdi-file-find color-icon-red","img favorite":"mdi mdi-star color-icon-yellow","img query-design":"mdi mdi-vector-polyline-edit color-icon-red","img diagram":"mdi mdi-graph color-icon-blue","img yaml":"mdi mdi-code-brackets color-icon-red","img compare":"mdi mdi-compare color-icon-red","img app":"mdi mdi-layers-triple color-icon-magenta","img app-command":"mdi mdi-flash color-icon-green","img app-query":"mdi mdi-view-comfy color-icon-magenta","img connection":"mdi mdi-connection color-icon-blue","img profiler":"mdi mdi-gauge color-icon-blue","img add":"mdi mdi-plus-circle color-icon-green","img minus":"mdi mdi-minus-circle color-icon-red","img equal":"mdi mdi-equal","img changed":"mdi mdi-file-edit color-icon-yellow","img free-table":"mdi mdi-table-large color-icon-green","img macro":"mdi mdi-hammer-wrench","img json":"mdi mdi-code-json icon-magenta","img database":"mdi mdi-database color-icon-gold","img sqlite-database":"mdi mdi-database color-icon-blue","img table":"mdi mdi-table-large color-icon-blue","img collection":"mdi mdi-table-large color-icon-red","img query-data":"mdi mdi-table-large color-icon-yellow","img view":"mdi mdi-table-large color-icon-magenta","img procedure":"mdi mdi-cog color-icon-blue","img function":"mdi mdi-function-variant","img table-structure":"mdi mdi-tools color-icon-blue","img view-structure":"mdi mdi-tools color-icon-magenta","img sort-asc":"mdi mdi-sort-alphabetical-ascending color-icon-green","img sort-desc":"mdi mdi-sort-alphabetical-descending color-icon-green","img map":"mdi mdi-map color-icon-blue","img reference":"mdi mdi-link-box","img link":"mdi mdi-link","img filter":"mdi mdi-filter","img group":"mdi mdi-group","img perspective":"mdi mdi-eye color-icon-yellow","img parent-filter":"mdi mdi-home-alert color-icon-yellow","img folder":"mdi mdi-folder color-icon-yellow","img type-string":"mdi mdi-alphabetical color-icon-blue","img type-hash":"mdi mdi-pound color-icon-blue","img type-set":"mdi mdi-format-list-bulleted color-icon-blue","img type-list":"mdi mdi-format-list-numbered color-icon-blue","img type-zset":"mdi mdi-format-list-checks  color-icon-blue","img type-stream":"mdi mdi-view-stream color-icon-blue","img type-binary":"mdi mdi-file color-icon-blue","img type-rejson":"mdi mdi-color-json color-icon-blue","img keydb":"mdi mdi-key color-icon-blue","img duplicator":"mdi mdi-content-duplicate color-icon-green","img import":"mdi mdi-database-import color-icon-green","img export":"mdi mdi-database-export color-icon-green"};function d(f){bubble.call(this,o,f)}return o.$$set=f=>{"icon"in f&&t(0,n=f.icon),"title"in f&&t(1,r=f.title),"padLeft"in f&&t(2,a=f.padLeft),"padRight"in f&&t(3,s=f.padRight),"style"in f&&t(4,l=f.style)},[n,r,a,s,l,u,d]}class FontIcon extends SvelteComponent{constructor(e){super(),init(this,e,instance$4R,create_fragment$4T,safe_not_equal,{icon:0,title:1,padLeft:2,padRight:3,style:4})}}const ErrorInfo_svelte_svelte_type_style_lang="";function create_else_block$Y(o){let e,t,n,r,a=(o[0]||"Unknown error")+"",s,l;return n=new FontIcon({props:{icon:o[1]}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),s=text(a),attr(t,"class","icon svelte-a39cm2"),attr(e,"class","container svelte-a39cm2")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(e,r),append(e,s),l=!0},p(u,d){const f={};d&2&&(f.icon=u[1]),n.$set(f),(!l||d&1)&&a!==(a=(u[0]||"Unknown error")+"")&&set_data(s,a)},i(u){l||(transition_in(n.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n)}}}function create_if_block_1$1e(o){let e,t,n,r,a,s=(o[0]||"Unknown error")+"",l,u;return r=new FontIcon({props:{icon:o[1]}}),{c(){e=element("div"),t=element("div"),n=element("div"),create_component(r.$$.fragment),a=space(),l=text(s),attr(n,"class","icon svelte-a39cm2"),attr(t,"class","container svelte-a39cm2")},m(d,f){insert(d,e,f),append(e,t),append(t,n),mount_component(r,n,null),append(t,a),append(t,l),u=!0},p(d,f){const m={};f&2&&(m.icon=d[1]),r.$set(m),(!u||f&1)&&s!==(s=(d[0]||"Unknown error")+"")&&set_data(l,s)},i(d){u||(transition_in(r.$$.fragment,d),u=!0)},o(d){transition_out(r.$$.fragment,d),u=!1},d(d){d&&detach(e),destroy_component(r)}}}function create_if_block$23(o){let e,t,n,r=(o[0]||"Unknown error")+"",a,s;return t=new FontIcon({props:{icon:o[1]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),a=text(r),attr(e,"class","container-small svelte-a39cm2")},m(l,u){insert(l,e,u),mount_component(t,e,null),append(e,n),append(e,a),s=!0},p(l,u){const d={};u&2&&(d.icon=l[1]),t.$set(d),(!s||u&1)&&r!==(r=(l[0]||"Unknown error")+"")&&set_data(a,r)},i(l){s||(transition_in(t.$$.fragment,l),s=!0)},o(l){transition_out(t.$$.fragment,l),s=!1},d(l){l&&detach(e),destroy_component(t)}}}function create_fragment$4S(o){let e,t,n,r;const a=[create_if_block$23,create_if_block_1$1e,create_else_block$Y],s=[];function l(u,d){return u[2]?0:u[3]?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$4Q(o,e,t){let{message:n}=e,{icon:r="img error"}=e,{isSmall:a=!1}=e,{alignTop:s=!1}=e;return o.$$set=l=>{"message"in l&&t(0,n=l.message),"icon"in l&&t(1,r=l.icon),"isSmall"in l&&t(2,a=l.isSmall),"alignTop"in l&&t(3,s=l.alignTop)},[n,r,a,s]}class ErrorInfo extends SvelteComponent{constructor(e){super(),init(this,e,instance$4Q,create_fragment$4S,safe_not_equal,{message:0,icon:1,isSmall:2,alignTop:3})}}const useEffect=o=>({subscribe:o}),MessageView_svelte_svelte_type_style_lang="";function get_each_context$L(o,e,t){const n=o.slice();return n[7]=e[t],n[9]=t,n}function create_if_block_3$E(o){let e;return{c(){e=element("td"),e.textContent="Procedure",attr(e,"class","header svelte-1yczc9s")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_2$V(o){let e;return{c(){e=element("td"),e.textContent="Line",attr(e,"class","header svelte-1yczc9s")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_1$1d(o){let e,t=(o[7].procedure||"")+"",n;return{c(){e=element("td"),n=text(t),attr(e,"class","svelte-1yczc9s")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&1&&t!==(t=(r[7].procedure||"")+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block$22(o){let e,t=(o[7].line==null?"":o[7].line+1+o[3])+"",n;return{c(){e=element("td"),n=text(t),attr(e,"class","svelte-1yczc9s")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&9&&t!==(t=(r[7].line==null?"":r[7].line+1+r[3])+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_each_block$L(o){let e,t,n,r,a=o[7].message+"",s,l,u,d=hooks(o[7].time).format("HH:mm:ss")+"",f,m,h,p=formatDuration(new Date(o[7].time).getTime()-o[4])+"",g,b,v,y=(o[9]>0?formatDuration(new Date(o[7].time).getTime()-new Date(o[0][o[9]-1].time).getTime()):"n/a")+"",C,E,A,k,T,$,S=o[1]&&create_if_block_1$1d(o),I=o[2]&&create_if_block$22(o);function R(){return o[6](o[7])}return{c(){e=element("tr"),t=element("td"),t.textContent=`${o[9]+1}`,n=space(),r=element("td"),s=text(a),l=space(),u=element("td"),f=text(d),m=space(),h=element("td"),g=text(p),b=space(),v=element("td"),C=text(y),E=space(),S&&S.c(),A=space(),I&&I.c(),k=space(),attr(t,"class","svelte-1yczc9s"),attr(r,"class","svelte-1yczc9s"),attr(u,"class","svelte-1yczc9s"),attr(h,"class","svelte-1yczc9s"),attr(v,"class","svelte-1yczc9s"),attr(e,"class","svelte-1yczc9s"),toggle_class(e,"isError",o[7].severity=="error"),toggle_class(e,"isActive",o[7].line)},m(N,M){insert(N,e,M),append(e,t),append(e,n),append(e,r),append(r,s),append(e,l),append(e,u),append(u,f),append(e,m),append(e,h),append(h,g),append(e,b),append(e,v),append(v,C),append(e,E),S&&S.m(e,null),append(e,A),I&&I.m(e,null),append(e,k),T||($=listen(e,"click",R),T=!0)},p(N,M){o=N,M&1&&a!==(a=o[7].message+"")&&set_data(s,a),M&1&&d!==(d=hooks(o[7].time).format("HH:mm:ss")+"")&&set_data(f,d),M&17&&p!==(p=formatDuration(new Date(o[7].time).getTime()-o[4])+"")&&set_data(g,p),M&1&&y!==(y=(o[9]>0?formatDuration(new Date(o[7].time).getTime()-new Date(o[0][o[9]-1].time).getTime()):"n/a")+"")&&set_data(C,y),o[1]?S?S.p(o,M):(S=create_if_block_1$1d(o),S.c(),S.m(e,A)):S&&(S.d(1),S=null),o[2]?I?I.p(o,M):(I=create_if_block$22(o),I.c(),I.m(e,k)):I&&(I.d(1),I=null),M&1&&toggle_class(e,"isError",o[7].severity=="error"),M&1&&toggle_class(e,"isActive",o[7].line)},d(N){N&&detach(e),S&&S.d(),I&&I.d(),T=!1,$()}}}function create_fragment$4R(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v=o[1]&&create_if_block_3$E(),y=o[2]&&create_if_block_2$V(),C=ensure_array_like(o[0]),E=[];for(let A=0;A<C.length;A+=1)E[A]=create_each_block$L(get_each_context$L(o,C,A));return{c(){e=element("div"),t=element("table"),n=element("tr"),r=element("td"),r.textContent="Number",a=space(),s=element("td"),s.textContent="Message",l=space(),u=element("td"),u.textContent="Time",d=space(),f=element("td"),f.textContent="Delta",m=space(),h=element("td"),h.textContent="Duration",p=space(),v&&v.c(),g=space(),y&&y.c(),b=space();for(let A=0;A<E.length;A+=1)E[A].c();attr(r,"class","header svelte-1yczc9s"),attr(s,"class","header svelte-1yczc9s"),attr(u,"class","header svelte-1yczc9s"),attr(f,"class","header svelte-1yczc9s"),attr(h,"class","header svelte-1yczc9s"),attr(t,"class","svelte-1yczc9s"),attr(e,"class","main svelte-1yczc9s")},m(A,k){insert(A,e,k),append(e,t),append(t,n),append(n,r),append(n,a),append(n,s),append(n,l),append(n,u),append(n,d),append(n,f),append(n,m),append(n,h),append(n,p),v&&v.m(n,null),append(n,g),y&&y.m(n,null),append(t,b);for(let T=0;T<E.length;T+=1)E[T]&&E[T].m(t,null)},p(A,[k]){if(A[1]?v||(v=create_if_block_3$E(),v.c(),v.m(n,g)):v&&(v.d(1),v=null),A[2]?y||(y=create_if_block_2$V(),y.c(),y.m(n,null)):y&&(y.d(1),y=null),k&63){C=ensure_array_like(A[0]);let T;for(T=0;T<C.length;T+=1){const $=get_each_context$L(A,C,T);E[T]?E[T].p($,k):(E[T]=create_each_block$L($),E[T].c(),E[T].m(t,null))}for(;T<E.length;T+=1)E[T].d(1);E.length=C.length}},i:noop$1,o:noop$1,d(A){A&&detach(e),v&&v.d(),y&&y.d(),destroy_each(E,A)}}}function formatDuration(o){return o==0?"0":o<1e3?`${Math.round(o)} ms`:o<1e4?`${Math.round(o/100)/10} s`:`${Math.round(o/1e3)} s`}function instance$4P(o,e,t){let n,{items:r}=e,{showProcedure:a=!1}=e,{showLine:s=!1}=e,{startLine:l=0}=e;const u=createEventDispatcher(),d=f=>u("messageclick",f);return o.$$set=f=>{"items"in f&&t(0,r=f.items),"showProcedure"in f&&t(1,a=f.showProcedure),"showLine"in f&&t(2,s=f.showLine),"startLine"in f&&t(3,l=f.startLine)},o.$$.update=()=>{o.$$.dirty&1&&t(4,n=r[0]&&new Date(r[0].time).getTime())},[r,a,s,l,n,u,d]}class MessageView extends SvelteComponent{constructor(e){super(),init(this,e,instance$4P,create_fragment$4R,safe_not_equal,{items:0,showProcedure:1,showLine:2,startLine:3})}}function create_else_block$X(o){let e,t;return e=new MessageView({props:{items:o[4],showProcedure:o[0],showLine:o[1],startLine:o[3]}}),e.$on("messageclick",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.items=n[4]),r&1&&(a.showProcedure=n[0]),r&2&&(a.showLine=n[1]),r&8&&(a.startLine=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$21(o){let e,t;return e=new ErrorInfo({props:{message:"No messages",icon:"img alert"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$4Q(o){let e,t,n,r;const a=[create_if_block$21,create_else_block$X],s=[];function l(u,d){return u[2]&&(!u[4]||u[4].length==0)?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$4O(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,A=>t(9,r=A)),n);o.$$.on_destroy.push(()=>a());let{showProcedure:l=!1}=e,{showLine:u=!1}=e,{eventName:d}=e,{executeNumber:f}=e,{showNoMessagesAlert:m=!1}=e,{startLine:h=0}=e,{onChangeErrors:p=null}=e;const g=createRef([]),b=createRef(0);let v=[];const y=_.throttle(()=>{t(4,v=[...g.get()])},500),C=A=>{g.get().push(A),y()};function E(A){bubble.call(this,o,A)}return o.$$set=A=>{"showProcedure"in A&&t(0,l=A.showProcedure),"showLine"in A&&t(1,u=A.showLine),"eventName"in A&&t(6,d=A.eventName),"executeNumber"in A&&t(7,f=A.executeNumber),"showNoMessagesAlert"in A&&t(2,m=A.showNoMessagesAlert),"startLine"in A&&t(3,h=A.startLine),"onChangeErrors"in A&&t(8,p=A.onChangeErrors)},o.$$.update=()=>{if(o.$$.dirty&64&&s(t(5,n=useEffect(()=>d?(apiOn(d,C),()=>{apiOff(d,C)}):()=>{}))),o.$$.dirty&128&&f>=0&&(t(4,v=[]),g.set([])),o.$$.dirty&280&&p){const A=v.filter(k=>k.severity=="error"&&k.line!=null);b.get()!=A.length&&(p(A.map(k=>Object.assign(Object.assign({},k),{line:k.line==null?null:k.line+h}))),b.set(A.length))}o.$$.dirty&512},[l,u,m,h,v,n,d,f,p,r,E]}class SocketMessageView extends SvelteComponent{constructor(e){super(),init(this,e,instance$4O,create_fragment$4Q,safe_not_equal,{showProcedure:0,showLine:1,eventName:6,executeNumber:7,showNoMessagesAlert:2,startLine:3,onChangeErrors:8})}}function clickOutside(o){const e=t=>{o&&!o.contains(t.target)&&!t.defaultPrevented&&o.dispatchEvent(new CustomEvent("clickOutside"))};return document.addEventListener("mousedown",e,!0),{destroy(){document.removeEventListener("mousedown",e,!0)}}}const ModalBase_svelte_svelte_type_style_lang="",get_footer_slot_changes=o=>({}),get_footer_slot_context=o=>({}),get_header_slot_changes=o=>({}),get_header_slot_context=o=>({});function create_if_block_1$1c(o){let e,t,n,r,a,s,l,u;const d=o[9].header,f=create_slot(d,o,o[8],get_header_slot_context);return a=new FontIcon({props:{icon:"icon close"}}),{c(){e=element("div"),t=element("div"),f&&f.c(),n=space(),r=element("div"),create_component(a.$$.fragment),attr(r,"class","close svelte-rfjhvl"),attr(e,"class","header svelte-rfjhvl"),toggle_class(e,"fullScreen",o[0])},m(m,h){insert(m,e,h),append(e,t),f&&f.m(t,null),append(e,n),append(e,r),mount_component(a,r,null),s=!0,l||(u=listen(r,"click",o[3]),l=!0)},p(m,h){f&&f.p&&(!s||h&256)&&update_slot_base(f,d,m,m[8],s?get_slot_changes(d,m[8],h,get_header_slot_changes):get_all_dirty_from_scope(m[8]),get_header_slot_context),(!s||h&1)&&toggle_class(e,"fullScreen",m[0])},i(m){s||(transition_in(f,m),transition_in(a.$$.fragment,m),s=!0)},o(m){transition_out(f,m),transition_out(a.$$.fragment,m),s=!1},d(m){m&&detach(e),f&&f.d(m),destroy_component(a),l=!1,u()}}}function create_if_block$20(o){let e,t;const n=o[9].footer,r=create_slot(n,o,o[8],get_footer_slot_context);return{c(){e=element("div"),r&&r.c(),attr(e,"class","footer svelte-rfjhvl"),toggle_class(e,"fullScreen",o[0])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&256)&&update_slot_base(r,n,a,a[8],t?get_slot_changes(n,a[8],s,get_footer_slot_changes):get_all_dirty_from_scope(a[8]),get_footer_slot_context),(!t||s&1)&&toggle_class(e,"fullScreen",a[0])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$4P(o){let e,t,n,r,a,s,l,u,d=o[6].header&&create_if_block_1$1c(o);const f=o[9].default,m=create_slot(f,o,o[8],null);let h=o[6].footer&&create_if_block$20(o);return{c(){e=element("div"),t=element("div"),d&&d.c(),n=space(),r=element("div"),m&&m.c(),a=space(),h&&h.c(),attr(r,"class","content svelte-rfjhvl"),toggle_class(r,"noPadding",o[1]),toggle_class(r,"fullScreen",o[0]),attr(t,"class","window svelte-rfjhvl"),toggle_class(t,"fullScreen",o[0]),toggle_class(t,"simple",o[2]),attr(e,"id","myModal"),attr(e,"class","bglayer svelte-rfjhvl")},m(p,g){insert(p,e,g),append(e,t),d&&d.m(t,null),append(t,n),append(t,r),m&&m.m(r,null),append(t,a),h&&h.m(t,null),s=!0,l||(u=[listen(window,"keydown",o[5]),action_destroyer(clickOutside.call(null,t)),listen(t,"clickOutside",o[4])],l=!0)},p(p,[g]){p[6].header?d?(d.p(p,g),g&64&&transition_in(d,1)):(d=create_if_block_1$1c(p),d.c(),transition_in(d,1),d.m(t,n)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),m&&m.p&&(!s||g&256)&&update_slot_base(m,f,p,p[8],s?get_slot_changes(f,p[8],g,null):get_all_dirty_from_scope(p[8]),null),(!s||g&2)&&toggle_class(r,"noPadding",p[1]),(!s||g&1)&&toggle_class(r,"fullScreen",p[0]),p[6].footer?h?(h.p(p,g),g&64&&transition_in(h,1)):(h=create_if_block$20(p),h.c(),transition_in(h,1),h.m(t,null)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),(!s||g&1)&&toggle_class(t,"fullScreen",p[0]),(!s||g&4)&&toggle_class(t,"simple",p[2])},i(p){s||(transition_in(d),transition_in(m,p),transition_in(h),s=!0)},o(p){transition_out(d),transition_out(m,p),transition_out(h),s=!1},d(p){p&&detach(e),d&&d.d(),m&&m.d(p),h&&h.d(),l=!1,run_all(u)}}}function instance$4N(o,e,t){let n;component_subscribe(o,currentDropDownMenu,g=>t(10,n=g));let{$$slots:r={},$$scope:a}=e;const s=compute_slots(r);let{fullScreen:l=!1}=e,{noPadding:u=!1}=e,{simple:d=!1}=e,{modalId:f}=e;function m(){f==getActiveModalId()&&closeModal(f)}function h(){n||m()}function p(g){g.keyCode==keycodes.escape&&m()}return onMount(()=>{const g=document.activeElement;return()=>{g&&g.focus()}}),o.$$set=g=>{"fullScreen"in g&&t(0,l=g.fullScreen),"noPadding"in g&&t(1,u=g.noPadding),"simple"in g&&t(2,d=g.simple),"modalId"in g&&t(7,f=g.modalId),"$$scope"in g&&t(8,a=g.$$scope)},[l,u,d,m,h,p,s,f,a,r]}class ModalBase extends SvelteComponent{constructor(e){super(),init(this,e,instance$4N,create_fragment$4P,safe_not_equal,{fullScreen:0,noPadding:1,simple:2,modalId:7})}}const ModalBase$1=Object.freeze(Object.defineProperty({__proto__:null,default:ModalBase},Symbol.toStringTag,{value:"Module"})),RunScriptModal_svelte_svelte_type_style_lang="";function create_default_slot_1$X(o){let e,t,n;return t=new SocketMessageView({props:{eventName:o[4]?`runner-info-${o[4]}`:null,executeNumber,showNoMessagesAlert:!0}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","messages svelte-1vzii1g")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&16&&(s.eventName=r[4]?`runner-info-${r[4]}`:null),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_2$U(o){let e,t;return e=new FontIcon({props:{icon:"icon loading",padLeft:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$x(o){let e,t,n,r,a=o[3]&&create_if_block_2$U();return{c(){e=element("div"),t=text(o[0]),n=space(),a&&a.c(),attr(e,"class","flex")},m(s,l){insert(s,e,l),append(e,t),append(e,n),a&&a.m(e,null),r=!0},p(s,l){(!r||l&1)&&set_data(t,s[0]),s[3]?a?l&8&&transition_in(a,1):(a=create_if_block_2$U(),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(a),r=!0)},o(s){transition_out(a),r=!1},d(s){s&&detach(e),a&&a.d()}}}function create_else_block$W(o){let e,t;return e=new FormStyledButton({props:{value:"Close"}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$1b(o){let e,t;return e=new FormStyledButton({props:{value:"Stop"}}),e.$on("click",o[5]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1$(o){let e,t;return e=new FormStyledButton({props:{value:o[1]||"Open result"}}),e.$on("click",o[9]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.value=n[1]||"Open result"),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$x(o){let e,t,n,r,a;const s=[create_if_block_1$1b,create_else_block$W],l=[];function u(f,m){return f[3]?0:1}e=u(o),t=l[e]=s[e](o);let d=o[2]&&!o[3]&&create_if_block$1$(o);return{c(){t.c(),n=space(),d&&d.c(),r=empty()},m(f,m){l[e].m(f,m),insert(f,n,m),d&&d.m(f,m),insert(f,r,m),a=!0},p(f,m){let h=e;e=u(f),e===h?l[e].p(f,m):(group_outros(),transition_out(l[h],1,1,()=>{l[h]=null}),check_outros(),t=l[e],t?t.p(f,m):(t=l[e]=s[e](f),t.c()),transition_in(t,1),t.m(n.parentNode,n)),f[2]&&!f[3]?d?(d.p(f,m),m&12&&transition_in(d,1)):(d=create_if_block$1$(f),d.c(),transition_in(d,1),d.m(r.parentNode,r)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){a||(transition_in(t),transition_in(d),a=!0)},o(f){transition_out(t),transition_out(d),a=!1},d(f){f&&(detach(n),detach(r)),l[e].d(f),d&&d.d(f)}}}function create_default_slot$1J(o){let e,t;const n=[o[7]];let r={$$slots:{footer:[create_footer_slot$x],header:[create_header_slot$x],default:[create_default_slot_1$X]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&128?get_spread_update(n,[get_spread_object(a[7])]):{};s&8223&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4O(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1J]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&8351&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}let executeNumber=0;function instance$4M(o,e,t){const n=["script","header","openResultLabel","onOpenResult"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(v,y,C,E){function A(k){return k instanceof C?k:new C(function(T){T(k)})}return new(C||(C=Promise))(function(k,T){function $(R){try{I(E.next(R))}catch(N){T(N)}}function S(R){try{I(E.throw(R))}catch(N){T(N)}}function I(R){R.done?k(R.value):A(R.value).then($,S)}I((E=E.apply(v,y||[])).next())})};let{script:s}=e,{header:l}=e,{openResultLabel:u}=e,{onOpenResult:d}=e,f=!0,m;const h=()=>a(void 0,void 0,void 0,function*(){closeCurrentModal(),apiCall("runners/cancel",{runid:m})}),p=()=>{closeCurrentModal()},g=()=>a(void 0,void 0,void 0,function*(){yield tick();const v=yield apiCall("runners/start",{script:s});t(4,m=v.runid);function y(){t(3,f=!1),apiOff(`runner-done-${m}`,y)}apiOn(`runner-done-${m}`,y)});onMount(()=>{g()});const b=()=>{closeCurrentModal(),d()};return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(7,r=compute_rest_props(e,n)),"script"in v&&t(8,s=v.script),"header"in v&&t(0,l=v.header),"openResultLabel"in v&&t(1,u=v.openResultLabel),"onOpenResult"in v&&t(2,d=v.onOpenResult)},[l,u,d,f,m,h,p,r,s,b]}class RunScriptModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4M,create_fragment$4O,safe_not_equal,{script:8,header:0,openResultLabel:1,onOpenResult:2})}}const RunScriptModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:RunScriptModal},Symbol.toStringTag,{value:"Module"}));async function importSqlDump(o,e){const t=getCurrentConfig().allowShellScripting?new lib.ScriptWriter:new lib.ScriptWriterJson;t.importDatabase({inputFile:o,connection:e}),showModal(RunScriptModal,{script:t.getScript(),header:"Importing database"})}async function exportSqlDump(o,e,t,n){const r=getCurrentConfig().allowShellScripting?new lib.ScriptWriter:new lib.ScriptWriterJson;r.dumpDatabase({connection:e,databaseName:t,outputFile:o}),showModal(RunScriptModal,{script:r.getScript(),header:"Exporting database",onOpenResult:n&&!getElectron()?()=>{window.open(`${resolveApi()}/uploads/get?file=${n}`,"_blank")}:null,openResultLabel:"Download SQL file"})}async function runImportExportScript({script:o,runningMessage:e,canceledMessage:t,finishedMessage:n,afterFinish:r=null}){const s=(await apiCall("runners/start",{script:o})).runid;let l=!1;const u=showSnackbar({message:e,icon:"icon loading",buttons:[{label:"Cancel",onClick:()=>{l=!0,apiCall("runners/cancel",{runid:s})}}]});function d(){closeSnackbar(u),apiOff(`runner-done-${s}`,d),l?showSnackbarError(t):(showSnackbarInfo(n),r&&r())}apiOn(`runner-done-${s}`,d)}async function saveExportedFile(o,e,t,n,r){const a=getElectron();let s,l;if(a)s=await a.showSaveDialog({filters:o,defaultPath:e,properties:["showOverwriteConfirmation"]});else{const d=await apiCall("files/generate-uploads-file",{extension:t});s=d.filePath,l=d.fileName}if(!s)return;const u=r(s);runImportExportScript({script:u,runningMessage:`Exporting ${n}`,canceledMessage:`Export ${n} canceled`,finishedMessage:`Export ${n} finished`,afterFinish:()=>{a||window.open(`${resolveApi()}/uploads/get?file=${l}`,"_blank")}})}function generateQuickExportScript(o,e,t,n,r){const a=getCurrentConfig().allowShellScripting?new lib.ScriptWriter:new lib.ScriptWriterJson,s=a.allocVariable();a.assign(s,o.functionName,o.props);const l=a.allocVariable(),u=e.createWriter(t,n);a.assign(l,u.functionName,u.props);const d=normalizeExportColumnMap(r);let f=null;return d&&(f=a.allocVariable(),a.assignValue(f,d)),a.copyStream(s,l,f),a.endLine(),a.getScript()}async function exportQuickExportFile(o,e,t,n=null){if(t.noFilenameDependency){const r=generateQuickExportScript(e,t,null,o,n);runImportExportScript({script:r,runningMessage:`Exporting ${o}`,canceledMessage:`Export ${o} canceled`,finishedMessage:`Export ${o} finished`})}else await saveExportedFile([{name:t.label,extensions:[t.extension]}],`${o}.${t.extension}`,t.extension,o,r=>generateQuickExportScript(e,t,r,o,n))}async function saveFileToDisk(o,e={formatLabel:"HTML page",formatExtension:"html"}){const{formatLabel:t,formatExtension:n}=e,r=getElectron();if(r){const a=[{name:t,extensions:[n]}],s=await r.showSaveDialog({filters:a,defaultPath:`file.${n}`,properties:["showOverwriteConfirmation"]});if(!s)return;await o(s),r.openExternal("file:///"+s)}else{const a=await apiCall("files/generate-uploads-file");await o(a.filePath),window.open(`${resolveApi()}/uploads/get?file=${a.fileName}`,"_blank")}}function openWebLink(o){const e=getElectron();e?e.send("open-link",o):window.open(o,"_blank")}function registerMenu(...o){const e=getContext("componentContextMenu");setContext("componentContextMenu",[e,...o])}function contextMenu(o,e=[]){const t=async n=>{if(n.preventDefault(),n.stopPropagation(),await invalidateCommands(),e){const r=n.pageX,a=n.pageY;currentDropDownMenu.set({left:r,top:a,items:e,targetElement:n.target})}};if(e!="__no_menu")return o.addEventListener("contextmenu",t),{destroy(){o.removeEventListener("contextmenu",t)},update(n){e=n}}}function doExtractMenuItems(o,e,t){if(_.isFunction(o))doExtractMenuItems(o(t),e,t);else if(_.isArray(o))for(const n of o)doExtractMenuItems(n,e,t);else _.isPlainObject(o)&&!o._skip&&e.push(o)}function processTags(o){const e=[],t=[];for(const n of o.filter(r=>r.tag))t.push({...n,tags:getAsArray(n.tag)});for(const n of o.filter(r=>!r.tag))if(n.placeTag){const r=getAsArray(n.placeTag);for(let a=0;a<t.length;){const s=t[a];_.intersection(r,s.tags).length>0?(t.splice(a,1),e.push(s)):a++}}else e.push(n);return e.push(...t),e}function extractMenuItems(o,e=null){let t=[];return doExtractMenuItems(o,t,e),t=processTags(t),t}function mapItem(o,e){if(o.command){const t=e[o.command];return t?{text:o.text||t.menuName||t.toolbarName||t.name,keyText:t.keyText||t.keyTextFromGroup,onClick:()=>{t.getSubCommands?visibleCommandPalette.set(t):t.onClick&&t.onClick()},disabled:!t.enabled,hideDisabled:o.hideDisabled}:null}return o}function filterMenuItems(o){const e=[];let t=!1,n=!1;for(const r of o.filter(a=>!a.disabled||!a.hideDisabled))r.divider?n&&(t=!0):(t&&e.push({divider:!0}),t=!1,n=!0,e.push(r));return e}function getContextMenu(){return getContext("componentContextMenu")}function prepareMenuItems(o,e,t){const n=extractMenuItems(o,e),r=_.compact(n.map(s=>mapItem(s,t)));return filterMenuItems(r)}const Link_svelte_svelte_type_style_lang="";function create_fragment$4N(o){let e,t,n,r,a;const s=o[4].default,l=create_slot(s,o,o[3],null);return{c(){e=element("a"),l&&l.c(),attr(e,"class","svelte-1gj6vtf")},m(u,d){insert(u,e,d),l&&l.m(e,null),n=!0,r||(a=[listen(e,"click",o[5]),action_destroyer(t=contextMenu.call(null,e,o[2]))],r=!0)},p(u,[d]){l&&l.p&&(!n||d&8)&&update_slot_base(l,s,u,u[3],n?get_slot_changes(s,u[3],d,null):get_all_dirty_from_scope(u[3]),null),t&&is_function(t.update)&&d&4&&t.update.call(null,u[2])},i(u){n||(transition_in(l,u),n=!0)},o(u){transition_out(l,u),n=!1},d(u){u&&detach(e),l&&l.d(u),r=!1,run_all(a)}}}function instance$4L(o,e,t){let{$$slots:n={},$$scope:r}=e,{href:a=void 0}=e,{onClick:s=void 0}=e,{menu:l="__no_menu"}=e;const u=d=>{s?s(d):openWebLink(a)};return o.$$set=d=>{"href"in d&&t(0,a=d.href),"onClick"in d&&t(1,s=d.onClick),"menu"in d&&t(2,l=d.menu),"$$scope"in d&&t(3,r=d.$$scope)},[a,s,l,r,n,u]}let Link$1=class extends SvelteComponent{constructor(e){super(),init(this,e,instance$4L,create_fragment$4N,safe_not_equal,{href:0,onClick:1,menu:2})}};const InlineButton_svelte_svelte_type_style_lang="";function create_fragment$4M(o){let e,t,n,r,a;const s=o[7].default,l=create_slot(s,o,o[6],null);return{c(){e=element("div"),t=element("div"),l&&l.c(),attr(t,"class","inner svelte-2foon6"),attr(e,"class","outer buttonLike svelte-2foon6"),attr(e,"title",o[3]),toggle_class(e,"disabled",o[0]),toggle_class(e,"square",o[1]),toggle_class(e,"narrow",o[2])},m(u,d){insert(u,e,d),append(e,t),l&&l.m(t,null),o[9](e),n=!0,r||(a=listen(e,"click",o[8]),r=!0)},p(u,[d]){l&&l.p&&(!n||d&64)&&update_slot_base(l,s,u,u[6],n?get_slot_changes(s,u[6],d,null):get_all_dirty_from_scope(u[6]),null),(!n||d&8)&&attr(e,"title",u[3]),(!n||d&1)&&toggle_class(e,"disabled",u[0]),(!n||d&2)&&toggle_class(e,"square",u[1]),(!n||d&4)&&toggle_class(e,"narrow",u[2])},i(u){n||(transition_in(l,u),n=!0)},o(u){transition_out(l,u),n=!1},d(u){u&&detach(e),l&&l.d(u),o[9](null),r=!1,a()}}}function instance$4K(o,e,t){let{$$slots:n={},$$scope:r}=e,{disabled:a=!1}=e,{square:s=!1}=e,{narrow:l=!1}=e,{title:u=null}=e,d;function f(){return d.getBoundingClientRect()}function m(p){bubble.call(this,o,p)}function h(p){binding_callbacks[p?"unshift":"push"](()=>{d=p,t(4,d)})}return o.$$set=p=>{"disabled"in p&&t(0,a=p.disabled),"square"in p&&t(1,s=p.square),"narrow"in p&&t(2,l=p.narrow),"title"in p&&t(3,u=p.title),"$$scope"in p&&t(6,r=p.$$scope)},[a,s,l,u,d,f,r,n,m,h]}class InlineButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$4K,create_fragment$4M,safe_not_equal,{disabled:0,square:1,narrow:2,title:3,getBoundingClientRect:5})}get getBoundingClientRect(){return this.$$.ctx[5]}}function create_fragment$4L(o){let e,t,n,r=[{type:"text"},o[3],{autocomplete:o[2]}],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("input"),set_attributes(e,a)},m(s,l){insert(s,e,l),e.autofocus&&e.focus(),set_input_value(e,o[0]),o[10](e),t||(n=[listen(e,"input",o[9]),listen(e,"change",o[5]),listen(e,"input",o[6]),listen(e,"click",o[7]),listen(e,"keydown",o[8])],t=!0)},p(s,[l]){set_attributes(e,a=get_spread_update(r,[{type:"text"},l&8&&s[3],l&4&&{autocomplete:s[2]}])),l&1&&e.value!==s[0]&&set_input_value(e,s[0])},i:noop$1,o:noop$1,d(s){s&&detach(e),o[10](null),t=!1,run_all(n)}}}function instance$4J(o,e,t){const n=["value","focused","domEditor","autocomplete"];let r=compute_rest_props(e,n),{value:a}=e,{focused:s=!1}=e,{domEditor:l=void 0}=e,{autocomplete:u="new-password"}=e;s&&onMount(()=>l.focus());function d(b){bubble.call(this,o,b)}function f(b){bubble.call(this,o,b)}function m(b){bubble.call(this,o,b)}function h(b){bubble.call(this,o,b)}function p(){a=this.value,t(0,a)}function g(b){binding_callbacks[b?"unshift":"push"](()=>{l=b,t(1,l)})}return o.$$set=b=>{e=assign(assign({},e),exclude_internal_props(b)),t(3,r=compute_rest_props(e,n)),"value"in b&&t(0,a=b.value),"focused"in b&&t(4,s=b.focused),"domEditor"in b&&t(1,l=b.domEditor),"autocomplete"in b&&t(2,u=b.autocomplete)},[a,l,u,r,s,d,f,m,h,p,g]}class TextField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4J,create_fragment$4L,safe_not_equal,{value:0,focused:4,domEditor:1,autocomplete:2})}}function create_if_block$1_(o){let e,t;return e=new InlineButton({props:{disabled:o[1],$$slots:{default:[create_default_slot$1I]},$$scope:{ctx:o}}}),e.$on("click",o[12]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.disabled=n[1]),r&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$1I(o){let e,t;return e=new FontIcon({props:{icon:"icon eye"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$4K(o){let e,t,n,r;const a=[o[8],{disabled:o[1]},{value:o[5]?"":o[3]},{placeholder:o[5]?"(Password is encrypted)":void 0},{type:o[5]||o[4]?"text":"password"}];let s={};for(let u=0;u<a.length;u+=1)s=assign(s,a[u]);t=new TextField({props:s}),t.$on("change",o[10]),t.$on("input",o[11]);let l=!o[5]&&create_if_block$1_(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),l&&l.c(),attr(e,"class","flex")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),l&&l.m(e,null),r=!0},p(u,[d]){const f=d&314?get_spread_update(a,[d&256&&get_spread_object(u[8]),d&2&&{disabled:u[1]},d&40&&{value:u[5]?"":u[3]},d&32&&{placeholder:u[5]?"(Password is encrypted)":void 0},d&48&&{type:u[5]||u[4]?"text":"password"}]):{};t.$set(f),u[5]?l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros()):l?(l.p(u,d),d&32&&transition_in(l,1)):(l=create_if_block$1_(u),l.c(),transition_in(l,1),l.m(e,null))},i(u){r||(transition_in(t.$$.fragment,u),transition_in(l),r=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(l),r=!1},d(u){u&&detach(e),destroy_component(t),l&&l.d()}}}function instance$4I(o,e,t){let n,r;const a=["name","disabled","saveOnInput"];let s=compute_rest_props(e,a),l,{name:u}=e,{disabled:d=!1}=e,{saveOnInput:f=!1}=e;const{values:m,setFieldValue:h}=getFormContext();component_subscribe(o,m,y=>t(9,l=y));let p=!1;const g=y=>h(u,y.target.value),b=y=>{f&&h(u,y.target.value)},v=()=>t(4,p=!p);return o.$$set=y=>{e=assign(assign({},e),exclude_internal_props(y)),t(8,s=compute_rest_props(e,a)),"name"in y&&t(0,u=y.name),"disabled"in y&&t(1,d=y.disabled),"saveOnInput"in y&&t(2,f=y.saveOnInput)},o.$$.update=()=>{o.$$.dirty&513&&t(3,n=l[u]),o.$$.dirty&8&&t(5,r=n&&n.startsWith("crypt:"))},[u,d,f,n,p,r,m,h,s,l,g,b,v]}class FormPasswordFieldRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$4I,create_fragment$4K,safe_not_equal,{name:0,disabled:1,saveOnInput:2})}}function create_default_slot$1H(o){let e,t;const n=[{name:o[1]},o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormPasswordFieldRaw({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&18?get_spread_update(n,[s&2&&{name:a[1]},s&16&&get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4J(o){let e,t,n;const r=[{type:"text"},{label:o[0]},o[2]];var a=o[3];function s(l){let u={$$slots:{default:[create_default_slot$1H]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&5?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&get_spread_object(l[2])]):{};if(u&50&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[3])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$4H(o,e,t){const n=["label","name","templateProps"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{templateProps:l={}}=e;const{template:u}=getFormContext();return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(4,r=compute_rest_props(e,n)),"label"in d&&t(0,a=d.label),"name"in d&&t(1,s=d.name),"templateProps"in d&&t(2,l=d.templateProps)},[a,s,l,u,r]}class FormPasswordField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4H,create_fragment$4J,safe_not_equal,{label:0,name:1,templateProps:2})}}function create_fragment$4I(o){let e,t;const n=[{type:"submit"},{disabled:o[0]},o[3]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormStyledButton({props:r}),e.$on("click",o[2]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&9?get_spread_update(n,[n[0],s&1&&{disabled:a[0]},s&8&&get_spread_object(a[3])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$4G(o,e,t){let n,{disabled:r=!1}=e;const a=createEventDispatcher(),{submitActionRef:s}=getFormContext(),{values:l}=getFormContext();component_subscribe(o,l,d=>t(4,n=d));function u(){a("click",n)}return s.set(()=>{r||u()}),o.$$set=d=>{t(3,e=assign(assign({},e),exclude_internal_props(d))),"disabled"in d&&t(0,r=d.disabled)},e=exclude_internal_props(e),[r,l,u,e]}class FormSubmit extends SvelteComponent{constructor(e){super(),init(this,e,instance$4G,create_fragment$4I,safe_not_equal,{disabled:0})}}function create_fragment$4H(o){let e,t;const n=[o[6],{value:o[3][o[0]]??o[1]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new TextField({props:r}),e.$on("input",o[7]),e.$on("input",o[8]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&75?get_spread_update(n,[s&64&&get_spread_object(a[6]),s&11&&{value:a[3][a[0]]??a[1]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$4F(o,e,t){const n=["name","defaultValue","saveOnInput"];let r=compute_rest_props(e,n),a,{name:s}=e,{defaultValue:l}=e,{saveOnInput:u=!1}=e;const{values:d,setFieldValue:f}=getFormContext();component_subscribe(o,d,p=>t(3,a=p));const m=p=>f(s,p.target.value),h=p=>{u&&f(s,p.target.value)};return o.$$set=p=>{e=assign(assign({},e),exclude_internal_props(p)),t(6,r=compute_rest_props(e,n)),"name"in p&&t(0,s=p.name),"defaultValue"in p&&t(1,l=p.defaultValue),"saveOnInput"in p&&t(2,u=p.saveOnInput)},[s,l,u,a,d,f,r,m,h]}class FormTextFieldRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$4F,create_fragment$4H,safe_not_equal,{name:0,defaultValue:1,saveOnInput:2})}}function create_default_slot$1G(o){let e,t;const n=[{name:o[1]},o[5],{focused:o[3]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormTextFieldRaw({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&42?get_spread_update(n,[s&2&&{name:a[1]},s&32&&get_spread_object(a[5]),s&8&&{focused:a[3]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4G(o){let e,t,n;const r=[{type:"text"},{label:o[0]},o[2]];var a=o[4];function s(l){let u={$$slots:{default:[create_default_slot$1G]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&5?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&get_spread_object(l[2])]):{};if(u&106&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[4])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$4E(o,e,t){const n=["label","name","templateProps","focused"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{templateProps:l={}}=e,{focused:u=!1}=e;const{template:d}=getFormContext();return o.$$set=f=>{e=assign(assign({},e),exclude_internal_props(f)),t(5,r=compute_rest_props(e,n)),"label"in f&&t(0,a=f.label),"name"in f&&t(1,s=f.name),"templateProps"in f&&t(2,l=f.templateProps),"focused"in f&&t(3,u=f.focused)},[a,s,l,u,d,r]}class FormTextField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4E,create_fragment$4G,safe_not_equal,{label:0,name:1,templateProps:2,focused:3})}}const ErrorMessageModal_svelte_svelte_type_style_lang="";function create_else_block$V(o){let e,t,n,r,a,s,l;return n=new FontIcon({props:{icon:"img error"}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),s=text(o[1]),attr(t,"class","icon svelte-1a6igp5"),attr(e,"class","wrapper svelte-1a6igp5")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),append(a,s),l=!0},p(u,d){(!l||d&2)&&set_data(s,u[1])},i(u){l||(transition_in(n.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n)}}}function create_if_block$1Z(o){let e,t;return{c(){e=element("pre"),t=text(o[1]),attr(e,"class","svelte-1a6igp5")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r&2&&set_data(t,n[1])},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function create_default_slot_1$W(o){let e,t,n,r;const a=[create_if_block$1Z,create_else_block$V],s=[];function l(u,d){return u[2]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_header_slot$w(o){let e,t;return{c(){e=element("div"),t=text(o[0]),attr(e,"slot","header")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r&1&&set_data(t,n[0])},d(n){n&&detach(e)}}}function create_footer_slot$w(o){let e,t,n;return t=new FormSubmit({props:{value:"Close"}}),t.$on("click",closeCurrentModal),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"slot","footer")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p:noop$1,i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_default_slot$1F(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$w],header:[create_header_slot$w],default:[create_default_slot_1$W]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&23&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4F(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1F]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&31&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4D(o,e,t){const n=["title","message","showAsCode"];let r=compute_rest_props(e,n),{title:a="Error"}=e,{message:s}=e,{showAsCode:l=!1}=e;return o.$$set=u=>{e=assign(assign({},e),exclude_internal_props(u)),t(3,r=compute_rest_props(e,n)),"title"in u&&t(0,a=u.title),"message"in u&&t(1,s=u.message),"showAsCode"in u&&t(2,l=u.showAsCode)},[a,s,l,r]}class ErrorMessageModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4D,create_fragment$4F,safe_not_equal,{title:0,message:1,showAsCode:2})}}const ErrorMessageModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ErrorMessageModal},Symbol.toStringTag,{value:"Module"}));function create_if_block_2$T(o){let e,t,n,r;return t=new FontIcon({props:{icon:"icon loading"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(" Testing connection")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_1$1a(o){let e,t,n,r,a=o[2].error+"",s,l,u,d;return n=new FontIcon({props:{icon:"img error"}}),u=new Link$1({props:{onClick:o[9],$$slots:{default:[create_default_slot_2$o]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=text("Connect failed: "),create_component(n.$$.fragment),r=space(),s=text(a),l=space(),create_component(u.$$.fragment),attr(e,"class","error-result")},m(f,m){insert(f,e,m),append(e,t),mount_component(n,e,null),append(e,r),append(e,s),append(e,l),mount_component(u,e,null),d=!0},p(f,m){(!d||m&4)&&a!==(a=f[2].error+"")&&set_data(s,a);const h={};m&4&&(h.onClick=f[9]),m&16384&&(h.$$scope={dirty:m,ctx:f}),u.$set(h)},i(f){d||(transition_in(n.$$.fragment,f),transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),destroy_component(n),destroy_component(u)}}}function create_default_slot_2$o(o){let e;return{c(){e=text("Show detail")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$V(o){let e,t,n,r,a,s,l,u,d;e=new FormTextField({props:{label:"Server",name:"server",disabled:!0}}),n=new FormTextField({props:{label:"Username",name:"user",autocomplete:"username",disabled:o[0]=="askPassword",focused:o[0]=="askUser",saveOnInput:!0}}),a=new FormPasswordField({props:{label:"Password",name:"password",autocomplete:"current-password",focused:o[0]=="askPassword",saveOnInput:!0}});let f=o[1]&&create_if_block_2$T(),m=!o[1]&&o[2]&&o[2].msgtype=="error"&&create_if_block_1$1a(o);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),f&&f.c(),l=space(),m&&m.c(),u=empty()},m(h,p){mount_component(e,h,p),insert(h,t,p),mount_component(n,h,p),insert(h,r,p),mount_component(a,h,p),insert(h,s,p),f&&f.m(h,p),insert(h,l,p),m&&m.m(h,p),insert(h,u,p),d=!0},p(h,p){const g={};p&1&&(g.disabled=h[0]=="askPassword"),p&1&&(g.focused=h[0]=="askUser"),n.$set(g);const b={};p&1&&(b.focused=h[0]=="askPassword"),a.$set(b),h[1]?f?p&2&&transition_in(f,1):(f=create_if_block_2$T(),f.c(),transition_in(f,1),f.m(l.parentNode,l)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),!h[1]&&h[2]&&h[2].msgtype=="error"?m?(m.p(h,p),p&6&&transition_in(m,1)):(m=create_if_block_1$1a(h),m.c(),transition_in(m,1),m.m(u.parentNode,u)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){d||(transition_in(e.$$.fragment,h),transition_in(n.$$.fragment,h),transition_in(a.$$.fragment,h),transition_in(f),transition_in(m),d=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(n.$$.fragment,h),transition_out(a.$$.fragment,h),transition_out(f),transition_out(m),d=!1},d(h){h&&(detach(t),detach(r),detach(s),detach(l),detach(u)),destroy_component(e,h),destroy_component(n,h),destroy_component(a,h),f&&f.d(h),m&&m.d(h)}}}function create_header_slot$v(o){let e,t,n;return{c(){e=text("Database Log In ("),t=text(o[3]),n=text(")")},m(r,a){insert(r,e,a),insert(r,t,a),insert(r,n,a)},p(r,a){a&8&&set_data(t,r[3])},d(r){r&&(detach(e),detach(t),detach(n))}}}function create_else_block$U(o){let e,t;return e=new FormSubmit({props:{value:"Connect"}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1Y(o){let e,t;return e=new FormStyledButton({props:{value:"Stop connecting"}}),e.$on("click",o[5]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$v(o){let e,t,n,r,a;const s=[create_if_block$1Y,create_else_block$U],l=[];function u(d,f){return d[1]?0:1}return e=u(o),t=l[e]=s[e](o),r=new FormStyledButton({props:{value:"Close"}}),r.$on("click",closeCurrentModal),{c(){t.c(),n=space(),create_component(r.$$.fragment)},m(d,f){l[e].m(d,f),insert(d,n,f),mount_component(r,d,f),a=!0},p(d,f){let m=e;e=u(d),e===m?l[e].p(d,f):(group_outros(),transition_out(l[m],1,1,()=>{l[m]=null}),check_outros(),t=l[e],t?t.p(d,f):(t=l[e]=s[e](d),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(d){a||(transition_in(t),transition_in(r.$$.fragment,d),a=!0)},o(d){transition_out(t),transition_out(r.$$.fragment,d),a=!1},d(d){d&&detach(n),l[e].d(d),destroy_component(r,d)}}}function create_default_slot$1E(o){let e,t;const n=[o[7],{simple:!0}];let r={$$slots:{footer:[create_footer_slot$v],header:[create_header_slot$v],default:[create_default_slot_1$V]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&128?get_spread_update(n,[get_spread_object(a[7]),n[1]]):{};s&16399&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4E(o){let e,t;return e=new FormProviderCore({props:{values:o[4],$$slots:{default:[create_default_slot$1E]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&16527&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;let currentModalConid=null;function isDatabaseLoginVisible(){return!!currentModalConid}function instance$4C(o,e,t){const n=["conid","passwordMode"];let r=compute_rest_props(e,n),a;var s=this&&this.__awaiter||function(C,E,A,k){function T($){return $ instanceof A?$:new A(function(S){S($)})}return new(A||(A=Promise))(function($,S){function I(M){try{N(k.next(M))}catch(F){S(F)}}function R(M){try{N(k.throw(M))}catch(F){S(F)}}function N(M){M.done?$(M.value):T(M.value).then(I,R)}N((k=k.apply(C,E||[])).next())})};let{conid:l}=e,{passwordMode:u}=e;const d=writable({});component_subscribe(o,d,C=>t(11,a=C));let f,m,h;const p=createRef(0);let g;currentModalConid=l,onMount(()=>s(void 0,void 0,void 0,function*(){f=yield getConnectionInfo({conid:l}),u=="askPassword"&&set_store_value(d,a=Object.assign(Object.assign({},a),{user:f.user,server:f.server}),a),u=="askUser"&&set_store_value(d,a=Object.assign(Object.assign({},a),{server:f.server}),a);const C=(f.engine||"").match(/^([^@]*)@/);t(3,g=C?C[1]:f.engine)})),onDestroy(()=>{currentModalConid=null});function b(){p.update(C=>C+1),t(1,m=!1)}function v(C){return s(this,void 0,void 0,function*(){t(1,m=!0),p.update(k=>k+1);const E=p.get(),A=yield apiCall("connections/save-volatile",{conid:l,user:a.user,password:a.password,test:!0});p.get()==E&&(t(1,m=!1),A.msgtype=="connected"?(setVolatileConnectionRemapping(l,A._id),dispatchCacheChange({key:"server-status-changed"}),batchDispatchCacheTriggers(k=>k.conid==l),closeCurrentModal()):t(2,h=A))})}const y=()=>showModal(ErrorMessageModal,{message:h.detail,showAsCode:!0,title:"Database connection error"});return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(7,r=compute_rest_props(e,n)),"conid"in C&&t(8,l=C.conid),"passwordMode"in C&&t(0,u=C.passwordMode)},[u,m,h,g,d,b,v,r,l,y]}class DatabaseLoginModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4C,create_fragment$4E,safe_not_equal,{conid:8,passwordMode:0})}}const DatabaseLoginModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:DatabaseLoginModal,isDatabaseLoginVisible},Symbol.toStringTag,{value:"Module"}));let eventSource,apiLogging=!1,apiDisabled=!1;const disabledOnOauth=isOauthCallback$1(),volatileConnectionMap={},volatileConnectionMapInv={};function disableApi(){apiDisabled=!0}function enableApi(){apiDisabled=!1}function setVolatileConnectionRemapping(o,e){volatileConnectionMap[o]=e,volatileConnectionMapInv[e]=o}function getVolatileRemapping(o){return volatileConnectionMap[o]||o}function removeVolatileMapping(o){const e=volatileConnectionMap[o];e&&(delete volatileConnectionMap[o],delete volatileConnectionMapInv[e])}function wantEventSource(){eventSource||(eventSource=new EventSource(`${resolveApi()}/stream`))}function processApiResponse(o,e,t){return t!=null&&t.missingCredentials?(isDatabaseLoginVisible()||showModal(DatabaseLoginModal,t.detail),null):t!=null&&t.apiErrorMessage?(showSnackbarError("API error:"+(t==null?void 0:t.apiErrorMessage)),{errorMessage:t.apiErrorMessage}):t}function transformApiArgs(o){return _.mapValues(o,(e,t)=>t=="conid"&&e&&volatileConnectionMap[e]?volatileConnectionMap[e]:t=="conidArray"&&_.isArray(e)?e.map(n=>volatileConnectionMap[n]||n):e)}function transformApiArgsInv(o){return _.mapValues(o,(e,t)=>t=="conid"&&e&&volatileConnectionMapInv[e]?volatileConnectionMapInv[e]:t=="conidArray"&&_.isArray(e)?e.map(n=>volatileConnectionMapInv[n]||n):e)}async function apiCall(o,e=void 0){if(apiLogging&&console.log(">>> API CALL",o,e),apiDisabled){console.log("API disabled!!",o);return}if(disabledOnOauth&&o!="auth/oauth-token"){console.log("API disabled because oauth callback!!",o);return}e=transformApiArgs(e);const t=getElectron();if(t){const n=await t.invoke(o.replace("/","-"),e);return processApiResponse(o,e,n)}else{const n=await fetch(`${resolveApi()}/${o}`,{method:"POST",cache:"no-cache",headers:{"Content-Type":"application/json",...resolveApiHeaders()},body:JSON.stringify(e)});if(n.status==401&&!apiDisabled){const a=new URLSearchParams(location.search);disableApi(),console.log("Disabling API",o),a.get("page")!="login"&&a.get("page")!="not-logged"&&redirectToLogin();return}const r=await n.json();return processApiResponse(o,e,r)}}const apiHandlers=new WeakMap;function apiOn(o,e){const t=getElectron();if(t){if(!apiHandlers.has(e)){const n=(r,a)=>{apiLogging&&console.log("@@@ API EVENT",o,a),e(a)};apiHandlers.set(e,n)}t.addEventListener(o,apiHandlers.get(e))}else{if(wantEventSource(),!apiHandlers.has(e)){const n=r=>{const a=JSON.parse(r.data);apiLogging&&console.log("@@@ API EVENT",o,a),e(a)};apiHandlers.set(e,n)}eventSource.addEventListener(o,apiHandlers.get(e))}}function apiOff(o,e){const t=getElectron();apiHandlers.has(e)&&(t?t.removeEventListener(o,apiHandlers.get(e)):(wantEventSource(),eventSource.removeEventListener(o,apiHandlers.get(e))))}function useApiCall(o,e,t){const n=writable(t);return apiCall(o,e).then(r=>{n.set(r)}),n}function enableApiLog(){apiLogging=!0,console.log("API loggin enabled")}function disableApiLog(){apiLogging=!1,console.log("API loggin disabled")}window.enableApiLog=enableApiLog;window.disableApiLog=disableApiLog;const cachedByKey={},cachedPromisesByKey={},cachedKeysByReloadTrigger={},subscriptionsByReloadTrigger={},cacheGenerationByKey={};let cacheGeneration=0;function cacheGet(o){return cachedByKey[o]}function addCacheKeyToReloadTrigger(o,e){for(const t of getAsArray(e)){const n=stableStringify(t);n in cachedKeysByReloadTrigger||(cachedKeysByReloadTrigger[n]=[]),cachedKeysByReloadTrigger[n].push(o)}}function cacheSet(o,e,t,n){cachedByKey[o]=e,addCacheKeyToReloadTrigger(o,t),delete cachedPromisesByKey[o],cacheGenerationByKey[o]=n}function cacheClean(o){cacheGeneration+=1;for(const e of getAsArray(o)){const t=stableStringify(transformApiArgsInv(e)),n=cachedKeysByReloadTrigger[t];if(n)for(const r of n)delete cachedByKey[r],delete cachedPromisesByKey[r],cacheGenerationByKey[r]=cacheGeneration;delete cachedKeysByReloadTrigger[t]}}function getCachedPromise(o,e,t){if(e in cachedPromisesByKey)return cachedPromisesByKey[e];const n=t();return cachedPromisesByKey[e]=n,addCacheKeyToReloadTrigger(e,o),n}function acquireCacheGeneration(){return cacheGeneration+=1,cacheGeneration}function getCacheGenerationForKey(o){return cacheGenerationByKey[o]||0}async function loadCachedValue(o,e,t){const n=cacheGet(e);if(n)return n;{const r=acquireCacheGeneration();try{const a=await getCachedPromise(o,e,t);return getCacheGenerationForKey(e)>r?cacheGet(e)||a:(cacheSet(e,a,o,r),a)}catch(a){console.error("Error when using cached promise",a),cacheClean(o);const s=await t();return cacheSet(e,s,o,r),s}}}async function subscribeCacheChange(o,e,t){for(const n of getAsArray(o)){const r=stableStringify(n);subscriptionsByReloadTrigger[r]||(subscriptionsByReloadTrigger[r]=[]),subscriptionsByReloadTrigger[r].push(t)}}async function unsubscribeCacheChange(o,e,t){for(const n of getAsArray(o)){const r=stableStringify(n);subscriptionsByReloadTrigger[r]&&(subscriptionsByReloadTrigger[r]=subscriptionsByReloadTrigger[r].filter(a=>a!=t)),subscriptionsByReloadTrigger[r].length==0&&delete subscriptionsByReloadTrigger[r]}}function dispatchCacheChange(o){cacheClean(o);for(const e of getAsArray(o)){const t=stableStringify(transformApiArgsInv(e));if(subscriptionsByReloadTrigger[t])for(const n of subscriptionsByReloadTrigger[t])n()}}function batchDispatchCacheTriggers(o){for(const e in subscriptionsByReloadTrigger){const t=JSON.parse(e);o(t)&&dispatchCacheChange(t)}}apiOn("changed-cache",o=>dispatchCacheChange(o));const cache={};function getLocalStorage(o,e=void 0){if(o in cache)return cache[o];const t=localStorage.getItem(o);if(t)try{const n=JSON.parse(t);return cache[o]=n,n}catch{return e}return e}function setLocalStorage(o,e){localStorage.setItem(o,JSON.stringify(e)),delete cache[o]}function removeLocalStorage(o){localStorage.removeItem(o),delete cache[o]}const databaseInfoLoader=({conid:o,database:e})=>({url:"database-connections/structure",params:{conid:o,database:e},reloadTrigger:{key:"database-structure-changed",conid:o,database:e},transform:lib.extendDatabaseInfo}),connectionInfoLoader=({conid:o})=>({url:"connections/get",params:{conid:o},reloadTrigger:{key:"connection-list-changed"}}),configLoader=()=>({url:"config/get",params:{},reloadTrigger:{key:"config-changed"}}),settingsLoader=()=>({url:"config/get-settings",params:{},reloadTrigger:{key:"settings-changed"}}),platformInfoLoader=()=>({url:"config/platform-info",params:{},reloadTrigger:{key:"platform-info-changed"}}),favoritesLoader=()=>({url:"files/favorites",params:{},reloadTrigger:{key:"files-changed-favorites"}}),databaseStatusLoader=({conid:o,database:e})=>({url:"database-connections/status",params:{conid:o,database:e},reloadTrigger:{key:"database-status-changed",conid:o,database:e}}),databaseListLoader=({conid:o})=>({url:"server-connections/list-databases",params:{conid:o},reloadTrigger:{key:"database-list-changed",conid:o},onLoaded:e=>{(e==null?void 0:e.length)>0&&setLocalStorage(`database_list_${o}`,e)}}),databaseServerVersionLoader=({conid:o,database:e})=>({url:"database-connections/server-version",params:{conid:o,database:e},reloadTrigger:{key:"database-server-version-changed",conid:o,database:e}}),archiveFoldersLoader=()=>({url:"archive/folders",params:{},reloadTrigger:{key:"archive-folders-changed"}}),archiveFilesLoader=({folder:o})=>({url:"archive/files",params:{folder:o},reloadTrigger:{key:"archive-files-changed",folder:o}}),appFoldersLoader=()=>({url:"apps/folders",params:{},reloadTrigger:{key:"app-folders-changed"}}),appFilesLoader=({folder:o})=>({url:"apps/files",params:{folder:o},reloadTrigger:{key:"app-files-changed",app:o}}),usedAppsLoader=({conid:o,database:e})=>({url:"apps/get-used-apps",params:{},reloadTrigger:{key:"used-apps-changed"}}),serverStatusLoader=()=>({url:"server-connections/server-status",params:{},reloadTrigger:{key:"server-status-changed"}}),connectionListLoader=()=>({url:"connections/list",params:{},reloadTrigger:{key:"connection-list-changed"}}),installedPluginsLoader=()=>({url:"plugins/installed",params:{},reloadTrigger:{key:"installed-plugins-changed"}}),filesLoader=({folder:o})=>({url:"files/list",params:{folder:o},reloadTrigger:{key:"files-changed",folder:o}}),authTypesLoader=({engine:o})=>({url:"plugins/auth-types",params:{engine:o},reloadTrigger:{key:"installed-plugins-changed"},errorValue:null});async function getCore(o,e){const{url:t,params:n,reloadTrigger:r,transform:a,onLoaded:s,errorValue:l}=o(e),u=stableStringify({url:t,...n});async function d(){const m=await apiCall(t,n);if(m!=null&&m.errorMessage&&l!==void 0)return s&&s(l),l;const h=(a||(p=>p))(m);return s&&s(h),h}return await loadCachedValue(r,u,d)}function useCore(o,e){const{url:t,params:n,reloadTrigger:r,transform:a,onLoaded:s}=o(e),l=stableStringify({url:t,...n});let u=0;return{subscribe:d=>{async function f(){const m=await getCore(o,e);u>0&&d(m)}return u+=1,f(),r?(subscribeCacheChange(r,l,f),()=>{u-=1,unsubscribeCacheChange(r,l,f)}):()=>{u-=1}}}}function getDatabaseInfo(o){return getCore(databaseInfoLoader,o)}function useDatabaseInfo(o){return useCore(databaseInfoLoader,o)}async function getDbCore(o,e=void 0){const t=await getDatabaseInfo(o);return t?t[e||o.objectTypeField].find(n=>n.pureName==o.pureName&&n.schemaName==o.schemaName):null}function useDbCore(o,e=void 0){const t=useDatabaseInfo(o);return t?derived(t,n=>{if(!n)return null;if(_.isArray(e))for(const r of e){const a=n[r||o.objectTypeField].find(s=>s.pureName==o.pureName&&s.schemaName==o.schemaName);if(a)return a}else return n[e||o.objectTypeField].find(r=>r.pureName==o.pureName&&r.schemaName==o.schemaName)}):null}function getTableInfo(o){return getDbCore(o,"tables")}function useTableInfo(o){return useDbCore(o,"tables")}function useViewInfo(o){return useDbCore(o,["views","matviews"])}function useCollectionInfo(o){return useDbCore(o,"collections")}function getSqlObjectInfo(o){return getDbCore(o)}function getConnectionInfo(o){return getCore(connectionInfoLoader,o)}function useConnectionInfo(o){return useCore(connectionInfoLoader,o)}function useDatabaseStatus(o){return useCore(databaseStatusLoader,o)}function useDatabaseList(o){return useCore(databaseListLoader,o)}function useDatabaseServerVersion(o){return useCore(databaseServerVersionLoader,o)}function useServerStatus(){return useCore(serverStatusLoader,{})}function getConnectionList(){return getCore(connectionListLoader,{})}function useConnectionList(){return useCore(connectionListLoader,{})}function getConfig(){return getCore(configLoader,{})}function useConfig(){return useCore(configLoader,{})}function getSettings(){return getCore(settingsLoader,{})}function useSettings(){return useCore(settingsLoader,{})}function usePlatformInfo(){return useCore(platformInfoLoader,{})}function useArchiveFiles(o){return useCore(archiveFilesLoader,o)}function useArchiveFolders(o={}){return useCore(archiveFoldersLoader,o)}function useAppFiles(o){return useCore(appFilesLoader,o)}function useAppFolders(o={}){return useCore(appFoldersLoader,o)}function getUsedApps(o={}){return getCore(usedAppsLoader,o)}function useUsedApps(o={}){return useCore(usedAppsLoader,o)}function useInstalledPlugins(o={}){return useCore(installedPluginsLoader,o)}function useFiles(o){return useCore(filesLoader,o)}function useFavorites(o={}){return useCore(favoritesLoader,o)}function useAuthTypes(o){return useCore(authTypesLoader,o)}function writableWithStorage(o,e){const t=localStorage.getItem(e),n=writable(t?lib.safeJsonParse(t,o,!0):o);return n.subscribe(r=>{localStorage.setItem(e,JSON.stringify(r))}),n}function writableWithForage(o,e,t){const n=writable(o);return n.subscribe(r=>{localforage.setItem(e,r)}),localforage.getItem(e).then(r=>{if(r==null){const a=localStorage.getItem(e);if(a){localStorage.removeItem(e);const s=lib.safeJsonParse(a,o,!0);localforage.setItem(e,s),n.set(s)}}else n.set(t?t(r):r)}),n}function writableSettingsValue(o,e){return{...derived(useSettings(),n=>(n||{})[e]??o),set:n=>apiCall("config/update-settings",{[e]:n}),update:async n=>{const r=await getSettings(),a=n(r[e]??o);apiCall("config/update-settings",{[e]:a})}}}function subscribeCssVariable(o,e,t){o.subscribe(n=>document.documentElement.style.setProperty(t,e(n)))}const selectedWidget=writableWithStorage("database","selectedWidget"),lockedDatabaseMode=writableWithStorage(!1,"lockedDatabaseMode"),visibleWidgetSideBar=writableWithStorage(!0,"visibleWidgetSideBar"),visibleSelectedWidget=derived([selectedWidget,visibleWidgetSideBar],([o,e])=>e?o:null),emptyConnectionGroupNames=writableWithStorage([],"emptyConnectionGroupNames"),collapsedConnectionGroupNames=writableWithStorage([],"collapsedConnectionGroupNames"),openedConnections=writable([]),openedSingleDatabaseConnections=writable([]),expandedConnections=writable([]),currentDatabase=writable(null),openedTabs=writableWithForage([],"openedTabs",o=>[...o||[]]),copyRowsFormat=writableWithStorage("textWithoutHeaders","copyRowsFormat"),extensions=writable(null),visibleCommandPalette=writable(null),commands=writable({}),currentTheme=getElectron()?writableSettingsValue("theme-light","currentTheme"):writableWithStorage("theme-light","currentTheme"),currentEditorTheme=getElectron()?writableSettingsValue(null,"currentEditorTheme"):writableWithStorage(null,"currentEditorTheme"),currentEditorFontSize=getElectron()?writableSettingsValue(null,"currentEditorFontSize"):writableWithStorage(null,"currentEditorFontSize"),currentEditorFont=writableSettingsValue(null,"editor.fontFamily"),activeTabId=derived([openedTabs],([o])=>{var e;return(e=o.find(t=>t.selected))==null?void 0:e.tabid}),activeTab=derived([openedTabs],([o])=>o.find(e=>e.selected)),recentDatabases=writableWithStorage([],"recentDatabases"),pinnedDatabases=writableWithStorage([],"pinnedDatabases"),pinnedTables=writableWithStorage([],"pinnedTables"),commandsSettings=writable({}),allResultsInOneTabDefault=writableWithStorage(!1,"allResultsInOneTabDefault"),commandsCustomized=derived([commands,commandsSettings],([o,e])=>_.mapValues(o,(t,n)=>({...t,...e[n]}))),draggingTab=writable(null),draggingTabTarget=writable(null),draggingDbGroup=writable(null),draggingDbGroupTarget=writable(null),visibleToolbar=writable(!1),leftPanelWidth=writableWithStorage(300,"leftPanelWidth"),currentDropDownMenu=writable(null),openedModals=writable([]),draggedPinnedObject=writable(null),openedSnackbars=writable([]);readable(null,()=>{});const currentArchive=writableWithStorage("default","currentArchive"),currentApplication=writableWithStorage(null,"currentApplication"),isFileDragActive=writable(!1),selectedCellsCallback=writable(null),loadingPluginStore=writable({loaded:!1,loadingPackageName:null}),activeDbKeysStore=writableWithStorage({},"activeDbKeysStore"),currentThemeDefinition=derived([currentTheme,extensions],([o,e])=>e.themes.find(t=>t.themeClassName==o));let nativeMenuOnStartup=null;const visibleTitleBar=derived(useSettings(),o=>!getElectron()||!o?!1:(nativeMenuOnStartup==null&&(nativeMenuOnStartup=!!o["app.useNativeMenu"]),!o["app.fullscreen"]&&!nativeMenuOnStartup)),visibleHamburgerMenuWidget=derived(useSettings(),o=>getElectron()?o?!!o["app.fullscreen"]:!1:!0);subscribeCssVariable(visibleSelectedWidget,o=>o?1:0,"--dim-visible-left-panel");subscribeCssVariable(leftPanelWidth,o=>`${o}px`,"--dim-left-panel-width");subscribeCssVariable(visibleTitleBar,o=>o?1:0,"--dim-visible-titlebar");subscribeCssVariable(lockedDatabaseMode,o=>o?0:1,"--dim-visible-tabs-databases");let activeTabIdValue=null;activeTabId.subscribe(o=>{activeTabIdValue=o,invalidateCommands()});const getActiveTabId=()=>activeTabIdValue;let visibleCommandPaletteValue=null;visibleCommandPalette.subscribe(o=>{visibleCommandPaletteValue=o,invalidateCommands()});const getVisibleCommandPalette=()=>visibleCommandPaletteValue;let visibleToolbarValue=null;visibleToolbar.subscribe(o=>{visibleToolbarValue=o,invalidateCommands()});const getVisibleToolbar=()=>visibleToolbarValue;let openedTabsValue=null;openedTabs.subscribe(o=>{openedTabsValue=o,invalidateCommands()});const getOpenedTabs=()=>openedTabsValue;let commandsValue=null;commands.subscribe(o=>{commandsValue=o;const e=getElectron();e&&e.send("update-commands",JSON.stringify(o))});const getCommands=()=>commandsValue;let activeTabValue=null;activeTab.subscribe(o=>{activeTabValue=o});const getActiveTab=()=>activeTabValue;let currentConfigValue=null;const getCurrentConfig=()=>currentConfigValue;let recentDatabasesValue=null;recentDatabases.subscribe(o=>{recentDatabasesValue=o});const getRecentDatabases=()=>_.compact(recentDatabasesValue);pinnedDatabases.subscribe(o=>{});let lockedDatabaseModeValue=null;lockedDatabaseMode.subscribe(o=>{lockedDatabaseModeValue=o});const getLockedDatabaseMode=()=>lockedDatabaseModeValue;let currentDatabaseValue=null;currentDatabase.subscribe(o=>{var e,t;currentDatabaseValue=o,(e=o==null?void 0:o.connection)!=null&&e._id&&((t=o==null?void 0:o.connection)!=null&&t.singleDatabase?openedSingleDatabaseConnections.update(n=>{var r;return _.uniq([...n,(r=o==null?void 0:o.connection)==null?void 0:r._id])}):(openedConnections.update(n=>{var r;return _.uniq([...n,(r=o==null?void 0:o.connection)==null?void 0:r._id])}),expandedConnections.update(n=>{var r;return _.uniq([...n,(r=o==null?void 0:o.connection)==null?void 0:r._id])}))),invalidateCommands()});const getCurrentDatabase=()=>currentDatabaseValue;let currentSettingsValue=null;const getCurrentSettings=()=>currentSettingsValue||{};let extensionsValue=null;extensions.subscribe(o=>{extensionsValue=o});const getExtensions=()=>extensionsValue;openedConnections.subscribe(o=>{});function subscribeApiDependendStores(){useSettings().subscribe(o=>{currentSettingsValue=o,commandsSettings.set((o||{}).commands||{}),invalidateCommands()}),useConfig().subscribe(o=>{currentConfigValue=o,invalidateCommands(),o.singleDbConnection&&currentDatabase.set(o.singleDbConnection)})}let currentArchiveValue=null;currentArchive.subscribe(o=>{currentArchiveValue=o});const getCurrentArchive=()=>currentArchiveValue,ThemeLight_svelte_svelte_type_style_lang="",themeClassName$1="theme-light",themeName$1="Light",themeType$1="light";class ThemeLight extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}const light=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeLight,themeClassName:themeClassName$1,themeName:themeName$1,themeType:themeType$1},Symbol.toStringTag,{value:"Module"})),ThemeDark_svelte_svelte_type_style_lang="",themeClassName="theme-dark",themeName="Dark",themeType="dark";class ThemeDark extends SvelteComponent{constructor(e){super(),init(this,e,null,null,safe_not_equal,{})}}const dark=Object.freeze(Object.defineProperty({__proto__:null,default:ThemeDark,themeClassName,themeName,themeType},Symbol.toStringTag,{value:"Module"}));function buildThemes(o){const e=[light,dark];for(const{content:t}of o){const{themes:n}=t;n&&e.push(...n)}return e}var __awaiter$b=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};function loadPlugins(pluginsDict,installedPlugins){return __awaiter$b(this,void 0,void 0,function*(){console.log("run loadPlugins"),window.DBGATE_TOOLS=dbgateTools;const newPlugins={};for(const installed of installedPlugins||[])if(!_.keys(pluginsDict).includes(installed.name)){console.log("Loading module",installed.name),loadingPluginStore.set({loaded:!1,loadingPackageName:installed.name});const resp=yield apiCall("plugins/script",{packageName:installed.name}),module=eval(`${resp}; plugin`);console.log("Loaded plugin",module);const moduleContent=module.__esModule?module.default:module;newPlugins[installed.name]=moduleContent}return installedPlugins&&loadingPluginStore.set({loaded:!0,loadingPackageName:null}),newPlugins})}function buildDrivers(o){const e=[];for(const{content:t}of o)t.drivers&&e.push(...t.drivers);return e}function buildExtensions(o){return{plugins:o,fileFormats:buildFileFormats(o),themes:buildThemes(o),drivers:buildDrivers(o),quickExports:buildQuickExports(o)}}function instance$4B(o,e,t){let n,r,a;component_subscribe(o,extensions,u=>t(4,r=u)),this&&this.__awaiter;let s={};const l=useInstalledPlugins();return component_subscribe(o,l,u=>t(3,a=u)),o.$$.update=()=>{o.$$.dirty&10&&loadPlugins(s,a).then(u=>{_.isEmpty(u)||t(1,s=_.pick(Object.assign(Object.assign({},s),u),a.map(d=>d.name)))}),o.$$.dirty&10&&t(2,n=(a||[]).map(u=>({packageName:u.name,manifest:u,content:s[u.name]})).filter(u=>u.content)),o.$$.dirty&4&&set_store_value(extensions,r=buildExtensions(n),r)},[l,s,n,a]}class PluginsProvider extends SvelteComponent{constructor(e){super(),init(this,e,instance$4B,null,safe_not_equal,{})}}const SearchInput_svelte_svelte_type_style_lang="";function create_fragment$4D(o){let e,t,n;return{c(){e=element("input"),attr(e,"type","text"),attr(e,"placeholder",o[1]),e.value=o[4],attr(e,"class","svelte-znu4wn")},m(r,a){insert(r,e,a),o[8](e),t||(n=[listen(e,"input",o[7]),listen(e,"keydown",o[5]),listen(e,"focus",o[9])],t=!0)},p(r,[a]){a&2&&attr(e,"placeholder",r[1]),a&16&&e.value!==r[4]&&(e.value=r[4])},i:noop$1,o:noop$1,d(r){r&&detach(e),o[8](null),t=!1,run_all(n)}}}function instance$4A(o,e,t){let n,{placeholder:r}=e,{value:a}=e,{isDebounced:s=!1}=e,l;function u(p){p.keyCode==keycodes.escape&&t(0,a="")}const d=_.debounce(p=>t(0,a=p),500),f=p=>{s?d(l.value):t(0,a=l.value)};function m(p){binding_callbacks[p?"unshift":"push"](()=>{l=p,t(3,l)})}const h=p=>l.select();return o.$$set=p=>{"placeholder"in p&&t(1,r=p.placeholder),"value"in p&&t(0,a=p.value),"isDebounced"in p&&t(2,s=p.isDebounced)},o.$$.update=()=>{o.$$.dirty&1&&t(4,n=a||"")},[a,r,s,l,n,u,d,f,m,h]}class SearchInput extends SvelteComponent{constructor(e){super(),init(this,e,instance$4A,create_fragment$4D,safe_not_equal,{placeholder:1,value:0,isDebounced:2})}}const WidgetsInnerContainer_svelte_svelte_type_style_lang="";function create_fragment$4C(o){let e,t,n,r;const a=o[1].default,s=create_slot(a,o,o[0],null);return{c(){e=element("div"),s&&s.c(),attr(e,"class","svelte-3may20")},m(l,u){insert(l,e,u),s&&s.m(e,null),t=!0,n||(r=listen(e,"drop",o[2]),n=!0)},p(l,[u]){s&&s.p&&(!t||u&1)&&update_slot_base(s,a,l,l[0],t?get_slot_changes(a,l[0],u,null):get_all_dirty_from_scope(l[0]),null)},i(l){t||(transition_in(s,l),t=!0)},o(l){transition_out(s,l),t=!1},d(l){l&&detach(e),s&&s.d(l),n=!1,r()}}}function instance$4z(o,e,t){let{$$slots:n={},$$scope:r}=e;function a(s){bubble.call(this,o,s)}return o.$$set=s=>{"$$scope"in s&&t(0,r=s.$$scope)},[r,n,a]}class WidgetsInnerContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$4z,create_fragment$4C,safe_not_equal,{})}}const WidgetsInnerContainer$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetsInnerContainer},Symbol.toStringTag,{value:"Module"})),SearchBoxWrapper_svelte_svelte_type_style_lang="";function create_fragment$4B(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("div"),r&&r.c(),attr(e,"class","svelte-7wgwlv")},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$4y(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class SearchBoxWrapper extends SvelteComponent{constructor(e){super(),init(this,e,instance$4y,create_fragment$4B,safe_not_equal,{})}}function sleep(o){return new Promise(e=>window.setTimeout(()=>e(null),o))}function changeTab(o,e){openedTabs.update(t=>t.map(n=>n.tabid==o?e(n):n))}function markTabUnsaved(o){getOpenedTabs().find(t=>t.tabid==o).unsaved||openedTabs.update(t=>t.map(n=>n.tabid==o?{...n,unsaved:!0}:n))}function markTabSaved(o){openedTabs.update(e=>e.map(t=>t.tabid==o?{...t,unsaved:!1}:t))}function setSelectedTabFunc(o,e){return[...(o||[]).filter(t=>t.tabid!=e).map(t=>({...t,selected:!1})),...(o||[]).filter(t=>t.tabid==e).map(t=>({...t,selected:!0}))]}function setSelectedTab(o){openedTabs.update(e=>setSelectedTabFunc(e,o))}function getObjectTypeFieldLabel(o){return o=="matviews"?"Materialized Views":_.startCase(o)}function isMac(){var e;return((navigator==null?void 0:navigator.platform)||((e=navigator==null?void 0:navigator.userAgentData)==null?void 0:e.platform)||"unknown").toUpperCase().indexOf("MAC")>=0}function formatKeyText(o){return isMac()?o.replace("CtrlOrCommand+"," ").replace("Shift+"," ").replace("Alt+"," ").replace("Command+"," ").replace("Ctrl+"," ").replace("Backspace"," "):o.replace("CtrlOrCommand+","Ctrl+")}function resolveKeyText(o){return isMac()?o.replace("CtrlOrCommand+","Command+"):o.replace("CtrlOrCommand+","Ctrl+")}function isCtrlOrCommandKey(o){return isMac()?o.metaKey:o.ctrlKey}function plusExpandIcon(o){return o?"icon minus-box":"icon plus-box"}function chevronExpandIcon(o){return o?"icon chevron-down":"icon chevron-right"}const AppObjectListItem_svelte_svelte_type_style_lang="";function create_if_block$1X(o){let e,t,n,r;var a=o[2].default;function s(u){return{props:{data:u[3],expandIcon:getExpandIcon(!u[8]&&u[10],u[4],u[11],u[5]),checkedObjectsStore:u[6],module:u[2],disableContextMenu:u[7],passProps:u[9]}}}a&&(e=construct_svelte_component(a,s(o)),e.$on("click",o[12]),e.$on("expand",o[13]));let l=(o[11]||o[8])&&o[4]&&create_if_block_1$19(o);return{c(){e&&create_component(e.$$.fragment),t=space(),l&&l.c(),n=empty()},m(u,d){e&&mount_component(e,u,d),insert(u,t,d),l&&l.m(u,d),insert(u,n,d),r=!0},p(u,d){const f={};if(d&8&&(f.data=u[3]),d&3376&&(f.expandIcon=getExpandIcon(!u[8]&&u[10],u[4],u[11],u[5])),d&64&&(f.checkedObjectsStore=u[6]),d&4&&(f.module=u[2]),d&128&&(f.disableContextMenu=u[7]),d&512&&(f.passProps=u[9]),d&4&&a!==(a=u[2].default)){if(e){group_outros();const m=e;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}a?(e=construct_svelte_component(a,s(u)),e.$on("click",u[12]),e.$on("expand",u[13]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(f);(u[11]||u[8])&&u[4]?l?(l.p(u,d),d&2320&&transition_in(l,1)):(l=create_if_block_1$19(u),l.c(),transition_in(l,1),l.m(n.parentNode,n)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){r||(e&&transition_in(e.$$.fragment,u),transition_in(l),r=!0)},o(u){e&&transition_out(e.$$.fragment,u),transition_out(l),r=!1},d(u){u&&(detach(t),detach(n)),e&&destroy_component(e,u),l&&l.d(u)}}}function create_if_block_1$19(o){let e,t,n;var r=o[4];function a(s){return{props:{data:s[3],filter:s[1],passProps:s[9]}}}return r&&(t=construct_svelte_component(r,a(o))),{c(){e=element("div"),t&&create_component(t.$$.fragment),attr(e,"class","subitems svelte-k6fdqm")},m(s,l){insert(s,e,l),t&&mount_component(t,e,null),n=!0},p(s,l){const u={};if(l&8&&(u.data=s[3]),l&2&&(u.filter=s[1]),l&512&&(u.passProps=s[9]),l&16&&r!==(r=s[4])){if(t){group_outros();const d=t;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(t=construct_svelte_component(r,a(s)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,null)):t=null}else r&&t.$set(u)},i(s){n||(t&&transition_in(t.$$.fragment,s),n=!0)},o(s){t&&transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),t&&destroy_component(t)}}}function create_fragment$4A(o){let e,t,n=!o[0]&&create_if_block$1X(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[0]?n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()):n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block$1X(r),n.c(),transition_in(n,1),n.m(e.parentNode,e))},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}globalThis&&globalThis.__awaiter;function getExpandIcon(o,e,t,n){return e?o?n(t):"icon invisible-box":null}function instance$4x(o,e,t){let n,r;var a=this&&this.__awaiter||function($,S,I,R){function N(M){return M instanceof I?M:new I(function(F){F(M)})}return new(I||(I=Promise))(function(M,F){function D(K){try{B(R.next(K))}catch(U){F(U)}}function x(K){try{B(R.throw(K))}catch(U){F(U)}}function B(K){K.done?M(K.value):N(K.value).then(D,x)}B((R=R.apply($,S||[])).next())})};let{isHidden:s}=e,{filter:l}=e,{module:u}=e,{data:d}=e,{subItemsComponent:f}=e,{expandOnClick:m}=e,{isExpandable:h=void 0}=e,{expandIconFunc:p=plusExpandIcon}=e,{checkedObjectsStore:g=null}=e,{disableContextMenu:b=!1}=e,{isExpandedBySearch:v=!1}=e,{passProps:y}=e,{getIsExpanded:C=null}=e,{setIsExpanded:E=null}=e,A=!1;function k(){return a(this,void 0,void 0,function*(){f&&m&&(yield tick(),T())})}function T(){C&&E?E(d,!r):t(18,A=!A)}return o.$$set=$=>{"isHidden"in $&&t(0,s=$.isHidden),"filter"in $&&t(1,l=$.filter),"module"in $&&t(2,u=$.module),"data"in $&&t(3,d=$.data),"subItemsComponent"in $&&t(4,f=$.subItemsComponent),"expandOnClick"in $&&t(14,m=$.expandOnClick),"isExpandable"in $&&t(15,h=$.isExpandable),"expandIconFunc"in $&&t(5,p=$.expandIconFunc),"checkedObjectsStore"in $&&t(6,g=$.checkedObjectsStore),"disableContextMenu"in $&&t(7,b=$.disableContextMenu),"isExpandedBySearch"in $&&t(8,v=$.isExpandedBySearch),"passProps"in $&&t(9,y=$.passProps),"getIsExpanded"in $&&t(16,C=$.getIsExpanded),"setIsExpanded"in $&&t(17,E=$.setIsExpanded)},o.$$.update=()=>{o.$$.dirty&32776&&t(10,n=d&&h&&h(d)),o.$$.dirty&459784&&t(11,r=n?C&&E?C(d):A:!1)},[s,l,u,d,f,p,g,b,v,y,n,r,k,T,m,h,C,E,A]}class AppObjectListItem extends SvelteComponent{constructor(e){super(),init(this,e,instance$4x,create_fragment$4A,safe_not_equal,{isHidden:0,filter:1,module:2,data:3,subItemsComponent:4,expandOnClick:14,isExpandable:15,expandIconFunc:5,checkedObjectsStore:6,disableContextMenu:7,isExpandedBySearch:8,passProps:9,getIsExpanded:16,setIsExpanded:17})}}const AppObjectGroup_svelte_svelte_type_style_lang="";function get_each_context$K(o,e,t){const n=o.slice();return n[23]=e[t],n}function create_if_block$1W(o){let e,t,n,r,a,s=o[4]&&create_if_block_1$18(o),l=ensure_array_like(o[1]),u=[];for(let f=0;f<l.length;f+=1)u[f]=create_each_block$K(get_each_context$K(o,l,f));const d=f=>transition_out(u[f],1,1,()=>{u[f]=null});return{c(){s&&s.c(),e=space(),t=element("div");for(let f=0;f<u.length;f+=1)u[f].c()},m(f,m){s&&s.m(f,m),insert(f,e,m),insert(f,t,m);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(t,null);n=!0,r||(a=listen(t,"drop",o[12]),r=!0)},p(f,m){if(f[4]?s?(s.p(f,m),m&16&&transition_in(s,1)):(s=create_if_block_1$18(f),s.c(),transition_in(s,1),s.m(e.parentNode,e)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),m&8314){l=ensure_array_like(f[1]);let h;for(h=0;h<l.length;h+=1){const p=get_each_context$K(f,l,h);u[h]?(u[h].p(p,m),transition_in(u[h],1)):(u[h]=create_each_block$K(p),u[h].c(),transition_in(u[h],1),u[h].m(t,null))}for(group_outros(),h=l.length;h<u.length;h+=1)d(h);check_outros()}},i(f){if(!n){transition_in(s);for(let m=0;m<l.length;m+=1)transition_in(u[m]);n=!0}},o(f){transition_out(s),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)transition_out(u[m]);n=!1},d(f){f&&(detach(e),detach(t)),s&&s.d(f),destroy_each(u,f),r=!1,a()}}}function create_if_block_1$18(o){let e,t,n,r,a;return t=new Link$1({props:{onClick:o[20],$$slots:{default:[create_default_slot_1$U]},$$scope:{ctx:o}}}),r=new Link$1({props:{onClick:o[21],$$slots:{default:[create_default_slot$1D]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(`
      |
      `),create_component(r.$$.fragment),attr(e,"class","ml-2")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l&67108864&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l&67108864&&(d.$$scope={dirty:l,ctx:s}),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_default_slot_1$U(o){let e;return{c(){e=text("Check all")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot$1D(o){let e;return{c(){e=text("Uncheck all")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_each_block$K(o){let e,t;const n=[{isHidden:!o[23].isMatched},o[13],{module:o[3]},{data:o[23].data},{checkedObjectsStore:o[4]},{disableContextMenu:o[5]},{passProps:o[6]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new AppObjectListItem({props:r}),e.$on("objectClick",o[22]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8314?get_spread_update(n,[s&2&&{isHidden:!a[23].isMatched},s&8192&&get_spread_object(a[13]),s&8&&{module:a[3]},s&2&&{data:a[23].data},s&16&&{checkedObjectsStore:a[4]},s&32&&{disableContextMenu:a[5]},s&64&&{passProps:a[6]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4z(o){let e,t,n,r,a,s,l=(o[1]&&`(${o[9]})`)+"",u,d,f,m,h,p,g;n=new FontIcon({props:{icon:o[2](o[10])}});let b=o[10]&&create_if_block$1W(o);return{c(){e=element("div"),t=element("span"),create_component(n.$$.fragment),r=space(),a=text(o[0]),s=space(),u=text(l),f=space(),b&&b.c(),m=empty(),attr(t,"class","expand-icon svelte-t8to39"),attr(e,"class","group svelte-t8to39")},m(v,y){insert(v,e,y),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),append(e,s),append(e,u),insert(v,f,y),b&&b.m(v,y),insert(v,m,y),h=!0,p||(g=[listen(e,"click",o[18]),listen(e,"drop",o[12]),action_destroyer(d=contextMenu.call(null,e,o[7]?o[19]:null))],p=!0)},p(v,[y]){const C={};y&1028&&(C.icon=v[2](v[10])),n.$set(C),(!h||y&1)&&set_data(a,v[0]),(!h||y&514)&&l!==(l=(v[1]&&`(${v[9]})`)+"")&&set_data(u,l),d&&is_function(d.update)&&y&129&&d.update.call(null,v[7]?v[19]:null),v[10]?b?(b.p(v,y),y&1024&&transition_in(b,1)):(b=create_if_block$1W(v),b.c(),transition_in(b,1),b.m(m.parentNode,m)):b&&(group_outros(),transition_out(b,1,1,()=>{b=null}),check_outros())},i(v){h||(transition_in(n.$$.fragment,v),transition_in(b),h=!0)},o(v){transition_out(n.$$.fragment,v),transition_out(b),h=!1},d(v){v&&(detach(e),detach(f),detach(m)),destroy_component(n),b&&b.d(v),p=!1,run_all(g)}}}function instance$4w(o,e,t){let n,r,a;const s=["group","groupFunc","items","groupIconFunc","module","checkedObjectsStore","disableContextMenu","passProps","onDropOnGroup","groupContextMenu","collapsedGroupNames"];let l=compute_rest_props(e,s),u,d=noop$1,f=()=>(d(),d=subscribe(k,F=>t(17,u=F)),k);o.$$.on_destroy.push(()=>d());let{group:m}=e,{groupFunc:h}=e,{items:p}=e,{groupIconFunc:g=plusExpandIcon}=e,{module:b}=e,{checkedObjectsStore:v=null}=e,{disableContextMenu:y=!1}=e,{passProps:C}=e,{onDropOnGroup:E=void 0}=e,{groupContextMenu:A=null}=e,{collapsedGroupNames:k}=e;f();function T(F){v.update(D=>F?[...D,...r.filter(B=>!D.find(K=>b.extractKey(B.data)==b.extractKey(K))).map(B=>B.data)]:D.filter(B=>h(B)!=m))}function $(F){var D=F.dataTransfer.getData("app_object_drag_data");D&&E&&(F.stopPropagation(),E(D,m))}const S=()=>k.update(F=>F.includes(m)?F.filter(D=>D!=m):[...F,m]),I=()=>A(m),R=()=>T(!0),N=()=>T(!1);function M(F){bubble.call(this,o,F)}return o.$$set=F=>{e=assign(assign({},e),exclude_internal_props(F)),t(13,l=compute_rest_props(e,s)),"group"in F&&t(0,m=F.group),"groupFunc"in F&&t(14,h=F.groupFunc),"items"in F&&t(1,p=F.items),"groupIconFunc"in F&&t(2,g=F.groupIconFunc),"module"in F&&t(3,b=F.module),"checkedObjectsStore"in F&&t(4,v=F.checkedObjectsStore),"disableContextMenu"in F&&t(5,y=F.disableContextMenu),"passProps"in F&&t(6,C=F.passProps),"onDropOnGroup"in F&&t(15,E=F.onDropOnGroup),"groupContextMenu"in F&&t(7,A=F.groupContextMenu),"collapsedGroupNames"in F&&f(t(8,k=F.collapsedGroupNames))},o.$$.update=()=>{o.$$.dirty&131073&&t(10,n=!u.includes(m)),o.$$.dirty&2&&t(16,r=p.filter(F=>F.isMatched)),o.$$.dirty&65538&&t(9,a=r.length<p.length?`${r.length}/${p.length}`:`${p.length}`)},[m,p,g,b,v,y,C,A,k,a,n,T,$,l,h,E,r,u,S,I,R,N,M]}class AppObjectGroup extends SvelteComponent{constructor(e){super(),init(this,e,instance$4w,create_fragment$4z,safe_not_equal,{group:0,groupFunc:14,items:1,groupIconFunc:2,module:3,checkedObjectsStore:4,disableContextMenu:5,passProps:6,onDropOnGroup:15,groupContextMenu:7,collapsedGroupNames:8})}}function get_each_context_1$b(o,e,t){const n=o.slice();return n[27]=e[t],n}function get_each_context$J(o,e,t){const n=o.slice();return n[24]=e[t],n}function create_else_block$T(o){let e,t,n=ensure_array_like(o[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_1$b(get_each_context_1$b(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&1576959){n=ensure_array_like(s[0]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_1$b(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_1$b(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_if_block$1V(o){let e,t,n=ensure_array_like(o[12]?_.sortBy(_.keys(o[18])):_.keys(o[18])),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$J(get_each_context$J(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&524278){n=ensure_array_like(s[12]?_.sortBy(_.keys(s[18])):_.keys(s[18]));let u;for(u=0;u<n.length;u+=1){const d=get_each_context$J(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$J(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_each_block_1$b(o){let e,t;return e=new AppObjectListItem({props:{isHidden:!o[20].includes(o[27]),module:o[1],subItemsComponent:o[2],expandOnClick:o[3],data:o[27],isExpandable:o[4],expandIconFunc:o[6],checkedObjectsStore:o[7],disableContextMenu:o[8],filter:o[5],isExpandedBySearch:o[19].includes(o[27]),passProps:o[9],getIsExpanded:o[10],setIsExpanded:o[11]}}),e.$on("objectClick",o[23]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1048577&&(a.isHidden=!n[20].includes(n[27])),r&2&&(a.module=n[1]),r&4&&(a.subItemsComponent=n[2]),r&8&&(a.expandOnClick=n[3]),r&1&&(a.data=n[27]),r&16&&(a.isExpandable=n[4]),r&64&&(a.expandIconFunc=n[6]),r&128&&(a.checkedObjectsStore=n[7]),r&256&&(a.disableContextMenu=n[8]),r&32&&(a.filter=n[5]),r&524289&&(a.isExpandedBySearch=n[19].includes(n[27])),r&512&&(a.passProps=n[9]),r&1024&&(a.getIsExpanded=n[10]),r&2048&&(a.setIsExpanded=n[11]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$J(o){let e,t;return e=new AppObjectGroup({props:{group:o[24],module:o[1],items:o[18][o[24]],expandIconFunc:o[6],groupIconFunc:o[14],isExpandable:o[4],subItemsComponent:o[2],checkedObjectsStore:o[7],groupFunc:o[15],disableContextMenu:o[8],filter:o[5],passProps:o[9],getIsExpanded:o[10],setIsExpanded:o[11],onDropOnGroup:o[16],groupContextMenu:o[13],collapsedGroupNames:o[17]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&266240&&(a.group=n[24]),r&2&&(a.module=n[1]),r&266240&&(a.items=n[18][n[24]]),r&64&&(a.expandIconFunc=n[6]),r&16384&&(a.groupIconFunc=n[14]),r&16&&(a.isExpandable=n[4]),r&4&&(a.subItemsComponent=n[2]),r&128&&(a.checkedObjectsStore=n[7]),r&32768&&(a.groupFunc=n[15]),r&256&&(a.disableContextMenu=n[8]),r&32&&(a.filter=n[5]),r&512&&(a.passProps=n[9]),r&1024&&(a.getIsExpanded=n[10]),r&2048&&(a.setIsExpanded=n[11]),r&65536&&(a.onDropOnGroup=n[16]),r&8192&&(a.groupContextMenu=n[13]),r&131072&&(a.collapsedGroupNames=n[17]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$4y(o){let e,t,n,r;const a=[create_if_block$1V,create_else_block$T],s=[];function l(u,d){return u[15]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function extendGroups(o,e){const t={...o};for(const n of e)t[n]||(t[n]=[]);return t}function instance$4v(o,e,t){let n,r,a,s,{list:l}=e,{module:u}=e,{subItemsComponent:d=void 0}=e,{expandOnClick:f=!1}=e,{isExpandable:m=void 0}=e,{filter:h=void 0}=e,{expandIconFunc:p=void 0}=e,{checkedObjectsStore:g=null}=e,{disableContextMenu:b=!1}=e,{passProps:v}=e,{getIsExpanded:y=null}=e,{setIsExpanded:C=null}=e,{sortGroups:E=!1}=e,{groupContextMenu:A=null}=e,{groupIconFunc:k=plusExpandIcon}=e,{groupFunc:T=void 0}=e,{onDropOnGroup:$=void 0}=e,{emptyGroupNames:S=[]}=e,{collapsedGroupNames:I=writable([])}=e;function R(N){bubble.call(this,o,N)}return o.$$set=N=>{"list"in N&&t(0,l=N.list),"module"in N&&t(1,u=N.module),"subItemsComponent"in N&&t(2,d=N.subItemsComponent),"expandOnClick"in N&&t(3,f=N.expandOnClick),"isExpandable"in N&&t(4,m=N.isExpandable),"filter"in N&&t(5,h=N.filter),"expandIconFunc"in N&&t(6,p=N.expandIconFunc),"checkedObjectsStore"in N&&t(7,g=N.checkedObjectsStore),"disableContextMenu"in N&&t(8,b=N.disableContextMenu),"passProps"in N&&t(9,v=N.passProps),"getIsExpanded"in N&&t(10,y=N.getIsExpanded),"setIsExpanded"in N&&t(11,C=N.setIsExpanded),"sortGroups"in N&&t(12,E=N.sortGroups),"groupContextMenu"in N&&t(13,A=N.groupContextMenu),"groupIconFunc"in N&&t(14,k=N.groupIconFunc),"groupFunc"in N&&t(15,T=N.groupFunc),"onDropOnGroup"in N&&t(16,$=N.onDropOnGroup),"emptyGroupNames"in N&&t(21,S=N.emptyGroupNames),"collapsedGroupNames"in N&&t(17,I=N.collapsedGroupNames)},o.$$.update=()=>{o.$$.dirty&32803&&t(20,n=T?null:l.filter(N=>{const M=u.createMatcher&&u.createMatcher(N);return!(M&&!M(h))})),o.$$.dirty&32803&&t(19,r=T?null:l.filter(N=>{const M=u.createChildMatcher&&u.createChildMatcher(N);return!(M&&!M(h))})),o.$$.dirty&32803&&t(22,a=T?_.compact((l||[]).map(N=>{const M=u.createMatcher&&u.createMatcher(N),F=!(M&&!M(h));return{group:T(N),data:N,isMatched:F}})):null),o.$$.dirty&6324224&&t(18,s=T?extendGroups(_.groupBy(a,"group"),S):null)},[l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,I,s,r,n,S,a,R]}class AppObjectList extends SvelteComponent{constructor(e){super(),init(this,e,instance$4v,create_fragment$4y,safe_not_equal,{list:0,module:1,subItemsComponent:2,expandOnClick:3,isExpandable:4,filter:5,expandIconFunc:6,checkedObjectsStore:7,disableContextMenu:8,passProps:9,getIsExpanded:10,setIsExpanded:11,sortGroups:12,groupContextMenu:13,groupIconFunc:14,groupFunc:15,onDropOnGroup:16,emptyGroupNames:21,collapsedGroupNames:17})}}function create_fragment$4x(o){let e,t,n,r=[{type:"checkbox"},o[0]],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("input"),set_attributes(e,a)},m(s,l){insert(s,e,l),e.autofocus&&e.focus(),t||(n=listen(e,"change",o[1]),t=!0)},p(s,[l]){set_attributes(e,a=get_spread_update(r,[{type:"checkbox"},l&1&&s[0]]))},i:noop$1,o:noop$1,d(s){s&&detach(e),t=!1,n()}}}function instance$4u(o,e,t){const n=[];let r=compute_rest_props(e,n);function a(s){bubble.call(this,o,s)}return o.$$set=s=>{e=assign(assign({},e),exclude_internal_props(s)),t(0,r=compute_rest_props(e,n))},[r,a]}class CheckboxField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4u,create_fragment$4x,safe_not_equal,{})}}const AppObjectCore_svelte_svelte_type_style_lang="";function create_if_block_10$8(o){let e,t;return e=new CheckboxField({props:{checked:!!o[18]}}),e.$on("change",o[32]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&262144&&(a.checked=!!n[18]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_9$9(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:o[10]}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","expand-icon svelte-1klg37t")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",stop_propagation(o[19])),r=!0)},p(s,l){const u={};l[0]&1024&&(u.icon=s[10]),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block_8$9(o){let e;return{c(){e=element("span"),set_style(e,"margin-right",`${o[17]*16}px`)},m(t,n){insert(t,e,n)},p(t,n){n[0]&131072&&set_style(e,"margin-right",`${t[17]*16}px`)},d(t){t&&detach(e)}}}function create_else_block_1$b(o){let e,t;return e=new FontIcon({props:{icon:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&1&&(a.icon=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_7$a(o){let e,t;return e=new FontIcon({props:{icon:"icon loading"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$f(o){let e,t;return e=new FontIcon({props:{style:`color:${o[13]}`,icon:"icon square"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&8192&&(a.style=`color:${n[13]}`),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$n(o){let e,t,n;return t=new FontIcon({props:{icon:o[6]}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","status svelte-1klg37t")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a[0]&64&&(s.icon=r[6]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_4$w(o){let e,t,n;return t=new FontIcon({props:{icon:o[5],title:o[7]}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","status svelte-1klg37t")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a[0]&32&&(s.icon=r[5]),a[0]&128&&(s.title=r[7]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_3$D(o){let e,t;return{c(){e=element("span"),t=text(o[8]),attr(e,"class","ext-info svelte-1klg37t")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r[0]&256&&set_data(t,n[8])},d(n){n&&detach(e)}}}function create_if_block_2$S(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon pin"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","pin svelte-1klg37t")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[33]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block$1U(o){let e,t,n,r;const a=[create_if_block_1$17,create_else_block$S],s=[];function l(u,d){return u[16]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$S(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon close"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","unpin svelte-1klg37t")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[34]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block_1$17(o){let e,t,n;return t=new FontIcon({props:{icon:"icon pin"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","pin-active svelte-1klg37t")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p:noop$1,i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_fragment$4w(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A=o[11]&&create_if_block_10$8(o),k=o[10]&&create_if_block_9$9(o),T=o[17]&&create_if_block_8$9(o);const $=[create_if_block_7$a,create_else_block_1$b],S=[];function I(U,G){return U[4]?0:1}a=I(o),s=S[a]=$[a](o);let R=o[13]&&create_if_block_6$f(o),N=o[6]&&create_if_block_5$n(o),M=o[5]&&create_if_block_4$w(o),F=o[8]&&create_if_block_3$D(o),D=o[14]&&create_if_block_2$S(o),x=o[15]&&create_if_block$1U(o);const B=o[26].default,K=create_slot(B,o,o[25],null);return{c(){e=element("div"),A&&A.c(),t=space(),k&&k.c(),n=space(),T&&T.c(),r=space(),s.c(),l=space(),R&&R.c(),u=space(),d=text(o[1]),f=space(),N&&N.c(),m=space(),M&&M.c(),h=space(),F&&F.c(),p=space(),D&&D.c(),g=space(),x&&x.c(),v=space(),K&&K.c(),attr(e,"class","main svelte-1klg37t"),attr(e,"draggable",!0),toggle_class(e,"isBold",o[3])},m(U,G){insert(U,e,G),A&&A.m(e,null),append(e,t),k&&k.m(e,null),append(e,n),T&&T.m(e,null),append(e,r),S[a].m(e,null),append(e,l),R&&R.m(e,null),append(e,u),append(e,d),append(e,f),N&&N.m(e,null),append(e,m),M&&M.m(e,null),append(e,h),F&&F.m(e,null),append(e,p),D&&D.m(e,null),append(e,g),x&&x.m(e,null),insert(U,v,G),K&&K.m(U,G),y=!0,C||(E=[listen(e,"click",o[20]),listen(e,"mouseup",o[21]),listen(e,"dblclick",o[27]),action_destroyer(b=contextMenu.call(null,e,o[12]?null:o[9])),listen(e,"dragstart",o[35]),listen(e,"dragstart",o[28]),listen(e,"dragenter",o[29]),listen(e,"dragend",o[30]),listen(e,"drop",o[31])],C=!0)},p(U,G){U[11]?A?(A.p(U,G),G[0]&2048&&transition_in(A,1)):(A=create_if_block_10$8(U),A.c(),transition_in(A,1),A.m(e,t)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),U[10]?k?(k.p(U,G),G[0]&1024&&transition_in(k,1)):(k=create_if_block_9$9(U),k.c(),transition_in(k,1),k.m(e,n)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),U[17]?T?T.p(U,G):(T=create_if_block_8$9(U),T.c(),T.m(e,r)):T&&(T.d(1),T=null);let W=a;a=I(U),a===W?S[a].p(U,G):(group_outros(),transition_out(S[W],1,1,()=>{S[W]=null}),check_outros(),s=S[a],s?s.p(U,G):(s=S[a]=$[a](U),s.c()),transition_in(s,1),s.m(e,l)),U[13]?R?(R.p(U,G),G[0]&8192&&transition_in(R,1)):(R=create_if_block_6$f(U),R.c(),transition_in(R,1),R.m(e,u)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros()),(!y||G[0]&2)&&set_data(d,U[1]),U[6]?N?(N.p(U,G),G[0]&64&&transition_in(N,1)):(N=create_if_block_5$n(U),N.c(),transition_in(N,1),N.m(e,m)):N&&(group_outros(),transition_out(N,1,1,()=>{N=null}),check_outros()),U[5]?M?(M.p(U,G),G[0]&32&&transition_in(M,1)):(M=create_if_block_4$w(U),M.c(),transition_in(M,1),M.m(e,h)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),U[8]?F?F.p(U,G):(F=create_if_block_3$D(U),F.c(),F.m(e,p)):F&&(F.d(1),F=null),U[14]?D?(D.p(U,G),G[0]&16384&&transition_in(D,1)):(D=create_if_block_2$S(U),D.c(),transition_in(D,1),D.m(e,g)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),U[15]?x?(x.p(U,G),G[0]&32768&&transition_in(x,1)):(x=create_if_block$1U(U),x.c(),transition_in(x,1),x.m(e,null)):x&&(group_outros(),transition_out(x,1,1,()=>{x=null}),check_outros()),b&&is_function(b.update)&&G[0]&4608&&b.update.call(null,U[12]?null:U[9]),(!y||G[0]&8)&&toggle_class(e,"isBold",U[3]),K&&K.p&&(!y||G[0]&33554432)&&update_slot_base(K,B,U,U[25],y?get_slot_changes(B,U[25],G,null):get_all_dirty_from_scope(U[25]),null)},i(U){y||(transition_in(A),transition_in(k),transition_in(s),transition_in(R),transition_in(N),transition_in(M),transition_in(D),transition_in(x),transition_in(K,U),y=!0)},o(U){transition_out(A),transition_out(k),transition_out(s),transition_out(R),transition_out(N),transition_out(M),transition_out(D),transition_out(x),transition_out(K,U),y=!1},d(U){U&&(detach(e),detach(v)),A&&A.d(),k&&k.d(),T&&T.d(),S[a].d(),R&&R.d(),N&&N.d(),M&&M.d(),F&&F.d(),D&&D.d(),x&&x.d(),K&&K.d(U),C=!1,run_all(E)}}}function instance$4t(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(T,J=>t(24,r=J)),T);o.$$.on_destroy.push(()=>a());let{$$slots:l={},$$scope:u}=e;const d=createEventDispatcher();let{icon:f}=e,{title:m}=e,{data:h=null}=e,{module:p=null}=e,{isBold:g=!1}=e,{isBusy:b=!1}=e,{statusIcon:v=void 0}=e,{statusIconBefore:y=void 0}=e,{statusTitle:C=void 0}=e,{extInfo:E=void 0}=e,{menu:A=void 0}=e,{expandIcon:k=void 0}=e,{checkedObjectsStore:T=null}=e;s();let{disableContextMenu:$=!1}=e,{colorMark:S=null}=e,{onPin:I=null}=e,{onUnpin:R=null}=e,{showPinnedInsteadOfUnpin:N=!1}=e,{indentLevel:M=0}=e;function F(){d("expand")}function D(){T?n?T.update(J=>J.filter(Q=>(p==null?void 0:p.extractKey(h))!=(p==null?void 0:p.extractKey(Q)))):T.update(J=>[...J,h]):d("click")}function x(J){J.button==1&&(d("middleclick"),J.preventDefault(),J.stopPropagation())}function B(J){!J&&n&&T.update(Q=>Q.filter(X=>(p==null?void 0:p.extractKey(h))!=(p==null?void 0:p.extractKey(X)))),J&&!n&&T.update(Q=>[...Q,h])}function K(J){bubble.call(this,o,J)}function U(J){bubble.call(this,o,J)}function G(J){bubble.call(this,o,J)}function W(J){bubble.call(this,o,J)}function q(J){bubble.call(this,o,J)}const H=J=>{B(J.target.checked)},z=J=>{J.preventDefault(),J.stopPropagation(),I()},Y=J=>{J.preventDefault(),J.stopPropagation(),R()},V=J=>{J.dataTransfer.setData("app_object_drag_data",JSON.stringify(h))};return o.$$set=J=>{"icon"in J&&t(0,f=J.icon),"title"in J&&t(1,m=J.title),"data"in J&&t(2,h=J.data),"module"in J&&t(23,p=J.module),"isBold"in J&&t(3,g=J.isBold),"isBusy"in J&&t(4,b=J.isBusy),"statusIcon"in J&&t(5,v=J.statusIcon),"statusIconBefore"in J&&t(6,y=J.statusIconBefore),"statusTitle"in J&&t(7,C=J.statusTitle),"extInfo"in J&&t(8,E=J.extInfo),"menu"in J&&t(9,A=J.menu),"expandIcon"in J&&t(10,k=J.expandIcon),"checkedObjectsStore"in J&&s(t(11,T=J.checkedObjectsStore)),"disableContextMenu"in J&&t(12,$=J.disableContextMenu),"colorMark"in J&&t(13,S=J.colorMark),"onPin"in J&&t(14,I=J.onPin),"onUnpin"in J&&t(15,R=J.onUnpin),"showPinnedInsteadOfUnpin"in J&&t(16,N=J.showPinnedInsteadOfUnpin),"indentLevel"in J&&t(17,M=J.indentLevel),"$$scope"in J&&t(25,u=J.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&25167876&&t(18,n=T&&r.find(J=>(p==null?void 0:p.extractKey(h))==(p==null?void 0:p.extractKey(J))))},[f,m,h,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,n,F,D,x,B,p,r,u,l,K,U,G,W,q,H,z,Y,V]}class AppObjectCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$4t,create_fragment$4w,safe_not_equal,{icon:0,title:1,data:2,module:23,isBold:3,isBusy:4,statusIcon:5,statusIconBefore:6,statusTitle:7,extInfo:8,menu:9,expandIcon:10,checkedObjectsStore:11,disableContextMenu:12,colorMark:13,onPin:14,onUnpin:15,showPinnedInsteadOfUnpin:16,indentLevel:17},null,[-1,-1])}}function create_default_slot_1$T(o){let e;return{c(){e=text(o[0])},m(t,n){insert(t,e,n)},p(t,n){n&1&&set_data(e,t[0])},d(t){t&&detach(e)}}}function create_footer_slot$u(o){let e,t,n,r;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[3]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$1C(o){let e,t;const n=[o[2]];let r={$$slots:{footer:[create_footer_slot$u],default:[create_default_slot_1$T]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&4?get_spread_update(n,[get_spread_object(a[2])]):{};s&19&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4v(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1C]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&23&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4s(o,e,t){const n=["message","onConfirm"];let r=compute_rest_props(e,n),{message:a}=e,{onConfirm:s}=e;const l=()=>{closeCurrentModal(),s()};return o.$$set=u=>{e=assign(assign({},e),exclude_internal_props(u)),t(2,r=compute_rest_props(e,n)),"message"in u&&t(0,a=u.message),"onConfirm"in u&&t(1,s=u.onConfirm)},[a,s,r,l]}class ConfirmModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4s,create_fragment$4v,safe_not_equal,{message:0,onConfirm:1})}}const ConfirmModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConfirmModal},Symbol.toStringTag,{value:"Module"}));function create_default_slot_1$S(o){let e,t;return e=new FormTextField({props:{label:o[2],name:"value",focused:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.label=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$u(o){let e;return{c(){e=text(o[0])},m(t,n){insert(t,e,n)},p(t,n){n&1&&set_data(e,t[0])},d(t){t&&detach(e)}}}function create_footer_slot$t(o){let e,t,n,r;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[6]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$1B(o){let e,t;const n=[o[4]];let r={$$slots:{footer:[create_footer_slot$t],header:[create_header_slot$u],default:[create_default_slot_1$S]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&261&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4u(o){let e,t;return e=new FormProvider({props:{initialValues:{value:o[1]},$$slots:{default:[create_default_slot$1B]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&2&&(a.initialValues={value:n[1]}),r&277&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4r(o,e,t){const n=["header","value","label","onConfirm"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(h,p,g,b){function v(y){return y instanceof g?y:new g(function(C){C(y)})}return new(g||(g=Promise))(function(y,C){function E(T){try{k(b.next(T))}catch($){C($)}}function A(T){try{k(b.throw(T))}catch($){C($)}}function k(T){T.done?y(T.value):v(T.value).then(E,A)}k((b=b.apply(h,p||[])).next())})};let{header:s}=e,{value:l}=e,{label:u}=e,{onConfirm:d}=e;const f=h=>a(void 0,void 0,void 0,function*(){const{value:p}=h;closeCurrentModal(),d(p)}),m=h=>f(h.detail);return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(4,r=compute_rest_props(e,n)),"header"in h&&t(0,s=h.header),"value"in h&&t(1,l=h.value),"label"in h&&t(2,u=h.label),"onConfirm"in h&&t(5,d=h.onConfirm)},[s,l,u,f,r,d,m]}class InputTextModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4r,create_fragment$4u,safe_not_equal,{header:0,value:1,label:2,onConfirm:5})}}const InputTextModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:InputTextModal},Symbol.toStringTag,{value:"Module"}));function splitterDrag(o,e){let t=null;const n=s=>{t=s[e],document.addEventListener("mousemove",r,!0),document.addEventListener("mouseup",a,!0)},r=s=>{s.preventDefault();const l=s[e]-t;t=s[e],o.dispatchEvent(new CustomEvent("resizeSplitter",{detail:l}))},a=s=>{s.preventDefault(),t=null,document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",a,!0)};return o.addEventListener("mousedown",n),{destroy(){o.removeEventListener("mousedown",n),t!=null&&(document.removeEventListener("mousemove",r,!0),document.removeEventListener("mouseup",a,!0))}}}const HorizontalSplitter_svelte_svelte_type_style_lang="",get__2_slot_changes$6=o=>({}),get__2_slot_context$6=o=>({}),get__1_slot_changes$6=o=>({}),get__1_slot_context$6=o=>({});function create_if_block_6$e(o){let e,t,n;const r=o[11][1],a=create_slot(r,o,o[10],get__1_slot_context$6);return{c(){e=element("div"),a&&a.c(),attr(e,"class","child1 svelte-16cskqp"),attr(e,"style",t=o[1]?o[7]?"display:none":o[8]?"flex:1":`width:${o[0]}px; min-width:${o[0]}px; max-width:${o[0]}px}`:"flex:1")},m(s,l){insert(s,e,l),a&&a.m(e,null),n=!0},p(s,l){a&&a.p&&(!n||l&1024)&&update_slot_base(a,r,s,s[10],n?get_slot_changes(r,s[10],l,get__1_slot_changes$6):get_all_dirty_from_scope(s[10]),get__1_slot_context$6),(!n||l&387&&t!==(t=s[1]?s[7]?"display:none":s[8]?"flex:1":`width:${s[0]}px; min-width:${s[0]}px; max-width:${s[0]}px}`:"flex:1"))&&attr(e,"style",t)},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s)}}}function create_if_block_4$v(o){let e,t,n,r,a,s=!o[2]&&create_if_block_5$m(o);const l=o[11][2],u=create_slot(l,o,o[10],get__2_slot_context$6);return{c(){s&&s.c(),e=space(),t=element("div"),u&&u.c(),attr(t,"class",n=null_to_empty(o[7]?"child1":"child2")+" svelte-16cskqp"),attr(t,"style",r=o[8]?"display:none":o[7]?"flex:1":"child2")},m(d,f){s&&s.m(d,f),insert(d,e,f),insert(d,t,f),u&&u.m(t,null),a=!0},p(d,f){d[2]?s&&(s.d(1),s=null):s?s.p(d,f):(s=create_if_block_5$m(d),s.c(),s.m(e.parentNode,e)),u&&u.p&&(!a||f&1024)&&update_slot_base(u,l,d,d[10],a?get_slot_changes(l,d[10],f,get__2_slot_changes$6):get_all_dirty_from_scope(d[10]),get__2_slot_context$6),(!a||f&128&&n!==(n=null_to_empty(d[7]?"child1":"child2")+" svelte-16cskqp"))&&attr(t,"class",n),(!a||f&384&&r!==(r=d[8]?"display:none":d[7]?"flex:1":"child2"))&&attr(t,"style",r)},i(d){a||(transition_in(u,d),a=!0)},o(d){transition_out(u,d),a=!1},d(d){d&&(detach(e),detach(t)),s&&s.d(d),u&&u.d(d)}}}function create_if_block_5$m(o){let e,t,n,r;return{c(){e=element("div"),attr(e,"class","horizontal-split-handle"),attr(e,"style",t=o[7]||o[8]?"display:none":"")},m(a,s){insert(a,e,s),n||(r=[action_destroyer(splitterDrag.call(null,e,"clientX")),listen(e,"resizeSplitter",o[12])],n=!0)},p(a,s){s&384&&t!==(t=a[7]||a[8]?"display:none":"")&&attr(e,"style",t)},d(a){a&&detach(e),n=!1,run_all(r)}}}function create_if_block_2$R(o){let e,t,n,r;const a=[create_if_block_3$C,create_else_block_1$a],s=[];function l(u,d){return u[7]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block_1$a(o){let e,t,n,r,a,s;return t=new FontIcon({props:{icon:"icon chevron-double-left"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-16cskqp"),attr(e,"style",n=`left: ${o[0]-16}px`)},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=listen(e,"click",o[14]),a=!0)},p(l,u){(!r||u&1&&n!==(n=`left: ${l[0]-16}px`))&&attr(e,"style",n)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function create_if_block_3$C(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon chevron-double-right"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-16cskqp"),attr(e,"style","left: 0px")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[13]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block$1T(o){let e,t,n,r;const a=[create_if_block_1$16,create_else_block$R],s=[];function l(u,d){return u[8]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$R(o){let e,t,n,r,a,s;return t=new FontIcon({props:{icon:"icon chevron-double-right"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-16cskqp"),attr(e,"style",n=`left: ${o[0]}px`)},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=listen(e,"click",o[16]),a=!0)},p(l,u){(!r||u&1&&n!==(n=`left: ${l[0]}px`))&&attr(e,"style",n)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function create_if_block_1$16(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon chevron-double-left"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-16cskqp"),attr(e,"style","right: 0px")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[15]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_fragment$4t(o){let e,t,n,r,a,s,l=!o[2]&&create_if_block_6$e(o),u=o[1]&&create_if_block_4$v(o),d=o[3]&&!o[8]&&o[1]&&create_if_block_2$R(o),f=o[4]&&!o[7]&&o[1]&&create_if_block$1T(o);return{c(){e=element("div"),l&&l.c(),t=space(),u&&u.c(),n=space(),d&&d.c(),r=space(),f&&f.c(),attr(e,"class","container svelte-16cskqp"),add_render_callback(()=>o[17].call(e))},m(m,h){insert(m,e,h),l&&l.m(e,null),append(e,t),u&&u.m(e,null),append(e,n),d&&d.m(e,null),append(e,r),f&&f.m(e,null),a=add_iframe_resize_listener(e,o[17].bind(e)),s=!0},p(m,[h]){m[2]?l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros()):l?(l.p(m,h),h&4&&transition_in(l,1)):(l=create_if_block_6$e(m),l.c(),transition_in(l,1),l.m(e,t)),m[1]?u?(u.p(m,h),h&2&&transition_in(u,1)):(u=create_if_block_4$v(m),u.c(),transition_in(u,1),u.m(e,n)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),m[3]&&!m[8]&&m[1]?d?(d.p(m,h),h&266&&transition_in(d,1)):(d=create_if_block_2$R(m),d.c(),transition_in(d,1),d.m(e,r)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),m[4]&&!m[7]&&m[1]?f?(f.p(m,h),h&146&&transition_in(f,1)):(f=create_if_block$1T(m),f.c(),transition_in(f,1),f.m(e,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(m){s||(transition_in(l),transition_in(u),transition_in(d),transition_in(f),s=!0)},o(m){transition_out(l),transition_out(u),transition_out(d),transition_out(f),s=!1},d(m){m&&detach(e),l&&l.d(),u&&u.d(),d&&d.d(),f&&f.d(),a()}}}function computeSplitterSize(o,e,t){return t!=null?e*t:_.isString(o)&&o.startsWith("~")&&o.endsWith("px")?e-parseInt(o.slice(1,-2)):_.isString(o)&&o.endsWith("px")?parseInt(o.slice(0,-2)):_.isString(o)&&o.endsWith("%")?e*parseFloat(o.slice(0,-1))/100:e/2}function instance$4q(o,e,t){let{$$slots:n={},$$scope:r}=e,{isSplitter:a=!0}=e,{initialValue:s=void 0}=e,{hideFirst:l=!1}=e,{allowCollapseChild1:u=!1}=e,{allowCollapseChild2:d=!1}=e,f=!1,m=!1,{size:h=0}=e,p,g=null;const b=k=>{t(0,h+=k.detail),p>0&&t(6,g=h/p)},v=()=>{t(7,f=!1)},y=()=>{t(7,f=!0)},C=()=>{t(8,m=!1)},E=()=>{t(8,m=!0)};function A(){p=this.clientWidth,t(5,p)}return o.$$set=k=>{"isSplitter"in k&&t(1,a=k.isSplitter),"initialValue"in k&&t(9,s=k.initialValue),"hideFirst"in k&&t(2,l=k.hideFirst),"allowCollapseChild1"in k&&t(3,u=k.allowCollapseChild1),"allowCollapseChild2"in k&&t(4,d=k.allowCollapseChild2),"size"in k&&t(0,h=k.size),"$$scope"in k&&t(10,r=k.$$scope)},o.$$.update=()=>{o.$$.dirty&608&&t(0,h=computeSplitterSize(s,p,g))},[h,a,l,u,d,p,g,f,m,s,r,n,b,v,y,C,E,A]}class HorizontalSplitter extends SvelteComponent{constructor(e){super(),init(this,e,instance$4q,create_fragment$4t,safe_not_equal,{isSplitter:1,initialValue:9,hideFirst:2,allowCollapseChild1:3,allowCollapseChild2:4,size:0})}}const VerticalSplitter_svelte_svelte_type_style_lang="",get__2_slot_changes$5=o=>({}),get__2_slot_context$5=o=>({}),get__1_slot_changes$5=o=>({}),get__1_slot_context$5=o=>({});function create_if_block_4$u(o){let e,t,n,r,a,s,l,u,d;const f=o[10][2],m=create_slot(f,o,o[9],get__2_slot_context$5);return{c(){e=element("div"),n=space(),r=element("div"),m&&m.c(),attr(e,"class","vertical-split-handle"),attr(e,"style",t=o[6]||o[7]?"display:none":""),attr(r,"class",a=null_to_empty(o[6]?"child1":"child2")+" svelte-kqh1iu"),attr(r,"style",s=o[7]?"display:none":o[6]?"flex:1":"child2")},m(h,p){insert(h,e,p),insert(h,n,p),insert(h,r,p),m&&m.m(r,null),l=!0,u||(d=[action_destroyer(splitterDrag.call(null,e,"clientY")),listen(e,"resizeSplitter",o[11])],u=!0)},p(h,p){(!l||p&192&&t!==(t=h[6]||h[7]?"display:none":""))&&attr(e,"style",t),m&&m.p&&(!l||p&512)&&update_slot_base(m,f,h,h[9],l?get_slot_changes(f,h[9],p,get__2_slot_changes$5):get_all_dirty_from_scope(h[9]),get__2_slot_context$5),(!l||p&64&&a!==(a=null_to_empty(h[6]?"child1":"child2")+" svelte-kqh1iu"))&&attr(r,"class",a),(!l||p&192&&s!==(s=h[7]?"display:none":h[6]?"flex:1":"child2"))&&attr(r,"style",s)},i(h){l||(transition_in(m,h),l=!0)},o(h){transition_out(m,h),l=!1},d(h){h&&(detach(e),detach(n),detach(r)),m&&m.d(h),u=!1,run_all(d)}}}function create_if_block_2$Q(o){let e,t,n,r;const a=[create_if_block_3$B,create_else_block_1$9],s=[];function l(u,d){return u[6]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block_1$9(o){let e,t,n,r,a,s;return t=new FontIcon({props:{icon:"icon chevron-double-up"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-kqh1iu"),attr(e,"style",n=`top: ${o[5]-16}px`)},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=listen(e,"click",o[13]),a=!0)},p(l,u){(!r||u&32&&n!==(n=`top: ${l[5]-16}px`))&&attr(e,"style",n)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function create_if_block_3$B(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon chevron-double-down"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-kqh1iu"),attr(e,"style","top: 0px")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[12]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block$1S(o){let e,t,n,r;const a=[create_if_block_1$15,create_else_block$Q],s=[];function l(u,d){return u[7]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$Q(o){let e,t,n,r,a,s;return t=new FontIcon({props:{icon:"icon chevron-double-down"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-kqh1iu"),attr(e,"style",n=`top: ${o[5]}px`)},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=listen(e,"click",o[15]),a=!0)},p(l,u){(!r||u&32&&n!==(n=`top: ${l[5]}px`))&&attr(e,"style",n)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function create_if_block_1$15(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon chevron-double-up"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapse svelte-kqh1iu"),attr(e,"style","bottom: 0px")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[14]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_fragment$4s(o){let e,t,n,r,a,s,l,u;const d=o[10][1],f=create_slot(d,o,o[9],get__1_slot_context$5);let m=o[0]&&create_if_block_4$u(o),h=o[1]&&!o[7]&&o[0]&&create_if_block_2$Q(o),p=o[2]&&!o[6]&&o[0]&&create_if_block$1S(o);return{c(){e=element("div"),t=element("div"),f&&f.c(),r=space(),m&&m.c(),a=space(),h&&h.c(),s=space(),p&&p.c(),attr(t,"class","child1 svelte-kqh1iu"),attr(t,"style",n=o[0]?o[6]?"display:none":o[7]?"flex:1":`height:${o[5]}px; min-height:${o[5]}px; max-height:${o[5]}px}`:"flex:1"),attr(e,"class","container svelte-kqh1iu"),add_render_callback(()=>o[16].call(e))},m(g,b){insert(g,e,b),append(e,t),f&&f.m(t,null),append(e,r),m&&m.m(e,null),append(e,a),h&&h.m(e,null),append(e,s),p&&p.m(e,null),l=add_iframe_resize_listener(e,o[16].bind(e)),u=!0},p(g,[b]){f&&f.p&&(!u||b&512)&&update_slot_base(f,d,g,g[9],u?get_slot_changes(d,g[9],b,get__1_slot_changes$5):get_all_dirty_from_scope(g[9]),get__1_slot_context$5),(!u||b&225&&n!==(n=g[0]?g[6]?"display:none":g[7]?"flex:1":`height:${g[5]}px; min-height:${g[5]}px; max-height:${g[5]}px}`:"flex:1"))&&attr(t,"style",n),g[0]?m?(m.p(g,b),b&1&&transition_in(m,1)):(m=create_if_block_4$u(g),m.c(),transition_in(m,1),m.m(e,a)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),g[1]&&!g[7]&&g[0]?h?(h.p(g,b),b&131&&transition_in(h,1)):(h=create_if_block_2$Q(g),h.c(),transition_in(h,1),h.m(e,s)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),g[2]&&!g[6]&&g[0]?p?(p.p(g,b),b&69&&transition_in(p,1)):(p=create_if_block$1S(g),p.c(),transition_in(p,1),p.m(e,null)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(g){u||(transition_in(f,g),transition_in(m),transition_in(h),transition_in(p),u=!0)},o(g){transition_out(f,g),transition_out(m),transition_out(h),transition_out(p),u=!1},d(g){g&&detach(e),f&&f.d(g),m&&m.d(),h&&h.d(),p&&p.d(),l()}}}function instance$4p(o,e,t){let{$$slots:n={},$$scope:r}=e,{isSplitter:a=!0}=e,{initialValue:s=void 0}=e,{allowCollapseChild1:l=!1}=e,{allowCollapseChild2:u=!1}=e,d=0,f,m=!1,h=!1,p=null;const g=A=>{t(5,d+=A.detail),f>0&&t(4,p=d/f)},b=()=>{t(6,m=!1)},v=()=>{t(6,m=!0)},y=()=>{t(7,h=!1)},C=()=>{t(7,h=!0)};function E(){f=this.clientHeight,t(3,f)}return o.$$set=A=>{"isSplitter"in A&&t(0,a=A.isSplitter),"initialValue"in A&&t(8,s=A.initialValue),"allowCollapseChild1"in A&&t(1,l=A.allowCollapseChild1),"allowCollapseChild2"in A&&t(2,u=A.allowCollapseChild2),"$$scope"in A&&t(9,r=A.$$scope)},o.$$.update=()=>{o.$$.dirty&280&&t(5,d=computeSplitterSize(s,f,p))},[a,l,u,f,p,d,m,h,s,r,n,g,b,v,y,C,E]}class VerticalSplitter extends SvelteComponent{constructor(e){super(),init(this,e,instance$4p,create_fragment$4s,safe_not_equal,{isSplitter:0,initialValue:8,allowCollapseChild1:1,allowCollapseChild2:2})}}function create_fragment$4r(o){let e,t,n,r=[o[2]],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("textarea"),set_attributes(e,a)},m(s,l){insert(s,e,l),e.autofocus&&e.focus(),set_input_value(e,o[0]),o[7](e),t||(n=[listen(e,"input",o[6]),listen(e,"change",o[4]),listen(e,"input",o[5])],t=!0)},p(s,[l]){set_attributes(e,a=get_spread_update(r,[l&4&&s[2]])),l&1&&set_input_value(e,s[0])},i:noop$1,o:noop$1,d(s){s&&detach(e),o[7](null),t=!1,run_all(n)}}}function instance$4o(o,e,t){const n=["value","focused"];let r=compute_rest_props(e,n),{value:a}=e,{focused:s}=e,l;s&&onMount(()=>l.focus());function u(h){bubble.call(this,o,h)}function d(h){bubble.call(this,o,h)}function f(){a=this.value,t(0,a)}function m(h){binding_callbacks[h?"unshift":"push"](()=>{l=h,t(1,l)})}return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(2,r=compute_rest_props(e,n)),"value"in h&&t(0,a=h.value),"focused"in h&&t(3,s=h.focused)},[a,l,r,s,u,d,f,m]}class TextAreaField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4o,create_fragment$4r,safe_not_equal,{value:0,focused:3})}}function create_default_slot$1A(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F,D,x,B,K,U,G,W,q,H;function z(V){o[5](V)}let Y={rows:10,focused:!0};return o[0]!==void 0&&(Y.value=o[0]),t=new TextAreaField({props:Y}),binding_callbacks.push(()=>bind(t,"value",z)),W=init_binding_group(o[7][0]),{c(){e=element("div"),create_component(t.$$.fragment),r=space(),a=element("div"),s=element("div"),l=element("input"),u=space(),d=element("label"),d.textContent="Is one of line",f=text("'"),m=space(),h=element("div"),p=element("input"),g=space(),b=element("label"),b.textContent="Is not one of line",v=text("'"),y=space(),C=element("div"),E=element("input"),A=space(),k=element("label"),k.textContent="Contains",T=text("'"),$=space(),S=element("div"),I=element("input"),R=space(),N=element("label"),N.textContent="Begins",M=text("'"),F=space(),D=element("div"),x=element("input"),B=space(),K=element("label"),K.textContent="Ends",U=text("'"),attr(l,"type","radio"),l.__value="is",set_input_value(l,l.__value),attr(l,"id","__is"),attr(d,"for","__is"),attr(p,"type","radio"),p.__value="is_not",set_input_value(p,p.__value),attr(p,"id","__is_not"),attr(b,"for","__is_not"),attr(E,"type","radio"),E.__value="contains",set_input_value(E,E.__value),attr(E,"id","__contains"),attr(k,"for","__contains"),attr(I,"type","radio"),I.__value="begins",set_input_value(I,I.__value),attr(I,"id","__begins"),attr(N,"for","__begins"),attr(x,"type","radio"),x.__value="ends",set_input_value(x,x.__value),attr(x,"id","__ends"),attr(K,"for","__ends"),attr(e,"class","flex"),W.p(l,p,E,I,x)},m(V,J){insert(V,e,J),mount_component(t,e,null),append(e,r),append(e,a),append(a,s),append(s,l),l.checked=l.__value===o[1],append(s,u),append(s,d),append(s,f),append(a,m),append(a,h),append(h,p),p.checked=p.__value===o[1],append(h,g),append(h,b),append(h,v),append(a,y),append(a,C),append(C,E),E.checked=E.__value===o[1],append(C,A),append(C,k),append(C,T),append(a,$),append(a,S),append(S,I),I.checked=I.__value===o[1],append(S,R),append(S,N),append(S,M),append(a,F),append(a,D),append(D,x),x.checked=x.__value===o[1],append(D,B),append(D,K),append(D,U),G=!0,q||(H=[listen(l,"change",o[6]),listen(p,"change",o[8]),listen(E,"change",o[9]),listen(I,"change",o[10]),listen(x,"change",o[11])],q=!0)},p(V,J){const Q={};!n&&J&1&&(n=!0,Q.value=V[0],add_flush_callback(()=>n=!1)),t.$set(Q),J&2&&(l.checked=l.__value===V[1]),J&2&&(p.checked=p.__value===V[1]),J&2&&(E.checked=E.__value===V[1]),J&2&&(I.checked=I.__value===V[1]),J&2&&(x.checked=x.__value===V[1])},i(V){G||(transition_in(t.$$.fragment,V),G=!0)},o(V){transition_out(t.$$.fragment,V),G=!1},d(V){V&&detach(e),destroy_component(t),W.r(),q=!1,run_all(H)}}}function create_header_slot$t(o){let e;return{c(){e=element("div"),e.textContent="Filter multiple values",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$s(o){let e,t,n,r,a;return t=new FormStyledButton({props:{value:"OK"}}),t.$on("click",o[2]),r=new FormStyledButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"slot","footer")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p:noop$1,i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_fragment$4q(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$s],header:[create_header_slot$t],default:[create_default_slot$1A]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&4099&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$4n(o,e,t){const n=["onFilter"];let r=compute_rest_props(e,n),{onFilter:a}=e,s,l="is";const u=()=>{a(l,s),closeCurrentModal()},d=[[]];function f(v){s=v,t(0,s)}function m(){l=this.__value,t(1,l)}function h(){l=this.__value,t(1,l)}function p(){l=this.__value,t(1,l)}function g(){l=this.__value,t(1,l)}function b(){l=this.__value,t(1,l)}return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(3,r=compute_rest_props(e,n)),"onFilter"in v&&t(4,a=v.onFilter)},[s,l,u,r,a,f,m,d,h,p,g,b]}class FilterMultipleValuesModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4n,create_fragment$4q,safe_not_equal,{onFilter:4})}}const FilterMultipleValuesModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:FilterMultipleValuesModal},Symbol.toStringTag,{value:"Module"}));function create_fragment$4p(o){let e,t;const n=[{type:"button"},o[2]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormStyledButton({props:r}),e.$on("click",o[1]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&4?get_spread_update(n,[n[0],get_spread_object(a[2])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$4m(o,e,t){let n;const r=createEventDispatcher(),{values:a}=getFormContext();component_subscribe(o,a,l=>t(3,n=l));function s(){r("click",n)}return o.$$set=l=>{t(2,e=assign(assign({},e),exclude_internal_props(l)))},e=exclude_internal_props(e),[a,s,e]}class FormButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$4m,create_fragment$4p,safe_not_equal,{})}}function isOutOfViewport(o,e){const t=o.getBoundingClientRect(),n=e.getBoundingClientRect(),r={};return r.top=t.top<0,r.left=t.left<0,r.bottom=t.bottom+n.height>(window.innerHeight||document.documentElement.clientHeight),r.right=t.right>(window.innerWidth||document.documentElement.clientWidth),r.any=r.top||r.left||r.bottom||r.right,r}const Item_svelte_svelte_type_style_lang="";function create_fragment$4o(o){let e,t=o[0](o[1],o[2])+"",n;return{c(){e=element("div"),attr(e,"class",n="item "+o[3]+" svelte-3e0qet")},m(r,a){insert(r,e,a),e.innerHTML=t},p(r,[a]){a&7&&t!==(t=r[0](r[1],r[2])+"")&&(e.innerHTML=t),a&8&&n!==(n="item "+r[3]+" svelte-3e0qet")&&attr(e,"class",n)},i:noop$1,o:noop$1,d(r){r&&detach(e)}}}function instance$4l(o,e,t){let{isActive:n=!1}=e,{isFirst:r=!1}=e,{isHover:a=!1}=e,{isSelectable:s=!1}=e,{getOptionLabel:l=void 0}=e,{item:u=void 0}=e,{filterText:d=""}=e,f="";return o.$$set=m=>{"isActive"in m&&t(4,n=m.isActive),"isFirst"in m&&t(5,r=m.isFirst),"isHover"in m&&t(6,a=m.isHover),"isSelectable"in m&&t(7,s=m.isSelectable),"getOptionLabel"in m&&t(0,l=m.getOptionLabel),"item"in m&&t(1,u=m.item),"filterText"in m&&t(2,d=m.filterText)},o.$$.update=()=>{if(o.$$.dirty&242){const m=[];n&&m.push("active"),r&&m.push("first"),a&&m.push("hover"),u.isGroupHeader&&m.push("groupHeader"),u.isGroupItem&&m.push("groupItem"),s||m.push("notSelectable"),t(3,f=m.join(" "))}},[l,u,d,f,n,r,a,s]}class Item extends SvelteComponent{constructor(e){super(),init(this,e,instance$4l,create_fragment$4o,safe_not_equal,{isActive:4,isFirst:5,isHover:6,isSelectable:7,getOptionLabel:0,item:1,filterText:2})}}const List_svelte_svelte_type_style_lang="";function get_each_context$I(o,e,t){const n=o.slice();return n[41]=e[t],n[42]=t,n}function create_else_block$P(o){let e,t,n=ensure_array_like(o[1]),r=[];for(let l=0;l<n.length;l+=1)r[l]=create_each_block$I(get_each_context$I(o,n,l));const a=l=>transition_out(r[l],1,1,()=>{r[l]=null});let s=null;return n.length||(s=create_else_block_2$2(o)),{c(){for(let l=0;l<r.length;l+=1)r[l].c();e=empty(),s&&s.c()},m(l,u){for(let d=0;d<r.length;d+=1)r[d]&&r[d].m(l,u);insert(l,e,u),s&&s.m(l,u),t=!0},p(l,u){if(u[0]&114390){n=ensure_array_like(l[1]);let d;for(d=0;d<n.length;d+=1){const f=get_each_context$I(l,n,d);r[d]?(r[d].p(f,u),transition_in(r[d],1)):(r[d]=create_each_block$I(f),r[d].c(),transition_in(r[d],1),r[d].m(e.parentNode,e))}for(group_outros(),d=n.length;d<r.length;d+=1)a(d);check_outros(),!n.length&&s?s.p(l,u):n.length?s&&(s.d(1),s=null):(s=create_else_block_2$2(l),s.c(),s.m(e.parentNode,e))}},i(l){if(!t){for(let u=0;u<n.length;u+=1)transition_in(r[u]);t=!0}},o(l){r=r.filter(Boolean);for(let u=0;u<r.length;u+=1)transition_out(r[u]);t=!1},d(l){l&&detach(e),destroy_each(r,l),s&&s.d(l)}}}function create_if_block$1R(o){let e,t,n;var r=o[3];function a(s){return{props:{items:s[1],itemHeight:s[8],$$slots:{default:[create_default_slot$1z,({item:l,i:u})=>({41:l,42:u}),({item:l,i:u})=>[0,(l?1024:0)|(u?2048:0)]]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l[0]&2&&(u.items=s[1]),l[0]&256&&(u.itemHeight=s[8]),l[0]&9814|l[1]&11264&&(u.$$scope={dirty:l,ctx:s}),l[0]&8&&r!==(r=s[3])){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_else_block_2$2(o){let e,t=!o[11]&&create_if_block_2$P(o);return{c(){t&&t.c(),e=empty()},m(n,r){t&&t.m(n,r),insert(n,e,r)},p(n,r){n[11]?t&&(t.d(1),t=null):t?t.p(n,r):(t=create_if_block_2$P(n),t.c(),t.m(e.parentNode,e))},d(n){n&&detach(e),t&&t.d(n)}}}function create_if_block_2$P(o){let e,t;return{c(){e=element("div"),t=text(o[12]),attr(e,"class","empty svelte-1uyqfml")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r[0]&4096&&set_data(t,n[12])},d(n){n&&detach(e)}}}function create_else_block_1$8(o){let e,t,n,r,a,s;var l=o[4];function u(h){return{props:{item:h[41],filterText:h[13],getOptionLabel:h[6],isFirst:isItemFirst(h[42]),isActive:isItemActive(h[41],h[9],h[10]),isHover:isItemHover(h[2],h[41],h[42],h[1]),isSelectable:isItemSelectable(h[41])}}}l&&(t=construct_svelte_component(l,u(o)));function d(){return o[29](o[42])}function f(){return o[30](o[42])}function m(...h){return o[31](o[41],o[42],...h)}return{c(){e=element("div"),t&&create_component(t.$$.fragment),n=space(),attr(e,"class","listItem"),attr(e,"tabindex","-1")},m(h,p){insert(h,e,p),t&&mount_component(t,e,null),append(e,n),r=!0,a||(s=[listen(e,"mouseover",d),listen(e,"focus",f),listen(e,"click",m)],a=!0)},p(h,p){o=h;const g={};if(p[0]&2&&(g.item=o[41]),p[0]&8192&&(g.filterText=o[13]),p[0]&64&&(g.getOptionLabel=o[6]),p[0]&1538&&(g.isActive=isItemActive(o[41],o[9],o[10])),p[0]&6&&(g.isHover=isItemHover(o[2],o[41],o[42],o[1])),p[0]&2&&(g.isSelectable=isItemSelectable(o[41])),p[0]&16&&l!==(l=o[4])){if(t){group_outros();const b=t;transition_out(b.$$.fragment,1,0,()=>{destroy_component(b,1)}),check_outros()}l?(t=construct_svelte_component(l,u(o)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,n)):t=null}else l&&t.$set(g)},i(h){r||(t&&transition_in(t.$$.fragment,h),r=!0)},o(h){t&&transition_out(t.$$.fragment,h),r=!1},d(h){h&&detach(e),t&&destroy_component(t),a=!1,run_all(s)}}}function create_if_block_1$14(o){let e,t=o[7](o[41])+"",n;return{c(){e=element("div"),n=text(t),attr(e,"class","listGroupTitle svelte-1uyqfml")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a[0]&130&&t!==(t=r[7](r[41])+"")&&set_data(n,t)},i:noop$1,o:noop$1,d(r){r&&detach(e)}}}function create_each_block$I(o){let e,t,n,r;const a=[create_if_block_1$14,create_else_block_1$8],s=[];function l(u,d){return u[41].isGroupHeader&&!u[41].isSelectable?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_default_slot$1z(o){let e,t,n,r,a;var s=o[4];function l(m){return{props:{item:m[41],filterText:m[13],getOptionLabel:m[6],isFirst:isItemFirst(m[42]),isActive:isItemActive(m[41],m[9],m[10]),isHover:isItemHover(m[2],m[41],m[42],m[1]),isSelectable:isItemSelectable(m[41])}}}s&&(t=construct_svelte_component(s,l(o)));function u(){return o[26](o[42])}function d(){return o[27](o[42])}function f(...m){return o[28](o[41],o[42],...m)}return{c(){e=element("div"),t&&create_component(t.$$.fragment),attr(e,"class","listItem")},m(m,h){insert(m,e,h),t&&mount_component(t,e,null),n=!0,r||(a=[listen(e,"mouseover",u),listen(e,"focus",d),listen(e,"click",f)],r=!0)},p(m,h){o=m;const p={};if(h[1]&1024&&(p.item=o[41]),h[0]&8192&&(p.filterText=o[13]),h[0]&64&&(p.getOptionLabel=o[6]),h[1]&2048&&(p.isFirst=isItemFirst(o[42])),h[0]&1536|h[1]&1024&&(p.isActive=isItemActive(o[41],o[9],o[10])),h[0]&6|h[1]&3072&&(p.isHover=isItemHover(o[2],o[41],o[42],o[1])),h[1]&1024&&(p.isSelectable=isItemSelectable(o[41])),h[0]&16&&s!==(s=o[4])){if(t){group_outros();const g=t;transition_out(g.$$.fragment,1,0,()=>{destroy_component(g,1)}),check_outros()}s?(t=construct_svelte_component(s,l(o)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,null)):t=null}else s&&t.$set(p)},i(m){n||(t&&transition_in(t.$$.fragment,m),n=!0)},o(m){t&&transition_out(t.$$.fragment,m),n=!1},d(m){m&&detach(e),t&&destroy_component(t),r=!1,run_all(a)}}}function create_fragment$4n(o){let e,t,n,r,a,s;const l=[create_if_block$1R,create_else_block$P],u=[];function d(f,m){return f[5]?0:1}return t=d(o),n=u[t]=l[t](o),{c(){e=element("div"),n.c(),attr(e,"class","listContainer svelte-1uyqfml"),attr(e,"style",o[14]),toggle_class(e,"virtualList",o[5])},m(f,m){insert(f,e,m),u[t].m(e,null),o[32](e),r=!0,a||(s=[listen(window,"keydown",o[17]),listen(window,"resize",o[18])],a=!0)},p(f,m){let h=t;t=d(f),t===h?u[t].p(f,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),n=u[t],n?n.p(f,m):(n=u[t]=l[t](f),n.c()),transition_in(n,1),n.m(e,null)),(!r||m[0]&16384)&&attr(e,"style",f[14]),(!r||m[0]&32)&&toggle_class(e,"virtualList",f[5])},i(f){r||(transition_in(n),r=!0)},o(f){transition_out(n),r=!1},d(f){f&&detach(e),u[t].d(),o[32](null),a=!1,run_all(s)}}}function isItemActive(o,e,t){return e&&e[t]===o[t]}function isItemFirst(o){return o===0}function isItemHover(o,e,t,n){return isItemSelectable(e)&&(o===t||n.length===1)}function isItemSelectable(o){return o.isGroupHeader&&o.isSelectable||o.selectable||!o.hasOwnProperty("selectable")}function instance$4k(o,e,t){const n=createEventDispatcher();let{container:r=void 0}=e,{VirtualList:a=null}=e,{Item:s=Item}=e,{isVirtualList:l=!1}=e,{items:u=[]}=e,{labelIdentifier:d="label"}=e,{getOptionLabel:f=(X,ie)=>{if(X)return X.isCreator?`Create "${ie}"`:X[d]}}=e,{getGroupHeaderLabel:m=null}=e,{itemHeight:h=40}=e,{hoverItemIndex:p=0}=e,{value:g=void 0}=e,{optionIdentifier:b="value"}=e,{hideEmptyState:v=!1}=e,{noOptionsMessage:y="No options"}=e,{isMulti:C=!1}=e,{activeItemIndex:E=0}=e,{filterText:A=""}=e,{parent:k=null}=e,{listPlacement:T=null}=e,{listAutoWidth:$=null}=e,{listOffset:S=5}=e,I=0,R=!1,N;onMount(()=>{if(u.length>0&&!C&&g){const X=u.findIndex(ie=>ie[b]===g[b]);X&&t(2,p=X)}U("active"),r.addEventListener("scroll",()=>{clearTimeout(I),I=setTimeout(()=>{R=!1},100)},!1)}),beforeUpdate(()=>{u||t(1,u=[]),u!==N&&u.length>0&&t(2,p=0),N=u});function M(X){X.isCreator||n("itemSelected",X)}function F(X){R||t(2,p=X)}function D(X){const{item:ie,i:ce,event:de}=X;if(de.stopPropagation(),g&&!C&&g[b]===ie[b])return x();ie.isCreator?n("itemCreated",A):isItemSelectable(ie)&&(t(19,E=ce),t(2,p=ce),M(ie))}function x(){n("closeList")}async function B(X){if(l)return;let ie=!0;for(;ie;)X>0&&p===u.length-1?t(2,p=0):X<0&&p===0?t(2,p=u.length-1):t(2,p=p+X),ie=!isItemSelectable(u[p]);await tick(),U("hover")}function K(X){switch(X.key){case"Escape":X.preventDefault(),x();break;case"ArrowDown":X.preventDefault(),u.length&&B(1);break;case"ArrowUp":X.preventDefault(),u.length&&B(-1);break;case"Enter":if(X.preventDefault(),u.length===0)break;const ie=u[p];if(g&&!C&&g[b]===ie[b]){x();break}ie.isCreator?n("itemCreated",A):(t(19,E=p),M(u[p]));break;case"Tab":if(X.preventDefault(),u.length===0||g&&g[b]===u[p][b])return x();t(19,E=p),M(u[p]);break}}function U(X){if(l||!r)return;let ie;const ce=r.querySelector(`.listItem .${X}`);ce&&(ie=r.getBoundingClientRect().bottom-ce.getBoundingClientRect().bottom),t(0,r.scrollTop-=ie,r)}let G;function W(){const{height:X,width:ie}=k.getBoundingClientRect();t(14,G=""),t(14,G+=`min-width:${ie}px;width:${$?"auto":"100%"};`),T==="top"||T==="auto"&&isOutOfViewport(k,r).bottom?t(14,G+=`bottom:${X+S}px;`):t(14,G+=`top:${X+S}px;`)}const q=X=>F(X),H=X=>F(X),z=(X,ie,ce)=>D({item:X,i:ie,event:ce}),Y=X=>F(X),V=X=>F(X),J=(X,ie,ce)=>D({item:X,i:ie,event:ce});function Q(X){binding_callbacks[X?"unshift":"push"](()=>{r=X,t(0,r)})}return o.$$set=X=>{"container"in X&&t(0,r=X.container),"VirtualList"in X&&t(3,a=X.VirtualList),"Item"in X&&t(4,s=X.Item),"isVirtualList"in X&&t(5,l=X.isVirtualList),"items"in X&&t(1,u=X.items),"labelIdentifier"in X&&t(20,d=X.labelIdentifier),"getOptionLabel"in X&&t(6,f=X.getOptionLabel),"getGroupHeaderLabel"in X&&t(7,m=X.getGroupHeaderLabel),"itemHeight"in X&&t(8,h=X.itemHeight),"hoverItemIndex"in X&&t(2,p=X.hoverItemIndex),"value"in X&&t(9,g=X.value),"optionIdentifier"in X&&t(10,b=X.optionIdentifier),"hideEmptyState"in X&&t(11,v=X.hideEmptyState),"noOptionsMessage"in X&&t(12,y=X.noOptionsMessage),"isMulti"in X&&t(21,C=X.isMulti),"activeItemIndex"in X&&t(19,E=X.activeItemIndex),"filterText"in X&&t(13,A=X.filterText),"parent"in X&&t(22,k=X.parent),"listPlacement"in X&&t(23,T=X.listPlacement),"listAutoWidth"in X&&t(24,$=X.listAutoWidth),"listOffset"in X&&t(25,S=X.listOffset)},o.$$.update=()=>{o.$$.dirty[0]&4194305&&k&&r&&W()},[r,u,p,a,s,l,f,m,h,g,b,v,y,A,G,F,D,K,W,E,d,C,k,T,$,S,q,H,z,Y,V,J,Q]}let List$1=class extends SvelteComponent{constructor(e){super(),init(this,e,instance$4k,create_fragment$4n,safe_not_equal,{container:0,VirtualList:3,Item:4,isVirtualList:5,items:1,labelIdentifier:20,getOptionLabel:6,getGroupHeaderLabel:7,itemHeight:8,hoverItemIndex:2,value:9,optionIdentifier:10,hideEmptyState:11,noOptionsMessage:12,isMulti:21,activeItemIndex:19,filterText:13,parent:22,listPlacement:23,listAutoWidth:24,listOffset:25},null,[-1,-1])}};const Selection_svelte_svelte_type_style_lang="";function create_fragment$4m(o){let e,t=o[0](o[1])+"";return{c(){e=element("div"),attr(e,"class","selection svelte-pu1q1n")},m(n,r){insert(n,e,r),e.innerHTML=t},p(n,[r]){r&3&&t!==(t=n[0](n[1])+"")&&(e.innerHTML=t)},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function instance$4j(o,e,t){let{getSelectionLabel:n=void 0}=e,{item:r=void 0}=e;return o.$$set=a=>{"getSelectionLabel"in a&&t(0,n=a.getSelectionLabel),"item"in a&&t(1,r=a.item)},[n,r]}class Selection extends SvelteComponent{constructor(e){super(),init(this,e,instance$4j,create_fragment$4m,safe_not_equal,{getSelectionLabel:0,item:1})}}const MultiSelection_svelte_svelte_type_style_lang="";function get_each_context$H(o,e,t){const n=o.slice();return n[9]=e[t],n[11]=t,n}function create_if_block$1Q(o){let e,t,n;function r(...a){return o[6](o[11],...a)}return{c(){e=element("div"),e.innerHTML='<svg width="100%" height="100%" viewBox="-2 -2 50 50" focusable="false" aria-hidden="true" role="presentation" class="svelte-liu9pa"><path d="M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124 l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z"></path></svg>',attr(e,"class","multiSelectItem_clear svelte-liu9pa")},m(a,s){insert(a,e,s),t||(n=listen(e,"click",r),t=!0)},p(a,s){o=a},d(a){a&&detach(e),t=!1,n()}}}function create_each_block$H(o){let e,t,n=o[4](o[9])+"",r,a,s,l,u,d=!o[2]&&!o[3]&&create_if_block$1Q(o);function f(...m){return o[7](o[11],...m)}return{c(){e=element("div"),t=element("div"),r=space(),d&&d.c(),a=space(),attr(t,"class","multiSelectItem_label svelte-liu9pa"),attr(e,"class",s="multiSelectItem "+(o[1]===o[11]?"active":"")+" "+(o[2]?"disabled":"")+" svelte-liu9pa")},m(m,h){insert(m,e,h),append(e,t),t.innerHTML=n,append(e,r),d&&d.m(e,null),append(e,a),l||(u=listen(e,"click",f),l=!0)},p(m,h){o=m,h&17&&n!==(n=o[4](o[9])+"")&&(t.innerHTML=n),!o[2]&&!o[3]?d?d.p(o,h):(d=create_if_block$1Q(o),d.c(),d.m(e,a)):d&&(d.d(1),d=null),h&6&&s!==(s="multiSelectItem "+(o[1]===o[11]?"active":"")+" "+(o[2]?"disabled":"")+" svelte-liu9pa")&&attr(e,"class",s)},d(m){m&&detach(e),d&&d.d(),l=!1,u()}}}function create_fragment$4l(o){let e,t=ensure_array_like(o[0]),n=[];for(let r=0;r<t.length;r+=1)n[r]=create_each_block$H(get_each_context$H(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=empty()},m(r,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,a);insert(r,e,a)},p(r,[a]){if(a&63){t=ensure_array_like(r[0]);let s;for(s=0;s<t.length;s+=1){const l=get_each_context$H(r,t,s);n[s]?n[s].p(l,a):(n[s]=create_each_block$H(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},i:noop$1,o:noop$1,d(r){r&&detach(e),destroy_each(n,r)}}}function instance$4i(o,e,t){const n=createEventDispatcher();let{value:r=[]}=e,{activeValue:a=void 0}=e,{isDisabled:s=!1}=e,{multiFullItemClearable:l=!1}=e,{getSelectionLabel:u=void 0}=e;function d(h,p){p.stopPropagation(),n("multiItemClear",{i:h})}const f=(h,p)=>d(h,p),m=(h,p)=>l?d(h,p):{};return o.$$set=h=>{"value"in h&&t(0,r=h.value),"activeValue"in h&&t(1,a=h.activeValue),"isDisabled"in h&&t(2,s=h.isDisabled),"multiFullItemClearable"in h&&t(3,l=h.multiFullItemClearable),"getSelectionLabel"in h&&t(4,u=h.getSelectionLabel)},[r,a,s,l,u,d,f,m]}class MultiSelection extends SvelteComponent{constructor(e){super(),init(this,e,instance$4i,create_fragment$4l,safe_not_equal,{value:0,activeValue:1,isDisabled:2,multiFullItemClearable:3,getSelectionLabel:4})}}const VirtualList_svelte_svelte_type_style_lang="";function get_each_context$G(o,e,t){const n=o.slice();return n[23]=e[t],n}const get_default_slot_changes$1=o=>({item:o&32,i:o&32,hoverItemIndex:o&2}),get_default_slot_context$1=o=>({item:o[23].data,i:o[23].index,hoverItemIndex:o[1]});function fallback_block(o){let e;return{c(){e=text("Missing template")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_each_block$G(o,e){let t,n,r;const a=e[15].default,s=create_slot(a,e,e[14],get_default_slot_context$1),l=s||fallback_block();return{key:o,first:null,c(){t=element("svelte-virtual-list-row"),l&&l.c(),n=space(),set_custom_element_data(t,"class","svelte-g2cagw"),this.first=t},m(u,d){insert(u,t,d),l&&l.m(t,null),append(t,n),r=!0},p(u,d){e=u,s&&s.p&&(!r||d&16418)&&update_slot_base(s,a,e,e[14],r?get_slot_changes(a,e[14],d,get_default_slot_changes$1):get_all_dirty_from_scope(e[14]),get_default_slot_context$1)},i(u){r||(transition_in(l,u),r=!0)},o(u){transition_out(l,u),r=!1},d(u){u&&detach(t),l&&l.d(u)}}}function create_fragment$4k(o){let e,t,n=[],r=new Map,a,s,l,u,d=ensure_array_like(o[5]);const f=m=>m[23].index;for(let m=0;m<d.length;m+=1){let h=get_each_context$G(o,d,m),p=f(h);r.set(p,n[m]=create_each_block$G(p,h))}return{c(){e=element("svelte-virtual-list-viewport"),t=element("svelte-virtual-list-contents");for(let m=0;m<n.length;m+=1)n[m].c();set_style(t,"padding-top",o[6]+"px"),set_style(t,"padding-bottom",o[7]+"px"),set_custom_element_data(t,"class","svelte-g2cagw"),set_style(e,"height",o[0]),set_custom_element_data(e,"class","svelte-g2cagw"),add_render_callback(()=>o[18].call(e))},m(m,h){insert(m,e,h),append(e,t);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(t,null);o[16](t),o[17](e),a=add_iframe_resize_listener(e,o[18].bind(e)),s=!0,l||(u=listen(e,"scroll",o[8]),l=!0)},p(m,[h]){h&16418&&(d=ensure_array_like(m[5]),group_outros(),n=update_keyed_each(n,h,f,1,m,d,r,t,outro_and_destroy_block,create_each_block$G,null,get_each_context$G),check_outros()),(!s||h&64)&&set_style(t,"padding-top",m[6]+"px"),(!s||h&128)&&set_style(t,"padding-bottom",m[7]+"px"),(!s||h&1)&&set_style(e,"height",m[0])},i(m){if(!s){for(let h=0;h<d.length;h+=1)transition_in(n[h]);s=!0}},o(m){for(let h=0;h<n.length;h+=1)transition_out(n[h]);s=!1},d(m){m&&detach(e);for(let h=0;h<n.length;h+=1)n[h].d();o[16](null),o[17](null),a(),l=!1,u()}}}function instance$4h(o,e,t){let{$$slots:n={},$$scope:r}=e,{items:a=void 0}=e,{height:s="100%"}=e,{itemHeight:l=40}=e,{hoverItemIndex:u=0}=e,{start:d=0}=e,{end:f=0}=e,m=[],h,p,g,b=0,v,y,C=0,E=0,A;async function k(R,N,M){const{scrollTop:F}=p;await tick();let D=C-F,x=d;for(;D<N&&x<R.length;){let K=h[x-d];K||(t(10,f=x+1),await tick(),K=h[x-d]);const U=m[x]=M||K.offsetHeight;D+=U,x+=1}t(10,f=x);const B=R.length-f;A=(C+D)/f,t(7,E=B*A),m.length=R.length,p&&t(3,p.scrollTop=0,p)}async function T(){const{scrollTop:R}=p,N=d;for(let x=0;x<h.length;x+=1)m[d+x]=l||h[x].offsetHeight;let M=0,F=0;for(;M<a.length;){const x=m[M]||A;if(F+x>R){t(9,d=M),t(6,C=F);break}F+=x,M+=1}for(;M<a.length&&(F+=m[M]||A,M+=1,!(F>R+b)););t(10,f=M);const D=a.length-f;for(A=F/f;M<a.length;)m[M++]=A;if(t(7,E=D*A),d<N){await tick();let x=0,B=0;for(let U=d;U<N;U+=1)h[U-d]&&(x+=m[U],B+=l||h[U-d].offsetHeight);const K=B-x;p.scrollTo(0,R+K)}}onMount(()=>{h=g.getElementsByTagName("svelte-virtual-list-row"),t(13,y=!0)});function $(R){binding_callbacks[R?"unshift":"push"](()=>{g=R,t(4,g)})}function S(R){binding_callbacks[R?"unshift":"push"](()=>{p=R,t(3,p)})}function I(){b=this.offsetHeight,t(2,b)}return o.$$set=R=>{"items"in R&&t(11,a=R.items),"height"in R&&t(0,s=R.height),"itemHeight"in R&&t(12,l=R.itemHeight),"hoverItemIndex"in R&&t(1,u=R.hoverItemIndex),"start"in R&&t(9,d=R.start),"end"in R&&t(10,f=R.end),"$$scope"in R&&t(14,r=R.$$scope)},o.$$.update=()=>{o.$$.dirty&3584&&t(5,v=a.slice(d,f).map((R,N)=>({index:N+d,data:R}))),o.$$.dirty&14340&&y&&k(a,b,l)},[s,u,b,p,g,v,C,E,T,d,f,a,l,y,r,n,$,S,I]}class VirtualList extends SvelteComponent{constructor(e){super(),init(this,e,instance$4h,create_fragment$4k,safe_not_equal,{items:11,height:0,itemHeight:12,hoverItemIndex:1,start:9,end:10})}}function create_fragment$4j(o){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),attr(t,"fill","currentColor"),attr(t,"d",`M34.923,37.251L24,26.328L13.077,37.251L9.436,33.61l10.923-10.923L9.436,11.765l3.641-3.641L24,19.047L34.923,8.124
    l3.641,3.641L27.641,22.688L38.564,33.61L34.923,37.251z`),attr(e,"width","100%"),attr(e,"height","100%"),attr(e,"viewBox","-2 -2 50 50"),attr(e,"focusable","false"),attr(e,"aria-hidden","true"),attr(e,"role","presentation")},m(n,r){insert(n,e,r),append(e,t)},p:noop$1,i:noop$1,o:noop$1,d(n){n&&detach(e)}}}class ClearIcon extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$4j,safe_not_equal,{})}}function debounce$2(o,e,t){let n;return function(){let a=this,s=arguments,l=function(){n=null,t||o.apply(a,s)},u=t&&!n;clearTimeout(n),n=setTimeout(l,e),u&&o.apply(a,s)}}const Select_svelte_svelte_type_style_lang="";function get_each_context$F(o,e,t){const n=o.slice();return n[103]=e[t],n}function create_if_block_10$7(o){let e,t,n,r,a;return{c(){e=element("span"),t=text(o[33]),n=space(),r=element("span"),a=text(o[32]),attr(e,"id","aria-selection"),attr(r,"id","aria-context")},m(s,l){insert(s,e,l),append(e,t),insert(s,n,l),insert(s,r,l),append(r,a)},p(s,l){l[1]&4&&set_data(t,s[33]),l[1]&2&&set_data(a,s[32])},d(s){s&&(detach(e),detach(n),detach(r))}}}function create_if_block_9$8(o){let e,t,n;const r=[o[18]];var a=o[17];function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s())),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u[0]&262144?get_spread_update(r,[get_spread_object(l[18])]):{};if(u[0]&131072&&a!==(a=l[17])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_if_block_8$8(o){let e,t,n;var r=o[26];function a(s){return{props:{value:s[2],getSelectionLabel:s[12],activeValue:s[30],isDisabled:s[9],multiFullItemClearable:s[8]}}}return r&&(e=construct_svelte_component(r,a(o)),e.$on("multiItemClear",o[38]),e.$on("focus",o[40])),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l[0]&4&&(u.value=s[2]),l[0]&4096&&(u.getSelectionLabel=s[12]),l[0]&1073741824&&(u.activeValue=s[30]),l[0]&512&&(u.isDisabled=s[9]),l[0]&256&&(u.multiFullItemClearable=s[8]),l[0]&67108864&&r!==(r=s[26])){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),e.$on("multiItemClear",s[38]),e.$on("focus",s[40]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_if_block_7$9(o){let e,t,n,r,a;var s=o[25];function l(u){return{props:{item:u[2],getSelectionLabel:u[12]}}}return s&&(t=construct_svelte_component(s,l(o))),{c(){e=element("div"),t&&create_component(t.$$.fragment),attr(e,"class","selectedItem svelte-17l1npl")},m(u,d){insert(u,e,d),t&&mount_component(t,e,null),n=!0,r||(a=listen(e,"focus",o[40]),r=!0)},p(u,d){const f={};if(d[0]&4&&(f.item=u[2]),d[0]&4096&&(f.getSelectionLabel=u[12]),d[0]&33554432&&s!==(s=u[25])){if(t){group_outros();const m=t;transition_out(m.$$.fragment,1,0,()=>{destroy_component(m,1)}),check_outros()}s?(t=construct_svelte_component(s,l(u)),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,null)):t=null}else s&&t.$set(f)},i(u){n||(t&&transition_in(t.$$.fragment,u),n=!0)},o(u){t&&transition_out(t.$$.fragment,u),n=!1},d(u){u&&detach(e),t&&destroy_component(t),r=!1,a()}}}function create_if_block_6$d(o){let e,t,n,r,a;var s=o[23];function l(u){return{}}return s&&(t=construct_svelte_component(s,l())),{c(){e=element("div"),t&&create_component(t.$$.fragment),attr(e,"class","clearSelect svelte-17l1npl"),attr(e,"aria-hidden","true")},m(u,d){insert(u,e,d),t&&mount_component(t,e,null),n=!0,r||(a=listen(e,"click",prevent_default(o[27])),r=!0)},p(u,d){if(d[0]&8388608&&s!==(s=u[23])){if(t){group_outros();const f=t;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}s?(t=construct_svelte_component(s,l()),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,null)):t=null}},i(u){n||(t&&transition_in(t.$$.fragment,u),n=!0)},o(u){t&&transition_out(t.$$.fragment,u),n=!1},d(u){u&&detach(e),t&&destroy_component(t),r=!1,a()}}}function create_if_block_4$t(o){let e;function t(a,s){return a[22]?create_if_block_5$l:create_else_block$O}let n=t(o),r=n(o);return{c(){e=element("div"),r.c(),attr(e,"class","indicator svelte-17l1npl"),attr(e,"aria-hidden","true")},m(a,s){insert(a,e,s),r.m(e,null)},p(a,s){n===(n=t(a))&&r?r.p(a,s):(r.d(1),r=n(a),r&&(r.c(),r.m(e,null)))},d(a){a&&detach(e),r.d()}}}function create_else_block$O(o){let e,t;return{c(){e=svg_element("svg"),t=svg_element("path"),attr(t,"d",`M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747
          3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0
          1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502
          0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0
          0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z`),attr(e,"width","100%"),attr(e,"height","100%"),attr(e,"viewBox","0 0 20 20"),attr(e,"focusable","false"),attr(e,"aria-hidden","true"),attr(e,"class","svelte-17l1npl")},m(n,r){insert(n,e,r),append(e,t)},p:noop$1,d(n){n&&detach(e)}}}function create_if_block_5$l(o){let e,t;return{c(){e=new HtmlTag(!1),t=empty(),e.a=t},m(n,r){e.m(o[22],n,r),insert(n,t,r)},p(n,r){r[0]&4194304&&e.p(n[22])},d(n){n&&(detach(t),e.d())}}}function create_if_block_3$A(o){let e;return{c(){e=element("div"),e.innerHTML='<svg class="spinner_icon svelte-17l1npl" viewBox="25 25 50 50"><circle class="spinner_path svelte-17l1npl" cx="50" cy="50" r="20" fill="none" stroke="currentColor" stroke-width="5" stroke-miterlimit="10"></circle></svg>',attr(e,"class","spinner svelte-17l1npl")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_2$O(o){let e,t,n,r;const a=[o[34]];function s(d){o[84](d)}var l=o[24];function u(d){let f={};for(let m=0;m<a.length;m+=1)f=assign(f,a[m]);return d[28]!==void 0&&(f.hoverItemIndex=d[28]),{props:f}}return l&&(e=construct_svelte_component(l,u(o)),binding_callbacks.push(()=>bind(e,"hoverItemIndex",s)),e.$on("itemSelected",o[43]),e.$on("itemCreated",o[44]),e.$on("closeList",o[45])),{c(){e&&create_component(e.$$.fragment),n=empty()},m(d,f){e&&mount_component(e,d,f),insert(d,n,f),r=!0},p(d,f){const m=f[1]&8?get_spread_update(a,[get_spread_object(d[34])]):{};if(!t&&f[0]&268435456&&(t=!0,m.hoverItemIndex=d[28],add_flush_callback(()=>t=!1)),f[0]&16777216&&l!==(l=d[24])){if(e){group_outros();const h=e;transition_out(h.$$.fragment,1,0,()=>{destroy_component(h,1)}),check_outros()}l?(e=construct_svelte_component(l,u(d)),binding_callbacks.push(()=>bind(e,"hoverItemIndex",s)),e.$on("itemSelected",d[43]),e.$on("itemCreated",d[44]),e.$on("closeList",d[45]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,n.parentNode,n)):e=null}else l&&e.$set(m)},i(d){r||(e&&transition_in(e.$$.fragment,d),r=!0)},o(d){e&&transition_out(e.$$.fragment,d),r=!1},d(d){d&&detach(n),e&&destroy_component(e,d)}}}function create_if_block_1$13(o){let e,t,n;return{c(){e=element("input"),attr(e,"name",t=o[16].name),attr(e,"type","hidden"),e.value=n=o[2]?o[12](o[2]):null,attr(e,"class","svelte-17l1npl")},m(r,a){insert(r,e,a)},p(r,a){a[0]&65536&&t!==(t=r[16].name)&&attr(e,"name",t),a[0]&4100&&n!==(n=r[2]?r[12](r[2]):null)&&(e.value=n)},d(r){r&&detach(e)}}}function create_if_block$1P(o){let e,t=ensure_array_like(o[2]),n=[];for(let r=0;r<t.length;r+=1)n[r]=create_each_block$F(get_each_context$F(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=empty()},m(r,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,a);insert(r,e,a)},p(r,a){if(a[0]&69636){t=ensure_array_like(r[2]);let s;for(s=0;s<t.length;s+=1){const l=get_each_context$F(r,t,s);n[s]?n[s].p(l,a):(n[s]=create_each_block$F(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},d(r){r&&detach(e),destroy_each(n,r)}}}function create_each_block$F(o){let e,t,n;return{c(){e=element("input"),attr(e,"name",t=o[16].name),attr(e,"type","hidden"),e.value=n=o[103]?o[12](o[103]):null,attr(e,"class","svelte-17l1npl")},m(r,a){insert(r,e,a)},p(r,a){a[0]&65536&&t!==(t=r[16].name)&&attr(e,"name",t),a[0]&4100&&n!==(n=r[103]?r[12](r[103]):null)&&(e.value=n)},d(r){r&&detach(e)}}}function create_fragment$4i(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=o[1]&&create_if_block_10$7(o),A=o[17]&&create_if_block_9$8(o),k=o[35]&&create_if_block_8$8(o),T=[{readOnly:l=!o[13]},o[31],{placeholder:o[36]},{style:o[14]},{disabled:o[9]}],$={};for(let x=0;x<T.length;x+=1)$=assign($,T[x]);let S=!o[7]&&o[29]&&create_if_block_7$9(o),I=o[37]&&create_if_block_6$d(o),R=!o[37]&&(o[20]||o[19]&&!o[2]||!o[13]&&!o[9]&&!o[4]&&(o[29]&&!o[15]||!o[29]))&&create_if_block_4$t(o),N=o[4]&&create_if_block_3$A(),M=o[5]&&create_if_block_2$O(o),F=(!o[7]||o[7]&&!o[35])&&create_if_block_1$13(o),D=o[7]&&o[35]&&create_if_block$1P(o);return{c(){e=element("div"),t=element("span"),E&&E.c(),n=space(),A&&A.c(),r=space(),k&&k.c(),a=space(),s=element("input"),u=space(),S&&S.c(),d=space(),I&&I.c(),f=space(),R&&R.c(),m=space(),N&&N.c(),h=space(),M&&M.c(),p=space(),F&&F.c(),g=space(),D&&D.c(),attr(t,"aria-live","polite"),attr(t,"aria-atomic","false"),attr(t,"aria-relevant","additions text"),attr(t,"class","a11yText svelte-17l1npl"),set_attributes(s,$),toggle_class(s,"svelte-17l1npl",!0),attr(e,"class",b="selectContainer "+o[21]+" svelte-17l1npl"),attr(e,"style",o[11]),toggle_class(e,"hasError",o[10]),toggle_class(e,"multiSelect",o[7]),toggle_class(e,"disabled",o[9]),toggle_class(e,"focused",o[1])},m(x,B){insert(x,e,B),append(e,t),E&&E.m(t,null),append(e,n),A&&A.m(e,null),append(e,r),k&&k.m(e,null),append(e,a),append(e,s),s.autofocus&&s.focus(),o[82](s),set_input_value(s,o[3]),append(e,u),S&&S.m(e,null),append(e,d),I&&I.m(e,null),append(e,f),R&&R.m(e,null),append(e,m),N&&N.m(e,null),append(e,h),M&&M.m(e,null),append(e,p),F&&F.m(e,null),append(e,g),D&&D.m(e,null),o[85](e),v=!0,y||(C=[listen(window,"click",o[41]),listen(window,"focusin",o[41]),listen(window,"keydown",o[39]),listen(s,"focus",o[40]),listen(s,"input",o[83]),listen(e,"click",o[42])],y=!0)},p(x,B){x[1]?E?E.p(x,B):(E=create_if_block_10$7(x),E.c(),E.m(t,null)):E&&(E.d(1),E=null),x[17]?A?(A.p(x,B),B[0]&131072&&transition_in(A,1)):(A=create_if_block_9$8(x),A.c(),transition_in(A,1),A.m(e,r)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),x[35]?k?(k.p(x,B),B[1]&16&&transition_in(k,1)):(k=create_if_block_8$8(x),k.c(),transition_in(k,1),k.m(e,a)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),set_attributes(s,$=get_spread_update(T,[(!v||B[0]&8192&&l!==(l=!x[13]))&&{readOnly:l},B[1]&1&&x[31],(!v||B[1]&32)&&{placeholder:x[36]},(!v||B[0]&16384)&&{style:x[14]},(!v||B[0]&512)&&{disabled:x[9]}])),B[0]&8&&s.value!==x[3]&&set_input_value(s,x[3]),toggle_class(s,"svelte-17l1npl",!0),!x[7]&&x[29]?S?(S.p(x,B),B[0]&536871040&&transition_in(S,1)):(S=create_if_block_7$9(x),S.c(),transition_in(S,1),S.m(e,d)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()),x[37]?I?(I.p(x,B),B[1]&64&&transition_in(I,1)):(I=create_if_block_6$d(x),I.c(),transition_in(I,1),I.m(e,f)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros()),!x[37]&&(x[20]||x[19]&&!x[2]||!x[13]&&!x[9]&&!x[4]&&(x[29]&&!x[15]||!x[29]))?R?R.p(x,B):(R=create_if_block_4$t(x),R.c(),R.m(e,m)):R&&(R.d(1),R=null),x[4]?N||(N=create_if_block_3$A(),N.c(),N.m(e,h)):N&&(N.d(1),N=null),x[5]?M?(M.p(x,B),B[0]&32&&transition_in(M,1)):(M=create_if_block_2$O(x),M.c(),transition_in(M,1),M.m(e,p)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),!x[7]||x[7]&&!x[35]?F?F.p(x,B):(F=create_if_block_1$13(x),F.c(),F.m(e,g)):F&&(F.d(1),F=null),x[7]&&x[35]?D?D.p(x,B):(D=create_if_block$1P(x),D.c(),D.m(e,null)):D&&(D.d(1),D=null),(!v||B[0]&2097152&&b!==(b="selectContainer "+x[21]+" svelte-17l1npl"))&&attr(e,"class",b),(!v||B[0]&2048)&&attr(e,"style",x[11]),(!v||B[0]&2098176)&&toggle_class(e,"hasError",x[10]),(!v||B[0]&2097280)&&toggle_class(e,"multiSelect",x[7]),(!v||B[0]&2097664)&&toggle_class(e,"disabled",x[9]),(!v||B[0]&2097154)&&toggle_class(e,"focused",x[1])},i(x){v||(transition_in(A),transition_in(k),transition_in(S),transition_in(I),transition_in(M),v=!0)},o(x){transition_out(A),transition_out(k),transition_out(S),transition_out(I),transition_out(M),v=!1},d(x){x&&detach(e),E&&E.d(),A&&A.d(),k&&k.d(),o[82](null),S&&S.d(),I&&I.d(),R&&R.d(),N&&N.d(),M&&M.d(),F&&F.d(),D&&D.d(),o[85](null),y=!1,run_all(C)}}}function convertStringItemsToObjects(o){return o.map((e,t)=>({index:t,value:e,label:`${e}`}))}function instance$4g(o,e,t){let n,r,a,s,l,u,d,f;const m=createEventDispatcher();let{id:h=null}=e,{container:p=void 0}=e,{input:g=void 0}=e,{isMulti:b=!1}=e,{multiFullItemClearable:v=!1}=e,{isDisabled:y=!1}=e,{isCreatable:C=!1}=e,{isFocused:E=!1}=e,{value:A=null}=e,{filterText:k=""}=e,{placeholder:T="Select..."}=e,{placeholderAlwaysShow:$=!1}=e,{items:S=null}=e,{itemFilter:I=(ve,ct,bt)=>`${ve}`.toLowerCase().includes(ct.toLowerCase())}=e,{groupBy:R=void 0}=e,{groupFilter:N=ve=>ve}=e,{isGroupHeaderSelectable:M=!1}=e,{getGroupHeaderLabel:F=ve=>ve[D]||ve.id}=e,{labelIdentifier:D="label"}=e,{getOptionLabel:x=(ve,ct)=>ve.isCreator?`Create "${ct}"`:ve[D]}=e,{optionIdentifier:B="value"}=e,{loadOptions:K=void 0}=e,{hasError:U=!1}=e,{containerStyles:G=""}=e,{getSelectionLabel:W=ve=>ve?ve[D]:null}=e,{createGroupHeaderItem:q=ve=>({value:ve,label:ve})}=e,{createItem:H=ve=>({value:ve,label:ve})}=e;const z=()=>n;let{isSearchable:Y=!0}=e,{inputStyles:V=""}=e,{isClearable:J=!0}=e,{isWaiting:Q=!1}=e,{listPlacement:X="auto"}=e,{listOpen:ie=!1}=e,{isVirtualList:ce=!1}=e,{loadOptionsInterval:de=300}=e,{noOptionsMessage:se="No options"}=e,{hideEmptyState:me=!1}=e,{inputAttributes:ue={}}=e,{listAutoWidth:he=!0}=e,{itemHeight:pe=40}=e,{Icon:Oe=void 0}=e,{iconProps:qe={}}=e,{showChevron:et=!1}=e,{showIndicator:Ue=!1}=e,{containerClasses:fe=""}=e,{indicatorSvg:Ie=void 0}=e,{listOffset:We=5}=e,{ClearIcon:$e=ClearIcon}=e,{Item:Le=Item}=e,{List:ze=List$1}=e,{Selection:re=Selection}=e,{MultiSelection:ge=MultiSelection}=e,{VirtualList:Be=VirtualList}=e;function Ze(ve){if(ve.loadOptions&&ve.filterText.length>0)return;if(!ve.items)return[];ve.items&&ve.items.length>0&&typeof ve.items[0]!="object"&&(ve.items=convertStringItemsToObjects(ve.items));let ct=ve.items.filter(bt=>{let At=I(x(bt,ve.filterText),ve.filterText,bt);return At&&ve.isMulti&&ve.value&&Array.isArray(ve.value)&&(At=!ve.value.some(Wt=>Wt[ve.optionIdentifier]===bt[ve.optionIdentifier])),At});return ve.groupBy&&(ct=Me(ct)),ve.isCreatable&&(ct=Pe(ct,ve.filterText)),ct}function Pe(ve,ct){if(ct.length===0)return ve;const bt=H(ct);return ve[0]&&ct===ve[0][D]?ve:(bt.isCreator=!0,[...ve,bt])}let{selectedValue:Ee=null}=e,Ce,je,pt,wt,ut,Ct;const xt=debounce$2(async()=>{t(4,Q=!0);let ve=await K(k).catch(ct=>{console.warn("svelte-select loadOptions error :>> ",ct),m("error",{type:"loadOptions",details:ct})});ve&&!ve.cancelled&&(ve?(ve&&ve.length>0&&typeof ve[0]!="object"&&(ve=convertStringItemsToObjects(ve)),t(81,n=[...ve]),m("loaded",{items:n})):t(81,n=[]),C&&t(81,n=Pe(n,k)),t(4,Q=!1),t(1,E=!0),t(5,ie=!0))},de);function ht(){typeof A=="string"?t(2,A={[B]:A,label:A}):b&&Array.isArray(A)&&A.length>0&&t(2,A=A.map(ve=>typeof ve=="string"?{value:ve,label:ve}:ve))}let Rt;function Ae(){t(31,Rt=Object.assign({autocapitalize:"none",autocomplete:"off",autocorrect:"off",spellcheck:!1,tabindex:0,type:"text","aria-autocomplete":"list"},ue)),h&&t(31,Rt.id=h,Rt),Y||t(31,Rt.readonly=!0,Rt)}function Me(ve){const ct=[],bt={};ve.forEach(Wt=>{const Ot=R(Wt);ct.includes(Ot)||(ct.push(Ot),bt[Ot]=[],Ot&&bt[Ot].push(Object.assign(q(Ot,Wt),{id:Ot,isGroupHeader:!0,isSelectable:M}))),bt[Ot].push(Object.assign({isGroupItem:!!Ot},Wt))});const At=[];return N(ct).forEach(Wt=>{At.push(...bt[Wt])}),At}function xe(){if(b){JSON.stringify(A)!==JSON.stringify(je)&&kt()&&m("select",A);return}(!je||JSON.stringify(A[B])!==JSON.stringify(je[B]))&&m("select",A)}function Qe(){E||ie?zt():g&&g.blur()}function rt(){A&&(Array.isArray(A)?t(2,A=[...A]):t(2,A=[A]))}function ot(){A&&t(2,A=null)}function ft(){k.length!==0&&(t(1,E=!0),t(5,ie=!0),K?xt():(t(5,ie=!0),b&&t(30,Ce=void 0)))}beforeUpdate(async()=>{t(77,je=A),t(78,pt=k),t(79,wt=E),t(80,ut=b)});function kt(){let ve=!0;if(A){const ct=[],bt=[];A.forEach(At=>{ct.includes(At[B])?ve=!1:(ct.push(At[B]),bt.push(At))}),ve||t(2,A=bt)}return ve}function $t(ve){let ct=ve?ve[B]:A[B];return S.find(bt=>bt[B]===ct)}function Lt(ve){!ve||ve.length===0||ve.some(ct=>typeof ct!="object")||!A||(b?A.some(ct=>!ct||!ct[B]):!A[B])||(Array.isArray(A)?t(2,A=A.map(ct=>$t(ct)||ct)):t(2,A=$t()||A))}function Ut(ve){const{detail:ct}=ve,bt=A[ct?ct.i:A.length-1];A.length===1?t(2,A=void 0):t(2,A=A.filter(At=>At!==bt)),m("clear",bt)}function rn(ve){if(E)switch(ve.key){case"ArrowDown":ve.preventDefault(),t(5,ie=!0),t(30,Ce=void 0);break;case"ArrowUp":ve.preventDefault(),t(5,ie=!0),t(30,Ce=void 0);break;case"Tab":ie||t(1,E=!1);break;case"Backspace":if(!b||k.length>0)return;if(b&&A&&A.length>0){if(Ut(Ce!==void 0?Ce:A.length-1),Ce===0||Ce===void 0)break;t(30,Ce=A.length>Ce?Ce-1:void 0)}break;case"ArrowLeft":if(!b||k.length>0)return;Ce===void 0?t(30,Ce=A.length-1):A.length>Ce&&Ce!==0&&t(30,Ce-=1);break;case"ArrowRight":if(!b||k.length>0||Ce===void 0)return;Ce===A.length-1?t(30,Ce=void 0):Ce<A.length-1&&t(30,Ce+=1);break}}function zt(){t(1,E=!0),g&&g.focus()}function lt(ve){if(!p)return;const ct=ve.path&&ve.path.length>0?ve.path[0]:ve.target;p.contains(ct)||p.contains(ve.relatedTarget)||(t(1,E=!1),t(5,ie=!1),t(30,Ce=void 0),g&&g.blur())}function Cn(){y||(t(1,E=!0),t(5,ie=!ie))}function an(){t(2,A=void 0),t(5,ie=!1),m("clear",A),zt()}onMount(()=>{E&&g&&g.focus()});function wn(ve){const{detail:ct}=ve;if(ct){t(3,k="");const bt=Object.assign({},ct);(!bt.isGroupHeader||bt.isSelectable)&&(b?t(2,A=A?A.concat([bt]):[bt]):t(2,A=bt),t(2,A),setTimeout(()=>{t(5,ie=!1),t(30,Ce=void 0)}))}}function vn(ve){const{detail:ct}=ve;b?(t(2,A=A||[]),t(2,A=[...A,H(ct)])):t(2,A=H(ct)),m("itemCreated",ct),t(3,k=""),t(5,ie=!1),t(30,Ce=void 0)}function _n(){t(3,k=""),t(5,ie=!1)}let{ariaValues:sn=ve=>`Option ${ve}, selected.`}=e,{ariaListOpen:Yt=(ve,ct)=>`You are currently focused on option ${ve}. There are ${ct} results available.`}=e,{ariaFocused:nn=()=>"Select is focused, type to refine list, press down to open the menu."}=e;function Zt(){let ve;return b&&A.length>0?ve=A.map(ct=>W(ct)).join(", "):ve=W(A),sn(ve)}function ln(){if(!E||!n||n.length===0)return"";let ve=n[Ct];if(ie&&ve){let ct=W(ve),bt=n?n.length:0;return Yt(ct,bt)}else return nn()}function cn(ve){binding_callbacks[ve?"unshift":"push"](()=>{g=ve,t(6,g)})}function hn(){k=this.value,t(3,k)}function un(ve){Ct=ve,t(28,Ct)}function En(ve){binding_callbacks[ve?"unshift":"push"](()=>{p=ve,t(0,p)})}return o.$$set=ve=>{"id"in ve&&t(46,h=ve.id),"container"in ve&&t(0,p=ve.container),"input"in ve&&t(6,g=ve.input),"isMulti"in ve&&t(7,b=ve.isMulti),"multiFullItemClearable"in ve&&t(8,v=ve.multiFullItemClearable),"isDisabled"in ve&&t(9,y=ve.isDisabled),"isCreatable"in ve&&t(47,C=ve.isCreatable),"isFocused"in ve&&t(1,E=ve.isFocused),"value"in ve&&t(2,A=ve.value),"filterText"in ve&&t(3,k=ve.filterText),"placeholder"in ve&&t(48,T=ve.placeholder),"placeholderAlwaysShow"in ve&&t(49,$=ve.placeholderAlwaysShow),"items"in ve&&t(50,S=ve.items),"itemFilter"in ve&&t(51,I=ve.itemFilter),"groupBy"in ve&&t(52,R=ve.groupBy),"groupFilter"in ve&&t(53,N=ve.groupFilter),"isGroupHeaderSelectable"in ve&&t(54,M=ve.isGroupHeaderSelectable),"getGroupHeaderLabel"in ve&&t(55,F=ve.getGroupHeaderLabel),"labelIdentifier"in ve&&t(56,D=ve.labelIdentifier),"getOptionLabel"in ve&&t(57,x=ve.getOptionLabel),"optionIdentifier"in ve&&t(58,B=ve.optionIdentifier),"loadOptions"in ve&&t(59,K=ve.loadOptions),"hasError"in ve&&t(10,U=ve.hasError),"containerStyles"in ve&&t(11,G=ve.containerStyles),"getSelectionLabel"in ve&&t(12,W=ve.getSelectionLabel),"createGroupHeaderItem"in ve&&t(60,q=ve.createGroupHeaderItem),"createItem"in ve&&t(61,H=ve.createItem),"isSearchable"in ve&&t(13,Y=ve.isSearchable),"inputStyles"in ve&&t(14,V=ve.inputStyles),"isClearable"in ve&&t(15,J=ve.isClearable),"isWaiting"in ve&&t(4,Q=ve.isWaiting),"listPlacement"in ve&&t(63,X=ve.listPlacement),"listOpen"in ve&&t(5,ie=ve.listOpen),"isVirtualList"in ve&&t(64,ce=ve.isVirtualList),"loadOptionsInterval"in ve&&t(65,de=ve.loadOptionsInterval),"noOptionsMessage"in ve&&t(66,se=ve.noOptionsMessage),"hideEmptyState"in ve&&t(67,me=ve.hideEmptyState),"inputAttributes"in ve&&t(16,ue=ve.inputAttributes),"listAutoWidth"in ve&&t(68,he=ve.listAutoWidth),"itemHeight"in ve&&t(69,pe=ve.itemHeight),"Icon"in ve&&t(17,Oe=ve.Icon),"iconProps"in ve&&t(18,qe=ve.iconProps),"showChevron"in ve&&t(19,et=ve.showChevron),"showIndicator"in ve&&t(20,Ue=ve.showIndicator),"containerClasses"in ve&&t(21,fe=ve.containerClasses),"indicatorSvg"in ve&&t(22,Ie=ve.indicatorSvg),"listOffset"in ve&&t(70,We=ve.listOffset),"ClearIcon"in ve&&t(23,$e=ve.ClearIcon),"Item"in ve&&t(71,Le=ve.Item),"List"in ve&&t(24,ze=ve.List),"Selection"in ve&&t(25,re=ve.Selection),"MultiSelection"in ve&&t(26,ge=ve.MultiSelection),"VirtualList"in ve&&t(72,Be=ve.VirtualList),"selectedValue"in ve&&t(73,Ee=ve.selectedValue),"ariaValues"in ve&&t(74,sn=ve.ariaValues),"ariaListOpen"in ve&&t(75,Yt=ve.ariaListOpen),"ariaFocused"in ve&&t(76,nn=ve.ariaFocused)},o.$$.update=()=>{o.$$.dirty[0]&140|o.$$.dirty[1]&405340160&&t(81,n=Ze({loadOptions:K,filterText:k,items:S,value:A,isMulti:b,optionIdentifier:B,groupBy:R,isCreatable:C})),o.$$.dirty[2]&2048&&Ee&&console.warn("selectedValue is no longer used. Please use value instead."),o.$$.dirty[1]&524288&&Lt(S),o.$$.dirty[0]&4&&A&&ht(),o.$$.dirty[0]&73728&&(ue||!Y)&&Ae(),o.$$.dirty[0]&128|o.$$.dirty[2]&262144&&(b&&rt(),ut&&!b&&ot()),o.$$.dirty[0]&132&&b&&A&&A.length>1&&kt(),o.$$.dirty[0]&4&&A&&xe(),o.$$.dirty[0]&132|o.$$.dirty[2]&32768&&!A&&b&&je&&m("select",A),o.$$.dirty[0]&2|o.$$.dirty[2]&131072&&E!==wt&&Qe(),o.$$.dirty[0]&8|o.$$.dirty[2]&65536&&k!==pt&&ft(),o.$$.dirty[0]&12&&t(29,r=A&&k.length===0),o.$$.dirty[0]&536904208&&t(37,a=r&&J&&!y&&!Q),o.$$.dirty[0]&132|o.$$.dirty[1]&393216&&t(36,s=$&&b?T:A?"":T),o.$$.dirty[0]&132&&t(35,l=b&&A&&A.length>0),o.$$.dirty[0]&141|o.$$.dirty[1]&218103808|o.$$.dirty[2]&526326&&t(34,u={Item:Le,filterText:k,optionIdentifier:B,noOptionsMessage:se,hideEmptyState:me,isVirtualList:ce,VirtualList:Be,value:A,isMulti:b,getGroupHeaderLabel:F,items:n,itemHeight:pe,getOptionLabel:x,listPlacement:X,parent:p,listAutoWidth:he,listOffset:We}),o.$$.dirty[0]&132&&t(33,d=A?Zt():""),o.$$.dirty[0]&268435490|o.$$.dirty[2]&524288&&t(32,f=ln())},[p,E,A,k,Q,ie,g,b,v,y,U,G,W,Y,V,J,ue,Oe,qe,et,Ue,fe,Ie,$e,ze,re,ge,an,Ct,r,Ce,Rt,f,d,u,l,s,a,Ut,rn,zt,lt,Cn,wn,vn,_n,h,C,T,$,S,I,R,N,M,F,D,x,B,K,q,H,z,X,ce,de,se,me,he,pe,We,Le,Be,Ee,sn,Yt,nn,je,pt,wt,ut,n,cn,hn,un,En]}class Select extends SvelteComponent{constructor(e){super(),init(this,e,instance$4g,create_fragment$4i,safe_not_equal,{id:46,container:0,input:6,isMulti:7,multiFullItemClearable:8,isDisabled:9,isCreatable:47,isFocused:1,value:2,filterText:3,placeholder:48,placeholderAlwaysShow:49,items:50,itemFilter:51,groupBy:52,groupFilter:53,isGroupHeaderSelectable:54,getGroupHeaderLabel:55,labelIdentifier:56,getOptionLabel:57,optionIdentifier:58,loadOptions:59,hasError:10,containerStyles:11,getSelectionLabel:12,createGroupHeaderItem:60,createItem:61,getFilteredItems:62,isSearchable:13,inputStyles:14,isClearable:15,isWaiting:4,listPlacement:63,listOpen:5,isVirtualList:64,loadOptionsInterval:65,noOptionsMessage:66,hideEmptyState:67,inputAttributes:16,listAutoWidth:68,itemHeight:69,Icon:17,iconProps:18,showChevron:19,showIndicator:20,containerClasses:21,indicatorSvg:22,listOffset:70,ClearIcon:23,Item:71,List:24,Selection:25,MultiSelection:26,VirtualList:72,selectedValue:73,handleClear:27,ariaValues:74,ariaListOpen:75,ariaFocused:76},null,[-1,-1,-1,-1])}get getFilteredItems(){return this.$$.ctx[62]}get handleClear(){return this.$$.ctx[27]}}const SelectField_svelte_svelte_type_style_lang="";function get_each_context$E(o,e,t){const n=o.slice();return n[17]=e[t],n}function create_else_block$N(o){var f;let e,t,n,r,a;const s=[o[9],{items:o[0]},{value:o[3]?_.compact(((f=o[1])==null?void 0:f.map(o[12]))??[]):o[0].find(o[13])??null},{showIndicator:!o[3]},{isClearable:o[3]},{isMulti:o[3]}];function l(m){o[14](m)}function u(m){o[15](m)}let d={};for(let m=0;m<s.length;m+=1)d=assign(d,s[m]);return o[6]!==void 0&&(d.listOpen=o[6]),o[7]!==void 0&&(d.isFocused=o[7]),t=new Select({props:d}),binding_callbacks.push(()=>bind(t,"listOpen",l)),binding_callbacks.push(()=>bind(t,"isFocused",u)),t.$on("select",o[16]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","select svelte-3jbx4l")},m(m,h){insert(m,e,h),mount_component(t,e,null),a=!0},p(m,h){var g;const p=h&523?get_spread_update(s,[h&512&&get_spread_object(m[9]),h&1&&{items:m[0]},h&11&&{value:m[3]?_.compact(((g=m[1])==null?void 0:g.map(m[12]))??[]):m[0].find(m[13])??null},h&8&&{showIndicator:!m[3]},h&8&&{isClearable:m[3]},h&8&&{isMulti:m[3]}]):{};!n&&h&64&&(n=!0,p.listOpen=m[6],add_flush_callback(()=>n=!1)),!r&&h&128&&(r=!0,p.isFocused=m[7],add_flush_callback(()=>r=!1)),t.$set(p)},i(m){a||(transition_in(t.$$.fragment,m),a=!0)},o(m){transition_out(t.$$.fragment,m),a=!1},d(m){m&&detach(e),destroy_component(t)}}}function create_if_block$1O(o){let e,t,n=[],r=new Map,a,s,l,u=o[4]&&create_if_block_1$12(o),d=ensure_array_like(_.compact(o[0]));const f=p=>p[17].value;for(let p=0;p<d.length;p+=1){let g=get_each_context$E(o,d,p),b=f(g);r.set(b,n[p]=create_each_block$E(b,g))}let m=[{value:a=o[0].find(o[10])?o[1]:o[5]},o[9]],h={};for(let p=0;p<m.length;p+=1)h=assign(h,m[p]);return{c(){e=element("select"),u&&u.c(),t=empty();for(let p=0;p<n.length;p+=1)n[p].c();set_attributes(e,h),toggle_class(e,"svelte-3jbx4l",!0)},m(p,g){insert(p,e,g),u&&u.m(e,null),append(e,t);for(let b=0;b<n.length;b+=1)n[b]&&n[b].m(e,null);"value"in h&&(h.multiple?select_options:select_option)(e,h.value),e.autofocus&&e.focus(),s||(l=listen(e,"change",o[11]),s=!0)},p(p,g){p[4]?u?u.p(p,g):(u=create_if_block_1$12(p),u.c(),u.m(e,t)):u&&(u.d(1),u=null),g&1&&(d=ensure_array_like(_.compact(p[0])),n=update_keyed_each(n,g,f,1,p,d,r,e,destroy_block,create_each_block$E,null,get_each_context$E)),set_attributes(e,h=get_spread_update(m,[g&35&&a!==(a=p[0].find(p[10])?p[1]:p[5])&&{value:a},g&512&&p[9]])),g&547&&"value"in h&&(h.multiple?select_options:select_option)(e,h.value),toggle_class(e,"svelte-3jbx4l",!0)},i:noop$1,o:noop$1,d(p){p&&detach(e),u&&u.d();for(let g=0;g<n.length;g+=1)n[g].d();s=!1,l()}}}function create_if_block_1$12(o){let e,t=(_.isString(o[4])?o[4]:"(not selected)")+"",n,r;return{c(){e=element("option"),n=text(t),r=space(),e.__value="",set_input_value(e,e.__value)},m(a,s){insert(a,e,s),append(e,n),append(e,r)},p(a,s){s&16&&t!==(t=(_.isString(a[4])?a[4]:"(not selected)")+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_each_block$E(o,e){let t,n=e[17].label+"",r,a,s;return{key:o,first:null,c(){t=element("option"),r=text(n),a=space(),t.__value=s=e[17].value,set_input_value(t,t.__value),this.first=t},m(l,u){insert(l,t,u),append(t,r),append(t,a)},p(l,u){e=l,u&1&&n!==(n=e[17].label+"")&&set_data(r,n),u&1&&s!==(s=e[17].value)&&(t.__value=s,set_input_value(t,t.__value))},d(l){l&&detach(t)}}}function create_fragment$4h(o){let e,t,n,r;const a=[create_if_block$1O,create_else_block$N],s=[];function l(u,d){return u[2]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$4f(o,e,t){const n=["options","value","isNative","isMulti","notSelected","defaultValue"];let r=compute_rest_props(e,n);const a=createEventDispatcher();let{options:s=[]}=e,{value:l}=e,{isNative:u=!1}=e,{isMulti:d=!1}=e,{notSelected:f=null}=e,{defaultValue:m=""}=e,h=!1,p=!1;const g=k=>k.value==l,b=k=>{a("change",k.target.value)},v=k=>s.find(T=>T.value==k),y=k=>k.value==l;function C(k){h=k,t(6,h),t(7,p),t(3,d)}function E(k){p=k,t(7,p)}const A=k=>{var T;d?a("change",(T=k.detail)==null?void 0:T.map($=>$.value)):a("change",k.detail.value)};return o.$$set=k=>{e=assign(assign({},e),exclude_internal_props(k)),t(9,r=compute_rest_props(e,n)),"options"in k&&t(0,s=k.options),"value"in k&&t(1,l=k.value),"isNative"in k&&t(2,u=k.isNative),"isMulti"in k&&t(3,d=k.isMulti),"notSelected"in k&&t(4,f=k.notSelected),"defaultValue"in k&&t(5,m=k.defaultValue)},o.$$.update=()=>{o.$$.dirty&200&&!h&&p&&d&&t(6,h=!0)},[s,l,u,d,f,m,h,p,a,r,g,b,v,y,C,E,A]}class SelectField extends SvelteComponent{constructor(e){super(),init(this,e,instance$4f,create_fragment$4h,safe_not_equal,{options:0,value:1,isNative:2,isMulti:3,notSelected:4,defaultValue:5})}}function create_fragment$4g(o){let e,t,n;const r=[o[8],{value:o[4]&&o[4][o[0]]},{options:_.compact(o[1])},{isClearable:o[2]}];var a=o[3];function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s()),e.$on("change",o[9])),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&279?get_spread_update(r,[u&256&&get_spread_object(l[8]),u&17&&{value:l[4]&&l[4][l[0]]},u&2&&{options:_.compact(l[1])},u&4&&{isClearable:l[2]}]):{};if(u&8&&a!==(a=l[3])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s()),e.$on("change",l[9]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$4e(o,e,t){const n=["name","options","isClearable","selectFieldComponent"];let r=compute_rest_props(e,n),a;const s=createEventDispatcher();let{name:l}=e,{options:u}=e,{isClearable:d=!1}=e,{selectFieldComponent:f=SelectField}=e;const{values:m,setFieldValue:h}=getFormContext();component_subscribe(o,m,g=>t(4,a=g));const p=g=>{h(l,g.detail),s("change",g.detail)};return o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(8,r=compute_rest_props(e,n)),"name"in g&&t(0,l=g.name),"options"in g&&t(1,u=g.options),"isClearable"in g&&t(2,d=g.isClearable),"selectFieldComponent"in g&&t(3,f=g.selectFieldComponent)},[l,u,d,f,a,s,m,h,r,p]}class FormSelectFieldRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$4e,create_fragment$4g,safe_not_equal,{name:0,options:1,isClearable:2,selectFieldComponent:3})}}function create_fragment$4f(o){let e,t;return e=new FormSelectFieldRaw({props:{name:o[0],options:o[1](),isNative:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.name=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4d(o,e,t){let{name:n}=e,{filterType:r}=e;function a(){switch(r){case"number":return[{value:"=",label:"eqals"},{value:"<>",label:"does not equal"},{value:"<",label:"is smaller"},{value:">",label:"is greater"},{value:"<=",label:"is smaller or equal"},{value:">=",label:"is greater or equal"},{value:"NULL",label:"is NULL"},{value:"NOT NULL",label:"is not NULL"},{value:"sql",label:"SQL condition"},{value:"sqlRight",label:"SQL condition - right side only"}];case"string":return[{value:"+",label:"contains"},{value:"~",label:"does not contain"},{value:"^",label:"begins with"},{value:"!^",label:"does not begin with"},{value:"$",label:"ends with"},{value:"!$",label:"does not end with"},{value:"=",label:"equals"},{value:"<>",label:"does not equal"},{value:"<",label:"is smaller"},{value:">",label:"is greater"},{value:"<=",label:"is smaller or equal"},{value:">=",label:"is greater or equal"},{value:"NULL",label:"is NULL"},{value:"NOT NULL",label:"is not NULL"},{value:"sql",label:"SQL condition"},{value:"sqlRight",label:"SQL condition - right side only"}];case"datetime":return[{value:"=",label:"eqals"},{value:"<>",label:"does not equal"},{value:"<",label:"is before"},{value:">",label:"is after"},{value:"<=",label:"is before or equal"},{value:">=",label:"is after or equal"},{value:"NULL",label:"is NULL"},{value:"NOT NULL",label:"is not NULL"},{value:"sql",label:"SQL condition"},{value:"sqlRight",label:"SQL condition - right side only"}];case"mongo":return[{value:"=",label:"eqals"},{value:"<>",label:"does not equal"},{value:"<",label:"is smaller"},{value:">",label:"is greater"},{value:"<=",label:"is smaller or equal"},{value:">=",label:"is greater or equal"},{value:"+",label:"contains"},{value:"~",label:"does not contain"},{value:"^",label:"begins with"},{value:"!^",label:"does not begin with"},{value:"$",label:"ends with"},{value:"!$",label:"does not end with"},{value:"EXISTS",label:"field exists"},{value:"NOT EXISTS",label:"field does not exist"}];case"eval":return[{value:"=",label:"eqals"},{value:"<>",label:"does not equal"},{value:"<",label:"is smaller"},{value:">",label:"is greater"},{value:"<=",label:"is smaller or equal"},{value:">=",label:"is greater or equal"},{value:"+",label:"contains"},{value:"~",label:"does not contain"},{value:"^",label:"begins with"},{value:"!^",label:"does not begin with"},{value:"$",label:"ends with"},{value:"!$",label:"does not end with"},{value:"NULL",label:"is NULL"},{value:"NOT NULL",label:"is not NULL"}]}}return o.$$set=s=>{"name"in s&&t(0,n=s.name),"filterType"in s&&t(2,r=s.filterType)},[n,a,r]}class SetFilterModal_Select extends SvelteComponent{constructor(e){super(),init(this,e,instance$4d,create_fragment$4f,safe_not_equal,{name:0,filterType:2})}}const SetFilterModal_Select$1=Object.freeze(Object.defineProperty({__proto__:null,default:SetFilterModal_Select},Symbol.toStringTag,{value:"Module"}));function create_fragment$4e(o){let e,t,n,r,a,s,l,u;return{c(){e=element("div"),t=element("input"),r=space(),a=element("span"),s=text(o[2]),attr(t,"type","radio"),attr(t,"name",o[0]),t.checked=n=o[3][o[0]]==o[1]},m(d,f){insert(d,e,f),append(e,t),append(e,r),append(e,a),append(a,s),l||(u=[listen(t,"click",o[6]),listen(a,"click",o[7])],l=!0)},p(d,[f]){f&1&&attr(t,"name",d[0]),f&11&&n!==(n=d[3][d[0]]==d[1])&&(t.checked=n),f&4&&set_data(s,d[2])},i:noop$1,o:noop$1,d(d){d&&detach(e),l=!1,run_all(u)}}}function instance$4c(o,e,t){let n,{name:r}=e,{value:a}=e,{text:s}=e;const{values:l,setFieldValue:u}=getFormContext();component_subscribe(o,l,m=>t(3,n=m));const d=()=>u(r,a),f=()=>u(r,a);return o.$$set=m=>{"name"in m&&t(0,r=m.name),"value"in m&&t(1,a=m.value),"text"in m&&t(2,s=m.text)},[r,a,s,n,l,u,d,f]}class FormRadioGroupItem extends SvelteComponent{constructor(e){super(),init(this,e,instance$4c,create_fragment$4e,safe_not_equal,{name:0,value:1,text:2})}}const get_default_slot_changes=o=>({values:o&1}),get_default_slot_context=o=>({values:o[0]});function create_fragment$4d(o){let e;const t=o[3].default,n=create_slot(t,o,o[2],get_default_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,[a]){n&&n.p&&(!e||a&5)&&update_slot_base(n,t,r,r[2],e?get_slot_changes(t,r[2],a,get_default_slot_changes):get_all_dirty_from_scope(r[2]),get_default_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function instance$4b(o,e,t){let n,{$$slots:r={},$$scope:a}=e;const{values:s}=getFormContext();return component_subscribe(o,s,l=>t(0,n=l)),o.$$set=l=>{"$$scope"in l&&t(2,a=l.$$scope)},[n,s,a,r]}class FormValues extends SvelteComponent{constructor(e){super(),init(this,e,instance$4b,create_fragment$4d,safe_not_equal,{})}}const SetFilterModal_svelte_svelte_type_style_lang="";function create_if_block_1$11(o){let e,t;return e=new FormTextFieldRaw({props:{name:"value1",focused:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$i(o){let e=o[2](o[7].condition1),t,n,r=e&&create_if_block_1$11();return{c(){r&&r.c(),t=empty()},m(a,s){r&&r.m(a,s),insert(a,t,s),n=!0},p(a,s){s&128&&(e=a[2](a[7].condition1)),e?r?s&128&&transition_in(r,1):(r=create_if_block_1$11(),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r&&r.d(a)}}}function create_if_block$1N(o){let e,t;return e=new FormTextFieldRaw({props:{name:"value2"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$n(o){let e=o[2](o[7].condition2),t,n,r=e&&create_if_block$1N();return{c(){r&&r.c(),t=empty()},m(a,s){r&&r.m(a,s),insert(a,t,s),n=!0},p(a,s){s&128&&(e=a[2](a[7].condition2)),e?r?s&128&&transition_in(r,1):(r=create_if_block$1N(),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r&&r.d(a)}}}function create_default_slot_1$R(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T;return s=new SetFilterModal_Select({props:{filterType:o[1],name:"condition1"}}),d=new FormValues({props:{$$slots:{default:[create_default_slot_3$i,({values:$})=>({7:$}),({values:$})=>$?128:0]},$$scope:{ctx:o}}}),h=new FormRadioGroupItem({props:{name:"joinOperator",value:" ",text:"And"}}),g=new FormRadioGroupItem({props:{name:"joinOperator",value:",",text:"Or"}}),C=new SetFilterModal_Select({props:{filterType:o[1],name:"condition2"}}),k=new FormValues({props:{$$slots:{default:[create_default_slot_2$n,({values:$})=>({7:$}),({values:$})=>$?128:0]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=element("div"),t.textContent="Show rows where",n=space(),r=element("div"),a=element("div"),create_component(s.$$.fragment),l=space(),u=element("div"),create_component(d.$$.fragment),f=space(),m=element("div"),create_component(h.$$.fragment),p=space(),create_component(g.$$.fragment),b=space(),v=element("div"),y=element("div"),create_component(C.$$.fragment),E=space(),A=element("div"),create_component(k.$$.fragment),attr(t,"class","row svelte-10d5vjg"),attr(a,"class","col-6 mr-1"),attr(u,"class","col-6 mr-1"),attr(r,"class","row svelte-10d5vjg"),attr(m,"class","row svelte-10d5vjg"),attr(y,"class","col-6 mr-1"),attr(A,"class","col-6 mr-1"),attr(v,"class","row svelte-10d5vjg"),attr(e,"class","largeFormMarker")},m($,S){insert($,e,S),append(e,t),append(e,n),append(e,r),append(r,a),mount_component(s,a,null),append(r,l),append(r,u),mount_component(d,u,null),append(e,f),append(e,m),mount_component(h,m,null),append(m,p),mount_component(g,m,null),append(e,b),append(e,v),append(v,y),mount_component(C,y,null),append(v,E),append(v,A),mount_component(k,A,null),T=!0},p($,S){const I={};S&2&&(I.filterType=$[1]),s.$set(I);const R={};S&384&&(R.$$scope={dirty:S,ctx:$}),d.$set(R);const N={};S&2&&(N.filterType=$[1]),C.$set(N);const M={};S&384&&(M.$$scope={dirty:S,ctx:$}),k.$set(M)},i($){T||(transition_in(s.$$.fragment,$),transition_in(d.$$.fragment,$),transition_in(h.$$.fragment,$),transition_in(g.$$.fragment,$),transition_in(C.$$.fragment,$),transition_in(k.$$.fragment,$),T=!0)},o($){transition_out(s.$$.fragment,$),transition_out(d.$$.fragment,$),transition_out(h.$$.fragment,$),transition_out(g.$$.fragment,$),transition_out(C.$$.fragment,$),transition_out(k.$$.fragment,$),T=!1},d($){$&&detach(e),destroy_component(s),destroy_component(d),destroy_component(h),destroy_component(g),destroy_component(C),destroy_component(k)}}}function create_header_slot$s(o){let e;return{c(){e=element("div"),e.textContent="Set filter",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$r(o){let e,t,n,r,a;return t=new FormSubmit({props:{value:"OK"}}),t.$on("click",o[3]),r=new FormButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"slot","footer")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p:noop$1,i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_default_slot$1y(o){let e,t;const n=[o[4]];let r={$$slots:{footer:[create_footer_slot$r],header:[create_header_slot$s],default:[create_default_slot_1$R]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&258&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$4c(o){let e,t;return e=new FormProvider({props:{initialValues:{condition1:o[0],condition2:"=",joinOperator:" "},template:FormFieldTemplateLarge,$$slots:{default:[create_default_slot$1y]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.initialValues={condition1:n[0],condition2:"=",joinOperator:" "}),r&274&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$4a(o,e,t){const n=["condition1","onFilter","filterType"];let r=compute_rest_props(e,n),{condition1:a}=e,{onFilter:s}=e,{filterType:l}=e;const u=m=>m!="NULL"&&m!="NOT NULL"&&m!="EXISTS"&&m!="NOT EXISTS",d=(m,h)=>u(m)?h?m=="sql"?`{${h}}`:m=="sqlRight"?`{$$ ${h}}`:l=="string"?`${m}"${h}"`:`${m}${h}`:null:m,f=m=>{const h=m.detail,{value1:p,condition1:g,value2:b,condition2:v,joinOperator:y}=h,C=d(g,p),E=d(v,b);C&&E?s(`${C}${y}${E}`):C?s(C):E&&s(E),closeCurrentModal()};return o.$$set=m=>{e=assign(assign({},e),exclude_internal_props(m)),t(4,r=compute_rest_props(e,n)),"condition1"in m&&t(0,a=m.condition1),"onFilter"in m&&t(5,s=m.onFilter),"filterType"in m&&t(1,l=m.filterType)},[a,l,u,f,r,s]}class SetFilterModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$4a,create_fragment$4c,safe_not_equal,{condition1:0,onFilter:5,filterType:1})}}const SetFilterModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:SetFilterModal},Symbol.toStringTag,{value:"Module"}));function create_default_slot$1x(o){let e,t;return e=new FontIcon({props:{icon:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.icon=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$4b(o){let e,t,n={square:!0,narrow:o[1],$$slots:{default:[create_default_slot$1x]},$$scope:{ctx:o}};return e=new InlineButton({props:n}),o[5](e),e.$on("click",o[3]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,[a]){const s={};a&2&&(s.narrow=r[1]),a&65&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[5](null),destroy_component(e,r)}}}function instance$49(o,e,t){let{icon:n="icon chevron-down"}=e,{menu:r}=e,{narrow:a=!1}=e,s;function l(){const d=s.getBoundingClientRect(),f=d.left,m=d.bottom;currentDropDownMenu.set({left:f,top:m,items:r})}function u(d){binding_callbacks[d?"unshift":"push"](()=>{s=d,t(2,s)})}return o.$$set=d=>{"icon"in d&&t(0,n=d.icon),"menu"in d&&t(4,r=d.menu),"narrow"in d&&t(1,a=d.narrow)},[n,a,s,l,r,u]}class DropDownButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$49,create_fragment$4b,safe_not_equal,{icon:0,menu:4,narrow:1})}}const TableControl_svelte_svelte_type_style_lang="";function get_each_context$D(o,e,t){const n=o.slice();return n[18]=e[t],n[20]=t,n}function get_each_context_1$a(o,e,t){const n=o.slice();n[21]=e[t];const r={...n[21].props,...n[21].getProps?n[21].getProps(n[18]):null};return n[22]=r,n}const get__9_slot_spread_changes=o=>o&260,get__9_slot_changes=o=>({row:o&4,col:o&256}),get__9_slot_context=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__8_slot_spread_changes=o=>o&260,get__8_slot_changes=o=>({row:o&4,col:o&256}),get__8_slot_context=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__7_slot_spread_changes=o=>o&260,get__7_slot_changes$4=o=>({row:o&4,col:o&256}),get__7_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__6_slot_spread_changes=o=>o&260,get__6_slot_changes$4=o=>({row:o&4,col:o&256}),get__6_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__5_slot_spread_changes=o=>o&260,get__5_slot_changes$4=o=>({row:o&4,col:o&256}),get__5_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__4_slot_spread_changes=o=>o&260,get__4_slot_changes$4=o=>({row:o&4,col:o&256}),get__4_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__3_slot_spread_changes=o=>o&260,get__3_slot_changes$4=o=>({row:o&4,col:o&256}),get__3_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__2_slot_spread_changes=o=>o&260,get__2_slot_changes$4=o=>({row:o&4,col:o&256}),get__2_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__1_slot_spread_changes=o=>o&260,get__1_slot_changes_1$1=o=>({row:o&4,col:o&256}),get__1_slot_context_1$1=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__0_slot_spread_changes=o=>o&260,get__0_slot_changes$4=o=>({row:o&4,col:o&256}),get__0_slot_context$4=o=>({row:o[18],col:o[21],index:o[20],...o[22]}),get__1_slot_changes$4=o=>({row:o&4,col:o&256}),get__1_slot_context$4=o=>({row:o[18],col:o[21],index:o[20]});function get_each_context_2$4(o,e,t){const n=o.slice();return n[21]=e[t],n}function create_each_block_2$4(o){let e,t=(o[21].header||"")+"",n;return{c(){e=element("td"),n=text(t),attr(e,"class","svelte-1ug7ecw")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&256&&t!==(t=(r[21].header||"")+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_else_block$M(o){let e=(o[18][o[21].fieldName]||"")+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&260&&e!==(e=(n[18][n[21].fieldName]||"")+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_3$z(o){let e,t,n,r;const a=[create_if_block_4$s,create_if_block_5$k,create_if_block_6$c,create_if_block_7$8,create_if_block_8$7,create_if_block_9$7,create_if_block_10$6,create_if_block_11$6,create_if_block_12$5,create_if_block_13$5,create_if_block_14$3],s=[];function l(u,d){return u[21].slot==-1?0:u[21].slot==0?1:u[21].slot==1?2:u[21].slot==2?3:u[21].slot==3?4:u[21].slot==4?5:u[21].slot==5?6:u[21].slot==6?7:u[21].slot==7?8:u[21].slot==8?9:u[21].slot==9?10:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function create_if_block_2$N(o){let e=o[21].formatter(o[18])+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&260&&e!==(e=n[21].formatter(n[18])+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_1$10(o){let e,t,n;const r=[o[22]];var a=o[21].component;function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s())),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&260?get_spread_update(r,[get_spread_object(l[22])]):{};if(u&256&&a!==(a=l[21].component)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_if_block_14$3(o){let e;const t=o[14][9],n=create_slot(t,o,o[13],get__9_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__9_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__9_slot_changes),get__9_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_13$5(o){let e;const t=o[14][8],n=create_slot(t,o,o[13],get__8_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__8_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__8_slot_changes),get__8_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_12$5(o){let e;const t=o[14][7],n=create_slot(t,o,o[13],get__7_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__7_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__7_slot_changes$4),get__7_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_11$6(o){let e;const t=o[14][6],n=create_slot(t,o,o[13],get__6_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__6_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__6_slot_changes$4),get__6_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_10$6(o){let e;const t=o[14][5],n=create_slot(t,o,o[13],get__5_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__5_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__5_slot_changes$4),get__5_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_9$7(o){let e;const t=o[14][4],n=create_slot(t,o,o[13],get__4_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__4_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__4_slot_changes$4),get__4_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_8$7(o){let e;const t=o[14][3],n=create_slot(t,o,o[13],get__3_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__3_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__3_slot_changes$4),get__3_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_7$8(o){let e;const t=o[14][2],n=create_slot(t,o,o[13],get__2_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__2_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__2_slot_changes$4),get__2_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_6$c(o){let e;const t=o[14][1],n=create_slot(t,o,o[13],get__1_slot_context_1$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__1_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__1_slot_changes_1$1),get__1_slot_context_1$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_5$k(o){let e;const t=o[14][0],n=create_slot(t,o,o[13],get__0_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],get__0_slot_spread_changes(a)||!e?get_all_dirty_from_scope(r[13]):get_slot_changes(t,r[13],a,get__0_slot_changes$4),get__0_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_4$s(o){let e;const t=o[14][-1],n=create_slot(t,o,o[13],get__1_slot_context$4);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&8452)&&update_slot_base(n,t,r,r[13],e?get_slot_changes(t,r[13],a,get__1_slot_changes$4):get_all_dirty_from_scope(r[13]),get__1_slot_context$4)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_each_block_1$a(o){let e,t,n,r;const a=[create_if_block_1$10,create_if_block_2$N,create_if_block_3$z,create_else_block$M],s=[];function l(u,d){return u[21].component?0:u[21].formatter?1:u[21].slot!=null?2:3}return t=l(o),n=s[t]=a[t](o),{c(){e=element("td"),n.c(),attr(e,"class","svelte-1ug7ecw"),toggle_class(e,"isHighlighted",o[21].isHighlighted&&o[21].isHighlighted(o[18])),toggle_class(e,"noCellPadding",o[7])},m(u,d){insert(u,e,d),s[t].m(e,null),r=!0},p(u,d){let f=t;t=l(u),t===f?s[t].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),n=s[t],n?n.p(u,d):(n=s[t]=a[t](u),n.c()),transition_in(n,1),n.m(e,null)),(!r||d&260)&&toggle_class(e,"isHighlighted",u[21].isHighlighted&&u[21].isHighlighted(u[18])),(!r||d&128)&&toggle_class(e,"noCellPadding",u[7])},i(u){r||(transition_in(n),r=!0)},o(u){transition_out(n),r=!1},d(u){u&&detach(e),s[t].d()}}}function create_each_block$D(o){let e,t,n,r,a=ensure_array_like(o[8]),s=[];for(let d=0;d<a.length;d+=1)s[d]=create_each_block_1$a(get_each_context_1$a(o,a,d));const l=d=>transition_out(s[d],1,1,()=>{s[d]=null});function u(){return o[16](o[20],o[18])}return{c(){e=element("tr");for(let d=0;d<s.length;d+=1)s[d].c();attr(e,"class","svelte-1ug7ecw"),toggle_class(e,"selected",o[3]&&o[0]==o[20]),toggle_class(e,"clickable",o[4])},m(d,f){insert(d,e,f);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(e,null);t=!0,n||(r=listen(e,"click",u),n=!0)},p(d,f){if(o=d,f&8580){a=ensure_array_like(o[8]);let m;for(m=0;m<a.length;m+=1){const h=get_each_context_1$a(o,a,m);s[m]?(s[m].p(h,f),transition_in(s[m],1)):(s[m]=create_each_block_1$a(h),s[m].c(),transition_in(s[m],1),s[m].m(e,null))}for(group_outros(),m=a.length;m<s.length;m+=1)l(m);check_outros()}(!t||f&9)&&toggle_class(e,"selected",o[3]&&o[0]==o[20]),(!t||f&16)&&toggle_class(e,"clickable",o[4])},i(d){if(!t){for(let f=0;f<a.length;f+=1)transition_in(s[f]);t=!0}},o(d){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)transition_out(s[f]);t=!1},d(d){d&&detach(e),destroy_each(s,d),n=!1,r()}}}function create_if_block$1M(o){let e,t,n,r;return{c(){e=element("tr"),t=element("td"),n=text(o[6]),attr(t,"colspan",r=o[8].length),attr(t,"class","svelte-1ug7ecw"),attr(e,"class","svelte-1ug7ecw")},m(a,s){insert(a,e,s),append(e,t),append(t,n)},p(a,s){s&64&&set_data(n,a[6]),s&256&&r!==(r=a[8].length)&&attr(t,"colspan",r)},d(a){a&&detach(e)}}}function create_fragment$4a(o){let e,t,n,r,a,s,l,u,d,f,m=ensure_array_like(o[8]),h=[];for(let y=0;y<m.length;y+=1)h[y]=create_each_block_2$4(get_each_context_2$4(o,m,y));let p=ensure_array_like(o[2]),g=[];for(let y=0;y<p.length;y+=1)g[y]=create_each_block$D(get_each_context$D(o,p,y));const b=y=>transition_out(g[y],1,1,()=>{g[y]=null});let v=o[6]&&o[2].length==0&&create_if_block$1M(o);return{c(){e=element("table"),t=element("thead"),n=element("tr");for(let y=0;y<h.length;y+=1)h[y].c();r=space(),a=element("tbody");for(let y=0;y<g.length;y+=1)g[y].c();s=space(),v&&v.c(),attr(t,"class","svelte-1ug7ecw"),attr(a,"class","svelte-1ug7ecw"),attr(e,"tabindex",l=o[3]?-1:void 0),attr(e,"class","svelte-1ug7ecw"),toggle_class(e,"selectable",o[3]),toggle_class(e,"disableFocusOutline",o[5])},m(y,C){insert(y,e,C),append(e,t),append(t,n);for(let E=0;E<h.length;E+=1)h[E]&&h[E].m(n,null);append(e,r),append(e,a);for(let E=0;E<g.length;E+=1)g[E]&&g[E].m(a,null);append(a,s),v&&v.m(a,null),o[17](e),u=!0,d||(f=[listen(e,"keydown",o[15]),listen(e,"keydown",o[10])],d=!0)},p(y,[C]){if(C&256){m=ensure_array_like(y[8]);let E;for(E=0;E<m.length;E+=1){const A=get_each_context_2$4(y,m,E);h[E]?h[E].p(A,C):(h[E]=create_each_block_2$4(A),h[E].c(),h[E].m(n,null))}for(;E<h.length;E+=1)h[E].d(1);h.length=m.length}if(C&9119){p=ensure_array_like(y[2]);let E;for(E=0;E<p.length;E+=1){const A=get_each_context$D(y,p,E);g[E]?(g[E].p(A,C),transition_in(g[E],1)):(g[E]=create_each_block$D(A),g[E].c(),transition_in(g[E],1),g[E].m(a,s))}for(group_outros(),E=p.length;E<g.length;E+=1)b(E);check_outros()}y[6]&&y[2].length==0?v?v.p(y,C):(v=create_if_block$1M(y),v.c(),v.m(a,null)):v&&(v.d(1),v=null),(!u||C&8&&l!==(l=y[3]?-1:void 0))&&attr(e,"tabindex",l),(!u||C&8)&&toggle_class(e,"selectable",y[3]),(!u||C&32)&&toggle_class(e,"disableFocusOutline",y[5])},i(y){if(!u){for(let C=0;C<p.length;C+=1)transition_in(g[C]);u=!0}},o(y){g=g.filter(Boolean);for(let C=0;C<g.length;C+=1)transition_out(g[C]);u=!1},d(y){y&&detach(e),destroy_each(h,y),destroy_each(g,y),v&&v.d(),o[17](null),d=!1,run_all(f)}}}function instance$48(o,e,t){let n,{$$slots:r={},$$scope:a}=e,{columns:s}=e,{rows:l}=e,{focusOnCreate:u=!1}=e,{selectable:d=!1}=e,{selectedIndex:f=0}=e,{clickable:m=!1}=e,{disableFocusOutline:h=!1}=e,{emptyMessage:p=null}=e,{noCellPadding:g=!1}=e,{domTable:b=void 0}=e;const v=createEventDispatcher();onMount(()=>{u&&b.focus()});const y=k=>{k.keyCode==keycodes.downArrow&&t(0,f=Math.min(f+1,l.length-1)),k.keyCode==keycodes.upArrow&&t(0,f=Math.max(0,f-1))};function C(k){bubble.call(this,o,k)}const E=(k,T)=>{d&&(t(0,f=k),b.focus()),m&&v("clickrow",T)};function A(k){binding_callbacks[k?"unshift":"push"](()=>{b=k,t(1,b)})}return o.$$set=k=>{"columns"in k&&t(11,s=k.columns),"rows"in k&&t(2,l=k.rows),"focusOnCreate"in k&&t(12,u=k.focusOnCreate),"selectable"in k&&t(3,d=k.selectable),"selectedIndex"in k&&t(0,f=k.selectedIndex),"clickable"in k&&t(4,m=k.clickable),"disableFocusOutline"in k&&t(5,h=k.disableFocusOutline),"emptyMessage"in k&&t(6,p=k.emptyMessage),"noCellPadding"in k&&t(7,g=k.noCellPadding),"domTable"in k&&t(1,b=k.domTable),"$$scope"in k&&t(13,a=k.$$scope)},o.$$.update=()=>{o.$$.dirty&2048&&t(8,n=_.compact(_.flatten(s)))},[f,b,l,d,m,h,p,g,n,v,y,s,u,a,r,C,E,A]}class TableControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$48,create_fragment$4a,safe_not_equal,{columns:11,rows:2,focusOnCreate:12,selectable:3,selectedIndex:0,clickable:4,disableFocusOutline:5,emptyMessage:6,noCellPadding:7,domTable:1})}}async function saveDbToApp(o,e,t){if(t=="#new"){const n=await apiCall("apps/create-folder",{folder:e});return await apiCall("connections/update-database",{conid:o,database:e,values:{[`useApp:${n}`]:!0}}),n}return await apiCall("connections/update-database",{conid:o,database:e,values:{[`useApp:${t}`]:!0}}),t}function filterAppsForDatabase(o,e,t){const n=((o==null?void 0:o.databases)||[]).find(r=>r.name==e);return t==null?void 0:t.filter(r=>n&&n[`useApp:${r.name}`])}function checkDescriptionColumns(o,e){var t,n;return!(!(o!=null&&o.length)||!o.every(r=>e.columns.find(a=>a.columnName==r))||(n=(t=e.primaryKey)==null?void 0:t.columns)!=null&&n.find(r=>o.includes(r.columnName)))}function getDictionaryDescription(o,e,t,n,r,a=!1){const s=r==null?void 0:r.find(f=>f._id==e);if(!s)return null;const l=filterAppsForDatabase(s,t,n);if(!l)return null;const u=_.flatten(l.map(f=>f.dictionaryDescriptions||[])).find(f=>f.pureName==o.pureName&&f.schemaName==o.schemaName);if(u&&(a||checkDescriptionColumns(u.columns,o)))return u;const d=o.columns.find(f=>{var m,h;return(h=(m=f==null?void 0:f.dataType)==null?void 0:m.toLowerCase())==null?void 0:h.includes("char")});return d?{columns:[d.columnName],delimiter:null,expression:d.columnName}:null}function parseDelimitedColumnList(o){return _.compact((o||"").split(",").map(e=>e.trim()))}function checkDescriptionExpression(o,e){return!o||!e?!1:checkDescriptionColumns(parseDelimitedColumnList(o),e)}function changeDelimitedColumnList(o,e,t){const n=parseDelimitedColumnList(o);return n.includes(e)==t?o:(t?n.push(e):_.remove(n,a=>a==e),n.join(","))}async function saveDictionaryDescription(o,e,t,n,r,a){const s=await saveDbToApp(e,t,a);await apiCall("apps/save-dictionary-description",{appFolder:s,schemaName:o.schemaName,pureName:o.pureName,columns:parseDelimitedColumnList(n),expression:n,delimiter:r})}function create_default_slot$1w(o){let e,t;const n=[{name:o[1]},o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectFieldRaw({props:r}),e.$on("change",o[5]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&18?get_spread_update(n,[s&2&&{name:a[1]},s&16&&get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$49(o){let e,t,n;const r=[{type:"select"},{label:o[0]},o[2]];var a=o[3];function s(l){let u={$$slots:{default:[create_default_slot$1w]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&5?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&get_spread_object(l[2])]):{};if(u&82&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[3])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$47(o,e,t){const n=["label","name","templateProps"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{templateProps:l={}}=e;const{template:u}=getFormContext();function d(f){bubble.call(this,o,f)}return o.$$set=f=>{e=assign(assign({},e),exclude_internal_props(f)),t(4,r=compute_rest_props(e,n)),"label"in f&&t(0,a=f.label),"name"in f&&t(1,s=f.name),"templateProps"in f&&t(2,l=f.templateProps)},[a,s,l,u,r,d]}class FormSelectField extends SvelteComponent{constructor(e){super(),init(this,e,instance$47,create_fragment$49,safe_not_equal,{label:0,name:1,templateProps:2})}}function create_fragment$48(o){let e,t;const n=[{isNative:!0},o[5],{value:o[0]},{options:[{label:"(New application linked to current DB)",value:"#new"},...(o[1]||[]).map(func$h)]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new SelectField({props:r}),e.$on("change",o[9]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&35?get_spread_update(n,[n[0],s&32&&get_spread_object(a[5]),s&1&&{value:a[0]},s&2&&{options:[{label:"(New application linked to current DB)",value:"#new"},...(a[1]||[]).map(func$h)]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}const func$h=o=>({label:o.name,value:o.name});function instance$46(o,e,t){let n,r;const a=["value","disableInitialize"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(n,C=>t(1,l=C)),n),f,m=noop$1,h=()=>(m(),m=subscribe(r,C=>t(7,f=C)),r),p;component_subscribe(o,currentDatabase,C=>t(8,p=C)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>m());let{value:g="#new"}=e,{disableInitialize:b=!1}=e;const v=createEventDispatcher(),y=C=>{t(0,g=C.detail),v("change",g)};return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(5,s=compute_rest_props(e,a)),"value"in C&&t(0,g=C.value),"disableInitialize"in C&&t(6,b=C.disableInitialize)},o.$$.update=()=>{if(o.$$.dirty&451&&!b&&g=="#new"&&p){const C=filterAppsForDatabase(p.connection,p.name,f||[]),E=_.intersection((l||[]).map(A=>A.name),C.map(A=>A.name));E.length>0&&(t(0,g=E[0]),v("change",g))}},d(t(3,n=useAppFolders())),h(t(2,r=useUsedApps())),[g,l,r,n,v,s,b,f,p,y]}class TargetApplicationSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$46,create_fragment$48,safe_not_equal,{value:0,disableInitialize:6})}}const DefineDictionaryDescriptionModal_svelte_svelte_type_style_lang="";function create__1_slot$t(o){let e,t,n,r,a;function s(...u){return o[19](o[22],...u)}function l(...u){return o[20](o[22],...u)}return{c(){var u,d,f;e=element("input"),attr(e,"type","checkbox"),attr(e,"slot","1"),e.disabled=t=(f=(d=(u=o[4])==null?void 0:u.primaryKey)==null?void 0:d.columns)==null?void 0:f.find(s),e.checked=n=parseDelimitedColumnList(o[3].columns).includes(o[22].columnName)},m(u,d){insert(u,e,d),r||(a=listen(e,"change",l),r=!0)},p(u,d){var f,m,h;o=u,d&4194320&&t!==(t=(h=(m=(f=o[4])==null?void 0:f.primaryKey)==null?void 0:m.columns)==null?void 0:h.find(s))&&(e.disabled=t),d&4194312&&n!==(n=parseDelimitedColumnList(o[3].columns).includes(o[22].columnName))&&(e.checked=n)},d(u){u&&detach(e),r=!1,a()}}}function create_default_slot_1$Q(o){var f;let e,t,n,r,a,s,l,u,d;return t=new TableControl({props:{rows:((f=o[4])==null?void 0:f.columns)||[],columns:[{fieldName:"checked",header:"",slot:1},{fieldName:"columnName",header:"Column"},{fieldName:"dataType",header:"Data type"}],$$slots:{1:[create__1_slot$t,({row:m})=>({22:m}),({row:m})=>m?4194304:0]},$$scope:{ctx:o}}}),r=new FormTextField({props:{name:"columns",label:"Show columns"}}),s=new FormTextField({props:{name:"delimiter",label:"Delimiter"}}),u=new FormSelectField({props:{label:"Target application",name:"targetApplication",disableInitialize:!0,selectFieldComponent:TargetApplicationSelect}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),attr(e,"class","wrapper svelte-y6l14f")},m(m,h){insert(m,e,h),mount_component(t,e,null),insert(m,n,h),mount_component(r,m,h),insert(m,a,h),mount_component(s,m,h),insert(m,l,h),mount_component(u,m,h),d=!0},p(m,h){var g;const p={};h&16&&(p.rows=((g=m[4])==null?void 0:g.columns)||[]),h&12582936&&(p.$$scope={dirty:h,ctx:m}),t.$set(p)},i(m){d||(transition_in(t.$$.fragment,m),transition_in(r.$$.fragment,m),transition_in(s.$$.fragment,m),transition_in(u.$$.fragment,m),d=!0)},o(m){transition_out(t.$$.fragment,m),transition_out(r.$$.fragment,m),transition_out(s.$$.fragment,m),transition_out(u.$$.fragment,m),d=!1},d(m){m&&(detach(e),detach(n),detach(a),detach(l)),destroy_component(t),destroy_component(r,m),destroy_component(s,m),destroy_component(u,m)}}}function create_header_slot$r(o){let e;return{c(){e=text("Define description")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$q(o){var a;let e,t,n,r;return e=new FormSubmit({props:{value:"OK",disabled:!checkDescriptionExpression((a=o[3])==null?void 0:a.columns,o[4])}}),e.$on("click",o[18]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(s,l){mount_component(e,s,l),insert(s,t,l),mount_component(n,s,l),r=!0},p(s,l){var d;const u={};l&24&&(u.disabled=!checkDescriptionExpression((d=s[3])==null?void 0:d.columns,s[4])),e.$set(u)},i(s){r||(transition_in(e.$$.fragment,s),transition_in(n.$$.fragment,s),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(n.$$.fragment,s),r=!1},d(s){s&&detach(t),destroy_component(e,s),destroy_component(n,s)}}}function create_default_slot$1v(o){let e,t;const n=[o[10]];let r={$$slots:{footer:[create_footer_slot$q],header:[create_header_slot$r],default:[create_default_slot_1$Q]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&1024?get_spread_update(n,[get_spread_object(a[10])]):{};s&8388639&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$47(o){let e,t;return e=new FormProviderCore({props:{values:o[9],$$slots:{default:[create_default_slot$1v]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&8389663&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$45(o,e,t){let n,r,a,s,l;const u=["conid","database","pureName","schemaName","onConfirm"];let d=compute_rest_props(e,u),f,m,h=noop$1,p=()=>(h(),h=subscribe(a,U=>t(14,m=U)),a),g,b=noop$1,v=()=>(b(),b=subscribe(r,U=>t(15,g=U)),r),y,C,E=noop$1,A=()=>(E(),E=subscribe(s,U=>t(17,C=U)),s),k,T=noop$1,$=()=>(T(),T=subscribe(n,U=>t(4,k=U)),n);component_subscribe(o,currentDatabase,U=>t(16,y=U)),o.$$.on_destroy.push(()=>h()),o.$$.on_destroy.push(()=>b()),o.$$.on_destroy.push(()=>E()),o.$$.on_destroy.push(()=>T());let{conid:S}=e,{database:I}=e,{pureName:R}=e,{schemaName:N}=e,{onConfirm:M}=e;const F=writable({targetApplication:"#new"});component_subscribe(o,F,U=>t(3,f=U));function D(U){set_store_value(F,f={targetApplication:f.targetApplication,columns:U.expression,delimiter:U.delimiter},f)}const x=()=>{closeCurrentModal(),saveDictionaryDescription(k,S,I,f.columns,f.delimiter,f.targetApplication),M()},B=(U,G)=>G.columnName==U.columnName,K=(U,G)=>{set_store_value(F,f={...f,columns:changeDelimitedColumnList(f.columns,U.columnName,G.target.checked)},f)};return o.$$set=U=>{e=assign(assign({},e),exclude_internal_props(U)),t(10,d=compute_rest_props(e,u)),"conid"in U&&t(0,S=U.conid),"database"in U&&t(1,I=U.database),"pureName"in U&&t(11,R=U.pureName),"schemaName"in U&&t(12,N=U.schemaName),"onConfirm"in U&&t(2,M=U.onConfirm)},o.$$.update=()=>{if(o.$$.dirty&6147&&$(t(8,n=useTableInfo({conid:S,database:I,schemaName:N,pureName:R}))),o.$$.dirty&163859&&t(13,l=getDictionaryDescription(k,S,I,g,C,!0)),o.$$.dirty&8192&&l&&D(l),o.$$.dirty&114696&&f.targetApplication=="#new"&&y){const U=filterAppsForDatabase(y.connection,y.name,g||[]),G=_.intersection((m||[]).map(W=>W.name),U.map(W=>W.name));G.length>0&&set_store_value(F,f=Object.assign(Object.assign({},f),{targetApplication:G[0]}),f)}},v(t(7,r=useUsedApps())),p(t(6,a=useAppFolders())),A(t(5,s=useConnectionList())),[S,I,M,f,k,s,a,r,n,F,d,R,N,l,m,g,y,C,x,B,K]}class DefineDictionaryDescriptionModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$45,create_fragment$47,safe_not_equal,{conid:0,database:1,pureName:11,schemaName:12,onConfirm:2})}}const DefineDictionaryDescriptionModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:DefineDictionaryDescriptionModal},Symbol.toStringTag,{value:"Module"}));var MapShim=function(){if(typeof Map<"u")return Map;function o(e,t){var n=-1;return e.some(function(r,a){return r[0]===t?(n=a,!0):!1}),n}return function(){function e(){this.__entries__=[]}return Object.defineProperty(e.prototype,"size",{get:function(){return this.__entries__.length},enumerable:!0,configurable:!0}),e.prototype.get=function(t){var n=o(this.__entries__,t),r=this.__entries__[n];return r&&r[1]},e.prototype.set=function(t,n){var r=o(this.__entries__,t);~r?this.__entries__[r][1]=n:this.__entries__.push([t,n])},e.prototype.delete=function(t){var n=this.__entries__,r=o(n,t);~r&&n.splice(r,1)},e.prototype.has=function(t){return!!~o(this.__entries__,t)},e.prototype.clear=function(){this.__entries__.splice(0)},e.prototype.forEach=function(t,n){n===void 0&&(n=null);for(var r=0,a=this.__entries__;r<a.length;r++){var s=a[r];t.call(n,s[1],s[0])}},e}()}(),isBrowser=typeof window<"u"&&typeof document<"u"&&window.document===document,global$1=function(){return typeof global<"u"&&global.Math===Math?global:typeof self<"u"&&self.Math===Math?self:typeof window<"u"&&window.Math===Math?window:Function("return this")()}(),requestAnimationFrame$1=function(){return typeof requestAnimationFrame=="function"?requestAnimationFrame.bind(global$1):function(o){return setTimeout(function(){return o(Date.now())},1e3/60)}}(),trailingTimeout=2;function throttle(o,e){var t=!1,n=!1,r=0;function a(){t&&(t=!1,o()),n&&l()}function s(){requestAnimationFrame$1(a)}function l(){var u=Date.now();if(t){if(u-r<trailingTimeout)return;n=!0}else t=!0,n=!1,setTimeout(s,e);r=u}return l}var REFRESH_DELAY=20,transitionKeys=["top","right","bottom","left","width","height","size","weight"],mutationObserverSupported=typeof MutationObserver<"u",ResizeObserverController=function(){function o(){this.connected_=!1,this.mutationEventsAdded_=!1,this.mutationsObserver_=null,this.observers_=[],this.onTransitionEnd_=this.onTransitionEnd_.bind(this),this.refresh=throttle(this.refresh.bind(this),REFRESH_DELAY)}return o.prototype.addObserver=function(e){~this.observers_.indexOf(e)||this.observers_.push(e),this.connected_||this.connect_()},o.prototype.removeObserver=function(e){var t=this.observers_,n=t.indexOf(e);~n&&t.splice(n,1),!t.length&&this.connected_&&this.disconnect_()},o.prototype.refresh=function(){var e=this.updateObservers_();e&&this.refresh()},o.prototype.updateObservers_=function(){var e=this.observers_.filter(function(t){return t.gatherActive(),t.hasActive()});return e.forEach(function(t){return t.broadcastActive()}),e.length>0},o.prototype.connect_=function(){!isBrowser||this.connected_||(document.addEventListener("transitionend",this.onTransitionEnd_),window.addEventListener("resize",this.refresh),mutationObserverSupported?(this.mutationsObserver_=new MutationObserver(this.refresh),this.mutationsObserver_.observe(document,{attributes:!0,childList:!0,characterData:!0,subtree:!0})):(document.addEventListener("DOMSubtreeModified",this.refresh),this.mutationEventsAdded_=!0),this.connected_=!0)},o.prototype.disconnect_=function(){!isBrowser||!this.connected_||(document.removeEventListener("transitionend",this.onTransitionEnd_),window.removeEventListener("resize",this.refresh),this.mutationsObserver_&&this.mutationsObserver_.disconnect(),this.mutationEventsAdded_&&document.removeEventListener("DOMSubtreeModified",this.refresh),this.mutationsObserver_=null,this.mutationEventsAdded_=!1,this.connected_=!1)},o.prototype.onTransitionEnd_=function(e){var t=e.propertyName,n=t===void 0?"":t,r=transitionKeys.some(function(a){return!!~n.indexOf(a)});r&&this.refresh()},o.getInstance=function(){return this.instance_||(this.instance_=new o),this.instance_},o.instance_=null,o}(),defineConfigurable=function(o,e){for(var t=0,n=Object.keys(e);t<n.length;t++){var r=n[t];Object.defineProperty(o,r,{value:e[r],enumerable:!1,writable:!1,configurable:!0})}return o},getWindowOf=function(o){var e=o&&o.ownerDocument&&o.ownerDocument.defaultView;return e||global$1},emptyRect=createRectInit(0,0,0,0);function toFloat(o){return parseFloat(o)||0}function getBordersSize(o){for(var e=[],t=1;t<arguments.length;t++)e[t-1]=arguments[t];return e.reduce(function(n,r){var a=o["border-"+r+"-width"];return n+toFloat(a)},0)}function getPaddings(o){for(var e=["top","right","bottom","left"],t={},n=0,r=e;n<r.length;n++){var a=r[n],s=o["padding-"+a];t[a]=toFloat(s)}return t}function getSVGContentRect(o){var e=o.getBBox();return createRectInit(0,0,e.width,e.height)}function getHTMLElementContentRect(o){var e=o.clientWidth,t=o.clientHeight;if(!e&&!t)return emptyRect;var n=getWindowOf(o).getComputedStyle(o),r=getPaddings(n),a=r.left+r.right,s=r.top+r.bottom,l=toFloat(n.width),u=toFloat(n.height);if(n.boxSizing==="border-box"&&(Math.round(l+a)!==e&&(l-=getBordersSize(n,"left","right")+a),Math.round(u+s)!==t&&(u-=getBordersSize(n,"top","bottom")+s)),!isDocumentElement(o)){var d=Math.round(l+a)-e,f=Math.round(u+s)-t;Math.abs(d)!==1&&(l-=d),Math.abs(f)!==1&&(u-=f)}return createRectInit(r.left,r.top,l,u)}var isSVGGraphicsElement=function(){return typeof SVGGraphicsElement<"u"?function(o){return o instanceof getWindowOf(o).SVGGraphicsElement}:function(o){return o instanceof getWindowOf(o).SVGElement&&typeof o.getBBox=="function"}}();function isDocumentElement(o){return o===getWindowOf(o).document.documentElement}function getContentRect(o){return isBrowser?isSVGGraphicsElement(o)?getSVGContentRect(o):getHTMLElementContentRect(o):emptyRect}function createReadOnlyRect(o){var e=o.x,t=o.y,n=o.width,r=o.height,a=typeof DOMRectReadOnly<"u"?DOMRectReadOnly:Object,s=Object.create(a.prototype);return defineConfigurable(s,{x:e,y:t,width:n,height:r,top:t,right:e+n,bottom:r+t,left:e}),s}function createRectInit(o,e,t,n){return{x:o,y:e,width:t,height:n}}var ResizeObservation=function(){function o(e){this.broadcastWidth=0,this.broadcastHeight=0,this.contentRect_=createRectInit(0,0,0,0),this.target=e}return o.prototype.isActive=function(){var e=getContentRect(this.target);return this.contentRect_=e,e.width!==this.broadcastWidth||e.height!==this.broadcastHeight},o.prototype.broadcastRect=function(){var e=this.contentRect_;return this.broadcastWidth=e.width,this.broadcastHeight=e.height,e},o}(),ResizeObserverEntry=function(){function o(e,t){var n=createReadOnlyRect(t);defineConfigurable(this,{target:e,contentRect:n})}return o}(),ResizeObserverSPI=function(){function o(e,t,n){if(this.activeObservations_=[],this.observations_=new MapShim,typeof e!="function")throw new TypeError("The callback provided as parameter 1 is not a function.");this.callback_=e,this.controller_=t,this.callbackCtx_=n}return o.prototype.observe=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)||(t.set(e,new ResizeObservation(e)),this.controller_.addObserver(this),this.controller_.refresh())}},o.prototype.unobserve=function(e){if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");if(!(typeof Element>"u"||!(Element instanceof Object))){if(!(e instanceof getWindowOf(e).Element))throw new TypeError('parameter 1 is not of type "Element".');var t=this.observations_;t.has(e)&&(t.delete(e),t.size||this.controller_.removeObserver(this))}},o.prototype.disconnect=function(){this.clearActive(),this.observations_.clear(),this.controller_.removeObserver(this)},o.prototype.gatherActive=function(){var e=this;this.clearActive(),this.observations_.forEach(function(t){t.isActive()&&e.activeObservations_.push(t)})},o.prototype.broadcastActive=function(){if(this.hasActive()){var e=this.callbackCtx_,t=this.activeObservations_.map(function(n){return new ResizeObserverEntry(n.target,n.broadcastRect())});this.callback_.call(e,t,e),this.clearActive()}},o.prototype.clearActive=function(){this.activeObservations_.splice(0)},o.prototype.hasActive=function(){return this.activeObservations_.length>0},o}(),observers=typeof WeakMap<"u"?new WeakMap:new MapShim,ResizeObserver$1=function(){function o(e){if(!(this instanceof o))throw new TypeError("Cannot call a class as a function.");if(!arguments.length)throw new TypeError("1 argument required, but only 0 present.");var t=ResizeObserverController.getInstance(),n=new ResizeObserverSPI(e,t,this);observers.set(this,n)}return o}();["observe","unobserve","disconnect"].forEach(function(o){ResizeObserver$1.prototype[o]=function(){var e;return(e=observers.get(this))[o].apply(e,arguments)}});var index$1=function(){return typeof global$1.ResizeObserver<"u"?global$1.ResizeObserver:ResizeObserver$1}();function resizeObserver(o,e){const t=()=>{const a=o.getBoundingClientRect();o.dispatchEvent(new CustomEvent("resize",{detail:{width:a.width,height:a.height}}))};let n=null;function r(){e&&!n&&(n=new index$1(()=>{t()}),n.observe(o)),!e&&n&&(n.disconnect(),n=null)}return r(),e&&t(),{destroy(){n&&(n.disconnect(),n=null)},update(a){e=a,r()}}}const ScrollableTableControl_svelte_svelte_type_style_lang="";function get_each_context$C(o,e,t){const n=o.slice();return n[29]=e[t],n[31]=t,n}function get_each_context_1$9(o,e,t){const n=o.slice();return n[32]=e[t],n}const get__7_slot_changes_1=o=>({row:o[0]&4}),get__7_slot_context_1=o=>({row:o[29],index:o[31]}),get__6_slot_changes_1=o=>({row:o[0]&4}),get__6_slot_context_1=o=>({row:o[29],index:o[31]}),get__5_slot_changes_1=o=>({row:o[0]&4}),get__5_slot_context_1=o=>({row:o[29],index:o[31]}),get__4_slot_changes_1=o=>({row:o[0]&4}),get__4_slot_context_1=o=>({row:o[29],index:o[31]}),get__3_slot_changes_1=o=>({row:o[0]&4}),get__3_slot_context_1=o=>({row:o[29],index:o[31]}),get__2_slot_changes_1=o=>({row:o[0]&4}),get__2_slot_context_1=o=>({row:o[29],index:o[31]}),get__1_slot_changes_3=o=>({row:o[0]&4}),get__1_slot_context_3=o=>({row:o[29],index:o[31]}),get__0_slot_changes_1=o=>({row:o[0]&4}),get__0_slot_context_1=o=>({row:o[29],index:o[31]}),get__1_slot_changes_2=o=>({row:o[0]&4}),get__1_slot_context_2=o=>({row:o[29],index:o[31]});function get_each_context_2$3(o,e,t){const n=o.slice();return n[32]=e[t],n}const get__7_slot_changes$3=o=>({}),get__7_slot_context$3=o=>({}),get__6_slot_changes$3=o=>({}),get__6_slot_context$3=o=>({}),get__5_slot_changes$3=o=>({}),get__5_slot_context$3=o=>({}),get__4_slot_changes$3=o=>({}),get__4_slot_context$3=o=>({}),get__3_slot_changes$3=o=>({}),get__3_slot_context$3=o=>({}),get__2_slot_changes$3=o=>({}),get__2_slot_context$3=o=>({}),get__1_slot_changes_1=o=>({}),get__1_slot_context_1=o=>({}),get__0_slot_changes$3=o=>({}),get__0_slot_context$3=o=>({}),get__1_slot_changes$3=o=>({}),get__1_slot_context$3=o=>({});function create_else_block_1$7(o){let e=(o[32].header||"")+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r[0]&4096&&e!==(e=(n[32].header||"")+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_13$4(o){let e,t,n,r;const a=[create_if_block_14$2,create_if_block_15$2,create_if_block_16$2,create_if_block_17$2,create_if_block_18$1,create_if_block_19$1,create_if_block_20$1,create_if_block_21,create_if_block_22],s=[];function l(u,d){return u[32].headerSlot==-1?0:u[32].headerSlot==0?1:u[32].headerSlot==1?2:u[32].headerSlot==2?3:u[32].headerSlot==3?4:u[32].headerSlot==4?5:u[32].headerSlot==5?6:u[32].headerSlot==6?7:u[32].headerSlot==7?8:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function create_if_block_22(o){let e;const t=o[18][7],n=create_slot(t,o,o[17],get__7_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__7_slot_changes$3):get_all_dirty_from_scope(r[17]),get__7_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_21(o){let e;const t=o[18][6],n=create_slot(t,o,o[17],get__6_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__6_slot_changes$3):get_all_dirty_from_scope(r[17]),get__6_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_20$1(o){let e;const t=o[18][5],n=create_slot(t,o,o[17],get__5_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__5_slot_changes$3):get_all_dirty_from_scope(r[17]),get__5_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_19$1(o){let e;const t=o[18][4],n=create_slot(t,o,o[17],get__4_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__4_slot_changes$3):get_all_dirty_from_scope(r[17]),get__4_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_18$1(o){let e;const t=o[18][3],n=create_slot(t,o,o[17],get__3_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__3_slot_changes$3):get_all_dirty_from_scope(r[17]),get__3_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_17$2(o){let e;const t=o[18][2],n=create_slot(t,o,o[17],get__2_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__2_slot_changes$3):get_all_dirty_from_scope(r[17]),get__2_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_16$2(o){let e;const t=o[18][1],n=create_slot(t,o,o[17],get__1_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__1_slot_changes_1):get_all_dirty_from_scope(r[17]),get__1_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_15$2(o){let e;const t=o[18][0],n=create_slot(t,o,o[17],get__0_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__0_slot_changes$3):get_all_dirty_from_scope(r[17]),get__0_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_14$2(o){let e;const t=o[18][-1],n=create_slot(t,o,o[17],get__1_slot_context$3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__1_slot_changes$3):get_all_dirty_from_scope(r[17]),get__1_slot_context$3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_each_block_2$3(o){let e,t,n,r,a,s;const l=[create_if_block_13$4,create_else_block_1$7],u=[];function d(f,m){return f[32].headerSlot!=null?0:1}return t=d(o),n=u[t]=l[t](o),{c(){e=element("td"),n.c(),r=space(),attr(e,"style",a=o[32].width?`width: ${o[32].width}`:void 0),attr(e,"class","svelte-7kr1du")},m(f,m){insert(f,e,m),u[t].m(e,null),append(e,r),s=!0},p(f,m){let h=t;t=d(f),t===h?u[t].p(f,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),n=u[t],n?n.p(f,m):(n=u[t]=l[t](f),n.c()),transition_in(n,1),n.m(e,r)),(!s||m[0]&4096&&a!==(a=f[32].width?`width: ${f[32].width}`:void 0))&&attr(e,"style",a)},i(f){s||(transition_in(n),s=!0)},o(f){transition_out(n),s=!1},d(f){f&&detach(e),u[t].d()}}}function create_else_block$L(o){let e=(o[29][o[32].fieldName]||"")+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r[0]&4100&&e!==(e=(n[29][n[32].fieldName]||"")+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_3$y(o){let e,t,n,r;const a=[create_if_block_4$r,create_if_block_5$j,create_if_block_6$b,create_if_block_7$7,create_if_block_8$6,create_if_block_9$6,create_if_block_10$5,create_if_block_11$5,create_if_block_12$4],s=[];function l(u,d){return u[32].slot==-1?0:u[32].slot==0?1:u[32].slot==1?2:u[32].slot==2?3:u[32].slot==3?4:u[32].slot==4?5:u[32].slot==5?6:u[32].slot==6?7:u[32].slot==7?8:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function create_if_block_2$M(o){let e=o[32].formatter(o[29])+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r[0]&4100&&e!==(e=n[32].formatter(n[29])+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_1$$(o){let e,t,n;const r=[o[32].getProps(o[29])];var a=o[32].component;function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s())),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u[0]&4100?get_spread_update(r,[get_spread_object(l[32].getProps(l[29]))]):{};if(u[0]&4096&&a!==(a=l[32].component)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_if_block_12$4(o){let e;const t=o[18][7],n=create_slot(t,o,o[17],get__7_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__7_slot_changes_1):get_all_dirty_from_scope(r[17]),get__7_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_11$5(o){let e;const t=o[18][6],n=create_slot(t,o,o[17],get__6_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__6_slot_changes_1):get_all_dirty_from_scope(r[17]),get__6_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_10$5(o){let e;const t=o[18][5],n=create_slot(t,o,o[17],get__5_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__5_slot_changes_1):get_all_dirty_from_scope(r[17]),get__5_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_9$6(o){let e;const t=o[18][4],n=create_slot(t,o,o[17],get__4_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__4_slot_changes_1):get_all_dirty_from_scope(r[17]),get__4_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_8$6(o){let e;const t=o[18][3],n=create_slot(t,o,o[17],get__3_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__3_slot_changes_1):get_all_dirty_from_scope(r[17]),get__3_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_7$7(o){let e;const t=o[18][2],n=create_slot(t,o,o[17],get__2_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__2_slot_changes_1):get_all_dirty_from_scope(r[17]),get__2_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_6$b(o){let e;const t=o[18][1],n=create_slot(t,o,o[17],get__1_slot_context_3);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__1_slot_changes_3):get_all_dirty_from_scope(r[17]),get__1_slot_context_3)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_5$j(o){let e;const t=o[18][0],n=create_slot(t,o,o[17],get__0_slot_context_1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__0_slot_changes_1):get_all_dirty_from_scope(r[17]),get__0_slot_context_1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_4$r(o){let e;const t=o[18][-1],n=create_slot(t,o,o[17],get__1_slot_context_2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&131076)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__1_slot_changes_2):get_all_dirty_from_scope(r[17]),get__1_slot_context_2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_each_block_1$9(o){let e,t,n,r,a;const s=[create_if_block_1$$,create_if_block_2$M,create_if_block_3$y,create_else_block$L],l=[];function u(d,f){return d[32].component?0:d[32].formatter?1:d[32].slot!=null?2:3}return t=u(o),n=l[t]=s[t](o),{c(){e=element("td"),n.c(),attr(e,"style",r=o[32].width?`width: ${o[32].width}`:void 0),attr(e,"class","svelte-7kr1du"),toggle_class(e,"isHighlighted",o[32].isHighlighted&&o[32].isHighlighted(o[29]))},m(d,f){insert(d,e,f),l[t].m(e,null),a=!0},p(d,f){let m=t;t=u(d),t===m?l[t].p(d,f):(group_outros(),transition_out(l[m],1,1,()=>{l[m]=null}),check_outros(),n=l[t],n?n.p(d,f):(n=l[t]=s[t](d),n.c()),transition_in(n,1),n.m(e,null)),(!a||f[0]&4096&&r!==(r=d[32].width?`width: ${d[32].width}`:void 0))&&attr(e,"style",r),(!a||f[0]&4100)&&toggle_class(e,"isHighlighted",d[32].isHighlighted&&d[32].isHighlighted(d[29]))},i(d){a||(transition_in(n),a=!0)},o(d){transition_out(n),a=!1},d(d){d&&detach(e),l[t].d()}}}function create_each_block$C(o){let e,t,n,r,a=ensure_array_like(o[12]),s=[];for(let d=0;d<a.length;d+=1)s[d]=create_each_block_1$9(get_each_context_1$9(o,a,d));const l=d=>transition_out(s[d],1,1,()=>{s[d]=null});function u(){return o[21](o[31],o[29])}return{c(){e=element("tr");for(let d=0;d<s.length;d+=1)s[d].c();attr(e,"class","svelte-7kr1du"),toggle_class(e,"selected",o[3]&&o[0]==o[31]),toggle_class(e,"clickable",o[4]),toggle_class(e,"isAdded",o[29].__isAdded),toggle_class(e,"isDeleted",o[29].__isDeleted),toggle_class(e,"isChanged",o[29].__isChanged)},m(d,f){insert(d,e,f);for(let m=0;m<s.length;m+=1)s[m]&&s[m].m(e,null);t=!0,n||(r=listen(e,"click",u),n=!0)},p(d,f){if(o=d,f[0]&135172){a=ensure_array_like(o[12]);let m;for(m=0;m<a.length;m+=1){const h=get_each_context_1$9(o,a,m);s[m]?(s[m].p(h,f),transition_in(s[m],1)):(s[m]=create_each_block_1$9(h),s[m].c(),transition_in(s[m],1),s[m].m(e,null))}for(group_outros(),m=a.length;m<s.length;m+=1)l(m);check_outros()}(!t||f[0]&9)&&toggle_class(e,"selected",o[3]&&o[0]==o[31]),(!t||f[0]&16)&&toggle_class(e,"clickable",o[4]),(!t||f[0]&4)&&toggle_class(e,"isAdded",o[29].__isAdded),(!t||f[0]&4)&&toggle_class(e,"isDeleted",o[29].__isDeleted),(!t||f[0]&4)&&toggle_class(e,"isChanged",o[29].__isChanged)},i(d){if(!t){for(let f=0;f<a.length;f+=1)transition_in(s[f]);t=!0}},o(d){s=s.filter(Boolean);for(let f=0;f<s.length;f+=1)transition_out(s[f]);t=!1},d(d){d&&detach(e),destroy_each(s,d),n=!1,r()}}}function create_if_block$1L(o){let e=o[2],t,n=create_key_block$b(o);return{c(){n.c(),t=empty()},m(r,a){n.m(r,a),insert(r,t,a)},p(r,a){a[0]&4&&safe_not_equal(e,e=r[2])?(n.d(1),n=create_key_block$b(r),n.c(),n.m(t.parentNode,t)):n.p(r,a)},d(r){r&&detach(t),n.d(r)}}}function create_key_block$b(o){let e,t,n,r;return{c(){e=element("tr"),t=element("td"),n=text("Loading next rows..."),attr(t,"colspan",r=o[12].length),attr(t,"class","svelte-7kr1du"),attr(e,"class","svelte-7kr1du")},m(a,s){insert(a,e,s),append(e,t),append(t,n),o[22](t)},p(a,s){s[0]&4096&&r!==(r=a[12].length)&&attr(t,"colspan",r)},d(a){a&&detach(e),o[22](null)}}}function create_fragment$46(o){let e,t,n,r,a,s,l,u,d,f,m,h,p=ensure_array_like(o[12]),g=[];for(let A=0;A<p.length;A+=1)g[A]=create_each_block_2$3(get_each_context_2$3(o,p,A));const b=A=>transition_out(g[A],1,1,()=>{g[A]=null});let v=ensure_array_like(o[2]),y=[];for(let A=0;A<v.length;A+=1)y[A]=create_each_block$C(get_each_context$C(o,v,A));const C=A=>transition_out(y[A],1,1,()=>{y[A]=null});let E=o[6]&&create_if_block$1L(o);return{c(){e=element("div"),t=element("table"),n=element("thead"),r=element("tr");for(let A=0;A<g.length;A+=1)g[A].c();a=space(),s=element("tbody");for(let A=0;A<y.length;A+=1)y[A].c();l=space(),E&&E.c(),attr(r,"class","svelte-7kr1du"),attr(n,"class","svelte-7kr1du"),attr(s,"style",u=`max-height: ${o[9]-o[10]}px`),attr(s,"class","svelte-7kr1du"),attr(t,"tabindex",d=o[3]?-1:void 0),attr(t,"class","svelte-7kr1du"),toggle_class(t,"selectable",o[3]),toggle_class(t,"disableFocusOutline",o[5]),toggle_class(t,"singleLineRow",o[7]),attr(e,"class","wrapper svelte-7kr1du")},m(A,k){insert(A,e,k),append(e,t),append(t,n),append(n,r);for(let T=0;T<g.length;T+=1)g[T]&&g[T].m(r,null);append(t,a),append(t,s);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(s,null);append(s,l),E&&E.m(s,null),o[23](s),o[24](t),f=!0,m||(h=[action_destroyer(resizeObserver.call(null,n,!0)),listen(n,"resize",o[20]),listen(t,"keydown",o[19]),listen(t,"keydown",o[14]),action_destroyer(resizeObserver.call(null,e,!0)),listen(e,"resize",o[25])],m=!0)},p(A,k){if(k[0]&135168){p=ensure_array_like(A[12]);let T;for(T=0;T<p.length;T+=1){const $=get_each_context_2$3(A,p,T);g[T]?(g[T].p($,k),transition_in(g[T],1)):(g[T]=create_each_block_2$3($),g[T].c(),transition_in(g[T],1),g[T].m(r,null))}for(group_outros(),T=p.length;T<g.length;T+=1)b(T);check_outros()}if(k[0]&143391){v=ensure_array_like(A[2]);let T;for(T=0;T<v.length;T+=1){const $=get_each_context$C(A,v,T);y[T]?(y[T].p($,k),transition_in(y[T],1)):(y[T]=create_each_block$C($),y[T].c(),transition_in(y[T],1),y[T].m(s,l))}for(group_outros(),T=v.length;T<y.length;T+=1)C(T);check_outros()}A[6]?E?E.p(A,k):(E=create_if_block$1L(A),E.c(),E.m(s,null)):E&&(E.d(1),E=null),(!f||k[0]&1536&&u!==(u=`max-height: ${A[9]-A[10]}px`))&&attr(s,"style",u),(!f||k[0]&8&&d!==(d=A[3]?-1:void 0))&&attr(t,"tabindex",d),(!f||k[0]&8)&&toggle_class(t,"selectable",A[3]),(!f||k[0]&32)&&toggle_class(t,"disableFocusOutline",A[5]),(!f||k[0]&128)&&toggle_class(t,"singleLineRow",A[7])},i(A){if(!f){for(let k=0;k<p.length;k+=1)transition_in(g[k]);for(let k=0;k<v.length;k+=1)transition_in(y[k]);f=!0}},o(A){g=g.filter(Boolean);for(let k=0;k<g.length;k+=1)transition_out(g[k]);y=y.filter(Boolean);for(let k=0;k<y.length;k+=1)transition_out(y[k]);f=!1},d(A){A&&detach(e),destroy_each(g,A),destroy_each(y,A),E&&E.d(),o[23](null),o[24](null),m=!1,run_all(h)}}}function instance$44(o,e,t){let n,{$$slots:r={},$$scope:a}=e,{columns:s}=e,{rows:l}=e,{focusOnCreate:u=!1}=e,{selectable:d=!1}=e,{selectedIndex:f=0}=e,{clickable:m=!1}=e,{disableFocusOutline:h=!1}=e,{onLoadNext:p=null}=e,{singleLineRow:g=!1}=e,{domTable:b=void 0}=e,v=0,y=0,C,E,A;function k(B){A&&(A.disconnect(),A=null),B&&(A=new IntersectionObserver(K=>{K.find(U=>U.isIntersecting)&&p()}),A.observe(B))}onDestroy(()=>{A&&A.disconnect()});const T=createEventDispatcher();onMount(()=>{u&&b.focus()});const $=B=>{B.keyCode==keycodes.downArrow&&t(0,f=Math.min(f+1,l.length-1)),B.keyCode==keycodes.upArrow&&t(0,f=Math.max(0,f-1)),B.keyCode==keycodes.pageUp&&(t(0,f-=Math.floor(v/y)-1),f<0&&t(0,f=0)),B.keyCode==keycodes.pageDown&&(t(0,f+=Math.floor(v/y)-1),f>=l.length&&t(0,f=l.length-1)),B.keyCode==keycodes.home&&t(0,f=0),B.keyCode==keycodes.end&&t(0,f=l.length-1)};function S(B){if(!C)return;const K=C.children[B];K&&K.scrollIntoView({block:"nearest",inline:"nearest"})}function I(B){bubble.call(this,o,B)}const R=B=>{t(10,y=B.detail.height)},N=(B,K)=>{d&&(t(0,f=B),b.focus()),m&&T("clickrow",K)};function M(B){binding_callbacks[B?"unshift":"push"](()=>{E=B,t(8,E)})}function F(B){binding_callbacks[B?"unshift":"push"](()=>{C=B,t(11,C)})}function D(B){binding_callbacks[B?"unshift":"push"](()=>{b=B,t(1,b)})}const x=B=>{t(9,v=B.detail.height)};return o.$$set=B=>{"columns"in B&&t(15,s=B.columns),"rows"in B&&t(2,l=B.rows),"focusOnCreate"in B&&t(16,u=B.focusOnCreate),"selectable"in B&&t(3,d=B.selectable),"selectedIndex"in B&&t(0,f=B.selectedIndex),"clickable"in B&&t(4,m=B.clickable),"disableFocusOutline"in B&&t(5,h=B.disableFocusOutline),"onLoadNext"in B&&t(6,p=B.onLoadNext),"singleLineRow"in B&&t(7,g=B.singleLineRow),"domTable"in B&&t(1,b=B.domTable),"$$scope"in B&&t(17,a=B.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&256&&k(E),o.$$.dirty[0]&32768&&t(12,n=_.compact(_.flatten(s))),o.$$.dirty[0]&1&&S(f)},[f,b,l,d,m,h,p,g,E,v,y,C,n,T,$,s,u,a,r,I,R,N,M,F,D,x]}class ScrollableTableControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$44,create_fragment$46,safe_not_equal,{columns:15,rows:2,focusOnCreate:16,selectable:3,selectedIndex:0,clickable:4,disableFocusOutline:5,onLoadNext:6,singleLineRow:7,domTable:1},null,[-1,-1])}}const LoadingInfo_svelte_svelte_type_style_lang="";function create_else_block$K(o){let e,t,n,r,a,s;return n=new FontIcon({props:{icon:"icon loading"}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=text(o[0]),attr(t,"class","spinner svelte-1s05410"),attr(e,"class","container svelte-1s05410")},m(l,u){insert(l,e,u),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),s=!0},p(l,u){(!s||u&1)&&set_data(a,l[0])},i(l){s||(transition_in(n.$$.fragment,l),s=!0)},o(l){transition_out(n.$$.fragment,l),s=!1},d(l){l&&detach(e),destroy_component(n)}}}function create_if_block$1K(o){let e,t,n,r,a,s,l,u;return a=new FontIcon({props:{icon:"icon loading"}}),{c(){e=element("div"),t=element("div"),n=element("div"),r=element("div"),create_component(a.$$.fragment),s=space(),l=text(o[0]),attr(r,"class","spinner svelte-1s05410"),attr(n,"class","container svelte-1s05410"),attr(t,"class","box svelte-1s05410"),attr(e,"class","wrapper svelte-1s05410")},m(d,f){insert(d,e,f),append(e,t),append(t,n),append(n,r),mount_component(a,r,null),append(n,s),append(n,l),u=!0},p(d,f){(!u||f&1)&&set_data(l,d[0])},i(d){u||(transition_in(a.$$.fragment,d),u=!0)},o(d){transition_out(a.$$.fragment,d),u=!1},d(d){d&&detach(e),destroy_component(a)}}}function create_fragment$45(o){let e,t,n,r;const a=[create_if_block$1K,create_else_block$K],s=[];function l(u,d){return u[1]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$43(o,e,t){let{message:n}=e,{wrapper:r=!1}=e;return o.$$set=a=>{"message"in a&&t(0,n=a.message),"wrapper"in a&&t(1,r=a.wrapper)},[n,r]}class LoadingInfo extends SvelteComponent{constructor(e){super(),init(this,e,instance$43,create_fragment$45,safe_not_equal,{message:0,wrapper:1})}}const DictionaryLookupModal_svelte_svelte_type_style_lang="";function create_if_block_2$L(o){let e,t;return e=new LoadingInfo({props:{message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$_(o){let e,t,n;return t=new ScrollableTableControl({props:{rows:o[4],clickable:!0,columns:[o[2]&&{fieldName:"checked",header:"",width:"30px",slot:1},{fieldName:"value",header:"Value",formatter:o[22],width:"100px"},{fieldName:"description",header:"Description",formatter:o[23]}],$$slots:{1:[create__1_slot$s,({row:r})=>({27:r}),({row:r})=>r?134217728:0]},$$scope:{ctx:o}}}),t.$on("clickrow",o[24]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","tableWrapper svelte-1ae830f")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&16&&(s.rows=r[4]),a&100&&(s.columns=[r[2]&&{fieldName:"checked",header:"",width:"30px",slot:1},{fieldName:"value",header:"Value",formatter:r[22],width:"100px"},{fieldName:"description",header:"Description",formatter:r[23]}]),a&402653472&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create__1_slot$s(o){let e,t,n,r;function a(...s){return o[21](o[27],...s)}return{c(){e=element("input"),attr(e,"type","checkbox"),attr(e,"slot","1"),e.checked=t=o[8].includes(o[27][o[5].primaryKey.columns[0].columnName])},m(s,l){insert(s,e,l),n||(r=listen(e,"change",a),n=!0)},p(s,l){o=s,l&134218016&&t!==(t=o[8].includes(o[27][o[5].primaryKey.columns[0].columnName]))&&(e.checked=t)},d(s){s&&detach(e),n=!1,r()}}}function create_default_slot_1$P(o){var h,p,g;let e,t,n,r,a,s,l;function u(b){o[20](b)}let d={placeholder:"Search",isDebounced:!0};o[3]!==void 0&&(d.value=o[3]),t=new SearchInput({props:d}),binding_callbacks.push(()=>bind(t,"value",u));let f=o[7]&&create_if_block_2$L(),m=!o[7]&&o[5]&&o[6]&&o[4]&&((g=(p=(h=o[5])==null?void 0:h.primaryKey)==null?void 0:p.columns)==null?void 0:g.length)==1&&create_if_block_1$_(o);return{c(){e=element("div"),create_component(t.$$.fragment),r=space(),f&&f.c(),a=space(),m&&m.c(),s=empty(),attr(e,"class","largeFormMarker")},m(b,v){insert(b,e,v),mount_component(t,e,null),insert(b,r,v),f&&f.m(b,v),insert(b,a,v),m&&m.m(b,v),insert(b,s,v),l=!0},p(b,v){var C,E,A;const y={};!n&&v&8&&(n=!0,y.value=b[3],add_flush_callback(()=>n=!1)),t.$set(y),b[7]?f?v&128&&transition_in(f,1):(f=create_if_block_2$L(),f.c(),transition_in(f,1),f.m(a.parentNode,a)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),!b[7]&&b[5]&&b[6]&&b[4]&&((A=(E=(C=b[5])==null?void 0:C.primaryKey)==null?void 0:E.columns)==null?void 0:A.length)==1?m?(m.p(b,v),v&240&&transition_in(m,1)):(m=create_if_block_1$_(b),m.c(),transition_in(m,1),m.m(s.parentNode,s)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(b){l||(transition_in(t.$$.fragment,b),transition_in(f),transition_in(m),l=!0)},o(b){transition_out(t.$$.fragment,b),transition_out(f),transition_out(m),l=!1},d(b){b&&(detach(e),detach(r),detach(a),detach(s)),destroy_component(t),f&&f.d(b),m&&m.d(b)}}}function create_header_slot$q(o){let e,t;return{c(){e=text("Lookup from "),t=text(o[1])},m(n,r){insert(n,e,r),insert(n,t,r)},p(n,r){r&2&&set_data(t,n[1])},d(n){n&&(detach(e),detach(t))}}}function create_if_block$1J(o){let e,t;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[19]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$p(o){let e,t,n,r,a,s=o[2]&&create_if_block$1J(o);return t=new FormStyledButton({props:{type:"button",value:"Close"}}),t.$on("click",closeCurrentModal),r=new FormStyledButton({props:{type:"button",value:"Customize"}}),r.$on("click",o[11]),{c(){s&&s.c(),e=space(),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment)},m(l,u){s&&s.m(l,u),insert(l,e,u),mount_component(t,l,u),insert(l,n,u),mount_component(r,l,u),a=!0},p(l,u){l[2]?s?(s.p(l,u),u&4&&transition_in(s,1)):(s=create_if_block$1J(l),s.c(),transition_in(s,1),s.m(e.parentNode,e)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(l){a||(transition_in(s),transition_in(t.$$.fragment,l),transition_in(r.$$.fragment,l),a=!0)},o(l){transition_out(s),transition_out(t.$$.fragment,l),transition_out(r.$$.fragment,l),a=!1},d(l){l&&(detach(e),detach(n)),s&&s.d(l),destroy_component(t,l),destroy_component(r,l)}}}function create_default_slot$1u(o){let e,t;const n=[o[12]];let r={$$slots:{footer:[create_footer_slot$p],header:[create_header_slot$q],default:[create_default_slot_1$P]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&4096?get_spread_update(n,[get_spread_object(a[12])]):{};s&268435967&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$44(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1u]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&268440063&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$42(o,e,t){let n,r;const a=["onConfirm","conid","database","pureName","schemaName","driver","multiselect"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(r,G=>t(17,l=G)),r),f,m=noop$1,h=()=>(m(),m=subscribe(n,G=>t(18,f=G)),n);o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>m());var p=this&&this.__awaiter||function(G,W,q,H){function z(Y){return Y instanceof q?Y:new q(function(V){V(Y)})}return new(q||(q=Promise))(function(Y,V){function J(ie){try{X(H.next(ie))}catch(ce){V(ce)}}function Q(ie){try{X(H.throw(ie))}catch(ce){V(ce)}}function X(ie){ie.done?Y(ie.value):z(ie.value).then(J,Q)}X((H=H.apply(G,W||[])).next())})};let{onConfirm:g}=e,{conid:b}=e,{database:v}=e,{pureName:y}=e,{schemaName:C}=e,{driver:E}=e,{multiselect:A=!1}=e,k=null,T,$,S=!1,I="",R=[];function N(){showModal(DefineDictionaryDescriptionModal,{conid:b,database:v,schemaName:C,pureName:y,onConfirm:()=>M()})}function M(){var G,W;return p(this,void 0,void 0,function*(){if(t(5,T=yield getTableInfo({conid:b,database:v,schemaName:C,pureName:y})),t(6,$=getDictionaryDescription(T,b,v,f,l)),!T||!$||((W=(G=T==null?void 0:T.primaryKey)===null||G===void 0?void 0:G.columns)===null||W===void 0?void 0:W.length)!=1)return;E.createDumper();const q={commandType:"select",topRecords:100,from:{name:{schemaName:C,pureName:y}},columns:[...T.primaryKey.columns.map(z=>({exprType:"column",columnName:z.columnName})),...$.columns.map(z=>({exprType:"column",columnName:z}))]};if(I){const z=_.compact(I.split(" ").map(Y=>Y.trim()));z.length>0&&(q.where={conditionType:"and",conditions:z.map(Y=>({conditionType:"or",conditions:$.columns.map(V=>({conditionType:"like",left:{exprType:"column",columnName:V},right:{exprType:"value",value:`%${Y}%`}}))}))})}t(7,S=!0);const H=yield apiCall("database-connections/sql-select",{conid:b,database:v,select:q});t(4,k=H.rows),t(7,S=!1)})}onMount(()=>{M()});const F=()=>{closeCurrentModal(),g(R)};function D(G){I=G,t(3,I)}const x=(G,W)=>{const q=G[T.primaryKey.columns[0].columnName];W.target.checked?R.includes(q)||t(8,R=[...R,q]):R.includes(q)&&t(8,R=R.filter(H=>H!=q)),W.stopPropagation()},B=G=>G[T.primaryKey.columns[0].columnName],K=G=>$.columns.map(W=>G[W]).join($.delimiter||" "),U=G=>{const W=G.detail[T.primaryKey.columns[0].columnName];A?R.includes(W)?t(8,R=R.filter(q=>q!=W)):t(8,R=[...R,W]):(closeCurrentModal(),g(W))};return o.$$set=G=>{e=assign(assign({},e),exclude_internal_props(G)),t(12,s=compute_rest_props(e,a)),"onConfirm"in G&&t(0,g=G.onConfirm),"conid"in G&&t(13,b=G.conid),"database"in G&&t(14,v=G.database),"pureName"in G&&t(1,y=G.pureName),"schemaName"in G&&t(15,C=G.schemaName),"driver"in G&&t(16,E=G.driver),"multiselect"in G&&t(2,A=G.multiselect)},o.$$.update=()=>{o.$$.dirty&393224&&M()},h(t(10,n=useUsedApps())),d(t(9,r=useConnectionList())),[g,y,A,I,k,T,$,S,R,r,n,N,s,b,v,C,E,l,f,F,D,x,B,K,U]}class DictionaryLookupModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$42,create_fragment$44,safe_not_equal,{onConfirm:0,conid:13,database:14,pureName:1,schemaName:15,driver:16,multiselect:2})}}const DictionaryLookupModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:DictionaryLookupModal},Symbol.toStringTag,{value:"Module"})),ValueLookupModal_svelte_svelte_type_style_lang="";function create_if_block_3$x(o){let e,t;return e=new LoadingInfo({props:{message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$Z(o){let e,t,n,r;const a=[create_if_block_2$K,create_else_block$J],s=[];function l(u,d){return u[4].errorMessage?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$J(o){let e,t,n;return t=new ScrollableTableControl({props:{rows:o[4],clickable:!0,columns:[o[2]&&{fieldName:"checked",header:"",width:"30px",slot:1},{fieldName:"value",header:"Value",formatter:func$g}],$$slots:{1:[create__1_slot$r,({row:r})=>({21:r}),({row:r})=>r?2097152:0]},$$scope:{ctx:o}}}),t.$on("clickrow",o[18]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","tableWrapper svelte-1ae830f")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&16&&(s.rows=r[4]),a&4&&(s.columns=[r[2]&&{fieldName:"checked",header:"",width:"30px",slot:1},{fieldName:"value",header:"Value",formatter:func$g}]),a&6291520&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_2$K(o){let e,t;return e=new ErrorInfo({props:{message:o[4].errorMessage}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.message=n[4].errorMessage),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$r(o){let e,t,n,r;function a(...s){return o[17](o[21],...s)}return{c(){e=element("input"),attr(e,"type","checkbox"),attr(e,"slot","1"),e.checked=t=o[6].includes(o[21].value)},m(s,l){insert(s,e,l),n||(r=listen(e,"change",a),n=!0)},p(s,l){o=s,l&2097216&&t!==(t=o[6].includes(o[21].value))&&(e.checked=t)},d(s){s&&detach(e),n=!1,r()}}}function create_default_slot_1$O(o){let e,t,n,r,a,s,l;function u(h){o[16](h)}let d={placeholder:"Search",isDebounced:!0};o[3]!==void 0&&(d.value=o[3]),t=new SearchInput({props:d}),binding_callbacks.push(()=>bind(t,"value",u));let f=o[5]&&create_if_block_3$x(),m=!o[5]&&o[4]&&create_if_block_1$Z(o);return{c(){e=element("div"),create_component(t.$$.fragment),r=space(),f&&f.c(),a=space(),m&&m.c(),s=empty(),attr(e,"class","largeFormMarker")},m(h,p){insert(h,e,p),mount_component(t,e,null),insert(h,r,p),f&&f.m(h,p),insert(h,a,p),m&&m.m(h,p),insert(h,s,p),l=!0},p(h,p){const g={};!n&&p&8&&(n=!0,g.value=h[3],add_flush_callback(()=>n=!1)),t.$set(g),h[5]?f?p&32&&transition_in(f,1):(f=create_if_block_3$x(),f.c(),transition_in(f,1),f.m(a.parentNode,a)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),!h[5]&&h[4]?m?(m.p(h,p),p&48&&transition_in(m,1)):(m=create_if_block_1$Z(h),m.c(),transition_in(m,1),m.m(s.parentNode,s)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){l||(transition_in(t.$$.fragment,h),transition_in(f),transition_in(m),l=!0)},o(h){transition_out(t.$$.fragment,h),transition_out(f),transition_out(m),l=!1},d(h){h&&(detach(e),detach(r),detach(a),detach(s)),destroy_component(t),f&&f.d(h),m&&m.d(h)}}}function create_header_slot$p(o){let e,t;return{c(){e=text("Choose value from "),t=text(o[1])},m(n,r){insert(n,e,r),insert(n,t,r)},p(n,r){r&2&&set_data(t,n[1])},d(n){n&&(detach(e),detach(t))}}}function create_if_block$1I(o){let e,t;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[15]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$o(o){let e,t,n,r=o[2]&&create_if_block$1I(o);return t=new FormStyledButton({props:{type:"button",value:"Close"}}),t.$on("click",closeCurrentModal),{c(){r&&r.c(),e=space(),create_component(t.$$.fragment)},m(a,s){r&&r.m(a,s),insert(a,e,s),mount_component(t,a,s),n=!0},p(a,s){a[2]?r?(r.p(a,s),s&4&&transition_in(r,1)):(r=create_if_block$1I(a),r.c(),transition_in(r,1),r.m(e.parentNode,e)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(a){n||(transition_in(r),transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(r),transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),r&&r.d(a),destroy_component(t,a)}}}function create_default_slot$1t(o){let e,t;const n=[o[7]];let r={$$slots:{footer:[create_footer_slot$o],header:[create_header_slot$p],default:[create_default_slot_1$O]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&128?get_spread_update(n,[get_spread_object(a[7])]):{};s&4194431&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$43(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1t]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4194559&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$g=o=>o.value==null?"(NULL)":o.value;function instance$41(o,e,t){const n=["onConfirm","conid","database","pureName","schemaName","field","driver","multiselect","jslid","formatterFunction"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(I,R,N,M){function F(D){return D instanceof N?D:new N(function(x){x(D)})}return new(N||(N=Promise))(function(D,x){function B(G){try{U(M.next(G))}catch(W){x(W)}}function K(G){try{U(M.throw(G))}catch(W){x(W)}}function U(G){G.done?D(G.value):F(G.value).then(B,K)}U((M=M.apply(I,R||[])).next())})};let{onConfirm:s}=e,{conid:l}=e,{database:u}=e,{pureName:d}=e,{schemaName:f}=e,{field:m}=e,{driver:h}=e,{multiselect:p=!1}=e,{jslid:g}=e,{formatterFunction:b}=e,v=null,y=!1,C="",E=[];function A(){return a(this,void 0,void 0,function*(){t(5,y=!0),g?t(4,v=yield apiCall("jsldata/load-field-values",{jslid:g,search:C,field:m,formatterFunction:b})):t(4,v=yield apiCall("database-connections/load-field-values",{conid:l,database:u,search:C,schemaName:f,pureName:d,field:m})),t(5,y=!1)})}onMount(()=>{A()});const k=()=>{closeCurrentModal(),s(E)};function T(I){C=I,t(3,C)}const $=(I,R)=>{const N=I.value;R.target.checked?E.includes(N)||t(6,E=[...E,N]):E.includes(N)&&t(6,E=E.filter(M=>M!=N)),R.stopPropagation()},S=I=>{const{value:R}=I.detail;p?E.includes(R)?t(6,E=E.filter(N=>N!=R)):t(6,E=[...E,R]):(closeCurrentModal(),s(R))};return o.$$set=I=>{e=assign(assign({},e),exclude_internal_props(I)),t(7,r=compute_rest_props(e,n)),"onConfirm"in I&&t(0,s=I.onConfirm),"conid"in I&&t(8,l=I.conid),"database"in I&&t(9,u=I.database),"pureName"in I&&t(10,d=I.pureName),"schemaName"in I&&t(11,f=I.schemaName),"field"in I&&t(1,m=I.field),"driver"in I&&t(12,h=I.driver),"multiselect"in I&&t(2,p=I.multiselect),"jslid"in I&&t(13,g=I.jslid),"formatterFunction"in I&&t(14,b=I.formatterFunction)},o.$$.update=()=>{o.$$.dirty&8&&A()},[s,m,p,C,v,y,E,r,l,u,d,f,h,g,b,k,T,$,S]}class ValueLookupModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$41,create_fragment$43,safe_not_equal,{onConfirm:0,conid:8,database:9,pureName:10,schemaName:11,field:1,driver:12,multiselect:2,jslid:13,formatterFunction:14})}}const ValueLookupModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ValueLookupModal},Symbol.toStringTag,{value:"Module"})),DataFilterControl_svelte_svelte_type_style_lang="";function create_if_block_5$i(o){let e,t;return e=new InlineButton({props:{title:o[9],narrow:!0,square:!0,$$slots:{default:[create_default_slot_3$h]},$$scope:{ctx:o}}}),e.$on("click",function(){is_function(o[8])&&o[8].apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){o=n;const a={};r[0]&512&&(a.title=o[9]),r[0]&128|r[1]&32&&(a.$$scope={dirty:r,ctx:o}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$h(o){let e,t;return e=new FontIcon({props:{icon:o[7]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&128&&(a.icon=n[7]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$q(o){let e,t;return e=new InlineButton({props:{narrow:!0,square:!0,$$slots:{default:[create_default_slot_2$m]},$$scope:{ctx:o}}}),e.$on("click",o[22]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&32&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$Y(o){let e,t,n,r,a,s;const l=[create_if_block_2$J,create_if_block_3$w],u=[];function d(f,m){var h,p,g,b;return m[0]&36&&(e=null),m[0]&7200&&(t=null),e==null&&(e=!!((p=(h=f[5])==null?void 0:h.databaseEngineTypes)!=null&&p.includes("sql")&&f[2])),e?0:(t==null&&(t=!!(f[10]&&f[11]||f[10]&&f[12]&&((b=(g=f[5])==null?void 0:g.databaseEngineTypes)!=null&&b.includes("document")))),t?1:-1)}return~(n=d(o,[-1,-1]))&&(r=u[n]=l[n](o)),{c(){r&&r.c(),a=empty()},m(f,m){~n&&u[n].m(f,m),insert(f,a,m),s=!0},p(f,m){let h=n;n=d(f,m),n===h?~n&&u[n].p(f,m):(r&&(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros()),~n?(r=u[n],r?r.p(f,m):(r=u[n]=l[n](f),r.c()),transition_in(r,1),r.m(a.parentNode,a)):r=null)},i(f){s||(transition_in(r),s=!0)},o(f){transition_out(r),s=!1},d(f){f&&detach(a),~n&&u[n].d(f)}}}function create_default_slot_2$m(o){let e,t;return e=new FontIcon({props:{icon:"icon dots-vertical"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$w(o){let e,t;return e=new InlineButton({props:{narrow:!0,square:!0,$$slots:{default:[create_default_slot_1$N]},$$scope:{ctx:o}}}),e.$on("click",o[22]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&32&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$J(o){let e,t;return e=new InlineButton({props:{narrow:!0,square:!0,$$slots:{default:[create_default_slot$1s]},$$scope:{ctx:o}}}),e.$on("click",o[21]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&32&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$N(o){let e,t;return e=new FontIcon({props:{icon:"icon dots-vertical"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$1s(o){let e,t;return e=new FontIcon({props:{icon:"icon dots-horizontal"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1H(o){let e,t,n;return{c(){e=element("div"),attr(e,"class","horizontal-split-handle resizeHandleControl")},m(r,a){insert(r,e,a),t||(n=[action_destroyer(splitterDrag.call(null,e,"clientX")),listen(e,"resizeSplitter",o[31])],t=!0)},d(r){r&&detach(e),t=!1,run_all(n)}}}function create_fragment$42(o){let e,t,n,r,a,s,l,u,d,f,m,h,p=o[7]&&o[8]&&create_if_block_5$i(o);const g=[create_if_block_1$Y,create_if_block_4$q],b=[];function v(C,E){return C[3]&&C[4]&&C[5]?0:C[6]?1:-1}~(a=v(o))&&(s=b[a]=g[a](o)),u=new DropDownButton({props:{icon:"icon filter",menu:o[18],narrow:!0}});let y=o[1]&&create_if_block$1H(o);return{c(){e=element("div"),t=element("input"),n=space(),p&&p.c(),r=space(),s&&s.c(),l=space(),create_component(u.$$.fragment),d=space(),y&&y.c(),attr(t,"type","text"),attr(t,"autocomplete","off"),t.readOnly=o[0],attr(t,"placeholder",o[13]),attr(t,"class","svelte-1wb7fze"),toggle_class(t,"isError",o[16]),toggle_class(t,"isOk",o[17]),attr(e,"class","flex")},m(C,E){insert(C,e,E),append(e,t),o[32](t),set_input_value(t,o[14]),append(e,n),p&&p.m(e,null),append(e,r),~a&&b[a].m(e,null),append(e,l),mount_component(u,e,null),append(e,d),y&&y.m(e,null),f=!0,m||(h=[listen(t,"input",o[33]),listen(t,"keydown",o[19]),listen(t,"blur",o[23]),listen(t,"paste",o[20])],m=!0)},p(C,E){(!f||E[0]&1)&&(t.readOnly=C[0]),(!f||E[0]&8192)&&attr(t,"placeholder",C[13]),E[0]&16384&&t.value!==C[14]&&set_input_value(t,C[14]),(!f||E[0]&65536)&&toggle_class(t,"isError",C[16]),(!f||E[0]&131072)&&toggle_class(t,"isOk",C[17]),C[7]&&C[8]?p?(p.p(C,E),E[0]&384&&transition_in(p,1)):(p=create_if_block_5$i(C),p.c(),transition_in(p,1),p.m(e,r)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros());let A=a;a=v(C),a===A?~a&&b[a].p(C,E):(s&&(group_outros(),transition_out(b[A],1,1,()=>{b[A]=null}),check_outros()),~a?(s=b[a],s?s.p(C,E):(s=b[a]=g[a](C),s.c()),transition_in(s,1),s.m(e,l)):s=null),C[1]?y||(y=create_if_block$1H(C),y.c(),y.m(e,null)):y&&(y.d(1),y=null)},i(C){f||(transition_in(p),transition_in(s),transition_in(u.$$.fragment,C),f=!0)},o(C){transition_out(p),transition_out(s),transition_out(u.$$.fragment,C),f=!1},d(C){C&&detach(e),o[32](null),p&&p.d(),~a&&b[a].d(),destroy_component(u),y&&y.d(),m=!1,run_all(h)}}}function instance$40(o,e,t){let{isReadOnly:n=!1}=e,{filterType:r}=e,{filter:a}=e,{setFilter:s}=e,{showResizeSplitter:l=!1}=e,{onFocusGrid:u=null}=e,{onGetReference:d=null}=e,{foreignKey:f=null}=e,{conid:m=null}=e,{database:h=null}=e,{driver:p=null}=e,{jslid:g=null}=e,{customCommandIcon:b=null}=e,{onCustomCommand:v=null}=e,{customCommandTooltip:y=null}=e,{formatterFunction:C=null}=e,{pureName:E=null}=e,{schemaName:A=null}=e,{columnName:k=null}=e,{uniqueName:T=null}=e,{placeholder:$="Filter"}=e,S,I,R,N;function M(z){showModal(SetFilterModal,{condition1:z,filterType:r,onFilter:s})}const F=()=>{showModal(FilterMultipleValuesModal,{onFilter:(z,Y)=>s(lib$1.createMultiLineFilter(z,Y))})};function D(){switch(r){case"number":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>M("="),text:"Equals..."},{onClick:()=>M("<>"),text:"Does Not Equal..."},{onClick:()=>s("NULL"),text:"Is Null"},{onClick:()=>s("NOT NULL"),text:"Is Not Null"},{onClick:()=>M(">"),text:"Greater Than..."},{onClick:()=>M(">="),text:"Greater Than Or Equal To..."},{onClick:()=>M("<"),text:"Less Than..."},{onClick:()=>M("<="),text:"Less Than Or Equal To..."},{divider:!0},{onClick:()=>M("sql"),text:"SQL condition ..."},{onClick:()=>M("sqlRight"),text:"SQL condition - right side ..."}];case"logical":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>s("NULL"),text:"Is Null"},{onClick:()=>s("NOT NULL"),text:"Is Not Null"},{onClick:()=>s("TRUE"),text:"Is True"},{onClick:()=>s("FALSE"),text:"Is False"},{onClick:()=>s("TRUE, NULL"),text:"Is True or NULL"},{onClick:()=>s("FALSE, NULL"),text:"Is False or NULL"},{divider:!0},{onClick:()=>M("sql"),text:"SQL condition ..."},{onClick:()=>M("sqlRight"),text:"SQL condition - right side ..."}];case"datetime":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>s("NULL"),text:"Is Null"},{onClick:()=>s("NOT NULL"),text:"Is Not Null"},{divider:!0},{onClick:()=>M("<="),text:"Before..."},{onClick:()=>M(">="),text:"After..."},{onClick:()=>M(">=;<="),text:"Between..."},{divider:!0},{onClick:()=>s("TOMORROW"),text:"Tomorrow"},{onClick:()=>s("TODAY"),text:"Today"},{onClick:()=>s("YESTERDAY"),text:"Yesterday"},{divider:!0},{onClick:()=>s("NEXT WEEK"),text:"Next Week"},{onClick:()=>s("THIS WEEK"),text:"This Week"},{onClick:()=>s("LAST WEEK"),text:"Last Week"},{divider:!0},{onClick:()=>s("NEXT MONTH"),text:"Next Month"},{onClick:()=>s("THIS MONTH"),text:"This Month"},{onClick:()=>s("LAST MONTH"),text:"Last Month"},{divider:!0},{onClick:()=>s("NEXT YEAR"),text:"Next Year"},{onClick:()=>s("THIS YEAR"),text:"This Year"},{onClick:()=>s("LAST YEAR"),text:"Last Year"},{divider:!0},{onClick:()=>M("sql"),text:"SQL condition ..."},{onClick:()=>M("sqlRight"),text:"SQL condition - right side ..."}];case"string":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>M("="),text:"Equals..."},{onClick:()=>M("<>"),text:"Does Not Equal..."},{onClick:()=>s("NULL"),text:"Is Null"},{onClick:()=>s("NOT NULL"),text:"Is Not Null"},{onClick:()=>s("EMPTY, NULL"),text:"Is Empty Or Null"},{onClick:()=>s("NOT EMPTY NOT NULL"),text:"Has Not Empty Value"},{divider:!0},{onClick:()=>M("+"),text:"Contains..."},{onClick:()=>M("~"),text:"Does Not Contain..."},{onClick:()=>M("^"),text:"Begins With..."},{onClick:()=>M("!^"),text:"Does Not Begin With..."},{onClick:()=>M("$"),text:"Ends With..."},{onClick:()=>M("!$"),text:"Does Not End With..."},{divider:!0},{onClick:()=>M("sql"),text:"SQL condition ..."},{onClick:()=>M("sqlRight"),text:"SQL condition - right side ..."}];case"mongo":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>M("="),text:"Equals..."},{onClick:()=>M("<>"),text:"Does Not Equal..."},{onClick:()=>s("EXISTS"),text:"Field exists"},{onClick:()=>s("NOT EXISTS"),text:"Field does not exist"},{onClick:()=>s("NOT EMPTY ARRAY"),text:"Array is not empty"},{onClick:()=>s("EMPTY ARRAY"),text:"Array is empty"},{onClick:()=>M(">"),text:"Greater Than..."},{onClick:()=>M(">="),text:"Greater Than Or Equal To..."},{onClick:()=>M("<"),text:"Less Than..."},{onClick:()=>M("<="),text:"Less Than Or Equal To..."},{divider:!0},{onClick:()=>M("+"),text:"Contains..."},{onClick:()=>M("~"),text:"Does Not Contain..."},{onClick:()=>M("^"),text:"Begins With..."},{onClick:()=>M("!^"),text:"Does Not Begin With..."},{onClick:()=>M("$"),text:"Ends With..."},{onClick:()=>M("!$"),text:"Does Not End With..."},{divider:!0},{onClick:()=>s("TRUE"),text:"Is True"},{onClick:()=>s("FALSE"),text:"Is False"}];case"eval":return[{onClick:()=>s(""),text:"Clear Filter"},{onClick:()=>F(),text:"Filter multiple values"},{onClick:()=>M("="),text:"Equals..."},{onClick:()=>M("<>"),text:"Does Not Equal..."},{onClick:()=>s("NULL"),text:"Is Null"},{onClick:()=>s("NOT NULL"),text:"Is Not Null"},{divider:!0},{onClick:()=>M(">"),text:"Greater Than..."},{onClick:()=>M(">="),text:"Greater Than Or Equal To..."},{onClick:()=>M("<"),text:"Less Than..."},{onClick:()=>M("<="),text:"Less Than Or Equal To..."},{divider:!0},{onClick:()=>M("+"),text:"Contains..."},{onClick:()=>M("~"),text:"Does Not Contain..."},{onClick:()=>M("^"),text:"Begins With..."},{onClick:()=>M("!^"),text:"Does Not Begin With..."},{onClick:()=>M("$"),text:"Ends With..."},{onClick:()=>M("!$"),text:"Does Not End With..."}]}}const x=z=>{n||(z.keyCode==keycodes.enter&&G(),z.keyCode==keycodes.escape&&s(""),z.keyCode==keycodes.downArrow&&(u&&u(),z.preventDefault()))};function B(z){var Y=void 0;window.clipboardData&&window.clipboardData.getData?Y=window.clipboardData.getData("Text"):z.clipboardData&&z.clipboardData.getData&&(Y=z.clipboardData.getData("text/plain")),Y&&Y.includes(`
`)&&(z.preventDefault(),s(lib$1.createMultiLineFilter("is",Y)))}function K(){showModal(DictionaryLookupModal,{conid:m,database:h,driver:p,pureName:f.refTableName,schemaName:f.refSchemaName,multiselect:!0,onConfirm:z=>s(z.join(","))})}function U(){showModal(ValueLookupModal,{conid:m,database:h,driver:p,jslid:g,multiselect:!0,schemaName:A,pureName:E,field:k||T,formatterFunction:C,onConfirm:z=>s(z.map(Y=>lib$1.getFilterValueExpression(Y)).join(","))})}function G(){(a||"")!=(S||"")&&s(S)}function W(z){bubble.call(this,o,z)}function q(z){binding_callbacks[z?"unshift":"push"](()=>{N=z,t(15,N)})}function H(){S=this.value,t(14,S),t(25,a)}return o.$$set=z=>{"isReadOnly"in z&&t(0,n=z.isReadOnly),"filterType"in z&&t(24,r=z.filterType),"filter"in z&&t(25,a=z.filter),"setFilter"in z&&t(26,s=z.setFilter),"showResizeSplitter"in z&&t(1,l=z.showResizeSplitter),"onFocusGrid"in z&&t(27,u=z.onFocusGrid),"onGetReference"in z&&t(28,d=z.onGetReference),"foreignKey"in z&&t(2,f=z.foreignKey),"conid"in z&&t(3,m=z.conid),"database"in z&&t(4,h=z.database),"driver"in z&&t(5,p=z.driver),"jslid"in z&&t(6,g=z.jslid),"customCommandIcon"in z&&t(7,b=z.customCommandIcon),"onCustomCommand"in z&&t(8,v=z.onCustomCommand),"customCommandTooltip"in z&&t(9,y=z.customCommandTooltip),"formatterFunction"in z&&t(29,C=z.formatterFunction),"pureName"in z&&t(10,E=z.pureName),"schemaName"in z&&t(30,A=z.schemaName),"columnName"in z&&t(11,k=z.columnName),"uniqueName"in z&&t(12,T=z.uniqueName),"placeholder"in z&&t(13,$=z.placeholder)},o.$$.update=()=>{if(o.$$.dirty[0]&268468224&&d&&N&&d(N),o.$$.dirty[0]&33554432&&t(14,S=a),o.$$.dirty[0]&16793600)try{t(17,R=!1),t(16,I=!1),S&&(lib$1.parseFilter(S,r),t(17,R=!0))}catch{t(16,I=!0)}},[n,l,f,m,h,p,g,b,v,y,E,k,T,$,S,N,I,R,D,x,B,K,U,G,r,a,s,u,d,C,A,W,q,H]}class DataFilterControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$40,create_fragment$42,safe_not_equal,{isReadOnly:0,filterType:24,filter:25,setFilter:26,showResizeSplitter:1,onFocusGrid:27,onGetReference:28,foreignKey:2,conid:3,database:4,driver:5,jslid:6,customCommandIcon:7,onCustomCommand:8,customCommandTooltip:9,formatterFunction:29,pureName:10,schemaName:30,columnName:11,uniqueName:12,placeholder:13},null,[-1,-1])}}const DataFilterControl$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataFilterControl},Symbol.toStringTag,{value:"Module"})),ManagerInnerContainer_svelte_svelte_type_style_lang="";function create_fragment$41(o){let e,t,n;const r=o[3].default,a=create_slot(r,o,o[2],null);return{c(){e=element("div"),a&&a.c(),attr(e,"style",t=`max-width: ${o[0]}px`),attr(e,"class","svelte-jy5e9j"),toggle_class(e,"isFlex",o[1])},m(s,l){insert(s,e,l),a&&a.m(e,null),n=!0},p(s,[l]){a&&a.p&&(!n||l&4)&&update_slot_base(a,r,s,s[2],n?get_slot_changes(r,s[2],l,null):get_all_dirty_from_scope(s[2]),null),(!n||l&1&&t!==(t=`max-width: ${s[0]}px`))&&attr(e,"style",t),(!n||l&2)&&toggle_class(e,"isFlex",s[1])},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s)}}}function instance$3$(o,e,t){let{$$slots:n={},$$scope:r}=e,{width:a}=e,{isFlex:s=!1}=e;return o.$$set=l=>{"width"in l&&t(0,a=l.width),"isFlex"in l&&t(1,s=l.isFlex),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class ManagerInnerContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$3$,create_fragment$41,safe_not_equal,{width:0,isFlex:1})}}function fullDisplayName({schemaName:o,pureName:e}){return o?`${o}.${e}`:e}const LargeButton_svelte_svelte_type_style_lang="";function create_fragment$40(o){let e,t,n,r,a,s,l,u;n=new FontIcon({props:{icon:o[0]}});const d=o[5].default,f=create_slot(d,o,o[4],null);return{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),f&&f.c(),attr(t,"class","icon svelte-1nx9a1b"),attr(a,"class","inner svelte-1nx9a1b"),attr(e,"class","button svelte-1nx9a1b"),toggle_class(e,"disabled",o[1]),toggle_class(e,"fillHorizontal",o[2])},m(m,h){insert(m,e,h),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),f&&f.m(a,null),s=!0,l||(u=listen(e,"click",o[3]),l=!0)},p(m,[h]){const p={};h&1&&(p.icon=m[0]),n.$set(p),f&&f.p&&(!s||h&16)&&update_slot_base(f,d,m,m[4],s?get_slot_changes(d,m[4],h,null):get_all_dirty_from_scope(m[4]),null),(!s||h&2)&&toggle_class(e,"disabled",m[1]),(!s||h&4)&&toggle_class(e,"fillHorizontal",m[2])},i(m){s||(transition_in(n.$$.fragment,m),transition_in(f,m),s=!0)},o(m){transition_out(n.$$.fragment,m),transition_out(f,m),s=!1},d(m){m&&detach(e),destroy_component(n),f&&f.d(m),l=!1,u()}}}function instance$3_(o,e,t){let{$$slots:n={},$$scope:r}=e,{icon:a}=e,{disabled:s=!1}=e,{fillHorizontal:l=!1}=e;const u=createEventDispatcher();function d(){s||u("click")}return o.$$set=f=>{"icon"in f&&t(0,a=f.icon),"disabled"in f&&t(1,s=f.disabled),"fillHorizontal"in f&&t(2,l=f.fillHorizontal),"$$scope"in f&&t(4,r=f.$$scope)},[a,s,l,d,r,n]}class LargeButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$3_,create_fragment$40,safe_not_equal,{icon:0,disabled:1,fillHorizontal:2})}}function create_default_slot$1r(o){let e;const t=o[3].default,n=create_slot(t,o,o[4],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&16)&&update_slot_base(n,t,r,r[4],e?get_slot_changes(t,r[4],a,null):get_all_dirty_from_scope(r[4]),null)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$3$(o){let e,t;const n=[o[2]];let r={$$slots:{default:[create_default_slot$1r]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new LargeButton({props:r}),e.$on("click",o[1]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&4?get_spread_update(n,[get_spread_object(a[2])]):{};s&16&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$3Z(o,e,t){let n,{$$slots:r={},$$scope:a}=e;const s=createEventDispatcher(),{values:l}=getFormContext();component_subscribe(o,l,d=>t(5,n=d));function u(){s("click",n)}return o.$$set=d=>{t(2,e=assign(assign({},e),exclude_internal_props(d))),"$$scope"in d&&t(4,a=d.$$scope)},e=exclude_internal_props(e),[l,u,e,r,a]}class LargeFormButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$3Z,create_fragment$3$,safe_not_equal,{})}}function create__4_slot$5(o){let e,t;function n(...r){return o[10](o[11],...r)}return e=new CheckboxField({props:{checked:!o[12].skip}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&4096&&(s.checked=!o[12].skip),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__1_slot$q(o){let e,t;function n(...r){return o[9](o[11],...r)}return e=new TextField({props:{value:o[12].src}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&4096&&(s.value=o[12].src),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__2_slot$p(o){let e,t;function n(...r){return o[8](o[11],...r)}return e=new TextField({props:{value:o[12].dst}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&4096&&(s.value=o[12].dst),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$l(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__3_slot$6(o){let e,t;function n(){return o[7](o[11])}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot_2$l]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&2049&&(s.onClick=n),a&8192&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$M(o){let e,t,n,r;return n=new TableControl({props:{columns:[{fieldName:"use",header:"Use",slot:4},{fieldName:"src",header:"Source column",slot:1},{fieldName:"dst",header:"Target column",slot:2},{fieldName:"actions",header:"",slot:3}],rows:o[0]||[],emptyMessage:"No transform defined",$$slots:{3:[create__3_slot$6,({index:a})=>({11:a}),({index:a})=>a?2048:0],2:[create__2_slot$p,({row:a,index:s})=>({12:a,11:s}),({row:a,index:s})=>(a?4096:0)|(s?2048:0)],1:[create__1_slot$q,({row:a,index:s})=>({12:a,11:s}),({row:a,index:s})=>(a?4096:0)|(s?2048:0)],4:[create__4_slot$5,({row:a,index:s})=>({12:a,11:s}),({row:a,index:s})=>(a?4096:0)|(s?2048:0)]},$$scope:{ctx:o}}}),{c(){e=element("div"),e.textContent="When no columns are defined in this mapping, source row is copied to target without any modifications",t=space(),create_component(n.$$.fragment),attr(e,"class","m-3")},m(a,s){insert(a,e,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&1&&(l.rows=a[0]||[]),s&14337&&(l.$$scope={dirty:s,ctx:a}),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&(detach(e),detach(t)),destroy_component(n,a)}}}function create_header_slot$o(o){let e,t;return{c(){e=element("div"),t=text(o[1]),attr(e,"slot","header")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r&2&&set_data(t,n[1])},d(n){n&&detach(e)}}}function create_footer_slot$n(o){let e,t,n,r,a,s,l,u;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[4]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),a=new FormStyledButton({props:{type:"button",value:"Add column"}}),a.$on("click",o[5]),l=new FormStyledButton({props:{type:"button",value:"Reset"}}),l.$on("click",o[6]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p:noop$1,i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create_default_slot$1q(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$n],header:[create_header_slot$o],default:[create_default_slot_1$M]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&8199&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3_(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1q]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&8207&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3Y(o,e,t){const n=["header","onConfirm","value"];let r=compute_rest_props(e,n),{header:a="Configure columns"}=e,{onConfirm:s}=e,{value:l=[]}=e;const u=()=>{closeCurrentModal(),s(!l||l.length==0?null:l)},d=()=>{t(0,l=[...l||[],{}])},f=()=>{t(0,l=[])},m=b=>{t(0,l=l.filter((v,y)=>y!=b))},h=(b,v)=>t(0,l=(l||[]).map((y,C)=>C==b?{...y,dst:v.target.value,ignore:!1}:y)),p=(b,v)=>t(0,l=(l||[]).map((y,C)=>C==b?{...y,src:v.target.value,ignore:!1}:y)),g=(b,v)=>t(0,l=(l||[]).map((y,C)=>C==b?{...y,skip:!v.target.checked,ignore:!1}:y));return o.$$set=b=>{e=assign(assign({},e),exclude_internal_props(b)),t(3,r=compute_rest_props(e,n)),"header"in b&&t(1,a=b.header),"onConfirm"in b&&t(2,s=b.onConfirm),"value"in b&&t(0,l=b.value)},[l,a,s,r,u,d,f,m,h,p,g]}class ColumnMapModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$3Y,create_fragment$3_,safe_not_equal,{header:1,onConfirm:2,value:0})}}const ColumnMapModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ColumnMapModal},Symbol.toStringTag,{value:"Module"}));function getDatabaseFileLabel(o){if(!o)return o;const e=o.match(/[\/]([^\/]+)$/);return e?e[1]:o}function getConnectionLabelCore(o,{allowExplicitDatabase:e=!0}={}){return o?o.displayName?o.displayName:o.singleDatabase&&o.server&&e&&o.defaultDatabase?`${o.defaultDatabase} on ${o.server}`:o.databaseFile?getDatabaseFileLabel(o.databaseFile):o.server?o.server:o.singleDatabase&&o.defaultDatabase?`${o.defaultDatabase}`:"":null}function getConnectionLabel(o,{allowExplicitDatabase:e=!0,showUnsaved:t=!1}={}){const n=getConnectionLabelCore(o,{allowExplicitDatabase:e});return n&&t&&(o!=null&&o.unsaved)?`${n} - unsaved`:n}function newQuery({tabComponent:o="QueryTab",icon:e="img sql-file",title:t=void 0,initialData:n=void 0,multiTabIndex:r=void 0,...a}={}){const s=getCurrentDatabase(),l=(s==null?void 0:s.connection)||{},u=s==null?void 0:s.name,d=`${getConnectionLabel(l)}
${u}`;openNewTab({title:t||"Query #",icon:e,tooltip:d,tabComponent:o,multiTabIndex:r,props:{...a,conid:l._id,database:u}},{editor:n})}function newQueryDesign(){return newQuery({tabComponent:"QueryDesignTab",icon:"img query-design"})}function newDiagram(){return newQuery({tabComponent:"DiagramTab",icon:"img diagram",title:"Diagram #"})}function newPerspective(){return newQuery({tabComponent:"PerspectiveTab",icon:"img perspective",title:"Perspective #"})}const JSONArrow_svelte_svelte_type_style_lang="";function create_fragment$3Z(o){let e,t,n,r;return{c(){e=element("div"),t=element("div"),t.textContent="",attr(t,"class","arrow svelte-1vyml86"),toggle_class(t,"expanded",o[0]),attr(e,"class","container svelte-1vyml86")},m(a,s){insert(a,e,s),append(e,t),n||(r=listen(e,"click",o[1]),n=!0)},p(a,[s]){s&1&&toggle_class(t,"expanded",a[0])},i:noop$1,o:noop$1,d(a){a&&detach(e),n=!1,r()}}}function instance$3X(o,e,t){let{expanded:n}=e;function r(a){bubble.call(this,o,a)}return o.$$set=a=>{"expanded"in a&&t(0,n=a.expanded)},[n,r]}class JSONArrow extends SvelteComponent{constructor(e){super(),init(this,e,instance$3X,create_fragment$3Z,safe_not_equal,{expanded:0})}}const JSONKey_svelte_svelte_type_style_lang="";function create_if_block$1G(o){let e,t,n,r,a,s;return{c(){e=element("label"),t=element("span"),n=text(o[0]),r=text(o[2]),attr(e,"class","svelte-1vlbacg"),toggle_class(e,"spaced",o[1])},m(l,u){insert(l,e,u),append(e,t),append(t,n),append(t,r),a||(s=listen(e,"click",o[5]),a=!0)},p(l,u){u&1&&set_data(n,l[0]),u&4&&set_data(r,l[2]),u&2&&toggle_class(e,"spaced",l[1])},d(l){l&&detach(e),a=!1,s()}}}function create_fragment$3Y(o){let e,t=o[3]&&o[0]&&create_if_block$1G(o);return{c(){t&&t.c(),e=empty()},m(n,r){t&&t.m(n,r),insert(n,e,r)},p(n,[r]){n[3]&&n[0]?t?t.p(n,r):(t=create_if_block$1G(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$1,o:noop$1,d(n){n&&detach(e),t&&t.d(n)}}}function instance$3W(o,e,t){let n,{key:r,isParentExpanded:a,isParentArray:s=!1,colon:l=":"}=e;function u(d){bubble.call(this,o,d)}return o.$$set=d=>{"key"in d&&t(0,r=d.key),"isParentExpanded"in d&&t(1,a=d.isParentExpanded),"isParentArray"in d&&t(4,s=d.isParentArray),"colon"in d&&t(2,l=d.colon)},o.$$.update=()=>{o.$$.dirty&19&&t(3,n=a||!s||r!=+r)},[r,a,l,n,s,u]}class JSONKey extends SvelteComponent{constructor(e){super(),init(this,e,instance$3W,create_fragment$3Y,safe_not_equal,{key:0,isParentExpanded:1,isParentArray:4,colon:2})}}const JSONNested_svelte_svelte_type_style_lang="";function get_each_context$B(o,e,t){const n=o.slice();return n[13]=e[t],n[25]=t,n}function create_if_block_3$v(o){let e,t;return e=new JSONArrow({props:{expanded:o[0]}}),e.$on("click",o[17]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.expanded=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_else_block$I(o){let e;return{c(){e=element("span"),e.textContent=""},m(t,n){insert(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function create_if_block$1F(o){let e,t,n,r,a,s=ensure_array_like(o[15]),l=[];for(let f=0;f<s.length;f+=1)l[f]=create_each_block$B(get_each_context$B(o,s,f));const u=f=>transition_out(l[f],1,1,()=>{l[f]=null});let d=o[15].length<o[7].length&&create_if_block_1$X();return{c(){e=element("ul");for(let f=0;f<l.length;f+=1)l[f].c();t=space(),d&&d.c(),attr(e,"class","svelte-rwxv37"),toggle_class(e,"collapse",!o[0])},m(f,m){insert(f,e,m);for(let h=0;h<l.length;h+=1)l[h]&&l[h].m(e,null);append(e,t),d&&d.m(e,null),n=!0,r||(a=listen(e,"click",o[18]),r=!0)},p(f,m){if(m&34705){s=ensure_array_like(f[15]);let h;for(h=0;h<s.length;h+=1){const p=get_each_context$B(f,s,h);l[h]?(l[h].p(p,m),transition_in(l[h],1)):(l[h]=create_each_block$B(p),l[h].c(),transition_in(l[h],1),l[h].m(e,t))}for(group_outros(),h=s.length;h<l.length;h+=1)u(h);check_outros()}f[15].length<f[7].length?d||(d=create_if_block_1$X(),d.c(),d.m(e,null)):d&&(d.d(1),d=null),(!n||m&1)&&toggle_class(e,"collapse",!f[0])},i(f){if(!n){for(let m=0;m<s.length;m+=1)transition_in(l[m]);n=!0}},o(f){l=l.filter(Boolean);for(let m=0;m<l.length;m+=1)transition_out(l[m]);n=!1},d(f){f&&detach(e),destroy_each(l,f),d&&d.d(),r=!1,a()}}}function create_if_block_2$I(o){let e;return{c(){e=element("span"),e.textContent=",",attr(e,"class","comma svelte-rwxv37")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_each_block$B(o){let e,t,n,r;e=new JSONNode({props:{key:o[8](o[13]),isParentExpanded:o[0],isParentArray:o[4],value:o[0]?o[9](o[13]):o[10](o[13])}});let a=!o[0]&&o[25]<o[7].length-1&&create_if_block_2$I();return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,l){const u={};l&33024&&(u.key=s[8](s[13])),l&1&&(u.isParentExpanded=s[0]),l&16&&(u.isParentArray=s[4]),l&34305&&(u.value=s[0]?s[9](s[13]):s[10](s[13])),e.$set(u),!s[0]&&s[25]<s[7].length-1?a||(a=create_if_block_2$I(),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null)},i(s){r||(transition_in(e.$$.fragment,s),r=!0)},o(s){transition_out(e.$$.fragment,s),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}function create_if_block_1$X(o){let e;return{c(){e=element("span"),e.textContent=""},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$3X(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=o[11]&&o[2]&&create_if_block_3$v(o);r=new JSONKey({props:{key:o[13],colon:o[16].colon,isParentExpanded:o[2],isParentArray:o[3]}}),r.$on("click",o[17]);const A=[create_if_block$1F,create_else_block$I],k=[];function T($,S){return $[2]?0:1}return m=T(o),h=k[m]=A[m](o),{c(){e=element("li"),t=element("label"),E&&E.c(),n=space(),create_component(r.$$.fragment),a=space(),s=element("span"),l=element("span"),u=text(o[1]),d=text(o[5]),f=space(),h.c(),p=space(),g=element("span"),b=text(o[6]),attr(t,"class","svelte-rwxv37"),attr(e,"class","svelte-rwxv37"),toggle_class(e,"indent",o[2]),toggle_class(e,"jsonValueHolder",!!o[12])},m($,S){insert($,e,S),append(e,t),E&&E.m(t,null),append(t,n),mount_component(r,t,null),append(t,a),append(t,s),append(s,l),append(l,u),append(s,d),append(e,f),k[m].m(e,null),append(e,p),append(e,g),append(g,b),o[21](e),v=!0,y||(C=listen(s,"click",o[17]),y=!0)},p($,[S]){$[11]&&$[2]?E?(E.p($,S),S&2052&&transition_in(E,1)):(E=create_if_block_3$v($),E.c(),transition_in(E,1),E.m(t,n)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros());const I={};S&8192&&(I.key=$[13]),S&4&&(I.isParentExpanded=$[2]),S&8&&(I.isParentArray=$[3]),r.$set(I),(!v||S&2)&&set_data(u,$[1]),(!v||S&32)&&set_data(d,$[5]);let R=m;m=T($),m===R?k[m].p($,S):(group_outros(),transition_out(k[R],1,1,()=>{k[R]=null}),check_outros(),h=k[m],h?h.p($,S):(h=k[m]=A[m]($),h.c()),transition_in(h,1),h.m(e,p)),(!v||S&64)&&set_data(b,$[6]),(!v||S&4)&&toggle_class(e,"indent",$[2]),(!v||S&4096)&&toggle_class(e,"jsonValueHolder",!!$[12])},i($){v||(transition_in(E),transition_in(r.$$.fragment,$),transition_in(h),v=!0)},o($){transition_out(E),transition_out(r.$$.fragment,$),transition_out(h),v=!1},d($){$&&detach(e),E&&E.d(),destroy_component(r),k[m].d(),o[21](null),y=!1,C()}}}function instance$3V(o,e,t){let n,{key:r,keys:a,colon:s=":",label:l="",isParentExpanded:u,isParentArray:d,isArray:f=!1,bracketOpen:m,bracketClose:h}=e,{previewKeys:p=a}=e,{getKey:g=N=>N}=e,{getValue:b=N=>N}=e,{getPreviewValue:v=b}=e,{expanded:y=!1,expandable:C=!0}=e,{elementValue:E=null}=e;const A=getContext("json-tree-context-key");setContext("json-tree-context-key",{...A,colon:s});const k=getContext("json-tree-element-data"),T=getContext("json-tree-sliced-key-count");function $(){t(0,y=!y)}function S(){t(0,y=!0)}let I;function R(N){binding_callbacks[N?"unshift":"push"](()=>{I=N,t(14,I)})}return o.$$set=N=>{"key"in N&&t(13,r=N.key),"keys"in N&&t(19,a=N.keys),"colon"in N&&t(20,s=N.colon),"label"in N&&t(1,l=N.label),"isParentExpanded"in N&&t(2,u=N.isParentExpanded),"isParentArray"in N&&t(3,d=N.isParentArray),"isArray"in N&&t(4,f=N.isArray),"bracketOpen"in N&&t(5,m=N.bracketOpen),"bracketClose"in N&&t(6,h=N.bracketClose),"previewKeys"in N&&t(7,p=N.previewKeys),"getKey"in N&&t(8,g=N.getKey),"getValue"in N&&t(9,b=N.getValue),"getPreviewValue"in N&&t(10,v=N.getPreviewValue),"expanded"in N&&t(0,y=N.expanded),"expandable"in N&&t(11,C=N.expandable),"elementValue"in N&&t(12,E=N.elementValue)},o.$$.update=()=>{o.$$.dirty&4&&(u||t(0,y=!1)),o.$$.dirty&524417&&t(15,n=y?a:p.slice(0,T||5)),o.$$.dirty&20480&&I&&k&&E&&k.set(I,E)},[y,l,u,d,f,m,h,p,g,b,v,C,E,r,I,n,A,$,S,a,s,R]}class JSONNested extends SvelteComponent{constructor(e){super(),init(this,e,instance$3V,create_fragment$3X,safe_not_equal,{key:13,keys:19,colon:20,label:1,isParentExpanded:2,isParentArray:3,isArray:4,bracketOpen:5,bracketClose:6,previewKeys:7,getKey:8,getValue:9,getPreviewValue:10,expanded:0,expandable:11,elementValue:12})}}function create_fragment$3W(o){let e,t;return e=new JSONNested({props:{key:o[0],expanded:o[5],isParentExpanded:o[2],isParentArray:o[3],keys:o[7],previewKeys:o[7],getValue:o[8],label:o[6]||`${o[4]} `,bracketOpen:"{",bracketClose:"}",elementValue:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.key=n[0]),r&32&&(a.expanded=n[5]),r&4&&(a.isParentExpanded=n[2]),r&8&&(a.isParentArray=n[3]),r&128&&(a.keys=n[7]),r&128&&(a.previewKeys=n[7]),r&80&&(a.label=n[6]||`${n[4]} `),r&2&&(a.elementValue=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3U(o,e,t){let n,{key:r,value:a,isParentExpanded:s,isParentArray:l,nodeType:u}=e,{expanded:d=!1}=e,{labelOverride:f=null}=e;function m(h){return a[h]}return o.$$set=h=>{"key"in h&&t(0,r=h.key),"value"in h&&t(1,a=h.value),"isParentExpanded"in h&&t(2,s=h.isParentExpanded),"isParentArray"in h&&t(3,l=h.isParentArray),"nodeType"in h&&t(4,u=h.nodeType),"expanded"in h&&t(5,d=h.expanded),"labelOverride"in h&&t(6,f=h.labelOverride)},o.$$.update=()=>{o.$$.dirty&2&&t(7,n=Object.getOwnPropertyNames(a))},[r,a,s,l,u,d,f,n,m]}class JSONObjectNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3U,create_fragment$3W,safe_not_equal,{key:0,value:1,isParentExpanded:2,isParentArray:3,nodeType:4,expanded:5,labelOverride:6})}}function create_fragment$3V(o){let e,t;return e=new JSONNested({props:{key:o[0],expanded:o[4],isParentExpanded:o[2],isParentArray:o[3],isArray:!0,keys:o[5],previewKeys:o[6],getValue:o[7],label:"Array("+o[1].length+")",bracketOpen:"[",bracketClose:"]",elementValue:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.key=n[0]),r&16&&(a.expanded=n[4]),r&4&&(a.isParentExpanded=n[2]),r&8&&(a.isParentArray=n[3]),r&32&&(a.keys=n[5]),r&64&&(a.previewKeys=n[6]),r&2&&(a.label="Array("+n[1].length+")"),r&2&&(a.elementValue=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3T(o,e,t){let n,r,{key:a,value:s,isParentExpanded:l,isParentArray:u}=e,{expanded:d=!1}=e;const f=new Set(["length"]);function m(h){return s[h]}return o.$$set=h=>{"key"in h&&t(0,a=h.key),"value"in h&&t(1,s=h.value),"isParentExpanded"in h&&t(2,l=h.isParentExpanded),"isParentArray"in h&&t(3,u=h.isParentArray),"expanded"in h&&t(4,d=h.expanded)},o.$$.update=()=>{o.$$.dirty&2&&t(5,n=Object.getOwnPropertyNames(s)),o.$$.dirty&32&&t(6,r=n.filter(h=>!f.has(h)))},[a,s,l,u,d,n,r,m]}class JSONArrayNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3T,create_fragment$3V,safe_not_equal,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}function create_fragment$3U(o){let e,t;return e=new JSONNested({props:{key:o[0],isParentExpanded:o[1],isParentArray:o[2],keys:o[4],getKey:getKey$1,getValue:getValue$2,isArray:!0,label:o[3]+"("+o[4].length+")",bracketOpen:"{",bracketClose:"}"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.key=n[0]),r&2&&(a.isParentExpanded=n[1]),r&4&&(a.isParentArray=n[2]),r&16&&(a.keys=n[4]),r&24&&(a.label=n[3]+"("+n[4].length+")"),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function getKey$1(o){return String(o[0])}function getValue$2(o){return o[1]}function instance$3S(o,e,t){let{key:n,value:r,isParentExpanded:a,isParentArray:s,nodeType:l}=e,u=[];return o.$$set=d=>{"key"in d&&t(0,n=d.key),"value"in d&&t(5,r=d.value),"isParentExpanded"in d&&t(1,a=d.isParentExpanded),"isParentArray"in d&&t(2,s=d.isParentArray),"nodeType"in d&&t(3,l=d.nodeType)},o.$$.update=()=>{if(o.$$.dirty&32){let d=[],f=0;for(const m of r)d.push([f++,m]);t(4,u=d)}},[n,a,s,l,u,r]}class JSONIterableArrayNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3S,create_fragment$3U,safe_not_equal,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}class MapEntry{constructor(e,t){this.key=e,this.value=t}}function create_fragment$3T(o){let e,t;return e=new JSONNested({props:{key:o[0],isParentExpanded:o[1],isParentArray:o[2],keys:o[4],getKey,getValue:getValue$1,label:o[3]+"("+o[4].length+")",colon:"",bracketOpen:"{",bracketClose:"}"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.key=n[0]),r&2&&(a.isParentExpanded=n[1]),r&4&&(a.isParentArray=n[2]),r&16&&(a.keys=n[4]),r&24&&(a.label=n[3]+"("+n[4].length+")"),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function getKey(o){return o[0]}function getValue$1(o){return o[1]}function instance$3R(o,e,t){let{key:n,value:r,isParentExpanded:a,isParentArray:s,nodeType:l}=e,u=[];return o.$$set=d=>{"key"in d&&t(0,n=d.key),"value"in d&&t(5,r=d.value),"isParentExpanded"in d&&t(1,a=d.isParentExpanded),"isParentArray"in d&&t(2,s=d.isParentArray),"nodeType"in d&&t(3,l=d.nodeType)},o.$$.update=()=>{if(o.$$.dirty&32){let d=[],f=0;for(const m of r)d.push([f++,new MapEntry(m[0],m[1])]);t(4,u=d)}},[n,a,s,l,u,r]}class JSONIterableMapNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3R,create_fragment$3T,safe_not_equal,{key:0,value:5,isParentExpanded:1,isParentArray:2,nodeType:3})}}function create_fragment$3S(o){let e,t;return e=new JSONNested({props:{expanded:o[4],isParentExpanded:o[2],isParentArray:o[3],key:o[2]?String(o[0]):o[1].key,keys:o[5],getValue:o[6],label:o[2]?"Entry ":"=> ",bracketOpen:"{",bracketClose:"}"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&16&&(a.expanded=n[4]),r&4&&(a.isParentExpanded=n[2]),r&8&&(a.isParentArray=n[3]),r&7&&(a.key=n[2]?String(n[0]):n[1].key),r&4&&(a.label=n[2]?"Entry ":"=> "),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3Q(o,e,t){let{key:n,value:r,isParentExpanded:a,isParentArray:s}=e,{expanded:l=!1}=e;const u=["key","value"];function d(f){return r[f]}return o.$$set=f=>{"key"in f&&t(0,n=f.key),"value"in f&&t(1,r=f.value),"isParentExpanded"in f&&t(2,a=f.isParentExpanded),"isParentArray"in f&&t(3,s=f.isParentArray),"expanded"in f&&t(4,l=f.expanded)},[n,r,a,s,l,u,d]}class JSONMapEntryNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3Q,create_fragment$3S,safe_not_equal,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4})}}const JSONValueNode_svelte_svelte_type_style_lang="";function create_fragment$3R(o){let e,t,n,r,a=(o[2]?o[2](o[1]):o[1])+"",s,l,u;return t=new JSONKey({props:{key:o[0],colon:o[6],isParentExpanded:o[3],isParentArray:o[4]}}),{c(){e=element("li"),create_component(t.$$.fragment),n=space(),r=element("span"),s=text(a),attr(r,"class",l=null_to_empty(o[5])+" svelte-3bjyvl"),attr(e,"class","svelte-3bjyvl"),toggle_class(e,"indent",o[3])},m(d,f){insert(d,e,f),mount_component(t,e,null),append(e,n),append(e,r),append(r,s),u=!0},p(d,[f]){const m={};f&1&&(m.key=d[0]),f&8&&(m.isParentExpanded=d[3]),f&16&&(m.isParentArray=d[4]),t.$set(m),(!u||f&6)&&a!==(a=(d[2]?d[2](d[1]):d[1])+"")&&set_data(s,a),(!u||f&32&&l!==(l=null_to_empty(d[5])+" svelte-3bjyvl"))&&attr(r,"class",l),(!u||f&8)&&toggle_class(e,"indent",d[3])},i(d){u||(transition_in(t.$$.fragment,d),u=!0)},o(d){transition_out(t.$$.fragment,d),u=!1},d(d){d&&detach(e),destroy_component(t)}}}function instance$3P(o,e,t){let{key:n,value:r,valueGetter:a=null,isParentExpanded:s,isParentArray:l,nodeType:u}=e;const{colon:d}=getContext("json-tree-context-key");return o.$$set=f=>{"key"in f&&t(0,n=f.key),"value"in f&&t(1,r=f.value),"valueGetter"in f&&t(2,a=f.valueGetter),"isParentExpanded"in f&&t(3,s=f.isParentExpanded),"isParentArray"in f&&t(4,l=f.isParentArray),"nodeType"in f&&t(5,u=f.nodeType)},[n,r,a,s,l,u,d]}class JSONValueNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3P,create_fragment$3R,safe_not_equal,{key:0,value:1,valueGetter:2,isParentExpanded:3,isParentArray:4,nodeType:5})}}const ErrorNode_svelte_svelte_type_style_lang="";function get_each_context$A(o,e,t){const n=o.slice();return n[8]=e[t],n[10]=t,n}function create_if_block_2$H(o){let e,t;return e=new JSONArrow({props:{expanded:o[0]}}),e.$on("click",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.expanded=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1E(o){let e,t,n=o[0]&&create_if_block_1$W(o);return{c(){e=element("ul"),n&&n.c(),attr(e,"class","svelte-1ca3gb2"),toggle_class(e,"collapse",!o[0])},m(r,a){insert(r,e,a),n&&n.m(e,null),t=!0},p(r,a){r[0]?n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block_1$W(r),n.c(),transition_in(n,1),n.m(e,null)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()),(!t||a&1)&&toggle_class(e,"collapse",!r[0])},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d()}}}function create_if_block_1$W(o){let e,t,n,r,a,s,l;e=new JSONNode({props:{key:"message",value:o[2].message}}),r=new JSONKey({props:{key:"stack",colon:":",isParentExpanded:o[3]}});let u=ensure_array_like(o[5]),d=[];for(let f=0;f<u.length;f+=1)d[f]=create_each_block$A(get_each_context$A(o,u,f));return{c(){create_component(e.$$.fragment),t=space(),n=element("li"),create_component(r.$$.fragment),a=space(),s=element("span");for(let f=0;f<d.length;f+=1)d[f].c();attr(n,"class","svelte-1ca3gb2")},m(f,m){mount_component(e,f,m),insert(f,t,m),insert(f,n,m),mount_component(r,n,null),append(n,a),append(n,s);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(s,null);l=!0},p(f,m){const h={};m&4&&(h.value=f[2].message),e.$set(h);const p={};if(m&8&&(p.isParentExpanded=f[3]),r.$set(p),m&32){u=ensure_array_like(f[5]);let g;for(g=0;g<u.length;g+=1){const b=get_each_context$A(f,u,g);d[g]?d[g].p(b,m):(d[g]=create_each_block$A(b),d[g].c(),d[g].m(s,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=u.length}},i(f){l||(transition_in(e.$$.fragment,f),transition_in(r.$$.fragment,f),l=!0)},o(f){transition_out(e.$$.fragment,f),transition_out(r.$$.fragment,f),l=!1},d(f){f&&(detach(t),detach(n)),destroy_component(e,f),destroy_component(r),destroy_each(d,f)}}}function create_each_block$A(o){let e,t=o[8]+"",n,r;return{c(){e=element("span"),n=text(t),r=element("br"),attr(e,"class","svelte-1ca3gb2"),toggle_class(e,"indent",o[10]>0)},m(a,s){insert(a,e,s),append(e,n),insert(a,r,s)},p(a,s){s&32&&t!==(t=a[8]+"")&&set_data(n,t)},d(a){a&&(detach(e),detach(r))}}}function create_fragment$3Q(o){let e,t,n,r,a,s,l=(o[0]?"":o[2].message)+"",u,d,f,m,h,p=o[3]&&create_if_block_2$H(o);n=new JSONKey({props:{key:o[1],colon:o[6].colon,isParentExpanded:o[3],isParentArray:o[4]}});let g=o[3]&&create_if_block$1E(o);return{c(){e=element("li"),p&&p.c(),t=space(),create_component(n.$$.fragment),r=space(),a=element("span"),s=text("Error: "),u=text(l),d=space(),g&&g.c(),attr(e,"class","svelte-1ca3gb2"),toggle_class(e,"indent",o[3])},m(b,v){insert(b,e,v),p&&p.m(e,null),append(e,t),mount_component(n,e,null),append(e,r),append(e,a),append(a,s),append(a,u),append(e,d),g&&g.m(e,null),f=!0,m||(h=listen(a,"click",o[7]),m=!0)},p(b,[v]){b[3]?p?(p.p(b,v),v&8&&transition_in(p,1)):(p=create_if_block_2$H(b),p.c(),transition_in(p,1),p.m(e,t)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros());const y={};v&2&&(y.key=b[1]),v&8&&(y.isParentExpanded=b[3]),v&16&&(y.isParentArray=b[4]),n.$set(y),(!f||v&5)&&l!==(l=(b[0]?"":b[2].message)+"")&&set_data(u,l),b[3]?g?(g.p(b,v),v&8&&transition_in(g,1)):(g=create_if_block$1E(b),g.c(),transition_in(g,1),g.m(e,null)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros()),(!f||v&8)&&toggle_class(e,"indent",b[3])},i(b){f||(transition_in(p),transition_in(n.$$.fragment,b),transition_in(g),f=!0)},o(b){transition_out(p),transition_out(n.$$.fragment,b),transition_out(g),f=!1},d(b){b&&detach(e),p&&p.d(),destroy_component(n),g&&g.d(),m=!1,h()}}}function instance$3O(o,e,t){let n,{key:r,value:a,isParentExpanded:s,isParentArray:l}=e,{expanded:u=!1}=e;const d=getContext("json-tree-context-key");setContext("json-tree-context-key",{...d,colon:":"});function f(){t(0,u=!u)}return o.$$set=m=>{"key"in m&&t(1,r=m.key),"value"in m&&t(2,a=m.value),"isParentExpanded"in m&&t(3,s=m.isParentExpanded),"isParentArray"in m&&t(4,l=m.isParentArray),"expanded"in m&&t(0,u=m.expanded)},o.$$.update=()=>{o.$$.dirty&4&&t(5,n=a.stack.split(`
`)),o.$$.dirty&8&&(s||t(0,u=!1))},[u,r,a,s,l,n,d,f]}class ErrorNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3O,create_fragment$3Q,safe_not_equal,{key:1,value:2,isParentExpanded:3,isParentArray:4,expanded:0})}}function objType(o){const e=Object.prototype.toString.call(o).slice(8,-1);return e==="Object"?typeof o[Symbol.iterator]=="function"?"Iterable":o.constructor.name:e}function create_fragment$3P(o){let e,t,n;var r=o[8];function a(s){return{props:{key:s[0],value:s[1],isParentExpanded:s[2],isParentArray:s[3],nodeType:s[6],valueGetter:s[7],expanded:s[4],labelOverride:s[5]}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,[l]){const u={};if(l&1&&(u.key=s[0]),l&2&&(u.value=s[1]),l&4&&(u.isParentExpanded=s[2]),l&8&&(u.isParentArray=s[3]),l&64&&(u.nodeType=s[6]),l&128&&(u.valueGetter=s[7]),l&16&&(u.expanded=s[4]),l&32&&(u.labelOverride=s[5]),l&256&&r!==(r=s[8])){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function instance$3N(o,e,t){let n,r,a,{key:s}=e,{value:l}=e,{isParentExpanded:u}=e,{isParentArray:d}=e,{expanded:f=!!getContext("json-tree-default-expanded")}=e,{labelOverride:m=null}=e;function h(g){switch(g){case"Object":return JSONObjectNode;case"Error":return ErrorNode;case"Array":return JSONArrayNode;case"Iterable":case"Map":case"Set":return typeof l.set=="function"?JSONIterableMapNode:JSONIterableArrayNode;case"MapEntry":return JSONMapEntryNode;default:return JSONValueNode}}function p(g){switch(g){case"Object":case"Error":case"Array":case"Iterable":case"Map":case"Set":case"MapEntry":case"Number":return;case"String":return b=>`"${b}"`;case"Boolean":return b=>b?"true":"false";case"Date":return b=>b.toISOString();case"Null":return()=>"null";case"Undefined":return()=>"undefined";case"Function":case"Symbol":return b=>b.toString();default:return()=>`<${g}>`}}return o.$$set=g=>{"key"in g&&t(0,s=g.key),"value"in g&&t(1,l=g.value),"isParentExpanded"in g&&t(2,u=g.isParentExpanded),"isParentArray"in g&&t(3,d=g.isParentArray),"expanded"in g&&t(4,f=g.expanded),"labelOverride"in g&&t(5,m=g.labelOverride)},o.$$.update=()=>{o.$$.dirty&2&&t(6,n=objType(l)),o.$$.dirty&64&&t(8,r=h(n)),o.$$.dirty&64&&t(7,a=p(n))},[s,l,u,d,f,m,n,a,r]}class JSONNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$3N,create_fragment$3P,safe_not_equal,{key:0,value:1,isParentExpanded:2,isParentArray:3,expanded:4,labelOverride:5})}}var jsYaml$1={},loader$1={},common$6={};function isNothing(o){return typeof o>"u"||o===null}function isObject$1(o){return typeof o=="object"&&o!==null}function toArray(o){return Array.isArray(o)?o:isNothing(o)?[]:[o]}function extend(o,e){var t,n,r,a;if(e)for(a=Object.keys(e),t=0,n=a.length;t<n;t+=1)r=a[t],o[r]=e[r];return o}function repeat(o,e){var t="",n;for(n=0;n<e;n+=1)t+=o;return t}function isNegativeZero(o){return o===0&&Number.NEGATIVE_INFINITY===1/o}common$6.isNothing=isNothing;common$6.isObject=isObject$1;common$6.toArray=toArray;common$6.repeat=repeat;common$6.isNegativeZero=isNegativeZero;common$6.extend=extend;function YAMLException$4(o,e){Error.call(this),this.name="YAMLException",this.reason=o,this.mark=e,this.message=(this.reason||"(unknown reason)")+(this.mark?" "+this.mark.toString():""),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack||""}YAMLException$4.prototype=Object.create(Error.prototype);YAMLException$4.prototype.constructor=YAMLException$4;YAMLException$4.prototype.toString=function o(e){var t=this.name+": ";return t+=this.reason||"(unknown reason)",!e&&this.mark&&(t+=" "+this.mark.toString()),t};var exception=YAMLException$4,common$5=common$6;function Mark$1(o,e,t,n,r){this.name=o,this.buffer=e,this.position=t,this.line=n,this.column=r}Mark$1.prototype.getSnippet=function o(e,t){var n,r,a,s,l;if(!this.buffer)return null;for(e=e||4,t=t||75,n="",r=this.position;r>0&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(r-1))===-1;)if(r-=1,this.position-r>t/2-1){n=" ... ",r+=5;break}for(a="",s=this.position;s<this.buffer.length&&`\0\r
\u2028\u2029`.indexOf(this.buffer.charAt(s))===-1;)if(s+=1,s-this.position>t/2-1){a=" ... ",s-=5;break}return l=this.buffer.slice(r,s),common$5.repeat(" ",e)+n+l+a+`
`+common$5.repeat(" ",e+this.position-r+n.length)+"^"};Mark$1.prototype.toString=function o(e){var t,n="";return this.name&&(n+='in "'+this.name+'" '),n+="at line "+(this.line+1)+", column "+(this.column+1),e||(t=this.getSnippet(),t&&(n+=`:
`+t)),n};var mark=Mark$1,YAMLException$3=exception,TYPE_CONSTRUCTOR_OPTIONS=["kind","resolve","construct","instanceOf","predicate","represent","defaultStyle","styleAliases"],YAML_NODE_KINDS=["scalar","sequence","mapping"];function compileStyleAliases(o){var e={};return o!==null&&Object.keys(o).forEach(function(t){o[t].forEach(function(n){e[String(n)]=t})}),e}function Type$h(o,e){if(e=e||{},Object.keys(e).forEach(function(t){if(TYPE_CONSTRUCTOR_OPTIONS.indexOf(t)===-1)throw new YAMLException$3('Unknown option "'+t+'" is met in definition of "'+o+'" YAML type.')}),this.tag=o,this.kind=e.kind||null,this.resolve=e.resolve||function(){return!0},this.construct=e.construct||function(t){return t},this.instanceOf=e.instanceOf||null,this.predicate=e.predicate||null,this.represent=e.represent||null,this.defaultStyle=e.defaultStyle||null,this.styleAliases=compileStyleAliases(e.styleAliases||null),YAML_NODE_KINDS.indexOf(this.kind)===-1)throw new YAMLException$3('Unknown kind "'+this.kind+'" is specified for "'+o+'" YAML type.')}var type=Type$h,common$4=common$6,YAMLException$2=exception,Type$g=type;function compileList(o,e,t){var n=[];return o.include.forEach(function(r){t=compileList(r,e,t)}),o[e].forEach(function(r){t.forEach(function(a,s){a.tag===r.tag&&a.kind===r.kind&&n.push(s)}),t.push(r)}),t.filter(function(r,a){return n.indexOf(a)===-1})}function compileMap(){var o={scalar:{},sequence:{},mapping:{},fallback:{}},e,t;function n(r){o[r.kind][r.tag]=o.fallback[r.tag]=r}for(e=0,t=arguments.length;e<t;e+=1)arguments[e].forEach(n);return o}function Schema$5(o){this.include=o.include||[],this.implicit=o.implicit||[],this.explicit=o.explicit||[],this.implicit.forEach(function(e){if(e.loadKind&&e.loadKind!=="scalar")throw new YAMLException$2("There is a non-scalar type in the implicit list of a schema. Implicit resolving of such types is not supported.")}),this.compiledImplicit=compileList(this,"implicit",[]),this.compiledExplicit=compileList(this,"explicit",[]),this.compiledTypeMap=compileMap(this.compiledImplicit,this.compiledExplicit)}Schema$5.DEFAULT=null;Schema$5.create=function o(){var e,t;switch(arguments.length){case 1:e=Schema$5.DEFAULT,t=arguments[0];break;case 2:e=arguments[0],t=arguments[1];break;default:throw new YAMLException$2("Wrong number of arguments for Schema.create function")}if(e=common$4.toArray(e),t=common$4.toArray(t),!e.every(function(n){return n instanceof Schema$5}))throw new YAMLException$2("Specified list of super schemas (or a single Schema object) contains a non-Schema object.");if(!t.every(function(n){return n instanceof Type$g}))throw new YAMLException$2("Specified list of YAML types (or a single Type object) contains a non-Type object.");return new Schema$5({include:e,explicit:t})};var schema=Schema$5,Type$f=type,str=new Type$f("tag:yaml.org,2002:str",{kind:"scalar",construct:function(o){return o!==null?o:""}}),Type$e=type,seq=new Type$e("tag:yaml.org,2002:seq",{kind:"sequence",construct:function(o){return o!==null?o:[]}}),Type$d=type,map$3=new Type$d("tag:yaml.org,2002:map",{kind:"mapping",construct:function(o){return o!==null?o:{}}}),Schema$4=schema,failsafe=new Schema$4({explicit:[str,seq,map$3]}),Type$c=type;function resolveYamlNull(o){if(o===null)return!0;var e=o.length;return e===1&&o==="~"||e===4&&(o==="null"||o==="Null"||o==="NULL")}function constructYamlNull(){return null}function isNull(o){return o===null}var _null=new Type$c("tag:yaml.org,2002:null",{kind:"scalar",resolve:resolveYamlNull,construct:constructYamlNull,predicate:isNull,represent:{canonical:function(){return"~"},lowercase:function(){return"null"},uppercase:function(){return"NULL"},camelcase:function(){return"Null"}},defaultStyle:"lowercase"}),Type$b=type;function resolveYamlBoolean(o){if(o===null)return!1;var e=o.length;return e===4&&(o==="true"||o==="True"||o==="TRUE")||e===5&&(o==="false"||o==="False"||o==="FALSE")}function constructYamlBoolean(o){return o==="true"||o==="True"||o==="TRUE"}function isBoolean(o){return Object.prototype.toString.call(o)==="[object Boolean]"}var bool=new Type$b("tag:yaml.org,2002:bool",{kind:"scalar",resolve:resolveYamlBoolean,construct:constructYamlBoolean,predicate:isBoolean,represent:{lowercase:function(o){return o?"true":"false"},uppercase:function(o){return o?"TRUE":"FALSE"},camelcase:function(o){return o?"True":"False"}},defaultStyle:"lowercase"}),common$3=common$6,Type$a=type;function isHexCode(o){return 48<=o&&o<=57||65<=o&&o<=70||97<=o&&o<=102}function isOctCode(o){return 48<=o&&o<=55}function isDecCode(o){return 48<=o&&o<=57}function resolveYamlInteger(o){if(o===null)return!1;var e=o.length,t=0,n=!1,r;if(!e)return!1;if(r=o[t],(r==="-"||r==="+")&&(r=o[++t]),r==="0"){if(t+1===e)return!0;if(r=o[++t],r==="b"){for(t++;t<e;t++)if(r=o[t],r!=="_"){if(r!=="0"&&r!=="1")return!1;n=!0}return n&&r!=="_"}if(r==="x"){for(t++;t<e;t++)if(r=o[t],r!=="_"){if(!isHexCode(o.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}for(;t<e;t++)if(r=o[t],r!=="_"){if(!isOctCode(o.charCodeAt(t)))return!1;n=!0}return n&&r!=="_"}if(r==="_")return!1;for(;t<e;t++)if(r=o[t],r!=="_"){if(r===":")break;if(!isDecCode(o.charCodeAt(t)))return!1;n=!0}return!n||r==="_"?!1:r!==":"?!0:/^(:[0-5]?[0-9])+$/.test(o.slice(t))}function constructYamlInteger(o){var e=o,t=1,n,r,a=[];return e.indexOf("_")!==-1&&(e=e.replace(/_/g,"")),n=e[0],(n==="-"||n==="+")&&(n==="-"&&(t=-1),e=e.slice(1),n=e[0]),e==="0"?0:n==="0"?e[1]==="b"?t*parseInt(e.slice(2),2):e[1]==="x"?t*parseInt(e,16):t*parseInt(e,8):e.indexOf(":")!==-1?(e.split(":").forEach(function(s){a.unshift(parseInt(s,10))}),e=0,r=1,a.forEach(function(s){e+=s*r,r*=60}),t*e):t*parseInt(e,10)}function isInteger(o){return Object.prototype.toString.call(o)==="[object Number]"&&o%1===0&&!common$3.isNegativeZero(o)}var int=new Type$a("tag:yaml.org,2002:int",{kind:"scalar",resolve:resolveYamlInteger,construct:constructYamlInteger,predicate:isInteger,represent:{binary:function(o){return o>=0?"0b"+o.toString(2):"-0b"+o.toString(2).slice(1)},octal:function(o){return o>=0?"0"+o.toString(8):"-0"+o.toString(8).slice(1)},decimal:function(o){return o.toString(10)},hexadecimal:function(o){return o>=0?"0x"+o.toString(16).toUpperCase():"-0x"+o.toString(16).toUpperCase().slice(1)}},defaultStyle:"decimal",styleAliases:{binary:[2,"bin"],octal:[8,"oct"],decimal:[10,"dec"],hexadecimal:[16,"hex"]}}),common$2=common$6,Type$9=type,YAML_FLOAT_PATTERN=new RegExp("^(?:[-+]?(?:0|[1-9][0-9_]*)(?:\\.[0-9_]*)?(?:[eE][-+]?[0-9]+)?|\\.[0-9_]+(?:[eE][-+]?[0-9]+)?|[-+]?[0-9][0-9_]*(?::[0-5]?[0-9])+\\.[0-9_]*|[-+]?\\.(?:inf|Inf|INF)|\\.(?:nan|NaN|NAN))$");function resolveYamlFloat(o){return!(o===null||!YAML_FLOAT_PATTERN.test(o)||o[o.length-1]==="_")}function constructYamlFloat(o){var e,t,n,r;return e=o.replace(/_/g,"").toLowerCase(),t=e[0]==="-"?-1:1,r=[],"+-".indexOf(e[0])>=0&&(e=e.slice(1)),e===".inf"?t===1?Number.POSITIVE_INFINITY:Number.NEGATIVE_INFINITY:e===".nan"?NaN:e.indexOf(":")>=0?(e.split(":").forEach(function(a){r.unshift(parseFloat(a,10))}),e=0,n=1,r.forEach(function(a){e+=a*n,n*=60}),t*e):t*parseFloat(e,10)}var SCIENTIFIC_WITHOUT_DOT=/^[-+]?[0-9]+e/;function representYamlFloat(o,e){var t;if(isNaN(o))switch(e){case"lowercase":return".nan";case"uppercase":return".NAN";case"camelcase":return".NaN"}else if(Number.POSITIVE_INFINITY===o)switch(e){case"lowercase":return".inf";case"uppercase":return".INF";case"camelcase":return".Inf"}else if(Number.NEGATIVE_INFINITY===o)switch(e){case"lowercase":return"-.inf";case"uppercase":return"-.INF";case"camelcase":return"-.Inf"}else if(common$2.isNegativeZero(o))return"-0.0";return t=o.toString(10),SCIENTIFIC_WITHOUT_DOT.test(t)?t.replace("e",".e"):t}function isFloat(o){return Object.prototype.toString.call(o)==="[object Number]"&&(o%1!==0||common$2.isNegativeZero(o))}var float=new Type$9("tag:yaml.org,2002:float",{kind:"scalar",resolve:resolveYamlFloat,construct:constructYamlFloat,predicate:isFloat,represent:representYamlFloat,defaultStyle:"lowercase"}),Schema$3=schema,json=new Schema$3({include:[failsafe],implicit:[_null,bool,int,float]}),Schema$2=schema,core=new Schema$2({include:[json]}),Type$8=type,YAML_DATE_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9])-([0-9][0-9])$"),YAML_TIMESTAMP_REGEXP=new RegExp("^([0-9][0-9][0-9][0-9])-([0-9][0-9]?)-([0-9][0-9]?)(?:[Tt]|[ \\t]+)([0-9][0-9]?):([0-9][0-9]):([0-9][0-9])(?:\\.([0-9]*))?(?:[ \\t]*(Z|([-+])([0-9][0-9]?)(?::([0-9][0-9]))?))?$");function resolveYamlTimestamp(o){return o===null?!1:YAML_DATE_REGEXP.exec(o)!==null||YAML_TIMESTAMP_REGEXP.exec(o)!==null}function constructYamlTimestamp(o){var e,t,n,r,a,s,l,u=0,d=null,f,m,h;if(e=YAML_DATE_REGEXP.exec(o),e===null&&(e=YAML_TIMESTAMP_REGEXP.exec(o)),e===null)throw new Error("Date resolve error");if(t=+e[1],n=+e[2]-1,r=+e[3],!e[4])return new Date(Date.UTC(t,n,r));if(a=+e[4],s=+e[5],l=+e[6],e[7]){for(u=e[7].slice(0,3);u.length<3;)u+="0";u=+u}return e[9]&&(f=+e[10],m=+(e[11]||0),d=(f*60+m)*6e4,e[9]==="-"&&(d=-d)),h=new Date(Date.UTC(t,n,r,a,s,l,u)),d&&h.setTime(h.getTime()-d),h}function representYamlTimestamp(o){return o.toISOString()}var timestamp=new Type$8("tag:yaml.org,2002:timestamp",{kind:"scalar",resolve:resolveYamlTimestamp,construct:constructYamlTimestamp,instanceOf:Date,represent:representYamlTimestamp}),Type$7=type;function resolveYamlMerge(o){return o==="<<"||o===null}var merge$4=new Type$7("tag:yaml.org,2002:merge",{kind:"scalar",resolve:resolveYamlMerge}),NodeBuffer;try{var _require$1=commonjsRequire;NodeBuffer=_require$1("buffer").Buffer}catch(o){}var Type$6=type,BASE64_MAP=`ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=
\r`;function resolveYamlBinary(o){if(o===null)return!1;var e,t,n=0,r=o.length,a=BASE64_MAP;for(t=0;t<r;t++)if(e=a.indexOf(o.charAt(t)),!(e>64)){if(e<0)return!1;n+=6}return n%8===0}function constructYamlBinary(o){var e,t,n=o.replace(/[\r\n=]/g,""),r=n.length,a=BASE64_MAP,s=0,l=[];for(e=0;e<r;e++)e%4===0&&e&&(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)),s=s<<6|a.indexOf(n.charAt(e));return t=r%4*6,t===0?(l.push(s>>16&255),l.push(s>>8&255),l.push(s&255)):t===18?(l.push(s>>10&255),l.push(s>>2&255)):t===12&&l.push(s>>4&255),NodeBuffer?NodeBuffer.from?NodeBuffer.from(l):new NodeBuffer(l):l}function representYamlBinary(o){var e="",t=0,n,r,a=o.length,s=BASE64_MAP;for(n=0;n<a;n++)n%3===0&&n&&(e+=s[t>>18&63],e+=s[t>>12&63],e+=s[t>>6&63],e+=s[t&63]),t=(t<<8)+o[n];return r=a%3,r===0?(e+=s[t>>18&63],e+=s[t>>12&63],e+=s[t>>6&63],e+=s[t&63]):r===2?(e+=s[t>>10&63],e+=s[t>>4&63],e+=s[t<<2&63],e+=s[64]):r===1&&(e+=s[t>>2&63],e+=s[t<<4&63],e+=s[64],e+=s[64]),e}function isBinary(o){return NodeBuffer&&NodeBuffer.isBuffer(o)}var binary=new Type$6("tag:yaml.org,2002:binary",{kind:"scalar",resolve:resolveYamlBinary,construct:constructYamlBinary,predicate:isBinary,represent:representYamlBinary}),Type$5=type,_hasOwnProperty$3=Object.prototype.hasOwnProperty,_toString$2=Object.prototype.toString;function resolveYamlOmap(o){if(o===null)return!0;var e=[],t,n,r,a,s,l=o;for(t=0,n=l.length;t<n;t+=1){if(r=l[t],s=!1,_toString$2.call(r)!=="[object Object]")return!1;for(a in r)if(_hasOwnProperty$3.call(r,a))if(!s)s=!0;else return!1;if(!s)return!1;if(e.indexOf(a)===-1)e.push(a);else return!1}return!0}function constructYamlOmap(o){return o!==null?o:[]}var omap=new Type$5("tag:yaml.org,2002:omap",{kind:"sequence",resolve:resolveYamlOmap,construct:constructYamlOmap}),Type$4=type,_toString$1=Object.prototype.toString;function resolveYamlPairs(o){if(o===null)return!0;var e,t,n,r,a,s=o;for(a=new Array(s.length),e=0,t=s.length;e<t;e+=1){if(n=s[e],_toString$1.call(n)!=="[object Object]"||(r=Object.keys(n),r.length!==1))return!1;a[e]=[r[0],n[r[0]]]}return!0}function constructYamlPairs(o){if(o===null)return[];var e,t,n,r,a,s=o;for(a=new Array(s.length),e=0,t=s.length;e<t;e+=1)n=s[e],r=Object.keys(n),a[e]=[r[0],n[r[0]]];return a}var pairs=new Type$4("tag:yaml.org,2002:pairs",{kind:"sequence",resolve:resolveYamlPairs,construct:constructYamlPairs}),Type$3=type,_hasOwnProperty$2=Object.prototype.hasOwnProperty;function resolveYamlSet(o){if(o===null)return!0;var e,t=o;for(e in t)if(_hasOwnProperty$2.call(t,e)&&t[e]!==null)return!1;return!0}function constructYamlSet(o){return o!==null?o:{}}var set$1=new Type$3("tag:yaml.org,2002:set",{kind:"mapping",resolve:resolveYamlSet,construct:constructYamlSet}),Schema$1=schema,default_safe=new Schema$1({include:[core],implicit:[timestamp,merge$4],explicit:[binary,omap,pairs,set$1]}),Type$2=type;function resolveJavascriptUndefined(){return!0}function constructJavascriptUndefined(){}function representJavascriptUndefined(){return""}function isUndefined(o){return typeof o>"u"}var _undefined=new Type$2("tag:yaml.org,2002:js/undefined",{kind:"scalar",resolve:resolveJavascriptUndefined,construct:constructJavascriptUndefined,predicate:isUndefined,represent:representJavascriptUndefined}),Type$1=type;function resolveJavascriptRegExp(o){if(o===null||o.length===0)return!1;var e=o,t=/\/([gim]*)$/.exec(o),n="";return!(e[0]==="/"&&(t&&(n=t[1]),n.length>3||e[e.length-n.length-1]!=="/"))}function constructJavascriptRegExp(o){var e=o,t=/\/([gim]*)$/.exec(o),n="";return e[0]==="/"&&(t&&(n=t[1]),e=e.slice(1,e.length-n.length-1)),new RegExp(e,n)}function representJavascriptRegExp(o){var e="/"+o.source+"/";return o.global&&(e+="g"),o.multiline&&(e+="m"),o.ignoreCase&&(e+="i"),e}function isRegExp(o){return Object.prototype.toString.call(o)==="[object RegExp]"}var regexp=new Type$1("tag:yaml.org,2002:js/regexp",{kind:"scalar",resolve:resolveJavascriptRegExp,construct:constructJavascriptRegExp,predicate:isRegExp,represent:representJavascriptRegExp}),esprima;try{var _require=commonjsRequire;esprima=_require("esprima")}catch(o){typeof window<"u"&&(esprima=window.esprima)}var Type=type;function resolveJavascriptFunction(o){if(o===null)return!1;try{var e="("+o+")",t=esprima.parse(e,{range:!0});return!(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")}catch{return!1}}function constructJavascriptFunction(o){var e="("+o+")",t=esprima.parse(e,{range:!0}),n=[],r;if(t.type!=="Program"||t.body.length!==1||t.body[0].type!=="ExpressionStatement"||t.body[0].expression.type!=="ArrowFunctionExpression"&&t.body[0].expression.type!=="FunctionExpression")throw new Error("Failed to resolve function");return t.body[0].expression.params.forEach(function(a){n.push(a.name)}),r=t.body[0].expression.body.range,t.body[0].expression.body.type==="BlockStatement"?new Function(n,e.slice(r[0]+1,r[1]-1)):new Function(n,"return "+e.slice(r[0],r[1]))}function representJavascriptFunction(o){return o.toString()}function isFunction$1(o){return Object.prototype.toString.call(o)==="[object Function]"}var _function=new Type("tag:yaml.org,2002:js/function",{kind:"scalar",resolve:resolveJavascriptFunction,construct:constructJavascriptFunction,predicate:isFunction$1,represent:representJavascriptFunction}),Schema=schema,default_full=Schema.DEFAULT=new Schema({include:[default_safe],explicit:[_undefined,regexp,_function]}),common$1=common$6,YAMLException$1=exception,Mark=mark,DEFAULT_SAFE_SCHEMA$1=default_safe,DEFAULT_FULL_SCHEMA$1=default_full,_hasOwnProperty$1=Object.prototype.hasOwnProperty,CONTEXT_FLOW_IN=1,CONTEXT_FLOW_OUT=2,CONTEXT_BLOCK_IN=3,CONTEXT_BLOCK_OUT=4,CHOMPING_CLIP=1,CHOMPING_STRIP=2,CHOMPING_KEEP=3,PATTERN_NON_PRINTABLE=/[\x00-\x08\x0B\x0C\x0E-\x1F\x7F-\x84\x86-\x9F\uFFFE\uFFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]/,PATTERN_NON_ASCII_LINE_BREAKS=/[\x85\u2028\u2029]/,PATTERN_FLOW_INDICATORS=/[,\[\]\{\}]/,PATTERN_TAG_HANDLE=/^(?:!|!!|![a-z\-]+!)$/i,PATTERN_TAG_URI=/^(?:!|[^,\[\]\{\}])(?:%[0-9a-f]{2}|[0-9a-z\-#;\/\?:@&=\+\$,_\.!~\*'\(\)\[\]])*$/i;function _class(o){return Object.prototype.toString.call(o)}function is_EOL(o){return o===10||o===13}function is_WHITE_SPACE(o){return o===9||o===32}function is_WS_OR_EOL(o){return o===9||o===32||o===10||o===13}function is_FLOW_INDICATOR(o){return o===44||o===91||o===93||o===123||o===125}function fromHexCode(o){var e;return 48<=o&&o<=57?o-48:(e=o|32,97<=e&&e<=102?e-97+10:-1)}function escapedHexLen(o){return o===120?2:o===117?4:o===85?8:0}function fromDecimalCode(o){return 48<=o&&o<=57?o-48:-1}function simpleEscapeSequence(o){return o===48?"\0":o===97?"\x07":o===98?"\b":o===116||o===9?"	":o===110?`
`:o===118?"\v":o===102?"\f":o===114?"\r":o===101?"\x1B":o===32?" ":o===34?'"':o===47?"/":o===92?"\\":o===78?"":o===95?"":o===76?"\u2028":o===80?"\u2029":""}function charFromCodepoint(o){return o<=65535?String.fromCharCode(o):String.fromCharCode((o-65536>>10)+55296,(o-65536&1023)+56320)}var simpleEscapeCheck=new Array(256),simpleEscapeMap=new Array(256);for(var i=0;i<256;i++)simpleEscapeCheck[i]=simpleEscapeSequence(i)?1:0,simpleEscapeMap[i]=simpleEscapeSequence(i);function State$1(o,e){this.input=o,this.filename=e.filename||null,this.schema=e.schema||DEFAULT_FULL_SCHEMA$1,this.onWarning=e.onWarning||null,this.legacy=e.legacy||!1,this.json=e.json||!1,this.listener=e.listener||null,this.implicitTypes=this.schema.compiledImplicit,this.typeMap=this.schema.compiledTypeMap,this.length=o.length,this.position=0,this.line=0,this.lineStart=0,this.lineIndent=0,this.documents=[]}function generateError(o,e){return new YAMLException$1(e,new Mark(o.filename,o.input,o.position,o.line,o.position-o.lineStart))}function throwError(o,e){throw generateError(o,e)}function throwWarning(o,e){o.onWarning&&o.onWarning.call(null,generateError(o,e))}var directiveHandlers={YAML:function o(e,t,n){var r,a,s;e.version!==null&&throwError(e,"duplication of %YAML directive"),n.length!==1&&throwError(e,"YAML directive accepts exactly one argument"),r=/^([0-9]+)\.([0-9]+)$/.exec(n[0]),r===null&&throwError(e,"ill-formed argument of the YAML directive"),a=parseInt(r[1],10),s=parseInt(r[2],10),a!==1&&throwError(e,"unacceptable YAML version of the document"),e.version=n[0],e.checkLineBreaks=s<2,s!==1&&s!==2&&throwWarning(e,"unsupported YAML version of the document")},TAG:function o(e,t,n){var r,a;n.length!==2&&throwError(e,"TAG directive accepts exactly two arguments"),r=n[0],a=n[1],PATTERN_TAG_HANDLE.test(r)||throwError(e,"ill-formed tag handle (first argument) of the TAG directive"),_hasOwnProperty$1.call(e.tagMap,r)&&throwError(e,'there is a previously declared suffix for "'+r+'" tag handle'),PATTERN_TAG_URI.test(a)||throwError(e,"ill-formed tag prefix (second argument) of the TAG directive"),e.tagMap[r]=a}};function captureSegment(o,e,t,n){var r,a,s,l;if(e<t){if(l=o.input.slice(e,t),n)for(r=0,a=l.length;r<a;r+=1)s=l.charCodeAt(r),s===9||32<=s&&s<=1114111||throwError(o,"expected valid JSON character");else PATTERN_NON_PRINTABLE.test(l)&&throwError(o,"the stream contains non-printable characters");o.result+=l}}function mergeMappings(o,e,t,n){var r,a,s,l;for(common$1.isObject(t)||throwError(o,"cannot merge mappings; the provided source object is unacceptable"),r=Object.keys(t),s=0,l=r.length;s<l;s+=1)a=r[s],_hasOwnProperty$1.call(e,a)||(e[a]=t[a],n[a]=!0)}function storeMappingPair(o,e,t,n,r,a,s,l){var u,d;if(Array.isArray(r))for(r=Array.prototype.slice.call(r),u=0,d=r.length;u<d;u+=1)Array.isArray(r[u])&&throwError(o,"nested arrays are not supported inside keys"),typeof r=="object"&&_class(r[u])==="[object Object]"&&(r[u]="[object Object]");if(typeof r=="object"&&_class(r)==="[object Object]"&&(r="[object Object]"),r=String(r),e===null&&(e={}),n==="tag:yaml.org,2002:merge")if(Array.isArray(a))for(u=0,d=a.length;u<d;u+=1)mergeMappings(o,e,a[u],t);else mergeMappings(o,e,a,t);else!o.json&&!_hasOwnProperty$1.call(t,r)&&_hasOwnProperty$1.call(e,r)&&(o.line=s||o.line,o.position=l||o.position,throwError(o,"duplicated mapping key")),e[r]=a,delete t[r];return e}function readLineBreak(o){var e;e=o.input.charCodeAt(o.position),e===10?o.position++:e===13?(o.position++,o.input.charCodeAt(o.position)===10&&o.position++):throwError(o,"a line break is expected"),o.line+=1,o.lineStart=o.position}function skipSeparationSpace(o,e,t){for(var n=0,r=o.input.charCodeAt(o.position);r!==0;){for(;is_WHITE_SPACE(r);)r=o.input.charCodeAt(++o.position);if(e&&r===35)do r=o.input.charCodeAt(++o.position);while(r!==10&&r!==13&&r!==0);if(is_EOL(r))for(readLineBreak(o),r=o.input.charCodeAt(o.position),n++,o.lineIndent=0;r===32;)o.lineIndent++,r=o.input.charCodeAt(++o.position);else break}return t!==-1&&n!==0&&o.lineIndent<t&&throwWarning(o,"deficient indentation"),n}function testDocumentSeparator(o){var e=o.position,t;return t=o.input.charCodeAt(e),!!((t===45||t===46)&&t===o.input.charCodeAt(e+1)&&t===o.input.charCodeAt(e+2)&&(e+=3,t=o.input.charCodeAt(e),t===0||is_WS_OR_EOL(t)))}function writeFoldedLines(o,e){e===1?o.result+=" ":e>1&&(o.result+=common$1.repeat(`
`,e-1))}function readPlainScalar(o,e,t){var n,r,a,s,l,u,d,f,m=o.kind,h=o.result,p;if(p=o.input.charCodeAt(o.position),is_WS_OR_EOL(p)||is_FLOW_INDICATOR(p)||p===35||p===38||p===42||p===33||p===124||p===62||p===39||p===34||p===37||p===64||p===96||(p===63||p===45)&&(r=o.input.charCodeAt(o.position+1),is_WS_OR_EOL(r)||t&&is_FLOW_INDICATOR(r)))return!1;for(o.kind="scalar",o.result="",a=s=o.position,l=!1;p!==0;){if(p===58){if(r=o.input.charCodeAt(o.position+1),is_WS_OR_EOL(r)||t&&is_FLOW_INDICATOR(r))break}else if(p===35){if(n=o.input.charCodeAt(o.position-1),is_WS_OR_EOL(n))break}else{if(o.position===o.lineStart&&testDocumentSeparator(o)||t&&is_FLOW_INDICATOR(p))break;if(is_EOL(p))if(u=o.line,d=o.lineStart,f=o.lineIndent,skipSeparationSpace(o,!1,-1),o.lineIndent>=e){l=!0,p=o.input.charCodeAt(o.position);continue}else{o.position=s,o.line=u,o.lineStart=d,o.lineIndent=f;break}}l&&(captureSegment(o,a,s,!1),writeFoldedLines(o,o.line-u),a=s=o.position,l=!1),is_WHITE_SPACE(p)||(s=o.position+1),p=o.input.charCodeAt(++o.position)}return captureSegment(o,a,s,!1),o.result?!0:(o.kind=m,o.result=h,!1)}function readSingleQuotedScalar(o,e){var t,n,r;if(t=o.input.charCodeAt(o.position),t!==39)return!1;for(o.kind="scalar",o.result="",o.position++,n=r=o.position;(t=o.input.charCodeAt(o.position))!==0;)if(t===39)if(captureSegment(o,n,o.position,!0),t=o.input.charCodeAt(++o.position),t===39)n=o.position,o.position++,r=o.position;else return!0;else is_EOL(t)?(captureSegment(o,n,r,!0),writeFoldedLines(o,skipSeparationSpace(o,!1,e)),n=r=o.position):o.position===o.lineStart&&testDocumentSeparator(o)?throwError(o,"unexpected end of the document within a single quoted scalar"):(o.position++,r=o.position);throwError(o,"unexpected end of the stream within a single quoted scalar")}function readDoubleQuotedScalar(o,e){var t,n,r,a,s,l;if(l=o.input.charCodeAt(o.position),l!==34)return!1;for(o.kind="scalar",o.result="",o.position++,t=n=o.position;(l=o.input.charCodeAt(o.position))!==0;){if(l===34)return captureSegment(o,t,o.position,!0),o.position++,!0;if(l===92){if(captureSegment(o,t,o.position,!0),l=o.input.charCodeAt(++o.position),is_EOL(l))skipSeparationSpace(o,!1,e);else if(l<256&&simpleEscapeCheck[l])o.result+=simpleEscapeMap[l],o.position++;else if((s=escapedHexLen(l))>0){for(r=s,a=0;r>0;r--)l=o.input.charCodeAt(++o.position),(s=fromHexCode(l))>=0?a=(a<<4)+s:throwError(o,"expected hexadecimal character");o.result+=charFromCodepoint(a),o.position++}else throwError(o,"unknown escape sequence");t=n=o.position}else is_EOL(l)?(captureSegment(o,t,n,!0),writeFoldedLines(o,skipSeparationSpace(o,!1,e)),t=n=o.position):o.position===o.lineStart&&testDocumentSeparator(o)?throwError(o,"unexpected end of the document within a double quoted scalar"):(o.position++,n=o.position)}throwError(o,"unexpected end of the stream within a double quoted scalar")}function readFlowCollection(o,e){var t=!0,n,r=o.tag,a,s=o.anchor,l,u,d,f,m,h={},p,g,b,v;if(v=o.input.charCodeAt(o.position),v===91)u=93,m=!1,a=[];else if(v===123)u=125,m=!0,a={};else return!1;for(o.anchor!==null&&(o.anchorMap[o.anchor]=a),v=o.input.charCodeAt(++o.position);v!==0;){if(skipSeparationSpace(o,!0,e),v=o.input.charCodeAt(o.position),v===u)return o.position++,o.tag=r,o.anchor=s,o.kind=m?"mapping":"sequence",o.result=a,!0;t||throwError(o,"missed comma between flow collection entries"),g=p=b=null,d=f=!1,v===63&&(l=o.input.charCodeAt(o.position+1),is_WS_OR_EOL(l)&&(d=f=!0,o.position++,skipSeparationSpace(o,!0,e))),n=o.line,composeNode(o,e,CONTEXT_FLOW_IN,!1,!0),g=o.tag,p=o.result,skipSeparationSpace(o,!0,e),v=o.input.charCodeAt(o.position),(f||o.line===n)&&v===58&&(d=!0,v=o.input.charCodeAt(++o.position),skipSeparationSpace(o,!0,e),composeNode(o,e,CONTEXT_FLOW_IN,!1,!0),b=o.result),m?storeMappingPair(o,a,h,g,p,b):d?a.push(storeMappingPair(o,null,h,g,p,b)):a.push(p),skipSeparationSpace(o,!0,e),v=o.input.charCodeAt(o.position),v===44?(t=!0,v=o.input.charCodeAt(++o.position)):t=!1}throwError(o,"unexpected end of the stream within a flow collection")}function readBlockScalar(o,e){var t,n,r=CHOMPING_CLIP,a=!1,s=!1,l=e,u=0,d=!1,f,m;if(m=o.input.charCodeAt(o.position),m===124)n=!1;else if(m===62)n=!0;else return!1;for(o.kind="scalar",o.result="";m!==0;)if(m=o.input.charCodeAt(++o.position),m===43||m===45)CHOMPING_CLIP===r?r=m===43?CHOMPING_KEEP:CHOMPING_STRIP:throwError(o,"repeat of a chomping mode identifier");else if((f=fromDecimalCode(m))>=0)f===0?throwError(o,"bad explicit indentation width of a block scalar; it cannot be less than one"):s?throwError(o,"repeat of an indentation width identifier"):(l=e+f-1,s=!0);else break;if(is_WHITE_SPACE(m)){do m=o.input.charCodeAt(++o.position);while(is_WHITE_SPACE(m));if(m===35)do m=o.input.charCodeAt(++o.position);while(!is_EOL(m)&&m!==0)}for(;m!==0;){for(readLineBreak(o),o.lineIndent=0,m=o.input.charCodeAt(o.position);(!s||o.lineIndent<l)&&m===32;)o.lineIndent++,m=o.input.charCodeAt(++o.position);if(!s&&o.lineIndent>l&&(l=o.lineIndent),is_EOL(m)){u++;continue}if(o.lineIndent<l){r===CHOMPING_KEEP?o.result+=common$1.repeat(`
`,a?1+u:u):r===CHOMPING_CLIP&&a&&(o.result+=`
`);break}for(n?is_WHITE_SPACE(m)?(d=!0,o.result+=common$1.repeat(`
`,a?1+u:u)):d?(d=!1,o.result+=common$1.repeat(`
`,u+1)):u===0?a&&(o.result+=" "):o.result+=common$1.repeat(`
`,u):o.result+=common$1.repeat(`
`,a?1+u:u),a=!0,s=!0,u=0,t=o.position;!is_EOL(m)&&m!==0;)m=o.input.charCodeAt(++o.position);captureSegment(o,t,o.position,!1)}return!0}function readBlockSequence(o,e){var t,n=o.tag,r=o.anchor,a=[],s,l=!1,u;for(o.anchor!==null&&(o.anchorMap[o.anchor]=a),u=o.input.charCodeAt(o.position);u!==0&&!(u!==45||(s=o.input.charCodeAt(o.position+1),!is_WS_OR_EOL(s)));){if(l=!0,o.position++,skipSeparationSpace(o,!0,-1)&&o.lineIndent<=e){a.push(null),u=o.input.charCodeAt(o.position);continue}if(t=o.line,composeNode(o,e,CONTEXT_BLOCK_IN,!1,!0),a.push(o.result),skipSeparationSpace(o,!0,-1),u=o.input.charCodeAt(o.position),(o.line===t||o.lineIndent>e)&&u!==0)throwError(o,"bad indentation of a sequence entry");else if(o.lineIndent<e)break}return l?(o.tag=n,o.anchor=r,o.kind="sequence",o.result=a,!0):!1}function readBlockMapping(o,e,t){var n,r,a,s,l=o.tag,u=o.anchor,d={},f={},m=null,h=null,p=null,g=!1,b=!1,v;for(o.anchor!==null&&(o.anchorMap[o.anchor]=d),v=o.input.charCodeAt(o.position);v!==0;){if(n=o.input.charCodeAt(o.position+1),a=o.line,s=o.position,(v===63||v===58)&&is_WS_OR_EOL(n))v===63?(g&&(storeMappingPair(o,d,f,m,h,null),m=h=p=null),b=!0,g=!0,r=!0):g?(g=!1,r=!0):throwError(o,"incomplete explicit mapping pair; a key node is missed; or followed by a non-tabulated empty line"),o.position+=1,v=n;else if(composeNode(o,t,CONTEXT_FLOW_OUT,!1,!0))if(o.line===a){for(v=o.input.charCodeAt(o.position);is_WHITE_SPACE(v);)v=o.input.charCodeAt(++o.position);if(v===58)v=o.input.charCodeAt(++o.position),is_WS_OR_EOL(v)||throwError(o,"a whitespace character is expected after the key-value separator within a block mapping"),g&&(storeMappingPair(o,d,f,m,h,null),m=h=p=null),b=!0,g=!1,r=!1,m=o.tag,h=o.result;else if(b)throwError(o,"can not read an implicit mapping pair; a colon is missed");else return o.tag=l,o.anchor=u,!0}else if(b)throwError(o,"can not read a block mapping entry; a multiline key may not be an implicit key");else return o.tag=l,o.anchor=u,!0;else break;if((o.line===a||o.lineIndent>e)&&(composeNode(o,e,CONTEXT_BLOCK_OUT,!0,r)&&(g?h=o.result:p=o.result),g||(storeMappingPair(o,d,f,m,h,p,a,s),m=h=p=null),skipSeparationSpace(o,!0,-1),v=o.input.charCodeAt(o.position)),o.lineIndent>e&&v!==0)throwError(o,"bad indentation of a mapping entry");else if(o.lineIndent<e)break}return g&&storeMappingPair(o,d,f,m,h,null),b&&(o.tag=l,o.anchor=u,o.kind="mapping",o.result=d),b}function readTagProperty(o){var e,t=!1,n=!1,r,a,s;if(s=o.input.charCodeAt(o.position),s!==33)return!1;if(o.tag!==null&&throwError(o,"duplication of a tag property"),s=o.input.charCodeAt(++o.position),s===60?(t=!0,s=o.input.charCodeAt(++o.position)):s===33?(n=!0,r="!!",s=o.input.charCodeAt(++o.position)):r="!",e=o.position,t){do s=o.input.charCodeAt(++o.position);while(s!==0&&s!==62);o.position<o.length?(a=o.input.slice(e,o.position),s=o.input.charCodeAt(++o.position)):throwError(o,"unexpected end of the stream within a verbatim tag")}else{for(;s!==0&&!is_WS_OR_EOL(s);)s===33&&(n?throwError(o,"tag suffix cannot contain exclamation marks"):(r=o.input.slice(e-1,o.position+1),PATTERN_TAG_HANDLE.test(r)||throwError(o,"named tag handle cannot contain such characters"),n=!0,e=o.position+1)),s=o.input.charCodeAt(++o.position);a=o.input.slice(e,o.position),PATTERN_FLOW_INDICATORS.test(a)&&throwError(o,"tag suffix cannot contain flow indicator characters")}return a&&!PATTERN_TAG_URI.test(a)&&throwError(o,"tag name cannot contain such characters: "+a),t?o.tag=a:_hasOwnProperty$1.call(o.tagMap,r)?o.tag=o.tagMap[r]+a:r==="!"?o.tag="!"+a:r==="!!"?o.tag="tag:yaml.org,2002:"+a:throwError(o,'undeclared tag handle "'+r+'"'),!0}function readAnchorProperty(o){var e,t;if(t=o.input.charCodeAt(o.position),t!==38)return!1;for(o.anchor!==null&&throwError(o,"duplication of an anchor property"),t=o.input.charCodeAt(++o.position),e=o.position;t!==0&&!is_WS_OR_EOL(t)&&!is_FLOW_INDICATOR(t);)t=o.input.charCodeAt(++o.position);return o.position===e&&throwError(o,"name of an anchor node must contain at least one character"),o.anchor=o.input.slice(e,o.position),!0}function readAlias(o){var e,t,n;if(n=o.input.charCodeAt(o.position),n!==42)return!1;for(n=o.input.charCodeAt(++o.position),e=o.position;n!==0&&!is_WS_OR_EOL(n)&&!is_FLOW_INDICATOR(n);)n=o.input.charCodeAt(++o.position);return o.position===e&&throwError(o,"name of an alias node must contain at least one character"),t=o.input.slice(e,o.position),_hasOwnProperty$1.call(o.anchorMap,t)||throwError(o,'unidentified alias "'+t+'"'),o.result=o.anchorMap[t],skipSeparationSpace(o,!0,-1),!0}function composeNode(o,e,t,n,r){var a,s,l,u=1,d=!1,f=!1,m,h,p,g,b;if(o.listener!==null&&o.listener("open",o),o.tag=null,o.anchor=null,o.kind=null,o.result=null,a=s=l=CONTEXT_BLOCK_OUT===t||CONTEXT_BLOCK_IN===t,n&&skipSeparationSpace(o,!0,-1)&&(d=!0,o.lineIndent>e?u=1:o.lineIndent===e?u=0:o.lineIndent<e&&(u=-1)),u===1)for(;readTagProperty(o)||readAnchorProperty(o);)skipSeparationSpace(o,!0,-1)?(d=!0,l=a,o.lineIndent>e?u=1:o.lineIndent===e?u=0:o.lineIndent<e&&(u=-1)):l=!1;if(l&&(l=d||r),(u===1||CONTEXT_BLOCK_OUT===t)&&(CONTEXT_FLOW_IN===t||CONTEXT_FLOW_OUT===t?g=e:g=e+1,b=o.position-o.lineStart,u===1?l&&(readBlockSequence(o,b)||readBlockMapping(o,b,g))||readFlowCollection(o,g)?f=!0:(s&&readBlockScalar(o,g)||readSingleQuotedScalar(o,g)||readDoubleQuotedScalar(o,g)?f=!0:readAlias(o)?(f=!0,(o.tag!==null||o.anchor!==null)&&throwError(o,"alias node should not have any properties")):readPlainScalar(o,g,CONTEXT_FLOW_IN===t)&&(f=!0,o.tag===null&&(o.tag="?")),o.anchor!==null&&(o.anchorMap[o.anchor]=o.result)):u===0&&(f=l&&readBlockSequence(o,b))),o.tag!==null&&o.tag!=="!")if(o.tag==="?"){for(o.result!==null&&o.kind!=="scalar"&&throwError(o,'unacceptable node kind for !<?> tag; it should be "scalar", not "'+o.kind+'"'),m=0,h=o.implicitTypes.length;m<h;m+=1)if(p=o.implicitTypes[m],p.resolve(o.result)){o.result=p.construct(o.result),o.tag=p.tag,o.anchor!==null&&(o.anchorMap[o.anchor]=o.result);break}}else _hasOwnProperty$1.call(o.typeMap[o.kind||"fallback"],o.tag)?(p=o.typeMap[o.kind||"fallback"][o.tag],o.result!==null&&p.kind!==o.kind&&throwError(o,"unacceptable node kind for !<"+o.tag+'> tag; it should be "'+p.kind+'", not "'+o.kind+'"'),p.resolve(o.result)?(o.result=p.construct(o.result),o.anchor!==null&&(o.anchorMap[o.anchor]=o.result)):throwError(o,"cannot resolve a node with !<"+o.tag+"> explicit tag")):throwError(o,"unknown tag !<"+o.tag+">");return o.listener!==null&&o.listener("close",o),o.tag!==null||o.anchor!==null||f}function readDocument(o){var e=o.position,t,n,r,a=!1,s;for(o.version=null,o.checkLineBreaks=o.legacy,o.tagMap={},o.anchorMap={};(s=o.input.charCodeAt(o.position))!==0&&(skipSeparationSpace(o,!0,-1),s=o.input.charCodeAt(o.position),!(o.lineIndent>0||s!==37));){for(a=!0,s=o.input.charCodeAt(++o.position),t=o.position;s!==0&&!is_WS_OR_EOL(s);)s=o.input.charCodeAt(++o.position);for(n=o.input.slice(t,o.position),r=[],n.length<1&&throwError(o,"directive name must not be less than one character in length");s!==0;){for(;is_WHITE_SPACE(s);)s=o.input.charCodeAt(++o.position);if(s===35){do s=o.input.charCodeAt(++o.position);while(s!==0&&!is_EOL(s));break}if(is_EOL(s))break;for(t=o.position;s!==0&&!is_WS_OR_EOL(s);)s=o.input.charCodeAt(++o.position);r.push(o.input.slice(t,o.position))}s!==0&&readLineBreak(o),_hasOwnProperty$1.call(directiveHandlers,n)?directiveHandlers[n](o,n,r):throwWarning(o,'unknown document directive "'+n+'"')}if(skipSeparationSpace(o,!0,-1),o.lineIndent===0&&o.input.charCodeAt(o.position)===45&&o.input.charCodeAt(o.position+1)===45&&o.input.charCodeAt(o.position+2)===45?(o.position+=3,skipSeparationSpace(o,!0,-1)):a&&throwError(o,"directives end mark is expected"),composeNode(o,o.lineIndent-1,CONTEXT_BLOCK_OUT,!1,!0),skipSeparationSpace(o,!0,-1),o.checkLineBreaks&&PATTERN_NON_ASCII_LINE_BREAKS.test(o.input.slice(e,o.position))&&throwWarning(o,"non-ASCII line breaks are interpreted as content"),o.documents.push(o.result),o.position===o.lineStart&&testDocumentSeparator(o)){o.input.charCodeAt(o.position)===46&&(o.position+=3,skipSeparationSpace(o,!0,-1));return}if(o.position<o.length-1)throwError(o,"end of the stream or a document separator is expected");else return}function loadDocuments(o,e){o=String(o),e=e||{},o.length!==0&&(o.charCodeAt(o.length-1)!==10&&o.charCodeAt(o.length-1)!==13&&(o+=`
`),o.charCodeAt(0)===65279&&(o=o.slice(1)));var t=new State$1(o,e),n=o.indexOf("\0");for(n!==-1&&(t.position=n,throwError(t,"null byte is not allowed in input")),t.input+="\0";t.input.charCodeAt(t.position)===32;)t.lineIndent+=1,t.position+=1;for(;t.position<t.length-1;)readDocument(t);return t.documents}function loadAll(o,e,t){e!==null&&typeof e=="object"&&typeof t>"u"&&(t=e,e=null);var n=loadDocuments(o,t);if(typeof e!="function")return n;for(var r=0,a=n.length;r<a;r+=1)e(n[r])}function load(o,e){var t=loadDocuments(o,e);if(t.length!==0){if(t.length===1)return t[0];throw new YAMLException$1("expected a single document in the stream, but found more")}}function safeLoadAll(o,e,t){return typeof e=="object"&&e!==null&&typeof t>"u"&&(t=e,e=null),loadAll(o,e,common$1.extend({schema:DEFAULT_SAFE_SCHEMA$1},t))}function safeLoad(o,e){return load(o,common$1.extend({schema:DEFAULT_SAFE_SCHEMA$1},e))}loader$1.loadAll=loadAll;loader$1.load=load;loader$1.safeLoadAll=safeLoadAll;loader$1.safeLoad=safeLoad;var dumper$1={},common=common$6,YAMLException=exception,DEFAULT_FULL_SCHEMA=default_full,DEFAULT_SAFE_SCHEMA=default_safe,_toString=Object.prototype.toString,_hasOwnProperty=Object.prototype.hasOwnProperty,CHAR_TAB=9,CHAR_LINE_FEED=10,CHAR_CARRIAGE_RETURN=13,CHAR_SPACE=32,CHAR_EXCLAMATION=33,CHAR_DOUBLE_QUOTE=34,CHAR_SHARP=35,CHAR_PERCENT=37,CHAR_AMPERSAND=38,CHAR_SINGLE_QUOTE=39,CHAR_ASTERISK=42,CHAR_COMMA=44,CHAR_MINUS=45,CHAR_COLON=58,CHAR_EQUALS=61,CHAR_GREATER_THAN=62,CHAR_QUESTION=63,CHAR_COMMERCIAL_AT=64,CHAR_LEFT_SQUARE_BRACKET=91,CHAR_RIGHT_SQUARE_BRACKET=93,CHAR_GRAVE_ACCENT=96,CHAR_LEFT_CURLY_BRACKET=123,CHAR_VERTICAL_LINE=124,CHAR_RIGHT_CURLY_BRACKET=125,ESCAPE_SEQUENCES={};ESCAPE_SEQUENCES[0]="\\0";ESCAPE_SEQUENCES[7]="\\a";ESCAPE_SEQUENCES[8]="\\b";ESCAPE_SEQUENCES[9]="\\t";ESCAPE_SEQUENCES[10]="\\n";ESCAPE_SEQUENCES[11]="\\v";ESCAPE_SEQUENCES[12]="\\f";ESCAPE_SEQUENCES[13]="\\r";ESCAPE_SEQUENCES[27]="\\e";ESCAPE_SEQUENCES[34]='\\"';ESCAPE_SEQUENCES[92]="\\\\";ESCAPE_SEQUENCES[133]="\\N";ESCAPE_SEQUENCES[160]="\\_";ESCAPE_SEQUENCES[8232]="\\L";ESCAPE_SEQUENCES[8233]="\\P";var DEPRECATED_BOOLEANS_SYNTAX=["y","Y","yes","Yes","YES","on","On","ON","n","N","no","No","NO","off","Off","OFF"];function compileStyleMap(o,e){var t,n,r,a,s,l,u;if(e===null)return{};for(t={},n=Object.keys(e),r=0,a=n.length;r<a;r+=1)s=n[r],l=String(e[s]),s.slice(0,2)==="!!"&&(s="tag:yaml.org,2002:"+s.slice(2)),u=o.compiledTypeMap.fallback[s],u&&_hasOwnProperty.call(u.styleAliases,l)&&(l=u.styleAliases[l]),t[s]=l;return t}function encodeHex(o){var e,t,n;if(e=o.toString(16).toUpperCase(),o<=255)t="x",n=2;else if(o<=65535)t="u",n=4;else if(o<=4294967295)t="U",n=8;else throw new YAMLException("code point within a string may not be greater than 0xFFFFFFFF");return"\\"+t+common.repeat("0",n-e.length)+e}function State(o){this.schema=o.schema||DEFAULT_FULL_SCHEMA,this.indent=Math.max(1,o.indent||2),this.noArrayIndent=o.noArrayIndent||!1,this.skipInvalid=o.skipInvalid||!1,this.flowLevel=common.isNothing(o.flowLevel)?-1:o.flowLevel,this.styleMap=compileStyleMap(this.schema,o.styles||null),this.sortKeys=o.sortKeys||!1,this.lineWidth=o.lineWidth||80,this.noRefs=o.noRefs||!1,this.noCompatMode=o.noCompatMode||!1,this.condenseFlow=o.condenseFlow||!1,this.implicitTypes=this.schema.compiledImplicit,this.explicitTypes=this.schema.compiledExplicit,this.tag=null,this.result="",this.duplicates=[],this.usedDuplicates=null}function indentString(o,e){for(var t=common.repeat(" ",e),n=0,r=-1,a="",s,l=o.length;n<l;)r=o.indexOf(`
`,n),r===-1?(s=o.slice(n),n=l):(s=o.slice(n,r+1),n=r+1),s.length&&s!==`
`&&(a+=t),a+=s;return a}function generateNextLine(o,e){return`
`+common.repeat(" ",o.indent*e)}function testImplicitResolving(o,e){var t,n,r;for(t=0,n=o.implicitTypes.length;t<n;t+=1)if(r=o.implicitTypes[t],r.resolve(e))return!0;return!1}function isWhitespace(o){return o===CHAR_SPACE||o===CHAR_TAB}function isPrintable(o){return 32<=o&&o<=126||161<=o&&o<=55295&&o!==8232&&o!==8233||57344<=o&&o<=65533&&o!==65279||65536<=o&&o<=1114111}function isNsChar(o){return isPrintable(o)&&!isWhitespace(o)&&o!==65279&&o!==CHAR_CARRIAGE_RETURN&&o!==CHAR_LINE_FEED}function isPlainSafe(o,e){return isPrintable(o)&&o!==65279&&o!==CHAR_COMMA&&o!==CHAR_LEFT_SQUARE_BRACKET&&o!==CHAR_RIGHT_SQUARE_BRACKET&&o!==CHAR_LEFT_CURLY_BRACKET&&o!==CHAR_RIGHT_CURLY_BRACKET&&o!==CHAR_COLON&&(o!==CHAR_SHARP||e&&isNsChar(e))}function isPlainSafeFirst(o){return isPrintable(o)&&o!==65279&&!isWhitespace(o)&&o!==CHAR_MINUS&&o!==CHAR_QUESTION&&o!==CHAR_COLON&&o!==CHAR_COMMA&&o!==CHAR_LEFT_SQUARE_BRACKET&&o!==CHAR_RIGHT_SQUARE_BRACKET&&o!==CHAR_LEFT_CURLY_BRACKET&&o!==CHAR_RIGHT_CURLY_BRACKET&&o!==CHAR_SHARP&&o!==CHAR_AMPERSAND&&o!==CHAR_ASTERISK&&o!==CHAR_EXCLAMATION&&o!==CHAR_VERTICAL_LINE&&o!==CHAR_EQUALS&&o!==CHAR_GREATER_THAN&&o!==CHAR_SINGLE_QUOTE&&o!==CHAR_DOUBLE_QUOTE&&o!==CHAR_PERCENT&&o!==CHAR_COMMERCIAL_AT&&o!==CHAR_GRAVE_ACCENT}function needIndentIndicator(o){var e=/^\n* /;return e.test(o)}var STYLE_PLAIN=1,STYLE_SINGLE=2,STYLE_LITERAL=3,STYLE_FOLDED=4,STYLE_DOUBLE=5;function chooseScalarStyle(o,e,t,n,r){var a,s,l,u=!1,d=!1,f=n!==-1,m=-1,h=isPlainSafeFirst(o.charCodeAt(0))&&!isWhitespace(o.charCodeAt(o.length-1));if(e)for(a=0;a<o.length;a++){if(s=o.charCodeAt(a),!isPrintable(s))return STYLE_DOUBLE;l=a>0?o.charCodeAt(a-1):null,h=h&&isPlainSafe(s,l)}else{for(a=0;a<o.length;a++){if(s=o.charCodeAt(a),s===CHAR_LINE_FEED)u=!0,f&&(d=d||a-m-1>n&&o[m+1]!==" ",m=a);else if(!isPrintable(s))return STYLE_DOUBLE;l=a>0?o.charCodeAt(a-1):null,h=h&&isPlainSafe(s,l)}d=d||f&&a-m-1>n&&o[m+1]!==" "}return!u&&!d?h&&!r(o)?STYLE_PLAIN:STYLE_SINGLE:t>9&&needIndentIndicator(o)?STYLE_DOUBLE:d?STYLE_FOLDED:STYLE_LITERAL}function writeScalar(o,e,t,n){o.dump=function(){if(e.length===0)return"''";if(!o.noCompatMode&&DEPRECATED_BOOLEANS_SYNTAX.indexOf(e)!==-1)return"'"+e+"'";var r=o.indent*Math.max(1,t),a=o.lineWidth===-1?-1:Math.max(Math.min(o.lineWidth,40),o.lineWidth-r),s=n||o.flowLevel>-1&&t>=o.flowLevel;function l(u){return testImplicitResolving(o,u)}switch(chooseScalarStyle(e,s,o.indent,a,l)){case STYLE_PLAIN:return e;case STYLE_SINGLE:return"'"+e.replace(/'/g,"''")+"'";case STYLE_LITERAL:return"|"+blockHeader(e,o.indent)+dropEndingNewline(indentString(e,r));case STYLE_FOLDED:return">"+blockHeader(e,o.indent)+dropEndingNewline(indentString(foldString(e,a),r));case STYLE_DOUBLE:return'"'+escapeString(e)+'"';default:throw new YAMLException("impossible error: invalid scalar style")}}()}function blockHeader(o,e){var t=needIndentIndicator(o)?String(e):"",n=o[o.length-1]===`
`,r=n&&(o[o.length-2]===`
`||o===`
`),a=r?"+":n?"":"-";return t+a+`
`}function dropEndingNewline(o){return o[o.length-1]===`
`?o.slice(0,-1):o}function foldString(o,e){for(var t=/(\n+)([^\n]*)/g,n=function(){var d=o.indexOf(`
`);return d=d!==-1?d:o.length,t.lastIndex=d,foldLine(o.slice(0,d),e)}(),r=o[0]===`
`||o[0]===" ",a,s;s=t.exec(o);){var l=s[1],u=s[2];a=u[0]===" ",n+=l+(!r&&!a&&u!==""?`
`:"")+foldLine(u,e),r=a}return n}function foldLine(o,e){if(o===""||o[0]===" ")return o;for(var t=/ [^ ]/g,n,r=0,a,s=0,l=0,u="";n=t.exec(o);)l=n.index,l-r>e&&(a=s>r?s:l,u+=`
`+o.slice(r,a),r=a+1),s=l;return u+=`
`,o.length-r>e&&s>r?u+=o.slice(r,s)+`
`+o.slice(s+1):u+=o.slice(r),u.slice(1)}function escapeString(o){for(var e="",t,n,r,a=0;a<o.length;a++){if(t=o.charCodeAt(a),t>=55296&&t<=56319&&(n=o.charCodeAt(a+1),n>=56320&&n<=57343)){e+=encodeHex((t-55296)*1024+n-56320+65536),a++;continue}r=ESCAPE_SEQUENCES[t],e+=!r&&isPrintable(t)?o[a]:r||encodeHex(t)}return e}function writeFlowSequence(o,e,t){var n="",r=o.tag,a,s;for(a=0,s=t.length;a<s;a+=1)writeNode(o,e,t[a],!1,!1)&&(a!==0&&(n+=","+(o.condenseFlow?"":" ")),n+=o.dump);o.tag=r,o.dump="["+n+"]"}function writeBlockSequence(o,e,t,n){var r="",a=o.tag,s,l;for(s=0,l=t.length;s<l;s+=1)writeNode(o,e+1,t[s],!0,!0)&&((!n||s!==0)&&(r+=generateNextLine(o,e)),o.dump&&CHAR_LINE_FEED===o.dump.charCodeAt(0)?r+="-":r+="- ",r+=o.dump);o.tag=a,o.dump=r||"[]"}function writeFlowMapping(o,e,t){var n="",r=o.tag,a=Object.keys(t),s,l,u,d,f;for(s=0,l=a.length;s<l;s+=1)f="",s!==0&&(f+=", "),o.condenseFlow&&(f+='"'),u=a[s],d=t[u],writeNode(o,e,u,!1,!1)&&(o.dump.length>1024&&(f+="? "),f+=o.dump+(o.condenseFlow?'"':"")+":"+(o.condenseFlow?"":" "),writeNode(o,e,d,!1,!1)&&(f+=o.dump,n+=f));o.tag=r,o.dump="{"+n+"}"}function writeBlockMapping(o,e,t,n){var r="",a=o.tag,s=Object.keys(t),l,u,d,f,m,h;if(o.sortKeys===!0)s.sort();else if(typeof o.sortKeys=="function")s.sort(o.sortKeys);else if(o.sortKeys)throw new YAMLException("sortKeys must be a boolean or a function");for(l=0,u=s.length;l<u;l+=1)h="",(!n||l!==0)&&(h+=generateNextLine(o,e)),d=s[l],f=t[d],writeNode(o,e+1,d,!0,!0,!0)&&(m=o.tag!==null&&o.tag!=="?"||o.dump&&o.dump.length>1024,m&&(o.dump&&CHAR_LINE_FEED===o.dump.charCodeAt(0)?h+="?":h+="? "),h+=o.dump,m&&(h+=generateNextLine(o,e)),writeNode(o,e+1,f,!0,m)&&(o.dump&&CHAR_LINE_FEED===o.dump.charCodeAt(0)?h+=":":h+=": ",h+=o.dump,r+=h));o.tag=a,o.dump=r||"{}"}function detectType(o,e,t){var n,r,a,s,l,u;for(r=t?o.explicitTypes:o.implicitTypes,a=0,s=r.length;a<s;a+=1)if(l=r[a],(l.instanceOf||l.predicate)&&(!l.instanceOf||typeof e=="object"&&e instanceof l.instanceOf)&&(!l.predicate||l.predicate(e))){if(o.tag=t?l.tag:"?",l.represent){if(u=o.styleMap[l.tag]||l.defaultStyle,_toString.call(l.represent)==="[object Function]")n=l.represent(e,u);else if(_hasOwnProperty.call(l.represent,u))n=l.represent[u](e,u);else throw new YAMLException("!<"+l.tag+'> tag resolver accepts not "'+u+'" style');o.dump=n}return!0}return!1}function writeNode(o,e,t,n,r,a){o.tag=null,o.dump=t,detectType(o,t,!1)||detectType(o,t,!0);var s=_toString.call(o.dump);n&&(n=o.flowLevel<0||o.flowLevel>e);var l=s==="[object Object]"||s==="[object Array]",u,d;if(l&&(u=o.duplicates.indexOf(t),d=u!==-1),(o.tag!==null&&o.tag!=="?"||d||o.indent!==2&&e>0)&&(r=!1),d&&o.usedDuplicates[u])o.dump="*ref_"+u;else{if(l&&d&&!o.usedDuplicates[u]&&(o.usedDuplicates[u]=!0),s==="[object Object]")n&&Object.keys(o.dump).length!==0?(writeBlockMapping(o,e,o.dump,r),d&&(o.dump="&ref_"+u+o.dump)):(writeFlowMapping(o,e,o.dump),d&&(o.dump="&ref_"+u+" "+o.dump));else if(s==="[object Array]"){var f=o.noArrayIndent&&e>0?e-1:e;n&&o.dump.length!==0?(writeBlockSequence(o,f,o.dump,r),d&&(o.dump="&ref_"+u+o.dump)):(writeFlowSequence(o,f,o.dump),d&&(o.dump="&ref_"+u+" "+o.dump))}else if(s==="[object String]")o.tag!=="?"&&writeScalar(o,o.dump,e,a);else{if(o.skipInvalid)return!1;throw new YAMLException("unacceptable kind of an object to dump "+s)}o.tag!==null&&o.tag!=="?"&&(o.dump="!<"+o.tag+"> "+o.dump)}return!0}function getDuplicateReferences(o,e){var t=[],n=[],r,a;for(inspectNode(o,t,n),r=0,a=n.length;r<a;r+=1)e.duplicates.push(t[n[r]]);e.usedDuplicates=new Array(a)}function inspectNode(o,e,t){var n,r,a;if(o!==null&&typeof o=="object")if(r=e.indexOf(o),r!==-1)t.indexOf(r)===-1&&t.push(r);else if(e.push(o),Array.isArray(o))for(r=0,a=o.length;r<a;r+=1)inspectNode(o[r],e,t);else for(n=Object.keys(o),r=0,a=n.length;r<a;r+=1)inspectNode(o[n[r]],e,t)}function dump(o,e){e=e||{};var t=new State(e);return t.noRefs||getDuplicateReferences(o,t),writeNode(t,0,o,!0,!0)?t.dump+`
`:""}function safeDump(o,e){return dump(o,common.extend({schema:DEFAULT_SAFE_SCHEMA},e))}dumper$1.dump=dump;dumper$1.safeDump=safeDump;var loader=loader$1,dumper=dumper$1;function deprecated(o){return function(){throw new Error("Function "+o+" is deprecated and cannot be used.")}}jsYaml$1.Type=type;jsYaml$1.Schema=schema;jsYaml$1.FAILSAFE_SCHEMA=failsafe;jsYaml$1.JSON_SCHEMA=json;jsYaml$1.CORE_SCHEMA=core;jsYaml$1.DEFAULT_SAFE_SCHEMA=default_safe;jsYaml$1.DEFAULT_FULL_SCHEMA=default_full;jsYaml$1.load=loader.load;jsYaml$1.loadAll=loader.loadAll;jsYaml$1.safeLoad=loader.safeLoad;jsYaml$1.safeLoadAll=loader.safeLoadAll;jsYaml$1.dump=dumper.dump;jsYaml$1.safeDump=dumper.safeDump;jsYaml$1.YAMLException=exception;jsYaml$1.MINIMAL_SCHEMA=failsafe;jsYaml$1.SAFE_SCHEMA=default_safe;jsYaml$1.DEFAULT_SCHEMA=default_full;jsYaml$1.scan=deprecated("scan");jsYaml$1.parse=deprecated("parse");jsYaml$1.compose=deprecated("compose");jsYaml$1.addConstructor=deprecated("addConstructor");var yaml=jsYaml$1,jsYaml=yaml;const yaml$1=getDefaultExportFromCjs(jsYaml);function copyTextToClipboard(o){const e=document.activeElement,t=document.createElement("textarea");t.style.position="fixed",t.style.top="0",t.style.left="0",t.style.width="2em",t.style.height="2em",t.style.padding="0",t.style.border="none",t.style.outline="none",t.style.boxShadow="none",t.style.background="transparent",t.value=o,document.body.appendChild(t),t.select();try{document.execCommand("copy")||console.log("Failed copy to clipboard")}catch(n){console.log("Failed copy to clipboard: "+n)}document.body.removeChild(t),e&&e.focus()}function extractRowCopiedValue(o,e){let t=o[e];return t===void 0&&(t=_.get(o,e)),lib.stringifyCellValue(t)}const clipboardTextFormatter=(o,e)=>(t,n)=>{const r=[];return e&&r.push(t.join(o)),r.push(...n.map(a=>a?t.map(l=>extractRowCopiedValue(a,l)).join(o):"")),r.join(`\r
`)},clipboardJsonFormatter=()=>(o,e)=>JSON.stringify(e.map(t=>_.pick(t,o)),void 0,2),clipboardYamlFormatter=()=>(o,e)=>yaml$1.dump(e.map(t=>_.pick(t,o))),clipboardJsonLinesFormatter=()=>(o,e)=>e.map(t=>JSON.stringify(_.pick(t,o))).join(`\r
`),clipboardInsertsFormatter=()=>(o,e,t)=>{const{schemaName:n,pureName:r,driver:a}=t,s=a.createDumper();for(const l of e)s.putCmd("^insert ^into %f (%,i) ^values (%,v)",{schemaName:n,pureName:r},o,o.map(u=>l[u]));return s.s},clipboardUpdatesFormatter=()=>(o,e,t)=>{const{schemaName:n,pureName:r,driver:a,keyColumns:s}=t,l=a.createDumper();for(const u of e)l.put("^update %f ^set ",{schemaName:n,pureName:r}),l.putCollection(", ",o,d=>l.put("%i=%v",d,u[d])),l.put(" ^where "),l.putCollection(" ^and ",s,d=>l.put("%i=%v",d,u[d])),l.endCommand();return l.s},clipboardMongoInsertFormatter=()=>(o,e,t)=>{const{pureName:n}=t;return e.map(r=>`db.${n}.insert(${JSON.stringify(_.pick(r,o),void 0,2)});`).join(`
`)};function formatClipboardRows(o,e,t,n){return o in copyRowsFormatDefs?copyRowsFormatDefs[o].formatter(e,t,n):""}function copyRowsToClipboard(o,e,t,n){const r=formatClipboardRows(o,e,t,n);copyTextToClipboard(r)}const copyRowsFormatDefs={textWithHeaders:{label:"Copy with headers",name:"With headers",formatter:clipboardTextFormatter("	",!0)},textWithoutHeaders:{label:"Copy without headers",name:"Without headers",formatter:clipboardTextFormatter("	",!1)},csv:{label:"Copy as CSV",name:"CSV",formatter:clipboardTextFormatter(",",!0)},json:{label:"Copy as JSON",name:"JSON",formatter:clipboardJsonFormatter()},jsonLines:{label:"Copy as JSON lines/NDJSON",name:"JSON lines/NDJSON",formatter:clipboardJsonLinesFormatter()},yaml:{label:"Copy as YAML",name:"YAML",formatter:clipboardYamlFormatter()},inserts:{label:"Copy as SQL INSERTs",name:"SQL INSERTs",formatter:clipboardInsertsFormatter()},updates:{label:"Copy as SQL UPDATEs",name:"SQL UPDATEs",formatter:clipboardUpdatesFormatter()},mongoInsert:{label:"Copy as Mongo INSERTs",name:"Mongo INSERTs",formatter:clipboardMongoInsertFormatter()}};async function openJsonLinesData(o){const e=uuidv1();openNewTab({tabComponent:"ArchiveFileTab",icon:"img archive",title:"Data #",props:{jslid:e}},{rows:o})}const JSONTree_svelte_svelte_type_style_lang="";function create_fragment$3O(o){let e,t,n,r,a,s;return t=new JSONNode({props:{key:o[0],value:o[2],isParentExpanded:!0,isParentArray:!1,expanded:o[3],labelOverride:o[4]}}),{c(){e=element("ul"),create_component(t.$$.fragment),attr(e,"class","svelte-1l14734"),toggle_class(e,"isDeleted",o[6]),toggle_class(e,"isInserted",o[7]),toggle_class(e,"isModified",o[8])},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=action_destroyer(n=contextMenu.call(null,e,o[5]?"__no_menu":[o[9],o[1],o[10]])),a=!0)},p(l,[u]){const d={};u&1&&(d.key=l[0]),u&4&&(d.value=l[2]),u&8&&(d.expanded=l[3]),u&16&&(d.labelOverride=l[4]),t.$set(d),n&&is_function(n.update)&&u&34&&n.update.call(null,l[5]?"__no_menu":[l[9],l[1],l[10]]),(!r||u&64)&&toggle_class(e,"isDeleted",l[6]),(!r||u&128)&&toggle_class(e,"isInserted",l[7]),(!r||u&256)&&toggle_class(e,"isModified",l[8])},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function instance$3M(o,e,t){setContext("json-tree-context-key",{});let{key:n=""}=e,{menu:r=null}=e,{value:a}=e,{expandAll:s=!1}=e,{expanded:l=s}=e,{labelOverride:u=null}=e,{slicedKeyCount:d=null}=e,{disableContextMenu:f=null}=e,{isDeleted:m=!1}=e,{isInserted:h=!1}=e,{isModified:p=!1}=e;setContext("json-tree-default-expanded",s),d&&setContext("json-tree-sliced-key-count",d);const g=new WeakMap;g&&setContext("json-tree-element-data",g);const b=getContextMenu();function v({targetElement:y}){if(!y)return null;const C=y.closest(".jsonValueHolder");if(!C)return;const E=g.get(C),A=[];return A.push({text:"Copy JSON",onClick:()=>{copyTextToClipboard(JSON.stringify(E,null,2))}}),E&&_.isArray(E)&&A.push({text:"Open as table",onClick:()=>{openJsonLinesData(E)}}),A}return o.$$set=y=>{"key"in y&&t(0,n=y.key),"menu"in y&&t(1,r=y.menu),"value"in y&&t(2,a=y.value),"expandAll"in y&&t(11,s=y.expandAll),"expanded"in y&&t(3,l=y.expanded),"labelOverride"in y&&t(4,u=y.labelOverride),"slicedKeyCount"in y&&t(12,d=y.slicedKeyCount),"disableContextMenu"in y&&t(5,f=y.disableContextMenu),"isDeleted"in y&&t(6,m=y.isDeleted),"isInserted"in y&&t(7,h=y.isInserted),"isModified"in y&&t(8,p=y.isModified)},[n,r,a,l,u,f,m,h,p,b,v,s,d]}class JSONTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$3M,create_fragment$3O,safe_not_equal,{key:0,menu:1,value:2,expandAll:11,expanded:3,labelOverride:4,slicedKeyCount:12,disableContextMenu:5,isDeleted:6,isInserted:7,isModified:8})}}function getParsedLocalStorage(o){const e=localStorage.getItem(o);if(e!=null)try{return JSON.parse(e)}catch{localStorage.removeItem(o)}return null}const saveHandlersList=[];function useEditorData({tabid:o,reloadToken:e=0,loadFromArgs:t=null,onInitialData:n=null}){const r=`tabdata_editor_${o}`;let a=0,s=0;const l=writable({errorMessage:null,isLoading:!0,value:null}),u=derived(l,y=>y.value);let d=null;const f=async()=>{if(t)try{const y=await t();changeTab(o,C=>({...C,props:_.omit(C.props,["initialArgs"])})),l.update(C=>({...C,value:y})),n&&n(y),d=y,a+=1}catch(y){const C=y&&y.response&&y.response.data&&y.response.data.error||"Loading failed";l.update(E=>({...E,errorMessage:C})),console.error(y.response)}else{const y=getParsedLocalStorage(r);if(y!=null)l.update(C=>({...C,value:y})),n&&n(y),d=y,await localforage.setItem(r,y),localStorage.removeItem(r);else{const C=await localforage.getItem(r);C&&(l.update(E=>({...E,value:C})),n&&n(C),d=C)}}l.update(y=>({...y,isLoading:!1}))},m=async()=>{s!=a&&await h()},h=async()=>{if(d!=null)try{await localforage.setItem(r,d),localStorage.removeItem(r),s=a}catch(y){console.error(y)}},p=()=>{d!=null&&s!=a&&localStorage.setItem(r,JSON.stringify(d))},g=_.debounce(h,5e3),b=y=>{_.isFunction(y)?d=y(d):y!=null&&(d=y),l.update(C=>({...C,value:d})),a+=1,g()},v=async()=>{await localforage.removeItem(r),localStorage.removeItem(r),d=null,l.update(y=>({...y,value:null,errorMessage:null,isLoading:!1}))};return onMount(()=>{window.addEventListener("beforeunload",p),f(),saveHandlersList.push(m)}),onDestroy(()=>{h(),window.removeEventListener("beforeunload",p),_.remove(saveHandlersList,y=>y==m)}),{editorState:l,editorValue:u,setEditorData:b,clearEditorData:v,saveToStorage:h,saveToStorageSync:p,initialLoad:f}}async function saveAllPendingEditorData(){for(const o of saveHandlersList)await o()}const JsonTab_svelte_svelte_type_style_lang="";function create_fragment$3N(o){let e,t,n,r;return n=new JSONTree({props:{value:o[1],expandAll:o[0]}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),attr(t,"class","inner svelte-qjn8rh"),attr(e,"class","outer svelte-qjn8rh")},m(a,s){insert(a,e,s),append(e,t),mount_component(n,t,null),r=!0},p(a,[s]){const l={};s&2&&(l.value=a[1]),s&1&&(l.expandAll=a[0]),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n)}}}function openJsonDocument(o,e="JSON",t=!1){openNewTab({title:e,icon:"img json",tabComponent:"JsonTab",props:{expandAll:t}},{editor:o})}function instance$3L(o,e,t){let{selection:n}=e,{showWholeRow:r=!1}=e,{tabid:a}=e,{expandAll:s}=e,l=null;return useEditorData({tabid:a,onInitialData:u=>{t(1,l=u)}}),o.$$set=u=>{"selection"in u&&t(2,n=u.selection),"showWholeRow"in u&&t(3,r=u.showWholeRow),"tabid"in u&&t(4,a=u.tabid),"expandAll"in u&&t(0,s=u.expandAll)},[s,l,n,r,a]}class JsonTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$3L,create_fragment$3N,safe_not_equal,{selection:2,showWholeRow:3,tabid:4,expandAll:0})}}const JsonTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:JsonTab,openJsonDocument},Symbol.toStringTag,{value:"Module"}));let compiled=null;function hasPermission(o){return lib.testPermission(o,compiled)}function subscribePermissionCompiler(){useConfig().subscribe(o=>{if(!o)return;const{permissions:e}=o;compiled=lib.compilePermissions(e)})}function create_fragment$3M(o){var a,s;let e,t;const n=[o[4],{data:o[0]},{icon:(a=o[1])==null?void 0:a.icon},{title:(s=o[0])==null?void 0:s.file},{menu:o[2]()}];let r={};for(let l=0;l<n.length;l+=1)r=assign(r,n[l]);return e=new AppObjectCore({props:r}),e.$on("click",function(){var l,u;is_function(((l=o[1])==null?void 0:l.tabComponent)&&o[3])&&(((u=o[1])==null?void 0:u.tabComponent)&&o[3]).apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(l,u){mount_component(e,l,u),t=!0},p(l,[u]){var f,m;o=l;const d=u&23?get_spread_update(n,[u&16&&get_spread_object(o[4]),u&1&&{data:o[0]},u&2&&{icon:(f=o[1])==null?void 0:f.icon},u&1&&{title:(m=o[0])==null?void 0:m.file},u&4&&{menu:o[2]()}]):{};e.$set(d)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}globalThis&&globalThis.__awaiter;const sql={icon:"img sql-file",format:"text",tabComponent:"QueryTab",folder:"sql",currentConnection:!0},shell={icon:"img shell",format:"text",tabComponent:"ShellTab",folder:"shell",currentConnection:!1},markdown={icon:"img markdown",format:"text",tabComponent:"MarkdownEditorTab",folder:"markdown",currentConnection:!1},charts={icon:"img chart",format:"json",tabComponent:"ChartTab",folder:"charts",currentConnection:!0},query={icon:"img query-design",format:"json",tabComponent:"QueryDesignTab",folder:"query",currentConnection:!0},sqlite={icon:"img sqlite-database",format:"binary",tabComponent:null,folder:"sqlite",currentConnection:!0},diagrams={icon:"img diagram",format:"json",tabComponent:"DiagramTab",folder:"diagrams",currentConnection:!0},perspectives={icon:"img perspective",format:"json",tabComponent:"PerspectiveTab",folder:"pesrpectives",currentConnection:!0},SAVED_FILE_HANDLERS={sql,shell,markdown,charts,query,sqlite,diagrams,perspectives},extractKey$7=o=>o.file,createMatcher$3=({file:o})=>e=>lib.filterName(e,o);function instance$3K(o,e,t){let n,r;const a=["data"];let s=compute_rest_props(e,a),l;component_subscribe(o,currentDatabase,v=>t(6,l=v));var u=this&&this.__awaiter||function(v,y,C,E){function A(k){return k instanceof C?k:new C(function(T){T(k)})}return new(C||(C=Promise))(function(k,T){function $(R){try{I(E.next(R))}catch(N){T(N)}}function S(R){try{I(E.throw(R))}catch(N){T(N)}}function I(R){R.done?k(R.value):A(R.value).then($,S)}I((E=E.apply(v,y||[])).next())})};let{data:d}=e;const f=()=>{openNewTab({title:d.file,icon:"img markdown",tabComponent:"MarkdownViewTab",props:{savedFile:d.file,savedFolder:"markdown",savedFormat:"text"}})};function m(){return[(r==null?void 0:r.tabComponent)&&{text:"Open",onClick:b},hasPermission(`files/${d.folder}/write`)&&{text:"Rename",onClick:p},hasPermission(`files/${d.folder}/write`)&&{text:"Create copy",onClick:g},hasPermission(`files/${d.folder}/write`)&&{text:"Delete",onClick:h},n=="markdown"&&{text:"Show page",onClick:f}]}const h=()=>{showModal(ConfirmModal,{message:`Really delete file ${d.file}?`,onConfirm:()=>{apiCall("files/delete",d)}})},p=()=>{showModal(InputTextModal,{value:d.file,label:"New file name",header:"Rename file",onConfirm:v=>{apiCall("files/rename",Object.assign(Object.assign({},d),{newFile:v}))}})},g=()=>{showModal(InputTextModal,{value:d.file,label:"New file name",header:"Rename file",onConfirm:v=>{apiCall("files/copy",Object.assign(Object.assign({},d),{newFile:v}))}})};function b(){return u(this,void 0,void 0,function*(){const v=yield apiCall("files/load",{folder:n,file:d.file,format:r.format}),y={};let C;if(r.currentConnection){const E=_.get(l,"connection")||{},A=_.get(l,"name");y.conid=E._id,y.database=A,C=`${getConnectionLabel(E)}
${A}`}openNewTab({title:d.file,icon:r.icon,tabComponent:r.tabComponent,tooltip:C,props:Object.assign({savedFile:d.file,savedFolder:r.folder,savedFormat:r.format},y)},{editor:v})})}return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(4,s=compute_rest_props(e,a)),"data"in v&&t(0,d=v.data)},o.$$.update=()=>{o.$$.dirty&1&&t(5,n=d==null?void 0:d.folder),o.$$.dirty&32&&t(1,r=SAVED_FILE_HANDLERS[n])},[d,r,m,b,s,n]}class SavedFileAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$3K,create_fragment$3M,safe_not_equal,{data:0})}}const savedFileAppObject=Object.freeze(Object.defineProperty({__proto__:null,SAVED_FILE_HANDLERS,createMatcher:createMatcher$3,default:SavedFileAppObject,extractKey:extractKey$7},Symbol.toStringTag,{value:"Module"}));function canOpenByElectron(o,e){var n;if(!o)return!1;const t=o.toLowerCase();if(t.endsWith(".sql")||t.endsWith(".diagram")||t.endsWith(".qdesign")||t.endsWith(".perspective")||t.endsWith(".json")||t.endsWith(".db")||t.endsWith(".sqlite")||t.endsWith(".sqlite3"))return!0;for(const r of e.fileFormats)if(t.endsWith(`.${r.extension}`)||(n=r.extensions)!=null&&n.find(a=>t.endsWith(`.${a}`)))return!0;return!1}async function openSqliteFile(o){const e=getDatabaseFileLabel(o),t=await apiCall("connections/save",{_id:void 0,databaseFile:o,engine:"sqlite@dbgate-plugin-sqlite",singleDatabase:!0,defaultDatabase:e});currentDatabase.set({connection:t,name:getDatabaseFileLabel(o)})}function getFileEncoding(o,e){var t=Buffer.alloc(5),n=e.openSync(o,"r");e.readSync(n,t,0,5,0),e.closeSync(n);let r=null;return!r&&t[0]===239&&t[1]===187&&t[2]===191&&(r="utf8"),!r&&t[0]===254&&t[1]===255&&(r="utf16be"),!r&&t[0]===255&&t[1]===254&&(r="utf16le"),r||(r="ascii"),r}function openElectronJsonLinesFile(o,e){openNewTab({title:e.name,tooltip:o,icon:"img archive",tabComponent:"ArchiveFileTab",props:{jslid:`file://${o}`}})}async function openSavedElectronFile(o,e,t){var u;const n=SAVED_FILE_HANDLERS[t],r=await apiCall("files/load-from",{filePath:o,format:n.format}),a={};let s;const l=getCurrentDatabase();if(n.currentConnection){const d=(l==null?void 0:l.connection)||{},f=l==null?void 0:l.name;a.conid=(u=l==null?void 0:l.connection)==null?void 0:u._id,a.database=f,s=`${getConnectionLabel(d)}
${f}`}openNewTab({title:e.name,icon:n.icon,tabComponent:n.tabComponent,tooltip:s,props:{savedFile:null,savedFolder:null,savedFilePath:o,savedFormat:n.format,...a}},{editor:r})}function openElectronFileCore(o,e){const t=o.toLowerCase(),n=window.require("path"),r=window.require("fs"),a=n.parse(o),s=getUploadListener();if(t.endsWith(".sql")){const l=getFileEncoding(o,r),u=r.readFileSync(o,{encoding:l});newQuery({title:a.name,initialData:u,savedFilePath:o,savedFormat:"text"});return}if(t.endsWith(".db")||t.endsWith(".sqlite")||t.endsWith(".sqlite")){openSqliteFile(o);return}if(t.endsWith(".jsonl")||t.endsWith(".ndjson")){openElectronJsonLinesFile(o,a);return}if(t.endsWith(".json")){r.readFile(o,{encoding:"utf-8"},(l,u)=>{if(l)showModal(ErrorMessageModal,{message:(l==null?void 0:l.message)||"File cannot be loaded"});else try{const d=JSON.parse(u);openJsonDocument(d)}catch(d){showModal(ErrorMessageModal,{message:d.message})}});return}if(t.endsWith(".diagram")){openSavedElectronFile(o,a,"diagrams");return}if(t.endsWith(".qdesign")){openSavedElectronFile(o,a,"query");return}if(t.endsWith(".perspective")){openSavedElectronFile(o,a,"perspectives");return}for(const l of e.fileFormats)t.endsWith(`.${l.extension}`)&&(s?s({filePath:o,storageType:l.storageType,shortName:a.name}):showModal(ImportExportModal,{openedFile:{filePath:o,storageType:l.storageType,shortName:a.name},importToCurrentTarget:!0,initialValues:{sourceStorageType:l.storageType}}))}function getFileFormatFilters(o){return o.fileFormats.filter(e=>e.readerFunc).map(e=>({name:e.name,extensions:e.extensions||[e.extension]}))}function getFileFormatExtensions(o){return _.flatten(o.fileFormats.filter(e=>e.readerFunc).map(e=>e.extensions||[e.extension]))}async function openElectronFile(){const o=getElectron(),e=get_store_value(extensions),t=await o.showOpenDialog({filters:[{name:"All supported files",extensions:["sql","sqlite","db","sqlite3","diagram","qdesign","perspective","json",...getFileFormatExtensions(e)]},{name:"SQL files",extensions:["sql"]},{name:"JSON files",extensions:["json"]},{name:"Diagram files",extensions:["diagram"]},{name:"Query designer files",extensions:["qdesign"]},{name:"Perspective files",extensions:["perspective"]},{name:"SQLite database",extensions:["sqlite","db","sqlite3"]},...getFileFormatFilters(e)],properties:["showHiddenFiles","openFile"]}),n=t&&t[0];canOpenByElectron(n,e)&&openElectronFileCore(n,e)}let uploadListener;function setUploadListener(o){uploadListener=o}function getUploadListener(){return uploadListener}function uploadFiles(o){const e=get_store_value(extensions),t=getElectron();o.forEach(async n=>{if(t&&canOpenByElectron(n.path,e)){openElectronFileCore(n.path,e);return}const r=32*1024*1024;if(parseInt(n.size,10)>=r){showModal(ErrorMessageModal,{title:"Upload error",message:`File is too big, current size is ${Math.round(n.size/1024).toLocaleString()} KB, max allowed size is ${Math.round(r/1024).toLocaleString()} KB`});return}const a=new FormData;a.append("data",n);const s={method:"POST",body:a},l=resolveApi(),d=await(await fetch(`${l}/uploads/upload`,s)).json();if(d.shortName=n.name,n.name.endsWith(".jsonl")||n.name.endsWith(".ndjson")){openNewTab({title:d.shortName,icon:"img archive",tabComponent:"ArchiveFileTab",props:{jslid:`file://${d.filePath}`}});return}for(const f of e.fileFormats)n.name.endsWith("."+f.extension)&&(d.shortName=n.name.slice(0,-f.extension.length-1),d.storageType=f.storageType);uploadListener?uploadListener(d):findFileFormat(e,d.storageType)&&showModal(ImportExportModal,{uploadedFile:d,importToCurrentTarget:!0,initialValues:{sourceStorageType:d.storageType}})})}function create_fragment$3L(o){let e,t;return e=new SelectField({props:{options:o[2],isNative:!0,value:o[1][`actionType_${o[0]}`]||o[2][0].value}}),e.$on("change",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4&&(a.options=n[2]),r&7&&(a.value=n[1][`actionType_${n[0]}`]||n[2][0].value),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3J(o,e,t){let n,r,a;component_subscribe(o,extensions,m=>t(6,a=m));let{name:s}=e,{targetDbinfo:l}=e;const{values:u,setFieldValue:d}=getFormContext();component_subscribe(o,u,m=>t(1,r=m));const f=m=>d(`actionType_${s}`,m.detail);return o.$$set=m=>{"name"in m&&t(0,s=m.name),"targetDbinfo"in m&&t(5,l=m.targetDbinfo)},o.$$.update=()=>{o.$$.dirty&99&&t(2,n=getActionOptions(a,s,r))},[s,r,n,u,d,l,a,f]}class SourceAction extends SvelteComponent{constructor(e){super(),init(this,e,instance$3J,create_fragment$3L,safe_not_equal,{name:0,targetDbinfo:5})}}function create_default_slot_1$L(o){let e,t;return e=new FormTextField({props:{label:"URL",name:"url",style:{width:"30vw"},focused:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$n(o){let e;return{c(){e=text("Download imported file from web")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$m(o){let e,t,n,r;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[0]),n=new FormStyledButton({props:{value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$1p(o){let e,t;const n=[o[1]];let r={$$slots:{footer:[create_footer_slot$m],header:[create_header_slot$n],default:[create_default_slot_1$L]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&2?get_spread_update(n,[get_spread_object(a[1])]):{};s&8&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3K(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1p]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&10&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3I(o,e,t){const n=["onConfirm"];let r=compute_rest_props(e,n),{onConfirm:a}=e;const s=l=>{a(l.detail.url),closeCurrentModal()};return o.$$set=l=>{e=assign(assign({},e),exclude_internal_props(l)),t(1,r=compute_rest_props(e,n)),"onConfirm"in l&&t(2,a=l.onConfirm)},[s,r,a]}class ChangeDownloadUrlModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$3I,create_fragment$3K,safe_not_equal,{onConfirm:2})}}const ChangeDownloadUrlModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ChangeDownloadUrlModal},Symbol.toStringTag,{value:"Module"})),SourceName_svelte_svelte_type_style_lang="";function create_if_block$1D(o){let e,t,n,r,a,s;return t=new FontIcon({props:{icon:"icon web"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","icon svelte-170ou0a"),attr(e,"title",n=o[1]&&o[1].fileName)},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0,a||(s=listen(e,"click",o[4]),a=!0)},p(l,u){(!r||u&2&&n!==(n=l[1]&&l[1].fileName))&&attr(e,"title",n)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),destroy_component(t),a=!1,s()}}}function create_fragment$3J(o){let e,t,n,r,a,s,l,u,d,f,m,h=o[1]&&!!o[1].isDownload&&create_if_block$1D(o);return u=new FontIcon({props:{icon:"icon delete"}}),{c(){e=element("div"),t=element("div"),n=text(o[0]),r=space(),a=element("div"),h&&h.c(),s=space(),l=element("div"),create_component(u.$$.fragment),attr(l,"class","icon svelte-170ou0a"),attr(a,"class","flex"),attr(e,"class","flex space-between")},m(p,g){insert(p,e,g),append(e,t),append(t,n),append(e,r),append(e,a),h&&h.m(a,null),append(a,s),append(a,l),mount_component(u,l,null),d=!0,f||(m=listen(l,"click",o[3]),f=!0)},p(p,[g]){(!d||g&1)&&set_data(n,p[0]),p[1]&&p[1].isDownload?h?(h.p(p,g),g&2&&transition_in(h,1)):(h=create_if_block$1D(p),h.c(),transition_in(h,1),h.m(a,s)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros())},i(p){d||(transition_in(h),transition_in(u.$$.fragment,p),d=!0)},o(p){transition_out(h),transition_out(u.$$.fragment,p),d=!1},d(p){p&&detach(e),h&&h.d(),destroy_component(u),f=!1,m()}}}function instance$3H(o,e,t){let n,r,{name:a}=e;const{values:s,setFieldValue:l}=getFormContext();component_subscribe(o,s,m=>t(5,r=m));const u=()=>{l("sourceList",r.sourceList.filter(m=>m!=a))},d=m=>{l(`sourceFile_${a}`,{fileName:m,isDownload:!0})},f=()=>{showModal(ChangeDownloadUrlModal,{url:n.fileName,onConfirm:d})};return o.$$set=m=>{"name"in m&&t(0,a=m.name)},o.$$.update=()=>{o.$$.dirty&33&&t(1,n=r[`sourceFile_${a}`])},[a,n,s,u,f,r]}class SourceName extends SvelteComponent{constructor(e){super(),init(this,e,instance$3H,create_fragment$3J,safe_not_equal,{name:0})}}const FormArchiveFilesSelect_svelte_svelte_type_style_lang="";function create_fragment$3I(o){let e,t,n,r,a,s,l,u;const d=[o[7],{options:o[2]},{isMulti:!0},{templateProps:{noMargin:!0}}];let f={};for(let m=0;m<d.length;m+=1)f=assign(f,d[m]);return t=new FormSelectField({props:f}),a=new FormStyledButton({props:{type:"button",value:"All files"}}),a.$on("click",o[9]),l=new FormStyledButton({props:{type:"button",value:"Remove all"}}),l.$on("click",o[10]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),attr(e,"class","wrapper svelte-y6l14f")},m(m,h){insert(m,e,h),mount_component(t,e,null),append(e,n),append(e,r),mount_component(a,r,null),append(r,s),mount_component(l,r,null),u=!0},p(m,[h]){const p=h&132?get_spread_update(d,[h&128&&get_spread_object(m[7]),h&4&&{options:m[2]},d[2],d[3]]):{};t.$set(p)},i(m){u||(transition_in(t.$$.fragment,m),transition_in(a.$$.fragment,m),transition_in(l.$$.fragment,m),u=!0)},o(m){transition_out(t.$$.fragment,m),transition_out(a.$$.fragment,m),transition_out(l.$$.fragment,m),u=!1},d(m){m&&detach(e),destroy_component(t),destroy_component(a),destroy_component(l)}}}function instance$3G(o,e,t){let n,r,a,s=noop$1,l=()=>(s(),s=subscribe(n,b=>t(1,a=b)),n),u;o.$$.on_destroy.push(()=>s());let{folderName:d}=e,{name:f}=e;const{setFieldValue:m,values:h}=getFormContext();component_subscribe(o,h,b=>t(4,u=b));const p=()=>m(f,_.uniq([...u[f]||[],...a&&a.map(b=>b.name)])),g=()=>m(f,[]);return o.$$set=b=>{t(7,e=assign(assign({},e),exclude_internal_props(b))),"folderName"in b&&t(8,d=b.folderName),"name"in b&&t(0,f=b.name)},o.$$.update=()=>{o.$$.dirty&256&&l(t(3,n=useArchiveFiles({folder:d}))),o.$$.dirty&2&&t(2,r=(a||[]).map(b=>({value:b.name,label:b.name})))},e=exclude_internal_props(e),[f,a,r,n,u,m,h,e,d,p,g]}class FormArchiveFilesSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3G,create_fragment$3I,safe_not_equal,{folderName:8,name:0})}}function create_fragment$3H(o){let e,t;const n=[o[3],{options:o[0]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectField({props:r}),e.$on("change",o[2]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&9?get_spread_update(n,[s&8&&get_spread_object(a[3]),s&1&&{options:a[0]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$3F(o,e,t){let n,r,{additionalFolders:a=[]}=e,{name:s}=e;const{setFieldValue:l}=getFormContext(),u=useArchiveFolders();component_subscribe(o,u,m=>t(6,r=m));const d=m=>{apiCall("archive/create-folder",{folder:m}),l(s,m)};function f(m){m.detail=="@create"&&showModal(InputTextModal,{header:"Archive",label:"Name of new folder",onConfirm:d})}return o.$$set=m=>{t(3,e=assign(assign({},e),exclude_internal_props(m))),"additionalFolders"in m&&t(4,a=m.additionalFolders),"name"in m&&t(5,s=m.name)},o.$$.update=()=>{o.$$.dirty&80&&t(0,n=[...(r||[]).map(m=>({value:m.name,label:m.name})),...a.filter(m=>!(r||[]).find(h=>h.name==m)).map(m=>({value:m,label:m})),{label:"(Create new)",value:"@create"}])},e=exclude_internal_props(e),[n,u,f,e,a,s,r]}class FormArchiveFolderSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3F,create_fragment$3H,safe_not_equal,{additionalFolders:4,name:5})}}function create_fragment$3G(o){let e,t;const n=[o[5],{checked:o[2][o[0]]??o[1]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new CheckboxField({props:r}),e.$on("change",o[4]),e.$on("change",o[6]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&39?get_spread_update(n,[s&32&&get_spread_object(a[5]),s&7&&{checked:a[2][a[0]]??a[1]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$3E(o,e,t){const n=["name","defaultValue"];let r=compute_rest_props(e,n),a,{name:s}=e,{defaultValue:l}=e;const{values:u,setFieldValue:d}=getFormContext();component_subscribe(o,u,h=>t(2,a=h));function f(h){d(s,h.target.checked)}function m(h){bubble.call(this,o,h)}return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(5,r=compute_rest_props(e,n)),"name"in h&&t(0,s=h.name),"defaultValue"in h&&t(1,l=h.defaultValue)},[s,l,a,u,f,r,m]}class FormCheckboxFieldRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$3E,create_fragment$3G,safe_not_equal,{name:0,defaultValue:1})}}function create_default_slot$1o(o){let e,t;const n=[{name:o[1]},o[9],{disabled:o[2]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormCheckboxFieldRaw({props:r}),e.$on("change",o[10]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&518?get_spread_update(n,[s&2&&{name:a[1]},s&512&&get_spread_object(a[9]),s&4&&{disabled:a[2]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3F(o){let e,t,n;const r=[{type:"checkbox"},{label:o[0]},{disabled:o[2]},o[3],{labelProps:o[2]?{disabled:!0}:{onClick:o[11]}}];var a=o[5];function s(l){let u={$$slots:{default:[create_default_slot$1o]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&351?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&{disabled:l[2]},u&8&&get_spread_object(l[3]),u&342&&{labelProps:l[2]?{disabled:!0}:{onClick:l[11]}}]):{};if(u&4614&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[5])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$3D(o,e,t){const n=["label","name","disabled","templateProps"];let r=compute_rest_props(e,n),a,{label:s}=e,{name:l}=e,{disabled:u=!1}=e,{templateProps:d={}}=e;const{template:f,setFieldValue:m,values:h}=getFormContext();component_subscribe(o,h,v=>t(4,a=v));const p=createEventDispatcher();function g(v){bubble.call(this,o,v)}const b=()=>{m(l,!a[l]),p("change")};return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(9,r=compute_rest_props(e,n)),"label"in v&&t(0,s=v.label),"name"in v&&t(1,l=v.name),"disabled"in v&&t(2,u=v.disabled),"templateProps"in v&&t(3,d=v.templateProps)},[s,l,u,d,a,f,m,h,p,r,g,b]}class FormCheckboxField extends SvelteComponent{constructor(e){super(),init(this,e,instance$3D,create_fragment$3F,safe_not_equal,{label:0,name:1,disabled:2,templateProps:3})}}function create_if_block_3$u(o){let e,t;return e=new FormSelectField({props:{label:o[0].label,isNative:!0,name:o[1],defaultValue:o[0].default,options:o[0].options.map(o[3])}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.label=n[0].label),r&2&&(a.name=n[1]),r&1&&(a.defaultValue=n[0].default),r&1&&(a.options=n[0].options.map(n[3])),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$G(o){let e,t;return e=new FormCheckboxField({props:{label:o[0].label,name:o[1],defaultValue:o[0].default}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.label=n[0].label),r&2&&(a.name=n[1]),r&1&&(a.defaultValue=n[0].default),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$V(o){let e,t;return e=new FormTextField({props:{label:o[0].label,type:"number",name:o[1],defaultValue:o[0].default}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.label=n[0].label),r&2&&(a.name=n[1]),r&1&&(a.defaultValue=n[0].default),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1C(o){let e,t;return e=new FormTextField({props:{label:o[0].label,name:o[1],defaultValue:o[0].default}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.label=n[0].label),r&2&&(a.name=n[1]),r&1&&(a.defaultValue=n[0].default),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3E(o){let e,t,n,r;const a=[create_if_block$1C,create_if_block_1$V,create_if_block_2$G,create_if_block_3$u],s=[];function l(u,d){return u[0].type=="text"?0:u[0].type=="number"?1:u[0].type=="checkbox"?2:u[0].type=="select"?3:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function instance$3C(o,e,t){let n,{arg:r}=e,{namePrefix:a}=e;const s=l=>_.isString(l)?{label:l,value:l}:{label:l.name,value:l.value};return o.$$set=l=>{"arg"in l&&t(0,r=l.arg),"namePrefix"in l&&t(2,a=l.namePrefix)},o.$$.update=()=>{o.$$.dirty&5&&t(1,n=`${a}${r.name}`)},[r,n,a,s]}class FormArgument extends SvelteComponent{constructor(e){super(),init(this,e,instance$3C,create_fragment$3E,safe_not_equal,{arg:0,namePrefix:2})}}function get_each_context$z(o,e,t){const n=o.slice();return n[2]=e[t],n}function create_each_block$z(o,e){let t,n,r;return n=new FormArgument({props:{arg:e[2],namePrefix:e[0]}}),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(a,s){insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){e=a;const l={};s&2&&(l.arg=e[2]),s&1&&(l.namePrefix=e[0]),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(n,a)}}}function create_fragment$3D(o){let e,t=[],n=new Map,r,a=ensure_array_like(o[1]);const s=l=>l[2].name;for(let l=0;l<a.length;l+=1){let u=get_each_context$z(o,a,l),d=s(u);n.set(d,t[l]=create_each_block$z(d,u))}return{c(){e=element("div");for(let l=0;l<t.length;l+=1)t[l].c()},m(l,u){insert(l,e,u);for(let d=0;d<t.length;d+=1)t[d]&&t[d].m(e,null);r=!0},p(l,[u]){u&3&&(a=ensure_array_like(l[1]),group_outros(),t=update_keyed_each(t,u,s,1,l,a,n,e,outro_and_destroy_block,create_each_block$z,null,get_each_context$z),check_outros())},i(l){if(!r){for(let u=0;u<a.length;u+=1)transition_in(t[u]);r=!0}},o(l){for(let u=0;u<t.length;u+=1)transition_out(t[u]);r=!1},d(l){l&&detach(e);for(let u=0;u<t.length;u+=1)t[u].d()}}}function instance$3B(o,e,t){let{namePrefix:n}=e,{args:r}=e;return o.$$set=a=>{"namePrefix"in a&&t(0,n=a.namePrefix),"args"in a&&t(1,r=a.args)},[n,r]}class FormArgumentList extends SvelteComponent{constructor(e){super(),init(this,e,instance$3B,create_fragment$3D,safe_not_equal,{namePrefix:0,args:1})}}var ace$1={exports:{}};(function(o,e){(function(){var t="ace",n=function(){return this}();!n&&typeof window<"u"&&(n=window);var r=function(f,m,h){if(typeof f!="string"){r.original?r.original.apply(this,arguments):(console.error("dropping module because define wasn't a string."),console.trace());return}arguments.length==2&&(h=m),r.modules[f]||(r.payloads[f]=h,r.modules[f]=null)};r.modules={},r.payloads={};var a=function(f,m,h){if(typeof m=="string"){var p=u(f,m);if(p!=null)return h&&h(),p}else if(Object.prototype.toString.call(m)==="[object Array]"){for(var g=[],b=0,v=m.length;b<v;++b){var y=u(f,m[b]);if(y==null&&s.original)return;g.push(y)}return h&&h.apply(null,g)||!0}},s=function(f,m){var h=a("",f,m);return h==null&&s.original?s.original.apply(this,arguments):h},l=function(f,m){if(m.indexOf("!")!==-1){var h=m.split("!");return l(f,h[0])+"!"+l(f,h[1])}if(m.charAt(0)=="."){var p=f.split("/").slice(0,-1).join("/");for(m=p+"/"+m;m.indexOf(".")!==-1&&g!=m;){var g=m;m=m.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return m},u=function(f,m){m=l(f,m);var h=r.modules[m];if(!h){if(h=r.payloads[m],typeof h=="function"){var p={},g={id:m,uri:"",exports:p,packaged:!0},b=function(y,C){return a(m,y,C)},v=h(b,p,g);p=v||g.exports,r.modules[m]=p,delete r.payloads[m]}h=r.modules[m]=p||h}return h};function d(f){var m=n;f&&(n[f]||(n[f]={}),m=n[f]),(!m.define||!m.define.packaged)&&(r.original=m.define,m.define=r,m.define.packaged=!0),(!m.require||!m.require.packaged)&&(s.original=m.require,m.require=s,m.require.packaged=!0)}d(t)})(),ace.define("ace/lib/es6-shim",["require","exports","module"],function(t,n,r){function a(s,l,u){Object.defineProperty(s,l,{value:u,enumerable:!1,writable:!0,configurable:!0})}String.prototype.startsWith||a(String.prototype,"startsWith",function(s,l){return l=l||0,this.lastIndexOf(s,l)===l}),String.prototype.endsWith||a(String.prototype,"endsWith",function(s,l){var u=this;(l===void 0||l>u.length)&&(l=u.length),l-=s.length;var d=u.indexOf(s,l);return d!==-1&&d===l}),String.prototype.repeat||a(String.prototype,"repeat",function(s){for(var l="",u=this;s>0;)s&1&&(l+=u),(s>>=1)&&(u+=u);return l}),String.prototype.includes||a(String.prototype,"includes",function(s,l){return this.indexOf(s,l)!=-1}),Object.assign||(Object.assign=function(s){if(s==null)throw new TypeError("Cannot convert undefined or null to object");for(var l=Object(s),u=1;u<arguments.length;u++){var d=arguments[u];d!=null&&Object.keys(d).forEach(function(f){l[f]=d[f]})}return l}),Object.values||(Object.values=function(s){return Object.keys(s).map(function(l){return s[l]})}),Array.prototype.find||a(Array.prototype,"find",function(s){for(var l=this.length,u=arguments[1],d=0;d<l;d++){var f=this[d];if(s.call(u,f,d,this))return f}}),Array.prototype.findIndex||a(Array.prototype,"findIndex",function(s){for(var l=this.length,u=arguments[1],d=0;d<l;d++){var f=this[d];if(s.call(u,f,d,this))return d}}),Array.prototype.includes||a(Array.prototype,"includes",function(s,l){return this.indexOf(s,l)!=-1}),Array.prototype.fill||a(Array.prototype,"fill",function(s){for(var l=this,u=l.length>>>0,d=arguments[1],f=d>>0,m=f<0?Math.max(u+f,0):Math.min(f,u),h=arguments[2],p=h===void 0?u:h>>0,g=p<0?Math.max(u+p,0):Math.min(p,u);m<g;)l[m]=s,m++;return l}),Array.of||a(Array,"of",function(){return Array.prototype.slice.call(arguments)})}),ace.define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/es6-shim"],function(t,n,r){t("./es6-shim")}),ace.define("ace/lib/lang",["require","exports","module"],function(t,n,r){n.last=function(l){return l[l.length-1]},n.stringReverse=function(l){return l.split("").reverse().join("")},n.stringRepeat=function(l,u){for(var d="";u>0;)u&1&&(d+=l),(u>>=1)&&(l+=l);return d};var a=/^\s\s*/,s=/\s\s*$/;n.stringTrimLeft=function(l){return l.replace(a,"")},n.stringTrimRight=function(l){return l.replace(s,"")},n.copyObject=function(l){var u={};for(var d in l)u[d]=l[d];return u},n.copyArray=function(l){for(var u=[],d=0,f=l.length;d<f;d++)l[d]&&typeof l[d]=="object"?u[d]=this.copyObject(l[d]):u[d]=l[d];return u},n.deepCopy=function l(u){if(typeof u!="object"||!u)return u;var d;if(Array.isArray(u)){d=[];for(var f=0;f<u.length;f++)d[f]=l(u[f]);return d}if(Object.prototype.toString.call(u)!=="[object Object]")return u;d={};for(var f in u)d[f]=l(u[f]);return d},n.arrayToMap=function(l){for(var u={},d=0;d<l.length;d++)u[l[d]]=1;return u},n.createMap=function(l){var u=Object.create(null);for(var d in l)u[d]=l[d];return u},n.arrayRemove=function(l,u){for(var d=0;d<=l.length;d++)u===l[d]&&l.splice(d,1)},n.escapeRegExp=function(l){return l.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},n.escapeHTML=function(l){return(""+l).replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},n.getMatchOffsets=function(l,u){var d=[];return l.replace(u,function(f){d.push({offset:arguments[arguments.length-2],length:f.length})}),d},n.deferredCall=function(l){var u=null,d=function(){u=null,l()},f=function(m){return f.cancel(),u=setTimeout(d,m||0),f};return f.schedule=f,f.call=function(){return this.cancel(),l(),f},f.cancel=function(){return clearTimeout(u),u=null,f},f.isPending=function(){return u},f},n.delayedCall=function(l,u){var d=null,f=function(){d=null,l()},m=function(h){d==null&&(d=setTimeout(f,h||u))};return m.delay=function(h){d&&clearTimeout(d),d=setTimeout(f,h||u)},m.schedule=m,m.call=function(){this.cancel(),l()},m.cancel=function(){d&&clearTimeout(d),d=null},m.isPending=function(){return d},m}}),ace.define("ace/lib/oop",["require","exports","module"],function(t,n,r){n.inherits=function(a,s){a.super_=s,a.prototype=Object.create(s.prototype,{constructor:{value:a,enumerable:!1,writable:!0,configurable:!0}})},n.mixin=function(a,s){for(var l in s)a[l]=s[l];return a},n.implement=function(a,s){n.mixin(a,s)}}),ace.define("ace/lib/useragent",["require","exports","module"],function(t,n,r){n.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},n.getOS=function(){return n.isMac?n.OS.MAC:n.isLinux?n.OS.LINUX:n.OS.WINDOWS};var a=typeof navigator=="object"?navigator:{},s=(/mac|win|linux/i.exec(a.platform)||["other"])[0].toLowerCase(),l=a.userAgent||"",u=a.appName||"";n.isWin=s=="win",n.isMac=s=="mac",n.isLinux=s=="linux",n.isIE=u=="Microsoft Internet Explorer"||u.indexOf("MSAppHost")>=0?parseFloat((l.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((l.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),n.isOldIE=n.isIE&&n.isIE<9,n.isGecko=n.isMozilla=l.match(/ Gecko\/\d+/),n.isOpera=typeof opera=="object"&&Object.prototype.toString.call(window.opera)=="[object Opera]",n.isWebKit=parseFloat(l.split("WebKit/")[1])||void 0,n.isChrome=parseFloat(l.split(" Chrome/")[1])||void 0,n.isEdge=parseFloat(l.split(" Edge/")[1])||void 0,n.isAIR=l.indexOf("AdobeAIR")>=0,n.isAndroid=l.indexOf("Android")>=0,n.isChromeOS=l.indexOf(" CrOS ")>=0,n.isIOS=/iPad|iPhone|iPod/.test(l)&&!window.MSStream,n.isIOS&&(n.isMac=!0),n.isMobile=n.isIOS||n.isAndroid}),ace.define("ace/lib/dom",["require","exports","module","ace/lib/useragent"],function(t,n,r){var a=t("./useragent"),s="http://www.w3.org/1999/xhtml";n.buildDom=function h(p,g,b){if(typeof p=="string"&&p){var v=document.createTextNode(p);return g&&g.appendChild(v),v}if(!Array.isArray(p))return p&&p.appendChild&&g&&g.appendChild(p),p;if(typeof p[0]!="string"||!p[0]){for(var y=[],C=0;C<p.length;C++){var E=h(p[C],g,b);E&&y.push(E)}return y}var A=document.createElement(p[0]),k=p[1],T=1;k&&typeof k=="object"&&!Array.isArray(k)&&(T=2);for(var C=T;C<p.length;C++)h(p[C],A,b);return T==2&&Object.keys(k).forEach(function($){var S=k[$];$==="class"?A.className=Array.isArray(S)?S.join(" "):S:typeof S=="function"||$=="value"||$[0]=="$"?A[$]=S:$==="ref"?b&&(b[S]=A):$==="style"?typeof S=="string"&&(A.style.cssText=S):S!=null&&A.setAttribute($,S)}),g&&g.appendChild(A),A},n.getDocumentHead=function(h){return h||(h=document),h.head||h.getElementsByTagName("head")[0]||h.documentElement},n.createElement=function(h,p){return document.createElementNS?document.createElementNS(p||s,h):document.createElement(h)},n.removeChildren=function(h){h.innerHTML=""},n.createTextNode=function(h,p){var g=p?p.ownerDocument:document;return g.createTextNode(h)},n.createFragment=function(h){var p=h?h.ownerDocument:document;return p.createDocumentFragment()},n.hasCssClass=function(h,p){var g=(h.className+"").split(/\s+/g);return g.indexOf(p)!==-1},n.addCssClass=function(h,p){n.hasCssClass(h,p)||(h.className+=" "+p)},n.removeCssClass=function(h,p){for(var g=h.className.split(/\s+/g);;){var b=g.indexOf(p);if(b==-1)break;g.splice(b,1)}h.className=g.join(" ")},n.toggleCssClass=function(h,p){for(var g=h.className.split(/\s+/g),b=!0;;){var v=g.indexOf(p);if(v==-1)break;b=!1,g.splice(v,1)}return b&&g.push(p),h.className=g.join(" "),b},n.setCssClass=function(h,p,g){g?n.addCssClass(h,p):n.removeCssClass(h,p)},n.hasCssString=function(h,p){var g=0,b;if(p=p||document,b=p.querySelectorAll("style")){for(;g<b.length;)if(b[g++].id===h)return!0}},n.removeElementById=function(h,p){p=p||document,p.getElementById(h)&&p.getElementById(h).remove()};var l,u=[];n.useStrictCSP=function(h){l=h,h==!1?d():u||(u=[])};function d(){var h=u;u=null,h&&h.forEach(function(p){f(p[0],p[1])})}function f(h,p,g){if(!(typeof document>"u")){if(u){if(g)d();else if(g===!1)return u.push([h,p])}if(!l){var b=g;!g||!g.getRootNode?b=document:(b=g.getRootNode(),(!b||b==g)&&(b=document));var v=b.ownerDocument||b;if(p&&n.hasCssString(p,b))return null;p&&(h+=`
/*# sourceURL=ace/css/`+p+" */");var y=n.createElement("style");y.appendChild(v.createTextNode(h)),p&&(y.id=p),b==v&&(b=n.getDocumentHead(v)),b.insertBefore(y,b.firstChild)}}}if(n.importCssString=f,n.importCssStylsheet=function(h,p){n.buildDom(["link",{rel:"stylesheet",href:h}],n.getDocumentHead(p))},n.scrollbarWidth=function(h){var p=n.createElement("ace_inner");p.style.width="100%",p.style.minWidth="0px",p.style.height="200px",p.style.display="block";var g=n.createElement("ace_outer"),b=g.style;b.position="absolute",b.left="-10000px",b.overflow="hidden",b.width="200px",b.minWidth="0px",b.height="150px",b.display="block",g.appendChild(p);var v=h.documentElement;v.appendChild(g);var y=p.offsetWidth;b.overflow="scroll";var C=p.offsetWidth;return y==C&&(C=g.clientWidth),v.removeChild(g),y-C},n.computedStyle=function(h,p){return window.getComputedStyle(h,"")||{}},n.setStyle=function(h,p,g){h[p]!==g&&(h[p]=g)},n.HAS_CSS_ANIMATION=!1,n.HAS_CSS_TRANSFORMS=!1,n.HI_DPI=a.isWin?typeof window<"u"&&window.devicePixelRatio>=1.5:!0,a.isChromeOS&&(n.HI_DPI=!1),typeof document<"u"){var m=document.createElement("div");n.HI_DPI&&m.style.transform!==void 0&&(n.HAS_CSS_TRANSFORMS=!0),!a.isEdge&&typeof m.style.animationName<"u"&&(n.HAS_CSS_ANIMATION=!0),m=null}n.HAS_CSS_TRANSFORMS?n.translate=function(h,p,g){h.style.transform="translate("+Math.round(p)+"px, "+Math.round(g)+"px)"}:n.translate=function(h,p,g){h.style.top=Math.round(g)+"px",h.style.left=Math.round(p)+"px"}}),ace.define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(t,n,r){var a=t("./dom");n.get=function(s,l){var u=new XMLHttpRequest;u.open("GET",s,!0),u.onreadystatechange=function(){u.readyState===4&&l(u.responseText)},u.send(null)},n.loadScript=function(s,l){var u=a.getDocumentHead(),d=document.createElement("script");d.src=s,u.appendChild(d),d.onload=d.onreadystatechange=function(f,m){(m||!d.readyState||d.readyState=="loaded"||d.readyState=="complete")&&(d=d.onload=d.onreadystatechange=null,m||l())}},n.qualifyURL=function(s){var l=document.createElement("a");return l.href=s,l.href}}),ace.define("ace/lib/event_emitter",["require","exports","module"],function(t,n,r){var a={},s=function(){this.propagationStopped=!0},l=function(){this.defaultPrevented=!0};a._emit=a._dispatchEvent=function(u,d){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var f=this._eventRegistry[u]||[],m=this._defaultHandlers[u];if(!(!f.length&&!m)){(typeof d!="object"||!d)&&(d={}),d.type||(d.type=u),d.stopPropagation||(d.stopPropagation=s),d.preventDefault||(d.preventDefault=l),f=f.slice();for(var h=0;h<f.length&&(f[h](d,this),!d.propagationStopped);h++);if(m&&!d.defaultPrevented)return m(d,this)}},a._signal=function(u,d){var f=(this._eventRegistry||{})[u];if(f){f=f.slice();for(var m=0;m<f.length;m++)f[m](d,this)}},a.once=function(u,d){var f=this;if(this.on(u,function m(){f.off(u,m),d.apply(null,arguments)}),!d)return new Promise(function(m){d=m})},a.setDefaultHandler=function(u,d){var f=this._defaultHandlers;if(f||(f=this._defaultHandlers={_disabled_:{}}),f[u]){var m=f[u],h=f._disabled_[u];h||(f._disabled_[u]=h=[]),h.push(m);var p=h.indexOf(d);p!=-1&&h.splice(p,1)}f[u]=d},a.removeDefaultHandler=function(u,d){var f=this._defaultHandlers;if(f){var m=f._disabled_[u];if(f[u]==d)m&&this.setDefaultHandler(u,m.pop());else if(m){var h=m.indexOf(d);h!=-1&&m.splice(h,1)}}},a.on=a.addEventListener=function(u,d,f){this._eventRegistry=this._eventRegistry||{};var m=this._eventRegistry[u];return m||(m=this._eventRegistry[u]=[]),m.indexOf(d)==-1&&m[f?"unshift":"push"](d),d},a.off=a.removeListener=a.removeEventListener=function(u,d){this._eventRegistry=this._eventRegistry||{};var f=this._eventRegistry[u];if(f){var m=f.indexOf(d);m!==-1&&f.splice(m,1)}},a.removeAllListeners=function(u){u||(this._eventRegistry=this._defaultHandlers=void 0),this._eventRegistry&&(this._eventRegistry[u]=void 0),this._defaultHandlers&&(this._defaultHandlers[u]=void 0)},n.EventEmitter=a}),ace.define("ace/lib/app_config",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,r){"no use strict";var a=t("./oop"),s=t("./event_emitter").EventEmitter,l={setOptions:function(m){Object.keys(m).forEach(function(h){this.setOption(h,m[h])},this)},getOptions:function(m){var h={};if(m)Array.isArray(m)||(h=m,m=Object.keys(h));else{var p=this.$options;m=Object.keys(p).filter(function(g){return!p[g].hidden})}return m.forEach(function(g){h[g]=this.getOption(g)},this),h},setOption:function(m,h){if(this["$"+m]!==h){var p=this.$options[m];if(!p)return u('misspelled option "'+m+'"');if(p.forwardTo)return this[p.forwardTo]&&this[p.forwardTo].setOption(m,h);p.handlesSet||(this["$"+m]=h),p&&p.set&&p.set.call(this,h)}},getOption:function(m){var h=this.$options[m];return h?h.forwardTo?this[h.forwardTo]&&this[h.forwardTo].getOption(m):h&&h.get?h.get.call(this):this["$"+m]:u('misspelled option "'+m+'"')}};function u(m){typeof console<"u"&&console.warn&&console.warn.apply(console,arguments)}function d(m,h){var p=new Error(m);p.data=h,typeof console=="object"&&console.error&&console.error(p),setTimeout(function(){throw p})}var f=function(){this.$defaultOptions={}};(function(){a.implement(this,s),this.defineOptions=function(m,h,p){return m.$options||(this.$defaultOptions[h]=m.$options={}),Object.keys(p).forEach(function(g){var b=p[g];typeof b=="string"&&(b={forwardTo:b}),b.name||(b.name=g),m.$options[b.name]=b,"initialValue"in b&&(m["$"+b.name]=b.initialValue)}),a.implement(m,l),this},this.resetOptions=function(m){Object.keys(m.$options).forEach(function(h){var p=m.$options[h];"value"in p&&m.setOption(h,p.value)})},this.setDefaultValue=function(m,h,p){if(!m){for(m in this.$defaultOptions)if(this.$defaultOptions[m][h])break;if(!this.$defaultOptions[m][h])return!1}var g=this.$defaultOptions[m]||(this.$defaultOptions[m]={});g[h]&&(g.forwardTo?this.setDefaultValue(g.forwardTo,h,p):g[h].value=p)},this.setDefaultValues=function(m,h){Object.keys(h).forEach(function(p){this.setDefaultValue(m,p,h[p])},this)},this.warn=u,this.reportError=d}).call(f.prototype),n.AppConfig=f}),ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-tm",n.cssText='.ace-tm .ace_gutter {	background: #f0f0f0;	color: #333;	}	.ace-tm .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-tm .ace_fold {	background-color: #6B72E6;	}	.ace-tm {	background-color: #FFFFFF;	color: black;	}	.ace-tm .ace_cursor {	color: black;	}	.ace-tm .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-tm .ace_storage,	.ace-tm .ace_keyword {	color: blue;	}	.ace-tm .ace_constant {	color: rgb(197, 6, 11);	}	.ace-tm .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-tm .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-tm .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-tm .ace_invalid {	background-color: rgba(255, 0, 0, 0.1);	color: red;	}	.ace-tm .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-tm .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-tm .ace_support.ace_type,	.ace-tm .ace_support.ace_class {	color: rgb(109, 121, 222);	}	.ace-tm .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-tm .ace_string {	color: rgb(3, 106, 7);	}	.ace-tm .ace_comment {	color: rgb(76, 136, 107);	}	.ace-tm .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-tm .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-tm .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-tm .ace_variable {	color: rgb(49, 132, 149);	}	.ace-tm .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-tm .ace_entity.ace_name.ace_function {	color: #0000A2;	}	.ace-tm .ace_heading {	color: rgb(12, 7, 255);	}	.ace-tm .ace_list {	color:rgb(185, 6, 144);	}	.ace-tm .ace_meta.ace_tag {	color:rgb(0, 22, 142);	}	.ace-tm .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-tm .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-tm.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px white;	}	.ace-tm .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-tm .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-tm .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-tm .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-tm .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-tm .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-tm .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}	',n.$id="ace/theme/textmate";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),ace.define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/dom","ace/lib/app_config","ace/theme/textmate"],function(t,n,r){"no use strict";var a=t("./lib/lang");t("./lib/oop");var s=t("./lib/net"),l=t("./lib/dom"),u=t("./lib/app_config").AppConfig;r.exports=n=new u;var d={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{},loadWorkerFromBlob:!0,sharedPopups:!1,useStrictCSP:null};n.get=function(m){if(!d.hasOwnProperty(m))throw new Error("Unknown config key: "+m);return d[m]},n.set=function(m,h){if(d.hasOwnProperty(m))d[m]=h;else if(this.setDefaultValue("",m,h)==!1)throw new Error("Unknown config key: "+m);m=="useStrictCSP"&&l.useStrictCSP(h)},n.all=function(){return a.copyObject(d)},n.$modes={},n.moduleUrl=function(m,h){if(d.$moduleUrls[m])return d.$moduleUrls[m];var p=m.split("/");h=h||p[p.length-2]||"";var g=h=="snippets"?"/":"-",b=p[p.length-1];if(h=="worker"&&g=="-"){var v=new RegExp("^"+h+"[\\-_]|[\\-_]"+h+"$","g");b=b.replace(v,"")}(!b||b==h)&&p.length>1&&(b=p[p.length-2]);var y=d[h+"Path"];return y==null?y=d.basePath:g=="/"&&(h=g=""),y&&y.slice(-1)!="/"&&(y+="/"),y+h+g+b+this.get("suffix")},n.setModuleUrl=function(m,h){return d.$moduleUrls[m]=h},n.setLoader=function(m){},n.$loading={},n.loadModule=function(m,h){var p,g;Array.isArray(m)&&(g=m[0],m=m[1]);try{p=t(m)}catch{}if(p&&!n.$loading[m])return h&&h(p);if(n.$loading[m]||(n.$loading[m]=[]),n.$loading[m].push(h),!(n.$loading[m].length>1)){var b=function(){t([m],function(v){n._emit("load.module",{name:m,module:v});var y=n.$loading[m];n.$loading[m]=null,y.forEach(function(C){C&&C(v)})})};if(!n.get("packaged"))return b();s.loadScript(n.moduleUrl(m,g),b),f()}};var f=function(){!d.basePath&&!d.workerPath&&!d.modePath&&!d.themePath&&!Object.keys(d.$moduleUrls).length&&(console.error("Unable to infer path to ace from script src,","use ace.config.set('basePath', 'path') to enable dynamic loading of modes and themes","or with webpack use ace/webpack-resolver"),f=function(){})};n.version="1.8.1"}),ace.define("ace/loader_build",["require","exports","module","ace/lib/fixoldbrowsers","ace/config"],function(t,n,r){t("./lib/fixoldbrowsers");var a=t("./config"),s=function(){return this||typeof window<"u"&&window}();r.exports=function(d){a.init=l,d.require=t},l(!0);function l(d){if(!(!s||!s.document)){a.set("packaged",d||t.packaged||r.packaged||s.define&&(void 0).packaged);for(var f={},m="",h=document.currentScript||document._currentScript,p=h&&h.ownerDocument||document,g=p.getElementsByTagName("script"),b=0;b<g.length;b++){var v=g[b],y=v.src||v.getAttribute("src");if(y){for(var C=v.attributes,E=0,A=C.length;E<A;E++){var k=C[E];k.name.indexOf("data-ace-")===0&&(f[u(k.name.replace(/^data-ace-/,""))]=k.value)}var T=y.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);T&&(m=T[1])}}m&&(f.base=f.base||m,f.packaged=!0),f.basePath=f.base,f.workerPath=f.workerPath||f.base,f.modePath=f.modePath||f.base,f.themePath=f.themePath||f.base,delete f.base;for(var $ in f)typeof f[$]<"u"&&a.set($,f[$])}}function u(d){return d.replace(/-(.)/g,function(f,m){return m.toUpperCase()})}}),ace.define("ace/lib/keys",["require","exports","module","ace/lib/oop"],function(t,n,r){var a=t("./oop"),s=function(){var l={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta",91:"MetaLeft",92:"MetaRight",93:"ContextMenu"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,super:8,meta:8,command:8,cmd:8,control:1},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",111:"/",106:"*"}},u,d;for(d in l.FUNCTION_KEYS)u=l.FUNCTION_KEYS[d].toLowerCase(),l[u]=parseInt(d,10);for(d in l.PRINTABLE_KEYS)u=l.PRINTABLE_KEYS[d].toLowerCase(),l[u]=parseInt(d,10);return a.mixin(l,l.MODIFIER_KEYS),a.mixin(l,l.PRINTABLE_KEYS),a.mixin(l,l.FUNCTION_KEYS),l.enter=l.return,l.escape=l.esc,l.del=l.delete,l[173]="-",function(){for(var f=["cmd","ctrl","alt","shift"],m=Math.pow(2,f.length);m--;)l.KEY_MODS[m]=f.filter(function(h){return m&l.KEY_MODS[h]}).join("-")+"-"}(),l.KEY_MODS[0]="",l.KEY_MODS[-1]="input-",l}();a.mixin(n,s),n.keyCodeToString=function(l){var u=s[l];return typeof u!="string"&&(u=String.fromCharCode(l)),u.toLowerCase()}}),ace.define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,r){var a=t("./keys"),s=t("./useragent"),l=null,u=0,d;function f(){d=!1;try{document.createComment("").addEventListener("test",function(){},{get passive(){d={passive:!1}}})}catch{}}function m(){return d==null&&f(),d}function h(E,A,k){this.elem=E,this.type=A,this.callback=k}h.prototype.destroy=function(){g(this.elem,this.type,this.callback),this.elem=this.type=this.callback=void 0};var p=n.addListener=function(E,A,k,T){E.addEventListener(A,k,m()),T&&T.$toDestroy.push(new h(E,A,k))},g=n.removeListener=function(E,A,k){E.removeEventListener(A,k,m())};n.stopEvent=function(E){return n.stopPropagation(E),n.preventDefault(E),!1},n.stopPropagation=function(E){E.stopPropagation&&E.stopPropagation()},n.preventDefault=function(E){E.preventDefault&&E.preventDefault()},n.getButton=function(E){return E.type=="dblclick"?0:E.type=="contextmenu"||s.isMac&&E.ctrlKey&&!E.altKey&&!E.shiftKey?2:E.button},n.capture=function(E,A,k){var T=E&&E.ownerDocument||document;function $(S){A&&A(S),k&&k(S),g(T,"mousemove",A),g(T,"mouseup",$),g(T,"dragstart",$)}return p(T,"mousemove",A),p(T,"mouseup",$),p(T,"dragstart",$),$},n.addMouseWheelListener=function(E,A,k){p(E,"wheel",function(T){var $=.15,S=T.deltaX||0,I=T.deltaY||0;switch(T.deltaMode){case T.DOM_DELTA_PIXEL:T.wheelX=S*$,T.wheelY=I*$;break;case T.DOM_DELTA_LINE:var R=15;T.wheelX=S*R,T.wheelY=I*R;break;case T.DOM_DELTA_PAGE:var N=150;T.wheelX=S*N,T.wheelY=I*N;break}A(T)},k)},n.addMultiMouseDownListener=function(E,A,k,T,$){var S=0,I,R,N,M={2:"dblclick",3:"tripleclick",4:"quadclick"};function F(D){if(n.getButton(D)!==0?S=0:D.detail>1?(S++,S>4&&(S=1)):S=1,s.isIE){var x=Math.abs(D.clientX-I)>5||Math.abs(D.clientY-R)>5;(!N||x)&&(S=1),N&&clearTimeout(N),N=setTimeout(function(){N=null},A[S-1]||600),S==1&&(I=D.clientX,R=D.clientY)}if(D._clicks=S,k[T]("mousedown",D),S>4)S=0;else if(S>1)return k[T](M[S],D)}Array.isArray(E)||(E=[E]),E.forEach(function(D){p(D,"mousedown",F,$)})};var b=function(E){return 0|(E.ctrlKey?1:0)|(E.altKey?2:0)|(E.shiftKey?4:0)|(E.metaKey?8:0)};n.getModifierString=function(E){return a.KEY_MODS[b(E)]};function v(E,A,k){var T=b(A);if(!s.isMac&&l){if(A.getModifierState&&(A.getModifierState("OS")||A.getModifierState("Win"))&&(T|=8),l.altGr)if((3&T)!=3)l.altGr=0;else return;if(k===18||k===17){var $="location"in A?A.location:A.keyLocation;if(k===17&&$===1)l[k]==1&&(u=A.timeStamp);else if(k===18&&T===3&&$===2){var S=A.timeStamp-u;S<50&&(l.altGr=!0)}}}if(k in a.MODIFIER_KEYS&&(k=-1),!T&&k===13){var $="location"in A?A.location:A.keyLocation;if($===3&&(E(A,T,-k),A.defaultPrevented))return}if(s.isChromeOS&&T&8){if(E(A,T,k),A.defaultPrevented)return;T&=-9}return!T&&!(k in a.FUNCTION_KEYS)&&!(k in a.PRINTABLE_KEYS)?!1:E(A,T,k)}n.addCommandKeyListener=function(E,A,k){if(s.isOldGecko||s.isOpera&&!("KeyboardEvent"in window)){var T=null;p(E,"keydown",function(S){T=S.keyCode},k),p(E,"keypress",function(S){return v(A,S,T)},k)}else{var $=null;p(E,"keydown",function(S){l[S.keyCode]=(l[S.keyCode]||0)+1;var I=v(A,S,S.keyCode);return $=S.defaultPrevented,I},k),p(E,"keypress",function(S){$&&(S.ctrlKey||S.altKey||S.shiftKey||S.metaKey)&&(n.stopEvent(S),$=null)},k),p(E,"keyup",function(S){l[S.keyCode]=null},k),l||(y(),p(window,"focus",y))}};function y(){l=Object.create(null)}if(typeof window=="object"&&window.postMessage&&!s.isOldIE){var C=1;n.nextTick=function(E,A){A=A||window;var k="zero-timeout-message-"+C++,T=function($){$.data==k&&(n.stopPropagation($),g(A,"message",T),E())};p(A,"message",T),A.postMessage(k,"*")}}n.$idleBlocked=!1,n.onIdle=function(E,A){return setTimeout(function k(){n.$idleBlocked?setTimeout(k,100):E()},A)},n.$idleBlockId=null,n.blockIdle=function(E){n.$idleBlockId&&clearTimeout(n.$idleBlockId),n.$idleBlocked=!0,n.$idleBlockId=setTimeout(function(){n.$idleBlocked=!1},E||100)},n.nextFrame=typeof window=="object"&&(window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame),n.nextFrame?n.nextFrame=n.nextFrame.bind(window):n.nextFrame=function(E){setTimeout(E,17)}}),ace.define("ace/range",["require","exports","module"],function(t,n,r){var a=function(l,u){return l.row-u.row||l.column-u.column},s=function(l,u,d,f){this.start={row:l,column:u},this.end={row:d,column:f}};(function(){this.isEqual=function(l){return this.start.row===l.start.row&&this.end.row===l.end.row&&this.start.column===l.start.column&&this.end.column===l.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(l,u){return this.compare(l,u)==0},this.compareRange=function(l){var u,d=l.end,f=l.start;return u=this.compare(d.row,d.column),u==1?(u=this.compare(f.row,f.column),u==1?2:u==0?1:0):u==-1?-2:(u=this.compare(f.row,f.column),u==-1?-1:u==1?42:0)},this.comparePoint=function(l){return this.compare(l.row,l.column)},this.containsRange=function(l){return this.comparePoint(l.start)==0&&this.comparePoint(l.end)==0},this.intersects=function(l){var u=this.compareRange(l);return u==-1||u==0||u==1},this.isEnd=function(l,u){return this.end.row==l&&this.end.column==u},this.isStart=function(l,u){return this.start.row==l&&this.start.column==u},this.setStart=function(l,u){typeof l=="object"?(this.start.column=l.column,this.start.row=l.row):(this.start.row=l,this.start.column=u)},this.setEnd=function(l,u){typeof l=="object"?(this.end.column=l.column,this.end.row=l.row):(this.end.row=l,this.end.column=u)},this.inside=function(l,u){return this.compare(l,u)==0?!(this.isEnd(l,u)||this.isStart(l,u)):!1},this.insideStart=function(l,u){return this.compare(l,u)==0?!this.isEnd(l,u):!1},this.insideEnd=function(l,u){return this.compare(l,u)==0?!this.isStart(l,u):!1},this.compare=function(l,u){return!this.isMultiLine()&&l===this.start.row?u<this.start.column?-1:u>this.end.column?1:0:l<this.start.row?-1:l>this.end.row?1:this.start.row===l?u>=this.start.column?0:-1:this.end.row===l?u<=this.end.column?0:1:0},this.compareStart=function(l,u){return this.start.row==l&&this.start.column==u?-1:this.compare(l,u)},this.compareEnd=function(l,u){return this.end.row==l&&this.end.column==u?1:this.compare(l,u)},this.compareInside=function(l,u){return this.end.row==l&&this.end.column==u?1:this.start.row==l&&this.start.column==u?-1:this.compare(l,u)},this.clipRows=function(l,u){if(this.end.row>u)var d={row:u+1,column:0};else if(this.end.row<l)var d={row:l,column:0};if(this.start.row>u)var f={row:u+1,column:0};else if(this.start.row<l)var f={row:l,column:0};return s.fromPoints(f||this.start,d||this.end)},this.extend=function(l,u){var d=this.compare(l,u);if(d==0)return this;if(d==-1)var f={row:l,column:u};else var m={row:l,column:u};return s.fromPoints(f||this.start,m||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return s.fromPoints(this.start,this.end)},this.collapseRows=function(){return this.end.column==0?new s(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new s(this.start.row,0,this.end.row,0)},this.toScreenRange=function(l){var u=l.documentToScreenPosition(this.start),d=l.documentToScreenPosition(this.end);return new s(u.row,u.column,d.row,d.column)},this.moveBy=function(l,u){this.start.row+=l,this.start.column+=u,this.end.row+=l,this.end.column+=u}}).call(s.prototype),s.fromPoints=function(l,u){return new s(l.row,l.column,u.row,u.column)},s.comparePoints=a,s.comparePoints=function(l,u){return l.row-u.row||l.column-u.column},n.Range=s}),ace.define("ace/clipboard",["require","exports","module"],function(t,n,r){var a;r.exports={lineMode:!1,pasteCancelled:function(){return a&&a>Date.now()-50?!0:a=!1},cancel:function(){a=Date.now()}}}),ace.define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang","ace/clipboard","ace/lib/keys"],function(t,n,r){var a=t("../lib/event"),s=t("../lib/useragent"),l=t("../lib/dom"),u=t("../lib/lang"),d=t("../clipboard"),f=s.isChrome<18,m=s.isIE,h=s.isChrome>63,p=400,g=t("../lib/keys"),b=g.KEY_MODS,v=s.isIOS,y=v?/\s/:/\n/,C=s.isMobile,E=function(A,k){var T=l.createElement("textarea");T.className="ace_text-input",T.setAttribute("wrap","off"),T.setAttribute("autocorrect","off"),T.setAttribute("autocapitalize","off"),T.setAttribute("spellcheck",!1),T.style.opacity="0",A.insertBefore(T,A.firstChild);var $=!1,S=!1,I=!1,R=!1,N="";C||(T.style.fontSize="1px");var M=!1,F=!1,D="",x=0,B=0,K=0;try{var U=document.activeElement===T}catch{}a.addListener(T,"blur",function(fe){F||(k.onBlur(fe),U=!1)},k),a.addListener(T,"focus",function(fe){if(!F){if(U=!0,s.isEdge)try{if(!document.hasFocus())return}catch{}k.onFocus(fe),s.isEdge?setTimeout(G):G()}},k),this.$focusScroll=!1,this.focus=function(){if(N||h||this.$focusScroll=="browser")return T.focus({preventScroll:!0});var fe=T.style.top;T.style.position="fixed",T.style.top="0px";try{var Ie=T.getBoundingClientRect().top!=0}catch{return}var We=[];if(Ie)for(var $e=T.parentElement;$e&&$e.nodeType==1;)We.push($e),$e.setAttribute("ace_nocontext",!0),!$e.parentElement&&$e.getRootNode?$e=$e.getRootNode().host:$e=$e.parentElement;T.focus({preventScroll:!0}),Ie&&We.forEach(function(Le){Le.removeAttribute("ace_nocontext")}),setTimeout(function(){T.style.position="",T.style.top=="0px"&&(T.style.top=fe)},0)},this.blur=function(){T.blur()},this.isFocused=function(){return U},k.on("beforeEndOperation",function(){var fe=k.curOp,Ie=fe&&fe.command&&fe.command.name;if(Ie!="insertstring"){var We=Ie&&(fe.docChanged||fe.selectionChanged);I&&We&&(D=T.value="",me()),G()}});var G=v?function(fe){if(!(!U||$&&!fe||R)){fe||(fe="");var Ie=`
 ab`+fe+`cde fg
`;Ie!=T.value&&(T.value=D=Ie);var We=4,$e=4+(fe.length||(k.selection.isEmpty()?0:1));(x!=We||B!=$e)&&T.setSelectionRange(We,$e),x=We,B=$e}}:function(){if(!(I||R)&&!(!U&&!z)){I=!0;var fe=0,Ie=0,We="";if(k.session){var $e=k.selection,Le=$e.getRange(),ze=$e.cursor.row;if(fe=Le.start.column,Ie=Le.end.column,We=k.session.getLine(ze),Le.start.row!=ze){var re=k.session.getLine(ze-1);fe=Le.start.row<ze-1?0:fe,Ie+=re.length+1,We=re+`
`+We}else if(Le.end.row!=ze){var ge=k.session.getLine(ze+1);Ie=Le.end.row>ze+1?ge.length:Ie,Ie+=We.length+1,We=We+`
`+ge}else C&&ze>0&&(We=`
`+We,Ie+=1,fe+=1);We.length>p&&(fe<p&&Ie<p?We=We.slice(0,p):(We=`
`,fe==Ie?fe=Ie=0:(fe=0,Ie=1)))}var Be=We+`

`;if(Be!=D&&(T.value=D=Be,x=B=Be.length),z&&(x=T.selectionStart,B=T.selectionEnd),B!=Ie||x!=fe||T.selectionEnd!=B)try{T.setSelectionRange(fe,Ie),x=fe,B=Ie}catch{}I=!1}};this.resetSelection=G,U&&k.onFocus();var W=function(fe){return fe.selectionStart===0&&fe.selectionEnd>=D.length&&fe.value===D&&D&&fe.selectionEnd!==B},q=function(fe){I||($?$=!1:W(T)?(k.selectAll(),G()):C&&T.selectionStart!=x&&G())},H=null;this.setInputHandler=function(fe){H=fe},this.getInputHandler=function(){return H};var z=!1,Y=function(fe,Ie){if(z&&(z=!1),S)return G(),fe&&k.onPaste(fe),S=!1,"";for(var We=T.selectionStart,$e=T.selectionEnd,Le=x,ze=D.length-B,re=fe,ge=fe.length-We,Be=fe.length-$e,Ze=0;Le>0&&D[Ze]==fe[Ze];)Ze++,Le--;for(re=re.slice(Ze),Ze=1;ze>0&&D.length-Ze>x-1&&D[D.length-Ze]==fe[fe.length-Ze];)Ze++,ze--;ge-=Ze-1,Be-=Ze-1;var Pe=re.length-Ze+1;if(Pe<0&&(Le=-Pe,Pe=0),re=re.slice(0,Pe),!Ie&&!re&&!ge&&!Le&&!ze&&!Be)return"";R=!0;var Ee=!1;return s.isAndroid&&re==". "&&(re="  ",Ee=!0),re&&!Le&&!ze&&!ge&&!Be||M?k.onTextInput(re):k.onTextInput(re,{extendLeft:Le,extendRight:ze,restoreStart:ge,restoreEnd:Be}),R=!1,D=fe,x=We,B=$e,K=Be,Ee?`
`:re},V=function(fe){if(I)return se();if(fe&&fe.inputType){if(fe.inputType=="historyUndo")return k.execCommand("undo");if(fe.inputType=="historyRedo")return k.execCommand("redo")}var Ie=T.value,We=Y(Ie,!0);(Ie.length>p+100||y.test(We)||C&&x<1&&x==B)&&G()},J=function(fe,Ie,We){var $e=fe.clipboardData||window.clipboardData;if(!(!$e||f)){var Le=m||We?"Text":"text/plain";try{return Ie?$e.setData(Le,Ie)!==!1:$e.getData(Le)}catch(ze){if(!We)return J(ze,Ie,!0)}}},Q=function(fe,Ie){var We=k.getCopyText();if(!We)return a.preventDefault(fe);J(fe,We)?(v&&(G(We),$=We,setTimeout(function(){$=!1},10)),Ie?k.onCut():k.onCopy(),a.preventDefault(fe)):($=!0,T.value=We,T.select(),setTimeout(function(){$=!1,G(),Ie?k.onCut():k.onCopy()}))},X=function(fe){Q(fe,!0)},ie=function(fe){Q(fe,!1)},ce=function(fe){var Ie=J(fe);d.pasteCancelled()||(typeof Ie=="string"?(Ie&&k.onPaste(Ie,fe),s.isIE&&setTimeout(G),a.preventDefault(fe)):(T.value="",S=!0))};a.addCommandKeyListener(T,k.onCommandKey.bind(k),k),a.addListener(T,"select",q,k),a.addListener(T,"input",V,k),a.addListener(T,"cut",X,k),a.addListener(T,"copy",ie,k),a.addListener(T,"paste",ce,k),(!("oncut"in T)||!("oncopy"in T)||!("onpaste"in T))&&a.addListener(A,"keydown",function(fe){if(!(s.isMac&&!fe.metaKey||!fe.ctrlKey))switch(fe.keyCode){case 67:ie(fe);break;case 86:ce(fe);break;case 88:X(fe);break}},k);var de=function(fe){if(!(I||!k.onCompositionStart||k.$readOnly)&&(I={},!M)){fe.data&&(I.useTextareaForIME=!1),setTimeout(se,0),k._signal("compositionStart"),k.on("mousedown",ue);var Ie=k.getSelectionRange();Ie.end.row=Ie.start.row,Ie.end.column=Ie.start.column,I.markerRange=Ie,I.selectionStart=x,k.onCompositionStart(I),I.useTextareaForIME?(D=T.value="",x=0,B=0):(T.msGetInputContext&&(I.context=T.msGetInputContext()),T.getInputContext&&(I.context=T.getInputContext()))}},se=function(){if(!(!I||!k.onCompositionUpdate||k.$readOnly)){if(M)return ue();if(I.useTextareaForIME)k.onCompositionUpdate(T.value);else{var fe=T.value;Y(fe),I.markerRange&&(I.context&&(I.markerRange.start.column=I.selectionStart=I.context.compositionStartOffset),I.markerRange.end.column=I.markerRange.start.column+B-I.selectionStart+K)}}},me=function(fe){!k.onCompositionEnd||k.$readOnly||(I=!1,k.onCompositionEnd(),k.off("mousedown",ue),fe&&V())};function ue(){F=!0,T.blur(),T.focus(),F=!1}var he=u.delayedCall(se,50).schedule.bind(null,null);function pe(fe){fe.keyCode==27&&T.value.length<T.selectionStart&&(I||(D=T.value),x=B=-1,G()),he()}a.addListener(T,"compositionstart",de,k),a.addListener(T,"compositionupdate",se,k),a.addListener(T,"keyup",pe,k),a.addListener(T,"keydown",he,k),a.addListener(T,"compositionend",me,k),this.getElement=function(){return T},this.setCommandMode=function(fe){M=fe,T.readOnly=!1},this.setReadOnly=function(fe){M||(T.readOnly=fe)},this.setCopyWithEmptySelection=function(fe){},this.onContextMenu=function(fe){z=!0,G(),k._emit("nativecontextmenu",{target:k,domEvent:fe}),this.moveToMouse(fe,!0)},this.moveToMouse=function(fe,Ie){N||(N=T.style.cssText),T.style.cssText=(Ie?"z-index:100000;":"")+(s.isIE?"opacity:0.1;":"")+"text-indent: -"+(x+B)*k.renderer.characterWidth*.5+"px;";var We=k.container.getBoundingClientRect(),$e=l.computedStyle(k.container),Le=We.top+(parseInt($e.borderTopWidth)||0),ze=We.left+(parseInt(We.borderLeftWidth)||0),re=We.bottom-Le-T.clientHeight-2,ge=function(Be){l.translate(T,Be.clientX-ze-2,Math.min(Be.clientY-Le-2,re))};ge(fe),fe.type=="mousedown"&&(k.renderer.$isMousePressed=!0,clearTimeout(Oe),s.isWin&&a.capture(k.container,ge,qe))},this.onContextMenuClose=qe;var Oe;function qe(){clearTimeout(Oe),Oe=setTimeout(function(){N&&(T.style.cssText=N,N=""),k.renderer.$isMousePressed=!1,k.renderer.$keepTextAreaAtCursor&&k.renderer.$moveTextAreaToCursor()},0)}var et=function(fe){k.textInput.onContextMenu(fe),qe()};a.addListener(T,"mouseup",et,k),a.addListener(T,"mousedown",function(fe){fe.preventDefault(),qe()},k),a.addListener(k.renderer.scroller,"contextmenu",et,k),a.addListener(T,"contextmenu",et,k),v&&Ue(A,k,T);function Ue(fe,Ie,We){var $e=null,Le=!1;We.addEventListener("keydown",function(re){$e&&clearTimeout($e),Le=!0},!0),We.addEventListener("keyup",function(re){$e=setTimeout(function(){Le=!1},100)},!0);var ze=function(re){if(document.activeElement===We&&!(Le||I||Ie.$mouseHandler.isMousePressed)&&!$){var ge=We.selectionStart,Be=We.selectionEnd,Ze=null,Pe=0;if(ge==0?Ze=g.up:ge==1?Ze=g.home:Be>B&&D[Be]==`
`?Ze=g.end:ge<x&&D[ge-1]==" "?(Ze=g.left,Pe=b.option):ge<x||ge==x&&B!=x&&ge==Be?Ze=g.left:Be>B&&D.slice(0,Be).split(`
`).length>2?Ze=g.down:Be>B&&D[Be-1]==" "?(Ze=g.right,Pe=b.option):(Be>B||Be==B&&B!=x&&ge==Be)&&(Ze=g.right),ge!==Be&&(Pe|=b.shift),Ze){var Ee=Ie.onCommandKey({},Pe,Ze);if(!Ee&&Ie.commands){Ze=g.keyCodeToString(Ze);var Ce=Ie.commands.findKeyCommand(Pe,Ze);Ce&&Ie.execCommand(Ce)}x=ge,B=Be,G("")}}};document.addEventListener("selectionchange",ze),Ie.on("destroy",function(){document.removeEventListener("selectionchange",ze)})}this.destroy=function(){T.parentElement&&T.parentElement.removeChild(T)}};n.TextInput=E,n.$setUserAgentForTests=function(A,k){C=A,v=k}}),ace.define("ace/mouse/default_handlers",["require","exports","module","ace/lib/useragent"],function(t,n,r){var a=t("../lib/useragent"),s=0,l=550;function u(m){m.$clickSelection=null;var h=m.editor;h.setDefaultHandler("mousedown",this.onMouseDown.bind(m)),h.setDefaultHandler("dblclick",this.onDoubleClick.bind(m)),h.setDefaultHandler("tripleclick",this.onTripleClick.bind(m)),h.setDefaultHandler("quadclick",this.onQuadClick.bind(m)),h.setDefaultHandler("mousewheel",this.onMouseWheel.bind(m));var p=["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"];p.forEach(function(g){m[g]=this[g]},this),m.selectByLines=this.extendSelectionBy.bind(m,"getLineRange"),m.selectByWords=this.extendSelectionBy.bind(m,"getWordRange")}(function(){this.onMouseDown=function(m){var h=m.inSelection(),p=m.getDocumentPosition();this.mousedownEvent=m;var g=this.editor,b=m.getButton();if(b!==0){var v=g.getSelectionRange(),y=v.isEmpty();(y||b==1)&&g.selection.moveToPosition(p),b==2&&(g.textInput.onContextMenu(m.domEvent),a.isMozilla||m.preventDefault());return}if(this.mousedownEvent.time=Date.now(),h&&!g.isFocused()&&(g.focus(),this.$focusTimeout&&!this.$clickSelection&&!g.inMultiSelectMode)){this.setState("focusWait"),this.captureMouse(m);return}return this.captureMouse(m),this.startSelect(p,m.domEvent._clicks>1),m.preventDefault()},this.startSelect=function(m,h){m=m||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var p=this.editor;this.mousedownEvent&&(this.mousedownEvent.getShiftKey()?p.selection.selectToPosition(m):h||p.selection.moveToPosition(m),h||this.select(),p.renderer.scroller.setCapture&&p.renderer.scroller.setCapture(),p.setStyle("ace_selecting"),this.setState("select"))},this.select=function(){var m,h=this.editor,p=h.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var g=this.$clickSelection.comparePoint(p);if(g==-1)m=this.$clickSelection.end;else if(g==1)m=this.$clickSelection.start;else{var b=f(this.$clickSelection,p);p=b.cursor,m=b.anchor}h.selection.setSelectionAnchor(m.row,m.column)}h.selection.selectToPosition(p),h.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(m){var h,p=this.editor,g=p.renderer.screenToTextCoordinates(this.x,this.y),b=p.selection[m](g.row,g.column);if(this.$clickSelection){var v=this.$clickSelection.comparePoint(b.start),y=this.$clickSelection.comparePoint(b.end);if(v==-1&&y<=0)h=this.$clickSelection.end,(b.end.row!=g.row||b.end.column!=g.column)&&(g=b.start);else if(y==1&&v>=0)h=this.$clickSelection.start,(b.start.row!=g.row||b.start.column!=g.column)&&(g=b.end);else if(v==-1&&y==1)g=b.end,h=b.start;else{var C=f(this.$clickSelection,g);g=C.cursor,h=C.anchor}p.selection.setSelectionAnchor(h.row,h.column)}p.selection.selectToPosition(g),p.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var m=d(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),h=Date.now();(m>s||h-this.mousedownEvent.time>this.$focusTimeout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(m){var h=m.getDocumentPosition(),p=this.editor,g=p.session,b=g.getBracketRange(h);b?(b.isEmpty()&&(b.start.column--,b.end.column++),this.setState("select")):(b=p.selection.getWordRange(h.row,h.column),this.setState("selectByWords")),this.$clickSelection=b,this.select()},this.onTripleClick=function(m){var h=m.getDocumentPosition(),p=this.editor;this.setState("selectByLines");var g=p.getSelectionRange();g.isMultiLine()&&g.contains(h.row,h.column)?(this.$clickSelection=p.selection.getLineRange(g.start.row),this.$clickSelection.end=p.selection.getLineRange(g.end.row).end):this.$clickSelection=p.selection.getLineRange(h.row),this.select()},this.onQuadClick=function(m){var h=this.editor;h.selectAll(),this.$clickSelection=h.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(m){if(!m.getAccelKey()){m.getShiftKey()&&m.wheelY&&!m.wheelX&&(m.wheelX=m.wheelY,m.wheelY=0);var h=this.editor;this.$lastScroll||(this.$lastScroll={t:0,vx:0,vy:0,allowed:0});var p=this.$lastScroll,g=m.domEvent.timeStamp,b=g-p.t,v=b?m.wheelX/b:p.vx,y=b?m.wheelY/b:p.vy;b<l&&(v=(v+p.vx)/2,y=(y+p.vy)/2);var C=Math.abs(v/y),E=!1;if(C>=1&&h.renderer.isScrollableBy(m.wheelX*m.speed,0)&&(E=!0),C<=1&&h.renderer.isScrollableBy(0,m.wheelY*m.speed)&&(E=!0),E)p.allowed=g;else if(g-p.allowed<l){var A=Math.abs(v)<=1.5*Math.abs(p.vx)&&Math.abs(y)<=1.5*Math.abs(p.vy);A?(E=!0,p.allowed=g):p.allowed=0}if(p.t=g,p.vx=v,p.vy=y,E)return h.renderer.scrollBy(m.wheelX*m.speed,m.wheelY*m.speed),m.stop()}}}).call(u.prototype),n.DefaultHandlers=u;function d(m,h,p,g){return Math.sqrt(Math.pow(p-m,2)+Math.pow(g-h,2))}function f(m,h){if(m.start.row==m.end.row)var p=2*h.column-m.start.column-m.end.column;else if(m.start.row==m.end.row-1&&!m.start.column&&!m.end.column)var p=h.column-4;else var p=2*h.row-m.start.row-m.end.row;return p<0?{cursor:m.start,anchor:m.end}:{cursor:m.end,anchor:m.start}}}),ace.define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(t,n,r){t("./lib/oop");var a=t("./lib/dom"),s="ace_tooltip";function l(u){this.isOpen=!1,this.$element=null,this.$parentNode=u}(function(){this.$init=function(){return this.$element=a.createElement("div"),this.$element.className=s,this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(u){this.getElement().textContent=u},this.setHtml=function(u){this.getElement().innerHTML=u},this.setPosition=function(u,d){this.getElement().style.left=u+"px",this.getElement().style.top=d+"px"},this.setClassName=function(u){a.addCssClass(this.getElement(),u)},this.show=function(u,d,f){u!=null&&this.setText(u),d!=null&&f!=null&&this.setPosition(d,f),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.getElement().className=s,this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth},this.destroy=function(){this.isOpen=!1,this.$element&&this.$element.parentNode&&this.$element.parentNode.removeChild(this.$element)}}).call(l.prototype),n.Tooltip=l}),ace.define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(t,n,r){var a=t("../lib/dom"),s=t("../lib/oop"),l=t("../lib/event"),u=t("../tooltip").Tooltip;function d(m){var h=m.editor,p=h.renderer.$gutterLayer,g=new f(h.container);m.editor.setDefaultHandler("guttermousedown",function(k){if(!(!h.isFocused()||k.getButton()!=0)){var T=p.getRegion(k);if(T!="foldWidgets"){var $=k.getDocumentPosition().row,S=h.session.selection;if(k.getShiftKey())S.selectTo($,0);else{if(k.domEvent.detail==2)return h.selectAll(),k.preventDefault();m.$clickSelection=h.selection.getLineRange($)}return m.setState("selectByLines"),m.captureMouse(k),k.preventDefault()}}});var b,v,y;function C(){var k=v.getDocumentPosition().row,T=p.$annotations[k];if(!T)return E();var $=h.session.getLength();if(k==$){var S=h.renderer.pixelToScreenCoordinates(0,v.y).row,I=v.$pos;if(S>h.session.documentToScreenRow(I.row,I.column))return E()}if(y!=T){y=T.text.join("<br/>"),g.setHtml(y);var R=T.className;if(R&&g.setClassName(R.trim()),g.show(),h._signal("showGutterTooltip",g),h.on("mousewheel",E),m.$tooltipFollowsMouse)A(v);else{var N=v.domEvent.target,M=N.getBoundingClientRect(),F=g.getElement().style;F.left=M.right+"px",F.top=M.bottom+"px"}}}function E(){b&&(b=clearTimeout(b)),y&&(g.hide(),y=null,h._signal("hideGutterTooltip",g),h.off("mousewheel",E))}function A(k){g.setPosition(k.x,k.y)}m.editor.setDefaultHandler("guttermousemove",function(k){var T=k.domEvent.target||k.domEvent.srcElement;if(a.hasCssClass(T,"ace_fold-widget"))return E();y&&m.$tooltipFollowsMouse&&A(k),v=k,!b&&(b=setTimeout(function(){b=null,v&&!m.isMousePressed?C():E()},50))}),l.addListener(h.renderer.$gutter,"mouseout",function(k){v=null,!(!y||b)&&(b=setTimeout(function(){b=null,E()},50))},h),h.on("changeSession",E)}function f(m){u.call(this,m)}s.inherits(f,u),(function(){this.setPosition=function(m,h){var p=window.innerWidth||document.documentElement.clientWidth,g=window.innerHeight||document.documentElement.clientHeight,b=this.getWidth(),v=this.getHeight();m+=15,h+=15,m+b>p&&(m-=m+b-p),h+v>g&&(h-=20+v),u.prototype.setPosition.call(this,m,h)}}).call(f.prototype),n.GutterHandler=d}),ace.define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,r){var a=t("../lib/event"),s=t("../lib/useragent"),l=n.MouseEvent=function(u,d){this.domEvent=u,this.editor=d,this.x=this.clientX=u.clientX,this.y=this.clientY=u.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){a.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){a.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(this.$inSelection!==null)return this.$inSelection;var u=this.editor,d=u.getSelectionRange();if(d.isEmpty())this.$inSelection=!1;else{var f=this.getDocumentPosition();this.$inSelection=d.contains(f.row,f.column)}return this.$inSelection},this.getButton=function(){return a.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=s.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(l.prototype)}),ace.define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(t,n,r){var a=t("../lib/dom"),s=t("../lib/event"),l=t("../lib/useragent"),u=200,d=200,f=5;function m(p){var g=p.editor,b=a.createElement("div");b.style.cssText="top:-100px;position:absolute;z-index:2147483647;opacity:0.5",b.textContent="";var v=["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"];v.forEach(function(z){p[z]=this[z]},this),g.on("mousedown",this.onMouseDown.bind(p));var y=g.container,C,E,A,k,T,$,S=0,I,R,N,M,F;this.onDragStart=function(z){if(this.cancelDrag||!y.draggable){var Y=this;return setTimeout(function(){Y.startSelect(),Y.captureMouse(z)},0),z.preventDefault()}T=g.getSelectionRange();var V=z.dataTransfer;V.effectAllowed=g.getReadOnly()?"copy":"copyMove",g.container.appendChild(b),V.setDragImage&&V.setDragImage(b,0,0),setTimeout(function(){g.container.removeChild(b)}),V.clearData(),V.setData("Text",g.session.getTextRange()),R=!0,this.setState("drag")},this.onDragEnd=function(z){if(y.draggable=!1,R=!1,this.setState(null),!g.getReadOnly()){var Y=z.dataTransfer.dropEffect;!I&&Y=="move"&&g.session.remove(g.getSelectionRange()),g.$resetCursorStyle()}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(z){if(!(g.getReadOnly()||!q(z.dataTransfer)))return E=z.clientX,A=z.clientY,C||K(),S++,z.dataTransfer.dropEffect=I=H(z),s.preventDefault(z)},this.onDragOver=function(z){if(!(g.getReadOnly()||!q(z.dataTransfer)))return E=z.clientX,A=z.clientY,C||(K(),S++),G!==null&&(G=null),z.dataTransfer.dropEffect=I=H(z),s.preventDefault(z)},this.onDragLeave=function(z){if(S--,S<=0&&C)return U(),I=null,s.preventDefault(z)},this.onDrop=function(z){if($){var Y=z.dataTransfer;if(R)switch(I){case"move":T.contains($.row,$.column)?T={start:$,end:$}:T=g.moveText(T,$);break;case"copy":T=g.moveText(T,$,!0);break}else{var V=Y.getData("Text");T={start:$,end:g.session.insert($,V)},g.focus(),I=null}return U(),s.preventDefault(z)}},s.addListener(y,"dragstart",this.onDragStart.bind(p),g),s.addListener(y,"dragend",this.onDragEnd.bind(p),g),s.addListener(y,"dragenter",this.onDragEnter.bind(p),g),s.addListener(y,"dragover",this.onDragOver.bind(p),g),s.addListener(y,"dragleave",this.onDragLeave.bind(p),g),s.addListener(y,"drop",this.onDrop.bind(p),g);function D(z,Y){var V=Date.now(),J=!Y||z.row!=Y.row,Q=!Y||z.column!=Y.column;if(!M||J||Q)g.moveCursorToPosition(z),M=V,F={x:E,y:A};else{var X=h(F.x,F.y,E,A);X>f?M=null:V-M>=d&&(g.renderer.scrollCursorIntoView(),M=null)}}function x(z,Y){var V=Date.now(),J=g.renderer.layerConfig.lineHeight,Q=g.renderer.layerConfig.characterWidth,X=g.renderer.scroller.getBoundingClientRect(),ie={x:{left:E-X.left,right:X.right-E},y:{top:A-X.top,bottom:X.bottom-A}},ce=Math.min(ie.x.left,ie.x.right),de=Math.min(ie.y.top,ie.y.bottom),se={row:z.row,column:z.column};ce/Q<=2&&(se.column+=ie.x.left<ie.x.right?-3:2),de/J<=1&&(se.row+=ie.y.top<ie.y.bottom?-1:1);var me=z.row!=se.row,ue=z.column!=se.column,he=!Y||z.row!=Y.row;me||ue&&!he?N?V-N>=u&&g.renderer.scrollCursorIntoView(se):N=V:N=null}function B(){var z=$;$=g.renderer.screenToTextCoordinates(E,A),D($,z),x($,z)}function K(){T=g.selection.toOrientedRange(),C=g.session.addMarker(T,"ace_selection",g.getSelectionStyle()),g.clearSelection(),g.isFocused()&&g.renderer.$cursorLayer.setBlinking(!1),clearInterval(k),B(),k=setInterval(B,20),S=0,s.addListener(document,"mousemove",W)}function U(){clearInterval(k),g.session.removeMarker(C),C=null,g.selection.fromOrientedRange(T),g.isFocused()&&!R&&g.$resetCursorStyle(),T=null,$=null,S=0,N=null,M=null,s.removeListener(document,"mousemove",W)}var G=null;function W(){G==null&&(G=setTimeout(function(){G!=null&&C&&U()},20))}function q(z){var Y=z.types;return!Y||Array.prototype.some.call(Y,function(V){return V=="text/plain"||V=="Text"})}function H(z){var Y=["copy","copymove","all","uninitialized"],V=["move","copymove","linkmove","all","uninitialized"],J=l.isMac?z.altKey:z.ctrlKey,Q="uninitialized";try{Q=z.dataTransfer.effectAllowed.toLowerCase()}catch{}var X="none";return J&&Y.indexOf(Q)>=0?X="copy":V.indexOf(Q)>=0?X="move":Y.indexOf(Q)>=0&&(X="copy"),X}}(function(){this.dragWait=function(){var p=Date.now()-this.mousedownEvent.time;p>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){var p=this.editor.container;p.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(p){this.editor.$resetCursorStyle(),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var p=this.editor,g=p.container;g.draggable=!0,p.renderer.$cursorLayer.setBlinking(!1),p.setStyle("ace_dragging");var b=l.isWin?"default":"move";p.renderer.setCursorStyle(b),this.setState("dragReady")},this.onMouseDrag=function(p){var g=this.editor.container;if(l.isIE&&this.state=="dragReady"){var b=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);b>3&&g.dragDrop()}if(this.state==="dragWait"){var b=h(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);b>0&&(g.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(p){if(this.$dragEnabled){this.mousedownEvent=p;var g=this.editor,b=p.inSelection(),v=p.getButton(),y=p.domEvent.detail||1;if(y===1&&v===0&&b){if(p.editor.inMultiSelectMode&&(p.getAccelKey()||p.getShiftKey()))return;this.mousedownEvent.time=Date.now();var C=p.domEvent.target||p.domEvent.srcElement;if("unselectable"in C&&(C.unselectable="on"),g.getDragDelay()){if(l.isWebKit){this.cancelDrag=!0;var E=g.container;E.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(p,this.onMouseDrag.bind(this)),p.defaultPrevented=!0}}}}).call(m.prototype);function h(p,g,b,v){return Math.sqrt(Math.pow(b-p,2)+Math.pow(v-g,2))}n.DragdropHandler=m}),ace.define("ace/mouse/touch_handler",["require","exports","module","ace/mouse/mouse_event","ace/lib/event","ace/lib/dom"],function(t,n,r){var a=t("./mouse_event").MouseEvent,s=t("../lib/event"),l=t("../lib/dom");n.addTouchListeners=function(u,d){var f="scroll",m,h,p,g,b,v,y=0,C,E=0,A=0,k=0,T,$;function S(){var D=window.navigator&&window.navigator.clipboard,x=!1,B=function(){var U=d.getCopyText(),G=d.session.getUndoManager().hasUndo();$.replaceChild(l.buildDom(x?["span",!U&&["span",{class:"ace_mobile-button",action:"selectall"},"Select All"],U&&["span",{class:"ace_mobile-button",action:"copy"},"Copy"],U&&["span",{class:"ace_mobile-button",action:"cut"},"Cut"],D&&["span",{class:"ace_mobile-button",action:"paste"},"Paste"],G&&["span",{class:"ace_mobile-button",action:"undo"},"Undo"],["span",{class:"ace_mobile-button",action:"find"},"Find"],["span",{class:"ace_mobile-button",action:"openCommandPallete"},"Pallete"]]:["span"]),$.firstChild)},K=function(U){var G=U.target.getAttribute("action");if(G=="more"||!x)return x=!x,B();G=="paste"?D.readText().then(function(W){d.execCommand(G,W)}):G&&((G=="cut"||G=="copy")&&(D?D.writeText(d.getCopyText()):document.execCommand("copy")),d.execCommand(G)),$.firstChild.style.display="none",x=!1,G!="openCommandPallete"&&d.focus()};$=l.buildDom(["div",{class:"ace_mobile-menu",ontouchstart:function(U){f="menu",U.stopPropagation(),U.preventDefault(),d.textInput.focus()},ontouchend:function(U){U.stopPropagation(),U.preventDefault(),K(U)},onclick:K},["span"],["span",{class:"ace_mobile-button",action:"more"},"..."]],d.container)}function I(){$||S();var D=d.selection.cursor,x=d.renderer.textToScreenCoordinates(D.row,D.column),B=d.renderer.textToScreenCoordinates(0,0).pageX,K=d.renderer.scrollLeft,U=d.container.getBoundingClientRect();$.style.top=x.pageY-U.top-3+"px",x.pageX-U.left<U.width-70?($.style.left="",$.style.right="10px"):($.style.right="",$.style.left=B+K-U.left+"px"),$.style.display="",$.firstChild.style.display="none",d.on("input",R)}function R(D){$&&($.style.display="none"),d.off("input",R)}function N(){b=null,clearTimeout(b);var D=d.selection.getRange(),x=D.contains(C.row,C.column);(D.isEmpty()||!x)&&(d.selection.moveToPosition(C),d.selection.selectWord()),f="wait",I()}function M(){b=null,clearTimeout(b),d.selection.moveToPosition(C);var D=E>=2?d.selection.getLineRange(C.row):d.session.getBracketRange(C);D&&!D.isEmpty()?d.selection.setRange(D):d.selection.selectWord(),f="wait"}s.addListener(u,"contextmenu",function(D){if(T){var x=d.textInput.getElement();x.focus()}},d),s.addListener(u,"touchstart",function(D){var x=D.touches;if(b||x.length>1){clearTimeout(b),b=null,p=-1,f="zoom";return}T=d.$mouseHandler.isMousePressed=!0;var B=d.renderer.layerConfig.lineHeight,K=d.renderer.layerConfig.lineHeight,U=D.timeStamp;g=U;var G=x[0],W=G.clientX,q=G.clientY;Math.abs(m-W)+Math.abs(h-q)>B&&(p=-1),m=D.clientX=W,h=D.clientY=q,A=k=0;var H=new a(D,d);if(C=H.getDocumentPosition(),U-p<500&&x.length==1&&!y)E++,D.preventDefault(),D.button=0,M();else{E=0;var z=d.selection.cursor,Y=d.selection.isEmpty()?z:d.selection.anchor,V=d.renderer.$cursorLayer.getPixelPosition(z,!0),J=d.renderer.$cursorLayer.getPixelPosition(Y,!0),Q=d.renderer.scroller.getBoundingClientRect(),X=d.renderer.layerConfig.offset,ie=d.renderer.scrollLeft,ce=function(me,ue){return me=me/K,ue=ue/B-.75,me*me+ue*ue};if(D.clientX<Q.left){f="zoom";return}var de=ce(D.clientX-Q.left-V.left+ie,D.clientY-Q.top-V.top+X),se=ce(D.clientX-Q.left-J.left+ie,D.clientY-Q.top-J.top+X);de<3.5&&se<3.5&&(f=de>se?"cursor":"anchor"),se<3.5?f="anchor":de<3.5?f="cursor":f="scroll",b=setTimeout(N,450)}p=U},d),s.addListener(u,"touchend",function(D){T=d.$mouseHandler.isMousePressed=!1,v&&clearInterval(v),f=="zoom"?(f="",y=0):b?(d.selection.moveToPosition(C),y=0,I()):f=="scroll"?(F(),R()):I(),clearTimeout(b),b=null},d),s.addListener(u,"touchmove",function(D){b&&(clearTimeout(b),b=null);var x=D.touches;if(!(x.length>1||f=="zoom")){var B=x[0],K=m-B.clientX,U=h-B.clientY;if(f=="wait")if(K*K+U*U>4)f="cursor";else return D.preventDefault();m=B.clientX,h=B.clientY,D.clientX=B.clientX,D.clientY=B.clientY;var G=D.timeStamp,W=G-g;if(g=G,f=="scroll"){var q=new a(D,d);q.speed=1,q.wheelX=K,q.wheelY=U,10*Math.abs(K)<Math.abs(U)&&(K=0),10*Math.abs(U)<Math.abs(K)&&(U=0),W!=0&&(A=K/W,k=U/W),d._emit("mousewheel",q),q.propagationStopped||(A=k=0)}else{var H=new a(D,d),z=H.getDocumentPosition();f=="cursor"?d.selection.moveCursorToPosition(z):f=="anchor"&&d.selection.setSelectionAnchor(z.row,z.column),d.renderer.scrollCursorIntoView(z),D.preventDefault()}}},d);function F(){y+=60,v=setInterval(function(){y--<=0&&(clearInterval(v),v=null),Math.abs(A)<.01&&(A=0),Math.abs(k)<.01&&(k=0),y<20&&(A=.9*A),y<20&&(k=.9*k);var D=d.session.getScrollTop();d.renderer.scrollBy(10*A,10*k),D==d.session.getScrollTop()&&(y=0)},10)}}}),ace.define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/mouse/touch_handler","ace/config"],function(t,n,r){var a=t("../lib/event"),s=t("../lib/useragent"),l=t("./default_handlers").DefaultHandlers,u=t("./default_gutter_handler").GutterHandler,d=t("./mouse_event").MouseEvent,f=t("./dragdrop_handler").DragdropHandler,m=t("./touch_handler").addTouchListeners,h=t("../config"),p=function(g){var b=this;this.editor=g,new l(this),new u(this),new f(this);var v=function(E){var A=!document.hasFocus||!document.hasFocus()||!g.isFocused()&&document.activeElement==(g.textInput&&g.textInput.getElement());A&&window.focus(),g.focus(),setTimeout(function(){g.isFocused()||g.focus()})},y=g.renderer.getMouseEventTarget();a.addListener(y,"click",this.onMouseEvent.bind(this,"click"),g),a.addListener(y,"mousemove",this.onMouseMove.bind(this,"mousemove"),g),a.addMultiMouseDownListener([y,g.renderer.scrollBarV&&g.renderer.scrollBarV.inner,g.renderer.scrollBarH&&g.renderer.scrollBarH.inner,g.textInput&&g.textInput.getElement()].filter(Boolean),[400,300,250],this,"onMouseEvent",g),a.addMouseWheelListener(g.container,this.onMouseWheel.bind(this,"mousewheel"),g),m(g.container,g);var C=g.renderer.$gutter;a.addListener(C,"mousedown",this.onMouseEvent.bind(this,"guttermousedown"),g),a.addListener(C,"click",this.onMouseEvent.bind(this,"gutterclick"),g),a.addListener(C,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick"),g),a.addListener(C,"mousemove",this.onMouseEvent.bind(this,"guttermousemove"),g),a.addListener(y,"mousedown",v,g),a.addListener(C,"mousedown",v,g),s.isIE&&g.renderer.scrollBarV&&(a.addListener(g.renderer.scrollBarV.element,"mousedown",v,g),a.addListener(g.renderer.scrollBarH.element,"mousedown",v,g)),g.on("mousemove",function(E){if(!(b.state||b.$dragDelay||!b.$dragEnabled)){var A=g.renderer.screenToTextCoordinates(E.x,E.y),k=g.session.selection.getRange(),T=g.renderer;!k.isEmpty()&&k.insideStart(A.row,A.column)?T.setCursorStyle("default"):T.setCursorStyle("")}},g)};(function(){this.onMouseEvent=function(g,b){this.editor.session&&this.editor._emit(g,new d(b,this.editor))},this.onMouseMove=function(g,b){var v=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;!v||!v.length||this.editor._emit(g,new d(b,this.editor))},this.onMouseWheel=function(g,b){var v=new d(b,this.editor);v.speed=this.$scrollSpeed*2,v.wheelX=b.wheelX,v.wheelY=b.wheelY,this.editor._emit(g,v)},this.setState=function(g){this.state=g},this.captureMouse=function(g,b){this.x=g.x,this.y=g.y,this.isMousePressed=!0;var v=this.editor,y=this.editor.renderer;y.$isMousePressed=!0;var C=this,E=function(S){if(S){if(s.isWebKit&&!S.which&&C.releaseMouse)return C.releaseMouse();C.x=S.clientX,C.y=S.clientY,b&&b(S),C.mouseEvent=new d(S,C.editor),C.$mouseMoved=!0}},A=function(S){v.off("beforeEndOperation",T),clearInterval($),v.session&&k(),C[C.state+"End"]&&C[C.state+"End"](S),C.state="",C.isMousePressed=y.$isMousePressed=!1,y.$keepTextAreaAtCursor&&y.$moveTextAreaToCursor(),C.$onCaptureMouseMove=C.releaseMouse=null,S&&C.onMouseEvent("mouseup",S),v.endOperation()},k=function(){C[C.state]&&C[C.state](),C.$mouseMoved=!1};if(s.isOldIE&&g.domEvent.type=="dblclick")return setTimeout(function(){A(g)});var T=function(S){C.releaseMouse&&v.curOp.command.name&&v.curOp.selectionChanged&&(C[C.state+"End"]&&C[C.state+"End"](),C.state="",C.releaseMouse())};v.on("beforeEndOperation",T),v.startOperation({command:{name:"mouse"}}),C.$onCaptureMouseMove=E,C.releaseMouse=a.capture(this.editor.container,E,A);var $=setInterval(k,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var g=(function(b){b&&b.domEvent&&b.domEvent.type!="contextmenu"||(this.editor.off("nativecontextmenu",g),b&&b.domEvent&&a.stopEvent(b.domEvent))}).bind(this);setTimeout(g,10),this.editor.on("nativecontextmenu",g)},this.destroy=function(){this.releaseMouse&&this.releaseMouse()}}).call(p.prototype),h.defineOptions(p.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:s.isMac?150:0},dragEnabled:{initialValue:!0},focusTimeout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),n.MouseHandler=p}),ace.define("ace/mouse/fold_handler",["require","exports","module","ace/lib/dom"],function(t,n,r){var a=t("../lib/dom");function s(l){l.on("click",function(u){var d=u.getDocumentPosition(),f=l.session,m=f.getFoldAt(d.row,d.column,1);m&&(u.getAccelKey()?f.removeFold(m):f.expandFold(m),u.stop());var h=u.domEvent&&u.domEvent.target;h&&a.hasCssClass(h,"ace_inline_button")&&a.hasCssClass(h,"ace_toggle_wrap")&&(f.setOption("wrap",!f.getUseWrapMode()),l.renderer.scrollCursorIntoView())}),l.on("gutterclick",function(u){var d=l.renderer.$gutterLayer.getRegion(u);if(d=="foldWidgets"){var f=u.getDocumentPosition().row,m=l.session;m.foldWidgets&&m.foldWidgets[f]&&l.session.onFoldWidgetClick(f,u),l.isFocused()||l.focus(),u.stop()}}),l.on("gutterdblclick",function(u){var d=l.renderer.$gutterLayer.getRegion(u);if(d=="foldWidgets"){var f=u.getDocumentPosition().row,m=l.session,h=m.getParentFoldRangeData(f,!0),p=h.range||h.firstRange;if(p){f=p.start.row;var g=m.getFoldAt(f,m.getLine(f).length,1);g?m.removeFold(g):(m.addFold("...",p),l.renderer.scrollCursorIntoView({row:p.start.row,column:0}))}u.stop()}})}n.FoldHandler=s}),ace.define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(t,n,r){var a=t("../lib/keys"),s=t("../lib/event"),l=function(u){this.$editor=u,this.$data={editor:u},this.$handlers=[],this.setDefaultHandler(u.commands)};(function(){this.setDefaultHandler=function(u){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=u,this.addKeyboardHandler(u,0)},this.setKeyboardHandler=function(u){var d=this.$handlers;if(d[d.length-1]!=u){for(;d[d.length-1]&&d[d.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(d[d.length-1]);this.addKeyboardHandler(u,1)}},this.addKeyboardHandler=function(u,d){if(u){typeof u=="function"&&!u.handleKeyboard&&(u.handleKeyboard=u);var f=this.$handlers.indexOf(u);f!=-1&&this.$handlers.splice(f,1),d==null?this.$handlers.push(u):this.$handlers.splice(d,0,u),f==-1&&u.attach&&u.attach(this.$editor)}},this.removeKeyboardHandler=function(u){var d=this.$handlers.indexOf(u);return d==-1?!1:(this.$handlers.splice(d,1),u.detach&&u.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var u=this.$data,d=u.editor;return this.$handlers.map(function(f){return f.getStatusText&&f.getStatusText(d,u)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(u,d,f,m){for(var h,p=!1,g=this.$editor.commands,b=this.$handlers.length;b--&&(h=this.$handlers[b].handleKeyboard(this.$data,u,d,f,m),!(!(!h||!h.command)&&(h.command=="null"?p=!0:p=g.exec(h.command,this.$editor,h.args,m),p&&m&&u!=-1&&h.passEvent!=!0&&h.command.passEvent!=!0&&s.stopEvent(m),p))););return!p&&u==-1&&(h={command:"insertstring"},p=g.exec("insertstring",this.$editor,d)),p&&this.$editor._signal&&this.$editor._signal("keyboardActivity",h),p},this.onCommandKey=function(u,d,f){var m=a.keyCodeToString(f);return this.$callKeyboardHandlers(d,m,f,u)},this.onTextInput=function(u){return this.$callKeyboardHandlers(-1,u)}}).call(l.prototype),n.KeyBinding=l}),ace.define("ace/lib/bidiutil",["require","exports","module"],function(t,n,r){var a=0,s=0,l=!1,u=!1,d=!1,f=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],m=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],h=0,p=1,g=0,b=1,v=2,y=3,C=4,E=5,A=6,k=7,T=8,$=9,S=10,I=11,R=12,N=13,M=14,F=15,D=16,x=17,B=18,K=[B,B,B,B,B,B,B,B,B,A,E,A,T,E,B,B,B,B,B,B,B,B,B,B,B,B,B,B,E,E,E,A,T,C,C,I,I,I,C,C,C,C,C,S,$,S,$,$,v,v,v,v,v,v,v,v,v,v,$,C,C,C,C,C,C,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,C,C,C,C,C,C,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,g,C,C,C,C,B,B,B,B,B,B,E,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,B,$,C,I,I,I,I,C,C,C,C,g,C,C,B,C,C,I,I,v,v,C,g,C,C,C,v,g,C,C,C,C,C],U=[T,T,T,T,T,T,T,T,T,T,T,B,B,B,g,b,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,T,E,N,M,F,D,x,$,I,I,I,I,I,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,$,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,T];function G(z,Y,V,J){var Q=a?m:f,X=null,ie=null,ce=null,de=0,se=null,me=null,ue=-1,he=null,pe=null,Oe=[];if(!J)for(he=0,J=[];he<V;he++)J[he]=H(z[he]);for(s=a,l=!1,u=!1,d=!1,pe=0;pe<V;pe++){if(X=de,Oe[pe]=ie=q(z,J,Oe,pe),de=Q[X][ie],se=de&240,de&=15,Y[pe]=ce=Q[de][5],se>0)if(se==16){for(he=ue;he<pe;he++)Y[he]=1;ue=-1}else ue=-1;if(me=Q[de][6],me)ue==-1&&(ue=pe);else if(ue>-1){for(he=ue;he<pe;he++)Y[he]=ce;ue=-1}J[pe]==E&&(Y[pe]=0),s|=ce}if(d){for(he=0;he<V;he++)if(J[he]==A){Y[he]=a;for(var qe=he-1;qe>=0&&J[qe]==T;qe--)Y[qe]=a}}}function W(z,Y,V){if(!(s<z)){if(z==1&&a==p&&!u){V.reverse();return}for(var J=V.length,Q=0,X,ie,ce,de;Q<J;){if(Y[Q]>=z){for(X=Q+1;X<J&&Y[X]>=z;)X++;for(ie=Q,ce=X-1;ie<ce;ie++,ce--)de=V[ie],V[ie]=V[ce],V[ce]=de;Q=X}Q++}}}function q(z,Y,V,J){var Q=Y[J],X,ie,ce,de;switch(Q){case g:case b:l=!1;case C:case y:return Q;case v:return l?y:v;case k:return l=!0,b;case T:return C;case $:return J<1||J+1>=Y.length||(X=V[J-1])!=v&&X!=y||(ie=Y[J+1])!=v&&ie!=y?C:(l&&(ie=y),ie==X?ie:C);case S:return X=J>0?V[J-1]:E,X==v&&J+1<Y.length&&Y[J+1]==v?v:C;case I:if(J>0&&V[J-1]==v)return v;if(l)return C;for(de=J+1,ce=Y.length;de<ce&&Y[de]==I;)de++;return de<ce&&Y[de]==v?v:C;case R:for(ce=Y.length,de=J+1;de<ce&&Y[de]==R;)de++;if(de<ce){var se=z[J],me=se>=1425&&se<=2303||se==64286;if(X=Y[de],me&&(X==b||X==k))return b}return J<1||(X=Y[J-1])==E?C:V[J-1];case E:return l=!1,u=!0,a;case A:return d=!0,C;case N:case M:case D:case x:case F:l=!1;case B:return C}}function H(z){var Y=z.charCodeAt(0),V=Y>>8;return V==0?Y>191?g:K[Y]:V==5?/[\u0591-\u05f4]/.test(z)?b:g:V==6?/[\u0610-\u061a\u064b-\u065f\u06d6-\u06e4\u06e7-\u06ed]/.test(z)?R:/[\u0660-\u0669\u066b-\u066c]/.test(z)?y:Y==1642?I:/[\u06f0-\u06f9]/.test(z)?v:k:V==32&&Y<=8287?U[Y&255]:V==254&&Y>=65136?k:C}n.L=g,n.R=b,n.EN=v,n.ON_R=3,n.AN=4,n.R_H=5,n.B=6,n.RLE=7,n.DOT="",n.doBidiReorder=function(z,Y,V){if(z.length<2)return{};var J=z.split(""),Q=new Array(J.length),X=new Array(J.length),ie=[];a=V?p:h,G(J,ie,J.length,Y);for(var ce=0;ce<Q.length;Q[ce]=ce,ce++);W(2,ie,Q),W(1,ie,Q);for(var ce=0;ce<Q.length-1;ce++)Y[ce]===y?ie[ce]=n.AN:ie[ce]===b&&(Y[ce]>k&&Y[ce]<N||Y[ce]===C||Y[ce]===B)?ie[ce]=n.ON_R:ce>0&&J[ce-1]===""&&/\u0622|\u0623|\u0625|\u0627/.test(J[ce])&&(ie[ce-1]=ie[ce]=n.R_H,ce++);J[J.length-1]===n.DOT&&(ie[J.length-1]=n.B),J[0]===""&&(ie[0]=n.RLE);for(var ce=0;ce<Q.length;ce++)X[ce]=ie[Q[ce]];return{logicalFromVisual:Q,bidiLevels:X}},n.hasBidiCharacters=function(z,Y){for(var V=!1,J=0;J<z.length;J++)Y[J]=H(z.charAt(J)),!V&&(Y[J]==b||Y[J]==k||Y[J]==y)&&(V=!0);return V},n.getVisualFromLogicalIdx=function(z,Y){for(var V=0;V<Y.logicalFromVisual.length;V++)if(Y.logicalFromVisual[V]==z)return V;return 0}}),ace.define("ace/bidihandler",["require","exports","module","ace/lib/bidiutil","ace/lib/lang"],function(t,n,r){var a=t("./lib/bidiutil"),s=t("./lib/lang"),l=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\u202B]/,u=function(d){this.session=d,this.bidiMap={},this.currentRow=null,this.bidiUtil=a,this.charWidths=[],this.EOL="",this.showInvisibles=!0,this.isRtlDir=!1,this.$isRtl=!1,this.line="",this.wrapIndent=0,this.EOF="",this.RLE="",this.contentWidth=0,this.fontMetrics=null,this.rtlLineOffset=0,this.wrapOffset=0,this.isMoveLeftOperation=!1,this.seenBidi=l.test(d.getValue())};(function(){this.isBidiRow=function(d,f,m){return this.seenBidi?(d!==this.currentRow&&(this.currentRow=d,this.updateRowLine(f,m),this.updateBidiMap()),this.bidiMap.bidiLevels):!1},this.onChange=function(d){this.seenBidi?this.currentRow=null:d.action=="insert"&&l.test(d.lines.join(`
`))&&(this.seenBidi=!0,this.currentRow=null)},this.getDocumentRow=function(){var d=0,f=this.session.$screenRowCache;if(f.length){var m=this.session.$getRowCacheIndex(f,this.currentRow);m>=0&&(d=this.session.$docRowCache[m])}return d},this.getSplitIndex=function(){var d=0,f=this.session.$screenRowCache;if(f.length)for(var m,h=this.session.$getRowCacheIndex(f,this.currentRow);this.currentRow-d>0&&(m=this.session.$getRowCacheIndex(f,this.currentRow-d-1),m===h);)h=m,d++;else d=this.currentRow;return d},this.updateRowLine=function(d,f){d===void 0&&(d=this.getDocumentRow());var m=d===this.session.getLength()-1,h=m?this.EOF:this.EOL;if(this.wrapIndent=0,this.line=this.session.getLine(d),this.isRtlDir=this.$isRtl||this.line.charAt(0)===this.RLE,this.session.$useWrapMode){var p=this.session.$wrapData[d];p&&(f===void 0&&(f=this.getSplitIndex()),f>0&&p.length?(this.wrapIndent=p.indent,this.wrapOffset=this.wrapIndent*this.charWidths[a.L],this.line=f<p.length?this.line.substring(p[f-1],p[f]):this.line.substring(p[p.length-1])):this.line=this.line.substring(0,p[f]),f==p.length&&(this.line+=this.showInvisibles?h:a.DOT))}else this.line+=this.showInvisibles?h:a.DOT;var g=this.session,b=0,v;this.line=this.line.replace(/\t|[\u1100-\u2029, \u202F-\uFFE6]/g,function(y,C){return y==="	"||g.isFullWidth(y.charCodeAt(0))?(v=y==="	"?g.getScreenTabSize(C+b):2,b+=v-1,s.stringRepeat(a.DOT,v)):y}),this.isRtlDir&&(this.fontMetrics.$main.textContent=this.line.charAt(this.line.length-1)==a.DOT?this.line.substr(0,this.line.length-1):this.line,this.rtlLineOffset=this.contentWidth-this.fontMetrics.$main.getBoundingClientRect().width)},this.updateBidiMap=function(){var d=[];a.hasBidiCharacters(this.line,d)||this.isRtlDir?this.bidiMap=a.doBidiReorder(this.line,d,this.isRtlDir):this.bidiMap={}},this.markAsDirty=function(){this.currentRow=null},this.updateCharacterWidths=function(d){if(this.characterWidth!==d.$characterSize.width){this.fontMetrics=d;var f=this.characterWidth=d.$characterSize.width,m=d.$measureCharWidth("");this.charWidths[a.L]=this.charWidths[a.EN]=this.charWidths[a.ON_R]=f,this.charWidths[a.R]=this.charWidths[a.AN]=m,this.charWidths[a.R_H]=m*.45,this.charWidths[a.B]=this.charWidths[a.RLE]=0,this.currentRow=null}},this.setShowInvisibles=function(d){this.showInvisibles=d,this.currentRow=null},this.setEolChar=function(d){this.EOL=d},this.setContentWidth=function(d){this.contentWidth=d},this.isRtlLine=function(d){return this.$isRtl?!0:d!=null?this.session.getLine(d).charAt(0)==this.RLE:this.isRtlDir},this.setRtlDirection=function(d,f){for(var m=d.getCursorPosition(),h=d.selection.getSelectionAnchor().row;h<=m.row;h++)!f&&d.session.getLine(h).charAt(0)===d.session.$bidiHandler.RLE?d.session.doc.removeInLine(h,0,1):f&&d.session.getLine(h).charAt(0)!==d.session.$bidiHandler.RLE&&d.session.doc.insert({column:0,row:h},d.session.$bidiHandler.RLE)},this.getPosLeft=function(d){d-=this.wrapIndent;var f=this.line.charAt(0)===this.RLE?1:0,m=d>f?this.session.getOverwrite()?d:d-1:f,h=a.getVisualFromLogicalIdx(m,this.bidiMap),p=this.bidiMap.bidiLevels,g=0;!this.session.getOverwrite()&&d<=f&&p[h]%2!==0&&h++;for(var b=0;b<h;b++)g+=this.charWidths[p[b]];return!this.session.getOverwrite()&&d>f&&p[h]%2===0&&(g+=this.charWidths[p[h]]),this.wrapIndent&&(g+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset),this.isRtlDir&&(g+=this.rtlLineOffset),g},this.getSelections=function(d,f){var m=this.bidiMap,h=m.bidiLevels,p,g=[],b=0,v=Math.min(d,f)-this.wrapIndent,y=Math.max(d,f)-this.wrapIndent,C=!1,E=!1,A=0;this.wrapIndent&&(b+=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);for(var k,T=0;T<h.length;T++)k=m.logicalFromVisual[T],p=h[T],C=k>=v&&k<y,C&&!E?A=b:!C&&E&&g.push({left:A,width:b-A}),b+=this.charWidths[p],E=C;if(C&&T===h.length&&g.push({left:A,width:b-A}),this.isRtlDir)for(var $=0;$<g.length;$++)g[$].left+=this.rtlLineOffset;return g},this.offsetToCol=function(m){this.isRtlDir&&(m-=this.rtlLineOffset);var f=0,m=Math.max(m,0),h=0,p=0,g=this.bidiMap.bidiLevels,b=this.charWidths[g[p]];for(this.wrapIndent&&(m-=this.isRtlDir?-1*this.wrapOffset:this.wrapOffset);m>h+b/2;){if(h+=b,p===g.length-1){b=0;break}b=this.charWidths[g[++p]]}return p>0&&g[p-1]%2!==0&&g[p]%2===0?(m<h&&p--,f=this.bidiMap.logicalFromVisual[p]):p>0&&g[p-1]%2===0&&g[p]%2!==0?f=1+(m>h?this.bidiMap.logicalFromVisual[p]:this.bidiMap.logicalFromVisual[p-1]):this.isRtlDir&&p===g.length-1&&b===0&&g[p-1]%2===0||!this.isRtlDir&&p===0&&g[p]%2!==0?f=1+this.bidiMap.logicalFromVisual[p]:(p>0&&g[p-1]%2!==0&&b!==0&&p--,f=this.bidiMap.logicalFromVisual[p]),f===0&&this.isRtlDir&&f++,f+this.wrapIndent}}).call(u.prototype),n.BidiHandler=u}),ace.define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/lang"),l=t("./lib/event_emitter").EventEmitter,u=t("./range").Range,d=function(f){this.session=f,this.doc=f.getDocument(),this.clearSelection(),this.cursor=this.lead=this.doc.createAnchor(0,0),this.anchor=this.doc.createAnchor(0,0),this.$silent=!1;var m=this;this.cursor.on("change",function(h){m.$cursorChanged=!0,m.$silent||m._emit("changeCursor"),!m.$isEmpty&&!m.$silent&&m._emit("changeSelection"),!m.$keepDesiredColumnOnChange&&h.old.column!=h.value.column&&(m.$desiredColumn=null)}),this.anchor.on("change",function(){m.$anchorChanged=!0,!m.$isEmpty&&!m.$silent&&m._emit("changeSelection")})};(function(){a.implement(this,l),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.$isEmpty&&this.anchor.row!=this.cursor.row},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(f,m){this.$isEmpty=!1,this.anchor.setPosition(f,m)},this.getAnchor=this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.isBackwards=function(){var f=this.anchor,m=this.lead;return f.row>m.row||f.row==m.row&&f.column>m.column},this.getRange=function(){var f=this.anchor,m=this.lead;return this.$isEmpty?u.fromPoints(m,m):this.isBackwards()?u.fromPoints(m,f):u.fromPoints(f,m)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){this.$setSelection(0,0,Number.MAX_VALUE,Number.MAX_VALUE)},this.setRange=this.setSelectionRange=function(f,m){var h=m?f.end:f.start,p=m?f.start:f.end;this.$setSelection(h.row,h.column,p.row,p.column)},this.$setSelection=function(f,m,h,p){if(!this.$silent){var g=this.$isEmpty,b=this.inMultiSelectMode;this.$silent=!0,this.$cursorChanged=this.$anchorChanged=!1,this.anchor.setPosition(f,m),this.cursor.setPosition(h,p),this.$isEmpty=!u.comparePoints(this.anchor,this.cursor),this.$silent=!1,this.$cursorChanged&&this._emit("changeCursor"),(this.$cursorChanged||this.$anchorChanged||g!=this.$isEmpty||b)&&this._emit("changeSelection")}},this.$moveSelection=function(f){var m=this.lead;this.$isEmpty&&this.setSelectionAnchor(m.row,m.column),f.call(this)},this.selectTo=function(f,m){this.$moveSelection(function(){this.moveCursorTo(f,m)})},this.selectToPosition=function(f){this.$moveSelection(function(){this.moveCursorToPosition(f)})},this.moveTo=function(f,m){this.clearSelection(),this.moveCursorTo(f,m)},this.moveToPosition=function(f){this.clearSelection(),this.moveCursorToPosition(f)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(f,m){if(typeof m>"u"){var h=f||this.lead;f=h.row,m=h.column}return this.session.getWordRange(f,m)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var f=this.getCursor(),m=this.session.getAWordRange(f.row,f.column);this.setSelectionRange(m)},this.getLineRange=function(f,m){var h=typeof f=="number"?f:this.lead.row,p,g=this.session.getFoldLine(h);return g?(h=g.start.row,p=g.end.row):p=h,m===!0?new u(h,0,p,this.session.getLine(p).length):new u(h,0,p+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.wouldMoveIntoSoftTab=function(f,m,h){var p=f.column,g=f.column+m;return h<0&&(p=f.column-m,g=f.column),this.session.isTabStop(f)&&this.doc.getLine(f.row).slice(p,g).split(" ").length-1==m},this.moveCursorLeft=function(){var f=this.lead.getPosition(),m;if(m=this.session.getFoldAt(f.row,f.column,-1))this.moveCursorTo(m.start.row,m.start.column);else if(f.column===0)f.row>0&&this.moveCursorTo(f.row-1,this.doc.getLine(f.row-1).length);else{var h=this.session.getTabSize();this.wouldMoveIntoSoftTab(f,h,-1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,-h):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var f=this.lead.getPosition(),m;if(m=this.session.getFoldAt(f.row,f.column,1))this.moveCursorTo(m.end.row,m.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var h=this.session.getTabSize(),f=this.lead;this.wouldMoveIntoSoftTab(f,h,1)&&!this.session.getNavigateWithinSoftTabs()?this.moveCursorBy(0,h):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var f=this.lead.row,m=this.lead.column,h=this.session.documentToScreenRow(f,m),p=this.session.screenToDocumentPosition(h,0),g=this.session.getDisplayLine(f,null,p.row,p.column),b=g.match(/^\s*/);b[0].length!=m&&!this.session.$useEmacsStyleLineStart&&(p.column+=b[0].length),this.moveCursorToPosition(p)},this.moveCursorLineEnd=function(){var f=this.lead,m=this.session.getDocumentLastRowColumnPosition(f.row,f.column);if(this.lead.column==m.column){var h=this.session.getLine(m.row);if(m.column==h.length){var p=h.search(/\s+$/);p>0&&(m.column=p)}}this.moveCursorTo(m.row,m.column)},this.moveCursorFileEnd=function(){var f=this.doc.getLength()-1,m=this.doc.getLine(f).length;this.moveCursorTo(f,m)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var f=this.lead.row,m=this.lead.column,h=this.doc.getLine(f),p=h.substring(m);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var g=this.session.getFoldAt(f,m,1);if(g){this.moveCursorTo(g.end.row,g.end.column);return}if(this.session.nonTokenRe.exec(p)&&(m+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,p=h.substring(m)),m>=h.length){this.moveCursorTo(f,h.length),this.moveCursorRight(),f<this.doc.getLength()-1&&this.moveCursorWordRight();return}this.session.tokenRe.exec(p)&&(m+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,m)},this.moveCursorLongWordLeft=function(){var f=this.lead.row,m=this.lead.column,h;if(h=this.session.getFoldAt(f,m,-1)){this.moveCursorTo(h.start.row,h.start.column);return}var p=this.session.getFoldStringAt(f,m,-1);p==null&&(p=this.doc.getLine(f).substring(0,m));var g=s.stringReverse(p);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(g)&&(m-=this.session.nonTokenRe.lastIndex,g=g.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),m<=0){this.moveCursorTo(f,0),this.moveCursorLeft(),f>0&&this.moveCursorWordLeft();return}this.session.tokenRe.exec(g)&&(m-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(f,m)},this.$shortWordEndIndex=function(f){var m=0,h,p=/\s/,g=this.session.tokenRe;if(g.lastIndex=0,this.session.tokenRe.exec(f))m=this.session.tokenRe.lastIndex;else{for(;(h=f[m])&&p.test(h);)m++;if(m<1){for(g.lastIndex=0;(h=f[m])&&!g.test(h);)if(g.lastIndex=0,m++,p.test(h))if(m>2){m--;break}else{for(;(h=f[m])&&p.test(h);)m++;if(m>2)break}}}return g.lastIndex=0,m},this.moveCursorShortWordRight=function(){var f=this.lead.row,m=this.lead.column,h=this.doc.getLine(f),p=h.substring(m),g=this.session.getFoldAt(f,m,1);if(g)return this.moveCursorTo(g.end.row,g.end.column);if(m==h.length){var b=this.doc.getLength();do f++,p=this.doc.getLine(f);while(f<b&&/^\s*$/.test(p));/^\s+/.test(p)||(p=""),m=0}var v=this.$shortWordEndIndex(p);this.moveCursorTo(f,m+v)},this.moveCursorShortWordLeft=function(){var f=this.lead.row,m=this.lead.column,h;if(h=this.session.getFoldAt(f,m,-1))return this.moveCursorTo(h.start.row,h.start.column);var p=this.session.getLine(f).substring(0,m);if(m===0){do f--,p=this.doc.getLine(f);while(f>0&&/^\s*$/.test(p));m=p.length,/\s+$/.test(p)||(p="")}var g=s.stringReverse(p),b=this.$shortWordEndIndex(g);return this.moveCursorTo(f,m-b)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(f,m){var h=this.session.documentToScreenPosition(this.lead.row,this.lead.column),p;if(m===0&&(f!==0&&(this.session.$bidiHandler.isBidiRow(h.row,this.lead.row)?(p=this.session.$bidiHandler.getPosLeft(h.column),h.column=Math.round(p/this.session.$bidiHandler.charWidths[0])):p=h.column*this.session.$bidiHandler.charWidths[0]),this.$desiredColumn?h.column=this.$desiredColumn:this.$desiredColumn=h.column),f!=0&&this.session.lineWidgets&&this.session.lineWidgets[this.lead.row]){var g=this.session.lineWidgets[this.lead.row];f<0?f-=g.rowsAbove||0:f>0&&(f+=g.rowCount-(g.rowsAbove||0))}var b=this.session.screenToDocumentPosition(h.row+f,h.column,p);f!==0&&m===0&&b.row===this.lead.row&&(b.column,this.lead.column),this.moveCursorTo(b.row,b.column+m,m===0)},this.moveCursorToPosition=function(f){this.moveCursorTo(f.row,f.column)},this.moveCursorTo=function(f,m,h){var p=this.session.getFoldAt(f,m,1);p&&(f=p.start.row,m=p.start.column),this.$keepDesiredColumnOnChange=!0;var g=this.session.getLine(f);/[\uDC00-\uDFFF]/.test(g.charAt(m))&&g.charAt(m-1)&&(this.lead.row==f&&this.lead.column==m+1?m=m-1:m=m+1),this.lead.setPosition(f,m),this.$keepDesiredColumnOnChange=!1,h||(this.$desiredColumn=null)},this.moveCursorToScreen=function(f,m,h){var p=this.session.screenToDocumentPosition(f,m);this.moveCursorTo(p.row,p.column,h)},this.detach=function(){this.lead.detach(),this.anchor.detach()},this.fromOrientedRange=function(f){this.setSelectionRange(f,f.cursor==f.start),this.$desiredColumn=f.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(f){var m=this.getRange();return f?(f.start.column=m.start.column,f.start.row=m.start.row,f.end.column=m.end.column,f.end.row=m.end.row):f=m,f.cursor=this.isBackwards()?f.start:f.end,f.desiredColumn=this.$desiredColumn,f},this.getRangeOfMovements=function(f){var m=this.getCursor();try{f(this);var h=this.getCursor();return u.fromPoints(m,h)}catch{return u.fromPoints(m,m)}finally{this.moveCursorToPosition(m)}},this.toJSON=function(){if(this.rangeCount)var f=this.ranges.map(function(m){var h=m.clone();return h.isBackwards=m.cursor==m.start,h});else{var f=this.getRange();f.isBackwards=this.isBackwards()}return f},this.fromJSON=function(f){if(f.start==null)if(this.rangeList&&f.length>1){this.toSingleRange(f[0]);for(var m=f.length;m--;){var h=u.fromPoints(f[m].start,f[m].end);f[m].isBackwards&&(h.cursor=h.start),this.addRange(h,!0)}return}else f=f[0];this.rangeList&&this.toSingleRange(f),this.setSelectionRange(f,f.isBackwards)},this.isEqual=function(f){if((f.length||this.rangeCount)&&f.length!=this.rangeCount)return!1;if(!f.length||!this.ranges)return this.getRange().isEqual(f);for(var m=this.ranges.length;m--;)if(!this.ranges[m].isEqual(f[m]))return!1;return!0}}).call(d.prototype),n.Selection=d}),ace.define("ace/tokenizer",["require","exports","module","ace/config"],function(t,n,r){var a=t("./config"),s=2e3,l=function(u){this.states=u,this.regExps={},this.matchMappings={};for(var d in this.states){for(var f=this.states[d],m=[],h=0,p=this.matchMappings[d]={defaultToken:"text"},g="g",b=[],v=0;v<f.length;v++){var y=f[v];if(y.defaultToken&&(p.defaultToken=y.defaultToken),y.caseInsensitive&&g.indexOf("i")===-1&&(g+="i"),y.unicode&&g.indexOf("u")===-1&&(g+="u"),y.regex!=null){y.regex instanceof RegExp&&(y.regex=y.regex.toString().slice(1,-1));var C=y.regex,E=new RegExp("(?:("+C+")|(.))").exec("a").length-2;Array.isArray(y.token)?y.token.length==1||E==1?y.token=y.token[0]:E-1!=y.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:y,groupCount:E-1}),y.token=y.token[0]):(y.tokenArray=y.token,y.token=null,y.onMatch=this.$arrayTokens):typeof y.token=="function"&&!y.onMatch&&(E>1?y.onMatch=this.$applyToken:y.onMatch=y.token),E>1&&(/\\\d/.test(y.regex)?C=y.regex.replace(/\\([0-9]+)/g,function(A,k){return"\\"+(parseInt(k,10)+h+1)}):(E=1,C=this.removeCapturingGroups(y.regex)),!y.splitRegex&&typeof y.token!="string"&&b.push(y)),p[h]=v,h+=E,m.push(C),y.onMatch||(y.onMatch=null)}}m.length||(p[0]=0,m.push("$")),b.forEach(function(A){A.splitRegex=this.createSplitterRegexp(A.regex,g)},this),this.regExps[d]=new RegExp("("+m.join(")|(")+")|($)",g)}};(function(){this.$setMaxTokenCount=function(u){s=u|0},this.$applyToken=function(u){var d=this.splitRegex.exec(u).slice(1),f=this.token.apply(this,d);if(typeof f=="string")return[{type:f,value:u}];for(var m=[],h=0,p=f.length;h<p;h++)d[h]&&(m[m.length]={type:f[h],value:d[h]});return m},this.$arrayTokens=function(u){if(!u)return[];var d=this.splitRegex.exec(u);if(!d)return"text";for(var f=[],m=this.tokenArray,h=0,p=m.length;h<p;h++)d[h+1]&&(f[f.length]={type:m[h],value:d[h+1]});return f},this.removeCapturingGroups=function(u){var d=u.replace(/\\.|\[(?:\\.|[^\\\]])*|\(\?[:=!<]|(\()/g,function(f,m){return m?"(?:":f});return d},this.createSplitterRegexp=function(u,d){if(u.indexOf("(?=")!=-1){var f=0,m=!1,h={};u.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(p,g,b,v,y,C){return m?m=y!="]":y?m=!0:v?(f==h.stack&&(h.end=C+1,h.stack=-1),f--):b&&(f++,b.length!=1&&(h.stack=f,h.start=C)),p}),h.end!=null&&/^\)*$/.test(u.substr(h.end))&&(u=u.substring(0,h.start)+u.substr(h.end))}return u.charAt(0)!="^"&&(u="^"+u),u.charAt(u.length-1)!="$"&&(u+="$"),new RegExp(u,(d||"").replace("g",""))},this.getLineTokens=function(u,d){if(d&&typeof d!="string"){var f=d.slice(0);d=f[0],d==="#tmp"&&(f.shift(),d=f.shift())}else var f=[];var m=d||"start",h=this.states[m];h||(m="start",h=this.states[m]);var p=this.matchMappings[m],g=this.regExps[m];g.lastIndex=0;for(var b,v=[],y=0,C=0,E={type:null,value:""};b=g.exec(u);){var A=p.defaultToken,k=null,T=b[0],$=g.lastIndex;if($-T.length>y){var S=u.substring(y,$-T.length);E.type==A?E.value+=S:(E.type&&v.push(E),E={type:A,value:S})}for(var I=0;I<b.length-2;I++)if(b[I+1]!==void 0){k=h[p[I]],k.onMatch?A=k.onMatch(T,m,f,u):A=k.token,k.next&&(typeof k.next=="string"?m=k.next:m=k.next(m,f),h=this.states[m],h||(this.reportError("state doesn't exist",m),m="start",h=this.states[m]),p=this.matchMappings[m],y=$,g=this.regExps[m],g.lastIndex=$),k.consumeLineEnd&&(y=$);break}if(T){if(typeof A=="string")(!k||k.merge!==!1)&&E.type===A?E.value+=T:(E.type&&v.push(E),E={type:A,value:T});else if(A){E.type&&v.push(E),E={type:null,value:""};for(var I=0;I<A.length;I++)v.push(A[I])}}if(y==u.length)break;if(y=$,C++>s){for(C>2*u.length&&this.reportError("infinite loop with in ace tokenizer",{startState:d,line:u});y<u.length;)E.type&&v.push(E),E={value:u.substring(y,y+=500),type:"overflow"};m="start",f=[];break}}return E.type&&v.push(E),f.length>1&&f[0]!==m&&f.unshift("#tmp",m),{tokens:v,state:f.length?f:m}},this.reportError=a.reportError}).call(l.prototype),n.Tokenizer=l}),ace.define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(t,n,r){var a=t("../lib/lang"),s=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(d,f){if(!f){for(var m in d)this.$rules[m]=d[m];return}for(var m in d){for(var h=d[m],p=0;p<h.length;p++){var g=h[p];(g.next||g.onMatch)&&(typeof g.next=="string"&&g.next.indexOf(f)!==0&&(g.next=f+g.next),g.nextState&&g.nextState.indexOf(f)!==0&&(g.nextState=f+g.nextState))}this.$rules[f+m]=h}},this.getRules=function(){return this.$rules},this.embedRules=function(d,f,m,h,p){var g=typeof d=="function"?new d().getRules():d;if(h)for(var b=0;b<h.length;b++)h[b]=f+h[b];else{h=[];for(var v in g)h.push(f+v)}if(this.addRules(g,f),m)for(var y=Array.prototype[p?"push":"unshift"],b=0;b<h.length;b++)y.apply(this.$rules[h[b]],a.deepCopy(m));this.$embeds||(this.$embeds=[]),this.$embeds.push(f)},this.getEmbeds=function(){return this.$embeds};var l=function(d,f){return(d!="start"||f.length)&&f.unshift(this.nextState,d),this.nextState},u=function(d,f){return f.shift(),f.shift()||"start"};this.normalizeRules=function(){var d=0,f=this.$rules;function m(h){var p=f[h];p.processed=!0;for(var g=0;g<p.length;g++){var b=p[g],v=null;Array.isArray(b)&&(v=b,b={}),!b.regex&&b.start&&(b.regex=b.start,b.next||(b.next=[]),b.next.push({defaultToken:b.token},{token:b.token+".end",regex:b.end||b.start,next:"pop"}),b.token=b.token+".start",b.push=!0);var y=b.next||b.push;if(y&&Array.isArray(y)){var C=b.stateName;C||(C=b.token,typeof C!="string"&&(C=C[0]||""),f[C]&&(C+=d++)),f[C]=y,b.next=C,m(C)}else y=="pop"&&(b.next=u);if(b.push&&(b.nextState=b.next||b.push,b.next=l,delete b.push),b.rules)for(var E in b.rules)f[E]?f[E].push&&f[E].push.apply(f[E],b.rules[E]):f[E]=b.rules[E];var A=typeof b=="string"?b:b.include;if(A&&(Array.isArray(A)?v=A.map(function(T){return f[T]}):v=f[A]),v){var k=[g,1].concat(v);b.noEscape&&(k=k.filter(function(T){return!T.next})),p.splice.apply(p,k),g--}b.keywordMap&&(b.token=this.createKeywordMapper(b.keywordMap,b.defaultToken||"text",b.caseInsensitive),delete b.defaultToken)}}Object.keys(f).forEach(m,this)},this.createKeywordMapper=function(d,f,m,h){var p=Object.create(null);return this.$keywordList=[],Object.keys(d).forEach(function(g){for(var b=d[g],v=b.split(h||"|"),y=v.length;y--;){var C=v[y];this.$keywordList.push(C),m&&(C=C.toLowerCase()),p[C]=g}},this),d=null,m?function(g){return p[g.toLowerCase()]||f}:function(g){return p[g]||f}},this.getKeywords=function(){return this.$keywords}}).call(s.prototype),n.TextHighlightRules=s}),ace.define("ace/mode/behaviour",["require","exports","module"],function(t,n,r){var a=function(){this.$behaviours={}};(function(){this.add=function(s,l,u){switch(void 0){case this.$behaviours:this.$behaviours={};case this.$behaviours[s]:this.$behaviours[s]={}}this.$behaviours[s][l]=u},this.addBehaviours=function(s){for(var l in s)for(var u in s[l])this.add(l,u,s[l][u])},this.remove=function(s){this.$behaviours&&this.$behaviours[s]&&delete this.$behaviours[s]},this.inherit=function(s,l){if(typeof s=="function")var u=new s().getBehaviours(l);else var u=s.getBehaviours(l);this.addBehaviours(u)},this.getBehaviours=function(s){if(s){for(var l={},u=0;u<s.length;u++)this.$behaviours[s[u]]&&(l[s[u]]=this.$behaviours[s[u]]);return l}else return this.$behaviours}}).call(a.prototype),n.Behaviour=a}),ace.define("ace/token_iterator",["require","exports","module","ace/range"],function(t,n,r){var a=t("./range").Range,s=function(l,u,d){this.$session=l,this.$row=u,this.$rowTokens=l.getTokens(u);var f=l.getTokenAt(u,d);this.$tokenIndex=f?f.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var l;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,l||(l=this.$session.getLength()),this.$row>=l)return this.$row=l-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var l=this.$rowTokens,u=this.$tokenIndex,d=l[u].start;if(d!==void 0)return d;for(d=0;u>0;)u-=1,d+=l[u].value.length;return d},this.getCurrentTokenPosition=function(){return{row:this.$row,column:this.getCurrentTokenColumn()}},this.getCurrentTokenRange=function(){var l=this.$rowTokens[this.$tokenIndex],u=this.getCurrentTokenColumn();return new a(this.$row,u,this.$row,u+l.value.length)}}).call(s.prototype),n.TokenIterator=s}),ace.define("ace/mode/behaviour/cstyle",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,r){var a=t("../../lib/oop"),s=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator,u=t("../../lib/lang"),d=["text","paren.rparen","rparen","paren","punctuation.operator"],f=["text","paren.rparen","rparen","paren","punctuation.operator","comment"],m,h={},p={'"':'"',"'":"'"},g=function(y){var C=-1;if(y.multiSelect&&(C=y.selection.index,h.rangeCount!=y.multiSelect.rangeCount&&(h={rangeCount:y.multiSelect.rangeCount})),h[C])return m=h[C];m=h[C]={autoInsertedBrackets:0,autoInsertedRow:-1,autoInsertedLineEnd:"",maybeInsertedBrackets:0,maybeInsertedRow:-1,maybeInsertedLineStart:"",maybeInsertedLineEnd:""}},b=function(y,C,E,A){var k=y.end.row-y.start.row;return{text:E+C+A,selection:[0,y.start.column+1,k,y.end.column+(k?0:1)]}},v=function(y){this.add("braces","insertion",function(C,E,A,k,T){var $=A.getCursorPosition(),S=k.doc.getLine($.row);if(T=="{"){g(A);var I=A.getSelectionRange(),R=k.doc.getTextRange(I);if(R!==""&&R!=="{"&&A.getWrapBehavioursEnabled())return b(I,R,"{","}");if(v.isSaneInsertion(A,k))return/[\]\}\)]/.test(S[$.column])||A.inMultiSelectMode||y&&y.braces?(v.recordAutoInsert(A,k,"}"),{text:"{}",selection:[1,1]}):(v.recordMaybeInsert(A,k,"{"),{text:"{",selection:[1,1]})}else if(T=="}"){g(A);var N=S.substring($.column,$.column+1);if(N=="}"){var M=k.$findOpeningBracket("}",{column:$.column+1,row:$.row});if(M!==null&&v.isAutoInsertedClosing($,S,T))return v.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}else if(T==`
`||T==`\r
`){g(A);var F="";v.isMaybeInsertedClosing($,S)&&(F=u.stringRepeat("}",m.maybeInsertedBrackets),v.clearMaybeInsertedClosing());var N=S.substring($.column,$.column+1);if(N==="}"){var D=k.findMatchingBracket({row:$.row,column:$.column+1},"}");if(!D)return null;var x=this.$getIndent(k.getLine(D.row))}else if(F)var x=this.$getIndent(S);else{v.clearMaybeInsertedClosing();return}var B=x+k.getTabString();return{text:`
`+B+`
`+x+F,selection:[1,B.length,1,B.length]}}else v.clearMaybeInsertedClosing()}),this.add("braces","deletion",function(C,E,A,k,T){var $=k.doc.getTextRange(T);if(!T.isMultiLine()&&$=="{"){g(A);var S=k.doc.getLine(T.start.row),I=S.substring(T.end.column,T.end.column+1);if(I=="}")return T.end.column++,T;m.maybeInsertedBrackets--}}),this.add("parens","insertion",function(C,E,A,k,T){if(T=="("){g(A);var $=A.getSelectionRange(),S=k.doc.getTextRange($);if(S!==""&&A.getWrapBehavioursEnabled())return b($,S,"(",")");if(v.isSaneInsertion(A,k))return v.recordAutoInsert(A,k,")"),{text:"()",selection:[1,1]}}else if(T==")"){g(A);var I=A.getCursorPosition(),R=k.doc.getLine(I.row),N=R.substring(I.column,I.column+1);if(N==")"){var M=k.$findOpeningBracket(")",{column:I.column+1,row:I.row});if(M!==null&&v.isAutoInsertedClosing(I,R,T))return v.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("parens","deletion",function(C,E,A,k,T){var $=k.doc.getTextRange(T);if(!T.isMultiLine()&&$=="("){g(A);var S=k.doc.getLine(T.start.row),I=S.substring(T.start.column+1,T.start.column+2);if(I==")")return T.end.column++,T}}),this.add("brackets","insertion",function(C,E,A,k,T){if(T=="["){g(A);var $=A.getSelectionRange(),S=k.doc.getTextRange($);if(S!==""&&A.getWrapBehavioursEnabled())return b($,S,"[","]");if(v.isSaneInsertion(A,k))return v.recordAutoInsert(A,k,"]"),{text:"[]",selection:[1,1]}}else if(T=="]"){g(A);var I=A.getCursorPosition(),R=k.doc.getLine(I.row),N=R.substring(I.column,I.column+1);if(N=="]"){var M=k.$findOpeningBracket("]",{column:I.column+1,row:I.row});if(M!==null&&v.isAutoInsertedClosing(I,R,T))return v.popAutoInsertedClosing(),{text:"",selection:[1,1]}}}}),this.add("brackets","deletion",function(C,E,A,k,T){var $=k.doc.getTextRange(T);if(!T.isMultiLine()&&$=="["){g(A);var S=k.doc.getLine(T.start.row),I=S.substring(T.start.column+1,T.start.column+2);if(I=="]")return T.end.column++,T}}),this.add("string_dquotes","insertion",function(C,E,A,k,T){var $=k.$mode.$quotes||p;if(T.length==1&&$[T]){if(this.lineCommentStart&&this.lineCommentStart.indexOf(T)!=-1)return;g(A);var S=T,I=A.getSelectionRange(),R=k.doc.getTextRange(I);if(R!==""&&(R.length!=1||!$[R])&&A.getWrapBehavioursEnabled())return b(I,R,S,S);if(!R){var N=A.getCursorPosition(),M=k.doc.getLine(N.row),F=M.substring(N.column-1,N.column),D=M.substring(N.column,N.column+1),x=k.getTokenAt(N.row,N.column),B=k.getTokenAt(N.row,N.column+1);if(F=="\\"&&x&&/escape/.test(x.type))return null;var K=x&&/string|escape/.test(x.type),U=!B||/string|escape/.test(B.type),G;if(D==S)G=K!==U,G&&/string\.end/.test(B.type)&&(G=!1);else{if(K&&!U||K&&U)return null;var W=k.$mode.tokenRe;W.lastIndex=0;var q=W.test(F);W.lastIndex=0;var H=W.test(F);if(q||H||D&&!/[\s;,.})\]\\]/.test(D))return null;var z=M[N.column-2];if(F==S&&(z==S||W.test(z)))return null;G=!0}return{text:G?S+S:"",selection:[1,1]}}}}),this.add("string_dquotes","deletion",function(C,E,A,k,T){var $=k.$mode.$quotes||p,S=k.doc.getTextRange(T);if(!T.isMultiLine()&&$.hasOwnProperty(S)){g(A);var I=k.doc.getLine(T.start.row),R=I.substring(T.start.column+1,T.start.column+2);if(R==S)return T.end.column++,T}})};v.isSaneInsertion=function(y,C){var E=y.getCursorPosition(),A=new l(C,E.row,E.column);if(!this.$matchTokenType(A.getCurrentToken()||"text",d)){if(/[)}\]]/.test(y.session.getLine(E.row)[E.column]))return!0;var k=new l(C,E.row,E.column+1);if(!this.$matchTokenType(k.getCurrentToken()||"text",d))return!1}return A.stepForward(),A.getCurrentTokenRow()!==E.row||this.$matchTokenType(A.getCurrentToken()||"text",f)},v.$matchTokenType=function(y,C){return C.indexOf(y.type||y)>-1},v.recordAutoInsert=function(y,C,E){var A=y.getCursorPosition(),k=C.doc.getLine(A.row);this.isAutoInsertedClosing(A,k,m.autoInsertedLineEnd[0])||(m.autoInsertedBrackets=0),m.autoInsertedRow=A.row,m.autoInsertedLineEnd=E+k.substr(A.column),m.autoInsertedBrackets++},v.recordMaybeInsert=function(y,C,E){var A=y.getCursorPosition(),k=C.doc.getLine(A.row);this.isMaybeInsertedClosing(A,k)||(m.maybeInsertedBrackets=0),m.maybeInsertedRow=A.row,m.maybeInsertedLineStart=k.substr(0,A.column)+E,m.maybeInsertedLineEnd=k.substr(A.column),m.maybeInsertedBrackets++},v.isAutoInsertedClosing=function(y,C,E){return m.autoInsertedBrackets>0&&y.row===m.autoInsertedRow&&E===m.autoInsertedLineEnd[0]&&C.substr(y.column)===m.autoInsertedLineEnd},v.isMaybeInsertedClosing=function(y,C){return m.maybeInsertedBrackets>0&&y.row===m.maybeInsertedRow&&C.substr(y.column)===m.maybeInsertedLineEnd&&C.substr(0,y.column)==m.maybeInsertedLineStart},v.popAutoInsertedClosing=function(){m.autoInsertedLineEnd=m.autoInsertedLineEnd.substr(1),m.autoInsertedBrackets--},v.clearMaybeInsertedClosing=function(){m&&(m.maybeInsertedBrackets=0,m.maybeInsertedRow=-1)},a.inherits(v,s),n.CstyleBehaviour=v}),ace.define("ace/unicode",["require","exports","module"],function(t,n,r){for(var a=[48,9,8,25,5,0,2,25,48,0,11,0,5,0,6,22,2,30,2,457,5,11,15,4,8,0,2,0,18,116,2,1,3,3,9,0,2,2,2,0,2,19,2,82,2,138,2,4,3,155,12,37,3,0,8,38,10,44,2,0,2,1,2,1,2,0,9,26,6,2,30,10,7,61,2,9,5,101,2,7,3,9,2,18,3,0,17,58,3,100,15,53,5,0,6,45,211,57,3,18,2,5,3,11,3,9,2,1,7,6,2,2,2,7,3,1,3,21,2,6,2,0,4,3,3,8,3,1,3,3,9,0,5,1,2,4,3,11,16,2,2,5,5,1,3,21,2,6,2,1,2,1,2,1,3,0,2,4,5,1,3,2,4,0,8,3,2,0,8,15,12,2,2,8,2,2,2,21,2,6,2,1,2,4,3,9,2,2,2,2,3,0,16,3,3,9,18,2,2,7,3,1,3,21,2,6,2,1,2,4,3,8,3,1,3,2,9,1,5,1,2,4,3,9,2,0,17,1,2,5,4,2,2,3,4,1,2,0,2,1,4,1,4,2,4,11,5,4,4,2,2,3,3,0,7,0,15,9,18,2,2,7,2,2,2,22,2,9,2,4,4,7,2,2,2,3,8,1,2,1,7,3,3,9,19,1,2,7,2,2,2,22,2,9,2,4,3,8,2,2,2,3,8,1,8,0,2,3,3,9,19,1,2,7,2,2,2,22,2,15,4,7,2,2,2,3,10,0,9,3,3,9,11,5,3,1,2,17,4,23,2,8,2,0,3,6,4,0,5,5,2,0,2,7,19,1,14,57,6,14,2,9,40,1,2,0,3,1,2,0,3,0,7,3,2,6,2,2,2,0,2,0,3,1,2,12,2,2,3,4,2,0,2,5,3,9,3,1,35,0,24,1,7,9,12,0,2,0,2,0,5,9,2,35,5,19,2,5,5,7,2,35,10,0,58,73,7,77,3,37,11,42,2,0,4,328,2,3,3,6,2,0,2,3,3,40,2,3,3,32,2,3,3,6,2,0,2,3,3,14,2,56,2,3,3,66,5,0,33,15,17,84,13,619,3,16,2,25,6,74,22,12,2,6,12,20,12,19,13,12,2,2,2,1,13,51,3,29,4,0,5,1,3,9,34,2,3,9,7,87,9,42,6,69,11,28,4,11,5,11,11,39,3,4,12,43,5,25,7,10,38,27,5,62,2,28,3,10,7,9,14,0,89,75,5,9,18,8,13,42,4,11,71,55,9,9,4,48,83,2,2,30,14,230,23,280,3,5,3,37,3,5,3,7,2,0,2,0,2,0,2,30,3,52,2,6,2,0,4,2,2,6,4,3,3,5,5,12,6,2,2,6,67,1,20,0,29,0,14,0,17,4,60,12,5,0,4,11,18,0,5,0,3,9,2,0,4,4,7,0,2,0,2,0,2,3,2,10,3,3,6,4,5,0,53,1,2684,46,2,46,2,132,7,6,15,37,11,53,10,0,17,22,10,6,2,6,2,6,2,6,2,6,2,6,2,6,2,6,2,31,48,0,470,1,36,5,2,4,6,1,5,85,3,1,3,2,2,89,2,3,6,40,4,93,18,23,57,15,513,6581,75,20939,53,1164,68,45,3,268,4,27,21,31,3,13,13,1,2,24,9,69,11,1,38,8,3,102,3,1,111,44,25,51,13,68,12,9,7,23,4,0,5,45,3,35,13,28,4,64,15,10,39,54,10,13,3,9,7,22,4,1,5,66,25,2,227,42,2,1,3,9,7,11171,13,22,5,48,8453,301,3,61,3,105,39,6,13,4,6,11,2,12,2,4,2,0,2,1,2,1,2,107,34,362,19,63,3,53,41,11,5,15,17,6,13,1,25,2,33,4,2,134,20,9,8,25,5,0,2,25,12,88,4,5,3,5,3,5,3,2],s=0,l=[],u=0;u<a.length;u+=2)l.push(s+=a[u]),a[u+1]&&l.push(45,s+=a[u+1]);n.wordChars=String.fromCharCode.apply(null,l)}),ace.define("ace/mode/text",["require","exports","module","ace/config","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour/cstyle","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(t,n,r){var a=t("../config"),s=t("../tokenizer").Tokenizer,l=t("./text_highlight_rules").TextHighlightRules,u=t("./behaviour/cstyle").CstyleBehaviour,d=t("../unicode"),f=t("../lib/lang"),m=t("../token_iterator").TokenIterator,h=t("../range").Range,p=function(){this.HighlightRules=l};(function(){this.$defaultBehaviour=new u,this.tokenRe=new RegExp("^["+d.wordChars+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+d.wordChars+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules(this.$highlightRuleConfig),this.$tokenizer=new s(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(g,b,v,y){var C=b.doc,E=!0,A=!0,k=1/0,T=b.getTabSize(),$=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var R=this.lineCommentStart.map(f.escapeRegExp).join("|"),S=this.lineCommentStart[0];else var R=f.escapeRegExp(this.lineCommentStart),S=this.lineCommentStart;R=new RegExp("^(\\s*)(?:"+R+") ?"),$=b.getUseSoftTabs();var F=function(H,z){var Y=H.match(R);if(Y){var V=Y[1].length,J=Y[0].length;!B(H,V,J)&&Y[0][J-1]==" "&&J--,C.removeInLine(z,V,J)}},x=S+" ",M=function(H,z){(!E||/\S/.test(H))&&(B(H,k,k)?C.insertInLine({row:z,column:k},x):C.insertInLine({row:z,column:k},S))},D=function(H,z){return R.test(H)},B=function(H,z,Y){for(var V=0;z--&&H.charAt(z)==" ";)V++;if(V%T!=0)return!1;for(var V=0;H.charAt(Y++)==" ";)V++;return T>2?V%T!=T-1:V%T==0}}else{if(!this.blockComment)return!1;var S=this.blockComment.start,I=this.blockComment.end,R=new RegExp("^(\\s*)(?:"+f.escapeRegExp(S)+")"),N=new RegExp("(?:"+f.escapeRegExp(I)+")\\s*$"),M=function(G,W){D(G,W)||(!E||/\S/.test(G))&&(C.insertInLine({row:W,column:G.length},I),C.insertInLine({row:W,column:k},S))},F=function(G,W){var q;(q=G.match(N))&&C.removeInLine(W,G.length-q[0].length,G.length),(q=G.match(R))&&C.removeInLine(W,q[1].length,q[0].length)},D=function(G,W){if(R.test(G))return!0;for(var q=b.getTokens(W),H=0;H<q.length;H++)if(q[H].type==="comment")return!0}}function K(G){for(var W=v;W<=y;W++)G(C.getLine(W),W)}var U=1/0;K(function(G,W){var q=G.search(/\S/);q!==-1?(q<k&&(k=q),A&&!D(G,W)&&(A=!1)):U>G.length&&(U=G.length)}),k==1/0&&(k=U,E=!1,A=!1),$&&k%T!=0&&(k=Math.floor(k/T)*T),K(A?F:M)},this.toggleBlockComment=function(g,b,v,y){var C=this.blockComment;if(C){!C.start&&C[0]&&(C=C[0]);var E=new m(b,y.row,y.column),A=E.getCurrentToken();b.selection;var k=b.selection.toOrientedRange(),T,$;if(A&&/comment/.test(A.type)){for(var S,I;A&&/comment/.test(A.type);){var R=A.value.indexOf(C.start);if(R!=-1){var N=E.getCurrentTokenRow(),M=E.getCurrentTokenColumn()+R;S=new h(N,M,N,M+C.start.length);break}A=E.stepBackward()}for(var E=new m(b,y.row,y.column),A=E.getCurrentToken();A&&/comment/.test(A.type);){var R=A.value.indexOf(C.end);if(R!=-1){var N=E.getCurrentTokenRow(),M=E.getCurrentTokenColumn()+R;I=new h(N,M,N,M+C.end.length);break}A=E.stepForward()}I&&b.remove(I),S&&(b.remove(S),T=S.start.row,$=-C.start.length)}else $=C.start.length,T=v.start.row,b.insert(v.end,C.end),b.insert(v.start,C.start);k.start.row==T&&(k.start.column+=$),k.end.row==T&&(k.end.column+=$),b.selection.fromOrientedRange(k)}},this.getNextLineIndent=function(g,b,v){return this.$getIndent(b)},this.checkOutdent=function(g,b,v){return!1},this.autoOutdent=function(g,b,v){},this.$getIndent=function(g){return g.match(/^\s*/)[0]},this.createWorker=function(g){return null},this.createModeDelegates=function(g){this.$embeds=[],this.$modes={};for(var b in g)if(g[b]){var v=g[b],y=v.prototype.$id,C=a.$modes[y];C||(a.$modes[y]=C=new v),a.$modes[b]||(a.$modes[b]=C),this.$embeds.push(b),this.$modes[b]=C}for(var E=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],b=0;b<E.length;b++)(function(k){var T=E[b],$=k[T];k[E[b]]=function(){return this.$delegator(T,arguments,$)}})(this)},this.$delegator=function(g,b,v){var y=b[0]||"start";if(typeof y!="string"){if(Array.isArray(y[2])){var C=y[2][y[2].length-1],E=this.$modes[C];if(E)return E[g].apply(E,[y[1]].concat([].slice.call(b,1)))}y=y[0]||"start"}for(var A=0;A<this.$embeds.length;A++)if(this.$modes[this.$embeds[A]]){var k=y.split(this.$embeds[A]);if(!k[0]&&k[1]){b[0]=k[1];var E=this.$modes[this.$embeds[A]];return E[g].apply(E,b)}}var T=v.apply(this,b);return v?T:void 0},this.transformAction=function(g,b,v,y,C){if(this.$behaviour){var E=this.$behaviour.getBehaviours();for(var A in E)if(E[A][b]){var k=E[A][b].apply(this,arguments);if(k)return k}}},this.getKeywords=function(g){if(!this.completionKeywords){var b=this.$tokenizer.rules,v=[];for(var y in b)for(var C=b[y],E=0,A=C.length;E<A;E++)if(typeof C[E].token=="string")/keyword|support|storage/.test(C[E].token)&&v.push(C[E].regex);else if(typeof C[E].token=="object"){for(var k=0,T=C[E].token.length;k<T;k++)if(/keyword|support|storage/.test(C[E].token[k])){var y=C[E].regex.match(/\(.+?\)/g)[k];v.push(y.substr(1,y.length-2))}}this.completionKeywords=v}return g?v.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(g,b,v,y){var C=this.$keywordList||this.$createKeywordList();return C.map(function(E){return{name:E,value:E,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(p.prototype),n.Mode=p}),ace.define("ace/apply_delta",["require","exports","module"],function(t,n,r){n.applyDelta=function(a,s,l){var u=s.start.row,d=s.start.column,f=a[u]||"";switch(s.action){case"insert":var m=s.lines;if(m.length===1)a[u]=f.substring(0,d)+s.lines[0]+f.substring(d);else{var h=[u,1].concat(s.lines);a.splice.apply(a,h),a[u]=f.substring(0,d)+a[u],a[u+s.lines.length-1]+=f.substring(d)}break;case"remove":var p=s.end.column,g=s.end.row;u===g?a[u]=f.substring(0,d)+f.substring(p):a.splice(u,g-u+1,f.substring(0,d)+a[g].substring(p));break}}}),ace.define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/event_emitter").EventEmitter,l=n.Anchor=function(u,d,f){this.$onChange=this.onChange.bind(this),this.attach(u),typeof f>"u"?this.setPosition(d.row,d.column):this.setPosition(d,f)};(function(){a.implement(this,s),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(f){if(!(f.start.row==f.end.row&&f.start.row!=this.row)&&!(f.start.row>this.row)){var m=d(f,{row:this.row,column:this.column},this.$insertRight);this.setPosition(m.row,m.column,!0)}};function u(f,m,h){var p=h?f.column<=m.column:f.column<m.column;return f.row<m.row||f.row==m.row&&p}function d(f,m,h){var p=f.action=="insert",g=(p?1:-1)*(f.end.row-f.start.row),b=(p?1:-1)*(f.end.column-f.start.column),v=f.start,y=p?v:f.end;return u(m,v,h)?{row:m.row,column:m.column}:u(y,m,!h)?{row:m.row+g,column:m.column+(m.row==y.row?b:0)}:{row:v.row,column:v.column}}this.setPosition=function(f,m,h){var p;if(h?p={row:f,column:m}:p=this.$clipPositionToDocument(f,m),!(this.row==p.row&&this.column==p.column)){var g={row:this.row,column:this.column};this.row=p.row,this.column=p.column,this._signal("change",{old:g,value:p})}},this.detach=function(){this.document.off("change",this.$onChange)},this.attach=function(f){this.document=f||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(f,m){var h={};return f>=this.document.getLength()?(h.row=Math.max(0,this.document.getLength()-1),h.column=this.document.getLine(h.row).length):f<0?(h.row=0,h.column=0):(h.row=f,h.column=Math.min(this.document.getLine(h.row).length,Math.max(0,m))),m<0&&(h.column=0),h}}).call(l.prototype)}),ace.define("ace/document",["require","exports","module","ace/lib/oop","ace/apply_delta","ace/lib/event_emitter","ace/range","ace/anchor"],function(t,n,r){var a=t("./lib/oop"),s=t("./apply_delta").applyDelta,l=t("./lib/event_emitter").EventEmitter,u=t("./range").Range,d=t("./anchor").Anchor,f=function(m){this.$lines=[""],m.length===0?this.$lines=[""]:Array.isArray(m)?this.insertMergedLines({row:0,column:0},m):this.insert({row:0,column:0},m)};(function(){a.implement(this,l),this.setValue=function(m){var h=this.getLength()-1;this.remove(new u(0,0,h,this.getLine(h).length)),this.insert({row:0,column:0},m)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(m,h){return new d(this,m,h)},"aaa".split(/a/).length===0?this.$split=function(m){return m.replace(/\r\n|\r/g,`
`).split(`
`)}:this.$split=function(m){return m.split(/\r\n|\r|\n/)},this.$detectNewLine=function(m){var h=m.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=h?h[1]:`
`,this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return`\r
`;case"unix":return`
`;default:return this.$autoNewLine||`
`}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(m){this.$newLineMode!==m&&(this.$newLineMode=m,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(m){return m==`\r
`||m=="\r"||m==`
`},this.getLine=function(m){return this.$lines[m]||""},this.getLines=function(m,h){return this.$lines.slice(m,h+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(m){return this.getLinesForRange(m).join(this.getNewLineCharacter())},this.getLinesForRange=function(m){var h;if(m.start.row===m.end.row)h=[this.getLine(m.start.row).substring(m.start.column,m.end.column)];else{h=this.getLines(m.start.row,m.end.row),h[0]=(h[0]||"").substring(m.start.column);var p=h.length-1;m.end.row-m.start.row==p&&(h[p]=h[p].substring(0,m.end.column))}return h},this.insertLines=function(m,h){return console.warn("Use of document.insertLines is deprecated. Use the insertFullLines method instead."),this.insertFullLines(m,h)},this.removeLines=function(m,h){return console.warn("Use of document.removeLines is deprecated. Use the removeFullLines method instead."),this.removeFullLines(m,h)},this.insertNewLine=function(m){return console.warn("Use of document.insertNewLine is deprecated. Use insertMergedLines(position, ['', '']) instead."),this.insertMergedLines(m,["",""])},this.insert=function(m,h){return this.getLength()<=1&&this.$detectNewLine(h),this.insertMergedLines(m,this.$split(h))},this.insertInLine=function(m,h){var p=this.clippedPos(m.row,m.column),g=this.pos(m.row,m.column+h.length);return this.applyDelta({start:p,end:g,action:"insert",lines:[h]},!0),this.clonePos(g)},this.clippedPos=function(m,h){var p=this.getLength();m===void 0?m=p:m<0?m=0:m>=p&&(m=p-1,h=void 0);var g=this.getLine(m);return h==null&&(h=g.length),h=Math.min(Math.max(h,0),g.length),{row:m,column:h}},this.clonePos=function(m){return{row:m.row,column:m.column}},this.pos=function(m,h){return{row:m,column:h}},this.$clipPosition=function(m){var h=this.getLength();return m.row>=h?(m.row=Math.max(0,h-1),m.column=this.getLine(h-1).length):(m.row=Math.max(0,m.row),m.column=Math.min(Math.max(m.column,0),this.getLine(m.row).length)),m},this.insertFullLines=function(m,h){m=Math.min(Math.max(m,0),this.getLength());var p=0;m<this.getLength()?(h=h.concat([""]),p=0):(h=[""].concat(h),m--,p=this.$lines[m].length),this.insertMergedLines({row:m,column:p},h)},this.insertMergedLines=function(m,h){var p=this.clippedPos(m.row,m.column),g={row:p.row+h.length-1,column:(h.length==1?p.column:0)+h[h.length-1].length};return this.applyDelta({start:p,end:g,action:"insert",lines:h}),this.clonePos(g)},this.remove=function(m){var h=this.clippedPos(m.start.row,m.start.column),p=this.clippedPos(m.end.row,m.end.column);return this.applyDelta({start:h,end:p,action:"remove",lines:this.getLinesForRange({start:h,end:p})}),this.clonePos(h)},this.removeInLine=function(m,h,p){var g=this.clippedPos(m,h),b=this.clippedPos(m,p);return this.applyDelta({start:g,end:b,action:"remove",lines:this.getLinesForRange({start:g,end:b})},!0),this.clonePos(g)},this.removeFullLines=function(m,h){m=Math.min(Math.max(0,m),this.getLength()-1),h=Math.min(Math.max(0,h),this.getLength()-1);var p=h==this.getLength()-1&&m>0,g=h<this.getLength()-1,b=p?m-1:m,v=p?this.getLine(b).length:0,y=g?h+1:h,C=g?0:this.getLine(y).length,E=new u(b,v,y,C),A=this.$lines.slice(m,h+1);return this.applyDelta({start:E.start,end:E.end,action:"remove",lines:this.getLinesForRange(E)}),A},this.removeNewLine=function(m){m<this.getLength()-1&&m>=0&&this.applyDelta({start:this.pos(m,this.getLine(m).length),end:this.pos(m+1,0),action:"remove",lines:["",""]})},this.replace=function(m,h){if(m instanceof u||(m=u.fromPoints(m.start,m.end)),h.length===0&&m.isEmpty())return m.start;if(h==this.getTextRange(m))return m.end;this.remove(m);var p;return h?p=this.insert(m.start,h):p=m.start,p},this.applyDeltas=function(m){for(var h=0;h<m.length;h++)this.applyDelta(m[h])},this.revertDeltas=function(m){for(var h=m.length-1;h>=0;h--)this.revertDelta(m[h])},this.applyDelta=function(m,h){var p=m.action=="insert";(p?m.lines.length<=1&&!m.lines[0]:!u.comparePoints(m.start,m.end))||(p&&m.lines.length>2e4?this.$splitAndapplyLargeDelta(m,2e4):(s(this.$lines,m,h),this._signal("change",m)))},this.$safeApplyDelta=function(m){var h=this.$lines.length;(m.action=="remove"&&m.start.row<h&&m.end.row<h||m.action=="insert"&&m.start.row<=h)&&this.applyDelta(m)},this.$splitAndapplyLargeDelta=function(m,h){for(var p=m.lines,g=p.length-h+1,b=m.start.row,v=m.start.column,y=0,C=0;y<g;y=C){C+=h-1;var E=p.slice(y,C);E.push(""),this.applyDelta({start:this.pos(b+y,v),end:this.pos(b+C,v=0),action:m.action,lines:E},!0)}m.lines=p.slice(y),m.start.row=b+y,m.start.column=v,this.applyDelta(m,!0)},this.revertDelta=function(m){this.$safeApplyDelta({start:this.clonePos(m.start),end:this.clonePos(m.end),action:m.action=="insert"?"remove":"insert",lines:m.lines.slice()})},this.indexToPosition=function(m,h){for(var p=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,b=h||0,v=p.length;b<v;b++)if(m-=p[b].length+g,m<0)return{row:b,column:m+p[b].length+g};return{row:v-1,column:m+p[v-1].length+g}},this.positionToIndex=function(m,h){for(var p=this.$lines||this.getAllLines(),g=this.getNewLineCharacter().length,b=0,v=Math.min(m.row,p.length),y=h||0;y<v;++y)b+=p[y].length+g;return b+m.column}}).call(f.prototype),n.Document=f}),ace.define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/event_emitter").EventEmitter,l=function(u,d){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=u;var f=this;this.$worker=function(){if(f.running){for(var m=new Date,h=f.currentLine,p=-1,g=f.doc,b=h;f.lines[h];)h++;var v=g.getLength(),y=0;for(f.running=!1;h<v;){f.$tokenizeRow(h),p=h;do h++;while(f.lines[h]);if(y++,y%5===0&&new Date-m>20){f.running=setTimeout(f.$worker,20);break}}f.currentLine=h,p==-1&&(p=h),b<=p&&f.fireUpdateEvent(b,p)}}};(function(){a.implement(this,s),this.setTokenizer=function(u){this.tokenizer=u,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(u){this.doc=u,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(u,d){var f={first:u,last:d};this._signal("update",{data:f})},this.start=function(u){this.currentLine=Math.min(u||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(u){var d=u.start.row,f=u.end.row-d;if(f===0)this.lines[d]=null;else if(u.action=="remove")this.lines.splice(d,f+1,null),this.states.splice(d,f+1,null);else{var m=Array(f+1);m.unshift(d,1),this.lines.splice.apply(this.lines,m),this.states.splice.apply(this.states,m)}this.currentLine=Math.min(d,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(u){return this.lines[u]||this.$tokenizeRow(u)},this.getState=function(u){return this.currentLine==u&&this.$tokenizeRow(u),this.states[u]||"start"},this.$tokenizeRow=function(u){var d=this.doc.getLine(u),f=this.states[u-1],m=this.tokenizer.getLineTokens(d,f,u);return this.states[u]+""!=m.state+""?(this.states[u]=m.state,this.lines[u+1]=null,this.currentLine>u+1&&(this.currentLine=u+1)):this.currentLine==u&&(this.currentLine=u+1),this.lines[u]=m.tokens},this.cleanup=function(){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.removeAllListeners()}}).call(l.prototype),n.BackgroundTokenizer=l}),ace.define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,n,r){var a=t("./lib/lang");t("./lib/oop");var s=t("./range").Range,l=function(u,d,f){this.setRegexp(u),this.clazz=d,this.type=f||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(u){this.regExp+""!=u+""&&(this.regExp=u,this.cache=[])},this.update=function(u,d,f,m){if(this.regExp)for(var h=m.firstRow,p=m.lastRow,g={},b=h;b<=p;b++){var v=this.cache[b];v==null&&(v=a.getMatchOffsets(f.getLine(b),this.regExp),v.length>this.MAX_RANGES&&(v=v.slice(0,this.MAX_RANGES)),v=v.map(function(A){return new s(b,A.offset,b,A.offset+A.length)}),this.cache[b]=v.length?v:"");for(var y=v.length;y--;){var C=v[y].toScreenRange(f),E=C.toString();g[E]||(g[E]=!0,d.drawSingleLineMarker(u,C,this.clazz,m))}}}}).call(l.prototype),n.SearchHighlight=l}),ace.define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range;function s(l,u){this.foldData=l,Array.isArray(u)?this.folds=u:u=this.folds=[u];var d=u[u.length-1];this.range=new a(u[0].start.row,u[0].start.column,d.end.row,d.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(f){f.setFoldLine(this)},this)}(function(){this.shiftRow=function(l){this.start.row+=l,this.end.row+=l,this.folds.forEach(function(u){u.start.row+=l,u.end.row+=l})},this.addFold=function(l){if(l.sameRow){if(l.start.row<this.startRow||l.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(l),this.folds.sort(function(u,d){return-u.range.compareEnd(d.start.row,d.start.column)}),this.range.compareEnd(l.start.row,l.start.column)>0?(this.end.row=l.end.row,this.end.column=l.end.column):this.range.compareStart(l.end.row,l.end.column)<0&&(this.start.row=l.start.row,this.start.column=l.start.column)}else if(l.start.row==this.end.row)this.folds.push(l),this.end.row=l.end.row,this.end.column=l.end.column;else if(l.end.row==this.start.row)this.folds.unshift(l),this.start.row=l.start.row,this.start.column=l.start.column;else throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");l.foldLine=this},this.containsRow=function(l){return l>=this.start.row&&l<=this.end.row},this.walk=function(l,u,d){var f=0,m=this.folds,h,p,g,b=!0;u==null&&(u=this.end.row,d=this.end.column);for(var v=0;v<m.length;v++){if(h=m[v],p=h.range.compareStart(u,d),p==-1){l(null,u,d,f,b);return}if(g=l(null,h.start.row,h.start.column,f,b),g=!g&&l(h.placeholder,h.start.row,h.start.column,f),g||p===0)return;b=!h.sameRow,f=h.end.column}l(null,u,d,f,b)},this.getNextFoldTo=function(l,u){for(var d,f,m=0;m<this.folds.length;m++){if(d=this.folds[m],f=d.range.compareEnd(l,u),f==-1)return{fold:d,kind:"after"};if(f===0)return{fold:d,kind:"inside"}}return null},this.addRemoveChars=function(l,u,d){var f=this.getNextFoldTo(l,u),m,h;if(f){if(m=f.fold,f.kind=="inside"&&m.start.column!=u&&m.start.row!=l)window.console&&window.console.log(l,u,m);else if(m.start.row==l){h=this.folds;var p=h.indexOf(m);for(p===0&&(this.start.column+=d),p;p<h.length;p++){if(m=h[p],m.start.column+=d,!m.sameRow)return;m.end.column+=d}this.end.column+=d}}},this.split=function(l,u){var d=this.getNextFoldTo(l,u);if(!d||d.kind=="inside")return null;var f=d.fold,m=this.folds,h=this.foldData,p=m.indexOf(f),g=m[p-1];this.end.row=g.end.row,this.end.column=g.end.column,m=m.splice(p,m.length-p);var b=new s(h,m);return h.splice(h.indexOf(this)+1,0,b),b},this.merge=function(l){for(var u=l.folds,d=0;d<u.length;d++)this.addFold(u[d]);var f=this.foldData;f.splice(f.indexOf(l),1)},this.toString=function(){var l=[this.range.toString()+": ["];return this.folds.forEach(function(u){l.push("  "+u.toString())}),l.push("]"),l.join(`
`)},this.idxToPosition=function(l){for(var u=0,d=0;d<this.folds.length;d++){var f=this.folds[d];if(l-=f.start.column-u,l<0)return{row:f.start.row,column:f.start.column+l};if(l-=f.placeholder.length,l<0)return f.start;u=f.end.column}return{row:this.end.row,column:this.end.column+l}}}).call(s.prototype),n.FoldLine=s}),ace.define("ace/range_list",["require","exports","module","ace/range"],function(t,n,r){var a=t("./range").Range,s=a.comparePoints,l=function(){this.ranges=[],this.$bias=1};(function(){this.comparePoints=s,this.pointIndex=function(u,d,f){for(var m=this.ranges,h=f||0;h<m.length;h++){var p=m[h],g=s(u,p.end);if(!(g>0)){var b=s(u,p.start);return g===0?d&&b!==0?-h-2:h:b>0||b===0&&!d?h:-h-1}}return-h-1},this.add=function(u){var d=!u.isEmpty(),f=this.pointIndex(u.start,d);f<0&&(f=-f-1);var m=this.pointIndex(u.end,d,f);return m<0?m=-m-1:m++,this.ranges.splice(f,m-f,u)},this.addList=function(u){for(var d=[],f=u.length;f--;)d.push.apply(d,this.add(u[f]));return d},this.substractPoint=function(u){var d=this.pointIndex(u);if(d>=0)return this.ranges.splice(d,1)},this.merge=function(){var u=[],d=this.ranges;d=d.sort(function(g,b){return s(g.start,b.start)});for(var f=d[0],m,h=1;h<d.length;h++){m=f,f=d[h];var p=s(m.end,f.start);p<0||p==0&&!m.isEmpty()&&!f.isEmpty()||(s(m.end,f.end)<0&&(m.end.row=f.end.row,m.end.column=f.end.column),d.splice(h,1),u.push(f),f=m,h--)}return this.ranges=d,u},this.contains=function(u,d){return this.pointIndex({row:u,column:d})>=0},this.containsPoint=function(u){return this.pointIndex(u)>=0},this.rangeAtPoint=function(u){var d=this.pointIndex(u);if(d>=0)return this.ranges[d]},this.clipRows=function(u,d){var f=this.ranges;if(f[0].start.row>d||f[f.length-1].start.row<u)return[];var m=this.pointIndex({row:u,column:0});m<0&&(m=-m-1);var h=this.pointIndex({row:d,column:0},m);h<0&&(h=-h-1);for(var p=[],g=m;g<h;g++)p.push(f[g]);return p},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(u){this.session&&this.detach(),this.session=u,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(u){for(var d=u.start,f=u.end,m=d.row,h=f.row,p=this.ranges,g=0,b=p.length;g<b;g++){var v=p[g];if(v.end.row>=m)break}if(u.action=="insert")for(var y=h-m,C=-d.column+f.column;g<b;g++){var v=p[g];if(v.start.row>m)break;if(v.start.row==m&&v.start.column>=d.column&&(v.start.column==d.column&&this.$bias<=0||(v.start.column+=C,v.start.row+=y)),v.end.row==m&&v.end.column>=d.column){if(v.end.column==d.column&&this.$bias<0)continue;v.end.column==d.column&&C>0&&g<b-1&&v.end.column>v.start.column&&v.end.column==p[g+1].start.column&&(v.end.column-=C),v.end.column+=C,v.end.row+=y}}else for(var y=m-h,C=d.column-f.column;g<b;g++){var v=p[g];if(v.start.row>h)break;v.end.row<h&&(m<v.end.row||m==v.end.row&&d.column<v.end.column)?(v.end.row=m,v.end.column=d.column):v.end.row==h?v.end.column<=f.column?(y||v.end.column>d.column)&&(v.end.column=d.column,v.end.row=d.row):(v.end.column+=C,v.end.row+=y):v.end.row>h&&(v.end.row+=y),v.start.row<h&&(m<v.start.row||m==v.start.row&&d.column<v.start.column)?(v.start.row=m,v.start.column=d.column):v.start.row==h?v.start.column<=f.column?(y||v.start.column>d.column)&&(v.start.column=d.column,v.start.row=d.row):(v.start.column+=C,v.start.row+=y):v.start.row>h&&(v.start.row+=y)}if(y!=0&&g<b)for(;g<b;g++){var v=p[g];v.start.row+=y,v.end.row+=y}}}).call(l.prototype),n.RangeList=l}),ace.define("ace/edit_session/fold",["require","exports","module","ace/range_list","ace/lib/oop"],function(t,n,r){var a=t("../range_list").RangeList,s=t("../lib/oop"),l=n.Fold=function(h,p){this.foldLine=null,this.placeholder=p,this.range=h,this.start=h.start,this.end=h.end,this.sameRow=h.start.row==h.end.row,this.subFolds=this.ranges=[]};s.inherits(l,a),(function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(h){this.foldLine=h,this.subFolds.forEach(function(p){p.setFoldLine(h)})},this.clone=function(){var h=this.range.clone(),p=new l(h,this.placeholder);return this.subFolds.forEach(function(g){p.subFolds.push(g.clone())}),p.collapseChildren=this.collapseChildren,p},this.addSubFold=function(h){if(!this.range.isEqual(h)){d(h,this.start);for(var y=h.start.row,C=h.start.column,p=0,g=-1;p<this.subFolds.length&&(g=this.subFolds[p].range.compare(y,C),g==1);p++);var b=this.subFolds[p],v=0;if(g==0){if(b.range.containsRange(h))return b.addSubFold(h);v=1}for(var y=h.range.end.row,C=h.range.end.column,E=p,g=-1;E<this.subFolds.length&&(g=this.subFolds[E].range.compare(y,C),g==1);E++);g==0&&E++;for(var A=this.subFolds.splice(p,E-p,h),k=g==0?A.length-1:A.length,T=v;T<k;T++)h.addSubFold(A[T]);return h.setFoldLine(this.foldLine),h}},this.restoreRange=function(h){return m(h,this.start)}}).call(l.prototype);function u(h,p){h.row-=p.row,h.row==0&&(h.column-=p.column)}function d(h,p){u(h.start,p),u(h.end,p)}function f(h,p){h.row==0&&(h.column+=p.column),h.row+=p.row}function m(h,p){f(h.start,p),f(h.end,p)}}),ace.define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(t,n,r){var a=t("../range").Range,s=t("./fold_line").FoldLine,l=t("./fold").Fold,u=t("../token_iterator").TokenIterator;function d(){this.getFoldAt=function(f,m,h){var p=this.getFoldLine(f);if(!p)return null;for(var g=p.folds,b=0;b<g.length;b++){var v=g[b].range;if(v.contains(f,m)){if(h==1&&v.isEnd(f,m)&&!v.isEmpty())continue;if(h==-1&&v.isStart(f,m)&&!v.isEmpty())continue;return g[b]}}},this.getFoldsInRange=function(f){var m=f.start,h=f.end,p=this.$foldData,g=[];m.column+=1,h.column-=1;for(var b=0;b<p.length;b++){var v=p[b].range.compareRange(f);if(v!=2){if(v==-2)break;for(var y=p[b].folds,C=0;C<y.length;C++){var E=y[C];if(v=E.range.compareRange(f),v==-2)break;if(v==2)continue;if(v==42)break;g.push(E)}}}return m.column-=1,h.column+=1,g},this.getFoldsInRangeList=function(f){if(Array.isArray(f)){var m=[];f.forEach(function(h){m=m.concat(this.getFoldsInRange(h))},this)}else var m=this.getFoldsInRange(f);return m},this.getAllFolds=function(){for(var f=[],m=this.$foldData,h=0;h<m.length;h++)for(var p=0;p<m[h].folds.length;p++)f.push(m[h].folds[p]);return f},this.getFoldStringAt=function(f,m,h,p){if(p=p||this.getFoldLine(f),!p)return null;for(var g={end:{column:0}},b,v,y=0;y<p.folds.length;y++){v=p.folds[y];var C=v.range.compareEnd(f,m);if(C==-1){b=this.getLine(v.start.row).substring(g.end.column,v.start.column);break}else if(C===0)return null;g=v}return b||(b=this.getLine(v.start.row).substring(g.end.column)),h==-1?b.substring(0,m-g.end.column):h==1?b.substring(m-g.end.column):b},this.getFoldLine=function(f,m){var h=this.$foldData,p=0;for(m&&(p=h.indexOf(m)),p==-1&&(p=0),p;p<h.length;p++){var g=h[p];if(g.start.row<=f&&g.end.row>=f)return g;if(g.end.row>f)return null}return null},this.getNextFoldLine=function(f,m){var h=this.$foldData,p=0;for(m&&(p=h.indexOf(m)),p==-1&&(p=0),p;p<h.length;p++){var g=h[p];if(g.end.row>=f)return g}return null},this.getFoldedRowCount=function(f,m){for(var h=this.$foldData,p=m-f+1,g=0;g<h.length;g++){var b=h[g],v=b.end.row,y=b.start.row;if(v>=m){y<m&&(y>=f?p-=m-y:p=0);break}else v>=f&&(y>=f?p-=v-y:p-=v-f+1)}return p},this.$addFoldLine=function(f){return this.$foldData.push(f),this.$foldData.sort(function(m,h){return m.start.row-h.start.row}),f},this.addFold=function(f,m){var h=this.$foldData,p=!1,g;f instanceof l?g=f:(g=new l(m,f),g.collapseChildren=m.collapseChildren),this.$clipRangeToDocument(g.range);var b=g.start.row,v=g.start.column,y=g.end.row,C=g.end.column,E=this.getFoldAt(b,v,1),A=this.getFoldAt(y,C,-1);if(E&&A==E)return E.addSubFold(g);E&&!E.range.isStart(b,v)&&this.removeFold(E),A&&!A.range.isEnd(y,C)&&this.removeFold(A);var k=this.getFoldsInRange(g.range);k.length>0&&(this.removeFolds(k),g.collapseChildren||k.forEach(function(I){g.addSubFold(I)}));for(var T=0;T<h.length;T++){var $=h[T];if(y==$.start.row){$.addFold(g),p=!0;break}else if(b==$.end.row){if($.addFold(g),p=!0,!g.sameRow){var S=h[T+1];if(S&&S.start.row==y){$.merge(S);break}}break}else if(y<=$.start.row)break}return p||($=this.$addFoldLine(new s(this.$foldData,g))),this.$useWrapMode?this.$updateWrapData($.start.row,$.start.row):this.$updateRowLengthCache($.start.row,$.start.row),this.$modified=!0,this._signal("changeFold",{data:g,action:"add"}),g},this.addFolds=function(f){f.forEach(function(m){this.addFold(m)},this)},this.removeFold=function(f){var m=f.foldLine,h=m.start.row,p=m.end.row,g=this.$foldData,b=m.folds;if(b.length==1)g.splice(g.indexOf(m),1);else if(m.range.isEnd(f.end.row,f.end.column))b.pop(),m.end.row=b[b.length-1].end.row,m.end.column=b[b.length-1].end.column;else if(m.range.isStart(f.start.row,f.start.column))b.shift(),m.start.row=b[0].start.row,m.start.column=b[0].start.column;else if(f.sameRow)b.splice(b.indexOf(f),1);else{var v=m.split(f.start.row,f.start.column);b=v.folds,b.shift(),v.start.row=b[0].start.row,v.start.column=b[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(h,p):this.$updateRowLengthCache(h,p)),this.$modified=!0,this._signal("changeFold",{data:f,action:"remove"})},this.removeFolds=function(f){for(var m=[],h=0;h<f.length;h++)m.push(f[h]);m.forEach(function(p){this.removeFold(p)},this),this.$modified=!0},this.expandFold=function(f){this.removeFold(f),f.subFolds.forEach(function(m){f.restoreRange(m),this.addFold(m)},this),f.collapseChildren>0&&this.foldAll(f.start.row+1,f.end.row,f.collapseChildren-1),f.subFolds=[]},this.expandFolds=function(f){f.forEach(function(m){this.expandFold(m)},this)},this.unfold=function(f,m){var h,p;if(f==null)h=new a(0,0,this.getLength(),0),m==null&&(m=!0);else if(typeof f=="number")h=new a(f,0,f,this.getLine(f).length);else if("row"in f)h=a.fromPoints(f,f);else{if(Array.isArray(f))return p=[],f.forEach(function(b){p=p.concat(this.unfold(b))},this),p;h=f}p=this.getFoldsInRangeList(h);for(var g=p;p.length==1&&a.comparePoints(p[0].start,h.start)<0&&a.comparePoints(p[0].end,h.end)>0;)this.expandFolds(p),p=this.getFoldsInRangeList(h);if(m!=!1?this.removeFolds(p):this.expandFolds(p),g.length)return g},this.isRowFolded=function(f,m){return!!this.getFoldLine(f,m)},this.getRowFoldEnd=function(f,m){var h=this.getFoldLine(f,m);return h?h.end.row:f},this.getRowFoldStart=function(f,m){var h=this.getFoldLine(f,m);return h?h.start.row:f},this.getFoldDisplayLine=function(f,m,h,p,g){p==null&&(p=f.start.row),g==null&&(g=0),m==null&&(m=f.end.row),h==null&&(h=this.getLine(m).length);var b=this.doc,v="";return f.walk(function(y,C,E,A){if(!(C<p)){if(C==p){if(E<g)return;A=Math.max(g,A)}y!=null?v+=y:v+=b.getLine(C).substring(A,E)}},m,h),v},this.getDisplayLine=function(f,m,h,p){var g=this.getFoldLine(f);if(g)return this.getFoldDisplayLine(g,f,m,h,p);var b;return b=this.doc.getLine(f),b.substring(p||0,m||b.length)},this.$cloneFoldData=function(){var f=[];return f=this.$foldData.map(function(m){var h=m.folds.map(function(p){return p.clone()});return new s(f,h)}),f},this.toggleFold=function(f){var m=this.selection,h=m.getRange(),p,g;if(h.isEmpty()){var b=h.start;if(p=this.getFoldAt(b.row,b.column),p){this.expandFold(p);return}else(g=this.findMatchingBracket(b))?h.comparePoint(g)==1?h.end=g:(h.start=g,h.start.column++,h.end.column--):(g=this.findMatchingBracket({row:b.row,column:b.column+1}))?(h.comparePoint(g)==1?h.end=g:h.start=g,h.start.column++):h=this.getCommentFoldRange(b.row,b.column)||h}else{var v=this.getFoldsInRange(h);if(f&&v.length){this.expandFolds(v);return}else v.length==1&&(p=v[0])}if(p||(p=this.getFoldAt(h.start.row,h.start.column)),p&&p.range.toString()==h.toString()){this.expandFold(p);return}var y="...";if(!h.isMultiLine()){if(y=this.getTextRange(h),y.length<4)return;y=y.trim().substring(0,2)+".."}this.addFold(y,h)},this.getCommentFoldRange=function(f,m,h){var p=new u(this,f,m),g=p.getCurrentToken(),b=g&&g.type;if(g&&/^comment|string/.test(b)){b=b.match(/comment|string/)[0],b=="comment"&&(b+="|doc-start");var v=new RegExp(b),y=new a;if(h!=1){do g=p.stepBackward();while(g&&v.test(g.type));p.stepForward()}if(y.start.row=p.getCurrentTokenRow(),y.start.column=p.getCurrentTokenColumn()+2,p=new u(this,f,m),h!=-1){var C=-1;do if(g=p.stepForward(),C==-1){var E=this.getState(p.$row);v.test(E)||(C=p.$row)}else if(p.$row>C)break;while(g&&v.test(g.type));g=p.stepBackward()}else g=p.getCurrentToken();return y.end.row=p.getCurrentTokenRow(),y.end.column=p.getCurrentTokenColumn()+g.value.length-2,y}},this.foldAll=function(f,m,h,p){h==null&&(h=1e5);var g=this.foldWidgets;if(g){m=m||this.getLength(),f=f||0;for(var b=f;b<m;b++)if(g[b]==null&&(g[b]=this.getFoldWidget(b)),g[b]=="start"&&!(p&&!p(b))){var v=this.getFoldWidgetRange(b);v&&v.isMultiLine()&&v.end.row<=m&&v.start.row>=f&&(b=v.end.row,v.collapseChildren=h,this.addFold("...",v))}}},this.foldToLevel=function(f){for(this.foldAll();f-- >0;)this.unfold(null,!1)},this.foldAllComments=function(){var f=this;this.foldAll(null,null,null,function(m){for(var h=f.getTokens(m),p=0;p<h.length;p++){var g=h[p];if(!(g.type=="text"&&/^\s+$/.test(g.value)))return!!/comment/.test(g.type)}})},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(f){if(!this.$foldStyles[f])throw new Error("invalid fold style: "+f+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=f){this.$foldStyle=f,f=="manual"&&this.unfold();var m=this.$foldMode;this.$setFolding(null),this.$setFolding(m)}},this.$setFolding=function(f){if(this.$foldMode!=f){if(this.$foldMode=f,this.off("change",this.$updateFoldWidgets),this.off("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets),this._signal("changeAnnotation"),!f||this.$foldStyle=="manual"){this.foldWidgets=null;return}this.foldWidgets=[],this.getFoldWidget=f.getFoldWidget.bind(f,this,this.$foldStyle),this.getFoldWidgetRange=f.getFoldWidgetRange.bind(f,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.$tokenizerUpdateFoldWidgets=this.tokenizerUpdateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets),this.on("tokenizerUpdate",this.$tokenizerUpdateFoldWidgets)}},this.getParentFoldRangeData=function(f,m){var h=this.foldWidgets;if(!h||m&&h[f])return{};for(var p=f-1,g;p>=0;){var b=h[p];if(b==null&&(b=h[p]=this.getFoldWidget(p)),b=="start"){var v=this.getFoldWidgetRange(p);if(g||(g=v),v&&v.end.row>=f)break}p--}return{range:p!==-1&&v,firstRange:g}},this.onFoldWidgetClick=function(f,m){m=m.domEvent;var h={children:m.shiftKey,all:m.ctrlKey||m.metaKey,siblings:m.altKey},p=this.$toggleFoldWidget(f,h);if(!p){var g=m.target||m.srcElement;g&&/ace_fold-widget/.test(g.className)&&(g.className+=" ace_invalid")}},this.$toggleFoldWidget=function(f,m){if(this.getFoldWidget){var h=this.getFoldWidget(f),p=this.getLine(f),g=h==="end"?-1:1,b=this.getFoldAt(f,g===-1?0:p.length,g);if(b)return m.children||m.all?this.removeFold(b):this.expandFold(b),b;var v=this.getFoldWidgetRange(f,!0);if(v&&!v.isMultiLine()&&(b=this.getFoldAt(v.start.row,v.start.column,1),b&&v.isEqual(b.range)))return this.removeFold(b),b;if(m.siblings){var y=this.getParentFoldRangeData(f);if(y.range)var C=y.range.start.row+1,E=y.range.end.row;this.foldAll(C,E,m.all?1e4:0)}else m.children?(E=v?v.end.row:this.getLength(),this.foldAll(f+1,E,m.all?1e4:0)):v&&(m.all&&(v.collapseChildren=1e4),this.addFold("...",v));return v}},this.toggleFoldWidget=function(f){var m=this.selection.getCursor().row;m=this.getRowFoldStart(m);var h=this.$toggleFoldWidget(m,{});if(!h){var p=this.getParentFoldRangeData(m,!0);if(h=p.range||p.firstRange,h){m=h.start.row;var g=this.getFoldAt(m,this.getLine(m).length,1);g?this.removeFold(g):this.addFold("...",h)}}},this.updateFoldWidgets=function(f){var m=f.start.row,h=f.end.row-m;if(h===0)this.foldWidgets[m]=null;else if(f.action=="remove")this.foldWidgets.splice(m,h+1,null);else{var p=Array(h+1);p.unshift(m,1),this.foldWidgets.splice.apply(this.foldWidgets,p)}},this.tokenizerUpdateFoldWidgets=function(f){var m=f.data;m.first!=m.last&&this.foldWidgets.length>m.first&&this.foldWidgets.splice(m.first,this.foldWidgets.length)}}n.Folding=d}),ace.define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(t,n,r){var a=t("../token_iterator").TokenIterator,s=t("../range").Range;function l(){this.findMatchingBracket=function(u,d){if(u.column==0)return null;var f=d||this.getLine(u.row).charAt(u.column-1);if(f=="")return null;var m=f.match(/([\(\[\{])|([\)\]\}])/);return m?m[1]?this.$findClosingBracket(m[1],u):this.$findOpeningBracket(m[2],u):null},this.getBracketRange=function(u){var d=this.getLine(u.row),f=!0,m,h=d.charAt(u.column-1),p=h&&h.match(/([\(\[\{])|([\)\]\}])/);if(p||(h=d.charAt(u.column),u={row:u.row,column:u.column+1},p=h&&h.match(/([\(\[\{])|([\)\]\}])/),f=!1),!p)return null;if(p[1]){var g=this.$findClosingBracket(p[1],u);if(!g)return null;m=s.fromPoints(u,g),f||(m.end.column++,m.start.column--),m.cursor=m.end}else{var g=this.$findOpeningBracket(p[2],u);if(!g)return null;m=s.fromPoints(g,u),f||(m.start.column++,m.end.column--),m.cursor=m.start}return m},this.getMatchingBracketRanges=function(u){var d=this.getLine(u.row),f=d.charAt(u.column-1),m=f&&f.match(/([\(\[\{])|([\)\]\}])/);if(m||(f=d.charAt(u.column),u={row:u.row,column:u.column+1},m=f&&f.match(/([\(\[\{])|([\)\]\}])/)),!m)return null;var h=new s(u.row,u.column-1,u.row,u.column),p=m[1]?this.$findClosingBracket(m[1],u):this.$findOpeningBracket(m[2],u);if(!p)return[h];var g=new s(p.row,p.column,p.row,p.column+1);return[h,g]},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{","<":">",">":"<"},this.$findOpeningBracket=function(u,d,f){var m=this.$brackets[u],h=1,p=new a(this,d.row,d.column),g=p.getCurrentToken();if(g||(g=p.stepForward()),!!g){f||(f=new RegExp("(\\.?"+g.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end)\b/,"(?:start|begin|end)")+")+"));for(var b=d.column-p.getCurrentTokenColumn()-2,v=g.value;;){for(;b>=0;){var y=v.charAt(b);if(y==m){if(h-=1,h==0)return{row:p.getCurrentTokenRow(),column:b+p.getCurrentTokenColumn()}}else y==u&&(h+=1);b-=1}do g=p.stepBackward();while(g&&!f.test(g.type));if(g==null)break;v=g.value,b=v.length-1}return null}},this.$findClosingBracket=function(u,d,f){var m=this.$brackets[u],h=1,p=new a(this,d.row,d.column),g=p.getCurrentToken();if(g||(g=p.stepForward()),!!g){f||(f=new RegExp("(\\.?"+g.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:start|begin)\b/,"(?:start|begin|end)")+")+"));for(var b=d.column-p.getCurrentTokenColumn();;){for(var v=g.value,y=v.length;b<y;){var C=v.charAt(b);if(C==m){if(h-=1,h==0)return{row:p.getCurrentTokenRow(),column:b+p.getCurrentTokenColumn()}}else C==u&&(h+=1);b+=1}do g=p.stepForward();while(g&&!f.test(g.type));if(g==null)break;b=0}return null}}}n.BracketMatch=l}),ace.define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/bidihandler","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/lang"),l=t("./bidihandler").BidiHandler,u=t("./config"),d=t("./lib/event_emitter").EventEmitter,f=t("./selection").Selection,m=t("./mode/text").Mode,h=t("./range").Range,p=t("./document").Document,g=t("./background_tokenizer").BackgroundTokenizer,b=t("./search_highlight").SearchHighlight,v=function(y,C){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.id="session"+ ++v.$uid,this.$foldData.toString=function(){return this.join(`
`)},this.bgTokenizer=new g(new m().getTokenizer(),this);var E=this;this.bgTokenizer.on("update",function(A){E._signal("tokenizerUpdate",A)}),this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),(typeof y!="object"||!y.getLine)&&(y=new p(y)),this.setDocument(y),this.selection=new f(this),this.$bidiHandler=new l(this),u.resetOptions(this),this.setMode(C),u._signal("session",this),this.destroyed=!1};v.$uid=0,(function(){a.implement(this,d),this.setDocument=function(R){this.doc&&this.doc.off("change",this.$onChange),this.doc=R,R.on("change",this.$onChange,!0),this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(R){if(!R){this.$docRowCache=[],this.$screenRowCache=[];return}var N=this.$docRowCache.length,M=this.$getRowCacheIndex(this.$docRowCache,R)+1;N>M&&(this.$docRowCache.splice(M,N),this.$screenRowCache.splice(M,N))},this.$getRowCacheIndex=function(R,N){for(var M=0,F=R.length-1;M<=F;){var D=M+F>>1,x=R[D];if(N>x)M=D+1;else if(N<x)F=D-1;else return D}return M-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.destroyed||this.bgTokenizer.start(0)},this.onChangeFold=function(R){var N=R.data;this.$resetRowCache(N.start.row)},this.onChange=function(R){this.$modified=!0,this.$bidiHandler.onChange(R),this.$resetRowCache(R.start.row);var N=this.$updateInternalDataOnChange(R);!this.$fromUndo&&this.$undoManager&&(N&&N.length&&(this.$undoManager.add({action:"removeFolds",folds:N},this.mergeUndoDeltas),this.mergeUndoDeltas=!0),this.$undoManager.add(R,this.mergeUndoDeltas),this.mergeUndoDeltas=!0,this.$informUndoManager.schedule()),this.bgTokenizer.$updateOnChange(R),this._signal("change",R)},this.setValue=function(R){this.doc.setValue(R),this.selection.moveTo(0,0),this.$resetRowCache(0),this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(R){return this.bgTokenizer.getState(R)},this.getTokens=function(R){return this.bgTokenizer.getTokens(R)},this.getTokenAt=function(R,N){var M=this.bgTokenizer.getTokens(R),F,D=0;if(N==null){var x=M.length-1;D=this.getLine(R).length}else for(var x=0;x<M.length&&(D+=M[x].value.length,!(D>=N));x++);return F=M[x],F?(F.index=x,F.start=D-F.value.length,F):null},this.setUndoManager=function(R){if(this.$undoManager=R,this.$informUndoManager&&this.$informUndoManager.cancel(),R){var N=this;R.addSession(this),this.$syncInformUndoManager=function(){N.$informUndoManager.cancel(),N.mergeUndoDeltas=!1},this.$informUndoManager=s.delayedCall(this.$syncInformUndoManager)}else this.$syncInformUndoManager=function(){}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},hasUndo:function(){},hasRedo:function(){},reset:function(){},add:function(){},addSelection:function(){},startNewGroup:function(){},addSession:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?s.stringRepeat(" ",this.getTabSize()):"	"},this.setUseSoftTabs=function(R){this.setOption("useSoftTabs",R)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(R){this.setOption("tabSize",R)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(R){return this.$useSoftTabs&&R.column%this.$tabSize===0},this.setNavigateWithinSoftTabs=function(R){this.setOption("navigateWithinSoftTabs",R)},this.getNavigateWithinSoftTabs=function(){return this.$navigateWithinSoftTabs},this.$overwrite=!1,this.setOverwrite=function(R){this.setOption("overwrite",R)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(R,N){this.$decorations[R]||(this.$decorations[R]=""),this.$decorations[R]+=" "+N,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(R,N){this.$decorations[R]=(this.$decorations[R]||"").replace(" "+N,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(R){this.$breakpoints=[];for(var N=0;N<R.length;N++)this.$breakpoints[R[N]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(R,N){N===void 0&&(N="ace_breakpoint"),N?this.$breakpoints[R]=N:delete this.$breakpoints[R],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(R){delete this.$breakpoints[R],this._signal("changeBreakpoint",{})},this.addMarker=function(R,N,M,F){var D=this.$markerId++,x={range:R,type:M||"line",renderer:typeof M=="function"?M:null,clazz:N,inFront:!!F,id:D};return F?(this.$frontMarkers[D]=x,this._signal("changeFrontMarker")):(this.$backMarkers[D]=x,this._signal("changeBackMarker")),D},this.addDynamicMarker=function(R,N){if(R.update){var M=this.$markerId++;return R.id=M,R.inFront=!!N,N?(this.$frontMarkers[M]=R,this._signal("changeFrontMarker")):(this.$backMarkers[M]=R,this._signal("changeBackMarker")),R}},this.removeMarker=function(R){var N=this.$frontMarkers[R]||this.$backMarkers[R];if(N){var M=N.inFront?this.$frontMarkers:this.$backMarkers;delete M[R],this._signal(N.inFront?"changeFrontMarker":"changeBackMarker")}},this.getMarkers=function(R){return R?this.$frontMarkers:this.$backMarkers},this.highlight=function(R){if(!this.$searchHighlight){var N=new b(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(N)}this.$searchHighlight.setRegexp(R)},this.highlightLines=function(R,N,M,F){typeof N!="number"&&(M=N,N=R),M||(M="ace_step");var D=new h(R,0,N,1/0);return D.id=this.addMarker(D,M,"fullLine",F),D},this.setAnnotations=function(R){this.$annotations=R,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(R){var N=R.match(/^.*?(\r?\n)/m);N?this.$autoNewLine=N[1]:this.$autoNewLine=`
`},this.getWordRange=function(R,N){var M=this.getLine(R),F=!1;if(N>0&&(F=!!M.charAt(N-1).match(this.tokenRe)),F||(F=!!M.charAt(N).match(this.tokenRe)),F)var D=this.tokenRe;else if(/^\s+$/.test(M.slice(N-1,N+1)))var D=/\s/;else var D=this.nonTokenRe;var x=N;if(x>0){do x--;while(x>=0&&M.charAt(x).match(D));x++}for(var B=N;B<M.length&&M.charAt(B).match(D);)B++;return new h(R,x,R,B)},this.getAWordRange=function(R,N){for(var M=this.getWordRange(R,N),F=this.getLine(M.end.row);F.charAt(M.end.column).match(/[ \t]/);)M.end.column+=1;return M},this.setNewLineMode=function(R){this.doc.setNewLineMode(R)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(R){this.setOption("useWorker",R)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(R){var N=R.data;this.bgTokenizer.start(N.first),this._signal("tokenizerUpdate",R)},this.$modes=u.$modes,this.$mode=null,this.$modeId=null,this.setMode=function(R,N){if(R&&typeof R=="object"){if(R.getTokenizer)return this.$onChangeMode(R);var M=R,F=M.path}else F=R||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new m),this.$modes[F]&&!M){this.$onChangeMode(this.$modes[F]),N&&N();return}this.$modeId=F,u.loadModule(["mode",F],(function(D){if(this.$modeId!==F)return N&&N();this.$modes[F]&&!M?this.$onChangeMode(this.$modes[F]):D&&D.Mode&&(D=new D.Mode(M),M||(this.$modes[F]=D,D.$id=F),this.$onChangeMode(D)),N&&N()}).bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(R,N){if(N||(this.$modeId=R.$id),this.$mode!==R){var M=this.$mode;this.$mode=R,this.$stopWorker(),this.$useWorker&&this.$startWorker();var F=R.getTokenizer();if(F.on!==void 0){var D=this.onReloadTokenizer.bind(this);F.on("update",D)}this.bgTokenizer.setTokenizer(F),this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=R.tokenRe,this.nonTokenRe=R.nonTokenRe,N||(R.attachToSession&&R.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(R.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode",{oldMode:M,mode:R}))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(R){u.warn("Could not load worker",R),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(R){this.$scrollTop===R||isNaN(R)||(this.$scrollTop=R,this._signal("changeScrollTop",R))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(R){this.$scrollLeft===R||isNaN(R)||(this.$scrollLeft=R,this._signal("changeScrollLeft",R))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(this.lineWidgetsWidth!=null)return this.lineWidgetsWidth;var R=0;return this.lineWidgets.forEach(function(N){N&&N.screenWidth>R&&(R=N.screenWidth)}),this.lineWidgetWidth=R},this.$computeWidth=function(R){if(this.$modified||R){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var N=this.doc.getAllLines(),M=this.$rowLengthCache,F=0,D=0,x=this.$foldData[D],B=x?x.start.row:1/0,K=N.length,U=0;U<K;U++){if(U>B){if(U=x.end.row+1,U>=K)break;x=this.$foldData[D++],B=x?x.start.row:1/0}M[U]==null&&(M[U]=this.$getStringScreenWidth(N[U])[0]),M[U]>F&&(F=M[U])}this.screenWidth=F}},this.getLine=function(R){return this.doc.getLine(R)},this.getLines=function(R,N){return this.doc.getLines(R,N)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(R){return this.doc.getTextRange(R||this.selection.getRange())},this.insert=function(R,N){return this.doc.insert(R,N)},this.remove=function(R){return this.doc.remove(R)},this.removeFullLines=function(R,N){return this.doc.removeFullLines(R,N)},this.undoChanges=function(R,N){if(R.length){this.$fromUndo=!0;for(var M=R.length-1;M!=-1;M--){var F=R[M];F.action=="insert"||F.action=="remove"?this.doc.revertDelta(F):F.folds&&this.addFolds(F.folds)}!N&&this.$undoSelect&&(R.selectionBefore?this.selection.fromJSON(R.selectionBefore):this.selection.setRange(this.$getUndoSelection(R,!0))),this.$fromUndo=!1}},this.redoChanges=function(R,N){if(R.length){this.$fromUndo=!0;for(var M=0;M<R.length;M++){var F=R[M];(F.action=="insert"||F.action=="remove")&&this.doc.$safeApplyDelta(F)}!N&&this.$undoSelect&&(R.selectionAfter?this.selection.fromJSON(R.selectionAfter):this.selection.setRange(this.$getUndoSelection(R,!1))),this.$fromUndo=!1}},this.setUndoSelect=function(R){this.$undoSelect=R},this.$getUndoSelection=function(R,N){function M(K){return N?K.action!=="insert":K.action==="insert"}for(var F,D,x=0;x<R.length;x++){var B=R[x];if(B.start){if(!F){M(B)?F=h.fromPoints(B.start,B.end):F=h.fromPoints(B.start,B.start);continue}M(B)?(D=B.start,F.compare(D.row,D.column)==-1&&F.setStart(D),D=B.end,F.compare(D.row,D.column)==1&&F.setEnd(D)):(D=B.start,F.compare(D.row,D.column)==-1&&(F=h.fromPoints(B.start,B.start)))}}return F},this.replace=function(R,N){return this.doc.replace(R,N)},this.moveText=function(R,N,M){var F=this.getTextRange(R),D=this.getFoldsInRange(R),x=h.fromPoints(N,N);if(!M){this.remove(R);var B=R.start.row-R.end.row,K=B?-R.end.column:R.start.column-R.end.column;K&&(x.start.row==R.end.row&&x.start.column>R.end.column&&(x.start.column+=K),x.end.row==R.end.row&&x.end.column>R.end.column&&(x.end.column+=K)),B&&x.start.row>=R.end.row&&(x.start.row+=B,x.end.row+=B)}if(x.end=this.insert(x.start,F),D.length){var U=R.start,G=x.start,B=G.row-U.row,K=G.column-U.column;this.addFolds(D.map(function(H){return H=H.clone(),H.start.row==U.row&&(H.start.column+=K),H.end.row==U.row&&(H.end.column+=K),H.start.row+=B,H.end.row+=B,H}))}return x},this.indentRows=function(R,N,M){M=M.replace(/\t/g,this.getTabString());for(var F=R;F<=N;F++)this.doc.insertInLine({row:F,column:0},M)},this.outdentRows=function(R){for(var N=R.collapseRows(),M=new h(0,0,0,0),F=this.getTabSize(),D=N.start.row;D<=N.end.row;++D){var x=this.getLine(D);M.start.row=D,M.end.row=D;for(var B=0;B<F&&x.charAt(B)==" ";++B);B<F&&x.charAt(B)=="	"?(M.start.column=B,M.end.column=B+1):(M.start.column=0,M.end.column=B),this.remove(M)}},this.$moveLines=function(R,N,M){if(R=this.getRowFoldStart(R),N=this.getRowFoldEnd(N),M<0){var F=this.getRowFoldStart(R+M);if(F<0)return 0;var D=F-R}else if(M>0){var F=this.getRowFoldEnd(N+M);if(F>this.doc.getLength()-1)return 0;var D=F-N}else{R=this.$clipRowToDocument(R),N=this.$clipRowToDocument(N);var D=N-R+1}var x=new h(R,0,N,Number.MAX_VALUE),B=this.getFoldsInRange(x).map(function(U){return U=U.clone(),U.start.row+=D,U.end.row+=D,U}),K=M==0?this.doc.getLines(R,N):this.doc.removeFullLines(R,N);return this.doc.insertFullLines(R+D,K),B.length&&this.addFolds(B),D},this.moveLinesUp=function(R,N){return this.$moveLines(R,N,-1)},this.moveLinesDown=function(R,N){return this.$moveLines(R,N,1)},this.duplicateLines=function(R,N){return this.$moveLines(R,N,0)},this.$clipRowToDocument=function(R){return Math.max(0,Math.min(R,this.doc.getLength()-1))},this.$clipColumnToRow=function(R,N){return N<0?0:Math.min(this.doc.getLine(R).length,N)},this.$clipPositionToDocument=function(R,N){if(N=Math.max(0,N),R<0)R=0,N=0;else{var M=this.doc.getLength();R>=M?(R=M-1,N=this.doc.getLine(M-1).length):N=Math.min(this.doc.getLine(R).length,N)}return{row:R,column:N}},this.$clipRangeToDocument=function(R){R.start.row<0?(R.start.row=0,R.start.column=0):R.start.column=this.$clipColumnToRow(R.start.row,R.start.column);var N=this.doc.getLength()-1;return R.end.row>N?(R.end.row=N,R.end.column=this.doc.getLine(N).length):R.end.column=this.$clipColumnToRow(R.end.row,R.end.column),R},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(R){if(R!=this.$useWrapMode){if(this.$useWrapMode=R,this.$modified=!0,this.$resetRowCache(0),R){var N=this.getLength();this.$wrapData=Array(N),this.$updateWrapData(0,N-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(R,N){(this.$wrapLimitRange.min!==R||this.$wrapLimitRange.max!==N)&&(this.$wrapLimitRange={min:R,max:N},this.$modified=!0,this.$bidiHandler.markAsDirty(),this.$useWrapMode&&this._signal("changeWrapMode"))},this.adjustWrapLimit=function(R,N){var M=this.$wrapLimitRange;M.max<0&&(M={min:N,max:N});var F=this.$constrainWrapLimit(R,M.min,M.max);return F!=this.$wrapLimit&&F>1?(this.$wrapLimit=F,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0):!1},this.$constrainWrapLimit=function(R,N,M){return N&&(R=Math.max(N,R)),M&&(R=Math.min(M,R)),R},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(R){this.setWrapLimitRange(R,R)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(R){var N=this.$useWrapMode,M=R.action,F=R.start,D=R.end,x=F.row,B=D.row,K=B-x,U=null;if(this.$updating=!0,K!=0)if(M==="remove"){this[N?"$wrapData":"$rowLengthCache"].splice(x,K);var G=this.$foldData;U=this.getFoldsInRange(R),this.removeFolds(U);var W=this.getFoldLine(D.row),q=0;if(W){W.addRemoveChars(D.row,D.column,F.column-D.column),W.shiftRow(-K);var H=this.getFoldLine(x);H&&H!==W&&(H.merge(W),W=H),q=G.indexOf(W)+1}for(q;q<G.length;q++){var W=G[q];W.start.row>=D.row&&W.shiftRow(-K)}B=x}else{var z=Array(K);z.unshift(x,0);var Y=N?this.$wrapData:this.$rowLengthCache;Y.splice.apply(Y,z);var G=this.$foldData,W=this.getFoldLine(x),q=0;if(W){var V=W.range.compareInside(F.row,F.column);V==0?(W=W.split(F.row,F.column),W&&(W.shiftRow(K),W.addRemoveChars(B,0,D.column-F.column))):V==-1&&(W.addRemoveChars(x,0,D.column-F.column),W.shiftRow(K)),q=G.indexOf(W)+1}for(q;q<G.length;q++){var W=G[q];W.start.row>=x&&W.shiftRow(K)}}else{K=Math.abs(R.start.column-R.end.column),M==="remove"&&(U=this.getFoldsInRange(R),this.removeFolds(U),K=-K);var W=this.getFoldLine(x);W&&W.addRemoveChars(x,F.column,K)}return N&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,N?this.$updateWrapData(x,B):this.$updateRowLengthCache(x,B),U},this.$updateRowLengthCache=function(R,N,M){this.$rowLengthCache[R]=null,this.$rowLengthCache[N]=null},this.$updateWrapData=function(R,N){var M=this.doc.getAllLines(),F=this.getTabSize(),D=this.$wrapData,x=this.$wrapLimit,B,K,U=R;for(N=Math.min(N,M.length-1);U<=N;)K=this.getFoldLine(U,K),K?(B=[],K.walk((function(G,W,q,H){var z;if(G!=null){z=this.$getDisplayTokens(G,B.length),z[0]=E;for(var Y=1;Y<z.length;Y++)z[Y]=A}else z=this.$getDisplayTokens(M[W].substring(H,q),B.length);B=B.concat(z)}).bind(this),K.end.row,M[K.end.row].length+1),D[K.start.row]=this.$computeWrapSplits(B,x,F),U=K.end.row+1):(B=this.$getDisplayTokens(M[U]),D[U]=this.$computeWrapSplits(B,x,F),U++)};var y=1,C=2,E=3,A=4,k=9,T=10,$=11,S=12;this.$computeWrapSplits=function(R,N,M){if(R.length==0)return[];var F=[],D=R.length,x=0,B=0,K=this.$wrapAsCode,U=this.$indentedSoftWrap,G=N<=Math.max(2*M,8)||U===!1?0:Math.floor(N/2);function W(){var V=0;if(G===0)return V;if(U)for(var J=0;J<R.length;J++){var Q=R[J];if(Q==T)V+=1;else if(Q==$)V+=M;else{if(Q==S)continue;break}}return K&&U!==!1&&(V+=M),Math.min(V,G)}function q(V){for(var J=V-x,Q=x;Q<V;Q++){var X=R[Q];(X===12||X===2)&&(J-=1)}F.length||(H=W(),F.indent=H),B+=J,F.push(B),x=V}for(var H=0;D-x>N-H;){var z=x+N-H;if(R[z-1]>=T&&R[z]>=T){q(z);continue}if(R[z]==E||R[z]==A){for(z;z!=x-1&&R[z]!=E;z--);if(z>x){q(z);continue}for(z=x+N,z;z<R.length&&R[z]==A;z++);if(z==R.length)break;q(z);continue}for(var Y=Math.max(z-(N-(N>>2)),x-1);z>Y&&R[z]<E;)z--;if(K){for(;z>Y&&R[z]<E;)z--;for(;z>Y&&R[z]==k;)z--}else for(;z>Y&&R[z]<T;)z--;if(z>Y){q(++z);continue}z=x+N,R[z]==C&&z--,q(z-H)}return F},this.$getDisplayTokens=function(R,N){var M=[],F;N=N||0;for(var D=0;D<R.length;D++){var x=R.charCodeAt(D);if(x==9){F=this.getScreenTabSize(M.length+N),M.push($);for(var B=1;B<F;B++)M.push(S)}else x==32?M.push(T):x>39&&x<48||x>57&&x<64?M.push(k):x>=4352&&I(x)?M.push(y,C):M.push(y)}return M},this.$getStringScreenWidth=function(R,N,M){if(N==0)return[0,0];N==null&&(N=1/0),M=M||0;var F,D;for(D=0;D<R.length&&(F=R.charCodeAt(D),F==9?M+=this.getScreenTabSize(M):F>=4352&&I(F)?M+=2:M+=1,!(M>N));D++);return[M,D]},this.lineWidgets=null,this.getRowLength=function(R){var N=1;return this.lineWidgets&&(N+=this.lineWidgets[R]&&this.lineWidgets[R].rowCount||0),!this.$useWrapMode||!this.$wrapData[R]?N:this.$wrapData[R].length+N},this.getRowLineCount=function(R){return!this.$useWrapMode||!this.$wrapData[R]?1:this.$wrapData[R].length+1},this.getRowWrapIndent=function(R){if(this.$useWrapMode){var N=this.screenToDocumentPosition(R,Number.MAX_VALUE),M=this.$wrapData[N.row];return M.length&&M[0]<N.column?M.indent:0}else return 0},this.getScreenLastRowColumn=function(R){var N=this.screenToDocumentPosition(R,Number.MAX_VALUE);return this.documentToScreenColumn(N.row,N.column)},this.getDocumentLastRowColumn=function(R,N){var M=this.documentToScreenRow(R,N);return this.getScreenLastRowColumn(M)},this.getDocumentLastRowColumnPosition=function(R,N){var M=this.documentToScreenRow(R,N);return this.screenToDocumentPosition(M,Number.MAX_VALUE/10)},this.getRowSplitData=function(R){if(this.$useWrapMode)return this.$wrapData[R]},this.getScreenTabSize=function(R){return this.$tabSize-(R%this.$tabSize|0)},this.screenToDocumentRow=function(R,N){return this.screenToDocumentPosition(R,N).row},this.screenToDocumentColumn=function(R,N){return this.screenToDocumentPosition(R,N).column},this.screenToDocumentPosition=function(R,N,M){if(R<0)return{row:0,column:0};var F,D=0,x=0,B,K=0,U=0,G=this.$screenRowCache,W=this.$getRowCacheIndex(G,R),q=G.length;if(q&&W>=0)var K=G[W],D=this.$docRowCache[W],H=R>G[q-1];else var H=!q;for(var z=this.getLength()-1,Y=this.getNextFoldLine(D),V=Y?Y.start.row:1/0;K<=R&&(U=this.getRowLength(D),!(K+U>R||D>=z));)K+=U,D++,D>V&&(D=Y.end.row+1,Y=this.getNextFoldLine(D,Y),V=Y?Y.start.row:1/0),H&&(this.$docRowCache.push(D),this.$screenRowCache.push(K));if(Y&&Y.start.row<=D)F=this.getFoldDisplayLine(Y),D=Y.start.row;else{if(K+U<=R||D>z)return{row:z,column:this.getLine(z).length};F=this.getLine(D),Y=null}var J=0,Q=Math.floor(R-K);if(this.$useWrapMode){var X=this.$wrapData[D];X&&(B=X[Q],Q>0&&X.length&&(J=X.indent,x=X[Q-1]||X[X.length-1],F=F.substring(x)))}return M!==void 0&&this.$bidiHandler.isBidiRow(K+Q,D,Q)&&(N=this.$bidiHandler.offsetToCol(M)),x+=this.$getStringScreenWidth(F,N-J)[1],this.$useWrapMode&&x>=B&&(x=B-1),Y?Y.idxToPosition(x):{row:D,column:x}},this.documentToScreenPosition=function(R,N){if(typeof N>"u")var M=this.$clipPositionToDocument(R.row,R.column);else M=this.$clipPositionToDocument(R,N);R=M.row,N=M.column;var F=0,D=null,x=null;x=this.getFoldAt(R,N,1),x&&(R=x.start.row,N=x.start.column);var B,K=0,U=this.$docRowCache,G=this.$getRowCacheIndex(U,R),W=U.length;if(W&&G>=0)var K=U[G],F=this.$screenRowCache[G],q=R>U[W-1];else var q=!W;for(var H=this.getNextFoldLine(K),z=H?H.start.row:1/0;K<R;){if(K>=z){if(B=H.end.row+1,B>R)break;H=this.getNextFoldLine(B,H),z=H?H.start.row:1/0}else B=K+1;F+=this.getRowLength(K),K=B,q&&(this.$docRowCache.push(K),this.$screenRowCache.push(F))}var Y="";H&&K>=z?(Y=this.getFoldDisplayLine(H,R,N),D=H.start.row):(Y=this.getLine(R).substring(0,N),D=R);var V=0;if(this.$useWrapMode){var J=this.$wrapData[D];if(J){for(var Q=0;Y.length>=J[Q];)F++,Q++;Y=Y.substring(J[Q-1]||0,Y.length),V=Q>0?J.indent:0}}return this.lineWidgets&&this.lineWidgets[K]&&this.lineWidgets[K].rowsAbove&&(F+=this.lineWidgets[K].rowsAbove),{row:F,column:V+this.$getStringScreenWidth(Y)[0]}},this.documentToScreenColumn=function(R,N){return this.documentToScreenPosition(R,N).column},this.documentToScreenRow=function(R,N){return this.documentToScreenPosition(R,N).row},this.getScreenLength=function(){var R=0,N=null;if(this.$useWrapMode)for(var D=this.$wrapData.length,x=0,F=0,N=this.$foldData[F++],B=N?N.start.row:1/0;x<D;){var K=this.$wrapData[x];R+=K?K.length+1:1,x++,x>B&&(x=N.end.row+1,N=this.$foldData[F++],B=N?N.start.row:1/0)}else{R=this.getLength();for(var M=this.$foldData,F=0;F<M.length;F++)N=M[F],R-=N.end.row-N.start.row}return this.lineWidgets&&(R+=this.$getWidgetScreenLength()),R},this.$setFontMetrics=function(R){this.$enableVarChar&&(this.$getStringScreenWidth=function(N,M,F){if(M===0)return[0,0];M||(M=1/0),F=F||0;var D,x;for(x=0;x<N.length&&(D=N.charAt(x),D==="	"?F+=this.getScreenTabSize(F):F+=R.getCharacterWidth(D),!(F>M));x++);return[F,x]})},this.destroy=function(){this.destroyed||(this.bgTokenizer.setDocument(null),this.bgTokenizer.cleanup(),this.destroyed=!0),this.$stopWorker(),this.removeAllListeners(),this.doc&&this.doc.off("change",this.$onChange),this.selection.detach()},this.isFullWidth=I;function I(R){return R<4352?!1:R>=4352&&R<=4447||R>=4515&&R<=4519||R>=4602&&R<=4607||R>=9001&&R<=9002||R>=11904&&R<=11929||R>=11931&&R<=12019||R>=12032&&R<=12245||R>=12272&&R<=12283||R>=12288&&R<=12350||R>=12353&&R<=12438||R>=12441&&R<=12543||R>=12549&&R<=12589||R>=12593&&R<=12686||R>=12688&&R<=12730||R>=12736&&R<=12771||R>=12784&&R<=12830||R>=12832&&R<=12871||R>=12880&&R<=13054||R>=13056&&R<=19903||R>=19968&&R<=42124||R>=42128&&R<=42182||R>=43360&&R<=43388||R>=44032&&R<=55203||R>=55216&&R<=55238||R>=55243&&R<=55291||R>=63744&&R<=64255||R>=65040&&R<=65049||R>=65072&&R<=65106||R>=65108&&R<=65126||R>=65128&&R<=65131||R>=65281&&R<=65376||R>=65504&&R<=65510}}).call(v.prototype),t("./edit_session/folding").Folding.call(v.prototype),t("./edit_session/bracket_match").BracketMatch.call(v.prototype),u.defineOptions(v.prototype,"session",{wrap:{set:function(y){if(!y||y=="off"?y=!1:y=="free"?y=!0:y=="printMargin"?y=-1:typeof y=="string"&&(y=parseInt(y,10)||!1),this.$wrap!=y)if(this.$wrap=y,!y)this.setUseWrapMode(!1);else{var C=typeof y=="number"?y:null;this.setWrapLimitRange(C,C),this.setUseWrapMode(!0)}},get:function(){return this.getUseWrapMode()?this.$wrap==-1?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(y){y=y=="auto"?this.$mode.type!="text":y!="text",y!=this.$wrapAsCode&&(this.$wrapAsCode=y,this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0)))},initialValue:"auto"},indentedSoftWrap:{set:function(){this.$useWrapMode&&(this.$useWrapMode=!1,this.setUseWrapMode(!0))},initialValue:!0},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(y){this.$useWorker=y,this.$stopWorker(),y&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(y){y=parseInt(y),y>0&&this.$tabSize!==y&&(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=y,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},navigateWithinSoftTabs:{initialValue:!1},foldStyle:{set:function(y){this.setFoldStyle(y)},handlesSet:!0},overwrite:{set:function(y){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(y){this.doc.setNewLineMode(y)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(y){this.setMode(y)},get:function(){return this.$modeId},handlesSet:!0}}),n.EditSession=v}),ace.define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(t,n,r){var a=t("./lib/lang"),s=t("./lib/oop"),l=t("./range").Range,u=function(){this.$options={}};(function(){this.set=function(f){return s.mixin(this.$options,f),this},this.getOptions=function(){return a.copyObject(this.$options)},this.setOptions=function(f){this.$options=f},this.find=function(f){var m=this.$options,h=this.$matchIterator(f,m);if(!h)return!1;var p=null;return h.forEach(function(g,b,v,y){return p=new l(g,b,v,y),b==y&&m.start&&m.start.start&&m.skipCurrent!=!1&&p.isEqual(m.start)?(p=null,!1):!0}),p},this.findAll=function(f){var m=this.$options;if(!m.needle)return[];this.$assembleRegExp(m);var h=m.range,p=h?f.getLines(h.start.row,h.end.row):f.doc.getAllLines(),g=[],b=m.re;if(m.$isMultiLine){var v=b.length,y=p.length-v,C;e:for(var E=b.offset||0;E<=y;E++){for(var A=0;A<v;A++)if(p[E+A].search(b[A])==-1)continue e;var k=p[E],T=p[E+v-1],$=k.length-k.match(b[0])[0].length,S=T.match(b[v-1])[0].length;C&&C.end.row===E&&C.end.column>$||(g.push(C=new l(E,$,E+v-1,S)),v>2&&(E=E+v-2))}}else for(var I=0;I<p.length;I++)for(var R=a.getMatchOffsets(p[I],b),A=0;A<R.length;A++){var N=R[A];g.push(new l(I,N.offset,I,N.offset+N.length))}if(h){for(var M=h.start.column,F=h.start.column,I=0,A=g.length-1;I<A&&g[I].start.column<M&&g[I].start.row==h.start.row;)I++;for(;I<A&&g[A].end.column>F&&g[A].end.row==h.end.row;)A--;for(g=g.slice(I,A+1),I=0,A=g.length;I<A;I++)g[I].start.row+=h.start.row,g[I].end.row+=h.start.row}return g},this.replace=function(f,m){var h=this.$options,p=this.$assembleRegExp(h);if(h.$isMultiLine)return m;if(p){var g=p.exec(f);if(!g||g[0].length!=f.length)return null;if(m=f.replace(p,m),h.preserveCase){m=m.split("");for(var b=Math.min(f.length,f.length);b--;){var v=f[b];v&&v.toLowerCase()!=v?m[b]=m[b].toUpperCase():m[b]=m[b].toLowerCase()}m=m.join("")}return m}},this.$assembleRegExp=function(f,m){if(f.needle instanceof RegExp)return f.re=f.needle;var h=f.needle;if(!f.needle)return f.re=!1;f.regExp||(h=a.escapeRegExp(h)),f.wholeWord&&(h=d(h,f));var p=f.caseSensitive?"gm":"gmi";if(f.$isMultiLine=!m&&/[\n\r]/.test(h),f.$isMultiLine)return f.re=this.$assembleMultilineRegExp(h,p);try{var g=new RegExp(h,p)}catch{g=!1}return f.re=g},this.$assembleMultilineRegExp=function(f,m){for(var h=f.replace(/\r\n|\r|\n/g,`$
^`).split(`
`),p=[],g=0;g<h.length;g++)try{p.push(new RegExp(h[g],m))}catch{return!1}return p},this.$matchIterator=function(f,m){var h=this.$assembleRegExp(m);if(!h)return!1;var p=m.backwards==!0,g=m.skipCurrent!=!1,b=m.range,v=m.start;v||(v=b?b[p?"end":"start"]:f.selection.getRange()),v.start&&(v=v[g!=p?"end":"start"]);var y=b?b.start.row:0,C=b?b.end.row:f.getLength()-1;if(p)var E=function(T){var $=v.row;if(!k($,v.column,T)){for($--;$>=y;$--)if(k($,Number.MAX_VALUE,T))return;if(m.wrap!=!1){for($=C,y=v.row;$>=y;$--)if(k($,Number.MAX_VALUE,T))return}}};else var E=function($){var S=v.row;if(!k(S,v.column,$)){for(S=S+1;S<=C;S++)if(k(S,0,$))return;if(m.wrap!=!1){for(S=y,C=v.row;S<=C;S++)if(k(S,0,$))return}}};if(m.$isMultiLine)var A=h.length,k=function(T,$,S){var I=p?T-A+1:T;if(!(I<0||I+A>f.getLength())){var R=f.getLine(I),N=R.search(h[0]);if(!(!p&&N<$||N===-1)){for(var M=1;M<A;M++)if(R=f.getLine(I+M),R.search(h[M])==-1)return;var F=R.match(h[A-1])[0].length;if(!(p&&F>$)&&S(I,N,I+A-1,F))return!0}}};else if(p)var k=function($,S,I){var R=f.getLine($),N=[],M,F=0;for(h.lastIndex=0;M=h.exec(R);){var D=M[0].length;if(F=M.index,!D){if(F>=R.length)break;h.lastIndex=F+=1}if(M.index+D>S)break;N.push(M.index,D)}for(var x=N.length-1;x>=0;x-=2){var B=N[x-1],D=N[x];if(I($,B,$,B+D))return!0}};else var k=function($,S,I){var R=f.getLine($),N,M;for(h.lastIndex=S;M=h.exec(R);){var F=M[0].length;if(N=M.index,I($,N,$,N+F))return!0;if(!F&&(h.lastIndex=N+=1,N>=R.length))return!1}};return{forEach:E}}}).call(u.prototype);function d(f,m){function h(p){return/\w/.test(p)||m.regExp?"\\b":""}return h(f[0])+f+h(f[f.length-1])}n.Search=u}),ace.define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(t,n,r){var a=t("../lib/keys"),s=t("../lib/useragent"),l=a.KEY_MODS;function u(f,m){this.platform=m||(s.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(f),this.$singleCommand=!0}function d(f,m){u.call(this,f,m),this.$singleCommand=!1}d.prototype=u.prototype,(function(){this.addCommand=function(m){this.commands[m.name]&&this.removeCommand(m),this.commands[m.name]=m,m.bindKey&&this._buildKeyHash(m)},this.removeCommand=function(m,h){var p=m&&(typeof m=="string"?m:m.name);m=this.commands[p],h||delete this.commands[p];var g=this.commandKeyBinding;for(var b in g){var v=g[b];if(v==m)delete g[b];else if(Array.isArray(v)){var y=v.indexOf(m);y!=-1&&(v.splice(y,1),v.length==1&&(g[b]=v[0]))}}},this.bindKey=function(m,h,p){if(typeof m=="object"&&m&&(p==null&&(p=m.position),m=m[this.platform]),!!m){if(typeof h=="function")return this.addCommand({exec:h,bindKey:m,name:h.name||m});m.split("|").forEach(function(g){var b="";if(g.indexOf(" ")!=-1){var v=g.split(/\s+/);g=v.pop(),v.forEach(function(E){var A=this.parseKeys(E),k=l[A.hashId]+A.key;b+=(b?" ":"")+k,this._addCommandToBinding(b,"chainKeys")},this),b+=" "}var y=this.parseKeys(g),C=l[y.hashId]+y.key;this._addCommandToBinding(b+C,h,p)},this)}};function f(m){return typeof m=="object"&&m.bindKey&&m.bindKey.position||(m.isDefault?-100:0)}this._addCommandToBinding=function(m,h,p){var g=this.commandKeyBinding,b;if(!h)delete g[m];else if(!g[m]||this.$singleCommand)g[m]=h;else{Array.isArray(g[m])?(b=g[m].indexOf(h))!=-1&&g[m].splice(b,1):g[m]=[g[m]],typeof p!="number"&&(p=f(h));var v=g[m];for(b=0;b<v.length;b++){var y=v[b],C=f(y);if(C>p)break}v.splice(b,0,h)}},this.addCommands=function(m){m&&Object.keys(m).forEach(function(h){var p=m[h];if(p){if(typeof p=="string")return this.bindKey(p,h);typeof p=="function"&&(p={exec:p}),typeof p=="object"&&(p.name||(p.name=h),this.addCommand(p))}},this)},this.removeCommands=function(m){Object.keys(m).forEach(function(h){this.removeCommand(m[h])},this)},this.bindKeys=function(m){Object.keys(m).forEach(function(h){this.bindKey(h,m[h])},this)},this._buildKeyHash=function(m){this.bindKey(m.bindKey,m)},this.parseKeys=function(m){var h=m.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(C){return C}),p=h.pop(),g=a[p];if(a.FUNCTION_KEYS[g])p=a.FUNCTION_KEYS[g].toLowerCase();else if(h.length){if(h.length==1&&h[0]=="shift")return{key:p.toUpperCase(),hashId:-1}}else return{key:p,hashId:-1};for(var b=0,v=h.length;v--;){var y=a.KEY_MODS[h[v]];if(y==null)return typeof console<"u"&&console.error("invalid modifier "+h[v]+" in "+m),!1;b|=y}return{key:p,hashId:b}},this.findKeyCommand=function(h,p){var g=l[h]+p;return this.commandKeyBinding[g]},this.handleKeyboard=function(m,h,p,g){if(!(g<0)){var b=l[h]+p,v=this.commandKeyBinding[b];return m.$keyChain&&(m.$keyChain+=" "+b,v=this.commandKeyBinding[m.$keyChain]||v),v&&(v=="chainKeys"||v[v.length-1]=="chainKeys")?(m.$keyChain=m.$keyChain||b,{command:"null"}):(m.$keyChain&&((!h||h==4)&&p.length==1?m.$keyChain=m.$keyChain.slice(0,-b.length-1):(h==-1||g>0)&&(m.$keyChain="")),{command:v})}},this.getStatusText=function(m,h){return h.$keyChain||""}}).call(u.prototype),n.HashHandler=u,n.MultiHashHandler=d}),ace.define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(t,n,r){var a=t("../lib/oop"),s=t("../keyboard/hash_handler").MultiHashHandler,l=t("../lib/event_emitter").EventEmitter,u=function(d,f){s.call(this,f,d),this.byName=this.commands,this.setDefaultHandler("exec",function(m){return m.args?m.command.exec(m.editor,m.args,m.event,!1):m.command.exec(m.editor,{},m.event,!0)})};a.inherits(u,s),(function(){a.implement(this,l),this.exec=function(d,f,m){if(Array.isArray(d)){for(var h=d.length;h--;)if(this.exec(d[h],f,m))return!0;return!1}if(typeof d=="string"&&(d=this.commands[d]),!d||f&&f.$readOnly&&!d.readOnly||this.$checkCommandState!=!1&&d.isAvailable&&!d.isAvailable(f))return!1;var p={editor:f,command:d,args:m};return p.returnValue=this._emit("exec",p),this._signal("afterExec",p),p.returnValue!==!1},this.toggleRecording=function(d){if(!this.$inReplay)return d&&d._emit("changeStatus"),this.recording?(this.macro.pop(),this.off("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=(function(f){this.macro.push([f.command,f.args])}).bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(d){if(!(this.$inReplay||!this.macro)){if(this.recording)return this.toggleRecording(d);try{this.$inReplay=!0,this.macro.forEach(function(f){typeof f=="string"?this.exec(f,d):this.exec(f[0],d,f[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(d){return d.map(function(f){return typeof f[0]!="string"&&(f[0]=f[0].name),f[1]||(f=f[0]),f})}}).call(u.prototype),n.CommandManager=u}),ace.define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(t,n,r){var a=t("../lib/lang"),s=t("../config"),l=t("../range").Range;function u(f,m){return{win:f,mac:m}}n.commands=[{name:"showSettingsMenu",description:"Show settings menu",bindKey:u("Ctrl-,","Command-,"),exec:function(f){s.loadModule("ace/ext/settings_menu",function(m){m.init(f),f.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",description:"Go to next error",bindKey:u("Alt-E","F4"),exec:function(f){s.loadModule("./ext/error_marker",function(m){m.showErrorMarker(f,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",description:"Go to previous error",bindKey:u("Alt-Shift-E","Shift-F4"),exec:function(f){s.loadModule("./ext/error_marker",function(m){m.showErrorMarker(f,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",description:"Select all",bindKey:u("Ctrl-A","Command-A"),exec:function(f){f.selectAll()},readOnly:!0},{name:"centerselection",description:"Center selection",bindKey:u(null,"Ctrl-L"),exec:function(f){f.centerSelection()},readOnly:!0},{name:"gotoline",description:"Go to line...",bindKey:u("Ctrl-L","Command-L"),exec:function(f,m){typeof m=="number"&&!isNaN(m)&&f.gotoLine(m),f.prompt({$type:"gotoLine"})},readOnly:!0},{name:"fold",bindKey:u("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(f){f.session.toggleFold(!1)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:u("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(f){f.session.toggleFold(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",description:"Toggle fold widget",bindKey:u("F2","F2"),exec:function(f){f.session.toggleFoldWidget()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",description:"Toggle parent fold widget",bindKey:u("Alt-F2","Alt-F2"),exec:function(f){f.session.toggleFoldWidget(!0)},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"foldall",description:"Fold all",bindKey:u(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldAllComments",description:"Fold all comments",bindKey:u(null,"Ctrl-Command-Option-0"),exec:function(f){f.session.foldAllComments()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",description:"Fold other",bindKey:u("Alt-0","Command-Option-0"),exec:function(f){f.session.foldAll(),f.session.unfold(f.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",description:"Unfold all",bindKey:u("Alt-Shift-0","Command-Option-Shift-0"),exec:function(f){f.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",description:"Find next",bindKey:u("Ctrl-K","Command-G"),exec:function(f){f.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",description:"Find previous",bindKey:u("Ctrl-Shift-K","Command-Shift-G"),exec:function(f){f.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",description:"Select or find next",bindKey:u("Alt-K","Ctrl-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findNext()},readOnly:!0},{name:"selectOrFindPrevious",description:"Select or find previous",bindKey:u("Alt-Shift-K","Ctrl-Shift-G"),exec:function(f){f.selection.isEmpty()?f.selection.selectWord():f.findPrevious()},readOnly:!0},{name:"find",description:"Find",bindKey:u("Ctrl-F","Command-F"),exec:function(f){s.loadModule("ace/ext/searchbox",function(m){m.Search(f)})},readOnly:!0},{name:"overwrite",description:"Overwrite",bindKey:"Insert",exec:function(f){f.toggleOverwrite()},readOnly:!0},{name:"selecttostart",description:"Select to start",bindKey:u("Ctrl-Shift-Home","Command-Shift-Home|Command-Shift-Up"),exec:function(f){f.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",description:"Go to start",bindKey:u("Ctrl-Home","Command-Home|Command-Up"),exec:function(f){f.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",description:"Select up",bindKey:u("Shift-Up","Shift-Up|Ctrl-Shift-P"),exec:function(f){f.getSelection().selectUp()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golineup",description:"Go line up",bindKey:u("Up","Up|Ctrl-P"),exec:function(f,m){f.navigateUp(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttoend",description:"Select to end",bindKey:u("Ctrl-Shift-End","Command-Shift-End|Command-Shift-Down"),exec:function(f){f.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",description:"Go to end",bindKey:u("Ctrl-End","Command-End|Command-Down"),exec:function(f){f.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",description:"Select down",bindKey:u("Shift-Down","Shift-Down|Ctrl-Shift-N"),exec:function(f){f.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",description:"Go line down",bindKey:u("Down","Down|Ctrl-N"),exec:function(f,m){f.navigateDown(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",description:"Select word left",bindKey:u("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(f){f.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",description:"Go to word left",bindKey:u("Ctrl-Left","Option-Left"),exec:function(f){f.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",description:"Select to line start",bindKey:u("Alt-Shift-Left","Command-Shift-Left|Ctrl-Shift-A"),exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",description:"Go to line start",bindKey:u("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(f){f.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",description:"Select left",bindKey:u("Shift-Left","Shift-Left|Ctrl-Shift-B"),exec:function(f){f.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",description:"Go to left",bindKey:u("Left","Left|Ctrl-B"),exec:function(f,m){f.navigateLeft(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",description:"Select word right",bindKey:u("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(f){f.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",description:"Go to word right",bindKey:u("Ctrl-Right","Option-Right"),exec:function(f){f.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",description:"Select to line end",bindKey:u("Alt-Shift-Right","Command-Shift-Right|Shift-End|Ctrl-Shift-E"),exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",description:"Go to line end",bindKey:u("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(f){f.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",description:"Select right",bindKey:u("Shift-Right","Shift-Right"),exec:function(f){f.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",description:"Go to right",bindKey:u("Right","Right|Ctrl-F"),exec:function(f,m){f.navigateRight(m.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",description:"Select page down",bindKey:"Shift-PageDown",exec:function(f){f.selectPageDown()},readOnly:!0},{name:"pagedown",description:"Page down",bindKey:u(null,"Option-PageDown"),exec:function(f){f.scrollPageDown()},readOnly:!0},{name:"gotopagedown",description:"Go to page down",bindKey:u("PageDown","PageDown|Ctrl-V"),exec:function(f){f.gotoPageDown()},readOnly:!0},{name:"selectpageup",description:"Select page up",bindKey:"Shift-PageUp",exec:function(f){f.selectPageUp()},readOnly:!0},{name:"pageup",description:"Page up",bindKey:u(null,"Option-PageUp"),exec:function(f){f.scrollPageUp()},readOnly:!0},{name:"gotopageup",description:"Go to page up",bindKey:"PageUp",exec:function(f){f.gotoPageUp()},readOnly:!0},{name:"scrollup",description:"Scroll up",bindKey:u("Ctrl-Up",null),exec:function(f){f.renderer.scrollBy(0,-2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",description:"Scroll down",bindKey:u("Ctrl-Down",null),exec:function(f){f.renderer.scrollBy(0,2*f.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",description:"Select line start",bindKey:"Shift-Home",exec:function(f){f.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",description:"Select line end",bindKey:"Shift-End",exec:function(f){f.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",description:"Toggle recording",bindKey:u("Ctrl-Alt-E","Command-Option-E"),exec:function(f){f.commands.toggleRecording(f)},readOnly:!0},{name:"replaymacro",description:"Replay macro",bindKey:u("Ctrl-Shift-E","Command-Shift-E"),exec:function(f){f.commands.replay(f)},readOnly:!0},{name:"jumptomatching",description:"Jump to matching",bindKey:u("Ctrl-\\|Ctrl-P","Command-\\"),exec:function(f){f.jumpToMatching()},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"selecttomatching",description:"Select to matching",bindKey:u("Ctrl-Shift-\\|Ctrl-Shift-P","Command-Shift-\\"),exec:function(f){f.jumpToMatching(!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"expandToMatching",description:"Expand to matching",bindKey:u("Ctrl-Shift-M","Ctrl-Shift-M"),exec:function(f){f.jumpToMatching(!0,!0)},multiSelectAction:"forEach",scrollIntoView:"animate",readOnly:!0},{name:"passKeysToBrowser",description:"Pass keys to browser",bindKey:u(null,null),exec:function(){},passEvent:!0,readOnly:!0},{name:"copy",description:"Copy",exec:function(f){},readOnly:!0},{name:"cut",description:"Cut",exec:function(f){var m=f.$copyWithEmptySelection&&f.selection.isEmpty(),h=m?f.selection.getLineRange():f.selection.getRange();f._emit("cut",h),h.isEmpty()||f.session.remove(h),f.clearSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"paste",description:"Paste",exec:function(f,m){f.$handlePaste(m)},scrollIntoView:"cursor"},{name:"removeline",description:"Remove line",bindKey:u("Ctrl-D","Command-D"),exec:function(f){f.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",description:"Duplicate selection",bindKey:u("Ctrl-Shift-D","Command-Shift-D"),exec:function(f){f.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",description:"Sort lines",bindKey:u("Ctrl-Alt-S","Command-Alt-S"),exec:function(f){f.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",description:"Toggle comment",bindKey:u("Ctrl-/","Command-/"),exec:function(f){f.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",description:"Toggle block comment",bindKey:u("Ctrl-Shift-/","Command-Shift-/"),exec:function(f){f.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",description:"Modify number up",bindKey:u("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(f){f.modifyNumber(1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"modifyNumberDown",description:"Modify number down",bindKey:u("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(f){f.modifyNumber(-1)},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"replace",description:"Replace",bindKey:u("Ctrl-H","Command-Option-F"),exec:function(f){s.loadModule("ace/ext/searchbox",function(m){m.Search(f,!0)})}},{name:"undo",description:"Undo",bindKey:u("Ctrl-Z","Command-Z"),exec:function(f){f.undo()}},{name:"redo",description:"Redo",bindKey:u("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(f){f.redo()}},{name:"copylinesup",description:"Copy lines up",bindKey:u("Alt-Shift-Up","Command-Option-Up"),exec:function(f){f.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",description:"Move lines up",bindKey:u("Alt-Up","Option-Up"),exec:function(f){f.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",description:"Copy lines down",bindKey:u("Alt-Shift-Down","Command-Option-Down"),exec:function(f){f.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",description:"Move lines down",bindKey:u("Alt-Down","Option-Down"),exec:function(f){f.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",description:"Delete",bindKey:u("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(f){f.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",description:"Backspace",bindKey:u("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(f){f.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",description:"Cut or delete",bindKey:u("Shift-Delete",null),exec:function(f){if(f.selection.isEmpty())f.remove("left");else return!1},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",description:"Remove to line start",bindKey:u("Alt-Backspace","Command-Backspace"),exec:function(f){f.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",description:"Remove to line end",bindKey:u("Alt-Delete","Ctrl-K|Command-Delete"),exec:function(f){f.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestarthard",description:"Remove to line start hard",bindKey:u("Ctrl-Shift-Backspace",null),exec:function(f){var m=f.selection.getRange();m.start.column=0,f.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineendhard",description:"Remove to line end hard",bindKey:u("Ctrl-Shift-Delete",null),exec:function(f){var m=f.selection.getRange();m.end.column=Number.MAX_VALUE,f.session.remove(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",description:"Remove word left",bindKey:u("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(f){f.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",description:"Remove word right",bindKey:u("Ctrl-Delete","Alt-Delete"),exec:function(f){f.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",description:"Outdent",bindKey:u("Shift-Tab","Shift-Tab"),exec:function(f){f.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",description:"Indent",bindKey:u("Tab","Tab"),exec:function(f){f.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",description:"Block outdent",bindKey:u("Ctrl-[","Ctrl-["),exec:function(f){f.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",description:"Block indent",bindKey:u("Ctrl-]","Ctrl-]"),exec:function(f){f.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",description:"Insert string",exec:function(f,m){f.insert(m)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",description:"Insert text",exec:function(f,m){f.insert(a.stringRepeat(m.text||"",m.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",description:"Split line",bindKey:u(null,"Ctrl-O"),exec:function(f){f.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",description:"Transpose letters",bindKey:u("Alt-Shift-X","Ctrl-T"),exec:function(f){f.transposeLetters()},multiSelectAction:function(f){f.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",description:"To uppercase",bindKey:u("Ctrl-U","Ctrl-U"),exec:function(f){f.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",description:"To lowercase",bindKey:u("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(f){f.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"autoindent",description:"Auto Indent",bindKey:u(null,null),exec:function(f){f.autoIndent()},multiSelectAction:"forEachLine",scrollIntoView:"animate"},{name:"expandtoline",description:"Expand to line",bindKey:u("Ctrl-Shift-L","Command-Shift-L"),exec:function(f){var m=f.selection.getRange();m.start.column=m.end.column=0,m.end.row++,f.selection.setRange(m,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",description:"Join lines",bindKey:u(null,null),exec:function(f){for(var m=f.selection.isBackwards(),h=m?f.selection.getSelectionLead():f.selection.getSelectionAnchor(),p=m?f.selection.getSelectionAnchor():f.selection.getSelectionLead(),g=f.session.doc.getLine(h.row).length,b=f.session.doc.getTextRange(f.selection.getRange()),v=b.replace(/\n\s*/," ").length,y=f.session.doc.getLine(h.row),C=h.row+1;C<=p.row+1;C++){var E=a.stringTrimLeft(a.stringTrimRight(f.session.doc.getLine(C)));E.length!==0&&(E=" "+E),y+=E}p.row+1<f.session.doc.getLength()-1&&(y+=f.session.doc.getNewLineCharacter()),f.clearSelection(),f.session.doc.replace(new l(h.row,0,p.row+2,0),y),v>0?(f.selection.moveCursorTo(h.row,h.column),f.selection.selectTo(h.row,h.column+v)):(g=f.session.doc.getLine(h.row).length>g?g+1:g,f.selection.moveCursorTo(h.row,g))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",description:"Invert selection",bindKey:u(null,null),exec:function(f){var m=f.session.doc.getLength()-1,h=f.session.doc.getLine(m).length,p=f.selection.rangeList.ranges,g=[];p.length<1&&(p=[f.selection.getRange()]);for(var b=0;b<p.length;b++)b==p.length-1&&(p[b].end.row===m&&p[b].end.column===h||g.push(new l(p[b].end.row,p[b].end.column,m,h))),b===0?p[b].start.row===0&&p[b].start.column===0||g.push(new l(0,0,p[b].start.row,p[b].start.column)):g.push(new l(p[b-1].end.row,p[b-1].end.column,p[b].start.row,p[b].start.column));f.exitMultiSelectMode(),f.clearSelection();for(var b=0;b<g.length;b++)f.selection.addRange(g[b],!1)},readOnly:!0,scrollIntoView:"none"},{name:"addLineAfter",description:"Add new line after the current line",exec:function(f){f.selection.clearSelection(),f.navigateLineEnd(),f.insert(`
`)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"addLineBefore",description:"Add new line before the current line",exec:function(f){f.selection.clearSelection();var m=f.getCursorPosition();f.selection.moveTo(m.row-1,Number.MAX_VALUE),f.insert(`
`),m.row===0&&f.navigateUp()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"openCommandPallete",description:"Open command pallete",bindKey:u("F1","F1"),exec:function(f){f.prompt({$type:"commands"})},readOnly:!0},{name:"modeSelect",description:"Change language mode...",bindKey:u(null,null),exec:function(f){f.prompt({$type:"modes"})},readOnly:!0}];for(var d=1;d<9;d++)n.commands.push({name:"foldToLevel"+d,description:"Fold To Level "+d,level:d,exec:function(f){f.session.foldToLevel(this.level)},scrollIntoView:"center",readOnly:!0})}),ace.define("ace/editor",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator","ace/clipboard"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/dom"),l=t("./lib/lang"),u=t("./lib/useragent"),d=t("./keyboard/textinput").TextInput,f=t("./mouse/mouse_handler").MouseHandler,m=t("./mouse/fold_handler").FoldHandler,h=t("./keyboard/keybinding").KeyBinding,p=t("./edit_session").EditSession,g=t("./search").Search,b=t("./range").Range,v=t("./lib/event_emitter").EventEmitter,y=t("./commands/command_manager").CommandManager,C=t("./commands/default_commands").commands,E=t("./config"),A=t("./token_iterator").TokenIterator,k=t("./clipboard"),T=function(S,I,R){this.$toDestroy=[];var N=S.getContainerElement();this.container=N,this.renderer=S,this.id="editor"+ ++T.$uid,this.commands=new y(u.isMac?"mac":"win",C),typeof document=="object"&&(this.textInput=new d(S.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.$mouseHandler=new f(this),new m(this)),this.keyBinding=new h(this),this.$search=new g().set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=l.delayedCall((function(){this._signal("input",{}),this.session&&!this.session.destroyed&&this.session.bgTokenizer.scheduleStart()}).bind(this)),this.on("change",function(M,F){F._$emitInputEvent.schedule(31)}),this.setSession(I||R&&R.session||new p("")),E.resetOptions(this),R&&this.setOptions(R),E._signal("editor",this)};T.$uid=0,(function(){a.implement(this,v),this.$initOperationListeners=function(){this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=l.delayedCall(this.endOperation.bind(this,!0)),this.on("change",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.docChanged=!0}).bind(this),!0),this.on("changeSelection",(function(){this.curOp||(this.startOperation(),this.curOp.selectionBefore=this.$lastSel),this.curOp.selectionChanged=!0}).bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(S){if(this.curOp){if(!S||this.curOp.command)return;this.prevOp=this.curOp}S||(this.previousCommand=null,S={}),this.$opResetTimer.schedule(),this.curOp=this.session.curOp={command:S.command||{},args:S.args,scrollTop:this.renderer.scrollTop},this.curOp.selectionBefore=this.selection.toJSON()},this.endOperation=function(S){if(this.curOp&&this.session){if(S&&S.returnValue===!1||!this.session)return this.curOp=null;if(S==!0&&this.curOp.command&&this.curOp.command.name=="mouse"||(this._signal("beforeEndOperation"),!this.curOp))return;var I=this.curOp.command,R=I&&I.scrollIntoView;if(R){switch(R){case"center-animate":R="animate";case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var N=this.selection.getRange(),M=this.renderer.layerConfig;(N.start.row>=M.lastRow||N.end.row<=M.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead);break}R=="animate"&&this.renderer.animateScrolling(this.curOp.scrollTop)}var F=this.selection.toJSON();this.curOp.selectionAfter=F,this.$lastSel=this.selection.toJSON(),this.session.getUndoManager().addSelection(F),this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(S){if(this.$mergeUndoDeltas){var I=this.prevOp,R=this.$mergeableCommands,N=I.command&&S.command.name==I.command.name;if(S.command.name=="insertstring"){var M=S.args;this.mergeNextCommand===void 0&&(this.mergeNextCommand=!0),N=N&&this.mergeNextCommand&&(!/\s/.test(M)||/\s/.test(I.args)),this.mergeNextCommand=!0}else N=N&&R.indexOf(S.command.name)!==-1;this.$mergeUndoDeltas!="always"&&Date.now()-this.sequenceStartTime>2e3&&(N=!1),N?this.session.mergeUndoDeltas=!0:R.indexOf(S.command.name)!==-1&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(S,I){if(S&&typeof S=="string"&&S!="ace"){this.$keybindingId=S;var R=this;E.loadModule(["keybinding",S],function(N){R.$keybindingId==S&&R.keyBinding.setKeyboardHandler(N&&N.handler),I&&I()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(S),I&&I()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(S){if(this.session!=S){this.curOp&&this.endOperation(),this.curOp={};var I=this.session;if(I){this.session.off("change",this.$onDocumentChange),this.session.off("changeMode",this.$onChangeMode),this.session.off("tokenizerUpdate",this.$onTokenizerUpdate),this.session.off("changeTabSize",this.$onChangeTabSize),this.session.off("changeWrapLimit",this.$onChangeWrapLimit),this.session.off("changeWrapMode",this.$onChangeWrapMode),this.session.off("changeFold",this.$onChangeFold),this.session.off("changeFrontMarker",this.$onChangeFrontMarker),this.session.off("changeBackMarker",this.$onChangeBackMarker),this.session.off("changeBreakpoint",this.$onChangeBreakpoint),this.session.off("changeAnnotation",this.$onChangeAnnotation),this.session.off("changeOverwrite",this.$onCursorChange),this.session.off("changeScrollTop",this.$onScrollTopChange),this.session.off("changeScrollLeft",this.$onScrollLeftChange);var R=this.session.getSelection();R.off("changeCursor",this.$onCursorChange),R.off("changeSelection",this.$onSelectionChange)}this.session=S,S?(this.$onDocumentChange=this.onDocumentChange.bind(this),S.on("change",this.$onDocumentChange),this.renderer.setSession(S),this.$onChangeMode=this.onChangeMode.bind(this),S.on("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),S.on("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),S.on("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),S.on("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),S.on("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),S.on("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.on("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.on("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.on("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.on("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.on("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.on("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.on("changeScrollLeft",this.$onScrollLeftChange),this.selection=S.getSelection(),this.selection.on("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.on("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.onCursorChange(),this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(S)),this._signal("changeSession",{session:S,oldSession:I}),this.curOp=null,I&&I._signal("changeEditor",{oldEditor:this}),S&&S._signal("changeEditor",{editor:this}),S&&!S.destroyed&&S.bgTokenizer.scheduleStart()}},this.getSession=function(){return this.session},this.setValue=function(S,I){return this.session.doc.setValue(S),I?I==1?this.navigateFileEnd():I==-1&&this.navigateFileStart():this.selectAll(),S},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(S){this.renderer.onResize(S)},this.setTheme=function(S,I){this.renderer.setTheme(S,I)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(S){this.renderer.setStyle(S)},this.unsetStyle=function(S){this.renderer.unsetStyle(S)},this.getFontSize=function(){return this.getOption("fontSize")||s.computedStyle(this.container).fontSize},this.setFontSize=function(S){this.setOption("fontSize",S)},this.$highlightBrackets=function(){if(!this.$highlightPending){var S=this;this.$highlightPending=!0,setTimeout(function(){S.$highlightPending=!1;var I=S.session;if(!(!I||I.destroyed)){I.$bracketHighlight&&(I.$bracketHighlight.markerIds.forEach(function(M){I.removeMarker(M)}),I.$bracketHighlight=null);var R=I.getMatchingBracketRanges(S.getCursorPosition());if(!R&&I.$mode.getMatching&&(R=I.$mode.getMatching(S.session)),!!R){var N="ace_bracket";Array.isArray(R)?R.length==1&&(N="ace_error_bracket"):R=[R],R.length==2&&(b.comparePoints(R[0].end,R[1].start)==0?R=[b.fromPoints(R[0].start,R[1].end)]:b.comparePoints(R[0].start,R[1].end)==0&&(R=[b.fromPoints(R[1].start,R[0].end)])),I.$bracketHighlight={ranges:R,markerIds:R.map(function(M){return I.addMarker(M,N,"text")})}}}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var S=this;this.$highlightTagPending=!0,setTimeout(function(){S.$highlightTagPending=!1;var I=S.session;if(!(!I||I.destroyed)){var R=S.getCursorPosition(),N=new A(S.session,R.row,R.column),M=N.getCurrentToken();if(!M||!/\b(?:tag-open|tag-name)/.test(M.type)){I.removeMarker(I.$tagHighlight),I.$tagHighlight=null;return}if(!(M.type.indexOf("tag-open")!==-1&&(M=N.stepForward(),!M))){var F=M.value,D=M.value,x=0,B=N.stepBackward();if(B.value==="<")do B=M,M=N.stepForward(),M&&(M.type.indexOf("tag-name")!==-1?(D=M.value,F===D&&(B.value==="<"?x++:B.value==="</"&&x--)):F===D&&M.value==="/>"&&x--);while(M&&x>=0);else{do if(M=B,B=N.stepBackward(),M){if(M.type.indexOf("tag-name")!==-1)F===M.value&&(B.value==="<"?x++:B.value==="</"&&x--);else if(M.value==="/>"){for(var K=0,U=B;U;){if(U.type.indexOf("tag-name")!==-1&&U.value===F){x--;break}else if(U.value==="<")break;U=N.stepBackward(),K++}for(var G=0;G<K;G++)N.stepForward()}}while(B&&x<=0);N.stepForward()}if(!M){I.removeMarker(I.$tagHighlight),I.$tagHighlight=null;return}var W=N.getCurrentTokenRow(),q=N.getCurrentTokenColumn(),H=new b(W,q,W,q+M.value.length),z=I.$backMarkers[I.$tagHighlight];I.$tagHighlight&&z!=null&&H.compareRange(z.range)!==0&&(I.removeMarker(I.$tagHighlight),I.$tagHighlight=null),I.$tagHighlight||(I.$tagHighlight=I.addMarker(H,"ace_bracket","text"))}}},50)}},this.focus=function(){this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(S){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",S))},this.onBlur=function(S){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",S))},this.$cursorChange=function(){this.renderer.updateCursor(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine()},this.onDocumentChange=function(S){var I=this.session.$useWrapMode,R=S.start.row==S.end.row?S.end.row:1/0;this.renderer.updateLines(S.start.row,R,I),this._signal("change",S),this.$cursorChange()},this.onTokenizerUpdate=function(S){var I=S.data;this.renderer.updateLines(I.first,I.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var S=this.getSession(),I;if(this.$highlightActiveLine&&((this.$selectionStyle!="line"||!this.selection.isMultiLine())&&(I=this.getCursorPosition()),this.renderer.theme&&this.renderer.theme.$selectionColorConflict&&!this.selection.isEmpty()&&(I=!1),this.renderer.$maxLines&&this.session.getLength()===1&&!(this.renderer.$minLines>1)&&(I=!1)),S.$highlightLineMarker&&!I)S.removeMarker(S.$highlightLineMarker.id),S.$highlightLineMarker=null;else if(!S.$highlightLineMarker&&I){var R=new b(I.row,I.column,I.row,1/0);R.id=S.addMarker(R,"ace_active-line","screenLine"),S.$highlightLineMarker=R}else I&&(S.$highlightLineMarker.start.row=I.row,S.$highlightLineMarker.end.row=I.row,S.$highlightLineMarker.start.column=I.column,S._signal("changeBackMarker"))},this.onSelectionChange=function(S){var I=this.session;if(I.$selectionMarker&&I.removeMarker(I.$selectionMarker),I.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var R=this.selection.getRange(),N=this.getSelectionStyle();I.$selectionMarker=I.addMarker(R,"ace_selection",N)}var M=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(M),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var S=this.session,I=this.getSelectionRange();if(!(I.isEmpty()||I.isMultiLine())){var R=I.start.column,N=I.end.column,M=S.getLine(I.start.row),F=M.substring(R,N);if(!(F.length>5e3||!/[\w\d]/.test(F))){var D=this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:F}),x=M.substring(R-1,N+1);if(D.test(x))return D}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(S){this.renderer.updateText(),this._emit("changeMode",S)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var S=this.getSelectedText(),I=this.session.doc.getNewLineCharacter(),R=!1;if(!S&&this.$copyWithEmptySelection){R=!0;for(var N=this.selection.getAllRanges(),M=0;M<N.length;M++){var F=N[M];M&&N[M-1].start.row==F.start.row||(S+=this.session.getLine(F.start.row)+I)}}var D={text:S};return this._signal("copy",D),k.lineMode=R?D.text:!1,D.text},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(S,I){var R={text:S,event:I};this.commands.exec("paste",this,R)},this.$handlePaste=function(S){typeof S=="string"&&(S={text:S}),this._signal("paste",S);var I=S.text,R=I===k.lineMode,N=this.session;if(!this.inMultiSelectMode||this.inVirtualSelectionMode)R?N.insert({row:this.selection.lead.row,column:0},I):this.insert(I);else if(R)this.selection.rangeList.ranges.forEach(function(K){N.insert({row:K.start.row,column:0},I)});else{var M=I.split(/\r\n|\r|\n/),F=this.selection.rangeList.ranges,D=M.length==2&&(!M[0]||!M[1]);if(M.length!=F.length||D)return this.commands.exec("insertstring",this,I);for(var x=F.length;x--;){var B=F[x];B.isEmpty()||N.remove(B),N.insert(B.start,M[x])}}},this.execCommand=function(S,I){return this.commands.exec(S,this,I)},this.insert=function(S,I){var R=this.session,N=R.getMode(),M=this.getCursorPosition();if(this.getBehavioursEnabled()&&!I){var F=N.transformAction(R.getState(M.row),"insertion",this,R,S);F&&(S!==F.text&&(this.inVirtualSelectionMode||(this.session.mergeUndoDeltas=!1,this.mergeNextCommand=!1)),S=F.text)}if(S=="	"&&(S=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()&&S.indexOf(`
`)==-1){var D=new b.fromPoints(M,M);D.end.column+=S.length,this.session.remove(D)}}else{var D=this.getSelectionRange();M=this.session.remove(D),this.clearSelection()}if(S==`
`||S==`\r
`){var U=R.getLine(M.row);if(M.column>U.search(/\S|$/)){var x=U.substr(M.column).search(/\S|$/);R.doc.removeInLine(M.row,M.column,M.column+x)}}this.clearSelection();var B=M.column,K=R.getState(M.row),U=R.getLine(M.row),G=N.checkOutdent(K,U,S);if(R.insert(M,S),F&&F.selection&&(F.selection.length==2?this.selection.setSelectionRange(new b(M.row,B+F.selection[0],M.row,B+F.selection[1])):this.selection.setSelectionRange(new b(M.row+F.selection[0],F.selection[1],M.row+F.selection[2],F.selection[3]))),this.$enableAutoIndent){if(R.getDocument().isNewLine(S)){var W=N.getNextLineIndent(K,U.slice(0,M.column),R.getTabString());R.insert({row:M.row+1,column:0},W)}G&&N.autoOutdent(K,R,M.row)}},this.autoIndent=function(){var S=this.session,I=S.getMode(),R,N;if(this.selection.isEmpty())R=0,N=S.doc.getLength()-1;else{var M=this.getSelectionRange();R=M.start.row,N=M.end.row}for(var F="",D="",x="",B,K,U,G=S.getTabString(),W=R;W<=N;W++)W>0&&(F=S.getState(W-1),D=S.getLine(W-1),x=I.getNextLineIndent(F,D,G)),B=S.getLine(W),K=I.$getIndent(B),x!==K&&(K.length>0&&(U=new b(W,0,W,K.length),S.remove(U)),x.length>0&&S.insert({row:W,column:0},x)),I.autoOutdent(F,S,W)},this.onTextInput=function(S,I){if(!I)return this.keyBinding.onTextInput(S);this.startOperation({command:{name:"insertstring"}});var R=this.applyComposition.bind(this,S,I);this.selection.rangeCount?this.forEachSelection(R):R(),this.endOperation()},this.applyComposition=function(S,I){if(I.extendLeft||I.extendRight){var R=this.selection.getRange();R.start.column-=I.extendLeft,R.end.column+=I.extendRight,R.start.column<0&&(R.start.row--,R.start.column+=this.session.getLine(R.start.row).length+1),this.selection.setRange(R),!S&&!R.isEmpty()&&this.remove()}if((S||!this.selection.isEmpty())&&this.insert(S,!0),I.restoreStart||I.restoreEnd){var R=this.selection.getRange();R.start.column-=I.restoreStart,R.end.column-=I.restoreEnd,this.selection.setRange(R)}},this.onCommandKey=function(S,I,R){return this.keyBinding.onCommandKey(S,I,R)},this.setOverwrite=function(S){this.session.setOverwrite(S)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(S){this.setOption("scrollSpeed",S)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(S){this.setOption("dragDelay",S)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(S){this.setOption("selectionStyle",S)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(S){this.setOption("highlightActiveLine",S)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(S){this.setOption("highlightGutterLine",S)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(S){this.setOption("highlightSelectedWord",S)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(S){this.renderer.setAnimatedScroll(S)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(S){this.renderer.setShowInvisibles(S)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(S){this.renderer.setDisplayIndentGuides(S)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(S){this.renderer.setShowPrintMargin(S)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(S){this.renderer.setPrintMarginColumn(S)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(S){this.setOption("readOnly",S)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(S){this.setOption("behavioursEnabled",S)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(S){this.setOption("wrapBehavioursEnabled",S)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(S){this.setOption("showFoldWidgets",S)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(S){this.setOption("fadeFoldWidgets",S)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(S){this.selection.isEmpty()&&(S=="left"?this.selection.selectLeft():this.selection.selectRight());var I=this.getSelectionRange();if(this.getBehavioursEnabled()){var R=this.session,N=R.getState(I.start.row),M=R.getMode().transformAction(N,"deletion",this,R,I);if(I.end.column===0){var F=R.getTextRange(I);if(F[F.length-1]==`
`){var D=R.getLine(I.end.row);/^\s+$/.test(D)&&(I.end.column=D.length)}}M&&(I=M)}this.session.remove(I),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.selection.isEmpty()&&this.selection.selectLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var S=this.getSelectionRange();S.start.column==S.end.column&&S.start.row==S.end.row&&(S.end.column=0,S.end.row++),this.session.remove(S),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var S=this.getCursorPosition();this.insert(`
`),this.moveCursorToPosition(S)},this.transposeLetters=function(){if(this.selection.isEmpty()){var S=this.getCursorPosition(),I=S.column;if(I!==0){var R=this.session.getLine(S.row),N,M;I<R.length?(N=R.charAt(I)+R.charAt(I-1),M=new b(S.row,I-1,S.row,I+1)):(N=R.charAt(I-1)+R.charAt(I-2),M=new b(S.row,I-2,S.row,I)),this.session.replace(M,N),this.session.selection.moveToPosition(M.end)}}},this.toLowerCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),R=this.session.getTextRange(I);this.session.replace(I,R.toLowerCase()),this.selection.setSelectionRange(S)},this.toUpperCase=function(){var S=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var I=this.getSelectionRange(),R=this.session.getTextRange(I);this.session.replace(I,R.toUpperCase()),this.selection.setSelectionRange(S)},this.indent=function(){var S=this.session,I=this.getSelectionRange();if(I.start.row<I.end.row){var R=this.$getSelectedRows();S.indentRows(R.first,R.last,"	");return}else if(I.start.column<I.end.column){var N=S.getTextRange(I);if(!/^\s+$/.test(N)){var R=this.$getSelectedRows();S.indentRows(R.first,R.last,"	");return}}var M=S.getLine(I.start.row),F=I.start,D=S.getTabSize(),x=S.documentToScreenColumn(F.row,F.column);if(this.session.getUseSoftTabs())var B=D-x%D,K=l.stringRepeat(" ",B);else{for(var B=x%D;M[I.start.column-1]==" "&&B;)I.start.column--,B--;this.selection.setSelectionRange(I),K="	"}return this.insert(K)},this.blockIndent=function(){var S=this.$getSelectedRows();this.session.indentRows(S.first,S.last,"	")},this.blockOutdent=function(){var S=this.session.getSelection();this.session.outdentRows(S.getRange())},this.sortLines=function(){for(var S=this.$getSelectedRows(),I=this.session,R=[],N=S.first;N<=S.last;N++)R.push(I.getLine(N));R.sort(function(D,x){return D.toLowerCase()<x.toLowerCase()?-1:D.toLowerCase()>x.toLowerCase()?1:0});for(var M=new b(0,0,0,0),N=S.first;N<=S.last;N++){var F=I.getLine(N);M.start.row=N,M.end.row=N,M.end.column=F.length,I.replace(M,R[N-S.first])}},this.toggleCommentLines=function(){var S=this.session.getState(this.getCursorPosition().row),I=this.$getSelectedRows();this.session.getMode().toggleCommentLines(S,this.session,I.first,I.last)},this.toggleBlockComment=function(){var S=this.getCursorPosition(),I=this.session.getState(S.row),R=this.getSelectionRange();this.session.getMode().toggleBlockComment(I,this.session,R,S)},this.getNumberAt=function(S,I){var R=/[\-]?[0-9]+(?:\.[0-9]+)?/g;R.lastIndex=0;for(var N=this.session.getLine(S);R.lastIndex<I;){var M=R.exec(N);if(M.index<=I&&M.index+M[0].length>=I){var F={value:M[0],start:M.index,end:M.index+M[0].length};return F}}return null},this.modifyNumber=function(S){var I=this.selection.getCursor().row,R=this.selection.getCursor().column,N=new b(I,R-1,I,R),M=this.session.getTextRange(N);if(!isNaN(parseFloat(M))&&isFinite(M)){var F=this.getNumberAt(I,R);if(F){var D=F.value.indexOf(".")>=0?F.start+F.value.indexOf(".")+1:F.end,x=F.start+F.value.length-D,B=parseFloat(F.value);B*=Math.pow(10,x),D!==F.end&&R<D?S*=Math.pow(10,F.end-R-1):S*=Math.pow(10,F.end-R),B+=S,B/=Math.pow(10,x);var K=B.toFixed(x),U=new b(I,F.start,I,F.end);this.session.replace(U,K),this.moveCursorTo(I,Math.max(F.start+1,R+K.length-F.value.length))}}else this.toggleWord()},this.$toggleWordPairs=[["first","last"],["true","false"],["yes","no"],["width","height"],["top","bottom"],["right","left"],["on","off"],["x","y"],["get","set"],["max","min"],["horizontal","vertical"],["show","hide"],["add","remove"],["up","down"],["before","after"],["even","odd"],["in","out"],["inside","outside"],["next","previous"],["increase","decrease"],["attach","detach"],["&&","||"],["==","!="]],this.toggleWord=function(){var S=this.selection.getCursor().row,I=this.selection.getCursor().column;this.selection.selectWord();var R=this.getSelectedText(),N=this.selection.getWordRange().start.column,M=R.replace(/([a-z]+|[A-Z]+)(?=[A-Z_]|$)/g,"$1 ").split(/\s/),F=I-N-1;F<0&&(F=0);var D=0,x=0,B=this;R.match(/[A-Za-z0-9_]+/)&&M.forEach(function(V,J){x=D+V.length,F>=D&&F<=x&&(R=V,B.selection.clearSelection(),B.moveCursorTo(S,D+N),B.selection.selectTo(S,x+N)),D=x});for(var K=this.$toggleWordPairs,U,G=0;G<K.length;G++)for(var W=K[G],q=0;q<=1;q++){var H=+!q,z=R.match(new RegExp("^\\s?_?("+l.escapeRegExp(W[q])+")\\s?$","i"));if(z){var Y=R.match(new RegExp("([_]|^|\\s)("+l.escapeRegExp(z[1])+")($|\\s)","g"));Y&&(U=R.replace(new RegExp(l.escapeRegExp(W[q]),"i"),function(V){var J=W[H];return V.toUpperCase()==V?J=J.toUpperCase():V.charAt(0).toUpperCase()==V.charAt(0)&&(J=J.substr(0,0)+W[H].charAt(0).toUpperCase()+J.substr(1)),J}),this.insert(U),U="")}}},this.removeLines=function(){var S=this.$getSelectedRows();this.session.removeFullLines(S.first,S.last),this.clearSelection()},this.duplicateSelection=function(){var S=this.selection,I=this.session,R=S.getRange(),N=S.isBackwards();if(R.isEmpty()){var M=R.start.row;I.duplicateLines(M,M)}else{var F=N?R.start:R.end,D=I.insert(F,I.getTextRange(R),!1);R.start=F,R.end=D,S.setSelectionRange(R,N)}},this.moveLinesDown=function(){this.$moveLines(1,!1)},this.moveLinesUp=function(){this.$moveLines(-1,!1)},this.moveText=function(S,I,R){return this.session.moveText(S,I,R)},this.copyLinesUp=function(){this.$moveLines(-1,!0)},this.copyLinesDown=function(){this.$moveLines(1,!0)},this.$moveLines=function(S,I){var R,N,M=this.selection;if(!M.inMultiSelectMode||this.inVirtualSelectionMode){var F=M.toOrientedRange();R=this.$getSelectedRows(F),N=this.session.$moveLines(R.first,R.last,I?0:S),I&&S==-1&&(N=0),F.moveBy(N,0),M.fromOrientedRange(F)}else{var D=M.rangeList.ranges;M.rangeList.detach(this.session),this.inVirtualSelectionMode=!0;for(var x=0,B=0,K=D.length,U=0;U<K;U++){var G=U;D[U].moveBy(x,0),R=this.$getSelectedRows(D[U]);for(var W=R.first,q=R.last;++U<K;){B&&D[U].moveBy(B,0);var H=this.$getSelectedRows(D[U]);if(I&&H.first!=q)break;if(!I&&H.first>q+1)break;q=H.last}for(U--,x=this.session.$moveLines(W,q,I?0:S),I&&S==-1&&(G=U+1);G<=U;)D[G].moveBy(x,0),G++;I||(x=0),B+=x}M.fromOrientedRange(M.ranges[0]),M.rangeList.attach(this.session),this.inVirtualSelectionMode=!1}},this.$getSelectedRows=function(S){return S=(S||this.getSelectionRange()).collapseRows(),{first:this.session.getRowFoldStart(S.start.row),last:this.session.getRowFoldEnd(S.end.row)}},this.onCompositionStart=function(S){this.renderer.showComposition(S)},this.onCompositionUpdate=function(S){this.renderer.setCompositionText(S)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(S){return S>=this.getFirstVisibleRow()&&S<=this.getLastVisibleRow()},this.isRowFullyVisible=function(S){return S>=this.renderer.getFirstFullyVisibleRow()&&S<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(S,I){var R=this.renderer,N=this.renderer.layerConfig,M=S*Math.floor(N.height/N.lineHeight);I===!0?this.selection.$moveSelection(function(){this.moveCursorBy(M,0)}):I===!1&&(this.selection.moveCursorBy(M,0),this.selection.clearSelection());var F=R.scrollTop;R.scrollBy(0,M*N.lineHeight),I!=null&&R.scrollCursorIntoView(null,.5),R.animateScrolling(F)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(S){this.renderer.scrollToRow(S)},this.scrollToLine=function(S,I,R,N){this.renderer.scrollToLine(S,I,R,N)},this.centerSelection=function(){var S=this.getSelectionRange(),I={row:Math.floor(S.start.row+(S.end.row-S.start.row)/2),column:Math.floor(S.start.column+(S.end.column-S.start.column)/2)};this.renderer.alignCursor(I,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.selection.selectAll()},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(S,I){this.selection.moveCursorTo(S,I)},this.moveCursorToPosition=function(S){this.selection.moveCursorToPosition(S)},this.jumpToMatching=function(S,I){var R=this.getCursorPosition(),N=new A(this.session,R.row,R.column),M=N.getCurrentToken(),F=M||N.stepForward();if(F){var D,x=!1,B={},K=R.column-F.start,U,G={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(F.value.match(/[{}()\[\]]/g)){for(;K<F.value.length&&!x;K++)if(G[F.value[K]])switch(U=G[F.value[K]]+"."+F.type.replace("rparen","lparen"),isNaN(B[U])&&(B[U]=0),F.value[K]){case"(":case"[":case"{":B[U]++;break;case")":case"]":case"}":B[U]--,B[U]===-1&&(D="bracket",x=!0);break}}else F.type.indexOf("tag-name")!==-1&&(isNaN(B[F.value])&&(B[F.value]=0),M.value==="<"?B[F.value]++:M.value==="</"&&B[F.value]--,B[F.value]===-1&&(D="tag",x=!0));x||(M=F,F=N.stepForward(),K=0)}while(F&&!x);if(D){var W,q;if(D==="bracket")W=this.session.getBracketRange(R),W||(W=new b(N.getCurrentTokenRow(),N.getCurrentTokenColumn()+K-1,N.getCurrentTokenRow(),N.getCurrentTokenColumn()+K-1),q=W.start,(I||q.row===R.row&&Math.abs(q.column-R.column)<2)&&(W=this.session.getBracketRange(q)));else if(D==="tag"){if(F&&F.type.indexOf("tag-name")!==-1)var H=F.value;else return;if(W=new b(N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2,N.getCurrentTokenRow(),N.getCurrentTokenColumn()-2),W.compare(R.row,R.column)===0){x=!1;do F=M,M=N.stepBackward(),M&&(M.type.indexOf("tag-close")!==-1&&W.setEnd(N.getCurrentTokenRow(),N.getCurrentTokenColumn()+1),F.value===H&&F.type.indexOf("tag-name")!==-1&&(M.value==="<"?B[H]++:M.value==="</"&&B[H]--,B[H]===0&&(x=!0)));while(M&&!x)}F&&F.type.indexOf("tag-name")&&(q=W.start,q.row==R.row&&Math.abs(q.column-R.column)<2&&(q=W.end))}q=W&&W.cursor||q,q&&(S?W&&I?this.selection.setRange(W):W&&W.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(q.row,q.column):this.selection.moveTo(q.row,q.column))}}},this.gotoLine=function(S,I,R){this.selection.clearSelection(),this.session.unfold({row:S-1,column:I||0}),this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(S-1,I||0),this.isRowFullyVisible(S-1)||this.scrollToLine(S-1,!0,R)},this.navigateTo=function(S,I){this.selection.moveTo(S,I)},this.navigateUp=function(S){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(-S||-1,0)},this.navigateDown=function(S){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var I=this.selection.anchor.getPosition();return this.moveCursorToPosition(I)}this.selection.clearSelection(),this.selection.moveCursorBy(S||1,0)},this.navigateLeft=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorLeft();else{var I=this.getSelectionRange().start;this.moveCursorToPosition(I)}this.clearSelection()},this.navigateRight=function(S){if(this.selection.isEmpty())for(S=S||1;S--;)this.selection.moveCursorRight();else{var I=this.getSelectionRange().end;this.moveCursorToPosition(I)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(S,I){I&&this.$search.set(I);var R=this.$search.find(this.session),N=0;return R&&(this.$tryReplace(R,S)&&(N=1),this.selection.setSelectionRange(R),this.renderer.scrollSelectionIntoView(R.start,R.end)),N},this.replaceAll=function(S,I){I&&this.$search.set(I);var R=this.$search.findAll(this.session),N=0;if(!R.length)return N;var M=this.getSelectionRange();this.selection.moveTo(0,0);for(var F=R.length-1;F>=0;--F)this.$tryReplace(R[F],S)&&N++;return this.selection.setSelectionRange(M),N},this.$tryReplace=function(S,I){var R=this.session.getTextRange(S);return I=this.$search.replace(R,I),I!==null?(S.end=this.session.replace(S,I),S):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(S,I,R){I||(I={}),typeof S=="string"||S instanceof RegExp?I.needle=S:typeof S=="object"&&a.mixin(I,S);var N=this.selection.getRange();I.needle==null&&(S=this.session.getTextRange(N)||this.$search.$options.needle,S||(N=this.session.getWordRange(N.start.row,N.start.column),S=this.session.getTextRange(N)),this.$search.set({needle:S})),this.$search.set(I),I.start||this.$search.set({start:N});var M=this.$search.find(this.session);if(I.preventScroll)return M;if(M)return this.revealRange(M,R),M;I.backwards?N.start=N.end:N.end=N.start,this.selection.setRange(N)},this.findNext=function(S,I){this.find({skipCurrent:!0,backwards:!1},S,I)},this.findPrevious=function(S,I){this.find(S,{skipCurrent:!0,backwards:!0},I)},this.revealRange=function(S,I){this.session.unfold(S),this.selection.setSelectionRange(S);var R=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(S.start,S.end,.5),I!==!1&&this.renderer.animateScrolling(R)},this.undo=function(){this.session.getUndoManager().undo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.session.getUndoManager().redo(this.session),this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.$toDestroy&&(this.$toDestroy.forEach(function(S){S.destroy()}),this.$toDestroy=null),this.$mouseHandler&&this.$mouseHandler.destroy(),this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy(),this._$emitInputEvent&&this._$emitInputEvent.cancel(),this.removeAllListeners()},this.setAutoScrollEditorIntoView=function(S){if(S){var I,R=this,N=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var M=this.$scrollAnchor;M.style.cssText="position:absolute",this.container.insertBefore(M,this.container.firstChild);var F=this.on("changeSelection",function(){N=!0}),D=this.renderer.on("beforeRender",function(){N&&(I=R.renderer.container.getBoundingClientRect())}),x=this.renderer.on("afterRender",function(){if(N&&I&&(R.isFocused()||R.searchBox&&R.searchBox.isFocused())){var B=R.renderer,K=B.$cursorLayer.$pixelPos,U=B.layerConfig,G=K.top-U.offset;K.top>=0&&G+I.top<0?N=!0:K.top<U.height&&K.top+I.top+U.lineHeight>window.innerHeight?N=!1:N=null,N!=null&&(M.style.top=G+"px",M.style.left=K.left+"px",M.style.height=U.lineHeight+"px",M.scrollIntoView(N)),N=I=null}});this.setAutoScrollEditorIntoView=function(B){B||(delete this.setAutoScrollEditorIntoView,this.off("changeSelection",F),this.renderer.off("afterRender",x),this.renderer.off("beforeRender",D))}}},this.$resetCursorStyle=function(){var S=this.$cursorStyle||"ace",I=this.renderer.$cursorLayer;I&&(I.setSmoothBlinking(/smooth/.test(S)),I.isBlinking=!this.$readOnly&&S!="wide",s.setCssClass(I.element,"ace_slim-cursors",/slim/.test(S)))},this.prompt=function(S,I,R){var N=this;E.loadModule("./ext/prompt",function(M){M.prompt(N,S,I,R)})}}).call(T.prototype),E.defineOptions(T.prototype,"editor",{selectionStyle:{set:function(S){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:S})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(S){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(S){this.textInput.setReadOnly(S),this.$resetCursorStyle()},initialValue:!1},copyWithEmptySelection:{set:function(S){this.textInput.setCopyWithEmptySelection(S)},initialValue:!1},cursorStyle:{set:function(S){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},enableAutoIndent:{initialValue:!0},autoScrollEditorIntoView:{set:function(S){this.setAutoScrollEditorIntoView(S)}},keyboardHandler:{set:function(S){this.setKeyboardHandler(S)},get:function(){return this.$keybindingId},handlesSet:!0},value:{set:function(S){this.session.setValue(S)},get:function(){return this.getValue()},handlesSet:!0,hidden:!0},session:{set:function(S){this.setSession(S)},get:function(){return this.session},handlesSet:!0,hidden:!0},showLineNumbers:{set:function(S){this.renderer.$gutterLayer.setShowLineNumbers(S),this.renderer.$loop.schedule(this.renderer.CHANGE_GUTTER),S&&this.$relativeLineNumbers?$.attach(this):$.detach(this)},initialValue:!0},relativeLineNumbers:{set:function(S){this.$showLineNumbers&&S?$.attach(this):$.detach(this)}},placeholder:{set:function(S){this.$updatePlaceholder||(this.$updatePlaceholder=(function(){var I=this.session&&(this.renderer.$composition||this.getValue());if(I&&this.renderer.placeholderNode)this.renderer.off("afterRender",this.$updatePlaceholder),s.removeCssClass(this.container,"ace_hasPlaceholder"),this.renderer.placeholderNode.remove(),this.renderer.placeholderNode=null;else if(!I&&!this.renderer.placeholderNode){this.renderer.on("afterRender",this.$updatePlaceholder),s.addCssClass(this.container,"ace_hasPlaceholder");var R=s.createElement("div");R.className="ace_placeholder",R.textContent=this.$placeholder||"",this.renderer.placeholderNode=R,this.renderer.content.appendChild(this.renderer.placeholderNode)}else!I&&this.renderer.placeholderNode&&(this.renderer.placeholderNode.textContent=this.$placeholder||"")}).bind(this),this.on("input",this.$updatePlaceholder)),this.$updatePlaceholder()}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",displayIndentGuides:"renderer",showGutter:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",hasCssTransforms:"renderer",maxPixelHeight:"renderer",useTextareaForIME:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimeout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",navigateWithinSoftTabs:"session",tabSize:"session",wrap:"session",indentedSoftWrap:"session",foldStyle:"session",mode:"session"});var $={getText:function(S,I){return(Math.abs(S.selection.lead.row-I)||I+1+(I<9?"":""))+""},getWidth:function(S,I,R){return Math.max(I.toString().length,(R.lastRow+1).toString().length,2)*R.characterWidth},update:function(S,I){I.renderer.$loop.schedule(I.renderer.CHANGE_GUTTER)},attach:function(S){S.renderer.$gutterLayer.$renderer=this,S.on("changeSelection",this.update),this.update(null,S)},detach:function(S){S.renderer.$gutterLayer.$renderer==this&&(S.renderer.$gutterLayer.$renderer=null),S.off("changeSelection",this.update),this.update(null,S)}};n.Editor=T}),ace.define("ace/undomanager",["require","exports","module","ace/range"],function(t,n,r){var a=function(){this.$maxRev=0,this.$fromUndo=!1,this.reset()};(function(){this.addSession=function(k){this.$session=k},this.add=function(k,T,$){this.$fromUndo||k!=this.$lastDelta&&(this.$keepRedoStack||(this.$redoStack.length=0),(T===!1||!this.lastDeltas)&&(this.lastDeltas=[],this.$undoStack.push(this.lastDeltas),k.id=this.$rev=++this.$maxRev),(k.action=="remove"||k.action=="insert")&&(this.$lastDelta=k),this.lastDeltas.push(k))},this.addSelection=function(k,T){this.selections.push({value:k,rev:T||this.$rev})},this.startNewGroup=function(){return this.lastDeltas=null,this.$rev},this.markIgnored=function(k,T){T==null&&(T=this.$rev+1);for(var $=this.$undoStack,S=$.length;S--;){var I=$[S][0];if(I.id<=k)break;I.id<T&&(I.ignore=!0)}this.lastDeltas=null},this.getSelection=function(k,T){for(var $=this.selections,S=$.length;S--;){var I=$[S];if(I.rev<k)return T&&(I=$[S+1]),I}},this.getRevision=function(){return this.$rev},this.getDeltas=function(k,T){T==null&&(T=this.$rev+1);for(var $=this.$undoStack,S=null,I=0,R=$.length;R--;){var N=$[R][0];if(N.id<T&&!S&&(S=R+1),N.id<=k){I=R+1;break}}return $.slice(I,S)},this.getChangedRanges=function(k,T){T==null&&(T=this.$rev+1)},this.getChangedLines=function(k,T){T==null&&(T=this.$rev+1)},this.undo=function(k,T){this.lastDeltas=null;var $=this.$undoStack;if(s($,$.length)){k||(k=this.$session),this.$redoStackBaseRev!==this.$rev&&this.$redoStack.length&&(this.$redoStack=[]),this.$fromUndo=!0;var S=$.pop(),I=null;return S&&(I=k.undoChanges(S,T),this.$redoStack.push(S),this.$syncRev()),this.$fromUndo=!1,I}},this.redo=function(k,T){if(this.lastDeltas=null,k||(k=this.$session),this.$fromUndo=!0,this.$redoStackBaseRev!=this.$rev){var $=this.getDeltas(this.$redoStackBaseRev,this.$rev+1);A(this.$redoStack,$),this.$redoStackBaseRev=this.$rev,this.$redoStack.forEach(function(R){R[0].id=++this.$maxRev},this)}var S=this.$redoStack.pop(),I=null;return S&&(I=k.redoChanges(S,T),this.$undoStack.push(S),this.$syncRev()),this.$fromUndo=!1,I},this.$syncRev=function(){var k=this.$undoStack,T=k[k.length-1],$=T&&T[0].id||0;this.$redoStackBaseRev=$,this.$rev=$},this.reset=function(){this.lastDeltas=null,this.$lastDelta=null,this.$undoStack=[],this.$redoStack=[],this.$rev=0,this.mark=0,this.$redoStackBaseRev=this.$rev,this.selections=[]},this.canUndo=function(){return this.$undoStack.length>0},this.canRedo=function(){return this.$redoStack.length>0},this.bookmark=function(k){k==null&&(k=this.$rev),this.mark=k},this.isAtBookmark=function(){return this.$rev===this.mark},this.toJSON=function(){},this.fromJSON=function(){},this.hasUndo=this.canUndo,this.hasRedo=this.canRedo,this.isClean=this.isAtBookmark,this.markClean=this.bookmark,this.$prettyPrint=function(k){return k?m(k):m(this.$undoStack)+`
---
`+m(this.$redoStack)}}).call(a.prototype);function s(k,T){for(var $=T;$--;){var S=k[$];if(S&&!S[0].ignore){for(;$<T-1;){var I=g(k[$],k[$+1]);k[$]=I[0],k[$+1]=I[1],$++}return!0}}}var l=t("./range").Range,u=l.comparePoints;l.comparePoints;function d(k){return{row:k.row,column:k.column}}function f(k){return{start:d(k.start),end:d(k.end),action:k.action,lines:k.lines.slice()}}function m(k){if(k=k||this,Array.isArray(k))return k.map(m).join(`
`);var T="";return k.action?(T=k.action=="insert"?"+":"-",T+="["+k.lines+"]"):k.value&&(Array.isArray(k.value)?T=k.value.map(h).join(`
`):T=h(k.value)),k.start&&(T+=h(k)),(k.id||k.rev)&&(T+="	("+(k.id||k.rev)+")"),T}function h(k){return k.start.row+":"+k.start.column+"=>"+k.end.row+":"+k.end.column}function p(k,T){var $=k.action=="insert",S=T.action=="insert";if($&&S)if(u(T.start,k.end)>=0)v(T,k,-1);else if(u(T.start,k.start)<=0)v(k,T,1);else return null;else if($&&!S)if(u(T.start,k.end)>=0)v(T,k,-1);else if(u(T.end,k.start)<=0)v(k,T,-1);else return null;else if(!$&&S)if(u(T.start,k.start)>=0)v(T,k,1);else if(u(T.start,k.start)<=0)v(k,T,1);else return null;else if(!$&&!S)if(u(T.start,k.start)>=0)v(T,k,1);else if(u(T.end,k.start)<=0)v(k,T,-1);else return null;return[T,k]}function g(k,T){for(var $=k.length;$--;)for(var S=0;S<T.length;S++)if(!p(k[$],T[S])){for(;$<k.length;){for(;S--;)p(T[S],k[$]);S=T.length,$++}return[k,T]}return k.selectionBefore=T.selectionBefore=k.selectionAfter=T.selectionAfter=null,[T,k]}function b(k,T){var $=k.action=="insert",S=T.action=="insert";if($&&S)u(k.start,T.start)<0?v(T,k,1):v(k,T,1);else if($&&!S)u(k.start,T.end)>=0?v(k,T,-1):(u(k.start,T.start)<=0||v(k,l.fromPoints(T.start,k.start),-1),v(T,k,1));else if(!$&&S)u(T.start,k.end)>=0?v(T,k,-1):(u(T.start,k.start)<=0||v(T,l.fromPoints(k.start,T.start),-1),v(k,T,1));else if(!$&&!S)if(u(T.start,k.end)>=0)v(T,k,-1);else if(u(T.end,k.start)<=0)v(k,T,-1);else{var I,R;return u(k.start,T.start)<0&&(I=k,k=C(k,T.start)),u(k.end,T.end)>0&&(R=C(k,T.end)),y(T.end,k.start,k.end,-1),R&&!I&&(k.lines=R.lines,k.start=R.start,k.end=R.end,R=k),[T,I,R].filter(Boolean)}return[T,k]}function v(k,T,$){y(k.start,T.start,T.end,$),y(k.end,T.start,T.end,$)}function y(k,T,$,S){k.row==(S==1?T:$).row&&(k.column+=S*($.column-T.column)),k.row+=S*($.row-T.row)}function C(k,T){var $=k.lines,S=k.end;k.end=d(T);var I=k.end.row-k.start.row,R=$.splice(I,$.length),N=I?T.column:T.column-k.start.column;$.push(R[0].substring(0,N)),R[0]=R[0].substr(N);var M={start:d(T),end:S,lines:R,action:k.action};return M}function E(k,T){T=f(T);for(var $=k.length;$--;){for(var S=k[$],I=0;I<S.length;I++){var R=S[I],N=b(R,T);T=N[0],N.length!=2&&(N[2]?(S.splice(I+1,1,N[1],N[2]),I++):N[1]||(S.splice(I,1),I--))}S.length||k.splice($,1)}return k}function A(k,T){for(var $=0;$<T.length;$++)for(var S=T[$],I=0;I<S.length;I++)E(k,S[I])}n.UndoManager=a}),ace.define("ace/layer/lines",["require","exports","module","ace/lib/dom"],function(t,n,r){var a=t("../lib/dom"),s=function(l,u){this.element=l,this.canvasHeight=u||5e5,this.element.style.height=this.canvasHeight*2+"px",this.cells=[],this.cellCache=[],this.$offsetCoefficient=0};(function(){this.moveContainer=function(l){a.translate(this.element,0,-(l.firstRowScreen*l.lineHeight%this.canvasHeight)-l.offset*this.$offsetCoefficient)},this.pageChanged=function(l,u){return Math.floor(l.firstRowScreen*l.lineHeight/this.canvasHeight)!==Math.floor(u.firstRowScreen*u.lineHeight/this.canvasHeight)},this.computeLineTop=function(l,u,d){var f=u.firstRowScreen*u.lineHeight,m=Math.floor(f/this.canvasHeight),h=d.documentToScreenRow(l,0)*u.lineHeight;return h-m*this.canvasHeight},this.computeLineHeight=function(l,u,d){return u.lineHeight*d.getRowLineCount(l)},this.getLength=function(){return this.cells.length},this.get=function(l){return this.cells[l]},this.shift=function(){this.$cacheCell(this.cells.shift())},this.pop=function(){this.$cacheCell(this.cells.pop())},this.push=function(l){if(Array.isArray(l)){this.cells.push.apply(this.cells,l);for(var u=a.createFragment(this.element),d=0;d<l.length;d++)u.appendChild(l[d].element);this.element.appendChild(u)}else this.cells.push(l),this.element.appendChild(l.element)},this.unshift=function(l){if(Array.isArray(l)){this.cells.unshift.apply(this.cells,l);for(var u=a.createFragment(this.element),d=0;d<l.length;d++)u.appendChild(l[d].element);this.element.firstChild?this.element.insertBefore(u,this.element.firstChild):this.element.appendChild(u)}else this.cells.unshift(l),this.element.insertAdjacentElement("afterbegin",l.element)},this.last=function(){return this.cells.length?this.cells[this.cells.length-1]:null},this.$cacheCell=function(l){l&&(l.element.remove(),this.cellCache.push(l))},this.createCell=function(l,u,d,f){var m=this.cellCache.pop();if(!m){var h=a.createElement("div");f&&f(h),this.element.appendChild(h),m={element:h,text:"",row:l}}return m.row=l,m}}).call(s.prototype),n.Lines=s}),ace.define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/layer/lines"],function(t,n,r){var a=t("../lib/dom"),s=t("../lib/oop"),l=t("../lib/lang"),u=t("../lib/event_emitter").EventEmitter,d=t("./lines").Lines,f=function(h){this.element=a.createElement("div"),this.element.className="ace_layer ace_gutter-layer",h.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$lines=new d(this.element),this.$lines.$offsetCoefficient=1};(function(){s.implement(this,u),this.setSession=function(h){this.session&&this.session.off("change",this.$updateAnnotations),this.session=h,h&&h.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(h,p){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(h,p)},this.removeGutterDecoration=function(h,p){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(h,p)},this.setAnnotations=function(h){this.$annotations=[];for(var p=0;p<h.length;p++){var g=h[p],b=g.row,v=this.$annotations[b];v||(v=this.$annotations[b]={text:[]});var y=g.text;y=y?l.escapeHTML(y):g.html||"",v.text.indexOf(y)===-1&&v.text.push(y);var C=g.type,E=g.className;E?v.className=E:C=="error"?v.className=" ace_error":C=="warning"&&v.className!=" ace_error"?v.className=" ace_warning":C=="info"&&!v.className&&(v.className=" ace_info")}},this.$updateAnnotations=function(h){if(this.$annotations.length){var p=h.start.row,g=h.end.row-p;if(g!==0)if(h.action=="remove")this.$annotations.splice(p,g+1,null);else{var b=new Array(g+1);b.unshift(p,1),this.$annotations.splice.apply(this.$annotations,b)}}},this.update=function(h){this.config=h;var p=this.session,g=h.firstRow,b=Math.min(h.lastRow+h.gutterOffset,p.getLength()-1);this.oldLastRow=b,this.config=h,this.$lines.moveContainer(h),this.$updateCursorRow();for(var v=p.getNextFoldLine(g),y=v?v.start.row:1/0,C=null,E=-1,A=g;;){if(A>y&&(A=v.end.row+1,v=p.getNextFoldLine(A,v),y=v?v.start.row:1/0),A>b){for(;this.$lines.getLength()>E+1;)this.$lines.pop();break}C=this.$lines.get(++E),C?C.row=A:(C=this.$lines.createCell(A,h,this.session,m),this.$lines.push(C)),this.$renderCell(C,h,v,A),A++}this._signal("afterRender"),this.$updateGutterWidth(h)},this.$updateGutterWidth=function(h){var p=this.session,g=p.gutterRenderer||this.$renderer,b=p.$firstLineNumber,v=this.$lines.last()?this.$lines.last().text:"";(this.$fixedWidth||p.$useWrapMode)&&(v=p.getLength()+b-1);var y=g?g.getWidth(p,v,h):v.toString().length*h.characterWidth,C=this.$padding||this.$computePadding();y+=C.left+C.right,y!==this.gutterWidth&&!isNaN(y)&&(this.gutterWidth=y,this.element.parentNode.style.width=this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._signal("changeGutterWidth",y))},this.$updateCursorRow=function(){if(this.$highlightGutterLine){var h=this.session.selection.getCursor();this.$cursorRow!==h.row&&(this.$cursorRow=h.row)}},this.updateLineHighlight=function(){if(this.$highlightGutterLine){var h=this.session.selection.cursor.row;if(this.$cursorRow=h,!(this.$cursorCell&&this.$cursorCell.row==h)){this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ",""));var p=this.$lines.cells;this.$cursorCell=null;for(var g=0;g<p.length;g++){var b=p[g];if(b.row>=this.$cursorRow){if(b.row>this.$cursorRow){var v=this.session.getFoldLine(this.$cursorRow);if(g>0&&v&&v.start.row==p[g-1].row)b=p[g-1];else break}b.element.className="ace_gutter-active-line "+b.element.className,this.$cursorCell=b;break}}}}},this.scrollLines=function(h){var p=this.config;if(this.config=h,this.$updateCursorRow(),this.$lines.pageChanged(p,h))return this.update(h);this.$lines.moveContainer(h);var g=Math.min(h.lastRow+h.gutterOffset,this.session.getLength()-1),b=this.oldLastRow;if(this.oldLastRow=g,!p||b<h.firstRow)return this.update(h);if(g<p.firstRow)return this.update(h);if(p.firstRow<h.firstRow)for(var v=this.session.getFoldedRowCount(p.firstRow,h.firstRow-1);v>0;v--)this.$lines.shift();if(b>g)for(var v=this.session.getFoldedRowCount(g+1,b);v>0;v--)this.$lines.pop();h.firstRow<p.firstRow&&this.$lines.unshift(this.$renderLines(h,h.firstRow,p.firstRow-1)),g>b&&this.$lines.push(this.$renderLines(h,b+1,g)),this.updateLineHighlight(),this._signal("afterRender"),this.$updateGutterWidth(h)},this.$renderLines=function(h,p,g){for(var b=[],v=p,y=this.session.getNextFoldLine(v),C=y?y.start.row:1/0;v>C&&(v=y.end.row+1,y=this.session.getNextFoldLine(v,y),C=y?y.start.row:1/0),!(v>g);){var E=this.$lines.createCell(v,h,this.session,m);this.$renderCell(E,h,y,v),b.push(E),v++}return b},this.$renderCell=function(h,p,g,b){var v=h.element,y=this.session,C=v.childNodes[0],E=v.childNodes[1],A=y.$firstLineNumber,k=y.$breakpoints,T=y.$decorations,$=y.gutterRenderer||this.$renderer,S=this.$showFoldWidgets&&y.foldWidgets,I=g?g.start.row:Number.MAX_VALUE,R="ace_gutter-cell ";if(this.$highlightGutterLine&&(b==this.$cursorRow||g&&b<this.$cursorRow&&b>=I&&this.$cursorRow<=g.end.row)&&(R+="ace_gutter-active-line ",this.$cursorCell!=h&&(this.$cursorCell&&(this.$cursorCell.element.className=this.$cursorCell.element.className.replace("ace_gutter-active-line ","")),this.$cursorCell=h)),k[b]&&(R+=k[b]),T[b]&&(R+=T[b]),this.$annotations[b]&&(R+=this.$annotations[b].className),v.className!=R&&(v.className=R),S){var N=S[b];N==null&&(N=S[b]=y.getFoldWidget(b))}if(N){var R="ace_fold-widget ace_"+N;N=="start"&&b==I&&b<g.end.row?R+=" ace_closed":R+=" ace_open",E.className!=R&&(E.className=R);var M=p.lineHeight+"px";a.setStyle(E.style,"height",M),a.setStyle(E.style,"display","inline-block")}else E&&a.setStyle(E.style,"display","none");var F=($?$.getText(y,b):b+A).toString();return F!==C.data&&(C.data=F),a.setStyle(h.element.style,"height",this.$lines.computeLineHeight(b,p,y)+"px"),a.setStyle(h.element.style,"top",this.$lines.computeLineTop(b,p,y)+"px"),h.text=F,h},this.$fixedWidth=!1,this.$highlightGutterLine=!0,this.$renderer="",this.setHighlightGutterLine=function(h){this.$highlightGutterLine=h},this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(h){this.$renderer=!h&&{getWidth:function(){return 0},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(h){h?a.addCssClass(this.element,"ace_folding-enabled"):a.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=h,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var h=a.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=(parseInt(h.borderLeftWidth)||0)+(parseInt(h.paddingLeft)||0)+1,this.$padding.right=(parseInt(h.borderRightWidth)||0)+(parseInt(h.paddingRight)||0),this.$padding},this.getRegion=function(h){var p=this.$padding||this.$computePadding(),g=this.element.getBoundingClientRect();if(h.x<p.left+g.left)return"markers";if(this.$showFoldWidgets&&h.x>g.right-p.right)return"foldWidgets"}}).call(f.prototype);function m(h){var p=document.createTextNode("");h.appendChild(p);var g=a.createElement("span");return h.appendChild(g),h}n.Gutter=f}),ace.define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(t,n,r){var a=t("../range").Range,s=t("../lib/dom"),l=function(u){this.element=s.createElement("div"),this.element.className="ace_layer ace_marker-layer",u.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(d){this.$padding=d},this.setSession=function(d){this.session=d},this.setMarkers=function(d){this.markers=d},this.elt=function(d,f){var m=this.i!=-1&&this.element.childNodes[this.i];m?this.i++:(m=document.createElement("div"),this.element.appendChild(m),this.i=-1),m.style.cssText=f,m.className=d},this.update=function(d){if(d){this.config=d,this.i=0;var f;for(var m in this.markers){var h=this.markers[m];if(!h.range){h.update(f,this,this.session,d);continue}var p=h.range.clipRows(d.firstRow,d.lastRow);if(!p.isEmpty())if(p=p.toScreenRange(this.session),h.renderer){var g=this.$getTop(p.start.row,d),b=this.$padding+p.start.column*d.characterWidth;h.renderer(f,p,b,g,d)}else h.type=="fullLine"?this.drawFullLineMarker(f,p,h.clazz,d):h.type=="screenLine"?this.drawScreenLineMarker(f,p,h.clazz,d):p.isMultiLine()?h.type=="text"?this.drawTextMarker(f,p,h.clazz,d):this.drawMultiLineMarker(f,p,h.clazz,d):this.drawSingleLineMarker(f,p,h.clazz+" ace_start ace_br15",d)}if(this.i!=-1)for(;this.i<this.element.childElementCount;)this.element.removeChild(this.element.lastChild)}},this.$getTop=function(d,f){return(d-f.firstRowScreen)*f.lineHeight};function u(d,f,m,h){return(d?1:0)|(f?2:0)|(m?4:0)|(h?8:0)}this.drawTextMarker=function(d,f,m,h,p){for(var g=this.session,b=f.start.row,v=f.end.row,y=b,C=0,E=0,A=g.getScreenLastRowColumn(y),k=new a(y,f.start.column,y,E);y<=v;y++)k.start.row=k.end.row=y,k.start.column=y==b?f.start.column:g.getRowWrapIndent(y),k.end.column=A,C=E,E=A,A=y+1<v?g.getScreenLastRowColumn(y+1):y==v?0:f.end.column,this.drawSingleLineMarker(d,k,m+(y==b?" ace_start":"")+" ace_br"+u(y==b||y==b+1&&f.start.column,C<E,E>A,y==v),h,y==v?0:1,p)},this.drawMultiLineMarker=function(d,f,m,h,p){var g=this.$padding,b=h.lineHeight,v=this.$getTop(f.start.row,h),y=g+f.start.column*h.characterWidth;if(p=p||"",this.session.$bidiHandler.isBidiRow(f.start.row)){var C=f.clone();C.end.row=C.start.row,C.end.column=this.session.getLine(C.start.row).length,this.drawBidiSingleLineMarker(d,C,m+" ace_br1 ace_start",h,null,p)}else this.elt(m+" ace_br1 ace_start","height:"+b+"px;right:0;top:"+v+"px;left:"+y+"px;"+(p||""));if(this.session.$bidiHandler.isBidiRow(f.end.row)){var C=f.clone();C.start.row=C.end.row,C.start.column=0,this.drawBidiSingleLineMarker(d,C,m+" ace_br12",h,null,p)}else{v=this.$getTop(f.end.row,h);var E=f.end.column*h.characterWidth;this.elt(m+" ace_br12","height:"+b+"px;width:"+E+"px;top:"+v+"px;left:"+g+"px;"+(p||""))}if(b=(f.end.row-f.start.row-1)*h.lineHeight,!(b<=0)){v=this.$getTop(f.start.row+1,h);var A=(f.start.column?1:0)|(f.end.column?0:8);this.elt(m+(A?" ace_br"+A:""),"height:"+b+"px;right:0;top:"+v+"px;left:"+g+"px;"+(p||""))}},this.drawSingleLineMarker=function(d,f,m,h,p,g){if(this.session.$bidiHandler.isBidiRow(f.start.row))return this.drawBidiSingleLineMarker(d,f,m,h,p,g);var b=h.lineHeight,v=(f.end.column+(p||0)-f.start.column)*h.characterWidth,y=this.$getTop(f.start.row,h),C=this.$padding+f.start.column*h.characterWidth;this.elt(m,"height:"+b+"px;width:"+v+"px;top:"+y+"px;left:"+C+"px;"+(g||""))},this.drawBidiSingleLineMarker=function(d,f,m,h,p,g){var b=h.lineHeight,v=this.$getTop(f.start.row,h),y=this.$padding,C=this.session.$bidiHandler.getSelections(f.start.column,f.end.column);C.forEach(function(E){this.elt(m,"height:"+b+"px;width:"+E.width+(p||0)+"px;top:"+v+"px;left:"+(y+E.left)+"px;"+(g||""))},this)},this.drawFullLineMarker=function(d,f,m,h,p){var g=this.$getTop(f.start.row,h),b=h.lineHeight;f.start.row!=f.end.row&&(b+=this.$getTop(f.end.row,h)-g),this.elt(m,"height:"+b+"px;top:"+g+"px;left:0;right:0;"+(p||""))},this.drawScreenLineMarker=function(d,f,m,h,p){var g=this.$getTop(f.start.row,h),b=h.lineHeight;this.elt(m,"height:"+b+"px;top:"+g+"px;left:0;right:0;"+(p||""))}}).call(l.prototype),n.Marker=l}),ace.define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/layer/lines","ace/lib/event_emitter"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/dom"),l=t("../lib/lang"),u=t("./lines").Lines,d=t("../lib/event_emitter").EventEmitter,f=function(m){this.dom=s,this.element=this.dom.createElement("div"),this.element.className="ace_layer ace_text-layer",m.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this),this.$lines=new u(this.element)};(function(){a.implement(this,d),this.EOF_CHAR="",this.EOL_CHAR_LF="",this.EOL_CHAR_CRLF="",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="",this.SPACE_CHAR="",this.$padding=0,this.MAX_LINE_LENGTH=1e4,this.$updateEolChar=function(){var m=this.session.doc,h=m.getNewLineCharacter()==`
`&&m.getNewLineMode()!="windows",p=h?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=p)return this.EOL_CHAR=p,!0},this.setPadding=function(m){this.$padding=m,this.element.style.margin="0 "+m+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(m){this.$fontMetrics=m,this.$fontMetrics.on("changeCharacterSize",(function(h){this._signal("changeCharacterSize",h)}).bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(m){this.session=m,m&&this.$computeTabString()},this.showInvisibles=!1,this.showSpaces=!1,this.showTabs=!1,this.showEOL=!1,this.setShowInvisibles=function(m){return this.showInvisibles==m?!1:(this.showInvisibles=m,typeof m=="string"?(this.showSpaces=/tab/i.test(m),this.showTabs=/space/i.test(m),this.showEOL=/eol/i.test(m)):this.showSpaces=this.showTabs=this.showEOL=m,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(m){return this.displayIndentGuides==m?!1:(this.displayIndentGuides=m,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var m=this.session.getTabSize();this.tabSize=m;for(var h=this.$tabStrings=[0],p=1;p<m+1;p++)if(this.showTabs){var g=this.dom.createElement("span");g.className="ace_invisible ace_invisible_tab",g.textContent=l.stringRepeat(this.TAB_CHAR,p),h.push(g)}else h.push(this.dom.createTextNode(l.stringRepeat(" ",p),this.element));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var b="ace_indent-guide",v=this.showSpaces?" ace_invisible ace_invisible_space":"",y=this.showSpaces?l.stringRepeat(this.SPACE_CHAR,this.tabSize):l.stringRepeat(" ",this.tabSize),C=this.showTabs?" ace_invisible ace_invisible_tab":"",E=this.showTabs?l.stringRepeat(this.TAB_CHAR,this.tabSize):y,g=this.dom.createElement("span");g.className=b+v,g.textContent=y,this.$tabStrings[" "]=g;var g=this.dom.createElement("span");g.className=b+C,g.textContent=E,this.$tabStrings["	"]=g}},this.updateLines=function(m,h,p){if(this.config.lastRow!=m.lastRow||this.config.firstRow!=m.firstRow)return this.update(m);this.config=m;for(var g=Math.max(h,m.firstRow),b=Math.min(p,m.lastRow),v=this.element.childNodes,y=0,E=m.firstRow;E<g;E++){var A=this.session.getFoldLine(E);if(A)if(A.containsRow(g)){g=A.start.row;break}else E=A.end.row;y++}for(var C=!1,E=g,A=this.session.getNextFoldLine(E),k=A?A.start.row:1/0;E>k&&(E=A.end.row+1,A=this.session.getNextFoldLine(E,A),k=A?A.start.row:1/0),!(E>b);){var T=v[y++];if(T){this.dom.removeChildren(T),this.$renderLine(T,E,E==k?A:!1),C&&(T.style.top=this.$lines.computeLineTop(E,m,this.session)+"px");var $=m.lineHeight*this.session.getRowLength(E)+"px";T.style.height!=$&&(C=!0,T.style.height=$)}E++}if(C)for(;y<this.$lines.cells.length;){var S=this.$lines.cells[y++];S.element.style.top=this.$lines.computeLineTop(S.row,m,this.session)+"px"}},this.scrollLines=function(m){var h=this.config;if(this.config=m,this.$lines.pageChanged(h,m))return this.update(m);this.$lines.moveContainer(m);var p=m.lastRow,g=h?h.lastRow:-1;if(!h||g<m.firstRow)return this.update(m);if(p<h.firstRow)return this.update(m);if(!h||h.lastRow<m.firstRow)return this.update(m);if(m.lastRow<h.firstRow)return this.update(m);if(h.firstRow<m.firstRow)for(var b=this.session.getFoldedRowCount(h.firstRow,m.firstRow-1);b>0;b--)this.$lines.shift();if(h.lastRow>m.lastRow)for(var b=this.session.getFoldedRowCount(m.lastRow+1,h.lastRow);b>0;b--)this.$lines.pop();m.firstRow<h.firstRow&&this.$lines.unshift(this.$renderLinesFragment(m,m.firstRow,h.firstRow-1)),m.lastRow>h.lastRow&&this.$lines.push(this.$renderLinesFragment(m,h.lastRow+1,m.lastRow))},this.$renderLinesFragment=function(m,h,p){for(var g=[],b=h,v=this.session.getNextFoldLine(b),y=v?v.start.row:1/0;b>y&&(b=v.end.row+1,v=this.session.getNextFoldLine(b,v),y=v?v.start.row:1/0),!(b>p);){var C=this.$lines.createCell(b,m,this.session),E=C.element;this.dom.removeChildren(E),s.setStyle(E.style,"height",this.$lines.computeLineHeight(b,m,this.session)+"px"),s.setStyle(E.style,"top",this.$lines.computeLineTop(b,m,this.session)+"px"),this.$renderLine(E,b,b==y?v:!1),this.$useLineGroups()?E.className="ace_line_group":E.className="ace_line",g.push(C),b++}return g},this.update=function(m){this.$lines.moveContainer(m),this.config=m;for(var h=m.firstRow,p=m.lastRow,g=this.$lines;g.getLength();)g.pop();g.push(this.$renderLinesFragment(m,h,p))},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(m,h,p,g){for(var b=this,v=/(\t)|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\uFEFF\uFFF9-\uFFFC\u2066\u2067\u2068\u202A\u202B\u202D\u202E\u202C\u2069]+)|(\u3000)|([\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3001-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]|[\uD800-\uDBFF][\uDC00-\uDFFF])/g,y=this.dom.createFragment(this.element),C,E=0;C=v.exec(g);){var A=C[1],k=C[2],T=C[3],$=C[4],S=C[5];if(!(!b.showSpaces&&k)){var I=E!=C.index?g.slice(E,C.index):"";if(E=C.index+C[0].length,I&&y.appendChild(this.dom.createTextNode(I,this.element)),A){var R=b.session.getScreenTabSize(h+C.index);y.appendChild(b.$tabStrings[R].cloneNode(!0)),h+=R-1}else if(k)if(b.showSpaces){var N=this.dom.createElement("span");N.className="ace_invisible ace_invisible_space",N.textContent=l.stringRepeat(b.SPACE_CHAR,k.length),y.appendChild(N)}else y.appendChild(this.com.createTextNode(k,this.element));else if(T){var N=this.dom.createElement("span");N.className="ace_invisible ace_invisible_space ace_invalid",N.textContent=l.stringRepeat(b.SPACE_CHAR,T.length),y.appendChild(N)}else if($){h+=1;var N=this.dom.createElement("span");N.style.width=b.config.characterWidth*2+"px",N.className=b.showSpaces?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",N.textContent=b.showSpaces?b.SPACE_CHAR:$,y.appendChild(N)}else if(S){h+=1;var N=this.dom.createElement("span");N.style.width=b.config.characterWidth*2+"px",N.className="ace_cjk",N.textContent=S,y.appendChild(N)}}}if(y.appendChild(this.dom.createTextNode(E?g.slice(E):g,this.element)),this.$textToken[p.type])m.appendChild(y);else{var M="ace_"+p.type.replace(/\./g," ace_"),N=this.dom.createElement("span");p.type=="fold"&&(N.style.width=p.value.length*this.config.characterWidth+"px"),N.className=M,N.appendChild(y),m.appendChild(N)}return h+g.length},this.renderIndentGuide=function(m,h,p){var g=h.search(this.$indentGuideRe);if(g<=0||g>=p)return h;if(h[0]==" "){g-=g%this.tabSize;for(var b=g/this.tabSize,v=0;v<b;v++)m.appendChild(this.$tabStrings[" "].cloneNode(!0));return h.substr(g)}else if(h[0]=="	"){for(var v=0;v<g;v++)m.appendChild(this.$tabStrings["	"].cloneNode(!0));return h.substr(g)}return h},this.$createLineElement=function(m){var h=this.dom.createElement("div");return h.className="ace_line",h.style.height=this.config.lineHeight+"px",h},this.$renderWrappedLine=function(m,h,p){var g=0,b=0,v=p[0],y=0,C=this.$createLineElement();m.appendChild(C);for(var E=0;E<h.length;E++){var A=h[E],k=A.value;if(E==0&&this.displayIndentGuides){if(g=k.length,k=this.renderIndentGuide(C,k,v),!k)continue;g-=k.length}if(g+k.length<v)y=this.$renderToken(C,y,A,k),g+=k.length;else{for(;g+k.length>=v;)y=this.$renderToken(C,y,A,k.substring(0,v-g)),k=k.substring(v-g),g=v,C=this.$createLineElement(),m.appendChild(C),C.appendChild(this.dom.createTextNode(l.stringRepeat("",p.indent),this.element)),b++,y=0,v=p[b]||Number.MAX_VALUE;k.length!=0&&(g+=k.length,y=this.$renderToken(C,y,A,k))}}p[p.length-1]>this.MAX_LINE_LENGTH&&this.$renderOverflowMessage(C,y,null,"",!0)},this.$renderSimpleLine=function(m,h){for(var p=0,g=0;g<h.length;g++){var b=h[g],v=b.value;if(!(g==0&&this.displayIndentGuides&&(v=this.renderIndentGuide(m,v),!v))){if(p+v.length>this.MAX_LINE_LENGTH)return this.$renderOverflowMessage(m,p,b,v);p=this.$renderToken(m,p,b,v)}}},this.$renderOverflowMessage=function(m,h,p,g,b){p&&this.$renderToken(m,h,p,g.slice(0,this.MAX_LINE_LENGTH-h));var v=this.dom.createElement("span");v.className="ace_inline_button ace_keyword ace_toggle_wrap",v.textContent=b?"<hide>":"<click to see more...>",m.appendChild(v)},this.$renderLine=function(m,h,p){if(!p&&p!=!1&&(p=this.session.getFoldLine(h)),p)var g=this.$getFoldLineTokens(h,p);else var g=this.session.getTokens(h);var b=m;if(g.length){var v=this.session.getRowSplitData(h);if(v&&v.length){this.$renderWrappedLine(m,g,v);var b=m.lastChild}else{var b=m;this.$useLineGroups()&&(b=this.$createLineElement(),m.appendChild(b)),this.$renderSimpleLine(b,g)}}else this.$useLineGroups()&&(b=this.$createLineElement(),m.appendChild(b));if(this.showEOL&&b){p&&(h=p.end.row);var y=this.dom.createElement("span");y.className="ace_invisible ace_invisible_eol",y.textContent=h==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,b.appendChild(y)}},this.$getFoldLineTokens=function(m,h){var p=this.session,g=[];function b(y,C,E){for(var A=0,k=0;k+y[A].value.length<C;)if(k+=y[A].value.length,A++,A==y.length)return;if(k!=C){var T=y[A].value.substring(C-k);T.length>E-C&&(T=T.substring(0,E-C)),g.push({type:y[A].type,value:T}),k=C+T.length,A+=1}for(;k<E&&A<y.length;){var T=y[A].value;T.length+k>E?g.push({type:y[A].type,value:T.substring(0,E-k)}):g.push(y[A]),k+=T.length,A+=1}}var v=p.getTokens(m);return h.walk(function(y,C,E,A,k){y!=null?g.push({type:"fold",value:y}):(k&&(v=p.getTokens(C)),v.length&&b(v,A,E))},h.end.row,this.session.getLine(h.end.row).length),g},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){}}).call(f.prototype),n.Text=f}),ace.define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(t,n,r){var a=t("../lib/dom"),s=function(l){this.element=a.createElement("div"),this.element.className="ace_layer ace_cursor-layer",l.appendChild(this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),a.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateOpacity.bind(this)};(function(){this.$updateOpacity=function(l){for(var u=this.cursors,d=u.length;d--;)a.setStyle(u[d].style,"opacity",l?"":"0")},this.$startCssAnimation=function(){for(var l=this.cursors,u=l.length;u--;)l[u].style.animationDuration=this.blinkInterval+"ms";this.$isAnimating=!0,setTimeout((function(){this.$isAnimating&&a.addCssClass(this.element,"ace_animate-blinking")}).bind(this))},this.$stopCssAnimation=function(){this.$isAnimating=!1,a.removeCssClass(this.element,"ace_animate-blinking")},this.$padding=0,this.setPadding=function(l){this.$padding=l},this.setSession=function(l){this.session=l},this.setBlinking=function(l){l!=this.isBlinking&&(this.isBlinking=l,this.restartTimer())},this.setBlinkInterval=function(l){l!=this.blinkInterval&&(this.blinkInterval=l,this.restartTimer())},this.setSmoothBlinking=function(l){l!=this.smoothBlinking&&(this.smoothBlinking=l,a.setCssClass(this.element,"ace_smooth-blinking",l),this.$updateCursors(!0),this.restartTimer())},this.addCursor=function(){var l=a.createElement("div");return l.className="ace_cursor",this.element.appendChild(l),this.cursors.push(l),l},this.removeCursor=function(){if(this.cursors.length>1){var l=this.cursors.pop();return l.parentNode.removeChild(l),l}},this.hideCursor=function(){this.isVisible=!1,a.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,a.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var l=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.$stopCssAnimation(),this.smoothBlinking&&(this.$isSmoothBlinking=!1,a.removeCssClass(this.element,"ace_smooth-blinking")),l(!0),!this.isBlinking||!this.blinkInterval||!this.isVisible){this.$stopCssAnimation();return}if(this.smoothBlinking&&(this.$isSmoothBlinking=!0,setTimeout((function(){this.$isSmoothBlinking&&a.addCssClass(this.element,"ace_smooth-blinking")}).bind(this))),a.HAS_CSS_ANIMATION)this.$startCssAnimation();else{var u=(function(){this.timeoutId=setTimeout(function(){l(!1)},.6*this.blinkInterval)}).bind(this);this.intervalId=setInterval(function(){l(!0),u()},this.blinkInterval),u()}},this.getPixelPosition=function(l,u){if(!this.config||!this.session)return{left:0,top:0};l||(l=this.session.selection.getCursor());var d=this.session.documentToScreenPosition(l),f=this.$padding+(this.session.$bidiHandler.isBidiRow(d.row,l.row)?this.session.$bidiHandler.getPosLeft(d.column):d.column*this.config.characterWidth),m=(d.row-(u?this.config.firstRowScreen:0))*this.config.lineHeight;return{left:f,top:m}},this.isCursorInView=function(l,u){return l.top>=0&&l.top<u.maxHeight},this.update=function(l){this.config=l;var u=this.session.$selectionMarkers,d=0,f=0;(u===void 0||u.length===0)&&(u=[{cursor:null}]);for(var d=0,m=u.length;d<m;d++){var h=this.getPixelPosition(u[d].cursor,!0);if(!((h.top>l.height+l.offset||h.top<0)&&d>1)){var p=this.cursors[f++]||this.addCursor(),g=p.style;this.drawCursor?this.drawCursor(p,h,l,u[d],this.session):this.isCursorInView(h,l)?(a.setStyle(g,"display","block"),a.translate(p,h.left,h.top),a.setStyle(g,"width",Math.round(l.characterWidth)+"px"),a.setStyle(g,"height",l.lineHeight+"px")):a.setStyle(g,"display","none")}}for(;this.cursors.length>f;)this.removeCursor();var b=this.session.getOverwrite();this.$setOverwrite(b),this.$pixelPos=h,this.restartTimer()},this.drawCursor=null,this.$setOverwrite=function(l){l!=this.overwrite&&(this.overwrite=l,l?a.addCssClass(this.element,"ace_overwrite-cursors"):a.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),n.Cursor=s}),ace.define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/dom"),l=t("./lib/event"),u=t("./lib/event_emitter").EventEmitter,d=32768,f=function(p){this.element=s.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=s.createElement("div"),this.inner.className="ace_scrollbar-inner",this.inner.textContent="",this.element.appendChild(this.inner),p.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,l.addListener(this.element,"scroll",this.onScroll.bind(this)),l.addListener(this.element,"mousedown",l.preventDefault)};(function(){a.implement(this,u),this.setVisible=function(p){this.element.style.display=p?"":"none",this.isVisible=p,this.coeff=1}}).call(f.prototype);var m=function(p,g){f.call(this,p),this.scrollTop=0,this.scrollHeight=0,g.$scrollbarWidth=this.width=s.scrollbarWidth(p.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px",this.$minWidth=0};a.inherits(m,f),(function(){this.classSuffix="-v",this.onScroll=function(){if(!this.skipEvent){if(this.scrollTop=this.element.scrollTop,this.coeff!=1){var p=this.element.clientHeight/this.scrollHeight;this.scrollTop=this.scrollTop*(1-p)/(this.coeff-p)}this._emit("scroll",{data:this.scrollTop})}this.skipEvent=!1},this.getWidth=function(){return Math.max(this.isVisible?this.width:0,this.$minWidth||0)},this.setHeight=function(p){this.element.style.height=p+"px"},this.setInnerHeight=this.setScrollHeight=function(p){this.scrollHeight=p,p>d?(this.coeff=d/p,p=d):this.coeff!=1&&(this.coeff=1),this.inner.style.height=p+"px"},this.setScrollTop=function(p){this.scrollTop!=p&&(this.skipEvent=!0,this.scrollTop=p,this.element.scrollTop=p*this.coeff)}}).call(m.prototype);var h=function(p,g){f.call(this,p),this.scrollLeft=0,this.height=g.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};a.inherits(h,f),(function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(p){this.element.style.width=p+"px"},this.setInnerWidth=function(p){this.inner.style.width=p+"px"},this.setScrollWidth=function(p){this.inner.style.width=p+"px"},this.setScrollLeft=function(p){this.scrollLeft!=p&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=p)}}).call(h.prototype),n.ScrollBar=m,n.ScrollBarV=m,n.ScrollBarH=h,n.VScrollBar=m,n.HScrollBar=h}),ace.define("ace/renderloop",["require","exports","module","ace/lib/event"],function(t,n,r){var a=t("./lib/event"),s=function(l,u){this.onRender=l,this.pending=!1,this.changes=0,this.$recursionLimit=2,this.window=u||window;var d=this;this._flush=function(f){d.pending=!1;var m=d.changes;if(m&&(a.blockIdle(100),d.changes=0,d.onRender(m)),d.changes){if(d.$recursionLimit--<0)return;d.schedule()}else d.$recursionLimit=2}};(function(){this.schedule=function(l){this.changes=this.changes|l,this.changes&&!this.pending&&(a.nextFrame(this._flush),this.pending=!0)},this.clear=function(l){var u=this.changes;return this.changes=0,u}}).call(s.prototype),n.RenderLoop=s}),ace.define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/lib/useragent","ace/lib/event_emitter"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/dom"),l=t("../lib/lang"),u=t("../lib/event"),d=t("../lib/useragent"),f=t("../lib/event_emitter").EventEmitter,m=256,h=typeof ResizeObserver=="function",p=200,g=n.FontMetrics=function(b){this.el=s.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=s.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=s.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),b.appendChild(this.el),this.$measureNode.textContent=l.stringRepeat("X",m),this.$characterSize={width:0,height:0},h?this.$addObserver():this.checkForSizeChanges()};(function(){a.implement(this,f),this.$characterSize={width:0,height:0},this.$setMeasureNodeStyles=function(b,v){b.width=b.height="auto",b.left=b.top="0px",b.visibility="hidden",b.position="absolute",b.whiteSpace="pre",d.isIE<8?b["font-family"]="inherit":b.font="inherit",b.overflow=v?"hidden":"visible"},this.checkForSizeChanges=function(b){if(b===void 0&&(b=this.$measureSizes()),b&&(this.$characterSize.width!==b.width||this.$characterSize.height!==b.height)){this.$measureNode.style.fontWeight="bold";var v=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=b,this.charSizes=Object.create(null),this.allowBoldFonts=v&&v.width===b.width&&v.height===b.height,this._emit("changeCharacterSize",{data:b})}},this.$addObserver=function(){var b=this;this.$observer=new window.ResizeObserver(function(v){b.checkForSizeChanges()}),this.$observer.observe(this.$measureNode)},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer||this.$observer)return this.$pollSizeChangesTimer;var b=this;return this.$pollSizeChangesTimer=u.onIdle(function v(){b.checkForSizeChanges(),u.onIdle(v,500)},500)},this.setPolling=function(b){b?this.$pollSizeChanges():this.$pollSizeChangesTimer&&(clearInterval(this.$pollSizeChangesTimer),this.$pollSizeChangesTimer=0)},this.$measureSizes=function(b){var v={height:(b||this.$measureNode).clientHeight,width:(b||this.$measureNode).clientWidth/m};return v.width===0||v.height===0?null:v},this.$measureCharWidth=function(b){this.$main.textContent=l.stringRepeat(b,m);var v=this.$main.getBoundingClientRect();return v.width/m},this.getCharacterWidth=function(b){var v=this.charSizes[b];return v===void 0&&(v=this.charSizes[b]=this.$measureCharWidth(b)/this.$characterSize.width),v},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$observer&&this.$observer.disconnect(),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)},this.$getZoom=function b(v){return!v||!v.parentElement?1:(window.getComputedStyle(v).zoom||1)*b(v.parentElement)},this.$initTransformMeasureNodes=function(){var b=function(v,y){return["div",{style:"position: absolute;top:"+v+"px;left:"+y+"px;"}]};this.els=s.buildDom([b(0,0),b(p,0),b(0,p),b(p,p)],this.el)},this.transformCoordinates=function(b,v){if(b){var y=this.$getZoom(this.el);b=k(1/y,b)}function C(G,W,q){var H=G[1]*W[0]-G[0]*W[1];return[(-W[1]*q[0]+W[0]*q[1])/H,(+G[1]*q[0]-G[0]*q[1])/H]}function E(G,W){return[G[0]-W[0],G[1]-W[1]]}function A(G,W){return[G[0]+W[0],G[1]+W[1]]}function k(G,W){return[G*W[0],G*W[1]]}this.els||this.$initTransformMeasureNodes();function T(G){var W=G.getBoundingClientRect();return[W.left,W.top]}var $=T(this.els[0]),S=T(this.els[1]),I=T(this.els[2]),R=T(this.els[3]),N=C(E(R,S),E(R,I),E(A(S,I),A(R,$))),M=k(1+N[0],E(S,$)),F=k(1+N[1],E(I,$));if(v){var D=v,x=N[0]*D[0]/p+N[1]*D[1]/p+1,B=A(k(D[0],M),k(D[1],F));return A(k(1/x/p,B),$)}var K=E(b,$),U=C(E(M,k(N[0],K)),E(F,k(N[1],K)),K);return k(p,U)}}).call(g.prototype)}),ace.define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter","ace/lib/useragent"],function(t,n,r){var a=t("./lib/oop"),s=t("./lib/dom"),l=t("./config"),u=t("./layer/gutter").Gutter,d=t("./layer/marker").Marker,f=t("./layer/text").Text,m=t("./layer/cursor").Cursor,h=t("./scrollbar").HScrollBar,p=t("./scrollbar").VScrollBar,g=t("./renderloop").RenderLoop,b=t("./layer/font_metrics").FontMetrics,v=t("./lib/event_emitter").EventEmitter,y=`	.ace_br1 {border-top-left-radius    : 3px;}	.ace_br2 {border-top-right-radius   : 3px;}	.ace_br3 {border-top-left-radius    : 3px; border-top-right-radius:    3px;}	.ace_br4 {border-bottom-right-radius: 3px;}	.ace_br5 {border-top-left-radius    : 3px; border-bottom-right-radius: 3px;}	.ace_br6 {border-top-right-radius   : 3px; border-bottom-right-radius: 3px;}	.ace_br7 {border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px;}	.ace_br8 {border-bottom-left-radius : 3px;}	.ace_br9 {border-top-left-radius    : 3px; border-bottom-left-radius:  3px;}	.ace_br10{border-top-right-radius   : 3px; border-bottom-left-radius:  3px;}	.ace_br11{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-left-radius:  3px;}	.ace_br12{border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br13{border-top-left-radius    : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br14{border-top-right-radius   : 3px; border-bottom-right-radius: 3px; border-bottom-left-radius:  3px;}	.ace_br15{border-top-left-radius    : 3px; border-top-right-radius:    3px; border-bottom-right-radius: 3px; border-bottom-left-radius: 3px;}	.ace_editor {	position: relative;	overflow: hidden;	padding: 0;	font: 12px/normal 'Monaco', 'Menlo', 'Ubuntu Mono', 'Consolas', 'source-code-pro', monospace;	direction: ltr;	text-align: left;	-webkit-tap-highlight-color: rgba(0, 0, 0, 0);	}	.ace_scroller {	position: absolute;	overflow: hidden;	top: 0;	bottom: 0;	background-color: inherit;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	cursor: text;	}	.ace_content {	position: absolute;	box-sizing: border-box;	min-width: 100%;	contain: style size layout;	font-variant-ligatures: no-common-ligatures;	}	.ace_dragging .ace_scroller:before{	position: absolute;	top: 0;	left: 0;	right: 0;	bottom: 0;	content: '';	background: rgba(250, 250, 250, 0.01);	z-index: 1000;	}	.ace_dragging.ace_dark .ace_scroller:before{	background: rgba(0, 0, 0, 0.01);	}	.ace_gutter {	position: absolute;	overflow : hidden;	width: auto;	top: 0;	bottom: 0;	left: 0;	cursor: default;	z-index: 4;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	contain: style size layout;	}	.ace_gutter-active-line {	position: absolute;	left: 0;	right: 0;	}	.ace_scroller.ace_scroll-left {	box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;	}	.ace_gutter-cell {	position: absolute;	top: 0;	left: 0;	right: 0;	padding-left: 19px;	padding-right: 6px;	background-repeat: no-repeat;	}	.ace_gutter-cell.ace_error {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: 2px center;	}	.ace_gutter-cell.ace_warning {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");	background-position: 2px center;	}	.ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");	background-position: 2px center;	}	.ace_dark .ace_gutter-cell.ace_info {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");	}	.ace_scrollbar {	contain: strict;	position: absolute;	right: 0;	bottom: 0;	z-index: 6;	}	.ace_scrollbar-inner {	position: absolute;	cursor: text;	left: 0;	top: 0;	}	.ace_scrollbar-v{	overflow-x: hidden;	overflow-y: scroll;	top: 0;	}	.ace_scrollbar-h {	overflow-x: scroll;	overflow-y: hidden;	left: 0;	}	.ace_print-margin {	position: absolute;	height: 100%;	}	.ace_text-input {	position: absolute;	z-index: 0;	width: 0.5em;	height: 1em;	opacity: 0;	background: transparent;	-moz-appearance: none;	appearance: none;	border: none;	resize: none;	outline: none;	overflow: hidden;	font: inherit;	padding: 0 1px;	margin: 0 -1px;	contain: strict;	-ms-user-select: text;	-moz-user-select: text;	-webkit-user-select: text;	user-select: text;	white-space: pre!important;	}	.ace_text-input.ace_composition {	background: transparent;	color: inherit;	z-index: 1000;	opacity: 1;	}	.ace_composition_placeholder { color: transparent }	.ace_composition_marker { 	border-bottom: 1px solid;	position: absolute;	border-radius: 0;	margin-top: 1px;	}	[ace_nocontext=true] {	transform: none!important;	filter: none!important;	clip-path: none!important;	mask : none!important;	contain: none!important;	perspective: none!important;	mix-blend-mode: initial!important;	z-index: auto;	}	.ace_layer {	z-index: 1;	position: absolute;	overflow: hidden;	word-wrap: normal;	white-space: pre;	height: 100%;	width: 100%;	box-sizing: border-box;	pointer-events: none;	}	.ace_gutter-layer {	position: relative;	width: auto;	text-align: right;	pointer-events: auto;	height: 1000000px;	contain: style size layout;	}	.ace_text-layer {	font: inherit !important;	position: absolute;	height: 1000000px;	width: 1000000px;	contain: style size layout;	}	.ace_text-layer > .ace_line, .ace_text-layer > .ace_line_group {	contain: style size layout;	position: absolute;	top: 0;	left: 0;	right: 0;	}	.ace_hidpi .ace_text-layer,	.ace_hidpi .ace_gutter-layer,	.ace_hidpi .ace_content,	.ace_hidpi .ace_gutter {	contain: strict;	will-change: transform;	}	.ace_hidpi .ace_text-layer > .ace_line, 	.ace_hidpi .ace_text-layer > .ace_line_group {	contain: strict;	}	.ace_cjk {	display: inline-block;	text-align: center;	}	.ace_cursor-layer {	z-index: 4;	}	.ace_cursor {	z-index: 4;	position: absolute;	box-sizing: border-box;	border-left: 2px solid;	transform: translatez(0);	}	.ace_multiselect .ace_cursor {	border-left-width: 1px;	}	.ace_slim-cursors .ace_cursor {	border-left-width: 1px;	}	.ace_overwrite-cursors .ace_cursor {	border-left-width: 0;	border-bottom: 1px solid;	}	.ace_hidden-cursors .ace_cursor {	opacity: 0.2;	}	.ace_hasPlaceholder .ace_hidden-cursors .ace_cursor {	opacity: 0;	}	.ace_smooth-blinking .ace_cursor {	transition: opacity 0.18s;	}	.ace_animate-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: step-end;	animation-name: blink-ace-animate;	animation-iteration-count: infinite;	}	.ace_animate-blinking.ace_smooth-blinking .ace_cursor {	animation-duration: 1000ms;	animation-timing-function: ease-in-out;	animation-name: blink-ace-animate-smooth;	}	@keyframes blink-ace-animate {	from, to { opacity: 1; }	60% { opacity: 0; }	}	@keyframes blink-ace-animate-smooth {	from, to { opacity: 1; }	45% { opacity: 1; }	60% { opacity: 0; }	85% { opacity: 0; }	}	.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {	position: absolute;	z-index: 3;	}	.ace_marker-layer .ace_selection {	position: absolute;	z-index: 5;	}	.ace_marker-layer .ace_bracket {	position: absolute;	z-index: 6;	}	.ace_marker-layer .ace_error_bracket {	position: absolute;	border-bottom: 1px solid #DE5555;	border-radius: 0;	}	.ace_marker-layer .ace_active-line {	position: absolute;	z-index: 2;	}	.ace_marker-layer .ace_selected-word {	position: absolute;	z-index: 4;	box-sizing: border-box;	}	.ace_line .ace_fold {	box-sizing: border-box;	display: inline-block;	height: 11px;	margin-top: -2px;	vertical-align: middle;	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");	background-repeat: no-repeat, repeat-x;	background-position: center center, top left;	color: transparent;	border: 1px solid black;	border-radius: 2px;	cursor: pointer;	pointer-events: auto;	}	.ace_dark .ace_fold {	}	.ace_fold:hover{	background-image:	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),	url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");	}	.ace_tooltip {	background-color: #FFF;	background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));	border: 1px solid gray;	border-radius: 1px;	box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);	color: black;	max-width: 100%;	padding: 3px 4px;	position: fixed;	z-index: 999999;	box-sizing: border-box;	cursor: default;	white-space: pre;	word-wrap: break-word;	line-height: normal;	font-style: normal;	font-weight: normal;	letter-spacing: normal;	pointer-events: none;	}	.ace_folding-enabled > .ace_gutter-cell {	padding-right: 13px;	}	.ace_fold-widget {	box-sizing: border-box;	margin: 0 -12px 0 1px;	display: none;	width: 11px;	vertical-align: top;	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");	background-repeat: no-repeat;	background-position: center;	border-radius: 3px;	border: 1px solid transparent;	cursor: pointer;	}	.ace_folding-enabled .ace_fold-widget {	display: inline-block;   	}	.ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");	}	.ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");	}	.ace_fold-widget:hover {	border: 1px solid rgba(0, 0, 0, 0.3);	background-color: rgba(255, 255, 255, 0.2);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);	}	.ace_fold-widget:active {	border: 1px solid rgba(0, 0, 0, 0.4);	background-color: rgba(0, 0, 0, 0.05);	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);	}	.ace_dark .ace_fold-widget {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");	}	.ace_dark .ace_fold-widget.ace_end {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget.ace_closed {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");	}	.ace_dark .ace_fold-widget:hover {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	background-color: rgba(255, 255, 255, 0.1);	}	.ace_dark .ace_fold-widget:active {	box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);	}	.ace_inline_button {	border: 1px solid lightgray;	display: inline-block;	margin: -1px 8px;	padding: 0 5px;	pointer-events: auto;	cursor: pointer;	}	.ace_inline_button:hover {	border-color: gray;	background: rgba(200,200,200,0.2);	display: inline-block;	pointer-events: auto;	}	.ace_fold-widget.ace_invalid {	background-color: #FFB4B4;	border-color: #DE5555;	}	.ace_fade-fold-widgets .ace_fold-widget {	transition: opacity 0.4s ease 0.05s;	opacity: 0;	}	.ace_fade-fold-widgets:hover .ace_fold-widget {	transition: opacity 0.05s ease 0.05s;	opacity:1;	}	.ace_underline {	text-decoration: underline;	}	.ace_bold {	font-weight: bold;	}	.ace_nobold .ace_bold {	font-weight: normal;	}	.ace_italic {	font-style: italic;	}	.ace_error-marker {	background-color: rgba(255, 0, 0,0.2);	position: absolute;	z-index: 9;	}	.ace_highlight-marker {	background-color: rgba(255, 255, 0,0.2);	position: absolute;	z-index: 8;	}	.ace_mobile-menu {	position: absolute;	line-height: 1.5;	border-radius: 4px;	-ms-user-select: none;	-moz-user-select: none;	-webkit-user-select: none;	user-select: none;	background: white;	box-shadow: 1px 3px 2px grey;	border: 1px solid #dcdcdc;	color: black;	}	.ace_dark > .ace_mobile-menu {	background: #333;	color: #ccc;	box-shadow: 1px 3px 2px grey;	border: 1px solid #444;	}	.ace_mobile-button {	padding: 2px;	cursor: pointer;	overflow: hidden;	}	.ace_mobile-button:hover {	background-color: #eee;	opacity:1;	}	.ace_mobile-button:active {	background-color: #ddd;	}	.ace_placeholder {	font-family: arial;	transform: scale(0.9);	transform-origin: left;	white-space: pre;	opacity: 0.7;	margin: 0 10px;	}`,C=t("./lib/useragent"),E=C.isIE;s.importCssString(y,"ace_editor.css",!1);var A=function(k,T){var $=this;this.container=k||s.createElement("div"),s.addCssClass(this.container,"ace_editor"),s.HI_DPI&&s.addCssClass(this.container,"ace_hidpi"),this.setTheme(T),l.get("useStrictCSP")==null&&l.set("useStrictCSP",!1),this.$gutter=s.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.$gutter.setAttribute("aria-hidden",!0),this.scroller=s.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=s.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new u(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new d(this.content);var S=this.$textLayer=new f(this.content);this.canvas=S.element,this.$markerFront=new d(this.content),this.$cursorLayer=new m(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new p(this.container,this),this.scrollBarH=new h(this.container,this),this.scrollBarV.on("scroll",function(I){$.$scrollAnimation||$.session.setScrollTop(I.data-$.scrollMargin.top)}),this.scrollBarH.on("scroll",function(I){$.$scrollAnimation||$.session.setScrollLeft(I.data-$.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new b(this.container),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.on("changeCharacterSize",function(I){$.updateCharacterSize(),$.onResize(!0,$.gutterWidth,$.$size.width,$.$size.height),$._signal("changeCharacterSize",I)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.margin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$keepTextAreaAtCursor=!C.isIOS,this.$loop=new g(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),l.resetOptions(this),l._signal("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,a.implement(this,v),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin(),s.setStyle(this.scroller.style,"line-height",this.lineHeight+"px")},this.setSession=function(k){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=k,k&&this.scrollMargin.top&&k.getScrollTop()<=0&&k.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(k),this.$markerBack.setSession(k),this.$markerFront.setSession(k),this.$gutterLayer.setSession(k),this.$textLayer.setSession(k),k&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null,this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(k,T,$){if(T===void 0&&(T=1/0),this.$changedLines?(this.$changedLines.firstRow>k&&(this.$changedLines.firstRow=k),this.$changedLines.lastRow<T&&(this.$changedLines.lastRow=T)):this.$changedLines={firstRow:k,lastRow:T},this.$changedLines.lastRow<this.layerConfig.firstRow)if($)this.$changedLines.lastRow=this.layerConfig.lastRow;else return;this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar(),this.session.$bidiHandler.setEolChar(this.$textLayer.EOL_CHAR)},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(k){k?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(k,T,$,S){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=k?1:0;var I=this.container;S||(S=I.clientHeight||I.scrollHeight),$||($=I.clientWidth||I.scrollWidth);var R=this.$updateCachedSize(k,T,$,S);if(!this.$size.scrollerHeight||!$&&!S)return this.resizing=0;k&&(this.$gutterLayer.$padding=null),k?this.$renderChanges(R|this.$changes,!0):this.$loop.schedule(R|this.$changes),this.resizing&&(this.resizing=0),this.scrollBarH.scrollLeft=this.scrollBarV.scrollTop=null}},this.$updateCachedSize=function(k,T,$,S){S-=this.$extraHeight||0;var I=0,R=this.$size,N={width:R.width,height:R.height,scrollerHeight:R.scrollerHeight,scrollerWidth:R.scrollerWidth};if(S&&(k||R.height!=S)&&(R.height=S,I|=this.CHANGE_SIZE,R.scrollerHeight=R.height,this.$horizScroll&&(R.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",I=I|this.CHANGE_SCROLL),$&&(k||R.width!=$)){I|=this.CHANGE_SIZE,R.width=$,T==null&&(T=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=T,s.setStyle(this.scrollBarH.element.style,"left",T+"px"),s.setStyle(this.scroller.style,"left",T+this.margin.left+"px"),R.scrollerWidth=Math.max(0,$-T-this.scrollBarV.getWidth()-this.margin.h),s.setStyle(this.$gutter.style,"left",this.margin.left+"px");var M=this.scrollBarV.getWidth()+"px";s.setStyle(this.scrollBarH.element.style,"right",M),s.setStyle(this.scroller.style,"right",M),s.setStyle(this.scroller.style,"bottom",this.scrollBarH.getHeight()),(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||k)&&(I|=this.CHANGE_FULL)}return R.$dirty=!$||!S,I&&this._signal("resize",N),I},this.onGutterResize=function(k){var T=this.$showGutter?k:0;T!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,T,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):this.$computeLayerConfig()},this.adjustWrapLimit=function(){var k=this.$size.scrollerWidth-this.$padding*2,T=Math.floor(k/this.characterWidth);return this.session.adjustWrapLimit(T,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(k){this.setOption("animatedScroll",k)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(k){this.setOption("showInvisibles",k),this.session.$bidiHandler.setShowInvisibles(k)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(k){this.setOption("displayIndentGuides",k)},this.setShowPrintMargin=function(k){this.setOption("showPrintMargin",k)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(k){this.setOption("printMarginColumn",k)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(k){return this.setOption("showGutter",k)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(k){this.setOption("fadeFoldWidgets",k)},this.setHighlightGutterLine=function(k){this.setOption("highlightGutterLine",k)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updatePrintMargin=function(){if(!(!this.$showPrintMargin&&!this.$printMarginEl)){if(!this.$printMarginEl){var k=s.createElement("div");k.className="ace_layer ace_print-margin-layer",this.$printMarginEl=s.createElement("div"),this.$printMarginEl.className="ace_print-margin",k.appendChild(this.$printMarginEl),this.content.insertBefore(k,this.content.firstChild)}var T=this.$printMarginEl.style;T.left=Math.round(this.characterWidth*this.$printMarginColumn+this.$padding)+"px",T.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&this.session.$wrap==-1&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.scroller},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(!this.$isMousePressed){var k=this.textarea.style,T=this.$composition;if(!this.$keepTextAreaAtCursor&&!T){s.translate(this.textarea,-100,0);return}var $=this.$cursorLayer.$pixelPos;if($){T&&T.markerRange&&($=this.$cursorLayer.getPixelPosition(T.markerRange.start,!0));var S=this.layerConfig,I=$.top,R=$.left;I-=S.offset;var N=T&&T.useTextareaForIME?this.lineHeight:E?0:1;if(I<0||I>S.height-N){s.translate(this.textarea,0,0);return}var M=1,F=this.$size.height-N;if(!T)I+=this.lineHeight;else if(T.useTextareaForIME){var D=this.textarea.value;M=this.characterWidth*this.session.$getStringScreenWidth(D)[0]}else I+=this.lineHeight+2;R-=this.scrollLeft,R>this.$size.scrollerWidth-M&&(R=this.$size.scrollerWidth-M),R+=this.gutterWidth+this.margin.left,s.setStyle(k,"height",N+"px"),s.setStyle(k,"width",M+"px"),s.translate(this.textarea,Math.min(R,this.$size.scrollerWidth-M),Math.min(I,F))}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(this.layerConfig.offset===0?0:1)},this.getLastFullyVisibleRow=function(){var k=this.layerConfig,T=k.lastRow,$=this.session.documentToScreenRow(T,0)*k.lineHeight;return $-this.session.getScrollTop()>k.height-k.lineHeight?T-1:T},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(k){this.$padding=k,this.$textLayer.setPadding(k),this.$cursorLayer.setPadding(k),this.$markerFront.setPadding(k),this.$markerBack.setPadding(k),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(k,T,$,S){var I=this.scrollMargin;I.top=k|0,I.bottom=T|0,I.right=S|0,I.left=$|0,I.v=I.top+I.bottom,I.h=I.left+I.right,I.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-I.top),this.updateFull()},this.setMargin=function(k,T,$,S){var I=this.margin;I.top=k|0,I.bottom=T|0,I.right=S|0,I.left=$|0,I.v=I.top+I.bottom,I.h=I.left+I.right,this.$updateCachedSize(!0,this.gutterWidth,this.$size.width,this.$size.height),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(k){this.setOption("hScrollBarAlwaysVisible",k)},this.getVScrollBarAlwaysVisible=function(){return this.$vScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(k){this.setOption("vScrollBarAlwaysVisible",k)},this.$updateScrollBarV=function(){var k=this.layerConfig.maxHeight,T=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(k-=(T-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>k-T&&(k=this.scrollTop+T,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(k+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(k,T){if(this.$changes&&(k|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!k&&!T){this.$changes|=k;return}if(this.$size.$dirty)return this.$changes|=k,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender",k),this.session&&this.session.$bidiHandler&&this.session.$bidiHandler.updateCharacterWidths(this.$fontMetrics);var $=this.layerConfig;if(k&this.CHANGE_FULL||k&this.CHANGE_SIZE||k&this.CHANGE_TEXT||k&this.CHANGE_LINES||k&this.CHANGE_SCROLL||k&this.CHANGE_H_SCROLL){if(k|=this.$computeLayerConfig()|this.$loop.clear(),$.firstRow!=this.layerConfig.firstRow&&$.firstRowScreen==this.layerConfig.firstRowScreen){var S=this.scrollTop+($.firstRow-this.layerConfig.firstRow)*this.lineHeight;S>0&&(this.scrollTop=S,k=k|this.CHANGE_SCROLL,k|=this.$computeLayerConfig()|this.$loop.clear())}$=this.layerConfig,this.$updateScrollBarV(),k&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),s.translate(this.content,-this.scrollLeft,-$.offset);var I=$.width+2*this.$padding+"px",R=$.minHeight+"px";s.setStyle(this.content.style,"width",I),s.setStyle(this.content.style,"height",R)}if(k&this.CHANGE_H_SCROLL&&(s.translate(this.content,-this.scrollLeft,-$.offset),this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),k&this.CHANGE_FULL){this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",k);return}if(k&this.CHANGE_SCROLL){this.$changedLines=null,k&this.CHANGE_TEXT||k&this.CHANGE_LINES?this.$textLayer.update($):this.$textLayer.scrollLines($),this.$showGutter&&(k&this.CHANGE_GUTTER||k&this.CHANGE_LINES?this.$gutterLayer.update($):this.$gutterLayer.scrollLines($)),this.$markerBack.update($),this.$markerFront.update($),this.$cursorLayer.update($),this.$moveTextAreaToCursor(),this._signal("afterRender",k);return}k&this.CHANGE_TEXT?(this.$changedLines=null,this.$textLayer.update($),this.$showGutter&&this.$gutterLayer.update($)):k&this.CHANGE_LINES?(this.$updateLines()||k&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update($):k&this.CHANGE_TEXT||k&this.CHANGE_GUTTER?this.$showGutter&&this.$gutterLayer.update($):k&this.CHANGE_CURSOR&&this.$highlightGutterLine&&this.$gutterLayer.updateLineHighlight($),k&this.CHANGE_CURSOR&&(this.$cursorLayer.update($),this.$moveTextAreaToCursor()),k&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update($),k&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update($),this._signal("afterRender",k)},this.$autosize=function(){var k=this.session.getScreenLength()*this.lineHeight,T=this.$maxLines*this.lineHeight,$=Math.min(T,Math.max((this.$minLines||1)*this.lineHeight,k))+this.scrollMargin.v+(this.$extraHeight||0);this.$horizScroll&&($+=this.scrollBarH.getHeight()),this.$maxPixelHeight&&$>this.$maxPixelHeight&&($=this.$maxPixelHeight);var S=$<=2*this.lineHeight,I=!S&&k>T;if($!=this.desiredHeight||this.$size.height!=this.desiredHeight||I!=this.$vScroll){I!=this.$vScroll&&(this.$vScroll=I,this.scrollBarV.setVisible(I));var R=this.container.clientWidth;this.container.style.height=$+"px",this.$updateCachedSize(!0,this.$gutterWidth,R,$),this.desiredHeight=$,this._signal("autosize")}},this.$computeLayerConfig=function(){var k=this.session,T=this.$size,$=T.height<=2*this.lineHeight,S=this.session.getScreenLength(),I=S*this.lineHeight,R=this.$getLongestLine(),N=!$&&(this.$hScrollBarAlwaysVisible||T.scrollerWidth-R-2*this.$padding<0),M=this.$horizScroll!==N;M&&(this.$horizScroll=N,this.scrollBarH.setVisible(N));var F=this.$vScroll;this.$maxLines&&this.lineHeight>1&&this.$autosize();var D=T.scrollerHeight+this.lineHeight,x=!this.$maxLines&&this.$scrollPastEnd?(T.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;I+=x;var B=this.scrollMargin;this.session.setScrollTop(Math.max(-B.top,Math.min(this.scrollTop,I-T.scrollerHeight+B.bottom))),this.session.setScrollLeft(Math.max(-B.left,Math.min(this.scrollLeft,R+2*this.$padding-T.scrollerWidth+B.right)));var K=!$&&(this.$vScrollBarAlwaysVisible||T.scrollerHeight-I+x<0||this.scrollTop>B.top),U=F!==K;U&&(this.$vScroll=K,this.scrollBarV.setVisible(K));var G=this.scrollTop%this.lineHeight,W=Math.ceil(D/this.lineHeight)-1,q=Math.max(0,Math.round((this.scrollTop-G)/this.lineHeight)),H=q+W,z,Y,V=this.lineHeight;q=k.screenToDocumentRow(q,0);var J=k.getFoldLine(q);J&&(q=J.start.row),z=k.documentToScreenRow(q,0),Y=k.getRowLength(q)*V,H=Math.min(k.screenToDocumentRow(H,0),k.getLength()-1),D=T.scrollerHeight+k.getRowLength(H)*V+Y,G=this.scrollTop-z*V;var Q=0;return(this.layerConfig.width!=R||M)&&(Q=this.CHANGE_H_SCROLL),(M||U)&&(Q|=this.$updateCachedSize(!0,this.gutterWidth,T.width,T.height),this._signal("scrollbarVisibilityChanged"),U&&(R=this.$getLongestLine())),this.layerConfig={width:R,padding:this.$padding,firstRow:q,firstRowScreen:z,lastRow:H,lineHeight:V,characterWidth:this.characterWidth,minHeight:D,maxHeight:I,offset:G,gutterOffset:V?Math.max(0,Math.ceil((G+T.height-T.scrollerHeight)/V)):0,height:this.$size.scrollerHeight},this.session.$bidiHandler&&this.session.$bidiHandler.setContentWidth(R-this.$padding),Q},this.$updateLines=function(){if(this.$changedLines){var k=this.$changedLines.firstRow,T=this.$changedLines.lastRow;this.$changedLines=null;var $=this.layerConfig;if(!(k>$.lastRow+1)&&!(T<$.firstRow)){if(T===1/0){this.$showGutter&&this.$gutterLayer.update($),this.$textLayer.update($);return}return this.$textLayer.updateLines($,k,T),!0}}},this.$getLongestLine=function(){var k=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(k+=1),this.$textLayer&&k>this.$textLayer.MAX_LINE_LENGTH&&(k=this.$textLayer.MAX_LINE_LENGTH+30),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(k*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(k,T){this.$gutterLayer.addGutterDecoration(k,T)},this.removeGutterDecoration=function(k,T){this.$gutterLayer.removeGutterDecoration(k,T)},this.updateBreakpoints=function(k){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(k){this.$gutterLayer.setAnnotations(k),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(k,T,$){this.scrollCursorIntoView(k,$),this.scrollCursorIntoView(T,$)},this.scrollCursorIntoView=function(k,T,$){if(this.$size.scrollerHeight!==0){var S=this.$cursorLayer.getPixelPosition(k),I=S.left,R=S.top,N=$&&$.top||0,M=$&&$.bottom||0,F=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;F+N>R?(T&&F+N>R+this.lineHeight&&(R-=T*this.$size.scrollerHeight),R===0&&(R=-this.scrollMargin.top),this.session.setScrollTop(R)):F+this.$size.scrollerHeight-M<R+this.lineHeight&&(T&&F+this.$size.scrollerHeight-M<R-this.lineHeight&&(R+=T*this.$size.scrollerHeight),this.session.setScrollTop(R+this.lineHeight+M-this.$size.scrollerHeight));var D=this.scrollLeft;D>I?(I<this.$padding+2*this.layerConfig.characterWidth&&(I=-this.scrollMargin.left),this.session.setScrollLeft(I)):D+this.$size.scrollerWidth<I+this.characterWidth?this.session.setScrollLeft(Math.round(I+this.characterWidth-this.$size.scrollerWidth)):D<=this.$padding&&I-D<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(k){this.session.setScrollTop(k*this.lineHeight)},this.alignCursor=function(k,T){typeof k=="number"&&(k={row:k,column:0});var $=this.$cursorLayer.getPixelPosition(k),S=this.$size.scrollerHeight-this.lineHeight,I=$.top-S*(T||0);return this.session.setScrollTop(I),I},this.STEPS=8,this.$calcSteps=function(k,T){var $=0,S=this.STEPS,I=[],R=function(N,M,F){return F*(Math.pow(N-1,3)+1)+M};for($=0;$<S;++$)I.push(R($/this.STEPS,k,T-k));return I},this.scrollToLine=function(k,T,$,S){var I=this.$cursorLayer.getPixelPosition({row:k,column:0}),R=I.top;T&&(R-=this.$size.scrollerHeight/2);var N=this.scrollTop;this.session.setScrollTop(R),$!==!1&&this.animateScrolling(N,S)},this.animateScrolling=function(k,T){var $=this.scrollTop;if(this.$animatedScroll){var S=this;if(k!=$){if(this.$scrollAnimation){var I=this.$scrollAnimation.steps;if(I.length&&(k=I[0],k==$))return}var R=S.$calcSteps(k,$);this.$scrollAnimation={from:k,to:$,steps:R},clearInterval(this.$timer),S.session.setScrollTop(R.shift()),S.session.$scrollTop=$,this.$timer=setInterval(function(){if(!S.session)return clearInterval(S.$timer);R.length?(S.session.setScrollTop(R.shift()),S.session.$scrollTop=$):$!=null?(S.session.$scrollTop=-1,S.session.setScrollTop($),$=null):(S.$timer=clearInterval(S.$timer),S.$scrollAnimation=null,T&&T())},10)}}},this.scrollToY=function(k){this.scrollTop!==k&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=k)},this.scrollToX=function(k){this.scrollLeft!==k&&(this.scrollLeft=k),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(k,T){this.session.setScrollTop(T),this.session.setScrollLeft(k)},this.scrollBy=function(k,T){T&&this.session.setScrollTop(this.session.getScrollTop()+T),k&&this.session.setScrollLeft(this.session.getScrollLeft()+k)},this.isScrollableBy=function(k,T){if(T<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||T>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||k<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||k>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right)return!0},this.pixelToScreenCoordinates=function(k,T){var $;if(this.$hasCssTransforms){$={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([k,T]);k=S[1]-this.gutterWidth-this.margin.left,T=S[0]}else $=this.scroller.getBoundingClientRect();var I=k+this.scrollLeft-$.left-this.$padding,R=I/this.characterWidth,N=Math.floor((T+this.scrollTop-$.top)/this.lineHeight),M=this.$blockCursor?Math.floor(R):Math.round(R);return{row:N,column:M,side:R-M>0?1:-1,offsetX:I}},this.screenToTextCoordinates=function(k,T){var $;if(this.$hasCssTransforms){$={top:0,left:0};var S=this.$fontMetrics.transformCoordinates([k,T]);k=S[1]-this.gutterWidth-this.margin.left,T=S[0]}else $=this.scroller.getBoundingClientRect();var I=k+this.scrollLeft-$.left-this.$padding,R=I/this.characterWidth,N=this.$blockCursor?Math.floor(R):Math.round(R),M=Math.floor((T+this.scrollTop-$.top)/this.lineHeight);return this.session.screenToDocumentPosition(M,Math.max(N,0),I)},this.textToScreenCoordinates=function(k,T){var $=this.scroller.getBoundingClientRect(),S=this.session.documentToScreenPosition(k,T),I=this.$padding+(this.session.$bidiHandler.isBidiRow(S.row,k)?this.session.$bidiHandler.getPosLeft(S.column):Math.round(S.column*this.characterWidth)),R=S.row*this.lineHeight;return{pageX:$.left+I-this.scrollLeft,pageY:$.top+R-this.scrollTop}},this.visualizeFocus=function(){s.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){s.removeCssClass(this.container,"ace_focus")},this.showComposition=function(k){this.$composition=k,k.cssText||(k.cssText=this.textarea.style.cssText),k.useTextareaForIME==null&&(k.useTextareaForIME=this.$useTextareaForIME),this.$useTextareaForIME?(s.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor(),this.$cursorLayer.element.style.display="none"):k.markerId=this.session.addMarker(k.markerRange,"ace_composition_marker","text")},this.setCompositionText=function(k){var T=this.session.selection.cursor;this.addToken(k,"composition_placeholder",T.row,T.column),this.$moveTextAreaToCursor()},this.hideComposition=function(){if(this.$composition){this.$composition.markerId&&this.session.removeMarker(this.$composition.markerId),s.removeCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText=this.$composition.cssText;var k=this.session.selection.cursor;this.removeExtraToken(k.row,k.column),this.$composition=null,this.$cursorLayer.element.style.display=""}},this.addToken=function(k,T,$,S){var I=this.session;I.bgTokenizer.lines[$]=null;var R={type:T,value:k},N=I.getTokens($);if(S==null)N.push(R);else for(var M=0,F=0;F<N.length;F++){var D=N[F];if(M+=D.value.length,S<=M){var x=D.value.length-(M-S),B=D.value.slice(0,x),K=D.value.slice(x);N.splice(F,1,{type:D.type,value:B},R,{type:D.type,value:K});break}}this.updateLines($,$)},this.removeExtraToken=function(k,T){this.updateLines(k,k)},this.setTheme=function(k,T){var $=this;if(this.$themeId=k,$._dispatchEvent("themeChange",{theme:k}),!k||typeof k=="string"){var S=k||this.$options.theme.initialValue;l.loadModule(["theme",S],I)}else I(k);function I(R){if($.$themeId!=k)return T&&T();if(!R||!R.cssClass)throw new Error("couldn't load module "+k+" or it didn't call define");R.$id&&($.$themeId=R.$id),s.importCssString(R.cssText,R.cssClass,$.container),$.theme&&s.removeCssClass($.container,$.theme.cssClass);var N="padding"in R?R.padding:"padding"in($.theme||{})?4:$.$padding;$.$padding&&N!=$.$padding&&$.setPadding(N),$.$theme=R.cssClass,$.theme=R,s.addCssClass($.container,R.cssClass),s.setCssClass($.container,"ace_dark",R.isDark),$.$size&&($.$size.width=0,$.$updateSizeAsync()),$._dispatchEvent("themeLoaded",{theme:R}),T&&T()}},this.getTheme=function(){return this.$themeId},this.setStyle=function(k,T){s.setCssClass(this.container,k,T!==!1)},this.unsetStyle=function(k){s.removeCssClass(this.container,k)},this.setCursorStyle=function(k){s.setStyle(this.scroller.style,"cursor",k)},this.setMouseCursor=function(k){s.setStyle(this.scroller.style,"cursor",k)},this.attachToShadowRoot=function(){s.importCssString(y,"ace_editor.css",this.container)},this.destroy=function(){this.freeze(),this.$fontMetrics.destroy(),this.$cursorLayer.destroy(),this.removeAllListeners(),this.container.textContent=""}}).call(A.prototype),l.defineOptions(A.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(k){this.$textLayer.setShowInvisibles(k)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(k){typeof k=="number"&&(this.$printMarginColumn=k),this.$showPrintMargin=!!k,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(k){this.$gutter.style.display=k?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(k){s.setCssClass(this.$gutter,"ace_fade-fold-widgets",k)},initialValue:!1},showFoldWidgets:{set:function(k){this.$gutterLayer.setShowFoldWidgets(k),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(k){this.$textLayer.setDisplayIndentGuides(k)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(k){this.$gutterLayer.setHighlightGutterLine(k),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},hScrollBarAlwaysVisible:{set:function(k){(!this.$hScrollBarAlwaysVisible||!this.$horizScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(k){(!this.$vScrollBarAlwaysVisible||!this.$vScroll)&&this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(k){typeof k=="number"&&(k=k+"px"),this.container.style.fontSize=k,this.updateFontSize()},initialValue:12},fontFamily:{set:function(k){this.container.style.fontFamily=k,this.updateFontSize()}},maxLines:{set:function(k){this.updateFull()}},minLines:{set:function(k){this.$minLines<562949953421311||(this.$minLines=0),this.updateFull()}},maxPixelHeight:{set:function(k){this.updateFull()},initialValue:0},scrollPastEnd:{set:function(k){k=+k||0,this.$scrollPastEnd!=k&&(this.$scrollPastEnd=k,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(k){this.$gutterLayer.$fixedWidth=!!k,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(k){this.setTheme(k)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0},hasCssTransforms:{},useTextareaForIME:{initialValue:!C.isMobile&&!C.isIE}}),n.VirtualRenderer=A}),ace.define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/net"),l=t("../lib/event_emitter").EventEmitter,u=t("../config");function d(p){var g="importScripts('"+s.qualifyURL(p)+"');";try{return new Blob([g],{type:"application/javascript"})}catch{var b=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,v=new b;return v.append(g),v.getBlob("application/javascript")}}function f(p){if(typeof Worker>"u")return{postMessage:function(){},terminate:function(){}};if(u.get("loadWorkerFromBlob")){var g=d(p),b=window.URL||window.webkitURL,v=b.createObjectURL(g);return new Worker(v)}return new Worker(p)}var m=function(p){p.postMessage||(p=this.$createWorkerFromOldConfig.apply(this,arguments)),this.$worker=p,this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){a.implement(this,l),this.$createWorkerFromOldConfig=function(p,g,b,v,y){if(t.nameToUrl&&!t.toUrl&&(t.toUrl=t.nameToUrl),u.get("packaged")||!t.toUrl)v=v||u.moduleUrl(g,"worker");else{var C=this.$normalizePath;v=v||C(t.toUrl("ace/worker/worker.js",null,"_"));var E={};p.forEach(function(A){E[A]=C(t.toUrl(A,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}return this.$worker=f(v),y&&this.send("importScripts",y),this.$worker.postMessage({init:!0,tlns:E,module:g,classname:b}),this.$worker},this.onMessage=function(p){var g=p.data;switch(g.type){case"event":this._signal(g.name,{data:g.data});break;case"call":var b=this.callbacks[g.id];b&&(b(g.data),delete this.callbacks[g.id]);break;case"error":this.reportError(g.data);break;case"log":window.console&&console.log&&console.log.apply(console,g.data);break}},this.reportError=function(p){window.console&&console.error&&console.error(p)},this.$normalizePath=function(p){return s.qualifyURL(p)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(p,g){this.$worker.postMessage({command:p,args:g})},this.call=function(p,g,b){if(b){var v=this.callbackId++;this.callbacks[v]=b,g.push(v)}this.send(p,g)},this.emit=function(p,g){try{g.data&&g.data.err&&(g.data.err={message:g.data.err.message,stack:g.data.err.stack,code:g.data.err.code}),this.$worker&&this.$worker.postMessage({event:p,data:{data:g.data}})}catch(b){console.error(b.stack)}},this.attachToDocument=function(p){this.$doc&&this.terminate(),this.$doc=p,this.call("setValue",[p.getValue()]),p.on("change",this.changeListener,!0)},this.changeListener=function(p){this.deltaQueue||(this.deltaQueue=[],setTimeout(this.$sendDeltaQueue,0)),p.action=="insert"?this.deltaQueue.push(p.start,p.lines):this.deltaQueue.push(p.start,p.end)},this.$sendDeltaQueue=function(){var p=this.deltaQueue;p&&(this.deltaQueue=null,p.length>50&&p.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:p}))}}).call(m.prototype);var h=function(p,g,b){var v=null,y=!1,C=Object.create(l),E=[],A=new m({messageBuffer:E,terminate:function(){},postMessage:function(T){E.push(T),v&&(y?setTimeout(k):k())}});A.setEmitSync=function(T){y=T};var k=function(){var T=E.shift();T.command?v[T.command].apply(v,T.args):T.event&&C._signal(T.event,T.data)};return C.postMessage=function(T){A.onMessage({data:T})},C.callback=function(T,$){this.postMessage({type:"call",id:$,data:T})},C.emit=function(T,$){this.postMessage({type:"event",name:T,data:$})},u.loadModule(["worker",g],function(T){for(v=new T[b](C);E.length;)k()}),A};n.UIWorkerClient=h,n.WorkerClient=m,n.createWorker=f}),ace.define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(t,n,r){var a=t("./range").Range,s=t("./lib/event_emitter").EventEmitter,l=t("./lib/oop"),u=function(d,f,m,h,p,g){var b=this;this.length=f,this.session=d,this.doc=d.getDocument(),this.mainClass=p,this.othersClass=g,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate,!0),this.$others=h,this.$onCursorChange=function(){setTimeout(function(){b.onCursorChange()})},this.$pos=m;var v=d.getUndoManager().$undoStack||d.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=v.length,this.setup(),d.selection.on("changeCursor",this.$onCursorChange)};(function(){l.implement(this,s),this.setup=function(){var d=this,f=this.doc,m=this.session;this.selectionBefore=m.selection.toJSON(),m.selection.inMultiSelectMode&&m.selection.toSingleRange(),this.pos=f.createAnchor(this.$pos.row,this.$pos.column);var h=this.pos;h.$insertRight=!0,h.detach(),h.markerId=m.addMarker(new a(h.row,h.column,h.row,h.column+this.length),this.mainClass,null,!1),this.others=[],this.$others.forEach(function(p){var g=f.createAnchor(p.row,p.column);g.$insertRight=!0,g.detach(),d.others.push(g)}),m.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var d=this.session,f=this;this.othersActive=!0,this.others.forEach(function(m){m.markerId=d.addMarker(new a(m.row,m.column,m.row,m.column+f.length),f.othersClass,null,!1)})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var d=0;d<this.others.length;d++)this.session.removeMarker(this.others[d].markerId)}},this.onUpdate=function(d){if(this.$updating)return this.updateAnchors(d);var f=d;if(f.start.row===f.end.row&&f.start.row===this.pos.row){this.$updating=!0;var m=d.action==="insert"?f.end.column-f.start.column:f.start.column-f.end.column,h=f.start.column>=this.pos.column&&f.start.column<=this.pos.column+this.length+1,p=f.start.column-this.pos.column;if(this.updateAnchors(d),h&&(this.length+=m),h&&!this.session.$fromUndo){if(d.action==="insert")for(var g=this.others.length-1;g>=0;g--){var b=this.others[g],v={row:b.row,column:b.column+p};this.doc.insertMergedLines(v,d.lines)}else if(d.action==="remove")for(var g=this.others.length-1;g>=0;g--){var b=this.others[g],v={row:b.row,column:b.column+p};this.doc.remove(new a(v.row,v.column,v.row,v.column-m))}}this.$updating=!1,this.updateMarkers()}},this.updateAnchors=function(d){this.pos.onChange(d);for(var f=this.others.length;f--;)this.others[f].onChange(d);this.updateMarkers()},this.updateMarkers=function(){if(!this.$updating){var d=this,f=this.session,m=function(p,g){f.removeMarker(p.markerId),p.markerId=f.addMarker(new a(p.row,p.column,p.row,p.column+d.length),g,null,!1)};m(this.pos,this.mainClass);for(var h=this.others.length;h--;)m(this.others[h],this.othersClass)}},this.onCursorChange=function(d){if(!(this.$updating||!this.session)){var f=this.session.selection.getCursor();f.row===this.pos.row&&f.column>=this.pos.column&&f.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",d)):(this.hideOtherMarkers(),this._emit("cursorLeave",d))}},this.detach=function(){this.session.removeMarker(this.pos&&this.pos.markerId),this.hideOtherMarkers(),this.doc.off("change",this.$onUpdate),this.session.selection.off("changeCursor",this.$onCursorChange),this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(this.$undoStackDepth!==-1){for(var d=this.session.getUndoManager(),f=(d.$undoStack||d.$undostack).length-this.$undoStackDepth,m=0;m<f;m++)d.undo(this.session,!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}}).call(u.prototype),n.PlaceHolder=u}),ace.define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(t,n,r){var a=t("../lib/event"),s=t("../lib/useragent");function l(d,f){return d.row==f.row&&d.column==f.column}function u(d){var f=d.domEvent,m=f.altKey,h=f.shiftKey,p=f.ctrlKey,g=d.getAccelKey(),b=d.getButton();if(p&&s.isMac&&(b=f.button),d.editor.inMultiSelectMode&&b==2){d.editor.textInput.onContextMenu(d.domEvent);return}if(!p&&!m&&!g){b===0&&d.editor.inMultiSelectMode&&d.editor.exitMultiSelectMode();return}if(b===0){var v=d.editor,y=v.selection,C=v.inMultiSelectMode,E=d.getDocumentPosition(),A=y.getCursor(),k=d.inSelection()||y.isEmpty()&&l(E,A),T=d.x,$=d.y,S=function(q){T=q.clientX,$=q.clientY},I=v.session,R=v.renderer.pixelToScreenCoordinates(T,$),N=R,M;if(v.$mouseHandler.$enableJumpToDef)p&&m||g&&m?M=h?"block":"add":m&&v.$blockSelectEnabled&&(M="block");else if(g&&!m){if(M="add",!C&&h)return}else m&&v.$blockSelectEnabled&&(M="block");if(M&&s.isMac&&f.ctrlKey&&v.$mouseHandler.cancelContextMenu(),M=="add"){if(!C&&k)return;if(!C){var F=y.toOrientedRange();v.addSelectionMarker(F)}var D=y.rangeList.rangeAtPoint(E);v.inVirtualSelectionMode=!0,h&&(D=null,F=y.ranges[0]||F,v.removeSelectionMarker(F)),v.once("mouseup",function(){var q=y.toOrientedRange();D&&q.isEmpty()&&l(D.cursor,q.cursor)?y.substractPoint(q.cursor):(h?y.substractPoint(F.cursor):F&&(v.removeSelectionMarker(F),y.addRange(F)),y.addRange(q)),v.inVirtualSelectionMode=!1})}else if(M=="block"){d.stop(),v.inVirtualSelectionMode=!0;var x,B=[],K=function(){var q=v.renderer.pixelToScreenCoordinates(T,$),H=I.screenToDocumentPosition(q.row,q.column,q.offsetX);l(N,q)&&l(H,y.lead)||(N=q,v.selection.moveToPosition(H),v.renderer.scrollCursorIntoView(),v.removeSelectionMarkers(B),B=y.rectangularRangeBlock(N,R),v.$mouseHandler.$clickSelection&&B.length==1&&B[0].isEmpty()&&(B[0]=v.$mouseHandler.$clickSelection.clone()),B.forEach(v.addSelectionMarker,v),v.updateSelectionMarkers())};C&&!g?y.toSingleRange():!C&&g&&(x=y.toOrientedRange(),v.addSelectionMarker(x)),h?R=I.documentToScreenPosition(y.lead):y.moveToPosition(E),N={row:-1,column:-1};var U=function(q){K(),clearInterval(W),v.removeSelectionMarkers(B),B.length||(B=[y.toOrientedRange()]),x&&(v.removeSelectionMarker(x),y.toSingleRange(x));for(var H=0;H<B.length;H++)y.addRange(B[H]);v.inVirtualSelectionMode=!1,v.$mouseHandler.$clickSelection=null},G=K;a.capture(v.container,S,U);var W=setInterval(function(){G()},20);return d.preventDefault()}}}n.onMouseDown=u}),ace.define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(t,n,r){n.defaultCommands=[{name:"addCursorAbove",description:"Add cursor above",exec:function(s){s.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelow",description:"Add cursor below",exec:function(s){s.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorAboveSkipCurrent",description:"Add cursor above (skip current)",exec:function(s){s.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},scrollIntoView:"cursor",readOnly:!0},{name:"addCursorBelowSkipCurrent",description:"Add cursor below (skip current)",exec:function(s){s.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreBefore",description:"Select more before",exec:function(s){s.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectMoreAfter",description:"Select more after",exec:function(s){s.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextBefore",description:"Select next before",exec:function(s){s.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},scrollIntoView:"cursor",readOnly:!0},{name:"selectNextAfter",description:"Select next after",exec:function(s){s.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},scrollIntoView:"cursor",readOnly:!0},{name:"toggleSplitSelectionIntoLines",description:"Split into lines",exec:function(s){s.multiSelect.rangeCount>1?s.multiSelect.joinSelections():s.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readOnly:!0},{name:"splitSelectionIntoLines",description:"Split into lines",exec:function(s){s.multiSelect.splitIntoLines()},readOnly:!0},{name:"alignCursors",description:"Align cursors",exec:function(s){s.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"},scrollIntoView:"cursor"},{name:"findAll",description:"Find all",exec:function(s){s.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},scrollIntoView:"cursor",readOnly:!0}],n.multiSelectCommands=[{name:"singleSelection",description:"Single selection",bindKey:"esc",exec:function(s){s.exitMultiSelectMode()},scrollIntoView:"cursor",readOnly:!0,isAvailable:function(s){return s&&s.inMultiSelectMode}}];var a=t("../keyboard/hash_handler").HashHandler;n.keyboardHandler=new a(n.multiSelectCommands)}),ace.define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(t,n,r){var a=t("./range_list").RangeList,s=t("./range").Range,l=t("./selection").Selection,u=t("./mouse/multi_select_handler").onMouseDown,d=t("./lib/event"),f=t("./lib/lang"),m=t("./commands/multi_select_commands");n.commands=m.defaultCommands.concat(m.multiSelectCommands);var h=t("./search").Search,p=new h;function g(A,k,T){return p.$options.wrap=!0,p.$options.needle=k,p.$options.backwards=T==-1,p.find(A)}var b=t("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(b.prototype),(function(){this.ranges=null,this.rangeList=null,this.addRange=function(A,k){if(A){if(!this.inMultiSelectMode&&this.rangeCount===0){var T=this.toOrientedRange();if(this.rangeList.add(T),this.rangeList.add(A),this.rangeList.ranges.length!=2)return this.rangeList.removeAll(),k||this.fromOrientedRange(A);this.rangeList.removeAll(),this.rangeList.add(T),this.$onAddRange(T)}A.cursor||(A.cursor=A.end);var $=this.rangeList.add(A);return this.$onAddRange(A),$.length&&this.$onRemoveRange($),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),k||this.fromOrientedRange(A)}},this.toSingleRange=function(A){A=A||this.ranges[0];var k=this.rangeList.removeAll();k.length&&this.$onRemoveRange(k),A&&this.fromOrientedRange(A)},this.substractPoint=function(A){var k=this.rangeList.substractPoint(A);if(k)return this.$onRemoveRange(k),k[0]},this.mergeOverlappingRanges=function(){var A=this.rangeList.merge();A.length&&this.$onRemoveRange(A)},this.$onAddRange=function(A){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(A),this._signal("addRange",{range:A})},this.$onRemoveRange=function(A){if(this.rangeCount=this.rangeList.ranges.length,this.rangeCount==1&&this.inMultiSelectMode){var k=this.rangeList.ranges.pop();A.push(k),this.rangeCount=0}for(var T=A.length;T--;){var $=this.ranges.indexOf(A[T]);this.ranges.splice($,1)}this._signal("removeRange",{ranges:A}),this.rangeCount===0&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),k=k||this.ranges[0],k&&!k.isEqual(this.getRange())&&this.fromOrientedRange(k)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new a,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){for(var A=this.ranges.length?this.ranges:[this.getRange()],k=[],T=0;T<A.length;T++){var $=A[T],S=$.start.row,I=$.end.row;if(S===I)k.push($.clone());else{for(k.push(new s(S,$.start.column,S,this.session.getLine(S).length));++S<I;)k.push(this.getLineRange(S,!0));k.push(new s(I,0,I,$.end.column))}T==0&&!this.isBackwards()&&(k=k.reverse())}this.toSingleRange();for(var T=k.length;T--;)this.addRange(k[T])},this.joinSelections=function(){var A=this.rangeList.ranges,k=A[A.length-1],T=s.fromPoints(A[0].start,k.end);this.toSingleRange(),this.setSelectionRange(T,k.cursor==k.start)},this.toggleBlockSelection=function(){if(this.rangeCount>1){var A=this.rangeList.ranges,k=A[A.length-1],T=s.fromPoints(A[0].start,k.end);this.toSingleRange(),this.setSelectionRange(T,k.cursor==k.start)}else{var $=this.session.documentToScreenPosition(this.cursor),S=this.session.documentToScreenPosition(this.anchor),I=this.rectangularRangeBlock($,S);I.forEach(this.addRange,this)}},this.rectangularRangeBlock=function(A,k,T){var $=[],S=A.column<k.column;if(S)var I=A.column,R=k.column,N=A.offsetX,M=k.offsetX;else var I=k.column,R=A.column,N=k.offsetX,M=A.offsetX;var F=A.row<k.row;if(F)var D=A.row,x=k.row;else var D=k.row,x=A.row;I<0&&(I=0),D<0&&(D=0),D==x&&(T=!0);for(var B,K=D;K<=x;K++){var U=s.fromPoints(this.session.screenToDocumentPosition(K,I,N),this.session.screenToDocumentPosition(K,R,M));if(U.isEmpty()){if(B&&y(U.end,B))break;B=U.end}U.cursor=S?U.start:U.end,$.push(U)}if(F&&$.reverse(),!T){for(var G=$.length-1;$[G].isEmpty()&&G>0;)G--;if(G>0)for(var W=0;$[W].isEmpty();)W++;for(var q=G;q>=W;q--)$[q].isEmpty()&&$.splice(q,1)}return $}}).call(l.prototype);var v=t("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(A){A.cursor||(A.cursor=A.end);var k=this.getSelectionStyle();return A.marker=this.session.addMarker(A,"ace_selection",k),this.session.$selectionMarkers.push(A),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,A},this.removeSelectionMarker=function(A){if(A.marker){this.session.removeMarker(A.marker);var k=this.session.$selectionMarkers.indexOf(A);k!=-1&&this.session.$selectionMarkers.splice(k,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(A){for(var k=this.session.$selectionMarkers,T=A.length;T--;){var $=A[T];if($.marker){this.session.removeMarker($.marker);var S=k.indexOf($);S!=-1&&k.splice(S,1)}}this.session.selectionMarkerCount=k.length},this.$onAddRange=function(A){this.addSelectionMarker(A.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(A){this.removeSelectionMarkers(A.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(A){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(m.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(A){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(m.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(A){var k=A.command,T=A.editor;if(T.multiSelect){if(k.multiSelectAction)k.multiSelectAction=="forEach"?$=T.forEachSelection(k,A.args):k.multiSelectAction=="forEachLine"?$=T.forEachSelection(k,A.args,!0):k.multiSelectAction=="single"?(T.exitMultiSelectMode(),$=k.exec(T,A.args||{})):$=k.multiSelectAction(T,A.args||{});else{var $=k.exec(T,A.args||{});T.multiSelect.addRange(T.multiSelect.toOrientedRange()),T.multiSelect.mergeOverlappingRanges()}return $}},this.forEachSelection=function(A,k,T){if(!this.inVirtualSelectionMode){var $=T&&T.keepOrder,S=T==!0||T&&T.$byLines,I=this.session,R=this.selection,N=R.rangeList,M=($?R:N).ranges,F;if(!M.length)return A.exec?A.exec(this,k||{}):A(this,k||{});var D=R._eventRegistry;R._eventRegistry={};var x=new l(I);this.inVirtualSelectionMode=!0;for(var B=M.length;B--;){if(S)for(;B>0&&M[B].start.row==M[B-1].end.row;)B--;x.fromOrientedRange(M[B]),x.index=B,this.selection=I.selection=x;var K=A.exec?A.exec(this,k||{}):A(this,k||{});!F&&K!==void 0&&(F=K),x.toOrientedRange(M[B])}x.detach(),this.selection=I.selection=R,this.inVirtualSelectionMode=!1,R._eventRegistry=D,R.mergeOverlappingRanges(),R.ranges[0]&&R.fromOrientedRange(R.ranges[0]);var U=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),U&&U.from==U.to&&this.renderer.animateScrolling(U.from),F}},this.exitMultiSelectMode=function(){!this.inMultiSelectMode||this.inVirtualSelectionMode||this.multiSelect.toSingleRange()},this.getSelectedText=function(){var A="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var k=this.multiSelect.rangeList.ranges,T=[],$=0;$<k.length;$++)T.push(this.session.getTextRange(k[$]));var S=this.session.getDocument().getNewLineCharacter();A=T.join(S),A.length==(T.length-1)*S.length&&(A="")}else this.selection.isEmpty()||(A=this.session.getTextRange(this.getSelectionRange()));return A},this.$checkMultiselectChange=function(A,k){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var T=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&k==this.multiSelect.anchor)return;var $=k==this.multiSelect.anchor?T.cursor==T.start?T.end:T.start:T.cursor;$.row!=k.row||this.session.$clipPositionToDocument($.row,$.column).column!=k.column?this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange()):this.multiSelect.mergeOverlappingRanges()}},this.findAll=function(A,k,T){if(k=k||{},k.needle=A||k.needle,k.needle==null){var $=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();k.needle=this.session.getTextRange($)}this.$search.set(k);var S=this.$search.findAll(this.session);if(!S.length)return 0;var I=this.multiSelect;T||I.toSingleRange(S[0]);for(var R=S.length;R--;)I.addRange(S[R],!0);return $&&I.rangeList.rangeAtPoint($.start)&&I.addRange($,!0),S.length},this.selectMoreLines=function(A,k){var T=this.selection.toOrientedRange(),$=T.cursor==T.end,S=this.session.documentToScreenPosition(T.cursor);this.selection.$desiredColumn&&(S.column=this.selection.$desiredColumn);var I=this.session.screenToDocumentPosition(S.row+A,S.column);if(T.isEmpty())var N=I;else var R=this.session.documentToScreenPosition($?T.end:T.start),N=this.session.screenToDocumentPosition(R.row+A,R.column);if($){var M=s.fromPoints(I,N);M.cursor=M.start}else{var M=s.fromPoints(N,I);M.cursor=M.end}if(M.desiredColumn=S.column,!this.selection.inMultiSelectMode)this.selection.addRange(T);else if(k)var F=T.cursor;this.selection.addRange(M),F&&this.selection.substractPoint(F)},this.transposeSelections=function(A){for(var k=this.session,T=k.multiSelect,$=T.ranges,S=$.length;S--;){var I=$[S];if(I.isEmpty()){var R=k.getWordRange(I.start.row,I.start.column);I.start.row=R.start.row,I.start.column=R.start.column,I.end.row=R.end.row,I.end.column=R.end.column}}T.mergeOverlappingRanges();for(var N=[],S=$.length;S--;){var I=$[S];N.unshift(k.getTextRange(I))}A<0?N.unshift(N.pop()):N.push(N.shift());for(var S=$.length;S--;){var I=$[S],R=I.clone();k.replace(I,N[S]),I.start.row=R.start.row,I.start.column=R.start.column}T.fromOrientedRange(T.ranges[0])},this.selectMore=function(A,k,T){var $=this.session,S=$.multiSelect,I=S.toOrientedRange();if(!(I.isEmpty()&&(I=$.getWordRange(I.start.row,I.start.column),I.cursor=A==-1?I.start:I.end,this.multiSelect.addRange(I),T))){var R=$.getTextRange(I),N=g($,R,A);N&&(N.cursor=A==-1?N.start:N.end,this.session.unfold(N),this.multiSelect.addRange(N),this.renderer.scrollCursorIntoView(null,.5)),k&&this.multiSelect.substractPoint(I.cursor)}},this.alignCursors=function(){var A=this.session,k=A.multiSelect,T=k.ranges,$=-1,S=T.filter(function(G){if(G.cursor.row==$)return!0;$=G.cursor.row});if(!T.length||S.length==T.length-1){var I=this.selection.getRange(),R=I.start.row,N=I.end.row,M=R==N;if(M){var F=this.session.getLength(),D;do D=this.session.getLine(N);while(/[=:]/.test(D)&&++N<F);do D=this.session.getLine(R);while(/[=:]/.test(D)&&--R>0);R<0&&(R=0),N>=F&&(N=F-1)}var x=this.session.removeFullLines(R,N);x=this.$reAlignText(x,M),this.session.insert({row:R,column:0},x.join(`
`)+`
`),M||(I.start.column=0,I.end.column=x[x.length-1].length),this.selection.setRange(I)}else{S.forEach(function(G){k.substractPoint(G.cursor)});var B=0,K=1/0,U=T.map(function(G){var W=G.cursor,q=A.getLine(W.row),H=q.substr(W.column).search(/\S/g);return H==-1&&(H=0),W.column>B&&(B=W.column),H<K&&(K=H),H});T.forEach(function(G,W){var q=G.cursor,H=B-q.column,z=U[W]-K;H>z?A.insert(q,f.stringRepeat(" ",H-z)):A.remove(new s(q.row,q.column,q.row,q.column-H+z)),G.start.column=G.end.column=B,G.start.row=G.end.row=q.row,G.cursor=G.end}),k.fromOrientedRange(T[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}},this.$reAlignText=function(A,k){var T=!0,$=!0,S,I,R;return A.map(function(x){var B=x.match(/(\s*)(.*?)(\s*)([=:].*)/);return B?S==null?(S=B[1].length,I=B[2].length,R=B[3].length,B):(S+I+R!=B[1].length+B[2].length+B[3].length&&($=!1),S!=B[1].length&&(T=!1),S>B[1].length&&(S=B[1].length),I<B[2].length&&(I=B[2].length),R>B[3].length&&(R=B[3].length),B):[x]}).map(k?M:T?$?F:M:D);function N(x){return f.stringRepeat(" ",x)}function M(x){return x[2]?N(S)+x[2]+N(I-x[2].length+R)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function F(x){return x[2]?N(S+I-x[2].length)+x[2]+N(R)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}function D(x){return x[2]?N(S)+x[2]+N(R)+x[4].replace(/^([=:])\s+/,"$1 "):x[0]}}}).call(v.prototype);function y(A,k){return A.row==k.row&&A.column==k.column}n.onSessionChange=function(A){var k=A.session;k&&!k.multiSelect&&(k.$selectionMarkers=[],k.selection.$initRangeList(),k.multiSelect=k.selection),this.multiSelect=k&&k.multiSelect;var T=A.oldSession;T&&(T.multiSelect.off("addRange",this.$onAddRange),T.multiSelect.off("removeRange",this.$onRemoveRange),T.multiSelect.off("multiSelect",this.$onMultiSelect),T.multiSelect.off("singleSelect",this.$onSingleSelect),T.multiSelect.lead.off("change",this.$checkMultiselectChange),T.multiSelect.anchor.off("change",this.$checkMultiselectChange)),k&&(k.multiSelect.on("addRange",this.$onAddRange),k.multiSelect.on("removeRange",this.$onRemoveRange),k.multiSelect.on("multiSelect",this.$onMultiSelect),k.multiSelect.on("singleSelect",this.$onSingleSelect),k.multiSelect.lead.on("change",this.$checkMultiselectChange),k.multiSelect.anchor.on("change",this.$checkMultiselectChange)),k&&this.inMultiSelectMode!=k.selection.inMultiSelectMode&&(k.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())};function C(A){A.$multiselectOnSessionChange||(A.$onAddRange=A.$onAddRange.bind(A),A.$onRemoveRange=A.$onRemoveRange.bind(A),A.$onMultiSelect=A.$onMultiSelect.bind(A),A.$onSingleSelect=A.$onSingleSelect.bind(A),A.$multiselectOnSessionChange=n.onSessionChange.bind(A),A.$checkMultiselectChange=A.$checkMultiselectChange.bind(A),A.$multiselectOnSessionChange(A),A.on("changeSession",A.$multiselectOnSessionChange),A.on("mousedown",u),A.commands.addCommands(m.defaultCommands),E(A))}function E(A){if(!A.textInput)return;var k=A.textInput.getElement(),T=!1;d.addListener(k,"keydown",function(S){var I=S.keyCode==18&&!(S.ctrlKey||S.shiftKey||S.metaKey);A.$blockSelectEnabled&&I?T||(A.renderer.setMouseCursor("crosshair"),T=!0):T&&$()},A),d.addListener(k,"keyup",$,A),d.addListener(k,"blur",$,A);function $(S){T&&(A.renderer.setMouseCursor(""),T=!1)}}n.MultiSelect=C,t("./config").defineOptions(v.prototype,"editor",{enableMultiselect:{set:function(A){C(this),A?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",u)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",u))},value:!0},enableBlockSelect:{set:function(A){this.$blockSelectEnabled=A},value:!0}})}),ace.define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(t,n,r){var a=t("../../range").Range,s=n.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(l,u,d){var f=l.getLine(d);return this.foldingStartMarker.test(f)?"start":u=="markbeginend"&&this.foldingStopMarker&&this.foldingStopMarker.test(f)?"end":""},this.getFoldWidgetRange=function(l,u,d){return null},this.indentationBlock=function(l,u,d){var f=/\S/,m=l.getLine(u),h=m.search(f);if(h!=-1){for(var p=d||m.length,g=l.getLength(),b=u,v=u;++u<g;){var y=l.getLine(u).search(f);if(y!=-1){if(y<=h){var C=l.getTokenAt(u,0);if(!C||C.type!=="string")break}v=u}}if(v>b){var E=l.getLine(v).length;return new a(b,p,v,E)}}},this.openingBracketBlock=function(l,u,d,f,m){var h={row:d,column:f+1},p=l.$findClosingBracket(u,h,m);if(p){var g=l.foldWidgets[p.row];return g==null&&(g=l.getFoldWidget(p.row)),g=="start"&&p.row>h.row&&(p.row--,p.column=l.getLine(p.row).length),a.fromPoints(h,p)}},this.closingBracketBlock=function(l,u,d,f,m){var h={row:d,column:f},p=l.$findOpeningBracket(u,h);if(p)return p.column++,h.column--,a.fromPoints(p,h)}}).call(s.prototype)}),ace.define("ace/line_widgets",["require","exports","module","ace/lib/dom"],function(t,n,r){var a=t("./lib/dom");function s(l){this.session=l,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeFold",this.updateOnFold),this.session.on("changeEditor",this.$onChangeEditor)}(function(){this.getRowLength=function(l){var u;return this.lineWidgets?u=this.lineWidgets[l]&&this.lineWidgets[l].rowCount||0:u=0,!this.$useWrapMode||!this.$wrapData[l]?1+u:this.$wrapData[l].length+1+u},this.$getWidgetScreenLength=function(){var l=0;return this.lineWidgets.forEach(function(u){u&&u.rowCount&&!u.hidden&&(l+=u.rowCount)}),l},this.$onChangeEditor=function(l){this.attach(l.editor)},this.attach=function(l){l&&l.widgetManager&&l.widgetManager!=this&&l.widgetManager.detach(),this.editor!=l&&(this.detach(),this.editor=l,l&&(l.widgetManager=this,l.renderer.on("beforeRender",this.measureWidgets),l.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(l){var u=this.editor;if(u){this.editor=null,u.widgetManager=null,u.renderer.off("beforeRender",this.measureWidgets),u.renderer.off("afterRender",this.renderWidgets);var d=this.session.lineWidgets;d&&d.forEach(function(f){f&&f.el&&f.el.parentNode&&(f._inDocument=!1,f.el.parentNode.removeChild(f.el))})}},this.updateOnFold=function(l,u){var d=u.lineWidgets;if(!(!d||!l.action)){for(var f=l.data,m=f.start.row,h=f.end.row,p=l.action=="add",g=m+1;g<h;g++)d[g]&&(d[g].hidden=p);d[h]&&(p?d[m]?d[h].hidden=p:d[m]=d[h]:(d[m]==d[h]&&(d[m]=void 0),d[h].hidden=p))}},this.updateOnChange=function(l){var u=this.session.lineWidgets;if(u){var d=l.start.row,f=l.end.row-d;if(f!==0)if(l.action=="remove"){var m=u.splice(d+1,f);!u[d]&&m[m.length-1]&&(u[d]=m.pop()),m.forEach(function(p){p&&this.removeLineWidget(p)},this),this.$updateRows()}else{var h=new Array(f);u[d]&&u[d].column!=null&&l.start.column>u[d].column&&d++,h.unshift(d,0),u.splice.apply(u,h),this.$updateRows()}}},this.$updateRows=function(){var l=this.session.lineWidgets;if(l){var u=!0;l.forEach(function(d,f){if(d)for(u=!1,d.row=f;d.$oldWidget;)d.$oldWidget.row=f,d=d.$oldWidget}),u&&(this.session.lineWidgets=null)}},this.$registerLineWidget=function(l){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength()));var u=this.session.lineWidgets[l.row];return u&&(l.$oldWidget=u,u.el&&u.el.parentNode&&(u.el.parentNode.removeChild(u.el),u._inDocument=!1)),this.session.lineWidgets[l.row]=l,l},this.addLineWidget=function(l){if(this.$registerLineWidget(l),l.session=this.session,!this.editor)return l;var u=this.editor.renderer;l.html&&!l.el&&(l.el=a.createElement("div"),l.el.innerHTML=l.html),l.el&&(a.addCssClass(l.el,"ace_lineWidgetContainer"),l.el.style.position="absolute",l.el.style.zIndex=5,u.container.appendChild(l.el),l._inDocument=!0,l.coverGutter||(l.el.style.zIndex=3),l.pixelHeight==null&&(l.pixelHeight=l.el.offsetHeight)),l.rowCount==null&&(l.rowCount=l.pixelHeight/u.layerConfig.lineHeight);var d=this.session.getFoldAt(l.row,0);if(l.$fold=d,d){var f=this.session.lineWidgets;l.row==d.end.row&&!f[d.start.row]?f[d.start.row]=l:l.hidden=!0}return this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows(),this.renderWidgets(null,u),this.onWidgetChanged(l),l},this.removeLineWidget=function(l){if(l._inDocument=!1,l.session=null,l.el&&l.el.parentNode&&l.el.parentNode.removeChild(l.el),l.editor&&l.editor.destroy)try{l.editor.destroy()}catch{}if(this.session.lineWidgets){var u=this.session.lineWidgets[l.row];if(u==l)this.session.lineWidgets[l.row]=l.$oldWidget,l.$oldWidget&&this.onWidgetChanged(l.$oldWidget);else for(;u;){if(u.$oldWidget==l){u.$oldWidget=l.$oldWidget;break}u=u.$oldWidget}}this.session._emit("changeFold",{data:{start:{row:l.row}}}),this.$updateRows()},this.getWidgetsAtRow=function(l){for(var u=this.session.lineWidgets,d=u&&u[l],f=[];d;)f.push(d),d=d.$oldWidget;return f},this.onWidgetChanged=function(l){this.session._changedWidgets.push(l),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(l,u){var d=this.session._changedWidgets,f=u.layerConfig;if(!(!d||!d.length)){for(var m=1/0,h=0;h<d.length;h++){var p=d[h];if(!(!p||!p.el)&&p.session==this.session){if(!p._inDocument){if(this.session.lineWidgets[p.row]!=p)continue;p._inDocument=!0,u.container.appendChild(p.el)}p.h=p.el.offsetHeight,p.fixedWidth||(p.w=p.el.offsetWidth,p.screenWidth=Math.ceil(p.w/f.characterWidth));var g=p.h/f.lineHeight;p.coverLine&&(g-=this.session.getRowLineCount(p.row),g<0&&(g=0)),p.rowCount!=g&&(p.rowCount=g,p.row<m&&(m=p.row))}}m!=1/0&&(this.session._emit("changeFold",{data:{start:{row:m}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(l,u){var d=u.layerConfig,f=this.session.lineWidgets;if(f){for(var m=Math.min(this.firstRow,d.firstRow),h=Math.max(this.lastRow,d.lastRow,f.length);m>0&&!f[m];)m--;this.firstRow=d.firstRow,this.lastRow=d.lastRow,u.$cursorLayer.config=d;for(var p=m;p<=h;p++){var g=f[p];if(!(!g||!g.el)){if(g.hidden){g.el.style.top=-100-(g.pixelHeight||0)+"px";continue}g._inDocument||(g._inDocument=!0,u.container.appendChild(g.el));var b=u.$cursorLayer.getPixelPosition({row:p,column:0},!0).top;g.coverLine||(b+=d.lineHeight*this.session.getRowLineCount(g.row)),g.el.style.top=b-d.offset+"px";var v=g.coverGutter?0:u.gutterWidth;g.fixedWidth||(v-=u.scrollLeft),g.el.style.left=v+"px",g.fullWidth&&g.screenWidth&&(g.el.style.minWidth=d.width+2*d.padding+"px"),g.fixedWidth?g.el.style.right=u.scrollBar.getWidth()+"px":g.el.style.right=""}}}}}).call(s.prototype),n.LineWidgets=s}),ace.define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(t,n,r){var a=t("../line_widgets").LineWidgets,s=t("../lib/dom"),l=t("../range").Range;function u(f,m,h){for(var p=0,g=f.length-1;p<=g;){var b=p+g>>1,v=h(m,f[b]);if(v>0)p=b+1;else if(v<0)g=b-1;else return b}return-(p+1)}function d(f,m,h){var p=f.getAnnotations().sort(l.comparePoints);if(p.length){var g=u(p,{row:m,column:-1},l.comparePoints);g<0&&(g=-g-1),g>=p.length?g=h>0?0:p.length-1:g===0&&h<0&&(g=p.length-1);var b=p[g];if(!(!b||!h)){if(b.row===m){do b=p[g+=h];while(b&&b.row===m);if(!b)return p.slice()}var v=[];m=b.row;do v[h<0?"unshift":"push"](b),b=p[g+=h];while(b&&b.row==m);return v.length&&v}}}n.showErrorMarker=function(f,m){var h=f.session;h.widgetManager||(h.widgetManager=new a(h),h.widgetManager.attach(f));var p=f.getCursorPosition(),g=p.row,b=h.widgetManager.getWidgetsAtRow(g).filter(function(S){return S.type=="errorMarker"})[0];b?b.destroy():g-=m;var v=d(h,g,m),y;if(v){var C=v[0];p.column=(C.pos&&typeof C.column!="number"?C.pos.sc:C.column)||0,p.row=C.row,y=f.renderer.$gutterLayer.$annotations[p.row]}else{if(b)return;y={text:["Looks good!"],className:"ace_ok"}}f.session.unfold(p.row),f.selection.moveToPosition(p);var E={row:p.row,fixedWidth:!0,coverGutter:!0,el:s.createElement("div"),type:"errorMarker"},A=E.el.appendChild(s.createElement("div")),k=E.el.appendChild(s.createElement("div"));k.className="error_widget_arrow "+y.className;var T=f.renderer.$cursorLayer.getPixelPosition(p).left;k.style.left=T+f.renderer.gutterWidth-5+"px",E.el.className="error_widget_wrapper",A.className="error_widget "+y.className,A.innerHTML=y.text.join("<br>"),A.appendChild(s.createElement("div"));var $=function(S,I,R){if(I===0&&(R==="esc"||R==="return"))return E.destroy(),{command:"null"}};E.destroy=function(){f.$mouseHandler.isMousePressed||(f.keyBinding.removeKeyboardHandler($),h.widgetManager.removeLineWidget(E),f.off("changeSelection",E.destroy),f.off("changeSession",E.destroy),f.off("mouseup",E.destroy),f.off("change",E.destroy))},f.keyBinding.addKeyboardHandler($),f.on("changeSelection",E.destroy),f.on("changeSession",E.destroy),f.on("mouseup",E.destroy),f.on("change",E.destroy),f.session.widgetManager.addLineWidget(E),E.el.onmousedown=f.focus.bind(f),f.renderer.scrollCursorIntoView(null,.5,{bottom:E.el.offsetHeight})},s.importCssString("	    .error_widget_wrapper {	        background: inherit;	        color: inherit;	        border:none	    }	    .error_widget {	        border-top: solid 2px;	        border-bottom: solid 2px;	        margin: 5px 0;	        padding: 10px 40px;	        white-space: pre-wrap;	    }	    .error_widget.ace_error, .error_widget_arrow.ace_error{	        border-color: #ff5a5a	    }	    .error_widget.ace_warning, .error_widget_arrow.ace_warning{	        border-color: #F1D817	    }	    .error_widget.ace_info, .error_widget_arrow.ace_info{	        border-color: #5a5a5a	    }	    .error_widget.ace_ok, .error_widget_arrow.ace_ok{	        border-color: #5aaa5a	    }	    .error_widget_arrow {	        position: absolute;	        border: solid 5px;	        border-top-color: transparent!important;	        border-right-color: transparent!important;	        border-left-color: transparent!important;	        top: -5px;	    }	","error_marker.css",!1)}),ace.define("ace/ace",["require","exports","module","ace/lib/dom","ace/lib/event","ace/range","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config","ace/loader_build"],function(t,n,r){t("./loader_build")(n);var a=t("./lib/dom"),s=t("./lib/event"),l=t("./range").Range,u=t("./editor").Editor,d=t("./edit_session").EditSession,f=t("./undomanager").UndoManager,m=t("./virtual_renderer").VirtualRenderer;t("./worker/worker_client"),t("./keyboard/hash_handler"),t("./placeholder"),t("./multi_select"),t("./mode/folding/fold_mode"),t("./theme/textmate"),t("./ext/error_marker"),n.config=t("./config"),n.edit=function(h,p){if(typeof h=="string"){var g=h;if(h=document.getElementById(g),!h)throw new Error("ace.edit can't find div #"+g)}if(h&&h.env&&h.env.editor instanceof u)return h.env.editor;var b="";if(h&&/input|textarea/i.test(h.tagName)){var v=h;b=v.value,h=a.createElement("pre"),v.parentNode.replaceChild(h,v)}else h&&(b=h.textContent,h.innerHTML="");var y=n.createEditSession(b),C=new u(new m(h),y,p),E={document:y,editor:C,onResize:C.resize.bind(C,null)};return v&&(E.textarea=v),s.addListener(window,"resize",E.onResize),C.on("destroy",function(){s.removeListener(window,"resize",E.onResize),E.editor.container.env=null}),C.container.env=C.env=E,C},n.createEditSession=function(h,p){var g=new d(h,p);return g.setUndoManager(new f),g},n.Range=l,n.Editor=u,n.EditSession=d,n.UndoManager=f,n.VirtualRenderer=m,n.version=n.config.version}),function(){ace.require(["ace/ace"],function(t){t&&(t.config.init(!0),t.define=ace.define),window.ace||(window.ace=t);for(var n in t)t.hasOwnProperty(n)&&(window.ace[n]=t[n]);window.ace.default=window.ace,o&&(o.exports=window.ace)})}()})(ace$1);var aceExports=ace$1.exports,modeSql={exports:{}};(function(o,e){ace.define("ace/mode/sql_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){var u="select|insert|update|delete|from|where|and|or|group|by|order|limit|offset|having|as|case|when|then|else|end|type|left|right|join|on|outer|desc|asc|union|create|table|primary|key|if|foreign|not|references|default|null|inner|cross|natural|database|drop|grant|distinct",d="true|false",f="avg|count|first|last|max|min|sum|ucase|lcase|mid|len|round|rank|now|format|coalesce|ifnull|isnull|nvl",m="int|numeric|decimal|date|varchar|char|bigint|float|double|bit|binary|text|set|timestamp|money|real|number|integer",h=this.createKeywordMapper({"support.function":f,keyword:u,"constant.language":d,"storage.type":m},"identifier",!0);this.$rules={start:[{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"string",regex:'".*?"'},{token:"string",regex:"'.*?'"},{token:"string",regex:"`.*?`"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:h,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}]},this.normalizeRules()};a.inherits(l,s),n.SqlHighlightRules=l}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/folding/sql",["require","exports","module","ace/lib/oop","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../../lib/oop"),s=t("./cstyle").FoldMode,l=n.FoldMode=function(){};a.inherits(l,s),(function(){}).call(l.prototype)}),ace.define("ace/mode/sql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sql_highlight_rules","ace/mode/folding/sql"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./sql_highlight_rules").SqlHighlightRules,u=t("./folding/sql").FoldMode,d=function(){this.HighlightRules=l,this.foldingRules=new u,this.$behaviour=this.$defaultBehaviour};a.inherits(d,s),(function(){this.lineCommentStart="--",this.blockComment={start:"/*",end:"*/"},this.$id="ace/mode/sql",this.snippetFileId="ace/snippets/sql"}).call(d.prototype),n.Mode=d}),function(){ace.require(["ace/mode/sql"],function(t){o&&(o.exports=t)})}()})(modeSql);var modeMysql={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/mysql_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop");t("../lib/lang");var s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u=function(){var d="alter|and|as|asc|between|count|create|delete|desc|distinct|drop|from|having|in|insert|into|is|join|like|not|on|or|order|select|set|table|union|update|values|where|accessible|action|add|after|algorithm|all|analyze|asensitive|at|authors|auto_increment|autocommit|avg|avg_row_length|before|binary|binlog|both|btree|cache|call|cascade|cascaded|case|catalog_name|chain|change|changed|character|check|checkpoint|checksum|class_origin|client_statistics|close|coalesce|code|collate|collation|collations|column|columns|comment|commit|committed|completion|concurrent|condition|connection|consistent|constraint|contains|continue|contributors|convert|cross|current_date|current_time|current_timestamp|current_user|cursor|data|database|databases|day_hour|day_microsecond|day_minute|day_second|deallocate|dec|declare|default|delay_key_write|delayed|delimiter|des_key_file|describe|deterministic|dev_pop|dev_samp|deviance|directory|disable|discard|distinctrow|div|dual|dumpfile|each|elseif|enable|enclosed|end|ends|engine|engines|enum|errors|escape|escaped|even|event|events|every|execute|exists|exit|explain|extended|fast|fetch|field|fields|first|flush|for|force|foreign|found_rows|full|fulltext|function|general|global|grant|grants|group|groupby_concat|handler|hash|help|high_priority|hosts|hour_microsecond|hour_minute|hour_second|if|ignore|ignore_server_ids|import|index|index_statistics|infile|inner|innodb|inout|insensitive|insert_method|install|interval|invoker|isolation|iterate|key|keys|kill|language|last|leading|leave|left|level|limit|linear|lines|list|load|local|localtime|localtimestamp|lock|logs|low_priority|master|master_heartbeat_period|master_ssl_verify_server_cert|masters|match|max|max_rows|maxvalue|message_text|middleint|migrate|min|min_rows|minute_microsecond|minute_second|mod|mode|modifies|modify|mutex|mysql_errno|natural|next|no|no_write_to_binlog|offline|offset|one|online|open|optimize|option|optionally|out|outer|outfile|pack_keys|parser|partition|partitions|password|phase|plugin|plugins|prepare|preserve|prev|primary|privileges|procedure|processlist|profile|profiles|purge|query|quick|range|read|read_write|reads|real|rebuild|recover|references|regexp|relaylog|release|remove|rename|reorganize|repair|repeatable|replace|require|resignal|restrict|resume|return|returns|revoke|right|rlike|rollback|rollup|row|row_format|rtree|savepoint|schedule|schema|schema_name|schemas|second_microsecond|security|sensitive|separator|serializable|server|session|share|show|signal|slave|slow|smallint|snapshot|soname|spatial|specific|sql|sql_big_result|sql_buffer_result|sql_cache|sql_calc_found_rows|sql_no_cache|sql_small_result|sqlexception|sqlstate|sqlwarning|ssl|start|starting|starts|status|std|stddev|stddev_pop|stddev_samp|storage|straight_join|subclass_origin|sum|suspend|table_name|table_statistics|tables|tablespace|temporary|terminated|to|trailing|transaction|trigger|triggers|truncate|uncommitted|undo|uninstall|unique|unlock|upgrade|usage|use|use_frm|user|user_resources|user_statistics|using|utc_date|utc_time|utc_timestamp|value|variables|varying|view|views|warnings|when|while|with|work|write|xa|xor|year_month|zerofill|begin|do|then|else|loop|repeat",f="by|bool|boolean|bit|blob|decimal|double|enum|float|long|longblob|longtext|medium|mediumblob|mediumint|mediumtext|time|timestamp|tinyblob|tinyint|tinytext|text|bigint|int|int1|int2|int3|int4|int8|integer|float|float4|float8|double|char|varbinary|varchar|varcharacter|precision|date|datetime|year|unsigned|signed|numeric|ucase|lcase|mid|len|round|rank|now|format|coalesce|ifnull|isnull|nvl",m="charset|clear|connect|edit|ego|exit|go|help|nopager|notee|nowarning|pager|print|prompt|quit|rehash|source|status|system|tee",h=this.createKeywordMapper({"support.function":f,keyword:d,constant:"false|true|null|unknown|date|time|timestamp|ODBCdotTable|zerolessFloat","variable.language":m},"identifier",!0);function p(g){var b=g.start,v=g.escape;return{token:"string.start",regex:b,next:[{token:"constant.language.escape",regex:v},{token:"string.end",next:"start",regex:b},{defaultToken:"string"}]}}this.$rules={start:[{token:"comment",regex:"(?:-- |#).*$"},p({start:'"',escape:/\\[0'"bnrtZ\\%_]?/}),p({start:"'",escape:/\\[0'"bnrtZ\\%_]?/}),s.getStartRule("doc-start"),{token:"comment",regex:/\/\*/,next:"comment"},{token:"constant.numeric",regex:/0[xX][0-9a-fA-F]+|[xX]'[0-9a-fA-F]+'|0[bB][01]+|[bB]'[01]+'/},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:h,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"constant.class",regex:"@@?[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"constant.buildin",regex:"`[^`]*`"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}],comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]},this.embedRules(s,"doc-",[s.getEndRule("start")]),this.normalizeRules()};a.inherits(u,l),n.MysqlHighlightRules=u}),ace.define("ace/mode/mysql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/mysql_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("../mode/text").Mode,l=t("./mysql_highlight_rules").MysqlHighlightRules,u=function(){this.HighlightRules=l,this.$behaviour=this.$defaultBehaviour};a.inherits(u,s),(function(){this.lineCommentStart=["--","#"],this.blockComment={start:"/*",end:"*/"},this.$id="ace/mode/mysql"}).call(u.prototype),n.Mode=u}),function(){ace.require(["ace/mode/mysql"],function(t){o&&(o.exports=t)})}()})(modeMysql);var modePgsql={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/perl_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){var u="base|constant|continue|else|elsif|for|foreach|format|goto|if|last|local|my|next|no|package|parent|redo|require|scalar|sub|unless|until|while|use|vars",d="ARGV|ENV|INC|SIG",f="getprotobynumber|getprotobyname|getservbyname|gethostbyaddr|gethostbyname|getservbyport|getnetbyaddr|getnetbyname|getsockname|getpeername|setpriority|getprotoent|setprotoent|getpriority|endprotoent|getservent|setservent|endservent|sethostent|socketpair|getsockopt|gethostent|endhostent|setsockopt|setnetent|quotemeta|localtime|prototype|getnetent|endnetent|rewinddir|wantarray|getpwuid|closedir|getlogin|readlink|endgrent|getgrgid|getgrnam|shmwrite|shutdown|readline|endpwent|setgrent|readpipe|formline|truncate|dbmclose|syswrite|setpwent|getpwnam|getgrent|getpwent|ucfirst|sysread|setpgrp|shmread|sysseek|sysopen|telldir|defined|opendir|connect|lcfirst|getppid|binmode|syscall|sprintf|getpgrp|readdir|seekdir|waitpid|reverse|unshift|symlink|dbmopen|semget|msgrcv|rename|listen|chroot|msgsnd|shmctl|accept|unpack|exists|fileno|shmget|system|unlink|printf|gmtime|msgctl|semctl|values|rindex|substr|splice|length|msgget|select|socket|return|caller|delete|alarm|ioctl|index|undef|lstat|times|srand|chown|fcntl|close|write|umask|rmdir|study|sleep|chomp|untie|print|utime|mkdir|atan2|split|crypt|flock|chmod|BEGIN|bless|chdir|semop|shift|reset|link|stat|chop|grep|fork|dump|join|open|tell|pipe|exit|glob|warn|each|bind|sort|pack|eval|push|keys|getc|kill|seek|sqrt|send|wait|rand|tied|read|time|exec|recv|eof|chr|int|ord|exp|pos|pop|sin|log|abs|oct|hex|tie|cos|vec|END|ref|map|die|uc|lc|do",m=this.createKeywordMapper({keyword:u,"constant.language":d,"support.function":f},"identifier");this.$rules={start:[{token:"comment.doc",regex:"^=(?:begin|item)\\b",next:"block_comment"},{token:"string.regexp",regex:"[/](?:(?:\\[(?:\\\\]|[^\\]])+\\])|(?:\\\\/|[^\\]/]))*[/]\\w*\\s*(?=[).,;]|$)"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:'["].*\\\\$',next:"qqstring"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"string",regex:"['].*\\\\$",next:"qstring"},{token:"constant.numeric",regex:"0x[0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:m,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"%#|\\$#|\\.\\.\\.|\\|\\|=|>>=|<<=|<=>|&&=|=>|!~|\\^=|&=|\\|=|\\.=|x=|%=|\\/=|\\*=|\\-=|\\+=|=~|\\*\\*|\\-\\-|\\.\\.|\\|\\||&&|\\+\\+|\\->|!=|==|>=|<=|>>|<<|,|=|\\?\\:|\\^|\\||x|%|\\/|\\*|<|&|\\\\|~|!|>|\\.|\\-|\\+|\\-C|\\-b|\\-S|\\-u|\\-t|\\-p|\\-l|\\-d|\\-f|\\-g|\\-s|\\-z|\\-k|\\-e|\\-O|\\-T|\\-B|\\-M|\\-A|\\-X|\\-W|\\-c|\\-R|\\-o|\\-x|\\-w|\\-r|\\b(?:and|cmp|eq|ge|gt|le|lt|ne|not|or|xor)"},{token:"comment",regex:"#.*$"},{token:"lparen",regex:"[[({]"},{token:"rparen",regex:"[\\])}]"},{token:"text",regex:"\\s+"}],qqstring:[{token:"string",regex:'(?:(?:\\\\.)|(?:[^"\\\\]))*?"',next:"start"},{token:"string",regex:".+"}],qstring:[{token:"string",regex:"(?:(?:\\\\.)|(?:[^'\\\\]))*?'",next:"start"},{token:"string",regex:".+"}],block_comment:[{token:"comment.doc",regex:"^=cut\\b",next:"start"},{defaultToken:"comment.doc"}]}};a.inherits(l,s),n.PerlHighlightRules=l}),ace.define("ace/mode/python_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){var u="and|as|assert|break|class|continue|def|del|elif|else|except|exec|finally|for|from|global|if|import|in|is|lambda|not|or|pass|print|raise|return|try|while|with|yield|async|await|nonlocal",d="True|False|None|NotImplemented|Ellipsis|__debug__",f="abs|divmod|input|open|staticmethod|all|enumerate|int|ord|str|any|eval|isinstance|pow|sum|basestring|execfile|issubclass|print|super|binfile|bin|iter|property|tuple|bool|filter|len|range|type|bytearray|float|list|raw_input|unichr|callable|format|locals|reduce|unicode|chr|frozenset|long|reload|vars|classmethod|getattr|map|repr|xrange|cmp|globals|max|reversed|zip|compile|hasattr|memoryview|round|__import__|complex|hash|min|apply|delattr|help|next|setattr|set|buffer|dict|hex|object|slice|coerce|dir|id|oct|sorted|intern|ascii|breakpoint|bytes",m=this.createKeywordMapper({"invalid.deprecated":"debugger","support.function":f,"variable.language":"self|cls","constant.language":d,keyword:u},"identifier"),h="[uU]?",p="[rR]",g="[fF]",b="(?:[rR][fF]|[fF][rR])",v="(?:(?:[1-9]\\d*)|(?:0))",y="(?:0[oO]?[0-7]+)",C="(?:0[xX][\\dA-Fa-f]+)",E="(?:0[bB][01]+)",A="(?:"+v+"|"+y+"|"+C+"|"+E+")",k="(?:[eE][+-]?\\d+)",T="(?:\\.\\d+)",$="(?:\\d+)",S="(?:(?:"+$+"?"+T+")|(?:"+$+"\\.))",I="(?:(?:"+S+"|"+$+")"+k+")",R="(?:"+I+"|"+S+")",N=`\\\\(x[0-9A-Fa-f]{2}|[0-7]{3}|[\\\\abfnrtv'"]|U[0-9A-Fa-f]{8}|u[0-9A-Fa-f]{4})`;this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"string",regex:h+'"{3}',next:"qqstring3"},{token:"string",regex:h+'"(?=.)',next:"qqstring"},{token:"string",regex:h+"'{3}",next:"qstring3"},{token:"string",regex:h+"'(?=.)",next:"qstring"},{token:"string",regex:p+'"{3}',next:"rawqqstring3"},{token:"string",regex:p+'"(?=.)',next:"rawqqstring"},{token:"string",regex:p+"'{3}",next:"rawqstring3"},{token:"string",regex:p+"'(?=.)",next:"rawqstring"},{token:"string",regex:g+'"{3}',next:"fqqstring3"},{token:"string",regex:g+'"(?=.)',next:"fqqstring"},{token:"string",regex:g+"'{3}",next:"fqstring3"},{token:"string",regex:g+"'(?=.)",next:"fqstring"},{token:"string",regex:b+'"{3}',next:"rfqqstring3"},{token:"string",regex:b+'"(?=.)',next:"rfqqstring"},{token:"string",regex:b+"'{3}",next:"rfqstring3"},{token:"string",regex:b+"'(?=.)",next:"rfqstring"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|%|@|<<|>>|&|\\||\\^|~|<|>|<=|=>|==|!=|<>|="},{token:"punctuation",regex:",|:|;|\\->|\\+=|\\-=|\\*=|\\/=|\\/\\/=|%=|@=|&=|\\|=|^=|>>=|<<=|\\*\\*="},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]\\)\\}]"},{token:["keyword","text","entity.name.function"],regex:"(def|class)(\\s+)([\\u00BF-\\u1FFF\\u2C00-\\uD7FF\\w]+)"},{token:"text",regex:"\\s+"},{include:"constants"}],qqstring3:[{token:"constant.language.escape",regex:N},{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],qstring3:[{token:"constant.language.escape",regex:N},{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],qqstring:[{token:"constant.language.escape",regex:N},{token:"string",regex:"\\\\$",next:"qqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:N},{token:"string",regex:"\\\\$",next:"qstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],rawqqstring3:[{token:"string",regex:'"{3}',next:"start"},{defaultToken:"string"}],rawqstring3:[{token:"string",regex:"'{3}",next:"start"},{defaultToken:"string"}],rawqqstring:[{token:"string",regex:"\\\\$",next:"rawqqstring"},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],rawqstring:[{token:"string",regex:"\\\\$",next:"rawqstring"},{token:"string",regex:"'|$",next:"start"},{defaultToken:"string"}],fqqstring3:[{token:"constant.language.escape",regex:N},{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring3:[{token:"constant.language.escape",regex:N},{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqqstring:[{token:"constant.language.escape",regex:N},{token:"string",regex:"\\\\$",next:"fqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstring:[{token:"constant.language.escape",regex:N},{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring3:[{token:"string",regex:'"{3}',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring3:[{token:"string",regex:"'{3}",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqqstring:[{token:"string",regex:"\\\\$",next:"rfqqstring"},{token:"string",regex:'"|$',next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],rfqstring:[{token:"string",regex:"'|$",next:"start"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"},{defaultToken:"string"}],fqstringParRules:[{token:"paren.lparen",regex:"[\\[\\(]"},{token:"paren.rparen",regex:"[\\]\\)]"},{token:"string",regex:"\\s+"},{token:"string",regex:"'[^']*'"},{token:"string",regex:'"[^"]*"'},{token:"function.support",regex:"(!s|!r|!a)"},{include:"constants"},{token:"paren.rparen",regex:"}",next:"pop"},{token:"paren.lparen",regex:"{",push:"fqstringParRules"}],constants:[{token:"constant.numeric",regex:"(?:"+R+"|\\d+)[jJ]\\b"},{token:"constant.numeric",regex:R},{token:"constant.numeric",regex:A+"[lL]\\b"},{token:"constant.numeric",regex:A+"\\b"},{token:["punctuation","function.support"],regex:"(\\.)([a-zA-Z_]+)\\b"},{token:m,regex:"[a-zA-Z_$][a-zA-Z0-9_$]*\\b"}]},this.normalizeRules()};a.inherits(l,s),n.PythonHighlightRules=l}),ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};a.inherits(l,s),n.JsonHighlightRules=l}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u="[a-zA-Z\\$_-][a-zA-Z\\d\\$_-]*",d=function(h){var p=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),g="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",b="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),m("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+u+")(\\.)(prototype)(\\.)("+u+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+u+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+g+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:p,regex:u},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:u},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),m("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:u},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!h||!h.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(v,y,C){if(this.next=v=="{"?this.nextState:"",v=="{"&&C.length)C.unshift("start",y);else if(v=="}"&&C.length&&(C.shift(),this.next=C.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return v=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:b},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!h||h.jsx!=!1)&&f.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};a.inherits(d,l);function f(){var h=u.replace("\\d","\\d\\-"),p={onMatch:function(b,v,y){var C=b.charAt(1)=="/"?2:1;return C==1?(v!=this.nextState?y.unshift(this.next,this.nextState,0):y.unshift(this.next),y[2]++):C==2&&v==this.nextState&&(y[1]--,(!y[1]||y[1]<0)&&(y.shift(),y.shift())),[{type:"meta.tag.punctuation."+(C==1?"":"end-")+"tag-open.xml",value:b.slice(0,C)},{type:"meta.tag.tag-name.xml",value:b.substr(C)}]},regex:"</?"+h,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(p);var g={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[g,p,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(b,v,y){return v==y[0]&&y.shift(),b.length==2&&(y[0]==this.nextState&&y[1]--,(!y[1]||y[1]<0)&&y.splice(0,2)),this.next=y[0]||"start",[{type:this.token,value:b}]},nextState:"jsx"},g,m("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:h},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},p],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function m(h){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}n.JavaScriptHighlightRules=d}),ace.define("ace/mode/pgsql_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules","ace/mode/perl_highlight_rules","ace/mode/python_highlight_rules","ace/mode/json_highlight_rules","ace/mode/javascript_highlight_rules"],function(t,n,r){var a=t("../lib/oop");t("../lib/lang");var s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u=t("./perl_highlight_rules").PerlHighlightRules,d=t("./python_highlight_rules").PythonHighlightRules,f=t("./json_highlight_rules").JsonHighlightRules,m=t("./javascript_highlight_rules").JavaScriptHighlightRules,h=function(){var p="abort|absolute|abstime|access|aclitem|action|add|admin|after|aggregate|all|also|alter|always|analyse|analyze|and|any|anyarray|anyelement|anyenum|anynonarray|anyrange|array|as|asc|assertion|assignment|asymmetric|at|attribute|authorization|backward|before|begin|between|bigint|binary|bit|bool|boolean|both|box|bpchar|by|bytea|cache|called|cascade|cascaded|case|cast|catalog|chain|char|character|characteristics|check|checkpoint|cid|cidr|circle|class|close|cluster|coalesce|collate|collation|column|comment|comments|commit|committed|concurrently|configuration|connection|constraint|constraints|content|continue|conversion|copy|cost|create|cross|cstring|csv|current|current_catalog|current_date|current_role|current_schema|current_time|current_timestamp|current_user|cursor|cycle|data|database|date|daterange|day|deallocate|dec|decimal|declare|default|defaults|deferrable|deferred|definer|delete|delimiter|delimiters|desc|dictionary|disable|discard|distinct|do|document|domain|double|drop|each|else|enable|encoding|encrypted|end|enum|escape|event|event_trigger|except|exclude|excluding|exclusive|execute|exists|explain|extension|external|extract|false|family|fdw_handler|fetch|first|float|float4|float8|following|for|force|foreign|forward|freeze|from|full|function|functions|global|grant|granted|greatest|group|gtsvector|handler|having|header|hold|hour|identity|if|ilike|immediate|immutable|implicit|in|including|increment|index|indexes|inet|inherit|inherits|initially|inline|inner|inout|input|insensitive|insert|instead|int|int2|int2vector|int4|int4range|int8|int8range|integer|internal|intersect|interval|into|invoker|is|isnull|isolation|join|json|key|label|language|language_handler|large|last|lateral|lc_collate|lc_ctype|leading|leakproof|least|left|level|like|limit|line|listen|load|local|localtime|localtimestamp|location|lock|lseg|macaddr|mapping|match|materialized|maxvalue|minute|minvalue|mode|money|month|move|name|names|national|natural|nchar|next|no|none|not|nothing|notify|notnull|nowait|null|nullif|nulls|numeric|numrange|object|of|off|offset|oid|oids|oidvector|on|only|opaque|operator|option|options|or|order|out|outer|over|overlaps|overlay|owned|owner|parser|partial|partition|passing|password|path|pg_attribute|pg_auth_members|pg_authid|pg_class|pg_database|pg_node_tree|pg_proc|pg_type|placing|plans|point|polygon|position|preceding|precision|prepare|prepared|preserve|primary|prior|privileges|procedural|procedure|program|quote|range|read|real|reassign|recheck|record|recursive|ref|refcursor|references|refresh|regclass|regconfig|regdictionary|regoper|regoperator|regproc|regprocedure|regtype|reindex|relative|release|reltime|rename|repeatable|replace|replica|reset|restart|restrict|returning|returns|revoke|right|role|rollback|row|rows|rule|savepoint|schema|scroll|search|second|security|select|sequence|sequences|serializable|server|session|session_user|set|setof|share|show|similar|simple|smallint|smgr|snapshot|some|stable|standalone|start|statement|statistics|stdin|stdout|storage|strict|strip|substring|symmetric|sysid|system|table|tables|tablespace|temp|template|temporary|text|then|tid|time|timestamp|timestamptz|timetz|tinterval|to|trailing|transaction|treat|trigger|trim|true|truncate|trusted|tsquery|tsrange|tstzrange|tsvector|txid_snapshot|type|types|unbounded|uncommitted|unencrypted|union|unique|unknown|unlisten|unlogged|until|update|user|using|uuid|vacuum|valid|validate|validator|value|values|varbit|varchar|variadic|varying|verbose|version|view|void|volatile|when|where|whitespace|window|with|without|work|wrapper|write|xid|xml|xmlattributes|xmlconcat|xmlelement|xmlexists|xmlforest|xmlparse|xmlpi|xmlroot|xmlserialize|year|yes|zone",g="RI_FKey_cascade_del|RI_FKey_cascade_upd|RI_FKey_check_ins|RI_FKey_check_upd|RI_FKey_noaction_del|RI_FKey_noaction_upd|RI_FKey_restrict_del|RI_FKey_restrict_upd|RI_FKey_setdefault_del|RI_FKey_setdefault_upd|RI_FKey_setnull_del|RI_FKey_setnull_upd|abbrev|abs|abstime|abstimeeq|abstimege|abstimegt|abstimein|abstimele|abstimelt|abstimene|abstimeout|abstimerecv|abstimesend|aclcontains|acldefault|aclexplode|aclinsert|aclitemeq|aclitemin|aclitemout|aclremove|acos|age|any_in|any_out|anyarray_in|anyarray_out|anyarray_recv|anyarray_send|anyelement_in|anyelement_out|anyenum_in|anyenum_out|anynonarray_in|anynonarray_out|anyrange_in|anyrange_out|anytextcat|area|areajoinsel|areasel|array_agg|array_agg_finalfn|array_agg_transfn|array_append|array_cat|array_dims|array_eq|array_fill|array_ge|array_gt|array_in|array_larger|array_le|array_length|array_lower|array_lt|array_ndims|array_ne|array_out|array_prepend|array_recv|array_remove|array_replace|array_send|array_smaller|array_to_json|array_to_string|array_typanalyze|array_upper|arraycontained|arraycontains|arraycontjoinsel|arraycontsel|arrayoverlap|ascii|ascii_to_mic|ascii_to_utf8|asin|atan|atan2|avg|big5_to_euc_tw|big5_to_mic|big5_to_utf8|bit_and|bit_in|bit_length|bit_or|bit_out|bit_recv|bit_send|bitand|bitcat|bitcmp|biteq|bitge|bitgt|bitle|bitlt|bitne|bitnot|bitor|bitshiftleft|bitshiftright|bittypmodin|bittypmodout|bitxor|bool|bool_and|bool_or|booland_statefunc|booleq|boolge|boolgt|boolin|boolle|boollt|boolne|boolor_statefunc|boolout|boolrecv|boolsend|box|box_above|box_above_eq|box_add|box_below|box_below_eq|box_center|box_contain|box_contain_pt|box_contained|box_distance|box_div|box_eq|box_ge|box_gt|box_in|box_intersect|box_le|box_left|box_lt|box_mul|box_out|box_overabove|box_overbelow|box_overlap|box_overleft|box_overright|box_recv|box_right|box_same|box_send|box_sub|bpchar_larger|bpchar_pattern_ge|bpchar_pattern_gt|bpchar_pattern_le|bpchar_pattern_lt|bpchar_smaller|bpcharcmp|bpchareq|bpcharge|bpchargt|bpchariclike|bpcharicnlike|bpcharicregexeq|bpcharicregexne|bpcharin|bpcharle|bpcharlike|bpcharlt|bpcharne|bpcharnlike|bpcharout|bpcharrecv|bpcharregexeq|bpcharregexne|bpcharsend|bpchartypmodin|bpchartypmodout|broadcast|btabstimecmp|btarraycmp|btbeginscan|btboolcmp|btbpchar_pattern_cmp|btbuild|btbuildempty|btbulkdelete|btcanreturn|btcharcmp|btcostestimate|btendscan|btfloat48cmp|btfloat4cmp|btfloat4sortsupport|btfloat84cmp|btfloat8cmp|btfloat8sortsupport|btgetbitmap|btgettuple|btinsert|btint24cmp|btint28cmp|btint2cmp|btint2sortsupport|btint42cmp|btint48cmp|btint4cmp|btint4sortsupport|btint82cmp|btint84cmp|btint8cmp|btint8sortsupport|btmarkpos|btnamecmp|btnamesortsupport|btoidcmp|btoidsortsupport|btoidvectorcmp|btoptions|btrecordcmp|btreltimecmp|btrescan|btrestrpos|btrim|bttext_pattern_cmp|bttextcmp|bttidcmp|bttintervalcmp|btvacuumcleanup|bytea_string_agg_finalfn|bytea_string_agg_transfn|byteacat|byteacmp|byteaeq|byteage|byteagt|byteain|byteale|bytealike|bytealt|byteane|byteanlike|byteaout|bytearecv|byteasend|cash_cmp|cash_div_cash|cash_div_flt4|cash_div_flt8|cash_div_int2|cash_div_int4|cash_eq|cash_ge|cash_gt|cash_in|cash_le|cash_lt|cash_mi|cash_mul_flt4|cash_mul_flt8|cash_mul_int2|cash_mul_int4|cash_ne|cash_out|cash_pl|cash_recv|cash_send|cash_words|cashlarger|cashsmaller|cbrt|ceil|ceiling|center|char|char_length|character_length|chareq|charge|chargt|charin|charle|charlt|charne|charout|charrecv|charsend|chr|cideq|cidin|cidout|cidr|cidr_in|cidr_out|cidr_recv|cidr_send|cidrecv|cidsend|circle|circle_above|circle_add_pt|circle_below|circle_center|circle_contain|circle_contain_pt|circle_contained|circle_distance|circle_div_pt|circle_eq|circle_ge|circle_gt|circle_in|circle_le|circle_left|circle_lt|circle_mul_pt|circle_ne|circle_out|circle_overabove|circle_overbelow|circle_overlap|circle_overleft|circle_overright|circle_recv|circle_right|circle_same|circle_send|circle_sub_pt|clock_timestamp|close_lb|close_ls|close_lseg|close_pb|close_pl|close_ps|close_sb|close_sl|col_description|concat|concat_ws|contjoinsel|contsel|convert|convert_from|convert_to|corr|cos|cot|count|covar_pop|covar_samp|cstring_in|cstring_out|cstring_recv|cstring_send|cume_dist|current_database|current_query|current_schema|current_schemas|current_setting|current_user|currtid|currtid2|currval|cursor_to_xml|cursor_to_xmlschema|database_to_xml|database_to_xml_and_xmlschema|database_to_xmlschema|date|date_cmp|date_cmp_timestamp|date_cmp_timestamptz|date_eq|date_eq_timestamp|date_eq_timestamptz|date_ge|date_ge_timestamp|date_ge_timestamptz|date_gt|date_gt_timestamp|date_gt_timestamptz|date_in|date_larger|date_le|date_le_timestamp|date_le_timestamptz|date_lt|date_lt_timestamp|date_lt_timestamptz|date_mi|date_mi_interval|date_mii|date_ne|date_ne_timestamp|date_ne_timestamptz|date_out|date_part|date_pl_interval|date_pli|date_recv|date_send|date_smaller|date_sortsupport|date_trunc|daterange|daterange_canonical|daterange_subdiff|datetime_pl|datetimetz_pl|dcbrt|decode|degrees|dense_rank|dexp|diagonal|diameter|dispell_init|dispell_lexize|dist_cpoly|dist_lb|dist_pb|dist_pc|dist_pl|dist_ppath|dist_ps|dist_sb|dist_sl|div|dlog1|dlog10|domain_in|domain_recv|dpow|dround|dsimple_init|dsimple_lexize|dsnowball_init|dsnowball_lexize|dsqrt|dsynonym_init|dsynonym_lexize|dtrunc|elem_contained_by_range|encode|enum_cmp|enum_eq|enum_first|enum_ge|enum_gt|enum_in|enum_larger|enum_last|enum_le|enum_lt|enum_ne|enum_out|enum_range|enum_recv|enum_send|enum_smaller|eqjoinsel|eqsel|euc_cn_to_mic|euc_cn_to_utf8|euc_jis_2004_to_shift_jis_2004|euc_jis_2004_to_utf8|euc_jp_to_mic|euc_jp_to_sjis|euc_jp_to_utf8|euc_kr_to_mic|euc_kr_to_utf8|euc_tw_to_big5|euc_tw_to_mic|euc_tw_to_utf8|event_trigger_in|event_trigger_out|every|exp|factorial|family|fdw_handler_in|fdw_handler_out|first_value|float4|float48div|float48eq|float48ge|float48gt|float48le|float48lt|float48mi|float48mul|float48ne|float48pl|float4_accum|float4abs|float4div|float4eq|float4ge|float4gt|float4in|float4larger|float4le|float4lt|float4mi|float4mul|float4ne|float4out|float4pl|float4recv|float4send|float4smaller|float4um|float4up|float8|float84div|float84eq|float84ge|float84gt|float84le|float84lt|float84mi|float84mul|float84ne|float84pl|float8_accum|float8_avg|float8_corr|float8_covar_pop|float8_covar_samp|float8_regr_accum|float8_regr_avgx|float8_regr_avgy|float8_regr_intercept|float8_regr_r2|float8_regr_slope|float8_regr_sxx|float8_regr_sxy|float8_regr_syy|float8_stddev_pop|float8_stddev_samp|float8_var_pop|float8_var_samp|float8abs|float8div|float8eq|float8ge|float8gt|float8in|float8larger|float8le|float8lt|float8mi|float8mul|float8ne|float8out|float8pl|float8recv|float8send|float8smaller|float8um|float8up|floor|flt4_mul_cash|flt8_mul_cash|fmgr_c_validator|fmgr_internal_validator|fmgr_sql_validator|format|format_type|gb18030_to_utf8|gbk_to_utf8|generate_series|generate_subscripts|get_bit|get_byte|get_current_ts_config|getdatabaseencoding|getpgusername|gin_cmp_prefix|gin_cmp_tslexeme|gin_extract_tsquery|gin_extract_tsvector|gin_tsquery_consistent|ginarrayconsistent|ginarrayextract|ginbeginscan|ginbuild|ginbuildempty|ginbulkdelete|gincostestimate|ginendscan|gingetbitmap|gininsert|ginmarkpos|ginoptions|ginqueryarrayextract|ginrescan|ginrestrpos|ginvacuumcleanup|gist_box_compress|gist_box_consistent|gist_box_decompress|gist_box_penalty|gist_box_picksplit|gist_box_same|gist_box_union|gist_circle_compress|gist_circle_consistent|gist_point_compress|gist_point_consistent|gist_point_distance|gist_poly_compress|gist_poly_consistent|gistbeginscan|gistbuild|gistbuildempty|gistbulkdelete|gistcostestimate|gistendscan|gistgetbitmap|gistgettuple|gistinsert|gistmarkpos|gistoptions|gistrescan|gistrestrpos|gistvacuumcleanup|gtsquery_compress|gtsquery_consistent|gtsquery_decompress|gtsquery_penalty|gtsquery_picksplit|gtsquery_same|gtsquery_union|gtsvector_compress|gtsvector_consistent|gtsvector_decompress|gtsvector_penalty|gtsvector_picksplit|gtsvector_same|gtsvector_union|gtsvectorin|gtsvectorout|has_any_column_privilege|has_column_privilege|has_database_privilege|has_foreign_data_wrapper_privilege|has_function_privilege|has_language_privilege|has_schema_privilege|has_sequence_privilege|has_server_privilege|has_table_privilege|has_tablespace_privilege|has_type_privilege|hash_aclitem|hash_array|hash_numeric|hash_range|hashbeginscan|hashbpchar|hashbuild|hashbuildempty|hashbulkdelete|hashchar|hashcostestimate|hashendscan|hashenum|hashfloat4|hashfloat8|hashgetbitmap|hashgettuple|hashinet|hashinsert|hashint2|hashint2vector|hashint4|hashint8|hashmacaddr|hashmarkpos|hashname|hashoid|hashoidvector|hashoptions|hashrescan|hashrestrpos|hashtext|hashvacuumcleanup|hashvarlena|height|host|hostmask|iclikejoinsel|iclikesel|icnlikejoinsel|icnlikesel|icregexeqjoinsel|icregexeqsel|icregexnejoinsel|icregexnesel|inet_client_addr|inet_client_port|inet_in|inet_out|inet_recv|inet_send|inet_server_addr|inet_server_port|inetand|inetmi|inetmi_int8|inetnot|inetor|inetpl|initcap|int2|int24div|int24eq|int24ge|int24gt|int24le|int24lt|int24mi|int24mul|int24ne|int24pl|int28div|int28eq|int28ge|int28gt|int28le|int28lt|int28mi|int28mul|int28ne|int28pl|int2_accum|int2_avg_accum|int2_mul_cash|int2_sum|int2abs|int2and|int2div|int2eq|int2ge|int2gt|int2in|int2larger|int2le|int2lt|int2mi|int2mod|int2mul|int2ne|int2not|int2or|int2out|int2pl|int2recv|int2send|int2shl|int2shr|int2smaller|int2um|int2up|int2vectoreq|int2vectorin|int2vectorout|int2vectorrecv|int2vectorsend|int2xor|int4|int42div|int42eq|int42ge|int42gt|int42le|int42lt|int42mi|int42mul|int42ne|int42pl|int48div|int48eq|int48ge|int48gt|int48le|int48lt|int48mi|int48mul|int48ne|int48pl|int4_accum|int4_avg_accum|int4_mul_cash|int4_sum|int4abs|int4and|int4div|int4eq|int4ge|int4gt|int4in|int4inc|int4larger|int4le|int4lt|int4mi|int4mod|int4mul|int4ne|int4not|int4or|int4out|int4pl|int4range|int4range_canonical|int4range_subdiff|int4recv|int4send|int4shl|int4shr|int4smaller|int4um|int4up|int4xor|int8|int82div|int82eq|int82ge|int82gt|int82le|int82lt|int82mi|int82mul|int82ne|int82pl|int84div|int84eq|int84ge|int84gt|int84le|int84lt|int84mi|int84mul|int84ne|int84pl|int8_accum|int8_avg|int8_avg_accum|int8_sum|int8abs|int8and|int8div|int8eq|int8ge|int8gt|int8in|int8inc|int8inc_any|int8inc_float8_float8|int8larger|int8le|int8lt|int8mi|int8mod|int8mul|int8ne|int8not|int8or|int8out|int8pl|int8pl_inet|int8range|int8range_canonical|int8range_subdiff|int8recv|int8send|int8shl|int8shr|int8smaller|int8um|int8up|int8xor|integer_pl_date|inter_lb|inter_sb|inter_sl|internal_in|internal_out|interval_accum|interval_avg|interval_cmp|interval_div|interval_eq|interval_ge|interval_gt|interval_hash|interval_in|interval_larger|interval_le|interval_lt|interval_mi|interval_mul|interval_ne|interval_out|interval_pl|interval_pl_date|interval_pl_time|interval_pl_timestamp|interval_pl_timestamptz|interval_pl_timetz|interval_recv|interval_send|interval_smaller|interval_transform|interval_um|intervaltypmodin|intervaltypmodout|intinterval|isclosed|isempty|isfinite|ishorizontal|iso8859_1_to_utf8|iso8859_to_utf8|iso_to_koi8r|iso_to_mic|iso_to_win1251|iso_to_win866|isopen|isparallel|isperp|isvertical|johab_to_utf8|json_agg|json_agg_finalfn|json_agg_transfn|json_array_element|json_array_element_text|json_array_elements|json_array_length|json_each|json_each_text|json_extract_path|json_extract_path_op|json_extract_path_text|json_extract_path_text_op|json_in|json_object_field|json_object_field_text|json_object_keys|json_out|json_populate_record|json_populate_recordset|json_recv|json_send|justify_days|justify_hours|justify_interval|koi8r_to_iso|koi8r_to_mic|koi8r_to_utf8|koi8r_to_win1251|koi8r_to_win866|koi8u_to_utf8|lag|language_handler_in|language_handler_out|last_value|lastval|latin1_to_mic|latin2_to_mic|latin2_to_win1250|latin3_to_mic|latin4_to_mic|lead|left|length|like|like_escape|likejoinsel|likesel|line|line_distance|line_eq|line_horizontal|line_in|line_interpt|line_intersect|line_out|line_parallel|line_perp|line_recv|line_send|line_vertical|ln|lo_close|lo_creat|lo_create|lo_export|lo_import|lo_lseek|lo_lseek64|lo_open|lo_tell|lo_tell64|lo_truncate|lo_truncate64|lo_unlink|log|loread|lower|lower_inc|lower_inf|lowrite|lpad|lseg|lseg_center|lseg_distance|lseg_eq|lseg_ge|lseg_gt|lseg_horizontal|lseg_in|lseg_interpt|lseg_intersect|lseg_le|lseg_length|lseg_lt|lseg_ne|lseg_out|lseg_parallel|lseg_perp|lseg_recv|lseg_send|lseg_vertical|ltrim|macaddr_and|macaddr_cmp|macaddr_eq|macaddr_ge|macaddr_gt|macaddr_in|macaddr_le|macaddr_lt|macaddr_ne|macaddr_not|macaddr_or|macaddr_out|macaddr_recv|macaddr_send|makeaclitem|masklen|max|md5|mic_to_ascii|mic_to_big5|mic_to_euc_cn|mic_to_euc_jp|mic_to_euc_kr|mic_to_euc_tw|mic_to_iso|mic_to_koi8r|mic_to_latin1|mic_to_latin2|mic_to_latin3|mic_to_latin4|mic_to_sjis|mic_to_win1250|mic_to_win1251|mic_to_win866|min|mktinterval|mod|money|mul_d_interval|name|nameeq|namege|namegt|nameiclike|nameicnlike|nameicregexeq|nameicregexne|namein|namele|namelike|namelt|namene|namenlike|nameout|namerecv|nameregexeq|nameregexne|namesend|neqjoinsel|neqsel|netmask|network|network_cmp|network_eq|network_ge|network_gt|network_le|network_lt|network_ne|network_sub|network_subeq|network_sup|network_supeq|nextval|nlikejoinsel|nlikesel|notlike|now|npoints|nth_value|ntile|numeric_abs|numeric_accum|numeric_add|numeric_avg|numeric_avg_accum|numeric_cmp|numeric_div|numeric_div_trunc|numeric_eq|numeric_exp|numeric_fac|numeric_ge|numeric_gt|numeric_in|numeric_inc|numeric_larger|numeric_le|numeric_ln|numeric_log|numeric_lt|numeric_mod|numeric_mul|numeric_ne|numeric_out|numeric_power|numeric_recv|numeric_send|numeric_smaller|numeric_sqrt|numeric_stddev_pop|numeric_stddev_samp|numeric_sub|numeric_transform|numeric_uminus|numeric_uplus|numeric_var_pop|numeric_var_samp|numerictypmodin|numerictypmodout|numnode|numrange|numrange_subdiff|obj_description|octet_length|oid|oideq|oidge|oidgt|oidin|oidlarger|oidle|oidlt|oidne|oidout|oidrecv|oidsend|oidsmaller|oidvectoreq|oidvectorge|oidvectorgt|oidvectorin|oidvectorle|oidvectorlt|oidvectorne|oidvectorout|oidvectorrecv|oidvectorsend|oidvectortypes|on_pb|on_pl|on_ppath|on_ps|on_sb|on_sl|opaque_in|opaque_out|overlaps|overlay|path|path_add|path_add_pt|path_center|path_contain_pt|path_distance|path_div_pt|path_in|path_inter|path_length|path_mul_pt|path_n_eq|path_n_ge|path_n_gt|path_n_le|path_n_lt|path_npoints|path_out|path_recv|path_send|path_sub_pt|pclose|percent_rank|pg_advisory_lock|pg_advisory_lock_shared|pg_advisory_unlock|pg_advisory_unlock_all|pg_advisory_unlock_shared|pg_advisory_xact_lock|pg_advisory_xact_lock_shared|pg_available_extension_versions|pg_available_extensions|pg_backend_pid|pg_backup_start_time|pg_cancel_backend|pg_char_to_encoding|pg_client_encoding|pg_collation_for|pg_collation_is_visible|pg_column_is_updatable|pg_column_size|pg_conf_load_time|pg_conversion_is_visible|pg_create_restore_point|pg_current_xlog_insert_location|pg_current_xlog_location|pg_cursor|pg_database_size|pg_describe_object|pg_encoding_max_length|pg_encoding_to_char|pg_event_trigger_dropped_objects|pg_export_snapshot|pg_extension_config_dump|pg_extension_update_paths|pg_function_is_visible|pg_get_constraintdef|pg_get_expr|pg_get_function_arguments|pg_get_function_identity_arguments|pg_get_function_result|pg_get_functiondef|pg_get_indexdef|pg_get_keywords|pg_get_multixact_members|pg_get_ruledef|pg_get_serial_sequence|pg_get_triggerdef|pg_get_userbyid|pg_get_viewdef|pg_has_role|pg_identify_object|pg_indexes_size|pg_is_in_backup|pg_is_in_recovery|pg_is_other_temp_schema|pg_is_xlog_replay_paused|pg_last_xact_replay_timestamp|pg_last_xlog_receive_location|pg_last_xlog_replay_location|pg_listening_channels|pg_lock_status|pg_ls_dir|pg_my_temp_schema|pg_node_tree_in|pg_node_tree_out|pg_node_tree_recv|pg_node_tree_send|pg_notify|pg_opclass_is_visible|pg_operator_is_visible|pg_opfamily_is_visible|pg_options_to_table|pg_postmaster_start_time|pg_prepared_statement|pg_prepared_xact|pg_read_binary_file|pg_read_file|pg_relation_filenode|pg_relation_filepath|pg_relation_is_updatable|pg_relation_size|pg_reload_conf|pg_rotate_logfile|pg_sequence_parameters|pg_show_all_settings|pg_size_pretty|pg_sleep|pg_start_backup|pg_stat_clear_snapshot|pg_stat_file|pg_stat_get_activity|pg_stat_get_analyze_count|pg_stat_get_autoanalyze_count|pg_stat_get_autovacuum_count|pg_stat_get_backend_activity|pg_stat_get_backend_activity_start|pg_stat_get_backend_client_addr|pg_stat_get_backend_client_port|pg_stat_get_backend_dbid|pg_stat_get_backend_idset|pg_stat_get_backend_pid|pg_stat_get_backend_start|pg_stat_get_backend_userid|pg_stat_get_backend_waiting|pg_stat_get_backend_xact_start|pg_stat_get_bgwriter_buf_written_checkpoints|pg_stat_get_bgwriter_buf_written_clean|pg_stat_get_bgwriter_maxwritten_clean|pg_stat_get_bgwriter_requested_checkpoints|pg_stat_get_bgwriter_stat_reset_time|pg_stat_get_bgwriter_timed_checkpoints|pg_stat_get_blocks_fetched|pg_stat_get_blocks_hit|pg_stat_get_buf_alloc|pg_stat_get_buf_fsync_backend|pg_stat_get_buf_written_backend|pg_stat_get_checkpoint_sync_time|pg_stat_get_checkpoint_write_time|pg_stat_get_db_blk_read_time|pg_stat_get_db_blk_write_time|pg_stat_get_db_blocks_fetched|pg_stat_get_db_blocks_hit|pg_stat_get_db_conflict_all|pg_stat_get_db_conflict_bufferpin|pg_stat_get_db_conflict_lock|pg_stat_get_db_conflict_snapshot|pg_stat_get_db_conflict_startup_deadlock|pg_stat_get_db_conflict_tablespace|pg_stat_get_db_deadlocks|pg_stat_get_db_numbackends|pg_stat_get_db_stat_reset_time|pg_stat_get_db_temp_bytes|pg_stat_get_db_temp_files|pg_stat_get_db_tuples_deleted|pg_stat_get_db_tuples_fetched|pg_stat_get_db_tuples_inserted|pg_stat_get_db_tuples_returned|pg_stat_get_db_tuples_updated|pg_stat_get_db_xact_commit|pg_stat_get_db_xact_rollback|pg_stat_get_dead_tuples|pg_stat_get_function_calls|pg_stat_get_function_self_time|pg_stat_get_function_total_time|pg_stat_get_last_analyze_time|pg_stat_get_last_autoanalyze_time|pg_stat_get_last_autovacuum_time|pg_stat_get_last_vacuum_time|pg_stat_get_live_tuples|pg_stat_get_numscans|pg_stat_get_tuples_deleted|pg_stat_get_tuples_fetched|pg_stat_get_tuples_hot_updated|pg_stat_get_tuples_inserted|pg_stat_get_tuples_returned|pg_stat_get_tuples_updated|pg_stat_get_vacuum_count|pg_stat_get_wal_senders|pg_stat_get_xact_blocks_fetched|pg_stat_get_xact_blocks_hit|pg_stat_get_xact_function_calls|pg_stat_get_xact_function_self_time|pg_stat_get_xact_function_total_time|pg_stat_get_xact_numscans|pg_stat_get_xact_tuples_deleted|pg_stat_get_xact_tuples_fetched|pg_stat_get_xact_tuples_hot_updated|pg_stat_get_xact_tuples_inserted|pg_stat_get_xact_tuples_returned|pg_stat_get_xact_tuples_updated|pg_stat_reset|pg_stat_reset_shared|pg_stat_reset_single_function_counters|pg_stat_reset_single_table_counters|pg_stop_backup|pg_switch_xlog|pg_table_is_visible|pg_table_size|pg_tablespace_databases|pg_tablespace_location|pg_tablespace_size|pg_terminate_backend|pg_timezone_abbrevs|pg_timezone_names|pg_total_relation_size|pg_trigger_depth|pg_try_advisory_lock|pg_try_advisory_lock_shared|pg_try_advisory_xact_lock|pg_try_advisory_xact_lock_shared|pg_ts_config_is_visible|pg_ts_dict_is_visible|pg_ts_parser_is_visible|pg_ts_template_is_visible|pg_type_is_visible|pg_typeof|pg_xlog_location_diff|pg_xlog_replay_pause|pg_xlog_replay_resume|pg_xlogfile_name|pg_xlogfile_name_offset|pi|plainto_tsquery|plpgsql_call_handler|plpgsql_inline_handler|plpgsql_validator|point|point_above|point_add|point_below|point_distance|point_div|point_eq|point_horiz|point_in|point_left|point_mul|point_ne|point_out|point_recv|point_right|point_send|point_sub|point_vert|poly_above|poly_below|poly_center|poly_contain|poly_contain_pt|poly_contained|poly_distance|poly_in|poly_left|poly_npoints|poly_out|poly_overabove|poly_overbelow|poly_overlap|poly_overleft|poly_overright|poly_recv|poly_right|poly_same|poly_send|polygon|popen|position|positionjoinsel|positionsel|postgresql_fdw_validator|pow|power|prsd_end|prsd_headline|prsd_lextype|prsd_nexttoken|prsd_start|pt_contained_circle|pt_contained_poly|query_to_xml|query_to_xml_and_xmlschema|query_to_xmlschema|querytree|quote_ident|quote_literal|quote_nullable|radians|radius|random|range_adjacent|range_after|range_before|range_cmp|range_contained_by|range_contains|range_contains_elem|range_eq|range_ge|range_gist_compress|range_gist_consistent|range_gist_decompress|range_gist_penalty|range_gist_picksplit|range_gist_same|range_gist_union|range_gt|range_in|range_intersect|range_le|range_lt|range_minus|range_ne|range_out|range_overlaps|range_overleft|range_overright|range_recv|range_send|range_typanalyze|range_union|rangesel|rank|record_eq|record_ge|record_gt|record_in|record_le|record_lt|record_ne|record_out|record_recv|record_send|regclass|regclassin|regclassout|regclassrecv|regclasssend|regconfigin|regconfigout|regconfigrecv|regconfigsend|regdictionaryin|regdictionaryout|regdictionaryrecv|regdictionarysend|regexeqjoinsel|regexeqsel|regexnejoinsel|regexnesel|regexp_matches|regexp_replace|regexp_split_to_array|regexp_split_to_table|regoperatorin|regoperatorout|regoperatorrecv|regoperatorsend|regoperin|regoperout|regoperrecv|regopersend|regprocedurein|regprocedureout|regprocedurerecv|regproceduresend|regprocin|regprocout|regprocrecv|regprocsend|regr_avgx|regr_avgy|regr_count|regr_intercept|regr_r2|regr_slope|regr_sxx|regr_sxy|regr_syy|regtypein|regtypeout|regtyperecv|regtypesend|reltime|reltimeeq|reltimege|reltimegt|reltimein|reltimele|reltimelt|reltimene|reltimeout|reltimerecv|reltimesend|repeat|replace|reverse|right|round|row_number|row_to_json|rpad|rtrim|scalargtjoinsel|scalargtsel|scalarltjoinsel|scalarltsel|schema_to_xml|schema_to_xml_and_xmlschema|schema_to_xmlschema|session_user|set_bit|set_byte|set_config|set_masklen|setseed|setval|setweight|shell_in|shell_out|shift_jis_2004_to_euc_jis_2004|shift_jis_2004_to_utf8|shobj_description|sign|similar_escape|sin|sjis_to_euc_jp|sjis_to_mic|sjis_to_utf8|slope|smgreq|smgrin|smgrne|smgrout|spg_kd_choose|spg_kd_config|spg_kd_inner_consistent|spg_kd_picksplit|spg_quad_choose|spg_quad_config|spg_quad_inner_consistent|spg_quad_leaf_consistent|spg_quad_picksplit|spg_range_quad_choose|spg_range_quad_config|spg_range_quad_inner_consistent|spg_range_quad_leaf_consistent|spg_range_quad_picksplit|spg_text_choose|spg_text_config|spg_text_inner_consistent|spg_text_leaf_consistent|spg_text_picksplit|spgbeginscan|spgbuild|spgbuildempty|spgbulkdelete|spgcanreturn|spgcostestimate|spgendscan|spggetbitmap|spggettuple|spginsert|spgmarkpos|spgoptions|spgrescan|spgrestrpos|spgvacuumcleanup|split_part|sqrt|statement_timestamp|stddev|stddev_pop|stddev_samp|string_agg|string_agg_finalfn|string_agg_transfn|string_to_array|strip|strpos|substr|substring|sum|suppress_redundant_updates_trigger|table_to_xml|table_to_xml_and_xmlschema|table_to_xmlschema|tan|text|text_ge|text_gt|text_larger|text_le|text_lt|text_pattern_ge|text_pattern_gt|text_pattern_le|text_pattern_lt|text_smaller|textanycat|textcat|texteq|texticlike|texticnlike|texticregexeq|texticregexne|textin|textlen|textlike|textne|textnlike|textout|textrecv|textregexeq|textregexne|textsend|thesaurus_init|thesaurus_lexize|tideq|tidge|tidgt|tidin|tidlarger|tidle|tidlt|tidne|tidout|tidrecv|tidsend|tidsmaller|time_cmp|time_eq|time_ge|time_gt|time_hash|time_in|time_larger|time_le|time_lt|time_mi_interval|time_mi_time|time_ne|time_out|time_pl_interval|time_recv|time_send|time_smaller|time_transform|timedate_pl|timemi|timenow|timeofday|timepl|timestamp_cmp|timestamp_cmp_date|timestamp_cmp_timestamptz|timestamp_eq|timestamp_eq_date|timestamp_eq_timestamptz|timestamp_ge|timestamp_ge_date|timestamp_ge_timestamptz|timestamp_gt|timestamp_gt_date|timestamp_gt_timestamptz|timestamp_hash|timestamp_in|timestamp_larger|timestamp_le|timestamp_le_date|timestamp_le_timestamptz|timestamp_lt|timestamp_lt_date|timestamp_lt_timestamptz|timestamp_mi|timestamp_mi_interval|timestamp_ne|timestamp_ne_date|timestamp_ne_timestamptz|timestamp_out|timestamp_pl_interval|timestamp_recv|timestamp_send|timestamp_smaller|timestamp_sortsupport|timestamp_transform|timestamptypmodin|timestamptypmodout|timestamptz_cmp|timestamptz_cmp_date|timestamptz_cmp_timestamp|timestamptz_eq|timestamptz_eq_date|timestamptz_eq_timestamp|timestamptz_ge|timestamptz_ge_date|timestamptz_ge_timestamp|timestamptz_gt|timestamptz_gt_date|timestamptz_gt_timestamp|timestamptz_in|timestamptz_larger|timestamptz_le|timestamptz_le_date|timestamptz_le_timestamp|timestamptz_lt|timestamptz_lt_date|timestamptz_lt_timestamp|timestamptz_mi|timestamptz_mi_interval|timestamptz_ne|timestamptz_ne_date|timestamptz_ne_timestamp|timestamptz_out|timestamptz_pl_interval|timestamptz_recv|timestamptz_send|timestamptz_smaller|timestamptztypmodin|timestamptztypmodout|timetypmodin|timetypmodout|timetz_cmp|timetz_eq|timetz_ge|timetz_gt|timetz_hash|timetz_in|timetz_larger|timetz_le|timetz_lt|timetz_mi_interval|timetz_ne|timetz_out|timetz_pl_interval|timetz_recv|timetz_send|timetz_smaller|timetzdate_pl|timetztypmodin|timetztypmodout|timezone|tinterval|tintervalct|tintervalend|tintervaleq|tintervalge|tintervalgt|tintervalin|tintervalle|tintervalleneq|tintervallenge|tintervallengt|tintervallenle|tintervallenlt|tintervallenne|tintervallt|tintervalne|tintervalout|tintervalov|tintervalrecv|tintervalrel|tintervalsame|tintervalsend|tintervalstart|to_ascii|to_char|to_date|to_hex|to_json|to_number|to_timestamp|to_tsquery|to_tsvector|transaction_timestamp|translate|trigger_in|trigger_out|trunc|ts_debug|ts_headline|ts_lexize|ts_match_qv|ts_match_tq|ts_match_tt|ts_match_vq|ts_parse|ts_rank|ts_rank_cd|ts_rewrite|ts_stat|ts_token_type|ts_typanalyze|tsmatchjoinsel|tsmatchsel|tsq_mcontained|tsq_mcontains|tsquery_and|tsquery_cmp|tsquery_eq|tsquery_ge|tsquery_gt|tsquery_le|tsquery_lt|tsquery_ne|tsquery_not|tsquery_or|tsqueryin|tsqueryout|tsqueryrecv|tsquerysend|tsrange|tsrange_subdiff|tstzrange|tstzrange_subdiff|tsvector_cmp|tsvector_concat|tsvector_eq|tsvector_ge|tsvector_gt|tsvector_le|tsvector_lt|tsvector_ne|tsvector_update_trigger|tsvector_update_trigger_column|tsvectorin|tsvectorout|tsvectorrecv|tsvectorsend|txid_current|txid_current_snapshot|txid_snapshot_in|txid_snapshot_out|txid_snapshot_recv|txid_snapshot_send|txid_snapshot_xip|txid_snapshot_xmax|txid_snapshot_xmin|txid_visible_in_snapshot|uhc_to_utf8|unique_key_recheck|unknownin|unknownout|unknownrecv|unknownsend|unnest|upper|upper_inc|upper_inf|utf8_to_ascii|utf8_to_big5|utf8_to_euc_cn|utf8_to_euc_jis_2004|utf8_to_euc_jp|utf8_to_euc_kr|utf8_to_euc_tw|utf8_to_gb18030|utf8_to_gbk|utf8_to_iso8859|utf8_to_iso8859_1|utf8_to_johab|utf8_to_koi8r|utf8_to_koi8u|utf8_to_shift_jis_2004|utf8_to_sjis|utf8_to_uhc|utf8_to_win|uuid_cmp|uuid_eq|uuid_ge|uuid_gt|uuid_hash|uuid_in|uuid_le|uuid_lt|uuid_ne|uuid_out|uuid_recv|uuid_send|var_pop|var_samp|varbit_in|varbit_out|varbit_recv|varbit_send|varbit_transform|varbitcmp|varbiteq|varbitge|varbitgt|varbitle|varbitlt|varbitne|varbittypmodin|varbittypmodout|varchar_transform|varcharin|varcharout|varcharrecv|varcharsend|varchartypmodin|varchartypmodout|variance|version|void_in|void_out|void_recv|void_send|width|width_bucket|win1250_to_latin2|win1250_to_mic|win1251_to_iso|win1251_to_koi8r|win1251_to_mic|win1251_to_win866|win866_to_iso|win866_to_koi8r|win866_to_mic|win866_to_win1251|win_to_utf8|xideq|xideqint4|xidin|xidout|xidrecv|xidsend|xml|xml_in|xml_is_well_formed|xml_is_well_formed_content|xml_is_well_formed_document|xml_out|xml_recv|xml_send|xmlagg|xmlcomment|xmlconcat2|xmlexists|xmlvalidate|xpath|xpath_exists",b=this.createKeywordMapper({"support.function":g,keyword:p},"identifier",!0),v=[{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"variable.language",regex:'".*?"'},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:b,regex:"[a-zA-Z_][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"!|!!|!~|!~\\*|!~~|!~~\\*|#|##|#<|#<=|#<>|#=|#>|#>=|%|\\&|\\&\\&|\\&<|\\&<\\||\\&>|\\*|\\+|\\-|/|<|<#>|<\\->|<<|<<=|<<\\||<=|<>|<\\?>|<@|<\\^|=|>|>=|>>|>>=|>\\^|\\?#|\\?\\-|\\?\\-\\||\\?\\||\\?\\|\\||@|@\\-@|@>|@@|@@@|\\^|\\||\\|\\&>|\\|/|\\|>>|\\|\\||\\|\\|/|~|~\\*|~<=~|~<~|~=|~>=~|~>~|~~|~~\\*"},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"text",regex:"\\s+"}];this.$rules={start:[{token:"comment",regex:"--.*$"},s.getStartRule("doc-start"),{token:"comment",regex:"\\/\\*",next:"comment"},{token:"keyword.statementBegin",regex:"[a-zA-Z]+",next:"statement"},{token:"support.buildin",regex:"^\\\\[\\S]+.*$"}],statement:[{token:"comment",regex:"--.*$"},{token:"comment",regex:"\\/\\*",next:"commentStatement"},{token:"statementEnd",regex:";",next:"start"},{token:"string",regex:"\\$perl\\$",next:"perl-start"},{token:"string",regex:"\\$python\\$",next:"python-start"},{token:"string",regex:"\\$json\\$",next:"json-start"},{token:"string",regex:"\\$(js|javascript)\\$",next:"javascript-start"},{token:"string",regex:"\\$[\\w_0-9]*\\$$",next:"dollarSql"},{token:"string",regex:"\\$[\\w_0-9]*\\$",next:"dollarStatementString"}].concat(v),dollarSql:[{token:"comment",regex:"--.*$"},{token:"comment",regex:"\\/\\*",next:"commentDollarSql"},{token:"string",regex:"^\\$[\\w_0-9]*\\$",next:"statement"},{token:"string",regex:"\\$[\\w_0-9]*\\$",next:"dollarSqlString"}].concat(v),comment:[{token:"comment",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}],commentStatement:[{token:"comment",regex:"\\*\\/",next:"statement"},{defaultToken:"comment"}],commentDollarSql:[{token:"comment",regex:"\\*\\/",next:"dollarSql"},{defaultToken:"comment"}],dollarStatementString:[{token:"string",regex:".*?\\$[\\w_0-9]*\\$",next:"statement"},{token:"string",regex:".+"}],dollarSqlString:[{token:"string",regex:".*?\\$[\\w_0-9]*\\$",next:"dollarSql"},{token:"string",regex:".+"}]},this.embedRules(s,"doc-",[s.getEndRule("start")]),this.embedRules(u,"perl-",[{token:"string",regex:"\\$perl\\$",next:"statement"}]),this.embedRules(d,"python-",[{token:"string",regex:"\\$python\\$",next:"statement"}]),this.embedRules(f,"json-",[{token:"string",regex:"\\$json\\$",next:"statement"}]),this.embedRules(m,"javascript-",[{token:"string",regex:"\\$(js|javascript)\\$",next:"statement"}])};a.inherits(h,l),n.PgsqlHighlightRules=h}),ace.define("ace/mode/pgsql",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/pgsql_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("../mode/text").Mode,l=t("./pgsql_highlight_rules").PgsqlHighlightRules,u=function(){this.HighlightRules=l,this.$behaviour=this.$defaultBehaviour};a.inherits(u,s),(function(){this.lineCommentStart="--",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(d,f,m){return d=="start"||d=="keyword.statementEnd"?"":this.$getIndent(f)},this.$id="ace/mode/pgsql"}).call(u.prototype),n.Mode=u}),function(){ace.require(["ace/mode/pgsql"],function(t){o&&(o.exports=t)})}()})(modePgsql);var modeSqlserver={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/sqlserver_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u=function(){var d="ALL|AND|ANY|BETWEEN|EXISTS|IN|LIKE|NOT|OR|SOME";d+="|NULL|IS|APPLY|INNER|OUTER|LEFT|RIGHT|JOIN|CROSS";var f="OPENDATASOURCE|OPENQUERY|OPENROWSET|OPENXML|AVG|CHECKSUM_AGG|COUNT|COUNT_BIG|GROUPING|GROUPING_ID|MAX|MIN|STDEV|STDEVP|SUM|VAR|VARP|DENSE_RANK|NTILE|RANK|ROW_NUMBER@@DATEFIRST|@@DBTS|@@LANGID|@@LANGUAGE|@@LOCK_TIMEOUT|@@MAX_CONNECTIONS|@@MAX_PRECISION|@@NESTLEVEL|@@OPTIONS|@@REMSERVER|@@SERVERNAME|@@SERVICENAME|@@SPID|@@TEXTSIZE|@@VERSION|CAST|CONVERT|PARSE|TRY_CAST|TRY_CONVERT|TRY_PARSE@@CURSOR_ROWS|@@FETCH_STATUS|CURSOR_STATUS|@@DATEFIRST|@@LANGUAGE|CURRENT_TIMESTAMP|DATEADD|DATEDIFF|DATEFROMPARTS|DATENAME|DATEPART|DATETIME2FROMPARTS|DATETIMEFROMPARTS|DATETIMEOFFSETFROMPARTS|DAY|EOMONTH|GETDATE|GETUTCDATE|ISDATE|MONTH|SET DATEFIRST|SET DATEFORMAT|SET LANGUAGE|SMALLDATETIMEFROMPARTS|SP_HELPLANGUAGE|SWITCHOFFSET|SYSDATETIME|SYSDATETIMEOFFSET|SYSUTCDATETIME|TIMEFROMPARTS|TODATETIMEOFFSET|YEAR|CHOOSE|IIF|ABS|ACOS|ASIN|ATAN|ATN2|CEILING|COS|COT|DEGREES|EXP|FLOOR|LOG|LOG10|PI|POWER|RADIANS|RAND|ROUND|SIGN|SIN|SQRT|SQUARE|TAN|@@PROCID|APPLOCK_MODE|APPLOCK_TEST|APP_NAME|ASSEMBLYPROPERTY|COLUMNPROPERTY|COL_LENGTH|COL_NAME|DATABASEPROPERTYEX|DATABASE_PRINCIPAL_ID|DB_ID|DB_NAME|FILEGROUPPROPERTY|FILEGROUP_ID|FILEGROUP_NAME|FILEPROPERTY|FILE_ID|FILE_IDEX|FILE_NAME|FULLTEXTCATALOGPROPERTY|FULLTEXTSERVICEPROPERTY|INDEXKEY_PROPERTY|INDEXPROPERTY|INDEX_COL|OBJECTPROPERTY|OBJECTPROPERTYEX|OBJECT_DEFINITION|OBJECT_ID|OBJECT_NAME|OBJECT_SCHEMA_NAME|ORIGINAL_DB_NAME|PARSENAME|SCHEMA_ID|SCHEMA_NAME|SCOPE_IDENTITY|SERVERPROPERTY|STATS_DATE|TYPEPROPERTY|TYPE_ID|TYPE_NAME|CERTENCODED|CERTPRIVATEKEY|CURRENT_USER|DATABASE_PRINCIPAL_ID|HAS_PERMS_BY_NAME|IS_MEMBER|IS_ROLEMEMBER|IS_SRVROLEMEMBER|ORIGINAL_LOGIN|PERMISSIONS|PWDCOMPARE|PWDENCRYPT|SCHEMA_ID|SCHEMA_NAME|SESSION_USER|SUSER_ID|SUSER_NAME|SUSER_SID|SUSER_SNAME|SYS.FN_BUILTIN_PERMISSIONS|SYS.FN_GET_AUDIT_FILE|SYS.FN_MY_PERMISSIONS|SYSTEM_USER|USER_ID|USER_NAME|ASCII|CHAR|CHARINDEX|CONCAT|DIFFERENCE|FORMAT|LEN|LOWER|LTRIM|NCHAR|PATINDEX|QUOTENAME|REPLACE|REPLICATE|REVERSE|RTRIM|SOUNDEX|SPACE|STR|STUFF|SUBSTRING|UNICODE|UPPER|$PARTITION|@@ERROR|@@IDENTITY|@@PACK_RECEIVED|@@ROWCOUNT|@@TRANCOUNT|BINARY_CHECKSUM|CHECKSUM|CONNECTIONPROPERTY|CONTEXT_INFO|CURRENT_REQUEST_ID|ERROR_LINE|ERROR_MESSAGE|ERROR_NUMBER|ERROR_PROCEDURE|ERROR_SEVERITY|ERROR_STATE|FORMATMESSAGE|GETANSINULL|GET_FILESTREAM_TRANSACTION_CONTEXT|HOST_ID|HOST_NAME|ISNULL|ISNUMERIC|MIN_ACTIVE_ROWVERSION|NEWID|NEWSEQUENTIALID|ROWCOUNT_BIG|XACT_STATE|@@CONNECTIONS|@@CPU_BUSY|@@IDLE|@@IO_BUSY|@@PACKET_ERRORS|@@PACK_RECEIVED|@@PACK_SENT|@@TIMETICKS|@@TOTAL_ERRORS|@@TOTAL_READ|@@TOTAL_WRITE|FN_VIRTUALFILESTATS|PATINDEX|TEXTPTR|TEXTVALID|COALESCE|NULLIF",m="BIGINT|BINARY|BIT|CHAR|CURSOR|DATE|DATETIME|DATETIME2|DATETIMEOFFSET|DECIMAL|FLOAT|HIERARCHYID|IMAGE|INTEGER|INT|MONEY|NCHAR|NTEXT|NUMERIC|NVARCHAR|REAL|SMALLDATETIME|SMALLINT|SMALLMONEY|SQL_VARIANT|TABLE|TEXT|TIME|TIMESTAMP|TINYINT|UNIQUEIDENTIFIER|VARBINARY|VARCHAR|XML",h="sp_addextendedproc|sp_addextendedproperty|sp_addmessage|sp_addtype|sp_addumpdevice|sp_add_data_file_recover_suspect_db|sp_add_log_file_recover_suspect_db|sp_altermessage|sp_attach_db|sp_attach_single_file_db|sp_autostats|sp_bindefault|sp_bindrule|sp_bindsession|sp_certify_removable|sp_clean_db_file_free_space|sp_clean_db_free_space|sp_configure|sp_control_plan_guide|sp_createstats|sp_create_plan_guide|sp_create_plan_guide_from_handle|sp_create_removable|sp_cycle_errorlog|sp_datatype_info|sp_dbcmptlevel|sp_dbmmonitoraddmonitoring|sp_dbmmonitorchangealert|sp_dbmmonitorchangemonitoring|sp_dbmmonitordropalert|sp_dbmmonitordropmonitoring|sp_dbmmonitorhelpalert|sp_dbmmonitorhelpmonitoring|sp_dbmmonitorresults|sp_db_increased_partitions|sp_delete_backuphistory|sp_depends|sp_describe_first_result_set|sp_describe_undeclared_parameters|sp_detach_db|sp_dropdevice|sp_dropextendedproc|sp_dropextendedproperty|sp_dropmessage|sp_droptype|sp_execute|sp_executesql|sp_getapplock|sp_getbindtoken|sp_help|sp_helpconstraint|sp_helpdb|sp_helpdevice|sp_helpextendedproc|sp_helpfile|sp_helpfilegroup|sp_helpindex|sp_helplanguage|sp_helpserver|sp_helpsort|sp_helpstats|sp_helptext|sp_helptrigger|sp_indexoption|sp_invalidate_textptr|sp_lock|sp_monitor|sp_prepare|sp_prepexec|sp_prepexecrpc|sp_procoption|sp_recompile|sp_refreshview|sp_releaseapplock|sp_rename|sp_renamedb|sp_resetstatus|sp_sequence_get_range|sp_serveroption|sp_setnetname|sp_settriggerorder|sp_spaceused|sp_tableoption|sp_unbindefault|sp_unbindrule|sp_unprepare|sp_updateextendedproperty|sp_updatestats|sp_validname|sp_who|sys.sp_merge_xtp_checkpoint_files|sys.sp_xtp_bind_db_resource_pool|sys.sp_xtp_checkpoint_force_garbage_collection|sys.sp_xtp_control_proc_exec_stats|sys.sp_xtp_control_query_exec_stats|sys.sp_xtp_unbind_db_resource_pool",p="ABSOLUTE|ACTION|ADA|ADD|ADMIN|AFTER|AGGREGATE|ALIAS|ALL|ALLOCATE|ALTER|AND|ANY|ARE|ARRAY|AS|ASC|ASENSITIVE|ASSERTION|ASYMMETRIC|AT|ATOMIC|AUTHORIZATION|BACKUP|BEFORE|BEGIN|BETWEEN|BIT_LENGTH|BLOB|BOOLEAN|BOTH|BREADTH|BREAK|BROWSE|BULK|BY|CALL|CALLED|CARDINALITY|CASCADE|CASCADED|CASE|CATALOG|CHARACTER|CHARACTER_LENGTH|CHAR_LENGTH|CHECK|CHECKPOINT|CLASS|CLOB|CLOSE|CLUSTERED|COALESCE|COLLATE|COLLATION|COLLECT|COLUMN|COMMIT|COMPLETION|COMPUTE|CONDITION|CONNECT|CONNECTION|CONSTRAINT|CONSTRAINTS|CONSTRUCTOR|CONTAINS|CONTAINSTABLE|CONTINUE|CORR|CORRESPONDING|COVAR_POP|COVAR_SAMP|CREATE|CROSS|CUBE|CUME_DIST|CURRENT|CURRENT_CATALOG|CURRENT_DATE|CURRENT_DEFAULT_TRANSFORM_GROUP|CURRENT_PATH|CURRENT_ROLE|CURRENT_SCHEMA|CURRENT_TIME|CURRENT_TRANSFORM_GROUP_FOR_TYPE|CYCLE|DATA|DATABASE|DBCC|DEALLOCATE|DEC|DECLARE|DEFAULT|DEFERRABLE|DEFERRED|DELETE|DENY|DEPTH|DEREF|DESC|DESCRIBE|DESCRIPTOR|DESTROY|DESTRUCTOR|DETERMINISTIC|DIAGNOSTICS|DICTIONARY|DISCONNECT|DISK|DISTINCT|DISTRIBUTED|DOMAIN|DOUBLE|DROP|DUMP|DYNAMIC|EACH|ELEMENT|ELSE|END|END-EXEC|EQUALS|ERRLVL|ESCAPE|EVERY|EXCEPT|EXCEPTION|EXEC|EXECUTE|EXISTS|EXIT|EXTERNAL|EXTRACT|FETCH|FILE|FILLFACTOR|FILTER|FIRST|FOR|FOREIGN|FORTRAN|FOUND|FREE|FREETEXT|FREETEXTTABLE|FROM|FULL|FULLTEXTTABLE|FUNCTION|FUSION|GENERAL|GET|GLOBAL|GO|GOTO|GRANT|GROUP|HAVING|HOLD|HOLDLOCK|HOST|HOUR|IDENTITY|IDENTITYCOL|IDENTITY_INSERT|IF|IGNORE|IMMEDIATE|IN|INCLUDE|INDEX|INDICATOR|INITIALIZE|INITIALLY|INNER|INOUT|INPUT|INSENSITIVE|INSERT|INTEGER|INTERSECT|INTERSECTION|INTERVAL|INTO|IS|ISOLATION|ITERATE|JOIN|KEY|KILL|LANGUAGE|LARGE|LAST|LATERAL|LEADING|LESS|LEVEL|LIKE|LIKE_REGEX|LIMIT|LINENO|LN|LOAD|LOCAL|LOCALTIME|LOCALTIMESTAMP|LOCATOR|MAP|MATCH|MEMBER|MERGE|METHOD|MINUTE|MOD|MODIFIES|MODIFY|MODULE|MULTISET|NAMES|NATIONAL|NATURAL|NCLOB|NEW|NEXT|NO|NOCHECK|NONCLUSTERED|NONE|NORMALIZE|NOT|NULL|NULLIF|OBJECT|OCCURRENCES_REGEX|OCTET_LENGTH|OF|OFF|OFFSETS|OLD|ON|ONLY|OPEN|OPERATION|OPTION|OR|ORDER|ORDINALITY|OUT|OUTER|OUTPUT|OVER|OVERLAPS|OVERLAY|PAD|PARAMETER|PARAMETERS|PARTIAL|PARTITION|PASCAL|PATH|PERCENT|PERCENTILE_CONT|PERCENTILE_DISC|PERCENT_RANK|PIVOT|PLAN|POSITION|POSITION_REGEX|POSTFIX|PRECISION|PREFIX|PREORDER|PREPARE|PRESERVE|PRIMARY|PRINT|PRIOR|PRIVILEGES|PROC|PROCEDURE|PUBLIC|RAISERROR|RANGE|READ|READS|READTEXT|RECONFIGURE|RECURSIVE|REF|REFERENCES|REFERENCING|REGR_AVGX|REGR_AVGY|REGR_COUNT|REGR_INTERCEPT|REGR_R2|REGR_SLOPE|REGR_SXX|REGR_SXY|REGR_SYY|RELATIVE|RELEASE|REPLICATION|RESTORE|RESTRICT|RESULT|RETURN|RETURNS|REVERT|REVOKE|ROLE|ROLLBACK|ROLLUP|ROUTINE|ROW|ROWCOUNT|ROWGUIDCOL|ROWS|RULE|SAVE|SAVEPOINT|SCHEMA|SCOPE|SCROLL|SEARCH|SECOND|SECTION|SECURITYAUDIT|SELECT|SEMANTICKEYPHRASETABLE|SEMANTICSIMILARITYDETAILSTABLE|SEMANTICSIMILARITYTABLE|SENSITIVE|SEQUENCE|SESSION|SET|SETS|SETUSER|SHUTDOWN|SIMILAR|SIZE|SOME|SPECIFIC|SPECIFICTYPE|SQL|SQLCA|SQLCODE|SQLERROR|SQLEXCEPTION|SQLSTATE|SQLWARNING|START|STATE|STATEMENT|STATIC|STATISTICS|STDDEV_POP|STDDEV_SAMP|STRUCTURE|SUBMULTISET|SUBSTRING_REGEX|SYMMETRIC|SYSTEM|TABLESAMPLE|TEMPORARY|TERMINATE|TEXTSIZE|THAN|THEN|TIMEZONE_HOUR|TIMEZONE_MINUTE|TO|TOP|TRAILING|TRAN|TRANSACTION|TRANSLATE|TRANSLATE_REGEX|TRANSLATION|TREAT|TRIGGER|TRIM|TRUNCATE|TSEQUAL|UESCAPE|UNDER|UNION|UNIQUE|UNKNOWN|UNNEST|UNPIVOT|UPDATE|UPDATETEXT|USAGE|USE|USER|USING|VALUE|VALUES|VARIABLE|VARYING|VAR_POP|VAR_SAMP|VIEW|WAITFOR|WHEN|WHENEVER|WHERE|WHILE|WIDTH_BUCKET|WINDOW|WITH|WITHIN|WITHIN GROUP|WITHOUT|WORK|WRITE|WRITETEXT|XMLAGG|XMLATTRIBUTES|XMLBINARY|XMLCAST|XMLCOMMENT|XMLCONCAT|XMLDOCUMENT|XMLELEMENT|XMLEXISTS|XMLFOREST|XMLITERATE|XMLNAMESPACES|XMLPARSE|XMLPI|XMLQUERY|XMLSERIALIZE|XMLTABLE|XMLTEXT|XMLVALIDATE|ZONE";p+="|KEEPIDENTITY|KEEPDEFAULTS|IGNORE_CONSTRAINTS|IGNORE_TRIGGERS|XLOCK|FORCESCAN|FORCESEEK|HOLDLOCK|NOLOCK|NOWAIT|PAGLOCK|READCOMMITTED|READCOMMITTEDLOCK|READPAST|READUNCOMMITTED|REPEATABLEREAD|ROWLOCK|SERIALIZABLE|SNAPSHOT|SPATIAL_WINDOW_MAX_CELLS|TABLOCK|TABLOCKX|UPDLOCK|XLOCK|IGNORE_NONCLUSTERED_COLUMNSTORE_INDEX|EXPAND|VIEWS|FAST|FORCE|KEEP|KEEPFIXED|MAXDOP|MAXRECURSION|OPTIMIZE|PARAMETERIZATION|SIMPLE|FORCED|RECOMPILE|ROBUST|PLAN|SPATIAL_WINDOW_MAX_CELLS|NOEXPAND|HINT",p+="|LOOP|HASH|MERGE|REMOTE",p+="|TRY|CATCH|THROW",p+="|TYPE",p=p.split("|"),p=p.filter(function(A,k,T){return d.split("|").indexOf(A)===-1&&f.split("|").indexOf(A)===-1&&m.split("|").indexOf(A)===-1}),p=p.sort().join("|");for(var g=this.createKeywordMapper({"constant.language":d,"storage.type":m,"support.function":f,"support.storedprocedure":h,keyword:p},"identifier",!0),b="SET ANSI_DEFAULTS|SET ANSI_NULLS|SET ANSI_NULL_DFLT_OFF|SET ANSI_NULL_DFLT_ON|SET ANSI_PADDING|SET ANSI_WARNINGS|SET ARITHABORT|SET ARITHIGNORE|SET CONCAT_NULL_YIELDS_NULL|SET CURSOR_CLOSE_ON_COMMIT|SET DATEFIRST|SET DATEFORMAT|SET DEADLOCK_PRIORITY|SET FIPS_FLAGGER|SET FMTONLY|SET FORCEPLAN|SET IDENTITY_INSERT|SET IMPLICIT_TRANSACTIONS|SET LANGUAGE|SET LOCK_TIMEOUT|SET NOCOUNT|SET NOEXEC|SET NUMERIC_ROUNDABORT|SET OFFSETS|SET PARSEONLY|SET QUERY_GOVERNOR_COST_LIMIT|SET QUOTED_IDENTIFIER|SET REMOTE_PROC_TRANSACTIONS|SET ROWCOUNT|SET SHOWPLAN_ALL|SET SHOWPLAN_TEXT|SET SHOWPLAN_XML|SET STATISTICS IO|SET STATISTICS PROFILE|SET STATISTICS TIME|SET STATISTICS XML|SET TEXTSIZE|SET XACT_ABORT".split("|"),v="READ UNCOMMITTED|READ COMMITTED|REPEATABLE READ|SNAPSHOP|SERIALIZABLE".split("|"),y=0;y<v.length;y++)b.push("SET TRANSACTION ISOLATION LEVEL "+v[y]);this.$rules={start:[{token:"string.start",regex:"'",next:[{token:"constant.language.escape",regex:/''/},{token:"string.end",next:"start",regex:"'"},{defaultToken:"string"}]},s.getStartRule("doc-start"),{token:"comment",regex:"--.*$"},{token:"comment",start:"/\\*",end:"\\*/"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:g,regex:"@{0,2}[a-zA-Z_$][a-zA-Z0-9_$]*\\b(?!])"},{token:"constant.class",regex:"@@?[a-zA-Z_$][a-zA-Z0-9_$]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\/|\\/\\/|%|<@>|@>|<@|&|\\^|~|<|>|<=|=>|==|!=|<>|=|\\*"},{token:"paren.lparen",regex:"[\\(]"},{token:"paren.rparen",regex:"[\\)]"},{token:"punctuation",regex:",|;"},{token:"text",regex:"\\s+"}],comment:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:"no_regex"},{defaultToken:"comment",caseInsensitive:!0}]};for(var y=0;y<b.length;y++)this.$rules.start.unshift({token:"set.statement",regex:b[y]});this.embedRules(s,"doc-",[s.getEndRule("start")]),this.normalizeRules();var C=[],E=function(A,k){A.forEach(function(T){C.push({name:T,value:T,score:0,meta:k})})};E(h.split("|"),"procedure"),E(d.split("|"),"operator"),E(f.split("|"),"function"),E(m.split("|"),"type"),E(b,"statement"),E(p.split("|"),"keyword"),this.completions=C};a.inherits(u,l),n.SqlHighlightRules=u}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/folding/sqlserver",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./cstyle").FoldMode,u=n.FoldMode=function(){};a.inherits(u,l),(function(){this.foldingStartMarker=/(\bCASE\b|\bBEGIN\b)|^\s*(\/\*)/i,this.startRegionRe=/^\s*(\/\*|--)#?region\b/,this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var g=p.match(this.foldingStartMarker);if(g){var b=g.index;if(g[1])return this.getBeginEndBlock(d,m,b,g[1]);var v=d.getCommentFoldRange(m,b+g[0].length,1);return v&&!v.isMultiLine()&&(h?v=this.getSectionRange(d,m):f!="all"&&(v=null)),v}},this.getBeginEndBlock=function(d,f,m,h){for(var p={row:f,column:m+h.length},g=d.getLength(),b,v=1,y=/(\bCASE\b|\bBEGIN\b)|(\bEND\b)/i;++f<g;){b=d.getLine(f);var C=y.exec(b);if(C&&(C[1]?v++:v--,!v))break}var E=f;if(E>p.row)return new s(p.row,p.column,E,b.length)}}).call(u.prototype)}),ace.define("ace/mode/sqlserver",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sqlserver_highlight_rules","ace/mode/folding/sqlserver"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./sqlserver_highlight_rules").SqlHighlightRules,u=t("./folding/sqlserver").FoldMode,d=function(){this.HighlightRules=l,this.foldingRules=new u,this.$behaviour=this.$defaultBehaviour};a.inherits(d,s),(function(){this.lineCommentStart="--",this.blockComment={start:"/*",end:"*/"},this.getCompletions=function(f,m,h,p){return m.$mode.$highlightRules.completions},this.$id="ace/mode/sqlserver",this.snippetFileId="ace/snippets/sqlserver"}).call(d.prototype),n.Mode=d}),function(){ace.require(["ace/mode/sqlserver"],function(t){o&&(o.exports=t)})}()})(modeSqlserver);var modeJson={exports:{}};(function(o,e){ace.define("ace/mode/json_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"variable",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]\\s*(?=:)'},{token:"string",regex:'"',next:"string"},{token:"constant.numeric",regex:"0[xX][0-9a-fA-F]+\\b"},{token:"constant.numeric",regex:"[+-]?\\d+(?:(?:\\.\\d*)?(?:[eE][+-]?\\d+)?)?\\b"},{token:"constant.language.boolean",regex:"(?:true|false)\\b"},{token:"text",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"comment",regex:"\\/\\/.*$"},{token:"comment.start",regex:"\\/\\*",next:"comment"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"punctuation.operator",regex:/[,]/},{token:"text",regex:"\\s+"}],string:[{token:"constant.language.escape",regex:/\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|["\\\/bfnrt])/},{token:"string",regex:'"|$',next:"start"},{defaultToken:"string"}],comment:[{token:"comment.end",regex:"\\*\\/",next:"start"},{defaultToken:"comment"}]}};a.inherits(l,s),n.JsonHighlightRules=l}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var d=l.getLine(u),f=d.match(/^(\s*\})/);if(!f)return 0;var m=f[1].length,h=l.findMatchingBracket({row:u,column:m});if(!h||h.row==u)return 0;var p=this.$getIndent(l.getLine(h.row));l.replace(new a(u,0,u,m-1),p)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(s.prototype),n.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/json",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/json_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./json_highlight_rules").JsonHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("./behaviour/cstyle").CstyleBehaviour,f=t("./folding/cstyle").FoldMode,m=t("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new d,this.foldingRules=new f};a.inherits(h,s),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(p,g,b){var v=this.$getIndent(g);if(p=="start"){var y=g.match(/^.*[\{\(\[]\s*$/);y&&(v+=b)}return v},this.checkOutdent=function(p,g,b){return this.$outdent.checkOutdent(g,b)},this.autoOutdent=function(p,g,b){this.$outdent.autoOutdent(g,b)},this.createWorker=function(p){var g=new m(["ace"],"ace/mode/json_worker","JsonWorker");return g.attachToDocument(p.getDocument()),g.on("annotate",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/json"}).call(h.prototype),n.Mode=h}),function(){ace.require(["ace/mode/json"],function(t){o&&(o.exports=t)})}()})(modeJson);var modeJavascript={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u="[a-zA-Z\\$_-][a-zA-Z\\d\\$_-]*",d=function(h){var p=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),g="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",b="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),m("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+u+")(\\.)(prototype)(\\.)("+u+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+u+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+g+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:p,regex:u},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:u},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),m("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:u},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!h||!h.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(v,y,C){if(this.next=v=="{"?this.nextState:"",v=="{"&&C.length)C.unshift("start",y);else if(v=="}"&&C.length&&(C.shift(),this.next=C.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return v=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:b},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!h||h.jsx!=!1)&&f.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};a.inherits(d,l);function f(){var h=u.replace("\\d","\\d\\-"),p={onMatch:function(b,v,y){var C=b.charAt(1)=="/"?2:1;return C==1?(v!=this.nextState?y.unshift(this.next,this.nextState,0):y.unshift(this.next),y[2]++):C==2&&v==this.nextState&&(y[1]--,(!y[1]||y[1]<0)&&(y.shift(),y.shift())),[{type:"meta.tag.punctuation."+(C==1?"":"end-")+"tag-open.xml",value:b.slice(0,C)},{type:"meta.tag.tag-name.xml",value:b.substr(C)}]},regex:"</?"+h,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(p);var g={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[g,p,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(b,v,y){return v==y[0]&&y.shift(),b.length==2&&(y[0]==this.nextState&&y[1]--,(!y[1]||y[1]<0)&&y.splice(0,2)),this.next=y[0]||"start",[{type:this.token,value:b}]},nextState:"jsx"},g,m("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:h},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},p],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function m(h){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}n.JavaScriptHighlightRules=d}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var d=l.getLine(u),f=d.match(/^(\s*\})/);if(!f)return 0;var m=f[1].length,h=l.findMatchingBracket({row:u,column:m});if(!h||h.row==u)return 0;var p=this.$getIndent(l.getLine(h.row));l.replace(new a(u,0,u,m-1),p)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(s.prototype),n.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./javascript_highlight_rules").JavaScriptHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("../worker/worker_client").WorkerClient,f=t("./behaviour/cstyle").CstyleBehaviour,m=t("./folding/cstyle").FoldMode,h=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new f,this.foldingRules=new m};a.inherits(h,s),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(p,g,b){var v=this.$getIndent(g),y=this.getTokenizer().getLineTokens(g,p),C=y.tokens,E=y.state;if(C.length&&C[C.length-1].type=="comment")return v;if(p=="start"||p=="no_regex"){var A=g.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);A&&(v+=b)}else if(p=="doc-start"){if(E=="start"||E=="no_regex")return"";var A=g.match(/^\s*(\/?)\*/);A&&(A[1]&&(v+=" "),v+="* ")}return v},this.checkOutdent=function(p,g,b){return this.$outdent.checkOutdent(g,b)},this.autoOutdent=function(p,g,b){this.$outdent.autoOutdent(g,b)},this.createWorker=function(p){var g=new d(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return g.attachToDocument(p.getDocument()),g.on("annotate",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}).call(h.prototype),n.Mode=h}),function(){ace.require(["ace/mode/javascript"],function(t){o&&(o.exports=t)})}()})(modeJavascript);var modeYaml={exports:{}};(function(o,e){ace.define("ace/mode/yaml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment",regex:"#.*$"},{token:"list.markup",regex:/^(?:-{3}|\.{3})\s*(?=#|$)/},{token:"list.markup",regex:/^\s*[\-?](?:$|\s)/},{token:"constant",regex:"!![\\w//]+"},{token:"constant.language",regex:"[&\\*][a-zA-Z0-9-_]+"},{token:["meta.tag","keyword"],regex:/^(\s*\w[^\s:]*?)(:(?=\s|$))/},{token:["meta.tag","keyword"],regex:/(\w[^\s:]*?)(\s*:(?=\s|$))/},{token:"keyword.operator",regex:"<<\\w*:\\w*"},{token:"keyword.operator",regex:"-\\s*(?=[{])"},{token:"string",regex:'["](?:(?:\\\\.)|(?:[^"\\\\]))*?["]'},{token:"string",regex:/[|>][-+\d]*(?:$|\s+(?:$|#))/,onMatch:function(u,d,f,m){m=m.replace(/ #.*/,"");var h=/^ *((:\s*)?-(\s*[^|>])?)?/.exec(m)[0].replace(/\S\s*$/,"").length,p=parseInt(/\d+[\s+-]*$/.exec(m));return p?(h+=p-1,this.next="mlString"):this.next="mlStringPre",f.length?(f[0]=this.next,f[1]=h):(f.push(this.next),f.push(h)),this.token},next:"mlString"},{token:"string",regex:"['](?:(?:\\\\.)|(?:[^'\\\\]))*?[']"},{token:"constant.numeric",regex:/(\b|[+\-\.])[\d_]+(?:(?:\.[\d_]*)?(?:[eE][+\-]?[\d_]+)?)(?=[^\d-\w]|$)$/},{token:"constant.numeric",regex:/[+\-]?\.inf\b|NaN\b|0x[\dA-Fa-f_]+|0b[10_]+/},{token:"constant.language.boolean",regex:"\\b(?:true|false|TRUE|FALSE|True|False|yes|no)\\b"},{token:"paren.lparen",regex:"[[({]"},{token:"paren.rparen",regex:"[\\])}]"},{token:"text",regex:/[^\s,:\[\]\{\}]+/}],mlStringPre:[{token:"indent",regex:/^ *$/},{token:"indent",regex:/^ */,onMatch:function(u,d,f){var m=f[1];return m>=u.length?(this.next="start",f.shift(),f.shift()):(f[1]=u.length-1,this.next=f[0]="mlString"),this.token},next:"mlString"},{defaultToken:"string"}],mlString:[{token:"indent",regex:/^ *$/},{token:"indent",regex:/^ */,onMatch:function(u,d,f){var m=f[1];return m>=u.length?(this.next="start",f.splice(0)):this.next="mlString",this.token},next:"mlString"},{token:"string",regex:".+"}]},this.normalizeRules()};a.inherits(l,s),n.YamlHighlightRules=l}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var d=l.getLine(u),f=d.match(/^(\s*\})/);if(!f)return 0;var m=f[1].length,h=l.findMatchingBracket({row:u,column:m});if(!h||h.row==u)return 0;var p=this.$getIndent(l.getLine(h.row));l.replace(new a(u,0,u,m-1),p)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(s.prototype),n.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/coffee",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(t,n,r){var a=t("../../lib/oop"),s=t("./fold_mode").FoldMode,l=t("../../range").Range,u=n.FoldMode=function(){};a.inherits(u,s),(function(){this.getFoldWidgetRange=function(d,f,m){var h=this.indentationBlock(d,m);if(h)return h;var p=/\S/,g=d.getLine(m),b=g.search(p);if(!(b==-1||g[b]!="#")){for(var v=g.length,y=d.getLength(),C=m,E=m;++m<y;){g=d.getLine(m);var A=g.search(p);if(A!=-1){if(g[A]!="#")break;E=m}}if(E>C){var k=d.getLine(E).length;return new l(C,v,E,k)}}},this.getFoldWidget=function(d,f,m){var h=d.getLine(m),p=h.search(/\S/),g=d.getLine(m+1),b=d.getLine(m-1),v=b.search(/\S/),y=g.search(/\S/);if(p==-1)return d.foldWidgets[m-1]=v!=-1&&v<y?"start":"","";if(v==-1){if(p==y&&h[p]=="#"&&g[p]=="#")return d.foldWidgets[m-1]="",d.foldWidgets[m+1]="","start"}else if(v==p&&h[p]=="#"&&b[p]=="#"&&d.getLine(m-2).search(/\S/)==-1)return d.foldWidgets[m-1]="start",d.foldWidgets[m+1]="","";return v!=-1&&v<p?d.foldWidgets[m-1]="start":d.foldWidgets[m-1]="",p<y?"start":""}}).call(u.prototype)}),ace.define("ace/mode/yaml",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/yaml_highlight_rules","ace/mode/matching_brace_outdent","ace/mode/folding/coffee","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./yaml_highlight_rules").YamlHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("./folding/coffee").FoldMode,f=t("../worker/worker_client").WorkerClient,m=function(){this.HighlightRules=l,this.$outdent=new u,this.foldingRules=new d,this.$behaviour=this.$defaultBehaviour};a.inherits(m,s),(function(){this.lineCommentStart=["#"],this.getNextLineIndent=function(h,p,g){var b=this.$getIndent(p);if(h=="start"){var v=p.match(/^.*[\{\(\[]\s*$/);v&&(b+=g)}return b},this.checkOutdent=function(h,p,g){return this.$outdent.checkOutdent(p,g)},this.autoOutdent=function(h,p,g){this.$outdent.autoOutdent(p,g)},this.createWorker=function(h){var p=new f(["ace"],"ace/mode/yaml_worker","YamlWorker");return p.attachToDocument(h.getDocument()),p.on("annotate",function(g){h.setAnnotations(g.data)}),p.on("terminate",function(){h.clearAnnotations()}),p},this.$id="ace/mode/yaml"}).call(m.prototype),n.Mode=m}),function(){ace.require(["ace/mode/yaml"],function(t){o&&(o.exports=t)})}()})(modeYaml);var modeXml={exports:{}};(function(o,e){ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(u){var d="[_:a-zA-Z-][-_:.a-zA-Z0-9-]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+d+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:d},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+d+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+d+":)?"+d+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:d},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===l&&this.normalizeRules()};(function(){this.embedTagRules=function(u,d,f){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(<)("+f+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:d+"start"}]}),this.$rules[f+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(m,h,p){return p.splice(0),this.token}}],this.embedRules(u,d,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(</)("+f+"(?=\\s|>|$))",next:f+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(s.prototype),a.inherits(l,s),n.XmlHighlightRules=l}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,r){var a=t("../../lib/oop"),s=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator;t("../../lib/lang");function u(f,m){return f&&f.type.lastIndexOf(m+".xml")>-1}var d=function(){this.add("string_dquotes","insertion",function(f,m,h,p,g){if(g=='"'||g=="'"){var b=g,v=p.doc.getTextRange(h.getSelectionRange());if(v!==""&&v!=="'"&&v!='"'&&h.getWrapBehavioursEnabled())return{text:b+v+b,selection:!1};var y=h.getCursorPosition(),C=p.doc.getLine(y.row),E=C.substring(y.column,y.column+1),A=new l(p,y.row,y.column),k=A.getCurrentToken();if(E==b&&(u(k,"attribute-value")||u(k,"string")))return{text:"",selection:[1,1]};if(k||(k=A.stepBackward()),!k)return;for(;u(k,"tag-whitespace")||u(k,"whitespace");)k=A.stepBackward();var T=!E||E.match(/\s/);if(u(k,"attribute-equals")&&(T||E==">")||u(k,"decl-attribute-equals")&&(T||E=="?"))return{text:b+b,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(f,m,h,p,g){var b=p.doc.getTextRange(g);if(!g.isMultiLine()&&(b=='"'||b=="'")){var v=p.doc.getLine(g.start.row),y=v.substring(g.start.column+1,g.start.column+2);if(y==b)return g.end.column++,g}}),this.add("autoclosing","insertion",function(f,m,h,p,g){if(g==">"){var b=h.getSelectionRange().start,v=new l(p,b.row,b.column),y=v.getCurrentToken()||v.stepBackward();if(!y||!(u(y,"tag-name")||u(y,"tag-whitespace")||u(y,"attribute-name")||u(y,"attribute-equals")||u(y,"attribute-value"))||u(y,"reference.attribute-value"))return;if(u(y,"attribute-value")){var C=v.getCurrentTokenColumn()+y.value.length;if(b.column<C)return;if(b.column==C){var E=v.stepForward();if(E&&u(E,"attribute-value"))return;v.stepBackward()}}if(/^\s*>/.test(p.getLine(b.row).slice(b.column)))return;for(;!u(y,"tag-name");)if(y=v.stepBackward(),y.value=="<"){y=v.stepForward();break}var A=v.getCurrentTokenRow(),k=v.getCurrentTokenColumn();if(u(v.stepBackward(),"end-tag-open"))return;var T=y.value;return A==b.row&&(T=T.substring(0,b.column-k)),this.voidElements.hasOwnProperty(T.toLowerCase())?void 0:{text:"></"+T+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(f,m,h,p,g){if(g==`
`){var b=h.getCursorPosition(),v=p.getLine(b.row),y=new l(p,b.row,b.column),C=y.getCurrentToken();if(C&&C.type.indexOf("tag-close")!==-1){if(C.value=="/>")return;for(;C&&C.type.indexOf("tag-name")===-1;)C=y.stepBackward();if(!C)return;var E=C.value,A=y.getCurrentTokenRow();if(C=y.stepBackward(),!C||C.type.indexOf("end-tag")!==-1)return;if(this.voidElements&&!this.voidElements[E]){var k=p.getTokenAt(b.row,b.column+1),v=p.getLine(A),T=this.$getIndent(v),$=T+p.getTabString();return k&&k.value==="</"?{text:`
`+$+`
`+T,selection:[1,$.length,1,$.length]}:{text:`
`+$}}}}})};a.inherits(d,s),n.XmlBehaviour=d}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(t,n,r){var a=t("../../lib/oop");t("../../lib/lang");var s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=t("../../token_iterator").TokenIterator,d=n.FoldMode=function(h,p){l.call(this),this.voidElements=h||{},this.optionalEndTags=a.mixin({},this.voidElements),p&&a.mixin(this.optionalEndTags,p)};a.inherits(d,l);var f=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};function m(h,p){return h.type.lastIndexOf(p+".xml")>-1}(function(){this.getFoldWidget=function(h,p,g){var b=this._getFirstTagInLine(h,g);return b?b.closing||!b.tagName&&b.selfClosing?p=="markbeginend"?"end":"":!b.tagName||b.selfClosing||this.voidElements.hasOwnProperty(b.tagName.toLowerCase())||this._findEndTagInLine(h,g,b.tagName,b.end.column)?"":"start":this.getCommentFoldWidget(h,g)},this.getCommentFoldWidget=function(h,p){return/comment/.test(h.getState(p))&&/<!-/.test(h.getLine(p))?"start":""},this._getFirstTagInLine=function(h,p){for(var g=h.getTokens(p),b=new f,v=0;v<g.length;v++){var y=g[v];if(m(y,"tag-open")){if(b.end.column=b.start.column+y.value.length,b.closing=m(y,"end-tag-open"),y=g[++v],!y)return null;for(b.tagName=y.value,b.end.column+=y.value.length,v++;v<g.length;v++)if(y=g[v],b.end.column+=y.value.length,m(y,"tag-close")){b.selfClosing=y.value=="/>";break}return b}else if(m(y,"tag-close"))return b.selfClosing=y.value=="/>",b;b.start.column+=y.value.length}return null},this._findEndTagInLine=function(h,p,g,b){for(var v=h.getTokens(p),y=0,C=0;C<v.length;C++){var E=v[C];if(y+=E.value.length,!(y<b)&&m(E,"end-tag-open")&&(E=v[C+1],E&&E.value==g))return!0}return!1},this._readTagForward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do if(m(p,"tag-open"))g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn();else if(m(p,"tag-name"))g.tagName=p.value;else if(m(p,"tag-close"))return g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length,h.stepForward(),g;while(p=h.stepForward());return null},this._readTagBackward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do{if(m(p,"tag-open"))return g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn(),h.stepBackward(),g;m(p,"tag-name")?g.tagName=p.value:m(p,"tag-close")&&(g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length)}while(p=h.stepBackward());return null},this._pop=function(h,p){for(;h.length;){var g=h[h.length-1];if(!p||g.tagName==p.tagName)return h.pop();if(this.optionalEndTags.hasOwnProperty(g.tagName)){h.pop();continue}else return null}},this.getFoldWidgetRange=function(h,p,g){var b=this._getFirstTagInLine(h,g);if(!b)return this.getCommentFoldWidget(h,g)&&h.getCommentFoldRange(g,h.getLine(g).length);var v=b.closing||b.selfClosing,y=[],C;if(v)for(var E=new u(h,g,b.end.column),k={row:g,column:b.start.column};C=this._readTagBackward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing)y.push(C);else if(this._pop(y,C),y.length==0)return C.start.column+=C.tagName.length+2,C.start.row==C.end.row&&C.start.column<C.end.column&&(C.start.column=C.end.column),s.fromPoints(C.start,k)}else{var E=new u(h,g,b.start.column),A={row:g,column:b.start.column+b.tagName.length+2};for(b.start.row==b.end.row&&(A.column=b.end.column);C=this._readTagForward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing){if(this._pop(y,C),y.length==0)return s.fromPoints(A,C.start)}else y.push(C)}}}}).call(d.prototype)}),ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./text").Mode,u=t("./xml_highlight_rules").XmlHighlightRules,d=t("./behaviour/xml").XmlBehaviour,f=t("./folding/xml").FoldMode,m=t("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=u,this.$behaviour=new d,this.foldingRules=new f};a.inherits(h,l),(function(){this.voidElements=s.arrayToMap([]),this.blockComment={start:"<!--",end:"-->"},this.createWorker=function(p){var g=new m(["ace"],"ace/mode/xml_worker","Worker");return g.attachToDocument(p.getDocument()),g.on("error",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/xml"}).call(h.prototype),n.Mode=h}),function(){ace.require(["ace/mode/xml"],function(t){o&&(o.exports=t)})}()})(modeXml);var modeHtml={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u="[a-zA-Z\\$_-][a-zA-Z\\d\\$_-]*",d=function(h){var p=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),g="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",b="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),m("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+u+")(\\.)(prototype)(\\.)("+u+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+u+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+g+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:p,regex:u},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:u},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),m("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:u},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!h||!h.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(v,y,C){if(this.next=v=="{"?this.nextState:"",v=="{"&&C.length)C.unshift("start",y);else if(v=="}"&&C.length&&(C.shift(),this.next=C.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return v=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:b},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!h||h.jsx!=!1)&&f.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};a.inherits(d,l);function f(){var h=u.replace("\\d","\\d\\-"),p={onMatch:function(b,v,y){var C=b.charAt(1)=="/"?2:1;return C==1?(v!=this.nextState?y.unshift(this.next,this.nextState,0):y.unshift(this.next),y[2]++):C==2&&v==this.nextState&&(y[1]--,(!y[1]||y[1]<0)&&(y.shift(),y.shift())),[{type:"meta.tag.punctuation."+(C==1?"":"end-")+"tag-open.xml",value:b.slice(0,C)},{type:"meta.tag.tag-name.xml",value:b.substr(C)}]},regex:"</?"+h,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(p);var g={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[g,p,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(b,v,y){return v==y[0]&&y.shift(),b.length==2&&(y[0]==this.nextState&&y[1]--,(!y[1]||y[1]<0)&&y.splice(0,2)),this.next=y[0]||"start",[{type:this.token,value:b}]},nextState:"jsx"},g,m("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:h},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},p],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function m(h){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}n.JavaScriptHighlightRules=d}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var d=l.getLine(u),f=d.match(/^(\s*\})/);if(!f)return 0;var m=f[1].length,h=l.findMatchingBracket({row:u,column:m});if(!h||h.row==u)return 0;var p=this.$getIndent(l.getLine(h.row));l.replace(new a(u,0,u,m-1),p)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(s.prototype),n.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./javascript_highlight_rules").JavaScriptHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("../worker/worker_client").WorkerClient,f=t("./behaviour/cstyle").CstyleBehaviour,m=t("./folding/cstyle").FoldMode,h=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new f,this.foldingRules=new m};a.inherits(h,s),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(p,g,b){var v=this.$getIndent(g),y=this.getTokenizer().getLineTokens(g,p),C=y.tokens,E=y.state;if(C.length&&C[C.length-1].type=="comment")return v;if(p=="start"||p=="no_regex"){var A=g.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);A&&(v+=b)}else if(p=="doc-start"){if(E=="start"||E=="no_regex")return"";var A=g.match(/^\s*(\/?)\*/);A&&(A[1]&&(v+=" "),v+="* ")}return v},this.checkOutdent=function(p,g,b){return this.$outdent.checkOutdent(g,b)},this.autoOutdent=function(p,g,b){this.$outdent.autoOutdent(g,b)},this.createWorker=function(p){var g=new d(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return g.attachToDocument(p.getDocument()),g.on("annotate",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}).call(h.prototype),n.Mode=h}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop");t("../lib/lang");var s=t("./text_highlight_rules").TextHighlightRules,l=n.supportType="align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|max-zoom|min-height|min-width|min-zoom|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|user-select|user-zoom|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index",u=n.supportFunction="rgb|rgba|url|attr|counter|counters",d=n.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero|zoom",f=n.supportConstantColor="aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen",m=n.supportConstantFonts="arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",h=n.numRe="\\-?(?:(?:[0-9]+(?:\\.[0-9]+)?)|(?:\\.[0-9]+))",p=n.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",g=n.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",b=function(){var v=this.createKeywordMapper({"support.function":u,"support.constant":d,"support.type":l,"support.constant.color":f,"support.constant.fonts":m},"text",!0);this.$rules={start:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"paren.rparen",regex:"\\}"},{token:"string",regex:"@(?!viewport)",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"keyword",regex:"%"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant.numeric",regex:h},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],media:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"start"},{token:"paren.rparen",regex:"\\}",next:"start"},{token:"string",regex:";",next:"start"},{token:"keyword",regex:"(?:media|supports|document|charset|import|namespace|media|supports|document|page|font|keyframes|viewport|counter-style|font-feature-values|swash|ornaments|annotation|stylistic|styleset|character-variant)"}],comments:[{token:"comment",regex:"\\/\\*",push:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}]}],ruleset:[{regex:"-(webkit|ms|moz|o)-",token:"text"},{token:"punctuation.operator",regex:"[:;]"},{token:"paren.rparen",regex:"\\}",next:"start"},{include:["strings","url","comments"]},{token:["constant.numeric","keyword"],regex:"("+h+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)"},{token:"constant.numeric",regex:h},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:p},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:g},{include:"url"},{token:v,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}],url:[{token:"support.function",regex:"(?:url(:?-prefix)?|domain|regexp)\\(",push:[{token:"support.function",regex:"\\)",next:"pop"},{defaultToken:"string"}]}],strings:[{token:"string.start",regex:"'",push:[{token:"string.end",regex:"'|$",next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]},{token:"string.start",regex:'"',push:[{token:"string.end",regex:'"|$',next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]}],escapes:[{token:"constant.language.escape",regex:/\\([a-fA-F\d]{1,6}|[^a-fA-F\d])/}]},this.normalizeRules()};a.inherits(b,s),n.CssHighlightRules=b}),ace.define("ace/mode/css_completions",["require","exports","module"],function(t,n,r){var a={background:{"#$0":1},"background-color":{"#$0":1,transparent:1,fixed:1},"background-image":{"url('/$0')":1},"background-repeat":{repeat:1,"repeat-x":1,"repeat-y":1,"no-repeat":1,inherit:1},"background-position":{bottom:2,center:2,left:2,right:2,top:2,inherit:2},"background-attachment":{scroll:1,fixed:1},"background-size":{cover:1,contain:1},"background-clip":{"border-box":1,"padding-box":1,"content-box":1},"background-origin":{"border-box":1,"padding-box":1,"content-box":1},border:{"solid $0":1,"dashed $0":1,"dotted $0":1,"#$0":1},"border-color":{"#$0":1},"border-style":{solid:2,dashed:2,dotted:2,double:2,groove:2,hidden:2,inherit:2,inset:2,none:2,outset:2,ridged:2},"border-collapse":{collapse:1,separate:1},bottom:{px:1,em:1,"%":1},clear:{left:1,right:1,both:1,none:1},color:{"#$0":1,"rgb(#$00,0,0)":1},cursor:{default:1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"e-resize":1,"se-resize":1,"s-resize":1,"sw-resize":1,"w-resize":1,"nw-resize":1},display:{none:1,block:1,inline:1,"inline-block":1,"table-cell":1},"empty-cells":{show:1,hide:1},float:{left:1,right:1,none:1},"font-family":{Arial:2,"Comic Sans MS":2,Consolas:2,"Courier New":2,Courier:2,Georgia:2,Monospace:2,"Sans-Serif":2,"Segoe UI":2,Tahoma:2,"Times New Roman":2,"Trebuchet MS":2,Verdana:1},"font-size":{px:1,em:1,"%":1},"font-weight":{bold:1,normal:1},"font-style":{italic:1,normal:1},"font-variant":{normal:1,"small-caps":1},height:{px:1,em:1,"%":1},left:{px:1,em:1,"%":1},"letter-spacing":{normal:1},"line-height":{normal:1},"list-style-type":{none:1,disc:1,circle:1,square:1,decimal:1,"decimal-leading-zero":1,"lower-roman":1,"upper-roman":1,"lower-greek":1,"lower-latin":1,"upper-latin":1,georgian:1,"lower-alpha":1,"upper-alpha":1},margin:{px:1,em:1,"%":1},"margin-right":{px:1,em:1,"%":1},"margin-left":{px:1,em:1,"%":1},"margin-top":{px:1,em:1,"%":1},"margin-bottom":{px:1,em:1,"%":1},"max-height":{px:1,em:1,"%":1},"max-width":{px:1,em:1,"%":1},"min-height":{px:1,em:1,"%":1},"min-width":{px:1,em:1,"%":1},overflow:{hidden:1,visible:1,auto:1,scroll:1},"overflow-x":{hidden:1,visible:1,auto:1,scroll:1},"overflow-y":{hidden:1,visible:1,auto:1,scroll:1},padding:{px:1,em:1,"%":1},"padding-top":{px:1,em:1,"%":1},"padding-right":{px:1,em:1,"%":1},"padding-bottom":{px:1,em:1,"%":1},"padding-left":{px:1,em:1,"%":1},"page-break-after":{auto:1,always:1,avoid:1,left:1,right:1},"page-break-before":{auto:1,always:1,avoid:1,left:1,right:1},position:{absolute:1,relative:1,fixed:1,static:1},right:{px:1,em:1,"%":1},"table-layout":{fixed:1,auto:1},"text-decoration":{none:1,underline:1,"line-through":1,blink:1},"text-align":{left:1,right:1,center:1,justify:1},"text-transform":{capitalize:1,uppercase:1,lowercase:1,none:1},top:{px:1,em:1,"%":1},"vertical-align":{top:1,bottom:1},visibility:{hidden:1,visible:1},"white-space":{nowrap:1,normal:1,pre:1,"pre-line":1,"pre-wrap":1},width:{px:1,em:1,"%":1},"word-spacing":{normal:1},filter:{"alpha(opacity=$0100)":1},"text-shadow":{"$02px 2px 2px #777":1},"text-overflow":{"ellipsis-word":1,clip:1,ellipsis:1},"-moz-border-radius":1,"-moz-border-radius-topright":1,"-moz-border-radius-bottomright":1,"-moz-border-radius-topleft":1,"-moz-border-radius-bottomleft":1,"-webkit-border-radius":1,"-webkit-border-top-right-radius":1,"-webkit-border-top-left-radius":1,"-webkit-border-bottom-right-radius":1,"-webkit-border-bottom-left-radius":1,"-moz-box-shadow":1,"-webkit-box-shadow":1,transform:{"rotate($00deg)":1,"skew($00deg)":1},"-moz-transform":{"rotate($00deg)":1,"skew($00deg)":1},"-webkit-transform":{"rotate($00deg)":1,"skew($00deg)":1}},s=function(){};(function(){this.completionsDefined=!1,this.defineCompletions=function(){if(document){var l=document.createElement("c").style;for(var u in l)if(typeof l[u]=="string"){var d=u.replace(/[A-Z]/g,function(f){return"-"+f.toLowerCase()});a.hasOwnProperty(d)||(a[d]=1)}}this.completionsDefined=!0},this.getCompletions=function(l,u,d,f){if(this.completionsDefined||this.defineCompletions(),l==="ruleset"||u.$mode.$id=="ace/mode/scss"){var m=u.getLine(d.row).substr(0,d.column);return/:[^;]+$/.test(m)?this.getPropertyValueCompletions(l,u,d,f):this.getPropertyCompletions(l,u,d,f)}return[]},this.getPropertyCompletions=function(l,u,d,f){var m=Object.keys(a);return m.map(function(h){return{caption:h,snippet:h+": $0;",meta:"property",score:1e6}})},this.getPropertyValueCompletions=function(l,u,d,f){var m=u.getLine(d.row).substr(0,d.column),h=(/([\w\-]+):[^:]*$/.exec(m)||{})[1];if(!h)return[];var p=[];return h in a&&typeof a[h]=="object"&&(p=Object.keys(a[h])),p.map(function(g){return{caption:g,snippet:g,meta:"property value",score:1e6}})}}).call(s.prototype),n.CssCompletions=s}),ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(t,n,r){var a=t("../../lib/oop");t("../behaviour").Behaviour;var s=t("./cstyle").CstyleBehaviour,l=t("../../token_iterator").TokenIterator,u=function(){this.inherit(s),this.add("colon","insertion",function(d,f,m,h,p){if(p===":"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=new l(h,g.row,g.column),v=b.getCurrentToken();if(v&&v.value.match(/\s+/)&&(v=b.stepBackward()),v&&v.type==="support.type"){var y=h.doc.getLine(g.row),C=y.substring(g.column,g.column+1);if(C===":")return{text:"",selection:[1,1]};if(/^(\s+[^;]|\s*$)/.test(y.substring(g.column)))return{text:":;",selection:[1,1]}}}}),this.add("colon","deletion",function(d,f,m,h,p){var g=h.doc.getTextRange(p);if(!p.isMultiLine()&&g===":"){var b=m.getCursorPosition(),v=new l(h,b.row,b.column),y=v.getCurrentToken();if(y&&y.value.match(/\s+/)&&(y=v.stepBackward()),y&&y.type==="support.type"){var C=h.doc.getLine(p.start.row),E=C.substring(p.end.column,p.end.column+1);if(E===";")return p.end.column++,p}}}),this.add("semicolon","insertion",function(d,f,m,h,p){if(p===";"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=h.doc.getLine(g.row),v=b.substring(g.column,g.column+1);if(v===";")return{text:"",selection:[1,1]}}}),this.add("!important","insertion",function(d,f,m,h,p){if(p==="!"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=h.doc.getLine(g.row);if(/^\s*(;|}|$)/.test(b.substring(g.column)))return{text:"!important",selection:[10,10]}}})};a.inherits(u,s),n.CssBehaviour=u}),ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/css_completions","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./css_highlight_rules").CssHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("../worker/worker_client").WorkerClient,f=t("./css_completions").CssCompletions,m=t("./behaviour/css").CssBehaviour,h=t("./folding/cstyle").FoldMode,p=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new m,this.$completer=new f,this.foldingRules=new h};a.inherits(p,s),(function(){this.foldingRules="cStyle",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(g,b,v){var y=this.$getIndent(b),C=this.getTokenizer().getLineTokens(b,g).tokens;if(C.length&&C[C.length-1].type=="comment")return y;var E=b.match(/^.*\{\s*$/);return E&&(y+=v),y},this.checkOutdent=function(g,b,v){return this.$outdent.checkOutdent(b,v)},this.autoOutdent=function(g,b,v){this.$outdent.autoOutdent(b,v)},this.getCompletions=function(g,b,v,y){return this.$completer.getCompletions(g,b,v,y)},this.createWorker=function(g){var b=new d(["ace"],"ace/mode/css_worker","Worker");return b.attachToDocument(g.getDocument()),b.on("annotate",function(v){g.setAnnotations(v.data)}),b.on("terminate",function(){g.clearAnnotations()}),b},this.$id="ace/mode/css",this.snippetFileId="ace/snippets/css"}).call(p.prototype),n.Mode=p}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(u){var d="[_:a-zA-Z-][-_:.a-zA-Z0-9-]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+d+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:d},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+d+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+d+":)?"+d+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:d},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===l&&this.normalizeRules()};(function(){this.embedTagRules=function(u,d,f){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(<)("+f+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:d+"start"}]}),this.$rules[f+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(m,h,p){return p.splice(0),this.token}}],this.embedRules(u,d,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(</)("+f+"(?=\\s|>|$))",next:f+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(s.prototype),a.inherits(l,s),n.XmlHighlightRules=l}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./css_highlight_rules").CssHighlightRules,u=t("./javascript_highlight_rules").JavaScriptHighlightRules,d=t("./xml_highlight_rules").XmlHighlightRules,f=s.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"}),m=function(){d.call(this),this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:.]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(h,p){var g=f[p];return["meta.tag.punctuation."+(h=="<"?"":"end-")+"tag-open.xml","meta.tag"+(g?"."+g:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:.]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}),this.embedTagRules(l,"css-","style"),this.embedTagRules(new u({jsx:!1}).getRules(),"js-","script"),this.constructor===m&&this.normalizeRules()};a.inherits(m,d),n.HtmlHighlightRules=m}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,r){var a=t("../../lib/oop"),s=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator;t("../../lib/lang");function u(f,m){return f&&f.type.lastIndexOf(m+".xml")>-1}var d=function(){this.add("string_dquotes","insertion",function(f,m,h,p,g){if(g=='"'||g=="'"){var b=g,v=p.doc.getTextRange(h.getSelectionRange());if(v!==""&&v!=="'"&&v!='"'&&h.getWrapBehavioursEnabled())return{text:b+v+b,selection:!1};var y=h.getCursorPosition(),C=p.doc.getLine(y.row),E=C.substring(y.column,y.column+1),A=new l(p,y.row,y.column),k=A.getCurrentToken();if(E==b&&(u(k,"attribute-value")||u(k,"string")))return{text:"",selection:[1,1]};if(k||(k=A.stepBackward()),!k)return;for(;u(k,"tag-whitespace")||u(k,"whitespace");)k=A.stepBackward();var T=!E||E.match(/\s/);if(u(k,"attribute-equals")&&(T||E==">")||u(k,"decl-attribute-equals")&&(T||E=="?"))return{text:b+b,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(f,m,h,p,g){var b=p.doc.getTextRange(g);if(!g.isMultiLine()&&(b=='"'||b=="'")){var v=p.doc.getLine(g.start.row),y=v.substring(g.start.column+1,g.start.column+2);if(y==b)return g.end.column++,g}}),this.add("autoclosing","insertion",function(f,m,h,p,g){if(g==">"){var b=h.getSelectionRange().start,v=new l(p,b.row,b.column),y=v.getCurrentToken()||v.stepBackward();if(!y||!(u(y,"tag-name")||u(y,"tag-whitespace")||u(y,"attribute-name")||u(y,"attribute-equals")||u(y,"attribute-value"))||u(y,"reference.attribute-value"))return;if(u(y,"attribute-value")){var C=v.getCurrentTokenColumn()+y.value.length;if(b.column<C)return;if(b.column==C){var E=v.stepForward();if(E&&u(E,"attribute-value"))return;v.stepBackward()}}if(/^\s*>/.test(p.getLine(b.row).slice(b.column)))return;for(;!u(y,"tag-name");)if(y=v.stepBackward(),y.value=="<"){y=v.stepForward();break}var A=v.getCurrentTokenRow(),k=v.getCurrentTokenColumn();if(u(v.stepBackward(),"end-tag-open"))return;var T=y.value;return A==b.row&&(T=T.substring(0,b.column-k)),this.voidElements.hasOwnProperty(T.toLowerCase())?void 0:{text:"></"+T+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(f,m,h,p,g){if(g==`
`){var b=h.getCursorPosition(),v=p.getLine(b.row),y=new l(p,b.row,b.column),C=y.getCurrentToken();if(C&&C.type.indexOf("tag-close")!==-1){if(C.value=="/>")return;for(;C&&C.type.indexOf("tag-name")===-1;)C=y.stepBackward();if(!C)return;var E=C.value,A=y.getCurrentTokenRow();if(C=y.stepBackward(),!C||C.type.indexOf("end-tag")!==-1)return;if(this.voidElements&&!this.voidElements[E]){var k=p.getTokenAt(b.row,b.column+1),v=p.getLine(A),T=this.$getIndent(v),$=T+p.getTabString();return k&&k.value==="</"?{text:`
`+$+`
`+T,selection:[1,$.length,1,$.length]}:{text:`
`+$}}}}})};a.inherits(d,s),n.XmlBehaviour=d}),ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("./fold_mode").FoldMode,l=n.FoldMode=function(u,d){this.defaultMode=u,this.subModes=d};a.inherits(l,s),(function(){this.$getMode=function(u){typeof u!="string"&&(u=u[0]);for(var d in this.subModes)if(u.indexOf(d)===0)return this.subModes[d];return null},this.$tryMode=function(u,d,f,m){var h=this.$getMode(u);return h?h.getFoldWidget(d,f,m):""},this.getFoldWidget=function(u,d,f){return this.$tryMode(u.getState(f-1),u,d,f)||this.$tryMode(u.getState(f),u,d,f)||this.defaultMode.getFoldWidget(u,d,f)},this.getFoldWidgetRange=function(u,d,f){var m=this.$getMode(u.getState(f-1));return(!m||!m.getFoldWidget(u,d,f))&&(m=this.$getMode(u.getState(f))),(!m||!m.getFoldWidget(u,d,f))&&(m=this.defaultMode),m.getFoldWidgetRange(u,d,f)}}).call(l.prototype)}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(t,n,r){var a=t("../../lib/oop");t("../../lib/lang");var s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=t("../../token_iterator").TokenIterator,d=n.FoldMode=function(h,p){l.call(this),this.voidElements=h||{},this.optionalEndTags=a.mixin({},this.voidElements),p&&a.mixin(this.optionalEndTags,p)};a.inherits(d,l);var f=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};function m(h,p){return h.type.lastIndexOf(p+".xml")>-1}(function(){this.getFoldWidget=function(h,p,g){var b=this._getFirstTagInLine(h,g);return b?b.closing||!b.tagName&&b.selfClosing?p=="markbeginend"?"end":"":!b.tagName||b.selfClosing||this.voidElements.hasOwnProperty(b.tagName.toLowerCase())||this._findEndTagInLine(h,g,b.tagName,b.end.column)?"":"start":this.getCommentFoldWidget(h,g)},this.getCommentFoldWidget=function(h,p){return/comment/.test(h.getState(p))&&/<!-/.test(h.getLine(p))?"start":""},this._getFirstTagInLine=function(h,p){for(var g=h.getTokens(p),b=new f,v=0;v<g.length;v++){var y=g[v];if(m(y,"tag-open")){if(b.end.column=b.start.column+y.value.length,b.closing=m(y,"end-tag-open"),y=g[++v],!y)return null;for(b.tagName=y.value,b.end.column+=y.value.length,v++;v<g.length;v++)if(y=g[v],b.end.column+=y.value.length,m(y,"tag-close")){b.selfClosing=y.value=="/>";break}return b}else if(m(y,"tag-close"))return b.selfClosing=y.value=="/>",b;b.start.column+=y.value.length}return null},this._findEndTagInLine=function(h,p,g,b){for(var v=h.getTokens(p),y=0,C=0;C<v.length;C++){var E=v[C];if(y+=E.value.length,!(y<b)&&m(E,"end-tag-open")&&(E=v[C+1],E&&E.value==g))return!0}return!1},this._readTagForward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do if(m(p,"tag-open"))g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn();else if(m(p,"tag-name"))g.tagName=p.value;else if(m(p,"tag-close"))return g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length,h.stepForward(),g;while(p=h.stepForward());return null},this._readTagBackward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do{if(m(p,"tag-open"))return g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn(),h.stepBackward(),g;m(p,"tag-name")?g.tagName=p.value:m(p,"tag-close")&&(g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length)}while(p=h.stepBackward());return null},this._pop=function(h,p){for(;h.length;){var g=h[h.length-1];if(!p||g.tagName==p.tagName)return h.pop();if(this.optionalEndTags.hasOwnProperty(g.tagName)){h.pop();continue}else return null}},this.getFoldWidgetRange=function(h,p,g){var b=this._getFirstTagInLine(h,g);if(!b)return this.getCommentFoldWidget(h,g)&&h.getCommentFoldRange(g,h.getLine(g).length);var v=b.closing||b.selfClosing,y=[],C;if(v)for(var E=new u(h,g,b.end.column),k={row:g,column:b.start.column};C=this._readTagBackward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing)y.push(C);else if(this._pop(y,C),y.length==0)return C.start.column+=C.tagName.length+2,C.start.row==C.end.row&&C.start.column<C.end.column&&(C.start.column=C.end.column),s.fromPoints(C.start,k)}else{var E=new u(h,g,b.start.column),A={row:g,column:b.start.column+b.tagName.length+2};for(b.start.row==b.end.row&&(A.column=b.end.column);C=this._readTagForward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing){if(this._pop(y,C),y.length==0)return s.fromPoints(A,C.start)}else y.push(C)}}}}).call(d.prototype)}),ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../../lib/oop"),s=t("./mixed").FoldMode,l=t("./xml").FoldMode,u=t("./cstyle").FoldMode,d=n.FoldMode=function(f,m){s.call(this,new l(f,m),{"js-":new u,"css-":new u})};a.inherits(d,s)}),ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(t,n,r){var a=t("../token_iterator").TokenIterator,s=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"],l=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"],u=s.concat(l),d={a:{href:1,target:{_blank:1,top:1},ping:1,rel:{nofollow:1,alternate:1,author:1,bookmark:1,help:1,license:1,next:1,noreferrer:1,prefetch:1,prev:1,search:1,tag:1},media:1,hreflang:1,type:1},abbr:{},address:{},area:{shape:1,coords:1,href:1,hreflang:1,alt:1,target:1,media:1,rel:1,ping:1,type:1},article:{pubdate:1},aside:{},audio:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},muted:{muted:1},preload:{auto:1,metadata:1,none:1}},b:{},base:{href:1,target:1},bdi:{},bdo:{},blockquote:{cite:1},body:{onafterprint:1,onbeforeprint:1,onbeforeunload:1,onhashchange:1,onmessage:1,onoffline:1,onpopstate:1,onredo:1,onresize:1,onstorage:1,onundo:1,onunload:1},br:{},button:{autofocus:1,disabled:{disabled:1},form:1,formaction:1,formenctype:1,formmethod:1,formnovalidate:1,formtarget:1,name:1,value:1,type:{button:1,submit:1}},canvas:{width:1,height:1},caption:{},cite:{},code:{},col:{span:1},colgroup:{span:1},command:{type:1,label:1,icon:1,disabled:1,checked:1,radiogroup:1,command:1},data:{},datalist:{},dd:{},del:{cite:1,datetime:1},details:{open:1},dfn:{},dialog:{open:1},div:{},dl:{},dt:{},em:{},embed:{src:1,height:1,width:1,type:1},fieldset:{disabled:1,form:1,name:1},figcaption:{},figure:{},footer:{},form:{"accept-charset":1,action:1,autocomplete:1,enctype:{"multipart/form-data":1,"application/x-www-form-urlencoded":1},method:{get:1,post:1},name:1,novalidate:1,target:{_blank:1,top:1}},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},head:{},header:{},hr:{},html:{manifest:1},i:{},iframe:{name:1,src:1,height:1,width:1,sandbox:{"allow-same-origin":1,"allow-top-navigation":1,"allow-forms":1,"allow-scripts":1},seamless:{seamless:1}},img:{alt:1,src:1,height:1,width:1,usemap:1,ismap:1},input:{type:{text:1,password:1,hidden:1,checkbox:1,submit:1,radio:1,file:1,button:1,reset:1,image:31,color:1,date:1,datetime:1,"datetime-local":1,email:1,month:1,number:1,range:1,search:1,tel:1,time:1,url:1,week:1},accept:1,alt:1,autocomplete:{on:1,off:1},autofocus:{autofocus:1},checked:{checked:1},disabled:{disabled:1},form:1,formaction:1,formenctype:{"application/x-www-form-urlencoded":1,"multipart/form-data":1,"text/plain":1},formmethod:{get:1,post:1},formnovalidate:{formnovalidate:1},formtarget:{_blank:1,_self:1,_parent:1,_top:1},height:1,list:1,max:1,maxlength:1,min:1,multiple:{multiple:1},name:1,pattern:1,placeholder:1,readonly:{readonly:1},required:{required:1},size:1,src:1,step:1,width:1,files:1,value:1},ins:{cite:1,datetime:1},kbd:{},keygen:{autofocus:1,challenge:{challenge:1},disabled:{disabled:1},form:1,keytype:{rsa:1,dsa:1,ec:1},name:1},label:{form:1,for:1},legend:{},li:{value:1},link:{href:1,hreflang:1,rel:{stylesheet:1,icon:1},media:{all:1,screen:1,print:1},type:{"text/css":1,"image/png":1,"image/jpeg":1,"image/gif":1},sizes:1},main:{},map:{name:1},mark:{},math:{},menu:{type:1,label:1},meta:{"http-equiv":{"content-type":1},name:{description:1,keywords:1},content:{"text/html; charset=UTF-8":1},charset:1},meter:{value:1,min:1,max:1,low:1,high:1,optimum:1},nav:{},noscript:{href:1},object:{param:1,data:1,type:1,height:1,width:1,usemap:1,name:1,form:1,classid:1},ol:{start:1,reversed:1},optgroup:{disabled:1,label:1},option:{disabled:1,selected:1,label:1,value:1},output:{for:1,form:1,name:1},p:{},param:{name:1,value:1},pre:{},progress:{value:1,max:1},q:{cite:1},rp:{},rt:{},ruby:{},s:{},samp:{},script:{charset:1,type:{"text/javascript":1},src:1,defer:1,async:1},select:{autofocus:1,disabled:1,form:1,multiple:{multiple:1},name:1,size:1,readonly:{readonly:1}},small:{},source:{src:1,type:1,media:1},span:{},strong:{},style:{type:1,media:{all:1,screen:1,print:1},scoped:1},sub:{},sup:{},svg:{},table:{summary:1},tbody:{},td:{headers:1,rowspan:1,colspan:1},textarea:{autofocus:{autofocus:1},disabled:{disabled:1},form:1,maxlength:1,name:1,placeholder:1,readonly:{readonly:1},required:{required:1},rows:1,cols:1,wrap:{on:1,off:1,hard:1,soft:1}},tfoot:{},th:{headers:1,rowspan:1,colspan:1,scope:1},thead:{},time:{datetime:1},title:{},tr:{},track:{kind:1,src:1,srclang:1,label:1,default:1},section:{},summary:{},u:{},ul:{},var:{},video:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},width:1,height:1,poster:1,muted:{muted:1},preload:{auto:1,metadata:1,none:1}},wbr:{}},f=Object.keys(d);function m(b,v){return b.type.lastIndexOf(v+".xml")>-1}function h(b,v){for(var y=new a(b,v.row,v.column),C=y.getCurrentToken();C&&!m(C,"tag-name");)C=y.stepBackward();if(C)return C.value}function p(b,v){for(var y=new a(b,v.row,v.column),C=y.getCurrentToken();C&&!m(C,"attribute-name");)C=y.stepBackward();if(C)return C.value}var g=function(){};(function(){this.getCompletions=function(b,v,y,C){var E=v.getTokenAt(y.row,y.column);if(!E)return[];if(m(E,"tag-name")||m(E,"tag-open")||m(E,"end-tag-open"))return this.getTagCompletions(b,v,y,C);if(m(E,"tag-whitespace")||m(E,"attribute-name"))return this.getAttributeCompletions(b,v,y,C);if(m(E,"attribute-value"))return this.getAttributeValueCompletions(b,v,y,C);var A=v.getLine(y.row).substr(0,y.column);return/&[a-z]*$/i.test(A)?this.getHTMLEntityCompletions(b,v,y,C):[]},this.getTagCompletions=function(b,v,y,C){return f.map(function(E){return{value:E,meta:"tag",score:1e6}})},this.getAttributeCompletions=function(b,v,y,C){var E=h(v,y);if(!E)return[];var A=u;return E in d&&(A=A.concat(Object.keys(d[E]))),A.map(function(k){return{caption:k,snippet:k+'="$0"',meta:"attribute",score:1e6}})},this.getAttributeValueCompletions=function(b,v,y,C){var E=h(v,y),A=p(v,y);if(!E)return[];var k=[];return E in d&&A in d[E]&&typeof d[E][A]=="object"&&(k=Object.keys(d[E][A])),k.map(function(T){return{caption:T,snippet:T,meta:"attribute value",score:1e6}})},this.getHTMLEntityCompletions=function(b,v,y,C){var E=["Aacute;","aacute;","Acirc;","acirc;","acute;","AElig;","aelig;","Agrave;","agrave;","alefsym;","Alpha;","alpha;","amp;","and;","ang;","Aring;","aring;","asymp;","Atilde;","atilde;","Auml;","auml;","bdquo;","Beta;","beta;","brvbar;","bull;","cap;","Ccedil;","ccedil;","cedil;","cent;","Chi;","chi;","circ;","clubs;","cong;","copy;","crarr;","cup;","curren;","Dagger;","dagger;","dArr;","darr;","deg;","Delta;","delta;","diams;","divide;","Eacute;","eacute;","Ecirc;","ecirc;","Egrave;","egrave;","empty;","emsp;","ensp;","Epsilon;","epsilon;","equiv;","Eta;","eta;","ETH;","eth;","Euml;","euml;","euro;","exist;","fnof;","forall;","frac12;","frac14;","frac34;","frasl;","Gamma;","gamma;","ge;","gt;","hArr;","harr;","hearts;","hellip;","Iacute;","iacute;","Icirc;","icirc;","iexcl;","Igrave;","igrave;","image;","infin;","int;","Iota;","iota;","iquest;","isin;","Iuml;","iuml;","Kappa;","kappa;","Lambda;","lambda;","lang;","laquo;","lArr;","larr;","lceil;","ldquo;","le;","lfloor;","lowast;","loz;","lrm;","lsaquo;","lsquo;","lt;","macr;","mdash;","micro;","middot;","minus;","Mu;","mu;","nabla;","nbsp;","ndash;","ne;","ni;","not;","notin;","nsub;","Ntilde;","ntilde;","Nu;","nu;","Oacute;","oacute;","Ocirc;","ocirc;","OElig;","oelig;","Ograve;","ograve;","oline;","Omega;","omega;","Omicron;","omicron;","oplus;","or;","ordf;","ordm;","Oslash;","oslash;","Otilde;","otilde;","otimes;","Ouml;","ouml;","para;","part;","permil;","perp;","Phi;","phi;","Pi;","pi;","piv;","plusmn;","pound;","Prime;","prime;","prod;","prop;","Psi;","psi;","quot;","radic;","rang;","raquo;","rArr;","rarr;","rceil;","rdquo;","real;","reg;","rfloor;","Rho;","rho;","rlm;","rsaquo;","rsquo;","sbquo;","Scaron;","scaron;","sdot;","sect;","shy;","Sigma;","sigma;","sigmaf;","sim;","spades;","sub;","sube;","sum;","sup;","sup1;","sup2;","sup3;","supe;","szlig;","Tau;","tau;","there4;","Theta;","theta;","thetasym;","thinsp;","THORN;","thorn;","tilde;","times;","trade;","Uacute;","uacute;","uArr;","uarr;","Ucirc;","ucirc;","Ugrave;","ugrave;","uml;","upsih;","Upsilon;","upsilon;","Uuml;","uuml;","weierp;","Xi;","xi;","Yacute;","yacute;","yen;","Yuml;","yuml;","Zeta;","zeta;","zwj;","zwnj;"];return E.map(function(A){return{caption:A,snippet:A,meta:"html entity",score:1e6}})}}).call(g.prototype),n.HtmlCompletions=g}),ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./text").Mode,u=t("./javascript").Mode,d=t("./css").Mode,f=t("./html_highlight_rules").HtmlHighlightRules,m=t("./behaviour/xml").XmlBehaviour,h=t("./folding/html").FoldMode,p=t("./html_completions").HtmlCompletions,g=t("../worker/worker_client").WorkerClient,b=["area","base","br","col","embed","hr","img","input","keygen","link","meta","menuitem","param","source","track","wbr"],v=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"],y=function(C){this.fragmentContext=C&&C.fragmentContext,this.HighlightRules=f,this.$behaviour=new m,this.$completer=new p,this.createModeDelegates({"js-":u,"css-":d}),this.foldingRules=new h(this.voidElements,s.arrayToMap(v))};a.inherits(y,l),(function(){this.blockComment={start:"<!--",end:"-->"},this.voidElements=s.arrayToMap(b),this.getNextLineIndent=function(C,E,A){return this.$getIndent(E)},this.checkOutdent=function(C,E,A){return!1},this.getCompletions=function(C,E,A,k){return this.$completer.getCompletions(C,E,A,k)},this.createWorker=function(C){if(this.constructor==y){var E=new g(["ace"],"ace/mode/html_worker","Worker");return E.attachToDocument(C.getDocument()),this.fragmentContext&&E.call("setOptions",[{context:this.fragmentContext}]),E.on("error",function(A){C.setAnnotations(A.data)}),E.on("terminate",function(){C.clearAnnotations()}),E}},this.$id="ace/mode/html",this.snippetFileId="ace/snippets/html"}).call(y.prototype),n.Mode=y}),function(){ace.require(["ace/mode/html"],function(t){o&&(o.exports=t)})}()})(modeHtml);var modeMarkdown={exports:{}};(function(o,e){ace.define("ace/mode/doc_comment_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(){this.$rules={start:[{token:"comment.doc.tag",regex:"@[\\w\\d_]+"},l.getTagRule(),{defaultToken:"comment.doc",caseInsensitive:!0}]}};a.inherits(l,s),l.getTagRule=function(u){return{token:"comment.doc.tag.storage.type",regex:"\\b(?:TODO|FIXME|XXX|HACK)\\b"}},l.getStartRule=function(u){return{token:"comment.doc",regex:"\\/\\*(?=\\*)",next:u}},l.getEndRule=function(u){return{token:"comment.doc",regex:"\\*\\/",next:u}},n.DocCommentHighlightRules=l}),ace.define("ace/mode/javascript_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/doc_comment_highlight_rules","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./doc_comment_highlight_rules").DocCommentHighlightRules,l=t("./text_highlight_rules").TextHighlightRules,u="[a-zA-Z\\$_-][a-zA-Z\\d\\$_-]*",d=function(h){var p=this.createKeywordMapper({"variable.language":"Array|Boolean|Date|Function|Iterator|Number|Object|RegExp|String|Proxy|Namespace|QName|XML|XMLList|ArrayBuffer|Float32Array|Float64Array|Int16Array|Int32Array|Int8Array|Uint16Array|Uint32Array|Uint8Array|Uint8ClampedArray|Error|EvalError|InternalError|RangeError|ReferenceError|StopIteration|SyntaxError|TypeError|URIError|decodeURI|decodeURIComponent|encodeURI|encodeURIComponent|eval|isFinite|isNaN|parseFloat|parseInt|JSON|Math|this|arguments|prototype|window|document",keyword:"const|yield|import|get|set|async|await|break|case|catch|continue|default|delete|do|else|finally|for|function|if|in|of|instanceof|new|return|switch|throw|try|typeof|let|var|while|with|debugger|__parent__|__count__|escape|unescape|with|__proto__|class|enum|extends|super|export|implements|private|public|interface|package|protected|static","storage.type":"const|let|var|function","constant.language":"null|Infinity|NaN|undefined","support.function":"alert","constant.language.boolean":"true|false"},"identifier"),g="case|do|else|finally|in|instanceof|return|throw|try|typeof|yield|void",b="\\\\(?:x[0-9a-fA-F]{2}|u[0-9a-fA-F]{4}|u{[0-9a-fA-F]{1,6}}|[0-2][0-7]{0,2}|3[0-7][0-7]?|[4-7][0-7]?|.)";this.$rules={no_regex:[s.getStartRule("doc-start"),m("no_regex"),{token:"string",regex:"'(?=.)",next:"qstring"},{token:"string",regex:'"(?=.)',next:"qqstring"},{token:"constant.numeric",regex:/0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)\b/},{token:"constant.numeric",regex:/(?:\d\d*(?:\.\d*)?|\.\d+)(?:[eE][+-]?\d+\b)?/},{token:["storage.type","punctuation.operator","support.function","punctuation.operator","entity.name.function","text","keyword.operator"],regex:"("+u+")(\\.)(prototype)(\\.)("+u+")(\\s*)(=)",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","keyword.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(=)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(\\s+)(\\w+)(\\s*)(\\()",next:"function_arguments"},{token:["storage.type","text","entity.name.function","text","paren.lparen"],regex:"(function)(\\s+)("+u+")(\\s*)(\\()",next:"function_arguments"},{token:["entity.name.function","text","punctuation.operator","text","storage.type","text","paren.lparen"],regex:"("+u+")(\\s*)(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:["text","text","storage.type","text","paren.lparen"],regex:"(:)(\\s*)(function)(\\s*)(\\()",next:"function_arguments"},{token:"keyword",regex:`from(?=\\s*('|"))`},{token:"keyword",regex:"(?:"+g+")\\b",next:"start"},{token:["support.constant"],regex:/that\b/},{token:["storage.type","punctuation.operator","support.function.firebug"],regex:/(console)(\.)(warn|info|log|error|time|trace|timeEnd|assert)\b/},{token:p,regex:u},{token:"punctuation.operator",regex:/[.](?![.])/,next:"property"},{token:"storage.type",regex:/=>/,next:"start"},{token:"keyword.operator",regex:/--|\+\+|\.{3}|===|==|=|!=|!==|<+=?|>+=?|!|&&|\|\||\?:|[!$%&*+\-~\/^]=?/,next:"start"},{token:"punctuation.operator",regex:/[?:,;.]/,next:"start"},{token:"paren.lparen",regex:/[\[({]/,next:"start"},{token:"paren.rparen",regex:/[\])}]/},{token:"comment",regex:/^#!.*$/}],property:[{token:"text",regex:"\\s+"},{token:["storage.type","punctuation.operator","entity.name.function","text","keyword.operator","text","storage.type","text","entity.name.function","text","paren.lparen"],regex:"("+u+")(\\.)("+u+")(\\s*)(=)(\\s*)(function)(?:(\\s+)(\\w+))?(\\s*)(\\()",next:"function_arguments"},{token:"punctuation.operator",regex:/[.](?![.])/},{token:"support.function",regex:/(s(?:h(?:ift|ow(?:Mod(?:elessDialog|alDialog)|Help))|croll(?:X|By(?:Pages|Lines)?|Y|To)?|t(?:op|rike)|i(?:n|zeToContent|debar|gnText)|ort|u(?:p|b(?:str(?:ing)?)?)|pli(?:ce|t)|e(?:nd|t(?:Re(?:sizable|questHeader)|M(?:i(?:nutes|lliseconds)|onth)|Seconds|Ho(?:tKeys|urs)|Year|Cursor|Time(?:out)?|Interval|ZOptions|Date|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Date|FullYear)|FullYear|Active)|arch)|qrt|lice|avePreferences|mall)|h(?:ome|andleEvent)|navigate|c(?:har(?:CodeAt|At)|o(?:s|n(?:cat|textual|firm)|mpile)|eil|lear(?:Timeout|Interval)?|a(?:ptureEvents|ll)|reate(?:StyleSheet|Popup|EventObject))|t(?:o(?:GMTString|S(?:tring|ource)|U(?:TCString|pperCase)|Lo(?:caleString|werCase))|est|a(?:n|int(?:Enabled)?))|i(?:s(?:NaN|Finite)|ndexOf|talics)|d(?:isableExternalCapture|ump|etachEvent)|u(?:n(?:shift|taint|escape|watch)|pdateCommands)|j(?:oin|avaEnabled)|p(?:o(?:p|w)|ush|lugins.refresh|a(?:ddings|rse(?:Int|Float)?)|r(?:int|ompt|eference))|e(?:scape|nableExternalCapture|val|lementFromPoint|x(?:p|ec(?:Script|Command)?))|valueOf|UTC|queryCommand(?:State|Indeterm|Enabled|Value)|f(?:i(?:nd|le(?:ModifiedDate|Size|CreatedDate|UpdatedDate)|xed)|o(?:nt(?:size|color)|rward)|loor|romCharCode)|watch|l(?:ink|o(?:ad|g)|astIndexOf)|a(?:sin|nchor|cos|t(?:tachEvent|ob|an(?:2)?)|pply|lert|b(?:s|ort))|r(?:ou(?:nd|teEvents)|e(?:size(?:By|To)|calc|turnValue|place|verse|l(?:oad|ease(?:Capture|Events)))|andom)|g(?:o|et(?:ResponseHeader|M(?:i(?:nutes|lliseconds)|onth)|Se(?:conds|lection)|Hours|Year|Time(?:zoneOffset)?|Da(?:y|te)|UTC(?:M(?:i(?:nutes|lliseconds)|onth)|Seconds|Hours|Da(?:y|te)|FullYear)|FullYear|A(?:ttention|llResponseHeaders)))|m(?:in|ove(?:B(?:y|elow)|To(?:Absolute)?|Above)|ergeAttributes|a(?:tch|rgins|x))|b(?:toa|ig|o(?:ld|rderWidths)|link|ack))\b(?=\()/},{token:"support.function.dom",regex:/(s(?:ub(?:stringData|mit)|plitText|e(?:t(?:NamedItem|Attribute(?:Node)?)|lect))|has(?:ChildNodes|Feature)|namedItem|c(?:l(?:ick|o(?:se|neNode))|reate(?:C(?:omment|DATASection|aption)|T(?:Head|extNode|Foot)|DocumentFragment|ProcessingInstruction|E(?:ntityReference|lement)|Attribute))|tabIndex|i(?:nsert(?:Row|Before|Cell|Data)|tem)|open|delete(?:Row|C(?:ell|aption)|T(?:Head|Foot)|Data)|focus|write(?:ln)?|a(?:dd|ppend(?:Child|Data))|re(?:set|place(?:Child|Data)|move(?:NamedItem|Child|Attribute(?:Node)?)?)|get(?:NamedItem|Element(?:sBy(?:Name|TagName|ClassName)|ById)|Attribute(?:Node)?)|blur)\b(?=\()/},{token:"support.constant",regex:/(s(?:ystemLanguage|cr(?:ipts|ollbars|een(?:X|Y|Top|Left))|t(?:yle(?:Sheets)?|atus(?:Text|bar)?)|ibling(?:Below|Above)|ource|uffixes|e(?:curity(?:Policy)?|l(?:ection|f)))|h(?:istory|ost(?:name)?|as(?:h|Focus))|y|X(?:MLDocument|SLDocument)|n(?:ext|ame(?:space(?:s|URI)|Prop))|M(?:IN_VALUE|AX_VALUE)|c(?:haracterSet|o(?:n(?:structor|trollers)|okieEnabled|lorDepth|mp(?:onents|lete))|urrent|puClass|l(?:i(?:p(?:boardData)?|entInformation)|osed|asses)|alle(?:e|r)|rypto)|t(?:o(?:olbar|p)|ext(?:Transform|Indent|Decoration|Align)|ags)|SQRT(?:1_2|2)|i(?:n(?:ner(?:Height|Width)|put)|ds|gnoreCase)|zIndex|o(?:scpu|n(?:readystatechange|Line)|uter(?:Height|Width)|p(?:sProfile|ener)|ffscreenBuffering)|NEGATIVE_INFINITY|d(?:i(?:splay|alog(?:Height|Top|Width|Left|Arguments)|rectories)|e(?:scription|fault(?:Status|Ch(?:ecked|arset)|View)))|u(?:ser(?:Profile|Language|Agent)|n(?:iqueID|defined)|pdateInterval)|_content|p(?:ixelDepth|ort|ersonalbar|kcs11|l(?:ugins|atform)|a(?:thname|dding(?:Right|Bottom|Top|Left)|rent(?:Window|Layer)?|ge(?:X(?:Offset)?|Y(?:Offset)?))|r(?:o(?:to(?:col|type)|duct(?:Sub)?|mpter)|e(?:vious|fix)))|e(?:n(?:coding|abledPlugin)|x(?:ternal|pando)|mbeds)|v(?:isibility|endor(?:Sub)?|Linkcolor)|URLUnencoded|P(?:I|OSITIVE_INFINITY)|f(?:ilename|o(?:nt(?:Size|Family|Weight)|rmName)|rame(?:s|Element)|gColor)|E|whiteSpace|l(?:i(?:stStyleType|n(?:eHeight|kColor))|o(?:ca(?:tion(?:bar)?|lName)|wsrc)|e(?:ngth|ft(?:Context)?)|a(?:st(?:M(?:odified|atch)|Index|Paren)|yer(?:s|X)|nguage))|a(?:pp(?:MinorVersion|Name|Co(?:deName|re)|Version)|vail(?:Height|Top|Width|Left)|ll|r(?:ity|guments)|Linkcolor|bove)|r(?:ight(?:Context)?|e(?:sponse(?:XML|Text)|adyState))|global|x|m(?:imeTypes|ultiline|enubar|argin(?:Right|Bottom|Top|Left))|L(?:N(?:10|2)|OG(?:10E|2E))|b(?:o(?:ttom|rder(?:Width|RightWidth|BottomWidth|Style|Color|TopWidth|LeftWidth))|ufferDepth|elow|ackground(?:Color|Image)))\b/},{token:"identifier",regex:u},{regex:"",token:"empty",next:"no_regex"}],start:[s.getStartRule("doc-start"),m("start"),{token:"string.regexp",regex:"\\/",next:"regex"},{token:"text",regex:"\\s+|^$",next:"start"},{token:"empty",regex:"",next:"no_regex"}],regex:[{token:"regexp.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"string.regexp",regex:"/[sxngimy]*",next:"no_regex"},{token:"invalid",regex:/\{\d+\b,?\d*\}[+*]|[+*$^?][+*]|[$^][?]|\?{3,}/},{token:"constant.language.escape",regex:/\(\?[:=!]|\)|\{\d+\b,?\d*\}|[+*]\?|[()$^+*?.]/},{token:"constant.language.delimiter",regex:/\|/},{token:"constant.language.escape",regex:/\[\^?/,next:"regex_character_class"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp"}],regex_character_class:[{token:"regexp.charclass.keyword.operator",regex:"\\\\(?:u[\\da-fA-F]{4}|x[\\da-fA-F]{2}|.)"},{token:"constant.language.escape",regex:"]",next:"regex"},{token:"constant.language.escape",regex:"-"},{token:"empty",regex:"$",next:"no_regex"},{defaultToken:"string.regexp.charachterclass"}],function_arguments:[{token:"variable.parameter",regex:u},{token:"punctuation.operator",regex:"[, ]+"},{token:"punctuation.operator",regex:"$"},{token:"empty",regex:"",next:"no_regex"}],qqstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:'"|$',next:"no_regex"},{defaultToken:"string"}],qstring:[{token:"constant.language.escape",regex:b},{token:"string",regex:"\\\\$",consumeLineEnd:!0},{token:"string",regex:"'|$",next:"no_regex"},{defaultToken:"string"}]},(!h||!h.noES6)&&(this.$rules.no_regex.unshift({regex:"[{}]",onMatch:function(v,y,C){if(this.next=v=="{"?this.nextState:"",v=="{"&&C.length)C.unshift("start",y);else if(v=="}"&&C.length&&(C.shift(),this.next=C.shift(),this.next.indexOf("string")!=-1||this.next.indexOf("jsx")!=-1))return"paren.quasi.end";return v=="{"?"paren.lparen":"paren.rparen"},nextState:"start"},{token:"string.quasi.start",regex:/`/,push:[{token:"constant.language.escape",regex:b},{token:"paren.quasi.start",regex:/\${/,push:"start"},{token:"string.quasi.end",regex:/`/,next:"pop"},{defaultToken:"string.quasi"}]}),(!h||h.jsx!=!1)&&f.call(this)),this.embedRules(s,"doc-",[s.getEndRule("no_regex")]),this.normalizeRules()};a.inherits(d,l);function f(){var h=u.replace("\\d","\\d\\-"),p={onMatch:function(b,v,y){var C=b.charAt(1)=="/"?2:1;return C==1?(v!=this.nextState?y.unshift(this.next,this.nextState,0):y.unshift(this.next),y[2]++):C==2&&v==this.nextState&&(y[1]--,(!y[1]||y[1]<0)&&(y.shift(),y.shift())),[{type:"meta.tag.punctuation."+(C==1?"":"end-")+"tag-open.xml",value:b.slice(0,C)},{type:"meta.tag.tag-name.xml",value:b.substr(C)}]},regex:"</?"+h,next:"jsxAttributes",nextState:"jsx"};this.$rules.start.unshift(p);var g={regex:"{",token:"paren.quasi.start",push:"start"};this.$rules.jsx=[g,p,{include:"reference"},{defaultToken:"string"}],this.$rules.jsxAttributes=[{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",onMatch:function(b,v,y){return v==y[0]&&y.shift(),b.length==2&&(y[0]==this.nextState&&y[1]--,(!y[1]||y[1]<0)&&y.splice(0,2)),this.next=y[0]||"start",[{type:this.token,value:b}]},nextState:"jsx"},g,m("jsxAttributes"),{token:"entity.other.attribute-name.xml",regex:h},{token:"keyword.operator.attribute-equals.xml",regex:"="},{token:"text.tag-whitespace.xml",regex:"\\s+"},{token:"string.attribute-value.xml",regex:"'",stateName:"jsx_attr_q",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',stateName:"jsx_attr_qq",push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"reference"},{defaultToken:"string.attribute-value.xml"}]},p],this.$rules.reference=[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}]}function m(h){return[{token:"comment",regex:/\/\*/,next:[s.getTagRule(),{token:"comment",regex:"\\*\\/",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]},{token:"comment",regex:"\\/\\/",next:[s.getTagRule(),{token:"comment",regex:"$|^",next:h||"pop"},{defaultToken:"comment",caseInsensitive:!0}]}]}n.JavaScriptHighlightRules=d}),ace.define("ace/mode/matching_brace_outdent",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=function(){};(function(){this.checkOutdent=function(l,u){return/^\s+$/.test(l)?/^\s*\}/.test(u):!1},this.autoOutdent=function(l,u){var d=l.getLine(u),f=d.match(/^(\s*\})/);if(!f)return 0;var m=f[1].length,h=l.findMatchingBracket({row:u,column:m});if(!h||h.row==u)return 0;var p=this.$getIndent(l.getLine(h.row));l.replace(new a(u,0,u,m-1),p)},this.$getIndent=function(l){return l.match(/^\s*/)[0]}}).call(s.prototype),n.MatchingBraceOutdent=s}),ace.define("ace/mode/folding/cstyle",["require","exports","module","ace/lib/oop","ace/range","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=n.FoldMode=function(d){d&&(this.foldingStartMarker=new RegExp(this.foldingStartMarker.source.replace(/\|[^|]*?$/,"|"+d.start)),this.foldingStopMarker=new RegExp(this.foldingStopMarker.source.replace(/\|[^|]*?$/,"|"+d.end)))};a.inherits(u,l),(function(){this.foldingStartMarker=/([\{\[\(])[^\}\]\)]*$|^\s*(\/\*)/,this.foldingStopMarker=/^[^\[\{\(]*([\}\]\)])|^[\s\*]*(\*\/)/,this.singleLineBlockCommentRe=/^\s*(\/\*).*\*\/\s*$/,this.tripleStarBlockCommentRe=/^\s*(\/\*\*\*).*\*\/\s*$/,this.startRegionRe=/^\s*(\/\*|\/\/)#?region\b/,this._getFoldWidgetBase=this.getFoldWidget,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);if(this.singleLineBlockCommentRe.test(h)&&!this.startRegionRe.test(h)&&!this.tripleStarBlockCommentRe.test(h))return"";var p=this._getFoldWidgetBase(d,f,m);return!p&&this.startRegionRe.test(h)?"start":p},this.getFoldWidgetRange=function(d,f,m,h){var p=d.getLine(m);if(this.startRegionRe.test(p))return this.getCommentRegionBlock(d,p,m);var v=p.match(this.foldingStartMarker);if(v){var g=v.index;if(v[1])return this.openingBracketBlock(d,v[1],m,g);var b=d.getCommentFoldRange(m,g+v[0].length,1);return b&&!b.isMultiLine()&&(h?b=this.getSectionRange(d,m):f!="all"&&(b=null)),b}if(f!=="markbegin"){var v=p.match(this.foldingStopMarker);if(v){var g=v.index+v[0].length;return v[1]?this.closingBracketBlock(d,v[1],m,g):d.getCommentFoldRange(m,g,-1)}}},this.getSectionRange=function(d,f){var m=d.getLine(f),h=m.search(/\S/),p=f,g=m.length;f=f+1;for(var b=f,v=d.getLength();++f<v;){m=d.getLine(f);var y=m.search(/\S/);if(y!==-1){if(h>y)break;var C=this.getFoldWidgetRange(d,"all",f);if(C){if(C.start.row<=p)break;if(C.isMultiLine())f=C.end.row;else if(h==y)break}b=f}}return new s(p,g,b,d.getLine(b).length)},this.getCommentRegionBlock=function(d,f,m){for(var h=f.search(/\s*$/),p=d.getLength(),g=m,b=/^\s*(?:\/\*|\/\/|--)#?(end)?region\b/,v=1;++m<p;){f=d.getLine(m);var y=b.exec(f);if(y&&(y[1]?v--:v++,!v))break}var C=m;if(C>g)return new s(g,h,C,f.length)}}).call(u.prototype)}),ace.define("ace/mode/javascript",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/behaviour/cstyle","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./javascript_highlight_rules").JavaScriptHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("../worker/worker_client").WorkerClient,f=t("./behaviour/cstyle").CstyleBehaviour,m=t("./folding/cstyle").FoldMode,h=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new f,this.foldingRules=new m};a.inherits(h,s),(function(){this.lineCommentStart="//",this.blockComment={start:"/*",end:"*/"},this.$quotes={'"':'"',"'":"'","`":"`"},this.getNextLineIndent=function(p,g,b){var v=this.$getIndent(g),y=this.getTokenizer().getLineTokens(g,p),C=y.tokens,E=y.state;if(C.length&&C[C.length-1].type=="comment")return v;if(p=="start"||p=="no_regex"){var A=g.match(/^.*(?:\bcase\b.*:|[\{\(\[])\s*$/);A&&(v+=b)}else if(p=="doc-start"){if(E=="start"||E=="no_regex")return"";var A=g.match(/^\s*(\/?)\*/);A&&(A[1]&&(v+=" "),v+="* ")}return v},this.checkOutdent=function(p,g,b){return this.$outdent.checkOutdent(g,b)},this.autoOutdent=function(p,g,b){this.$outdent.autoOutdent(g,b)},this.createWorker=function(p){var g=new d(["ace"],"ace/mode/javascript_worker","JavaScriptWorker");return g.attachToDocument(p.getDocument()),g.on("annotate",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/javascript",this.snippetFileId="ace/snippets/javascript"}).call(h.prototype),n.Mode=h}),ace.define("ace/mode/xml_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=function(u){var d="[_:a-zA-Z-][-_:.a-zA-Z0-9-]*";this.$rules={start:[{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\[",next:"cdata"},{token:["punctuation.instruction.xml","keyword.instruction.xml"],regex:"(<\\?)("+d+")",next:"processing_instruction"},{token:"comment.start.xml",regex:"<\\!--",next:"comment"},{token:["xml-pe.doctype.xml","xml-pe.doctype.xml"],regex:"(<\\!)(DOCTYPE)(?=[\\s])",next:"doctype",caseInsensitive:!0},{include:"tag"},{token:"text.end-tag-open.xml",regex:"</"},{token:"text.tag-open.xml",regex:"<"},{include:"reference"},{defaultToken:"text.xml"}],processing_instruction:[{token:"entity.other.attribute-name.decl-attribute-name.xml",regex:d},{token:"keyword.operator.decl-attribute-equals.xml",regex:"="},{include:"whitespace"},{include:"string"},{token:"punctuation.xml-decl.xml",regex:"\\?>",next:"start"}],doctype:[{include:"whitespace"},{include:"string"},{token:"xml-pe.doctype.xml",regex:">",next:"start"},{token:"xml-pe.xml",regex:"[-_a-zA-Z0-9:]+"},{token:"punctuation.int-subset",regex:"\\[",push:"int_subset"}],int_subset:[{token:"text.xml",regex:"\\s+"},{token:"punctuation.int-subset.xml",regex:"]",next:"pop"},{token:["punctuation.markup-decl.xml","keyword.markup-decl.xml"],regex:"(<\\!)("+d+")",push:[{token:"text",regex:"\\s+"},{token:"punctuation.markup-decl.xml",regex:">",next:"pop"},{include:"string"}]}],cdata:[{token:"string.cdata.xml",regex:"\\]\\]>",next:"start"},{token:"text.xml",regex:"\\s+"},{token:"text.xml",regex:"(?:[^\\]]|\\](?!\\]>))+"}],comment:[{token:"comment.end.xml",regex:"-->",next:"start"},{defaultToken:"comment.xml"}],reference:[{token:"constant.language.escape.reference.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],attr_reference:[{token:"constant.language.escape.reference.attribute-value.xml",regex:"(?:&#[0-9]+;)|(?:&#x[0-9a-fA-F]+;)|(?:&[a-zA-Z0-9_:\\.-]+;)"}],tag:[{token:["meta.tag.punctuation.tag-open.xml","meta.tag.punctuation.end-tag-open.xml","meta.tag.tag-name.xml"],regex:"(?:(<)|(</))((?:"+d+":)?"+d+")",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}],tag_whitespace:[{token:"text.tag-whitespace.xml",regex:"\\s+"}],whitespace:[{token:"text.whitespace.xml",regex:"\\s+"}],string:[{token:"string.xml",regex:"'",push:[{token:"string.xml",regex:"'",next:"pop"},{defaultToken:"string.xml"}]},{token:"string.xml",regex:'"',push:[{token:"string.xml",regex:'"',next:"pop"},{defaultToken:"string.xml"}]}],attributes:[{token:"entity.other.attribute-name.xml",regex:d},{token:"keyword.operator.attribute-equals.xml",regex:"="},{include:"tag_whitespace"},{include:"attribute_value"}],attribute_value:[{token:"string.attribute-value.xml",regex:"'",push:[{token:"string.attribute-value.xml",regex:"'",next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]},{token:"string.attribute-value.xml",regex:'"',push:[{token:"string.attribute-value.xml",regex:'"',next:"pop"},{include:"attr_reference"},{defaultToken:"string.attribute-value.xml"}]}]},this.constructor===l&&this.normalizeRules()};(function(){this.embedTagRules=function(u,d,f){this.$rules.tag.unshift({token:["meta.tag.punctuation.tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(<)("+f+"(?=\\s|>|$))",next:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:d+"start"}]}),this.$rules[f+"-end"]=[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start",onMatch:function(m,h,p){return p.splice(0),this.token}}],this.embedRules(u,d,[{token:["meta.tag.punctuation.end-tag-open.xml","meta.tag."+f+".tag-name.xml"],regex:"(</)("+f+"(?=\\s|>|$))",next:f+"-end"},{token:"string.cdata.xml",regex:"<\\!\\[CDATA\\["},{token:"string.cdata.xml",regex:"\\]\\]>"}])}}).call(s.prototype),a.inherits(l,s),n.XmlHighlightRules=l}),ace.define("ace/mode/behaviour/xml",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/token_iterator","ace/lib/lang"],function(t,n,r){var a=t("../../lib/oop"),s=t("../behaviour").Behaviour,l=t("../../token_iterator").TokenIterator;t("../../lib/lang");function u(f,m){return f&&f.type.lastIndexOf(m+".xml")>-1}var d=function(){this.add("string_dquotes","insertion",function(f,m,h,p,g){if(g=='"'||g=="'"){var b=g,v=p.doc.getTextRange(h.getSelectionRange());if(v!==""&&v!=="'"&&v!='"'&&h.getWrapBehavioursEnabled())return{text:b+v+b,selection:!1};var y=h.getCursorPosition(),C=p.doc.getLine(y.row),E=C.substring(y.column,y.column+1),A=new l(p,y.row,y.column),k=A.getCurrentToken();if(E==b&&(u(k,"attribute-value")||u(k,"string")))return{text:"",selection:[1,1]};if(k||(k=A.stepBackward()),!k)return;for(;u(k,"tag-whitespace")||u(k,"whitespace");)k=A.stepBackward();var T=!E||E.match(/\s/);if(u(k,"attribute-equals")&&(T||E==">")||u(k,"decl-attribute-equals")&&(T||E=="?"))return{text:b+b,selection:[1,1]}}}),this.add("string_dquotes","deletion",function(f,m,h,p,g){var b=p.doc.getTextRange(g);if(!g.isMultiLine()&&(b=='"'||b=="'")){var v=p.doc.getLine(g.start.row),y=v.substring(g.start.column+1,g.start.column+2);if(y==b)return g.end.column++,g}}),this.add("autoclosing","insertion",function(f,m,h,p,g){if(g==">"){var b=h.getSelectionRange().start,v=new l(p,b.row,b.column),y=v.getCurrentToken()||v.stepBackward();if(!y||!(u(y,"tag-name")||u(y,"tag-whitespace")||u(y,"attribute-name")||u(y,"attribute-equals")||u(y,"attribute-value"))||u(y,"reference.attribute-value"))return;if(u(y,"attribute-value")){var C=v.getCurrentTokenColumn()+y.value.length;if(b.column<C)return;if(b.column==C){var E=v.stepForward();if(E&&u(E,"attribute-value"))return;v.stepBackward()}}if(/^\s*>/.test(p.getLine(b.row).slice(b.column)))return;for(;!u(y,"tag-name");)if(y=v.stepBackward(),y.value=="<"){y=v.stepForward();break}var A=v.getCurrentTokenRow(),k=v.getCurrentTokenColumn();if(u(v.stepBackward(),"end-tag-open"))return;var T=y.value;return A==b.row&&(T=T.substring(0,b.column-k)),this.voidElements.hasOwnProperty(T.toLowerCase())?void 0:{text:"></"+T+">",selection:[1,1]}}}),this.add("autoindent","insertion",function(f,m,h,p,g){if(g==`
`){var b=h.getCursorPosition(),v=p.getLine(b.row),y=new l(p,b.row,b.column),C=y.getCurrentToken();if(C&&C.type.indexOf("tag-close")!==-1){if(C.value=="/>")return;for(;C&&C.type.indexOf("tag-name")===-1;)C=y.stepBackward();if(!C)return;var E=C.value,A=y.getCurrentTokenRow();if(C=y.stepBackward(),!C||C.type.indexOf("end-tag")!==-1)return;if(this.voidElements&&!this.voidElements[E]){var k=p.getTokenAt(b.row,b.column+1),v=p.getLine(A),T=this.$getIndent(v),$=T+p.getTabString();return k&&k.value==="</"?{text:`
`+$+`
`+T,selection:[1,$.length,1,$.length]}:{text:`
`+$}}}}})};a.inherits(d,s),n.XmlBehaviour=d}),ace.define("ace/mode/folding/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/range","ace/mode/folding/fold_mode","ace/token_iterator"],function(t,n,r){var a=t("../../lib/oop");t("../../lib/lang");var s=t("../../range").Range,l=t("./fold_mode").FoldMode,u=t("../../token_iterator").TokenIterator,d=n.FoldMode=function(h,p){l.call(this),this.voidElements=h||{},this.optionalEndTags=a.mixin({},this.voidElements),p&&a.mixin(this.optionalEndTags,p)};a.inherits(d,l);var f=function(){this.tagName="",this.closing=!1,this.selfClosing=!1,this.start={row:0,column:0},this.end={row:0,column:0}};function m(h,p){return h.type.lastIndexOf(p+".xml")>-1}(function(){this.getFoldWidget=function(h,p,g){var b=this._getFirstTagInLine(h,g);return b?b.closing||!b.tagName&&b.selfClosing?p=="markbeginend"?"end":"":!b.tagName||b.selfClosing||this.voidElements.hasOwnProperty(b.tagName.toLowerCase())||this._findEndTagInLine(h,g,b.tagName,b.end.column)?"":"start":this.getCommentFoldWidget(h,g)},this.getCommentFoldWidget=function(h,p){return/comment/.test(h.getState(p))&&/<!-/.test(h.getLine(p))?"start":""},this._getFirstTagInLine=function(h,p){for(var g=h.getTokens(p),b=new f,v=0;v<g.length;v++){var y=g[v];if(m(y,"tag-open")){if(b.end.column=b.start.column+y.value.length,b.closing=m(y,"end-tag-open"),y=g[++v],!y)return null;for(b.tagName=y.value,b.end.column+=y.value.length,v++;v<g.length;v++)if(y=g[v],b.end.column+=y.value.length,m(y,"tag-close")){b.selfClosing=y.value=="/>";break}return b}else if(m(y,"tag-close"))return b.selfClosing=y.value=="/>",b;b.start.column+=y.value.length}return null},this._findEndTagInLine=function(h,p,g,b){for(var v=h.getTokens(p),y=0,C=0;C<v.length;C++){var E=v[C];if(y+=E.value.length,!(y<b)&&m(E,"end-tag-open")&&(E=v[C+1],E&&E.value==g))return!0}return!1},this._readTagForward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do if(m(p,"tag-open"))g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn();else if(m(p,"tag-name"))g.tagName=p.value;else if(m(p,"tag-close"))return g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length,h.stepForward(),g;while(p=h.stepForward());return null},this._readTagBackward=function(h){var p=h.getCurrentToken();if(!p)return null;var g=new f;do{if(m(p,"tag-open"))return g.closing=m(p,"end-tag-open"),g.start.row=h.getCurrentTokenRow(),g.start.column=h.getCurrentTokenColumn(),h.stepBackward(),g;m(p,"tag-name")?g.tagName=p.value:m(p,"tag-close")&&(g.selfClosing=p.value=="/>",g.end.row=h.getCurrentTokenRow(),g.end.column=h.getCurrentTokenColumn()+p.value.length)}while(p=h.stepBackward());return null},this._pop=function(h,p){for(;h.length;){var g=h[h.length-1];if(!p||g.tagName==p.tagName)return h.pop();if(this.optionalEndTags.hasOwnProperty(g.tagName)){h.pop();continue}else return null}},this.getFoldWidgetRange=function(h,p,g){var b=this._getFirstTagInLine(h,g);if(!b)return this.getCommentFoldWidget(h,g)&&h.getCommentFoldRange(g,h.getLine(g).length);var v=b.closing||b.selfClosing,y=[],C;if(v)for(var E=new u(h,g,b.end.column),k={row:g,column:b.start.column};C=this._readTagBackward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing)y.push(C);else if(this._pop(y,C),y.length==0)return C.start.column+=C.tagName.length+2,C.start.row==C.end.row&&C.start.column<C.end.column&&(C.start.column=C.end.column),s.fromPoints(C.start,k)}else{var E=new u(h,g,b.start.column),A={row:g,column:b.start.column+b.tagName.length+2};for(b.start.row==b.end.row&&(A.column=b.end.column);C=this._readTagForward(E);){if(C.selfClosing){if(y.length)continue;return C.start.column+=C.tagName.length+2,C.end.column-=2,s.fromPoints(C.start,C.end)}if(C.closing){if(this._pop(y,C),y.length==0)return s.fromPoints(A,C.start)}else y.push(C)}}}}).call(d.prototype)}),ace.define("ace/mode/xml",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/xml_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/xml","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./text").Mode,u=t("./xml_highlight_rules").XmlHighlightRules,d=t("./behaviour/xml").XmlBehaviour,f=t("./folding/xml").FoldMode,m=t("../worker/worker_client").WorkerClient,h=function(){this.HighlightRules=u,this.$behaviour=new d,this.foldingRules=new f};a.inherits(h,l),(function(){this.voidElements=s.arrayToMap([]),this.blockComment={start:"<!--",end:"-->"},this.createWorker=function(p){var g=new m(["ace"],"ace/mode/xml_worker","Worker");return g.attachToDocument(p.getDocument()),g.on("error",function(b){p.setAnnotations(b.data)}),g.on("terminate",function(){p.clearAnnotations()}),g},this.$id="ace/mode/xml"}).call(h.prototype),n.Mode=h}),ace.define("ace/mode/css_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop");t("../lib/lang");var s=t("./text_highlight_rules").TextHighlightRules,l=n.supportType="align-content|align-items|align-self|all|animation|animation-delay|animation-direction|animation-duration|animation-fill-mode|animation-iteration-count|animation-name|animation-play-state|animation-timing-function|backface-visibility|background|background-attachment|background-blend-mode|background-clip|background-color|background-image|background-origin|background-position|background-repeat|background-size|border|border-bottom|border-bottom-color|border-bottom-left-radius|border-bottom-right-radius|border-bottom-style|border-bottom-width|border-collapse|border-color|border-image|border-image-outset|border-image-repeat|border-image-slice|border-image-source|border-image-width|border-left|border-left-color|border-left-style|border-left-width|border-radius|border-right|border-right-color|border-right-style|border-right-width|border-spacing|border-style|border-top|border-top-color|border-top-left-radius|border-top-right-radius|border-top-style|border-top-width|border-width|bottom|box-shadow|box-sizing|caption-side|clear|clip|color|column-count|column-fill|column-gap|column-rule|column-rule-color|column-rule-style|column-rule-width|column-span|column-width|columns|content|counter-increment|counter-reset|cursor|direction|display|empty-cells|filter|flex|flex-basis|flex-direction|flex-flow|flex-grow|flex-shrink|flex-wrap|float|font|font-family|font-size|font-size-adjust|font-stretch|font-style|font-variant|font-weight|hanging-punctuation|height|justify-content|left|letter-spacing|line-height|list-style|list-style-image|list-style-position|list-style-type|margin|margin-bottom|margin-left|margin-right|margin-top|max-height|max-width|max-zoom|min-height|min-width|min-zoom|nav-down|nav-index|nav-left|nav-right|nav-up|opacity|order|outline|outline-color|outline-offset|outline-style|outline-width|overflow|overflow-x|overflow-y|padding|padding-bottom|padding-left|padding-right|padding-top|page-break-after|page-break-before|page-break-inside|perspective|perspective-origin|position|quotes|resize|right|tab-size|table-layout|text-align|text-align-last|text-decoration|text-decoration-color|text-decoration-line|text-decoration-style|text-indent|text-justify|text-overflow|text-shadow|text-transform|top|transform|transform-origin|transform-style|transition|transition-delay|transition-duration|transition-property|transition-timing-function|unicode-bidi|user-select|user-zoom|vertical-align|visibility|white-space|width|word-break|word-spacing|word-wrap|z-index",u=n.supportFunction="rgb|rgba|url|attr|counter|counters",d=n.supportConstant="absolute|after-edge|after|all-scroll|all|alphabetic|always|antialiased|armenian|auto|avoid-column|avoid-page|avoid|balance|baseline|before-edge|before|below|bidi-override|block-line-height|block|bold|bolder|border-box|both|bottom|box|break-all|break-word|capitalize|caps-height|caption|center|central|char|circle|cjk-ideographic|clone|close-quote|col-resize|collapse|column|consider-shifts|contain|content-box|cover|crosshair|cubic-bezier|dashed|decimal-leading-zero|decimal|default|disabled|disc|disregard-shifts|distribute-all-lines|distribute-letter|distribute-space|distribute|dotted|double|e-resize|ease-in|ease-in-out|ease-out|ease|ellipsis|end|exclude-ruby|fill|fixed|georgian|glyphs|grid-height|groove|hand|hanging|hebrew|help|hidden|hiragana-iroha|hiragana|horizontal|icon|ideograph-alpha|ideograph-numeric|ideograph-parenthesis|ideograph-space|ideographic|inactive|include-ruby|inherit|initial|inline-block|inline-box|inline-line-height|inline-table|inline|inset|inside|inter-ideograph|inter-word|invert|italic|justify|katakana-iroha|katakana|keep-all|last|left|lighter|line-edge|line-through|line|linear|list-item|local|loose|lower-alpha|lower-greek|lower-latin|lower-roman|lowercase|lr-tb|ltr|mathematical|max-height|max-size|medium|menu|message-box|middle|move|n-resize|ne-resize|newspaper|no-change|no-close-quote|no-drop|no-open-quote|no-repeat|none|normal|not-allowed|nowrap|nw-resize|oblique|open-quote|outset|outside|overline|padding-box|page|pointer|pre-line|pre-wrap|pre|preserve-3d|progress|relative|repeat-x|repeat-y|repeat|replaced|reset-size|ridge|right|round|row-resize|rtl|s-resize|scroll|se-resize|separate|slice|small-caps|small-caption|solid|space|square|start|static|status-bar|step-end|step-start|steps|stretch|strict|sub|super|sw-resize|table-caption|table-cell|table-column-group|table-column|table-footer-group|table-header-group|table-row-group|table-row|table|tb-rl|text-after-edge|text-before-edge|text-bottom|text-size|text-top|text|thick|thin|transparent|underline|upper-alpha|upper-latin|upper-roman|uppercase|use-script|vertical-ideographic|vertical-text|visible|w-resize|wait|whitespace|z-index|zero|zoom",f=n.supportConstantColor="aliceblue|antiquewhite|aqua|aquamarine|azure|beige|bisque|black|blanchedalmond|blue|blueviolet|brown|burlywood|cadetblue|chartreuse|chocolate|coral|cornflowerblue|cornsilk|crimson|cyan|darkblue|darkcyan|darkgoldenrod|darkgray|darkgreen|darkgrey|darkkhaki|darkmagenta|darkolivegreen|darkorange|darkorchid|darkred|darksalmon|darkseagreen|darkslateblue|darkslategray|darkslategrey|darkturquoise|darkviolet|deeppink|deepskyblue|dimgray|dimgrey|dodgerblue|firebrick|floralwhite|forestgreen|fuchsia|gainsboro|ghostwhite|gold|goldenrod|gray|green|greenyellow|grey|honeydew|hotpink|indianred|indigo|ivory|khaki|lavender|lavenderblush|lawngreen|lemonchiffon|lightblue|lightcoral|lightcyan|lightgoldenrodyellow|lightgray|lightgreen|lightgrey|lightpink|lightsalmon|lightseagreen|lightskyblue|lightslategray|lightslategrey|lightsteelblue|lightyellow|lime|limegreen|linen|magenta|maroon|mediumaquamarine|mediumblue|mediumorchid|mediumpurple|mediumseagreen|mediumslateblue|mediumspringgreen|mediumturquoise|mediumvioletred|midnightblue|mintcream|mistyrose|moccasin|navajowhite|navy|oldlace|olive|olivedrab|orange|orangered|orchid|palegoldenrod|palegreen|paleturquoise|palevioletred|papayawhip|peachpuff|peru|pink|plum|powderblue|purple|rebeccapurple|red|rosybrown|royalblue|saddlebrown|salmon|sandybrown|seagreen|seashell|sienna|silver|skyblue|slateblue|slategray|slategrey|snow|springgreen|steelblue|tan|teal|thistle|tomato|turquoise|violet|wheat|white|whitesmoke|yellow|yellowgreen",m=n.supportConstantFonts="arial|century|comic|courier|cursive|fantasy|garamond|georgia|helvetica|impact|lucida|symbol|system|tahoma|times|trebuchet|utopia|verdana|webdings|sans-serif|serif|monospace",h=n.numRe="\\-?(?:(?:[0-9]+(?:\\.[0-9]+)?)|(?:\\.[0-9]+))",p=n.pseudoElements="(\\:+)\\b(after|before|first-letter|first-line|moz-selection|selection)\\b",g=n.pseudoClasses="(:)\\b(active|checked|disabled|empty|enabled|first-child|first-of-type|focus|hover|indeterminate|invalid|last-child|last-of-type|link|not|nth-child|nth-last-child|nth-last-of-type|nth-of-type|only-child|only-of-type|required|root|target|valid|visited)\\b",b=function(){var v=this.createKeywordMapper({"support.function":u,"support.constant":d,"support.type":l,"support.constant.color":f,"support.constant.fonts":m},"text",!0);this.$rules={start:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"ruleset"},{token:"paren.rparen",regex:"\\}"},{token:"string",regex:"@(?!viewport)",next:"media"},{token:"keyword",regex:"#[a-z0-9-_]+"},{token:"keyword",regex:"%"},{token:"variable",regex:"\\.[a-z0-9-_]+"},{token:"string",regex:":[a-z0-9-_]+"},{token:"constant.numeric",regex:h},{token:"constant",regex:"[a-z0-9-_]+"},{caseInsensitive:!0}],media:[{include:["strings","url","comments"]},{token:"paren.lparen",regex:"\\{",next:"start"},{token:"paren.rparen",regex:"\\}",next:"start"},{token:"string",regex:";",next:"start"},{token:"keyword",regex:"(?:media|supports|document|charset|import|namespace|media|supports|document|page|font|keyframes|viewport|counter-style|font-feature-values|swash|ornaments|annotation|stylistic|styleset|character-variant)"}],comments:[{token:"comment",regex:"\\/\\*",push:[{token:"comment",regex:"\\*\\/",next:"pop"},{defaultToken:"comment"}]}],ruleset:[{regex:"-(webkit|ms|moz|o)-",token:"text"},{token:"punctuation.operator",regex:"[:;]"},{token:"paren.rparen",regex:"\\}",next:"start"},{include:["strings","url","comments"]},{token:["constant.numeric","keyword"],regex:"("+h+")(ch|cm|deg|em|ex|fr|gd|grad|Hz|in|kHz|mm|ms|pc|pt|px|rad|rem|s|turn|vh|vmax|vmin|vm|vw|%)"},{token:"constant.numeric",regex:h},{token:"constant.numeric",regex:"#[a-f0-9]{6}"},{token:"constant.numeric",regex:"#[a-f0-9]{3}"},{token:["punctuation","entity.other.attribute-name.pseudo-element.css"],regex:p},{token:["punctuation","entity.other.attribute-name.pseudo-class.css"],regex:g},{include:"url"},{token:v,regex:"\\-?[a-zA-Z_][a-zA-Z0-9_\\-]*"},{caseInsensitive:!0}],url:[{token:"support.function",regex:"(?:url(:?-prefix)?|domain|regexp)\\(",push:[{token:"support.function",regex:"\\)",next:"pop"},{defaultToken:"string"}]}],strings:[{token:"string.start",regex:"'",push:[{token:"string.end",regex:"'|$",next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]},{token:"string.start",regex:'"',push:[{token:"string.end",regex:'"|$',next:"pop"},{include:"escapes"},{token:"constant.language.escape",regex:/\\$/,consumeLineEnd:!0},{defaultToken:"string"}]}],escapes:[{token:"constant.language.escape",regex:/\\([a-fA-F\d]{1,6}|[^a-fA-F\d])/}]},this.normalizeRules()};a.inherits(b,s),n.CssHighlightRules=b}),ace.define("ace/mode/css_completions",["require","exports","module"],function(t,n,r){var a={background:{"#$0":1},"background-color":{"#$0":1,transparent:1,fixed:1},"background-image":{"url('/$0')":1},"background-repeat":{repeat:1,"repeat-x":1,"repeat-y":1,"no-repeat":1,inherit:1},"background-position":{bottom:2,center:2,left:2,right:2,top:2,inherit:2},"background-attachment":{scroll:1,fixed:1},"background-size":{cover:1,contain:1},"background-clip":{"border-box":1,"padding-box":1,"content-box":1},"background-origin":{"border-box":1,"padding-box":1,"content-box":1},border:{"solid $0":1,"dashed $0":1,"dotted $0":1,"#$0":1},"border-color":{"#$0":1},"border-style":{solid:2,dashed:2,dotted:2,double:2,groove:2,hidden:2,inherit:2,inset:2,none:2,outset:2,ridged:2},"border-collapse":{collapse:1,separate:1},bottom:{px:1,em:1,"%":1},clear:{left:1,right:1,both:1,none:1},color:{"#$0":1,"rgb(#$00,0,0)":1},cursor:{default:1,pointer:1,move:1,text:1,wait:1,help:1,progress:1,"n-resize":1,"ne-resize":1,"e-resize":1,"se-resize":1,"s-resize":1,"sw-resize":1,"w-resize":1,"nw-resize":1},display:{none:1,block:1,inline:1,"inline-block":1,"table-cell":1},"empty-cells":{show:1,hide:1},float:{left:1,right:1,none:1},"font-family":{Arial:2,"Comic Sans MS":2,Consolas:2,"Courier New":2,Courier:2,Georgia:2,Monospace:2,"Sans-Serif":2,"Segoe UI":2,Tahoma:2,"Times New Roman":2,"Trebuchet MS":2,Verdana:1},"font-size":{px:1,em:1,"%":1},"font-weight":{bold:1,normal:1},"font-style":{italic:1,normal:1},"font-variant":{normal:1,"small-caps":1},height:{px:1,em:1,"%":1},left:{px:1,em:1,"%":1},"letter-spacing":{normal:1},"line-height":{normal:1},"list-style-type":{none:1,disc:1,circle:1,square:1,decimal:1,"decimal-leading-zero":1,"lower-roman":1,"upper-roman":1,"lower-greek":1,"lower-latin":1,"upper-latin":1,georgian:1,"lower-alpha":1,"upper-alpha":1},margin:{px:1,em:1,"%":1},"margin-right":{px:1,em:1,"%":1},"margin-left":{px:1,em:1,"%":1},"margin-top":{px:1,em:1,"%":1},"margin-bottom":{px:1,em:1,"%":1},"max-height":{px:1,em:1,"%":1},"max-width":{px:1,em:1,"%":1},"min-height":{px:1,em:1,"%":1},"min-width":{px:1,em:1,"%":1},overflow:{hidden:1,visible:1,auto:1,scroll:1},"overflow-x":{hidden:1,visible:1,auto:1,scroll:1},"overflow-y":{hidden:1,visible:1,auto:1,scroll:1},padding:{px:1,em:1,"%":1},"padding-top":{px:1,em:1,"%":1},"padding-right":{px:1,em:1,"%":1},"padding-bottom":{px:1,em:1,"%":1},"padding-left":{px:1,em:1,"%":1},"page-break-after":{auto:1,always:1,avoid:1,left:1,right:1},"page-break-before":{auto:1,always:1,avoid:1,left:1,right:1},position:{absolute:1,relative:1,fixed:1,static:1},right:{px:1,em:1,"%":1},"table-layout":{fixed:1,auto:1},"text-decoration":{none:1,underline:1,"line-through":1,blink:1},"text-align":{left:1,right:1,center:1,justify:1},"text-transform":{capitalize:1,uppercase:1,lowercase:1,none:1},top:{px:1,em:1,"%":1},"vertical-align":{top:1,bottom:1},visibility:{hidden:1,visible:1},"white-space":{nowrap:1,normal:1,pre:1,"pre-line":1,"pre-wrap":1},width:{px:1,em:1,"%":1},"word-spacing":{normal:1},filter:{"alpha(opacity=$0100)":1},"text-shadow":{"$02px 2px 2px #777":1},"text-overflow":{"ellipsis-word":1,clip:1,ellipsis:1},"-moz-border-radius":1,"-moz-border-radius-topright":1,"-moz-border-radius-bottomright":1,"-moz-border-radius-topleft":1,"-moz-border-radius-bottomleft":1,"-webkit-border-radius":1,"-webkit-border-top-right-radius":1,"-webkit-border-top-left-radius":1,"-webkit-border-bottom-right-radius":1,"-webkit-border-bottom-left-radius":1,"-moz-box-shadow":1,"-webkit-box-shadow":1,transform:{"rotate($00deg)":1,"skew($00deg)":1},"-moz-transform":{"rotate($00deg)":1,"skew($00deg)":1},"-webkit-transform":{"rotate($00deg)":1,"skew($00deg)":1}},s=function(){};(function(){this.completionsDefined=!1,this.defineCompletions=function(){if(document){var l=document.createElement("c").style;for(var u in l)if(typeof l[u]=="string"){var d=u.replace(/[A-Z]/g,function(f){return"-"+f.toLowerCase()});a.hasOwnProperty(d)||(a[d]=1)}}this.completionsDefined=!0},this.getCompletions=function(l,u,d,f){if(this.completionsDefined||this.defineCompletions(),l==="ruleset"||u.$mode.$id=="ace/mode/scss"){var m=u.getLine(d.row).substr(0,d.column);return/:[^;]+$/.test(m)?this.getPropertyValueCompletions(l,u,d,f):this.getPropertyCompletions(l,u,d,f)}return[]},this.getPropertyCompletions=function(l,u,d,f){var m=Object.keys(a);return m.map(function(h){return{caption:h,snippet:h+": $0;",meta:"property",score:1e6}})},this.getPropertyValueCompletions=function(l,u,d,f){var m=u.getLine(d.row).substr(0,d.column),h=(/([\w\-]+):[^:]*$/.exec(m)||{})[1];if(!h)return[];var p=[];return h in a&&typeof a[h]=="object"&&(p=Object.keys(a[h])),p.map(function(g){return{caption:g,snippet:g,meta:"property value",score:1e6}})}}).call(s.prototype),n.CssCompletions=s}),ace.define("ace/mode/behaviour/css",["require","exports","module","ace/lib/oop","ace/mode/behaviour","ace/mode/behaviour/cstyle","ace/token_iterator"],function(t,n,r){var a=t("../../lib/oop");t("../behaviour").Behaviour;var s=t("./cstyle").CstyleBehaviour,l=t("../../token_iterator").TokenIterator,u=function(){this.inherit(s),this.add("colon","insertion",function(d,f,m,h,p){if(p===":"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=new l(h,g.row,g.column),v=b.getCurrentToken();if(v&&v.value.match(/\s+/)&&(v=b.stepBackward()),v&&v.type==="support.type"){var y=h.doc.getLine(g.row),C=y.substring(g.column,g.column+1);if(C===":")return{text:"",selection:[1,1]};if(/^(\s+[^;]|\s*$)/.test(y.substring(g.column)))return{text:":;",selection:[1,1]}}}}),this.add("colon","deletion",function(d,f,m,h,p){var g=h.doc.getTextRange(p);if(!p.isMultiLine()&&g===":"){var b=m.getCursorPosition(),v=new l(h,b.row,b.column),y=v.getCurrentToken();if(y&&y.value.match(/\s+/)&&(y=v.stepBackward()),y&&y.type==="support.type"){var C=h.doc.getLine(p.start.row),E=C.substring(p.end.column,p.end.column+1);if(E===";")return p.end.column++,p}}}),this.add("semicolon","insertion",function(d,f,m,h,p){if(p===";"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=h.doc.getLine(g.row),v=b.substring(g.column,g.column+1);if(v===";")return{text:"",selection:[1,1]}}}),this.add("!important","insertion",function(d,f,m,h,p){if(p==="!"&&m.selection.isEmpty()){var g=m.getCursorPosition(),b=h.doc.getLine(g.row);if(/^\s*(;|}|$)/.test(b.substring(g.column)))return{text:"!important",selection:[10,10]}}})};a.inherits(u,s),n.CssBehaviour=u}),ace.define("ace/mode/css",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/css_highlight_rules","ace/mode/matching_brace_outdent","ace/worker/worker_client","ace/mode/css_completions","ace/mode/behaviour/css","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./css_highlight_rules").CssHighlightRules,u=t("./matching_brace_outdent").MatchingBraceOutdent,d=t("../worker/worker_client").WorkerClient,f=t("./css_completions").CssCompletions,m=t("./behaviour/css").CssBehaviour,h=t("./folding/cstyle").FoldMode,p=function(){this.HighlightRules=l,this.$outdent=new u,this.$behaviour=new m,this.$completer=new f,this.foldingRules=new h};a.inherits(p,s),(function(){this.foldingRules="cStyle",this.blockComment={start:"/*",end:"*/"},this.getNextLineIndent=function(g,b,v){var y=this.$getIndent(b),C=this.getTokenizer().getLineTokens(b,g).tokens;if(C.length&&C[C.length-1].type=="comment")return y;var E=b.match(/^.*\{\s*$/);return E&&(y+=v),y},this.checkOutdent=function(g,b,v){return this.$outdent.checkOutdent(b,v)},this.autoOutdent=function(g,b,v){this.$outdent.autoOutdent(b,v)},this.getCompletions=function(g,b,v,y){return this.$completer.getCompletions(g,b,v,y)},this.createWorker=function(g){var b=new d(["ace"],"ace/mode/css_worker","Worker");return b.attachToDocument(g.getDocument()),b.on("annotate",function(v){g.setAnnotations(v.data)}),b.on("terminate",function(){g.clearAnnotations()}),b},this.$id="ace/mode/css",this.snippetFileId="ace/snippets/css"}).call(p.prototype),n.Mode=p}),ace.define("ace/mode/html_highlight_rules",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/css_highlight_rules","ace/mode/javascript_highlight_rules","ace/mode/xml_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./css_highlight_rules").CssHighlightRules,u=t("./javascript_highlight_rules").JavaScriptHighlightRules,d=t("./xml_highlight_rules").XmlHighlightRules,f=s.createMap({a:"anchor",button:"form",form:"form",img:"image",input:"form",label:"form",option:"form",script:"script",select:"form",textarea:"form",style:"style",table:"table",tbody:"table",td:"table",tfoot:"table",th:"table",tr:"table"}),m=function(){d.call(this),this.addRules({attributes:[{include:"tag_whitespace"},{token:"entity.other.attribute-name.xml",regex:"[-_a-zA-Z0-9:.]+"},{token:"keyword.operator.attribute-equals.xml",regex:"=",push:[{include:"tag_whitespace"},{token:"string.unquoted.attribute-value.html",regex:"[^<>='\"`\\s]+",next:"pop"},{token:"empty",regex:"",next:"pop"}]},{include:"attribute_value"}],tag:[{token:function(h,p){var g=f[p];return["meta.tag.punctuation."+(h=="<"?"":"end-")+"tag-open.xml","meta.tag"+(g?"."+g:"")+".tag-name.xml"]},regex:"(</?)([-_a-zA-Z0-9:.]+)",next:"tag_stuff"}],tag_stuff:[{include:"attributes"},{token:"meta.tag.punctuation.tag-close.xml",regex:"/?>",next:"start"}]}),this.embedTagRules(l,"css-","style"),this.embedTagRules(new u({jsx:!1}).getRules(),"js-","script"),this.constructor===m&&this.normalizeRules()};a.inherits(m,d),n.HtmlHighlightRules=m}),ace.define("ace/mode/folding/mixed",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode"],function(t,n,r){var a=t("../../lib/oop"),s=t("./fold_mode").FoldMode,l=n.FoldMode=function(u,d){this.defaultMode=u,this.subModes=d};a.inherits(l,s),(function(){this.$getMode=function(u){typeof u!="string"&&(u=u[0]);for(var d in this.subModes)if(u.indexOf(d)===0)return this.subModes[d];return null},this.$tryMode=function(u,d,f,m){var h=this.$getMode(u);return h?h.getFoldWidget(d,f,m):""},this.getFoldWidget=function(u,d,f){return this.$tryMode(u.getState(f-1),u,d,f)||this.$tryMode(u.getState(f),u,d,f)||this.defaultMode.getFoldWidget(u,d,f)},this.getFoldWidgetRange=function(u,d,f){var m=this.$getMode(u.getState(f-1));return(!m||!m.getFoldWidget(u,d,f))&&(m=this.$getMode(u.getState(f))),(!m||!m.getFoldWidget(u,d,f))&&(m=this.defaultMode),m.getFoldWidgetRange(u,d,f)}}).call(l.prototype)}),ace.define("ace/mode/folding/html",["require","exports","module","ace/lib/oop","ace/mode/folding/mixed","ace/mode/folding/xml","ace/mode/folding/cstyle"],function(t,n,r){var a=t("../../lib/oop"),s=t("./mixed").FoldMode,l=t("./xml").FoldMode,u=t("./cstyle").FoldMode,d=n.FoldMode=function(f,m){s.call(this,new l(f,m),{"js-":new u,"css-":new u})};a.inherits(d,s)}),ace.define("ace/mode/html_completions",["require","exports","module","ace/token_iterator"],function(t,n,r){var a=t("../token_iterator").TokenIterator,s=["accesskey","class","contenteditable","contextmenu","dir","draggable","dropzone","hidden","id","inert","itemid","itemprop","itemref","itemscope","itemtype","lang","spellcheck","style","tabindex","title","translate"],l=["onabort","onblur","oncancel","oncanplay","oncanplaythrough","onchange","onclick","onclose","oncontextmenu","oncuechange","ondblclick","ondrag","ondragend","ondragenter","ondragleave","ondragover","ondragstart","ondrop","ondurationchange","onemptied","onended","onerror","onfocus","oninput","oninvalid","onkeydown","onkeypress","onkeyup","onload","onloadeddata","onloadedmetadata","onloadstart","onmousedown","onmousemove","onmouseout","onmouseover","onmouseup","onmousewheel","onpause","onplay","onplaying","onprogress","onratechange","onreset","onscroll","onseeked","onseeking","onselect","onshow","onstalled","onsubmit","onsuspend","ontimeupdate","onvolumechange","onwaiting"],u=s.concat(l),d={a:{href:1,target:{_blank:1,top:1},ping:1,rel:{nofollow:1,alternate:1,author:1,bookmark:1,help:1,license:1,next:1,noreferrer:1,prefetch:1,prev:1,search:1,tag:1},media:1,hreflang:1,type:1},abbr:{},address:{},area:{shape:1,coords:1,href:1,hreflang:1,alt:1,target:1,media:1,rel:1,ping:1,type:1},article:{pubdate:1},aside:{},audio:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},muted:{muted:1},preload:{auto:1,metadata:1,none:1}},b:{},base:{href:1,target:1},bdi:{},bdo:{},blockquote:{cite:1},body:{onafterprint:1,onbeforeprint:1,onbeforeunload:1,onhashchange:1,onmessage:1,onoffline:1,onpopstate:1,onredo:1,onresize:1,onstorage:1,onundo:1,onunload:1},br:{},button:{autofocus:1,disabled:{disabled:1},form:1,formaction:1,formenctype:1,formmethod:1,formnovalidate:1,formtarget:1,name:1,value:1,type:{button:1,submit:1}},canvas:{width:1,height:1},caption:{},cite:{},code:{},col:{span:1},colgroup:{span:1},command:{type:1,label:1,icon:1,disabled:1,checked:1,radiogroup:1,command:1},data:{},datalist:{},dd:{},del:{cite:1,datetime:1},details:{open:1},dfn:{},dialog:{open:1},div:{},dl:{},dt:{},em:{},embed:{src:1,height:1,width:1,type:1},fieldset:{disabled:1,form:1,name:1},figcaption:{},figure:{},footer:{},form:{"accept-charset":1,action:1,autocomplete:1,enctype:{"multipart/form-data":1,"application/x-www-form-urlencoded":1},method:{get:1,post:1},name:1,novalidate:1,target:{_blank:1,top:1}},h1:{},h2:{},h3:{},h4:{},h5:{},h6:{},head:{},header:{},hr:{},html:{manifest:1},i:{},iframe:{name:1,src:1,height:1,width:1,sandbox:{"allow-same-origin":1,"allow-top-navigation":1,"allow-forms":1,"allow-scripts":1},seamless:{seamless:1}},img:{alt:1,src:1,height:1,width:1,usemap:1,ismap:1},input:{type:{text:1,password:1,hidden:1,checkbox:1,submit:1,radio:1,file:1,button:1,reset:1,image:31,color:1,date:1,datetime:1,"datetime-local":1,email:1,month:1,number:1,range:1,search:1,tel:1,time:1,url:1,week:1},accept:1,alt:1,autocomplete:{on:1,off:1},autofocus:{autofocus:1},checked:{checked:1},disabled:{disabled:1},form:1,formaction:1,formenctype:{"application/x-www-form-urlencoded":1,"multipart/form-data":1,"text/plain":1},formmethod:{get:1,post:1},formnovalidate:{formnovalidate:1},formtarget:{_blank:1,_self:1,_parent:1,_top:1},height:1,list:1,max:1,maxlength:1,min:1,multiple:{multiple:1},name:1,pattern:1,placeholder:1,readonly:{readonly:1},required:{required:1},size:1,src:1,step:1,width:1,files:1,value:1},ins:{cite:1,datetime:1},kbd:{},keygen:{autofocus:1,challenge:{challenge:1},disabled:{disabled:1},form:1,keytype:{rsa:1,dsa:1,ec:1},name:1},label:{form:1,for:1},legend:{},li:{value:1},link:{href:1,hreflang:1,rel:{stylesheet:1,icon:1},media:{all:1,screen:1,print:1},type:{"text/css":1,"image/png":1,"image/jpeg":1,"image/gif":1},sizes:1},main:{},map:{name:1},mark:{},math:{},menu:{type:1,label:1},meta:{"http-equiv":{"content-type":1},name:{description:1,keywords:1},content:{"text/html; charset=UTF-8":1},charset:1},meter:{value:1,min:1,max:1,low:1,high:1,optimum:1},nav:{},noscript:{href:1},object:{param:1,data:1,type:1,height:1,width:1,usemap:1,name:1,form:1,classid:1},ol:{start:1,reversed:1},optgroup:{disabled:1,label:1},option:{disabled:1,selected:1,label:1,value:1},output:{for:1,form:1,name:1},p:{},param:{name:1,value:1},pre:{},progress:{value:1,max:1},q:{cite:1},rp:{},rt:{},ruby:{},s:{},samp:{},script:{charset:1,type:{"text/javascript":1},src:1,defer:1,async:1},select:{autofocus:1,disabled:1,form:1,multiple:{multiple:1},name:1,size:1,readonly:{readonly:1}},small:{},source:{src:1,type:1,media:1},span:{},strong:{},style:{type:1,media:{all:1,screen:1,print:1},scoped:1},sub:{},sup:{},svg:{},table:{summary:1},tbody:{},td:{headers:1,rowspan:1,colspan:1},textarea:{autofocus:{autofocus:1},disabled:{disabled:1},form:1,maxlength:1,name:1,placeholder:1,readonly:{readonly:1},required:{required:1},rows:1,cols:1,wrap:{on:1,off:1,hard:1,soft:1}},tfoot:{},th:{headers:1,rowspan:1,colspan:1,scope:1},thead:{},time:{datetime:1},title:{},tr:{},track:{kind:1,src:1,srclang:1,label:1,default:1},section:{},summary:{},u:{},ul:{},var:{},video:{src:1,autobuffer:1,autoplay:{autoplay:1},loop:{loop:1},controls:{controls:1},width:1,height:1,poster:1,muted:{muted:1},preload:{auto:1,metadata:1,none:1}},wbr:{}},f=Object.keys(d);function m(b,v){return b.type.lastIndexOf(v+".xml")>-1}function h(b,v){for(var y=new a(b,v.row,v.column),C=y.getCurrentToken();C&&!m(C,"tag-name");)C=y.stepBackward();if(C)return C.value}function p(b,v){for(var y=new a(b,v.row,v.column),C=y.getCurrentToken();C&&!m(C,"attribute-name");)C=y.stepBackward();if(C)return C.value}var g=function(){};(function(){this.getCompletions=function(b,v,y,C){var E=v.getTokenAt(y.row,y.column);if(!E)return[];if(m(E,"tag-name")||m(E,"tag-open")||m(E,"end-tag-open"))return this.getTagCompletions(b,v,y,C);if(m(E,"tag-whitespace")||m(E,"attribute-name"))return this.getAttributeCompletions(b,v,y,C);if(m(E,"attribute-value"))return this.getAttributeValueCompletions(b,v,y,C);var A=v.getLine(y.row).substr(0,y.column);return/&[a-z]*$/i.test(A)?this.getHTMLEntityCompletions(b,v,y,C):[]},this.getTagCompletions=function(b,v,y,C){return f.map(function(E){return{value:E,meta:"tag",score:1e6}})},this.getAttributeCompletions=function(b,v,y,C){var E=h(v,y);if(!E)return[];var A=u;return E in d&&(A=A.concat(Object.keys(d[E]))),A.map(function(k){return{caption:k,snippet:k+'="$0"',meta:"attribute",score:1e6}})},this.getAttributeValueCompletions=function(b,v,y,C){var E=h(v,y),A=p(v,y);if(!E)return[];var k=[];return E in d&&A in d[E]&&typeof d[E][A]=="object"&&(k=Object.keys(d[E][A])),k.map(function(T){return{caption:T,snippet:T,meta:"attribute value",score:1e6}})},this.getHTMLEntityCompletions=function(b,v,y,C){var E=["Aacute;","aacute;","Acirc;","acirc;","acute;","AElig;","aelig;","Agrave;","agrave;","alefsym;","Alpha;","alpha;","amp;","and;","ang;","Aring;","aring;","asymp;","Atilde;","atilde;","Auml;","auml;","bdquo;","Beta;","beta;","brvbar;","bull;","cap;","Ccedil;","ccedil;","cedil;","cent;","Chi;","chi;","circ;","clubs;","cong;","copy;","crarr;","cup;","curren;","Dagger;","dagger;","dArr;","darr;","deg;","Delta;","delta;","diams;","divide;","Eacute;","eacute;","Ecirc;","ecirc;","Egrave;","egrave;","empty;","emsp;","ensp;","Epsilon;","epsilon;","equiv;","Eta;","eta;","ETH;","eth;","Euml;","euml;","euro;","exist;","fnof;","forall;","frac12;","frac14;","frac34;","frasl;","Gamma;","gamma;","ge;","gt;","hArr;","harr;","hearts;","hellip;","Iacute;","iacute;","Icirc;","icirc;","iexcl;","Igrave;","igrave;","image;","infin;","int;","Iota;","iota;","iquest;","isin;","Iuml;","iuml;","Kappa;","kappa;","Lambda;","lambda;","lang;","laquo;","lArr;","larr;","lceil;","ldquo;","le;","lfloor;","lowast;","loz;","lrm;","lsaquo;","lsquo;","lt;","macr;","mdash;","micro;","middot;","minus;","Mu;","mu;","nabla;","nbsp;","ndash;","ne;","ni;","not;","notin;","nsub;","Ntilde;","ntilde;","Nu;","nu;","Oacute;","oacute;","Ocirc;","ocirc;","OElig;","oelig;","Ograve;","ograve;","oline;","Omega;","omega;","Omicron;","omicron;","oplus;","or;","ordf;","ordm;","Oslash;","oslash;","Otilde;","otilde;","otimes;","Ouml;","ouml;","para;","part;","permil;","perp;","Phi;","phi;","Pi;","pi;","piv;","plusmn;","pound;","Prime;","prime;","prod;","prop;","Psi;","psi;","quot;","radic;","rang;","raquo;","rArr;","rarr;","rceil;","rdquo;","real;","reg;","rfloor;","Rho;","rho;","rlm;","rsaquo;","rsquo;","sbquo;","Scaron;","scaron;","sdot;","sect;","shy;","Sigma;","sigma;","sigmaf;","sim;","spades;","sub;","sube;","sum;","sup;","sup1;","sup2;","sup3;","supe;","szlig;","Tau;","tau;","there4;","Theta;","theta;","thetasym;","thinsp;","THORN;","thorn;","tilde;","times;","trade;","Uacute;","uacute;","uArr;","uarr;","Ucirc;","ucirc;","Ugrave;","ugrave;","uml;","upsih;","Upsilon;","upsilon;","Uuml;","uuml;","weierp;","Xi;","xi;","Yacute;","yacute;","yen;","Yuml;","yuml;","Zeta;","zeta;","zwj;","zwnj;"];return E.map(function(A){return{caption:A,snippet:A,meta:"html entity",score:1e6}})}}).call(g.prototype),n.HtmlCompletions=g}),ace.define("ace/mode/html",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/mode/text","ace/mode/javascript","ace/mode/css","ace/mode/html_highlight_rules","ace/mode/behaviour/xml","ace/mode/folding/html","ace/mode/html_completions","ace/worker/worker_client"],function(t,n,r){var a=t("../lib/oop"),s=t("../lib/lang"),l=t("./text").Mode,u=t("./javascript").Mode,d=t("./css").Mode,f=t("./html_highlight_rules").HtmlHighlightRules,m=t("./behaviour/xml").XmlBehaviour,h=t("./folding/html").FoldMode,p=t("./html_completions").HtmlCompletions,g=t("../worker/worker_client").WorkerClient,b=["area","base","br","col","embed","hr","img","input","keygen","link","meta","menuitem","param","source","track","wbr"],v=["li","dt","dd","p","rt","rp","optgroup","option","colgroup","td","th"],y=function(C){this.fragmentContext=C&&C.fragmentContext,this.HighlightRules=f,this.$behaviour=new m,this.$completer=new p,this.createModeDelegates({"js-":u,"css-":d}),this.foldingRules=new h(this.voidElements,s.arrayToMap(v))};a.inherits(y,l),(function(){this.blockComment={start:"<!--",end:"-->"},this.voidElements=s.arrayToMap(b),this.getNextLineIndent=function(C,E,A){return this.$getIndent(E)},this.checkOutdent=function(C,E,A){return!1},this.getCompletions=function(C,E,A,k){return this.$completer.getCompletions(C,E,A,k)},this.createWorker=function(C){if(this.constructor==y){var E=new g(["ace"],"ace/mode/html_worker","Worker");return E.attachToDocument(C.getDocument()),this.fragmentContext&&E.call("setOptions",[{context:this.fragmentContext}]),E.on("error",function(A){C.setAnnotations(A.data)}),E.on("terminate",function(){C.clearAnnotations()}),E}},this.$id="ace/mode/html",this.snippetFileId="ace/snippets/html"}).call(y.prototype),n.Mode=y}),ace.define("ace/mode/markdown_highlight_rules",["require","exports","module","ace/config","ace/lib/oop","ace/lib/lang","ace/mode/text_highlight_rules","ace/mode/html_highlight_rules"],function(t,n,r){var a=t("../config").$modes,s=t("../lib/oop"),l=t("../lib/lang"),u=t("./text_highlight_rules").TextHighlightRules,d=t("./html_highlight_rules").HtmlHighlightRules,f=function(h){return"(?:[^"+l.escapeRegExp(h)+"\\\\]|\\\\.)*"},m=function(){d.call(this);var h={token:"support.function",regex:/^\s*(```+[^`]*|~~~+[^~]*)$/,onMatch:function(g,b,v,y){var C=g.match(/^(\s*)([`~]+)(.*)/),E=/[\w-]+|$/.exec(C[3])[0];return a[E]||(E=""),v.unshift("githubblock",[],[C[1],C[2],E],b),this.token},next:"githubblock"},p=[{token:"support.function",regex:".*",onMatch:function(g,b,v,y){var C=v[1],E=v[2][0],A=v[2][1],k=v[2][2],T=/^(\s*)(`+|~+)\s*$/.exec(g);if(T&&T[1].length<E.length+3&&T[2].length>=A.length&&T[2][0]==A[0])return v.splice(0,3),this.next=v.shift(),this.token;if(this.next="",k&&a[k]){var $=a[k].getTokenizer().getLineTokens(g,C.slice(0));return v[1]=$.state,$.tokens}return this.token}}];this.$rules.start.unshift({token:"empty_line",regex:"^$",next:"allowBlock"},{token:"markup.heading.1",regex:"^=+(?=\\s*$)"},{token:"markup.heading.2",regex:"^\\-+(?=\\s*$)"},{token:function(g){return"markup.heading."+g.length},regex:/^#{1,6}(?=\s|$)/,next:"header"},h,{token:"string.blockquote",regex:"^\\s*>\\s*(?:[*+-]|\\d+\\.)?\\s+",next:"blockquote"},{token:"constant",regex:"^ {0,3}(?:(?:\\* ?){3,}|(?:\\- ?){3,}|(?:\\_ ?){3,})\\s*$",next:"allowBlock"},{token:"markup.list",regex:"^\\s{0,3}(?:[*+-]|\\d+\\.)\\s+",next:"listblock-start"},{include:"basic"}),this.addRules({basic:[{token:"constant.language.escape",regex:/\\[\\`*_{}\[\]()#+\-.!]/},{token:"support.function",regex:"(`+)(.*?[^`])(\\1)"},{token:["text","constant","text","url","string","text"],regex:'^([ ]{0,3}\\[)([^\\]]+)(\\]:\\s*)([^ ]+)(\\s*(?:["][^"]+["])?(\\s*))$'},{token:["text","string","text","constant","text"],regex:"(\\[)("+f("]")+")(\\]\\s*\\[)("+f("]")+")(\\])"},{token:["text","string","text","markup.underline","string","text"],regex:"(\\!?\\[)("+f("]")+')(\\]\\()((?:[^\\)\\s\\\\]|\\\\.|\\s(?=[^"]))*)(\\s*"'+f('"')+'"\\s*)?(\\))'},{token:"string.strong",regex:"([*]{2}|[_]{2}(?=\\S))(.*?\\S[*_]*)(\\1)"},{token:"string.emphasis",regex:"([*]|[_](?=\\S))(.*?\\S[*_]*)(\\1)"},{token:["text","url","text"],regex:`(<)((?:https?|ftp|dict):[^'">\\s]+|(?:mailto:)?[-.\\w]+\\@[-a-z0-9]+(?:\\.[-a-z0-9]+)*\\.[a-z]+)(>)`}],allowBlock:[{token:"support.function",regex:"^ {4}.+",next:"allowBlock"},{token:"empty_line",regex:"^$",next:"allowBlock"},{token:"empty",regex:"",next:"start"}],header:[{regex:"$",next:"start"},{include:"basic"},{defaultToken:"heading"}],"listblock-start":[{token:"support.variable",regex:/(?:\[[ x]\])?/,next:"listblock"}],listblock:[{token:"empty_line",regex:"^$",next:"start"},{token:"markup.list",regex:"^\\s{0,3}(?:[*+-]|\\d+\\.)\\s+",next:"listblock-start"},{include:"basic",noEscape:!0},h,{defaultToken:"list"}],blockquote:[{token:"empty_line",regex:"^\\s*$",next:"start"},{token:"string.blockquote",regex:"^\\s*>\\s*(?:[*+-]|\\d+\\.)?\\s+",next:"blockquote"},{include:"basic",noEscape:!0},{defaultToken:"string.blockquote"}],githubblock:p}),this.normalizeRules()};s.inherits(m,u),n.MarkdownHighlightRules=m}),ace.define("ace/mode/folding/markdown",["require","exports","module","ace/lib/oop","ace/mode/folding/fold_mode","ace/range"],function(t,n,r){var a=t("../../lib/oop"),s=t("./fold_mode").FoldMode,l=t("../../range").Range,u=n.FoldMode=function(){};a.inherits(u,s),(function(){this.foldingStartMarker=/^(?:[=-]+\s*$|#{1,6} |`{3})/,this.getFoldWidget=function(d,f,m){var h=d.getLine(m);return this.foldingStartMarker.test(h)?h[0]=="`"&&d.bgTokenizer.getState(m)=="start"?"end":"start":""},this.getFoldWidgetRange=function(d,f,m){var h=d.getLine(m),p=h.length,g=d.getLength(),b=m,v=m;if(!h.match(this.foldingStartMarker))return;if(h[0]=="`")if(d.bgTokenizer.getState(m)!=="start"){for(;++m<g&&(h=d.getLine(m),!(h[0]=="`"&h.substring(0,3)=="```")););return new l(b,p,m,0)}else{for(;m-- >0&&(h=d.getLine(m),!(h[0]=="`"&h.substring(0,3)=="```")););return new l(m,h.length,b,0)}var y;function C(S){return y=d.getTokens(S)[0],y&&y.type.lastIndexOf(E,0)===0}var E="markup.heading";function A(){var S=y.value[0];return S=="="?6:S=="-"?5:7-y.value.search(/[^#]|$/)}if(C(m)){for(var k=A();++m<g;)if(C(m)){var T=A();if(T>=k)break}if(v=m-(!y||["=","-"].indexOf(y.value[0])==-1?1:2),v>b)for(;v>b&&/^\s*$/.test(d.getLine(v));)v--;if(v>b){var $=d.getLine(v).length;return new l(b,p,v,$)}}}}).call(u.prototype)}),ace.define("ace/mode/sh_highlight_rules",["require","exports","module","ace/lib/oop","ace/mode/text_highlight_rules"],function(t,n,r){var a=t("../lib/oop"),s=t("./text_highlight_rules").TextHighlightRules,l=n.reservedKeywords="!|{|}|case|do|done|elif|else|esac|fi|for|if|in|then|until|while|&|;|export|local|read|typeset|unset|elif|select|set|function|declare|readonly",u=n.languageConstructs="[|]|alias|bg|bind|break|builtin|cd|command|compgen|complete|continue|dirs|disown|echo|enable|eval|exec|exit|fc|fg|getopts|hash|help|history|jobs|kill|let|logout|popd|printf|pushd|pwd|return|set|shift|shopt|source|suspend|test|times|trap|type|ulimit|umask|unalias|wait",d=function(){var f=this.createKeywordMapper({keyword:l,"support.function.builtin":u,"invalid.deprecated":"debugger"},"identifier"),m="(?:(?:[1-9]\\d*)|(?:0))",h="(?:\\.\\d+)",p="(?:\\d+)",g="(?:(?:"+p+"?"+h+")|(?:"+p+"\\.))",b="(?:(?:"+g+"|"+p+"))",v="(?:"+b+"|"+g+")",y="(?:&"+p+")",C="[a-zA-Z_][a-zA-Z0-9_]*",E="(?:"+C+"(?==))",A="(?:\\$(?:SHLVL|\\$|\\!|\\?))",k="(?:"+C+"\\s*\\(\\))";this.$rules={start:[{token:"constant",regex:/\\./},{token:["text","comment"],regex:/(^|\s)(#.*)$/},{token:"string.start",regex:'"',push:[{token:"constant.language.escape",regex:/\\(?:[$`"\\]|$)/},{include:"variables"},{token:"keyword.operator",regex:/`/},{token:"string.end",regex:'"',next:"pop"},{defaultToken:"string"}]},{token:"string",regex:"\\$'",push:[{token:"constant.language.escape",regex:/\\(?:[abeEfnrtv\\'"]|x[a-fA-F\d]{1,2}|u[a-fA-F\d]{4}([a-fA-F\d]{4})?|c.|\d{1,3})/},{token:"string",regex:"'",next:"pop"},{defaultToken:"string"}]},{regex:"<<<",token:"keyword.operator"},{stateName:"heredoc",regex:"(<<-?)(\\s*)(['\"`]?)([\\w\\-]+)(['\"`]?)",onMatch:function(T,$,S){var I=T[2]=="-"?"indentedHeredoc":"heredoc",R=T.split(this.splitRegex);return S.push(I,R[4]),[{type:"constant",value:R[1]},{type:"text",value:R[2]},{type:"string",value:R[3]},{type:"support.class",value:R[4]},{type:"string",value:R[5]}]},rules:{heredoc:[{onMatch:function(T,$,S){return T===S[1]?(S.shift(),S.shift(),this.next=S[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}],indentedHeredoc:[{token:"string",regex:"^	+"},{onMatch:function(T,$,S){return T===S[1]?(S.shift(),S.shift(),this.next=S[0]||"start","support.class"):(this.next="","string")},regex:".*$",next:"start"}]}},{regex:"$",token:"empty",next:function(T,$){return $[0]==="heredoc"||$[0]==="indentedHeredoc"?$[0]:T}},{token:["keyword","text","text","text","variable"],regex:/(declare|local|readonly)(\s+)(?:(-[fixar]+)(\s+))?([a-zA-Z_][a-zA-Z0-9_]*\b)/},{token:"variable.language",regex:A},{token:"variable",regex:E},{include:"variables"},{token:"support.function",regex:k},{token:"support.function",regex:y},{token:"string",start:"'",end:"'"},{token:"constant.numeric",regex:v},{token:"constant.numeric",regex:m+"\\b"},{token:f,regex:"[a-zA-Z_][a-zA-Z0-9_]*\\b"},{token:"keyword.operator",regex:"\\+|\\-|\\*|\\*\\*|\\/|\\/\\/|~|<|>|<=|=>|=|!=|[%&|`]"},{token:"punctuation.operator",regex:";"},{token:"paren.lparen",regex:"[\\[\\(\\{]"},{token:"paren.rparen",regex:"[\\]]"},{token:"paren.rparen",regex:"[\\)\\}]",next:"pop"}],variables:[{token:"variable",regex:/(\$)(\w+)/},{token:["variable","paren.lparen"],regex:/(\$)(\()/,push:"start"},{token:["variable","paren.lparen","keyword.operator","variable","keyword.operator"],regex:/(\$)(\{)([#!]?)(\w+|[*@#?\-$!0_])(:[?+\-=]?|##?|%%?|,,?\/|\^\^?)?/,push:"start"},{token:"variable",regex:/\$[*@#?\-$!0_]/},{token:["variable","paren.lparen"],regex:/(\$)(\{)/,push:"start"}]},this.normalizeRules()};a.inherits(d,s),n.ShHighlightRules=d}),ace.define("ace/mode/sh",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/sh_highlight_rules","ace/range","ace/mode/folding/cstyle","ace/mode/behaviour/cstyle"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode,l=t("./sh_highlight_rules").ShHighlightRules,u=t("../range").Range,d=t("./folding/cstyle").FoldMode,f=t("./behaviour/cstyle").CstyleBehaviour,m=function(){this.HighlightRules=l,this.foldingRules=new d,this.$behaviour=new f};a.inherits(m,s),(function(){this.lineCommentStart="#",this.getNextLineIndent=function(p,g,b){var v=this.$getIndent(g),y=this.getTokenizer().getLineTokens(g,p),C=y.tokens;if(C.length&&C[C.length-1].type=="comment")return v;if(p=="start"){var E=g.match(/^.*[\{\(\[:]\s*$/);E&&(v+=b)}return v};var h={pass:1,return:1,raise:1,break:1,continue:1};this.checkOutdent=function(p,g,b){if(b!==`\r
`&&b!=="\r"&&b!==`
`)return!1;var v=this.getTokenizer().getLineTokens(g.trim(),p).tokens;if(!v)return!1;do var y=v.pop();while(y&&(y.type=="comment"||y.type=="text"&&y.value.match(/^\s+$/)));return y?y.type=="keyword"&&h[y.value]:!1},this.autoOutdent=function(p,g,b){b+=1;var v=this.$getIndent(g.getLine(b)),y=g.getTabString();v.slice(-y.length)==y&&g.remove(new u(b,v.length-y.length,b,v.length))},this.$id="ace/mode/sh",this.snippetFileId="ace/snippets/sh"}).call(m.prototype),n.Mode=m}),ace.define("ace/mode/markdown",["require","exports","module","ace/lib/oop","ace/mode/text","ace/mode/javascript","ace/mode/xml","ace/mode/html","ace/mode/markdown_highlight_rules","ace/mode/folding/markdown","ace/mode/javascript","ace/mode/html","ace/mode/sh","ace/mode/sh","ace/mode/xml","ace/mode/css"],function(t,n,r){var a=t("../lib/oop"),s=t("./text").Mode;t("./javascript").Mode,t("./xml").Mode,t("./html").Mode;var l=t("./markdown_highlight_rules").MarkdownHighlightRules,u=t("./folding/markdown").FoldMode,d=function(){this.HighlightRules=l,this.createModeDelegates({javascript:t("./javascript").Mode,html:t("./html").Mode,bash:t("./sh").Mode,sh:t("./sh").Mode,xml:t("./xml").Mode,css:t("./css").Mode}),this.foldingRules=new u,this.$behaviour=this.$defaultBehaviour};a.inherits(d,s),(function(){this.type="text",this.blockComment={start:"<!--",end:"-->"},this.$quotes={'"':'"',"`":"`"},this.getNextLineIndent=function(f,m,h){if(f=="listblock"){var p=/^(\s*)(?:([-+*])|(\d+)\.)(\s+)/.exec(m);if(!p)return"";var g=p[2];return g||(g=parseInt(p[3],10)+1+"."),p[1]+g+p[4]}else return this.$getIndent(m)},this.$id="ace/mode/markdown",this.snippetFileId="ace/snippets/markdown"}).call(d.prototype),n.Mode=d}),function(){ace.require(["ace/mode/markdown"],function(t){o&&(o.exports=t)})}()})(modeMarkdown);var extSearchbox={exports:{}};(function(o,e){ace.define("ace/ext/searchbox",["require","exports","module","ace/lib/dom","ace/lib/lang","ace/lib/event","ace/keyboard/hash_handler","ace/lib/keys"],function(t,n,r){var a=t("../lib/dom"),s=t("../lib/lang"),l=t("../lib/event"),u='	.ace_search {	background-color: #ddd;	color: #666;	border: 1px solid #cbcbcb;	border-top: 0 none;	overflow: hidden;	margin: 0;	padding: 4px 6px 0 4px;	position: absolute;	top: 0;	z-index: 99;	white-space: normal;	}	.ace_search.left {	border-left: 0 none;	border-radius: 0px 0px 5px 0px;	left: 0;	}	.ace_search.right {	border-radius: 0px 0px 0px 5px;	border-right: 0 none;	right: 0;	}	.ace_search_form, .ace_replace_form {	margin: 0 20px 4px 0;	overflow: hidden;	line-height: 1.9;	}	.ace_replace_form {	margin-right: 0;	}	.ace_search_form.ace_nomatch {	outline: 1px solid red;	}	.ace_search_field {	border-radius: 3px 0 0 3px;	background-color: white;	color: black;	border: 1px solid #cbcbcb;	border-right: 0 none;	outline: 0;	padding: 0;	font-size: inherit;	margin: 0;	line-height: inherit;	padding: 0 6px;	min-width: 17em;	vertical-align: top;	min-height: 1.8em;	box-sizing: content-box;	}	.ace_searchbtn {	border: 1px solid #cbcbcb;	line-height: inherit;	display: inline-block;	padding: 0 6px;	background: #fff;	border-right: 0 none;	border-left: 1px solid #dcdcdc;	cursor: pointer;	margin: 0;	position: relative;	color: #666;	}	.ace_searchbtn:last-child {	border-radius: 0 3px 3px 0;	border-right: 1px solid #cbcbcb;	}	.ace_searchbtn:disabled {	background: none;	cursor: default;	}	.ace_searchbtn:hover {	background-color: #eef1f6;	}	.ace_searchbtn.prev, .ace_searchbtn.next {	padding: 0px 0.7em	}	.ace_searchbtn.prev:after, .ace_searchbtn.next:after {	content: "";	border: solid 2px #888;	width: 0.5em;	height: 0.5em;	border-width:  2px 0 0 2px;	display:inline-block;	transform: rotate(-45deg);	}	.ace_searchbtn.next:after {	border-width: 0 2px 2px 0 ;	}	.ace_searchbtn_close {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAcCAYAAABRVo5BAAAAZ0lEQVR42u2SUQrAMAhDvazn8OjZBilCkYVVxiis8H4CT0VrAJb4WHT3C5xU2a2IQZXJjiQIRMdkEoJ5Q2yMqpfDIo+XY4k6h+YXOyKqTIj5REaxloNAd0xiKmAtsTHqW8sR2W5f7gCu5nWFUpVjZwAAAABJRU5ErkJggg==) no-repeat 50% 0;	border-radius: 50%;	border: 0 none;	color: #656565;	cursor: pointer;	font: 16px/16px Arial;	padding: 0;	height: 14px;	width: 14px;	top: 9px;	right: 7px;	position: absolute;	}	.ace_searchbtn_close:hover {	background-color: #656565;	background-position: 50% 100%;	color: white;	}	.ace_button {	margin-left: 2px;	cursor: pointer;	-webkit-user-select: none;	-moz-user-select: none;	-o-user-select: none;	-ms-user-select: none;	user-select: none;	overflow: hidden;	opacity: 0.7;	border: 1px solid rgba(100,100,100,0.23);	padding: 1px;	box-sizing:    border-box!important;	color: black;	}	.ace_button:hover {	background-color: #eee;	opacity:1;	}	.ace_button:active {	background-color: #ddd;	}	.ace_button.checked {	border-color: #3399ff;	opacity:1;	}	.ace_search_options{	margin-bottom: 3px;	text-align: right;	-webkit-user-select: none;	-moz-user-select: none;	-o-user-select: none;	-ms-user-select: none;	user-select: none;	clear: both;	}	.ace_search_counter {	float: left;	font-family: arial;	padding: 0 8px;	}',d=t("../keyboard/hash_handler").HashHandler,f=t("../lib/keys"),m=999;a.importCssString(u,"ace_searchbox",!1);var h=function(p,g,b){var v=a.createElement("div");a.buildDom(["div",{class:"ace_search right"},["span",{action:"hide",class:"ace_searchbtn_close"}],["div",{class:"ace_search_form"},["input",{class:"ace_search_field",placeholder:"Search for",spellcheck:"false"}],["span",{action:"findPrev",class:"ace_searchbtn prev"},""],["span",{action:"findNext",class:"ace_searchbtn next"},""],["span",{action:"findAll",class:"ace_searchbtn",title:"Alt-Enter"},"All"]],["div",{class:"ace_replace_form"},["input",{class:"ace_search_field",placeholder:"Replace with",spellcheck:"false"}],["span",{action:"replaceAndFindNext",class:"ace_searchbtn"},"Replace"],["span",{action:"replaceAll",class:"ace_searchbtn"},"All"]],["div",{class:"ace_search_options"},["span",{action:"toggleReplace",class:"ace_button",title:"Toggle Replace mode",style:"float:left;margin-top:-2px;padding:0 5px;"},"+"],["span",{class:"ace_search_counter"}],["span",{action:"toggleRegexpMode",class:"ace_button",title:"RegExp Search"},".*"],["span",{action:"toggleCaseSensitive",class:"ace_button",title:"CaseSensitive Search"},"Aa"],["span",{action:"toggleWholeWords",class:"ace_button",title:"Whole Word Search"},"\\b"],["span",{action:"searchInSelection",class:"ace_button",title:"Search In Selection"},"S"]]],v),this.element=v.firstChild,this.setSession=this.setSession.bind(this),this.$init(),this.setEditor(p),a.importCssString(u,"ace_searchbox",p.container)};(function(){this.setEditor=function(p){p.searchBox=this,p.renderer.scroller.appendChild(this.element),this.editor=p},this.setSession=function(p){this.searchRange=null,this.$syncOptions(!0)},this.$initElements=function(p){this.searchBox=p.querySelector(".ace_search_form"),this.replaceBox=p.querySelector(".ace_replace_form"),this.searchOption=p.querySelector("[action=searchInSelection]"),this.replaceOption=p.querySelector("[action=toggleReplace]"),this.regExpOption=p.querySelector("[action=toggleRegexpMode]"),this.caseSensitiveOption=p.querySelector("[action=toggleCaseSensitive]"),this.wholeWordOption=p.querySelector("[action=toggleWholeWords]"),this.searchInput=this.searchBox.querySelector(".ace_search_field"),this.replaceInput=this.replaceBox.querySelector(".ace_search_field"),this.searchCounter=p.querySelector(".ace_search_counter")},this.$init=function(){var p=this.element;this.$initElements(p);var g=this;l.addListener(p,"mousedown",function(b){setTimeout(function(){g.activeInput.focus()},0),l.stopPropagation(b)}),l.addListener(p,"click",function(b){var v=b.target||b.srcElement,y=v.getAttribute("action");y&&g[y]?g[y]():g.$searchBarKb.commands[y]&&g.$searchBarKb.commands[y].exec(g),l.stopPropagation(b)}),l.addCommandKeyListener(p,function(b,v,y){var C=f.keyCodeToString(y),E=g.$searchBarKb.findKeyCommand(v,C);E&&E.exec&&(E.exec(g),l.stopEvent(b))}),this.$onChange=s.delayedCall(function(){g.find(!1,!1)}),l.addListener(this.searchInput,"input",function(){g.$onChange.schedule(20)}),l.addListener(this.searchInput,"focus",function(){g.activeInput=g.searchInput,g.searchInput.value&&g.highlight()}),l.addListener(this.replaceInput,"focus",function(){g.activeInput=g.replaceInput,g.searchInput.value&&g.highlight()})},this.$closeSearchBarKb=new d([{bindKey:"Esc",name:"closeSearchBar",exec:function(p){p.searchBox.hide()}}]),this.$searchBarKb=new d,this.$searchBarKb.bindKeys({"Ctrl-f|Command-f":function(p){var g=p.isReplace=!p.isReplace;p.replaceBox.style.display=g?"":"none",p.replaceOption.checked=!1,p.$syncOptions(),p.searchInput.focus()},"Ctrl-H|Command-Option-F":function(p){p.editor.getReadOnly()||(p.replaceOption.checked=!0,p.$syncOptions(),p.replaceInput.focus())},"Ctrl-G|Command-G":function(p){p.findNext()},"Ctrl-Shift-G|Command-Shift-G":function(p){p.findPrev()},esc:function(p){setTimeout(function(){p.hide()})},Return:function(p){p.activeInput==p.replaceInput&&p.replace(),p.findNext()},"Shift-Return":function(p){p.activeInput==p.replaceInput&&p.replace(),p.findPrev()},"Alt-Return":function(p){p.activeInput==p.replaceInput&&p.replaceAll(),p.findAll()},Tab:function(p){(p.activeInput==p.replaceInput?p.searchInput:p.replaceInput).focus()}}),this.$searchBarKb.addCommands([{name:"toggleRegexpMode",bindKey:{win:"Alt-R|Alt-/",mac:"Ctrl-Alt-R|Ctrl-Alt-/"},exec:function(p){p.regExpOption.checked=!p.regExpOption.checked,p.$syncOptions()}},{name:"toggleCaseSensitive",bindKey:{win:"Alt-C|Alt-I",mac:"Ctrl-Alt-R|Ctrl-Alt-I"},exec:function(p){p.caseSensitiveOption.checked=!p.caseSensitiveOption.checked,p.$syncOptions()}},{name:"toggleWholeWords",bindKey:{win:"Alt-B|Alt-W",mac:"Ctrl-Alt-B|Ctrl-Alt-W"},exec:function(p){p.wholeWordOption.checked=!p.wholeWordOption.checked,p.$syncOptions()}},{name:"toggleReplace",exec:function(p){p.replaceOption.checked=!p.replaceOption.checked,p.$syncOptions()}},{name:"searchInSelection",exec:function(p){p.searchOption.checked=!p.searchRange,p.setSearchRange(p.searchOption.checked&&p.editor.getSelectionRange()),p.$syncOptions()}}]),this.setSearchRange=function(p){this.searchRange=p,p?this.searchRangeMarker=this.editor.session.addMarker(p,"ace_active-line"):this.searchRangeMarker&&(this.editor.session.removeMarker(this.searchRangeMarker),this.searchRangeMarker=null)},this.$syncOptions=function(p){a.setCssClass(this.replaceOption,"checked",this.searchRange),a.setCssClass(this.searchOption,"checked",this.searchOption.checked),this.replaceOption.textContent=this.replaceOption.checked?"-":"+",a.setCssClass(this.regExpOption,"checked",this.regExpOption.checked),a.setCssClass(this.wholeWordOption,"checked",this.wholeWordOption.checked),a.setCssClass(this.caseSensitiveOption,"checked",this.caseSensitiveOption.checked);var g=this.editor.getReadOnly();this.replaceOption.style.display=g?"none":"",this.replaceBox.style.display=this.replaceOption.checked&&!g?"":"none",this.find(!1,!1,p)},this.highlight=function(p){this.editor.session.highlight(p||this.editor.$search.$options.re),this.editor.renderer.updateBackMarkers()},this.find=function(p,g,b){var v=this.editor.find(this.searchInput.value,{skipCurrent:p,backwards:g,wrap:!0,regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked,preventScroll:b,range:this.searchRange}),y=!v&&this.searchInput.value;a.setCssClass(this.searchBox,"ace_nomatch",y),this.editor._emit("findSearchBox",{match:!y}),this.highlight(),this.updateCounter()},this.updateCounter=function(){var p=this.editor,g=p.$search.$options.re,b=0,v=0;if(g){var y=this.searchRange?p.session.getTextRange(this.searchRange):p.getValue(),C=p.session.doc.positionToIndex(p.selection.anchor);this.searchRange&&(C-=p.session.doc.positionToIndex(this.searchRange.start));for(var E=g.lastIndex=0,A;(A=g.exec(y))&&(b++,E=A.index,E<=C&&v++,!(b>m||!A[0]&&(g.lastIndex=E+=1,E>=y.length))););}this.searchCounter.textContent=v+" of "+(b>m?m+"+":b)},this.findNext=function(){this.find(!0,!1)},this.findPrev=function(){this.find(!0,!0)},this.findAll=function(){var p=this.editor.findAll(this.searchInput.value,{regExp:this.regExpOption.checked,caseSensitive:this.caseSensitiveOption.checked,wholeWord:this.wholeWordOption.checked}),g=!p&&this.searchInput.value;a.setCssClass(this.searchBox,"ace_nomatch",g),this.editor._emit("findSearchBox",{match:!g}),this.highlight(),this.hide()},this.replace=function(){this.editor.getReadOnly()||this.editor.replace(this.replaceInput.value)},this.replaceAndFindNext=function(){this.editor.getReadOnly()||(this.editor.replace(this.replaceInput.value),this.findNext())},this.replaceAll=function(){this.editor.getReadOnly()||this.editor.replaceAll(this.replaceInput.value)},this.hide=function(){this.active=!1,this.setSearchRange(null),this.editor.off("changeSession",this.setSession),this.element.style.display="none",this.editor.keyBinding.removeKeyboardHandler(this.$closeSearchBarKb),this.editor.focus()},this.show=function(p,g){this.active=!0,this.editor.on("changeSession",this.setSession),this.element.style.display="",this.replaceOption.checked=g,p&&(this.searchInput.value=p),this.searchInput.focus(),this.searchInput.select(),this.editor.keyBinding.addKeyboardHandler(this.$closeSearchBarKb),this.$syncOptions(!0)},this.isFocused=function(){var p=document.activeElement;return p==this.searchInput||p==this.replaceInput}}).call(h.prototype),n.SearchBox=h,n.Search=function(p,g){var b=p.searchBox||new h(p);b.show(p.session.getTextRange(),g)}}),function(){ace.require(["ace/ext/searchbox"],function(t){o&&(o.exports=t)})}()})(extSearchbox);var extLanguage_tools={exports:{}};(function(o,e){ace.define("ace/snippets",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event_emitter","ace/lib/lang","ace/range","ace/range_list","ace/keyboard/hash_handler","ace/tokenizer","ace/clipboard","ace/editor"],function(t,n,r){var a=t("./lib/dom"),s=t("./lib/oop"),l=t("./lib/event_emitter").EventEmitter,u=t("./lib/lang"),d=t("./range").Range,f=t("./range_list").RangeList,m=t("./keyboard/hash_handler").HashHandler,h=t("./tokenizer").Tokenizer,p=t("./clipboard"),g={CURRENT_WORD:function(k){return k.session.getTextRange(k.session.getWordRange())},SELECTION:function(k,T,$){var S=k.session.getTextRange();return $?S.replace(/\n\r?([ \t]*\S)/g,`
`+$+"$1"):S},CURRENT_LINE:function(k){return k.session.getLine(k.getCursorPosition().row)},PREV_LINE:function(k){return k.session.getLine(k.getCursorPosition().row-1)},LINE_INDEX:function(k){return k.getCursorPosition().row},LINE_NUMBER:function(k){return k.getCursorPosition().row+1},SOFT_TABS:function(k){return k.session.getUseSoftTabs()?"YES":"NO"},TAB_SIZE:function(k){return k.session.getTabSize()},CLIPBOARD:function(k){return p.getText&&p.getText()},FILENAME:function(k){return/[^/\\]*$/.exec(this.FILEPATH(k))[0]},FILENAME_BASE:function(k){return/[^/\\]*$/.exec(this.FILEPATH(k))[0].replace(/\.[^.]*$/,"")},DIRECTORY:function(k){return this.FILEPATH(k).replace(/[^/\\]*$/,"")},FILEPATH:function(k){return"/not implemented.txt"},WORKSPACE_NAME:function(){return"Unknown"},FULLNAME:function(){return"Unknown"},BLOCK_COMMENT_START:function(k){var T=k.session.$mode||{};return T.blockComment&&T.blockComment.start||""},BLOCK_COMMENT_END:function(k){var T=k.session.$mode||{};return T.blockComment&&T.blockComment.end||""},LINE_COMMENT:function(k){var T=k.session.$mode||{};return T.lineCommentStart||""},CURRENT_YEAR:b.bind(null,{year:"numeric"}),CURRENT_YEAR_SHORT:b.bind(null,{year:"2-digit"}),CURRENT_MONTH:b.bind(null,{month:"numeric"}),CURRENT_MONTH_NAME:b.bind(null,{month:"long"}),CURRENT_MONTH_NAME_SHORT:b.bind(null,{month:"short"}),CURRENT_DATE:b.bind(null,{day:"2-digit"}),CURRENT_DAY_NAME:b.bind(null,{weekday:"long"}),CURRENT_DAY_NAME_SHORT:b.bind(null,{weekday:"short"}),CURRENT_HOUR:b.bind(null,{hour:"2-digit",hour12:!1}),CURRENT_MINUTE:b.bind(null,{minute:"2-digit"}),CURRENT_SECOND:b.bind(null,{second:"2-digit"})};g.SELECTED_TEXT=g.SELECTION;function b(k){var T=new Date().toLocaleString("en-us",k);return T.length==1?"0"+T:T}var v=function(){this.snippetMap={},this.snippetNameMap={}};(function(){s.implement(this,l),this.getTokenizer=function(){return v.$tokenizer||this.createTokenizer()},this.createTokenizer=function(){function k(S){return S=S.substr(1),/^\d+$/.test(S)?[{tabstopId:parseInt(S,10)}]:[{text:S}]}function T(S){return"(?:[^\\\\"+S+"]|\\\\.)"}var $={regex:"/("+T("/")+"+)/",onMatch:function(S,I,R){var N=R[0];return N.fmtString=!0,N.guard=S.slice(1,-1),N.flag="",""},next:"formatString"};return v.$tokenizer=new h({start:[{regex:/\\./,onMatch:function(S,I,R){var N=S[1];return(N=="}"&&R.length||"`$\\".indexOf(N)!=-1)&&(S=N),[S]}},{regex:/}/,onMatch:function(S,I,R){return[R.length?R.shift():S]}},{regex:/\$(?:\d+|\w+)/,onMatch:k},{regex:/\$\{[\dA-Z_a-z]+/,onMatch:function(S,I,R){var N=k(S.substr(1));return R.unshift(N[0]),N},next:"snippetVar"},{regex:/\n/,token:"newline",merge:!1}],snippetVar:[{regex:"\\|"+T("\\|")+"*\\|",onMatch:function(S,I,R){var N=S.slice(1,-1).replace(/\\[,|\\]|,/g,function(M){return M.length==2?M[1]:"\0"}).split("\0").map(function(M){return{value:M}});return R[0].choices=N,[N[0]]},next:"start"},$,{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"start"}],formatString:[{regex:/:/,onMatch:function(S,I,R){return R.length&&R[0].expectElse?(R[0].expectElse=!1,R[0].ifEnd={elseEnd:R[0]},[R[0].ifEnd]):":"}},{regex:/\\./,onMatch:function(S,I,R){var N=S[1];return N=="}"&&R.length||"`$\\".indexOf(N)!=-1?S=N:N=="n"?S=`
`:N=="t"?S="	":"ulULE".indexOf(N)!=-1&&(S={changeCase:N,local:N>"a"}),[S]}},{regex:"/\\w*}",onMatch:function(S,I,R){var N=R.shift();return N&&(N.flag=S.slice(1,-1)),this.next=N&&N.tabstopId?"start":"",[N||S]},next:"start"},{regex:/\$(?:\d+|\w+)/,onMatch:function(S,I,R){return[{text:S.slice(1)}]}},{regex:/\${\w+/,onMatch:function(S,I,R){var N={text:S.slice(2)};return R.unshift(N),[N]},next:"formatStringVar"},{regex:/\n/,token:"newline",merge:!1},{regex:/}/,onMatch:function(S,I,R){var N=R.shift();return this.next=N&&N.tabstopId?"start":"",[N||S]},next:"start"}],formatStringVar:[{regex:/:\/\w+}/,onMatch:function(S,I,R){var N=R[0];return N.formatFunction=S.slice(2,-1),[R.shift()]},next:"formatString"},$,{regex:/:[\?\-+]?/,onMatch:function(S,I,R){S[1]=="+"&&(R[0].ifEnd=R[0]),S[1]=="?"&&(R[0].expectElse=!0)},next:"formatString"},{regex:"([^:}\\\\]|\\\\.)*:?",token:"",next:"formatString"}]}),v.$tokenizer},this.tokenizeTmSnippet=function(k,T){return this.getTokenizer().getLineTokens(k,T).tokens.map(function($){return $.value||$})},this.getVariableValue=function(k,T,$){if(/^\d+$/.test(T))return(this.variables.__||{})[T]||"";if(/^[A-Z]\d+$/.test(T))return(this.variables[T[0]+"__"]||{})[T.substr(1)]||"";if(T=T.replace(/^TM_/,""),!this.variables.hasOwnProperty(T))return"";var S=this.variables[T];return typeof S=="function"&&(S=this.variables[T](k,T,$)),S??""},this.variables=g,this.tmStrFormat=function(k,T,$){if(!T.fmt)return k;var S=T.flag||"",I=T.guard;I=new RegExp(I,S.replace(/[^gim]/g,""));var R=typeof T.fmt=="string"?this.tokenizeTmSnippet(T.fmt,"formatString"):T.fmt,N=this,M=k.replace(I,function(){var F=N.variables.__;N.variables.__=[].slice.call(arguments);for(var D=N.resolveVariables(R,$),x="E",B=0;B<D.length;B++){var K=D[B];if(typeof K=="object")if(D[B]="",K.changeCase&&K.local){var U=D[B+1];U&&typeof U=="string"&&(K.changeCase=="u"?D[B]=U[0].toUpperCase():D[B]=U[0].toLowerCase(),D[B+1]=U.substr(1))}else K.changeCase&&(x=K.changeCase);else x=="U"?D[B]=K.toUpperCase():x=="L"&&(D[B]=K.toLowerCase())}return N.variables.__=F,D.join("")});return M},this.tmFormatFunction=function(k,T,$){return T.formatFunction=="upcase"?k.toUpperCase():T.formatFunction=="downcase"?k.toLowerCase():k},this.resolveVariables=function(k,T){for(var $=[],S="",I=!0,R=0;R<k.length;R++){var N=k[R];if(typeof N=="string"){$.push(N),N==`
`?(I=!0,S=""):I&&(S=/^\t*/.exec(N)[0],I=/\S/.test(N));continue}if(N){if(I=!1,N.fmtString){var M=k.indexOf(N,R+1);M==-1&&(M=k.length),N.fmt=k.slice(R+1,M),R=M}if(N.text){var F=this.getVariableValue(T,N.text,S)+"";N.fmtString&&(F=this.tmStrFormat(F,N,T)),N.formatFunction&&(F=this.tmFormatFunction(F,N,T)),F&&!N.ifEnd?($.push(F),D(N)):!F&&N.ifEnd&&D(N.ifEnd)}else N.elseEnd?D(N.elseEnd):(N.tabstopId!=null||N.changeCase!=null)&&$.push(N)}}function D(x){var B=k.indexOf(x,R+1);B!=-1&&(R=B)}return $},this.insertSnippetForSelection=function(k,T){var $=k.getCursorPosition(),S=k.session.getLine($.row),I=k.session.getTabString(),R=S.match(/^\s*/)[0];$.column<R.length&&(R=R.slice(0,$.column)),T=T.replace(/\r/g,"");var N=this.tokenizeTmSnippet(T);N=this.resolveVariables(N,k),N=N.map(function(X){return X==`
`?X+R:typeof X=="string"?X.replace(/\t/g,I):X});var M=[];N.forEach(function(X,ie){if(typeof X=="object"){var ce=X.tabstopId,de=M[ce];if(de||(de=M[ce]=[],de.index=ce,de.value="",de.parents={}),de.indexOf(X)===-1){X.choices&&!de.choices&&(de.choices=X.choices),de.push(X);var se=N.indexOf(X,ie+1);if(se!==-1){var me=N.slice(ie+1,se),ue=me.some(function(he){return typeof he=="object"});ue&&!de.value?de.value=me:me.length&&(!de.value||typeof de.value!="string")&&(de.value=me.join(""))}}}}),M.forEach(function(X){X.length=0});var F={};function D(X){for(var ie=[],ce=0;ce<X.length;ce++){var de=X[ce];if(typeof de=="object"){if(F[de.tabstopId])continue;var se=X.lastIndexOf(de,ce-1);de=ie[se]||{tabstopId:de.tabstopId}}ie[ce]=de}return ie}for(var x=0;x<N.length;x++){var B=N[x];if(typeof B=="object"){var K=B.tabstopId,U=M[K],G=N.indexOf(B,x+1);if(F[K]){F[K]===B&&(delete F[K],Object.keys(F).forEach(function(X){U.parents[X]=!0}));continue}F[K]=B;var W=U.value;typeof W!="string"?W=D(W):B.fmt&&(W=this.tmStrFormat(W,B,k)),N.splice.apply(N,[x+1,Math.max(0,G-x)].concat(W,B)),U.indexOf(B)===-1&&U.push(B)}}var q=0,H=0,z="";N.forEach(function(X){if(typeof X=="string"){var ie=X.split(`
`);ie.length>1?(H=ie[ie.length-1].length,q+=ie.length-1):H+=X.length,z+=X}else X&&(X.start?X.end={row:q,column:H}:X.start={row:q,column:H})});var Y=k.getSelectionRange(),V=k.session.replace(Y,z),J=new y(k),Q=k.inVirtualSelectionMode&&k.selection.index;J.addTabstops(M,Y.start,V,Q)},this.insertSnippet=function(k,T){var $=this;if(k.inVirtualSelectionMode)return $.insertSnippetForSelection(k,T);k.forEachSelection(function(){$.insertSnippetForSelection(k,T)},null,{keepOrder:!0}),k.tabstopManager&&k.tabstopManager.tabNext()},this.$getScope=function(k){var T=k.session.$mode.$id||"";if(T=T.split("/").pop(),T==="html"||T==="php"){T==="php"&&!k.session.$mode.inlinePhp&&(T="html");var $=k.getCursorPosition(),S=k.session.getState($.row);typeof S=="object"&&(S=S[0]),S.substring&&(S.substring(0,3)=="js-"?T="javascript":S.substring(0,4)=="css-"?T="css":S.substring(0,4)=="php-"&&(T="php"))}return T},this.getActiveScopes=function(k){var T=this.$getScope(k),$=[T],S=this.snippetMap;return S[T]&&S[T].includeScopes&&$.push.apply($,S[T].includeScopes),$.push("_"),$},this.expandWithTab=function(k,T){var $=this,S=k.forEachSelection(function(){return $.expandSnippetForSelection(k,T)},null,{keepOrder:!0});return S&&k.tabstopManager&&k.tabstopManager.tabNext(),S},this.expandSnippetForSelection=function(k,T){var $=k.getCursorPosition(),S=k.session.getLine($.row),I=S.substring(0,$.column),R=S.substr($.column),N=this.snippetMap,M;return this.getActiveScopes(k).some(function(F){var D=N[F];return D&&(M=this.findMatchingSnippet(D,I,R)),!!M},this),M?(T&&T.dryRun||(k.session.doc.removeInLine($.row,$.column-M.replaceBefore.length,$.column+M.replaceAfter.length),this.variables.M__=M.matchBefore,this.variables.T__=M.matchAfter,this.insertSnippetForSelection(k,M.content),this.variables.M__=this.variables.T__=null),!0):!1},this.findMatchingSnippet=function(k,T,$){for(var S=k.length;S--;){var I=k[S];if(!(I.startRe&&!I.startRe.test(T))&&!(I.endRe&&!I.endRe.test($))&&!(!I.startRe&&!I.endRe))return I.matchBefore=I.startRe?I.startRe.exec(T):[""],I.matchAfter=I.endRe?I.endRe.exec($):[""],I.replaceBefore=I.triggerRe?I.triggerRe.exec(T)[0]:"",I.replaceAfter=I.endTriggerRe?I.endTriggerRe.exec($)[0]:"",I}},this.snippetMap={},this.snippetNameMap={},this.register=function(k,T){var $=this.snippetMap,S=this.snippetNameMap,I=this;k||(k=[]);function R(F){return F&&!/^\^?\(.*\)\$?$|^\\b$/.test(F)&&(F="(?:"+F+")"),F||""}function N(F,D,x){return F=R(F),D=R(D),x?(F=D+F,F&&F[F.length-1]!="$"&&(F=F+"$")):(F=F+D,F&&F[0]!="^"&&(F="^"+F)),new RegExp(F)}function M(F){F.scope||(F.scope=T||"_"),T=F.scope,$[T]||($[T]=[],S[T]={});var D=S[T];if(F.name){var x=D[F.name];x&&I.unregister(x),D[F.name]=F}$[T].push(F),F.prefix&&(F.tabTrigger=F.prefix),!F.content&&F.body&&(F.content=Array.isArray(F.body)?F.body.join(`
`):F.body),F.tabTrigger&&!F.trigger&&(!F.guard&&/^\w/.test(F.tabTrigger)&&(F.guard="\\b"),F.trigger=u.escapeRegExp(F.tabTrigger)),!(!F.trigger&&!F.guard&&!F.endTrigger&&!F.endGuard)&&(F.startRe=N(F.trigger,F.guard,!0),F.triggerRe=new RegExp(F.trigger),F.endRe=N(F.endTrigger,F.endGuard,!0),F.endTriggerRe=new RegExp(F.endTrigger))}Array.isArray(k)?k.forEach(M):Object.keys(k).forEach(function(F){M(k[F])}),this._signal("registerSnippets",{scope:T})},this.unregister=function(k,T){var $=this.snippetMap,S=this.snippetNameMap;function I(R){var N=S[R.scope||T];if(N&&N[R.name]){delete N[R.name];var M=$[R.scope||T],F=M&&M.indexOf(R);F>=0&&M.splice(F,1)}}k.content?I(k):Array.isArray(k)&&k.forEach(I)},this.parseSnippetFile=function(k){k=k.replace(/\r/g,"");for(var T=[],$={},S=/^#.*|^({[\s\S]*})\s*$|^(\S+) (.*)$|^((?:\n*\t.*)+)/gm,I;I=S.exec(k);){if(I[1])try{$=JSON.parse(I[1]),T.push($)}catch{}if(I[4])$.content=I[4].replace(/^\t/gm,""),T.push($),$={};else{var R=I[2],N=I[3];if(R=="regex"){var M=/\/((?:[^\/\\]|\\.)*)|$/g;$.guard=M.exec(N)[1],$.trigger=M.exec(N)[1],$.endTrigger=M.exec(N)[1],$.endGuard=M.exec(N)[1]}else R=="snippet"?($.tabTrigger=N.match(/^\S*/)[0],$.name||($.name=N)):R&&($[R]=N)}}return T},this.getSnippetByName=function(k,T){var $=this.snippetNameMap,S;return this.getActiveScopes(T).some(function(I){var R=$[I];return R&&(S=R[k]),!!S},this),S}}).call(v.prototype);var y=function(k){if(k.tabstopManager)return k.tabstopManager;k.tabstopManager=this,this.$onChange=this.onChange.bind(this),this.$onChangeSelection=u.delayedCall(this.onChangeSelection.bind(this)).schedule,this.$onChangeSession=this.onChangeSession.bind(this),this.$onAfterExec=this.onAfterExec.bind(this),this.attach(k)};(function(){this.attach=function(k){this.index=0,this.ranges=[],this.tabstops=[],this.$openTabstops=null,this.selectedTabstop=null,this.editor=k,this.editor.on("change",this.$onChange),this.editor.on("changeSelection",this.$onChangeSelection),this.editor.on("changeSession",this.$onChangeSession),this.editor.commands.on("afterExec",this.$onAfterExec),this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler)},this.detach=function(){this.tabstops.forEach(this.removeTabstopMarkers,this),this.ranges=null,this.tabstops=null,this.selectedTabstop=null,this.editor.removeListener("change",this.$onChange),this.editor.removeListener("changeSelection",this.$onChangeSelection),this.editor.removeListener("changeSession",this.$onChangeSession),this.editor.commands.removeListener("afterExec",this.$onAfterExec),this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.tabstopManager=null,this.editor=null},this.onChange=function(k){for(var T=k.action[0]=="r",$=this.selectedTabstop||{},S=$.parents||{},I=(this.tabstops||[]).slice(),R=0;R<I.length;R++){var N=I[R],M=N==$||S[N.index];if(N.rangeList.$bias=M?0:1,k.action=="remove"&&N!==$){var F=N.parents&&N.parents[$.index],D=N.rangeList.pointIndex(k.start,F);D=D<0?-D-1:D+1;var x=N.rangeList.pointIndex(k.end,F);x=x<0?-x-1:x-1;for(var B=N.rangeList.ranges.slice(D,x),K=0;K<B.length;K++)this.removeRange(B[K])}N.rangeList.$onChange(k)}var U=this.editor.session;!this.$inChange&&T&&U.getLength()==1&&!U.getValue()&&this.detach()},this.updateLinkedFields=function(){var k=this.selectedTabstop;if(!(!k||!k.hasLinkedRanges||!k.firstNonLinked)){this.$inChange=!0;for(var T=this.editor.session,$=T.getTextRange(k.firstNonLinked),S=0;S<k.length;S++){var I=k[S];if(I.linked){var R=I.original,N=n.snippetManager.tmStrFormat($,R,this.editor);T.replace(I,N)}}this.$inChange=!1}},this.onAfterExec=function(k){k.command&&!k.command.readOnly&&this.updateLinkedFields()},this.onChangeSelection=function(){if(this.editor){for(var k=this.editor.selection.lead,T=this.editor.selection.anchor,$=this.editor.selection.isEmpty(),S=0;S<this.ranges.length;S++)if(!this.ranges[S].linked){var I=this.ranges[S].contains(k.row,k.column),R=$||this.ranges[S].contains(T.row,T.column);if(I&&R)return}this.detach()}},this.onChangeSession=function(){this.detach()},this.tabNext=function(k){var T=this.tabstops.length,$=this.index+(k||1);$=Math.min(Math.max($,1),T),$==T&&($=0),this.selectTabstop($),$===0&&this.detach()},this.selectTabstop=function(k){this.$openTabstops=null;var T=this.tabstops[this.index];if(T&&this.addTabstopMarkers(T),this.index=k,T=this.tabstops[this.index],!(!T||!T.length)){this.selectedTabstop=T;var $=T.firstNonLinked||T;if(T.choices&&($.cursor=$.start),this.editor.inVirtualSelectionMode)this.editor.selection.fromOrientedRange($);else{var S=this.editor.multiSelect;S.toSingleRange($);for(var I=0;I<T.length;I++)T.hasLinkedRanges&&T[I].linked||S.addRange(T[I].clone(),!0)}this.editor.keyBinding.addKeyboardHandler(this.keyboardHandler),this.selectedTabstop&&this.selectedTabstop.choices&&this.editor.execCommand("startAutocomplete",{matches:this.selectedTabstop.choices})}},this.addTabstops=function(k,T,$){var S=this.useLink||!this.editor.getOption("enableMultiselect");if(this.$openTabstops||(this.$openTabstops=[]),!k[0]){var I=d.fromPoints($,$);E(I.start,T),E(I.end,T),k[0]=[I],k[0].index=0}var R=this.index,N=[R+1,0],M=this.ranges;k.forEach(function(F,D){for(var x=this.$openTabstops[D]||F,B=0;B<F.length;B++){var K=F[B],U=d.fromPoints(K.start,K.end||K.start);C(U.start,T),C(U.end,T),U.original=K,U.tabstop=x,M.push(U),x!=F?x.unshift(U):x[B]=U,K.fmtString||x.firstNonLinked&&S?(U.linked=!0,x.hasLinkedRanges=!0):x.firstNonLinked||(x.firstNonLinked=U)}x.firstNonLinked||(x.hasLinkedRanges=!1),x===F&&(N.push(x),this.$openTabstops[D]=x),this.addTabstopMarkers(x),x.rangeList=x.rangeList||new f,x.rangeList.$bias=0,x.rangeList.addList(x)},this),N.length>2&&(this.tabstops.length&&N.push(N.splice(2,1)[0]),this.tabstops.splice.apply(this.tabstops,N))},this.addTabstopMarkers=function(k){var T=this.editor.session;k.forEach(function($){$.markerId||($.markerId=T.addMarker($,"ace_snippet-marker","text"))})},this.removeTabstopMarkers=function(k){var T=this.editor.session;k.forEach(function($){T.removeMarker($.markerId),$.markerId=null})},this.removeRange=function(k){var T=k.tabstop.indexOf(k);T!=-1&&k.tabstop.splice(T,1),T=this.ranges.indexOf(k),T!=-1&&this.ranges.splice(T,1),T=k.tabstop.rangeList.ranges.indexOf(k),T!=-1&&k.tabstop.splice(T,1),this.editor.session.removeMarker(k.markerId),k.tabstop.length||(T=this.tabstops.indexOf(k.tabstop),T!=-1&&this.tabstops.splice(T,1),this.tabstops.length||this.detach())},this.keyboardHandler=new m,this.keyboardHandler.bindKeys({Tab:function(k){n.snippetManager&&n.snippetManager.expandWithTab(k)||(k.tabstopManager.tabNext(1),k.renderer.scrollCursorIntoView())},"Shift-Tab":function(k){k.tabstopManager.tabNext(-1),k.renderer.scrollCursorIntoView()},Esc:function(k){k.tabstopManager.detach()}})}).call(y.prototype);var C=function(k,T){k.row==0&&(k.column+=T.column),k.row+=T.row},E=function(k,T){k.row==T.row&&(k.column-=T.column),k.row-=T.row};a.importCssString("	.ace_snippet-marker {	    -moz-box-sizing: border-box;	    box-sizing: border-box;	    background: rgba(194, 193, 208, 0.09);	    border: 1px dotted rgba(211, 208, 235, 0.62);	    position: absolute;	}","snippets.css",!1),n.snippetManager=new v;var A=t("./editor").Editor;(function(){this.insertSnippet=function(k,T){return n.snippetManager.insertSnippet(this,k,T)},this.expandSnippet=function(k){return n.snippetManager.expandWithTab(this,k)}}).call(A.prototype)}),ace.define("ace/autocomplete/popup",["require","exports","module","ace/virtual_renderer","ace/editor","ace/range","ace/lib/event","ace/lib/lang","ace/lib/dom"],function(t,n,r){var a=t("../virtual_renderer").VirtualRenderer,s=t("../editor").Editor,l=t("../range").Range,u=t("../lib/event"),d=t("../lib/lang"),f=t("../lib/dom"),m=function(p){var g=new a(p);g.$maxLines=4;var b=new s(g);return b.setHighlightActiveLine(!1),b.setShowPrintMargin(!1),b.renderer.setShowGutter(!1),b.renderer.setHighlightGutterLine(!1),b.$mouseHandler.$focusTimeout=0,b.$highlightTagPending=!0,b},h=function(p){var g=f.createElement("div"),b=new m(g);p&&p.appendChild(g),g.style.display="none",b.renderer.content.style.cursor="default",b.renderer.setStyle("ace_autocomplete"),b.setOption("displayIndentGuides",!1),b.setOption("dragDelay",150);var v=function(){};b.focus=v,b.$isFocused=!0,b.renderer.$cursorLayer.restartTimer=v,b.renderer.$cursorLayer.element.style.opacity=0,b.renderer.$maxLines=8,b.renderer.$keepTextAreaAtCursor=!1,b.setHighlightActiveLine(!1),b.session.highlight(""),b.session.$searchHighlight.clazz="ace_highlight-marker",b.on("mousedown",function($){var S=$.getDocumentPosition();b.selection.moveToPosition(S),E.start.row=E.end.row=S.row,$.stop()});var y,C=new l(-1,0,-1,1/0),E=new l(-1,0,-1,1/0);E.id=b.session.addMarker(E,"ace_active-line","fullLine"),b.setSelectOnHover=function($){$?C.id&&(b.session.removeMarker(C.id),C.id=null):C.id=b.session.addMarker(C,"ace_line-hover","fullLine")},b.setSelectOnHover(!1),b.on("mousemove",function($){if(!y){y=$;return}if(!(y.x==$.x&&y.y==$.y)){y=$,y.scrollTop=b.renderer.scrollTop;var S=y.getDocumentPosition().row;C.start.row!=S&&(C.id||b.setRow(S),k(S))}}),b.renderer.on("beforeRender",function(){if(y&&C.start.row!=-1){y.$pos=null;var $=y.getDocumentPosition().row;C.id||b.setRow($),k($,!0)}}),b.renderer.on("afterRender",function(){var $=b.getRow(),S=b.renderer.$textLayer,I=S.element.childNodes[$-S.config.firstRow];I!==S.selectedNode&&S.selectedNode&&f.removeCssClass(S.selectedNode,"ace_selected"),S.selectedNode=I,I&&f.addCssClass(I,"ace_selected")});var A=function(){k(-1)},k=function($,S){$!==C.start.row&&(C.start.row=C.end.row=$,S||b.session._emit("changeBackMarker"),b._emit("changeHoverMarker"))};b.getHoveredRow=function(){return C.start.row},u.addListener(b.container,"mouseout",A),b.on("hide",A),b.on("changeSelection",A),b.session.doc.getLength=function(){return b.data.length},b.session.doc.getLine=function($){var S=b.data[$];return typeof S=="string"?S:S&&S.value||""};var T=b.session.bgTokenizer;return T.$tokenizeRow=function($){var S=b.data[$],I=[];if(!S)return I;typeof S=="string"&&(S={value:S});var R=S.caption||S.value||S.name;function N(G,W){G&&I.push({type:(S.className||"")+(W||""),value:G})}for(var M=R.toLowerCase(),F=(b.filterText||"").toLowerCase(),D=0,x=0,B=0;B<=F.length;B++)if(B!=x&&(S.matchMask&1<<B||B==F.length)){var K=F.slice(x,B);x=B;var U=M.indexOf(K,D);if(U==-1)continue;N(R.slice(D,U),""),D=U+K.length,N(R.slice(U,D),"completion-highlight")}return N(R.slice(D,R.length),""),S.meta&&I.push({type:"completion-meta",value:S.meta}),S.message&&I.push({type:"completion-message",value:S.message}),I},T.$updateOnChange=v,T.start=v,b.session.$computeWidth=function(){return this.screenWidth=0},b.isOpen=!1,b.isTopdown=!1,b.autoSelect=!0,b.filterText="",b.data=[],b.setData=function($,S){b.filterText=S||"",b.setValue(d.stringRepeat(`
`,$.length),-1),b.data=$||[],b.setRow(0)},b.getData=function($){return b.data[$]},b.getRow=function(){return E.start.row},b.setRow=function($){$=Math.max(this.autoSelect?0:-1,Math.min(this.data.length,$)),E.start.row!=$&&(b.selection.clearSelection(),E.start.row=E.end.row=$||0,b.session._emit("changeBackMarker"),b.moveCursorTo($||0,0),b.isOpen&&b._signal("select"))},b.on("changeSelection",function(){b.isOpen&&b.setRow(b.selection.lead.row),b.renderer.scrollCursorIntoView()}),b.hide=function(){this.container.style.display="none",this._signal("hide"),b.isOpen=!1},b.show=function($,S,I){var R=this.container,N=window.innerHeight,M=window.innerWidth,F=this.renderer,D=F.$maxLines*S*1.4,x=$.top+this.$borderSize,B=x>N/2&&!I;B&&x+S+D>N?(F.$maxPixelHeight=x-2*this.$borderSize,R.style.top="",R.style.bottom=N-x+"px",b.isTopdown=!1):(x+=S,F.$maxPixelHeight=N-x-.2*S,R.style.top=x+"px",R.style.bottom="",b.isTopdown=!0),R.style.display="";var K=$.left;K+R.offsetWidth>M&&(K=M-R.offsetWidth),R.style.left=K+"px",this._signal("show"),y=null,b.isOpen=!0},b.goTo=function($){var S=this.getRow(),I=this.session.getLength()-1;switch($){case"up":S=S<=0?I:S-1;break;case"down":S=S>=I?-1:S+1;break;case"start":S=0;break;case"end":S=I;break}this.setRow(S)},b.getTextLeftOffset=function(){return this.$borderSize+this.renderer.$padding+this.$imageSize},b.$imageSize=0,b.$borderSize=1,b};f.importCssString("	.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {	    background-color: #CAD6FA;	    z-index: 1;	}	.ace_dark.ace_editor.ace_autocomplete .ace_marker-layer .ace_active-line {	    background-color: #3a674e;	}	.ace_editor.ace_autocomplete .ace_line-hover {	    border: 1px solid #abbffe;	    margin-top: -1px;	    background: rgba(233,233,253,0.4);	    position: absolute;	    z-index: 2;	}	.ace_dark.ace_editor.ace_autocomplete .ace_line-hover {	    border: 1px solid rgba(109, 150, 13, 0.8);	    background: rgba(58, 103, 78, 0.62);	}	.ace_completion-meta {	    opacity: 0.5;	    margin: 0.9em;	}	.ace_completion-message {	    color: blue;	}	.ace_editor.ace_autocomplete .ace_completion-highlight{	    color: #2d69c7;	}	.ace_dark.ace_editor.ace_autocomplete .ace_completion-highlight{	    color: #93ca12;	}	.ace_editor.ace_autocomplete {	    width: 300px;	    z-index: 200000;	    border: 1px lightgray solid;	    position: fixed;	    box-shadow: 2px 3px 5px rgba(0,0,0,.2);	    line-height: 1.4;	    background: #fefefe;	    color: #111;	}	.ace_dark.ace_editor.ace_autocomplete {	    border: 1px #484747 solid;	    box-shadow: 2px 3px 5px rgba(0, 0, 0, 0.51);	    line-height: 1.4;	    background: #25282c;	    color: #c1c1c1;	}","autocompletion.css",!1),n.AcePopup=h,n.$singleLineEditor=m}),ace.define("ace/autocomplete/util",["require","exports","module"],function(t,n,r){n.parForEach=function(s,l,u){var d=0,f=s.length;f===0&&u();for(var m=0;m<f;m++)l(s[m],function(h,p){d++,d===f&&u(h,p)})};var a=/[a-zA-Z_0-9\$\-\u00A2-\u2000\u2070-\uFFFF]/;n.retrievePrecedingIdentifier=function(s,l,u){u=u||a;for(var d=[],f=l-1;f>=0&&u.test(s[f]);f--)d.push(s[f]);return d.reverse().join("")},n.retrieveFollowingIdentifier=function(s,l,u){u=u||a;for(var d=[],f=l;f<s.length&&u.test(s[f]);f++)d.push(s[f]);return d},n.getCompletionPrefix=function(s){var l=s.getCursorPosition(),u=s.session.getLine(l.row),d;return s.completers.forEach((function(f){f.identifierRegexps&&f.identifierRegexps.forEach((function(m){!d&&m&&(d=this.retrievePrecedingIdentifier(u,l.column,m))}).bind(this))}).bind(this)),d||this.retrievePrecedingIdentifier(u,l.column)}}),ace.define("ace/autocomplete",["require","exports","module","ace/keyboard/hash_handler","ace/autocomplete/popup","ace/autocomplete/util","ace/lib/lang","ace/lib/dom","ace/snippets","ace/config"],function(t,n,r){var a=t("./keyboard/hash_handler").HashHandler,s=t("./autocomplete/popup").AcePopup,l=t("./autocomplete/util"),u=t("./lib/lang"),d=t("./lib/dom"),f=t("./snippets").snippetManager,m=t("./config"),h=function(){this.autoInsert=!1,this.autoSelect=!0,this.exactMatch=!1,this.gatherCompletionsId=0,this.keyboardHandler=new a,this.keyboardHandler.bindKeys(this.commands),this.blurListener=this.blurListener.bind(this),this.changeListener=this.changeListener.bind(this),this.mousedownListener=this.mousedownListener.bind(this),this.mousewheelListener=this.mousewheelListener.bind(this),this.changeTimer=u.delayedCall((function(){this.updateCompletions(!0)}).bind(this)),this.tooltipTimer=u.delayedCall(this.updateDocTooltip.bind(this),50)};(function(){this.$init=function(){return this.popup=new s(document.body||document.documentElement),this.popup.on("click",(function(g){this.insertMatch(),g.stop()}).bind(this)),this.popup.focus=this.editor.focus.bind(this.editor),this.popup.on("show",this.tooltipTimer.bind(null,null)),this.popup.on("select",this.tooltipTimer.bind(null,null)),this.popup.on("changeHoverMarker",this.tooltipTimer.bind(null,null)),this.popup},this.getPopup=function(){return this.popup||this.$init()},this.openPopup=function(g,b,v){this.popup||this.$init(),this.popup.autoSelect=this.autoSelect,this.popup.setData(this.completions.filtered,this.completions.filterText),g.keyBinding.addKeyboardHandler(this.keyboardHandler);var y=g.renderer;if(this.popup.setRow(this.autoSelect?0:-1),v)v&&!b&&this.detach();else{this.popup.setTheme(g.getTheme()),this.popup.setFontSize(g.getFontSize());var C=y.layerConfig.lineHeight,E=y.$cursorLayer.getPixelPosition(this.base,!0);E.left-=this.popup.getTextLeftOffset();var A=g.container.getBoundingClientRect();E.top+=A.top-y.layerConfig.offset,E.left+=A.left-g.renderer.scrollLeft,E.left+=y.gutterWidth,this.popup.show(E,C)}this.changeTimer.cancel()},this.detach=function(){this.editor.keyBinding.removeKeyboardHandler(this.keyboardHandler),this.editor.off("changeSelection",this.changeListener),this.editor.off("blur",this.blurListener),this.editor.off("mousedown",this.mousedownListener),this.editor.off("mousewheel",this.mousewheelListener),this.changeTimer.cancel(),this.hideDocTooltip(),this.gatherCompletionsId+=1,this.popup&&this.popup.isOpen&&this.popup.hide(),this.base&&this.base.detach(),this.activated=!1,this.completions=this.base=null},this.changeListener=function(g){var b=this.editor.selection.lead;(b.row!=this.base.row||b.column<this.base.column)&&this.detach(),this.activated?this.changeTimer.schedule():this.detach()},this.blurListener=function(g){var b=document.activeElement,v=this.editor.textInput.getElement(),y=g.relatedTarget&&this.tooltipNode&&this.tooltipNode.contains(g.relatedTarget),C=this.popup&&this.popup.container;b!=v&&b.parentNode!=C&&!y&&b!=this.tooltipNode&&g.relatedTarget!=v&&this.detach()},this.mousedownListener=function(g){this.detach()},this.mousewheelListener=function(g){this.detach()},this.goTo=function(g){this.popup.goTo(g)},this.insertMatch=function(g,b){if(g||(g=this.popup.getData(this.popup.getRow())),!g)return!1;var v=this.completions;if(this.editor.startOperation({command:{name:"insertMatch"}}),g.completer&&g.completer.insertMatch)g.completer.insertMatch(this.editor,g);else{if(!v)return!1;if(v.filterText)for(var y=this.editor.selection.getAllRanges(),C=0,E;E=y[C];C++)E.start.column-=v.filterText.length,this.editor.session.remove(E);g.snippet?f.insertSnippet(this.editor,g.snippet):this.editor.execCommand("insertstring",g.value||g)}this.completions==v&&this.detach(),this.editor.endOperation()},this.commands={Up:function(g){g.completer.goTo("up")},Down:function(g){g.completer.goTo("down")},"Ctrl-Up|Ctrl-Home":function(g){g.completer.goTo("start")},"Ctrl-Down|Ctrl-End":function(g){g.completer.goTo("end")},Esc:function(g){g.completer.detach()},Return:function(g){return g.completer.insertMatch()},"Shift-Return":function(g){g.completer.insertMatch(null,{deleteSuffix:!0})},Tab:function(g){var b=g.completer.insertMatch();if(!b&&!g.tabstopManager)g.completer.goTo("down");else return b},PageUp:function(g){g.completer.popup.gotoPageUp()},PageDown:function(g){g.completer.popup.gotoPageDown()}},this.gatherCompletions=function(g,b){var v=g.getSession(),y=g.getCursorPosition(),C=l.getCompletionPrefix(g);this.base=v.doc.createAnchor(y.row,y.column-C.length),this.base.$insertRight=!0;var E=[],A=g.completers.length;return g.completers.forEach(function(k,T){k.getCompletions(g,v,y,C,function($,S){!$&&S&&(E=E.concat(S)),b(null,{prefix:l.getCompletionPrefix(g),matches:E,finished:--A===0})})}),!0},this.showPopup=function(g,b){this.editor&&this.detach(),this.activated=!0,this.editor=g,g.completer!=this&&(g.completer&&g.completer.detach(),g.completer=this),g.on("changeSelection",this.changeListener),g.on("blur",this.blurListener),g.on("mousedown",this.mousedownListener),g.on("mousewheel",this.mousewheelListener),this.updateCompletions(!1,b)},this.updateCompletions=function(g,b){if(g&&this.base&&this.completions){var v=this.editor.getCursorPosition(),y=this.editor.session.getTextRange({start:this.base,end:v});if(y==this.completions.filterText)return;if(this.completions.setFilter(y),!this.completions.filtered.length)return this.detach();if(this.completions.filtered.length==1&&this.completions.filtered[0].value==y&&!this.completions.filtered[0].snippet)return this.detach();this.openPopup(this.editor,y,g);return}if(b&&b.matches){var v=this.editor.getSelectionRange().start;return this.base=this.editor.session.doc.createAnchor(v.row,v.column),this.base.$insertRight=!0,this.completions=new p(b.matches),this.openPopup(this.editor,"",g)}var C=this.gatherCompletionsId,E=(function(S){if(S.finished)return this.detach()}).bind(this),A=(function(S){var I=S.prefix,R=S.matches;this.completions=new p(R),this.exactMatch&&(this.completions.exactMatch=!0),this.completions.setFilter(I);var N=this.completions.filtered;if(!N.length||N.length==1&&N[0].value==I&&!N[0].snippet)return E(S);if(this.autoInsert&&N.length==1&&S.finished)return this.insertMatch(N[0]);this.openPopup(this.editor,I,g)}).bind(this),k=!0,T=null;if(this.gatherCompletions(this.editor,(function(S,I){var R=I.prefix,N=I&&I.matches;if(!N||!N.length)return E(I);if(!(R.indexOf(I.prefix)!==0||C!=this.gatherCompletionsId)){if(k){T=I;return}A(I)}}).bind(this)),k=!1,T){var $=T;T=null,A($)}},this.cancelContextMenu=function(){this.editor.$mouseHandler.cancelContextMenu()},this.updateDocTooltip=function(){var g=this.popup,b=g.data,v=b&&(b[g.getHoveredRow()]||b[g.getRow()]),y=null;if(!v||!this.editor||!this.popup.isOpen)return this.hideDocTooltip();if(this.editor.completers.some(function(C){return C.getDocTooltip&&(y=C.getDocTooltip(v)),y}),!y&&typeof v!="string"&&(y=v),typeof y=="string"&&(y={docText:y}),!y||!(y.docHTML||y.docText))return this.hideDocTooltip();this.showDocTooltip(y)},this.showDocTooltip=function(g){this.tooltipNode||(this.tooltipNode=d.createElement("div"),this.tooltipNode.className="ace_tooltip ace_doc-tooltip",this.tooltipNode.style.margin=0,this.tooltipNode.style.pointerEvents="auto",this.tooltipNode.tabIndex=-1,this.tooltipNode.onblur=this.blurListener.bind(this),this.tooltipNode.onclick=this.onTooltipClick.bind(this));var b=this.tooltipNode;g.docHTML?b.innerHTML=g.docHTML:g.docText&&(b.textContent=g.docText),b.parentNode||document.body.appendChild(b);var v=this.popup,y=v.container.getBoundingClientRect();b.style.top=v.container.style.top,b.style.bottom=v.container.style.bottom,b.style.display="block",window.innerWidth-y.right<320?y.left<320?v.isTopdown?(b.style.top=y.bottom+"px",b.style.left=y.left+"px",b.style.right="",b.style.bottom=""):(b.style.top=v.container.offsetTop-b.offsetHeight+"px",b.style.left=y.left+"px",b.style.right="",b.style.bottom=""):(b.style.right=window.innerWidth-y.left+"px",b.style.left=""):(b.style.left=y.right+1+"px",b.style.right="")},this.hideDocTooltip=function(){if(this.tooltipTimer.cancel(),!!this.tooltipNode){var g=this.tooltipNode;!this.editor.isFocused()&&document.activeElement==g&&this.editor.focus(),this.tooltipNode=null,g.parentNode&&g.parentNode.removeChild(g)}},this.onTooltipClick=function(g){for(var b=g.target;b&&b!=this.tooltipNode;){if(b.nodeName=="A"&&b.href){b.rel="noreferrer",b.target="_blank";break}b=b.parentNode}},this.destroy=function(){if(this.detach(),this.popup){this.popup.destroy();var g=this.popup.container;g&&g.parentNode&&g.parentNode.removeChild(g)}this.editor&&this.editor.completer==this&&this.editor.completer==null,this.popup=null}}).call(h.prototype),h.for=function(g){return g.completer||(m.get("sharedPopups")?(h.$shared||(h.$sharedInstance=new h),g.completer=h.$sharedInstance):(g.completer=new h,g.once("destroy",function(b,v){v.completer.destroy()}))),g.completer},h.startCommand={name:"startAutocomplete",exec:function(g,b){var v=h.for(g);v.autoInsert=!1,v.autoSelect=!0,v.showPopup(g,b),v.cancelContextMenu()},bindKey:"Ctrl-Space|Ctrl-Shift-Space|Alt-Space"};var p=function(g,b){this.all=g,this.filtered=g,this.filterText=b||"",this.exactMatch=!1};(function(){this.setFilter=function(g){if(g.length>this.filterText&&g.lastIndexOf(this.filterText,0)===0)var b=this.filtered;else var b=this.all;this.filterText=g,b=this.filterCompletions(b,this.filterText),b=b.sort(function(y,C){return C.exactMatch-y.exactMatch||C.$score-y.$score||(y.caption||y.value).localeCompare(C.caption||C.value)});var v=null;b=b.filter(function(y){var C=y.snippet||y.caption||y.value;return C===v?!1:(v=C,!0)}),this.filtered=b},this.filterCompletions=function(g,b){var v=[],y=b.toUpperCase(),C=b.toLowerCase();e:for(var E=0,A;A=g[E];E++){var k=A.caption||A.value||A.snippet;if(k){var T=-1,$=0,S=0,I,R;if(this.exactMatch){if(b!==k.substr(0,b.length))continue e}else{var N=k.toLowerCase().indexOf(C);if(N>-1)S=N;else for(var M=0;M<b.length;M++){var F=k.indexOf(C[M],T+1),D=k.indexOf(y[M],T+1);if(I=F>=0&&(D<0||F<D)?F:D,I<0)continue e;R=I-T-1,R>0&&(T===-1&&(S+=10),S+=R,$=$|1<<M),T=I}}A.matchMask=$,A.exactMatch=S?0:1,A.$score=(A.score||0)-S,v.push(A)}}return v}}).call(p.prototype),n.Autocomplete=h,n.FilteredList=p}),ace.define("ace/autocomplete/text_completer",["require","exports","module","ace/range"],function(t,n,r){var a=t("../range").Range,s=/[^a-zA-Z_0-9\$\-\u00C0-\u1FFF\u2C00-\uD7FF\w]+/;function l(d,f){var m=d.getTextRange(a.fromPoints({row:0,column:0},f));return m.split(s).length-1}function u(d,f){var m=l(d,f),h=d.getValue().split(s),p=Object.create(null),g=h[m];return h.forEach(function(b,v){if(!(!b||b===g)){var y=Math.abs(m-v),C=h.length-y;p[b]?p[b]=Math.max(C,p[b]):p[b]=C}}),p}n.getCompletions=function(d,f,m,h,p){var g=u(f,m),b=Object.keys(g);p(null,b.map(function(v){return{caption:v,value:v,score:g[v],meta:"local"}}))}}),ace.define("ace/ext/language_tools",["require","exports","module","ace/snippets","ace/autocomplete","ace/config","ace/lib/lang","ace/autocomplete/util","ace/autocomplete/text_completer","ace/editor","ace/config"],function(t,n,r){var a=t("../snippets").snippetManager,s=t("../autocomplete").Autocomplete,l=t("../config"),u=t("../lib/lang"),d=t("../autocomplete/util"),f=t("../autocomplete/text_completer"),m={getCompletions:function(k,T,$,S,I){if(T.$mode.completer)return T.$mode.completer.getCompletions(k,T,$,S,I);var R=k.session.getState($.row),N=T.$mode.getCompletions(R,T,$,S);I(null,N)}},h=function(k){var T={};return k.replace(/\${(\d+)(:(.*?))?}/g,function($,S,I,R){return T[S]=R||""}).replace(/\$(\d+?)/g,function($,S){return T[S]})},p={getCompletions:function(k,T,$,S,I){var R=[],N=T.getTokenAt($.row,$.column);N&&N.type.match(/(tag-name|tag-open|tag-whitespace|attribute-name|attribute-value)\.xml$/)?R.push("html-tag"):R=a.getActiveScopes(k);var M=a.snippetMap,F=[];R.forEach(function(D){for(var x=M[D]||[],B=x.length;B--;){var K=x[B],U=K.name||K.tabTrigger;U&&F.push({caption:U,snippet:K.content,meta:K.tabTrigger&&!K.name?K.tabTrigger+" ":"snippet",type:"snippet"})}},this),I(null,F)},getDocTooltip:function(k){k.type=="snippet"&&!k.docHTML&&(k.docHTML=["<b>",u.escapeHTML(k.caption),"</b>","<hr></hr>",u.escapeHTML(h(k.snippet))].join(""))}},g=[p,f,m];n.setCompleters=function(k){g.length=0,k&&g.push.apply(g,k)},n.addCompleter=function(k){g.push(k)},n.textCompleter=f,n.keyWordCompleter=m,n.snippetCompleter=p;var b={name:"expandSnippet",exec:function(k){return a.expandWithTab(k)},bindKey:"Tab"},v=function(k,T){y(T.session.$mode)},y=function(k){typeof k=="string"&&(k=l.$modes[k]),k&&(a.files||(a.files={}),C(k.$id,k.snippetFileId),k.modes&&k.modes.forEach(y))},C=function(k,T){!T||!k||a.files[k]||(a.files[k]={},l.loadModule(T,function($){$&&(a.files[k]=$,!$.snippets&&$.snippetText&&($.snippets=a.parseSnippetFile($.snippetText)),a.register($.snippets||[],$.scope),$.includeScopes&&(a.snippetMap[$.scope].includeScopes=$.includeScopes,$.includeScopes.forEach(function(S){y("ace/mode/"+S)})))}))},E=function(k){var T=k.editor,$=T.completer&&T.completer.activated;if(k.command.name==="backspace")$&&!d.getCompletionPrefix(T)&&T.completer.detach();else if(k.command.name==="insertstring"){var S=d.getCompletionPrefix(T);if(S&&!$){var I=s.for(T);I.autoInsert=!1,I.showPopup(T)}}},A=t("../editor").Editor;t("../config").defineOptions(A.prototype,"editor",{enableBasicAutocompletion:{set:function(k){k?(this.completers||(this.completers=Array.isArray(k)?k:g),this.commands.addCommand(s.startCommand)):this.commands.removeCommand(s.startCommand)},value:!1},enableLiveAutocompletion:{set:function(k){k?(this.completers||(this.completers=Array.isArray(k)?k:g),this.commands.on("afterExec",E)):this.commands.removeListener("afterExec",E)},value:!1},enableSnippets:{set:function(k){k?(this.commands.addCommand(b),this.on("changeMode",v),v(null,this)):(this.commands.removeCommand(b),this.off("changeMode",v))},value:!1}})}),function(){ace.require(["ace/ext/language_tools"],function(t){o&&(o.exports=t)})}()})(extLanguage_tools);var extLanguage_toolsExports=extLanguage_tools.exports,themeAmbiance={exports:{}};(function(o,e){ace.define("ace/theme/ambiance",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-ambiance",n.cssText=`.ace-ambiance .ace_gutter {	background-color: #3d3d3d;	background-image: linear-gradient(left, #3D3D3D, #333);	background-repeat: repeat-x;	border-right: 1px solid #4d4d4d;	text-shadow: 0px 1px 1px #4d4d4d;	color: #222;	}	.ace-ambiance .ace_gutter-layer {	background: repeat left top;	}	.ace-ambiance .ace_gutter-active-line {	background-color: #3F3F3F;	}	.ace-ambiance .ace_fold-widget {	text-align: center;	}	.ace-ambiance .ace_fold-widget:hover {	color: #777;	}	.ace-ambiance .ace_fold-widget.ace_start,	.ace-ambiance .ace_fold-widget.ace_end,	.ace-ambiance .ace_fold-widget.ace_closed{	background: none !important;	border: none;	box-shadow: none;	}	.ace-ambiance .ace_fold-widget.ace_start:after {	content: ''	}	.ace-ambiance .ace_fold-widget.ace_end:after {	content: ''	}	.ace-ambiance .ace_fold-widget.ace_closed:after {	content: ''	}	.ace-ambiance .ace_print-margin {	border-left: 1px dotted #2D2D2D;	right: 0;	background: #262626;	}	.ace-ambiance .ace_scroller {	-webkit-box-shadow: inset 0 0 10px black;	-moz-box-shadow: inset 0 0 10px black;	-o-box-shadow: inset 0 0 10px black;	box-shadow: inset 0 0 10px black;	}	.ace-ambiance {	color: #E6E1DC;	background-color: #202020;	}	.ace-ambiance .ace_cursor {	border-left: 1px solid #7991E8;	}	.ace-ambiance .ace_overwrite-cursors .ace_cursor {	border: 1px solid #FFE300;	background: #766B13;	}	.ace-ambiance.normal-mode .ace_cursor-layer {	z-index: 0;	}	.ace-ambiance .ace_marker-layer .ace_selection {	background: rgba(221, 240, 255, 0.20);	}	.ace-ambiance .ace_marker-layer .ace_selected-word {	border-radius: 4px;	border: 8px solid #3f475d;	box-shadow: 0 0 4px black;	}	.ace-ambiance .ace_marker-layer .ace_step {	background: rgb(198, 219, 174);	}	.ace-ambiance .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(255, 255, 255, 0.25);	}	.ace-ambiance .ace_marker-layer .ace_active-line {	background: rgba(255, 255, 255, 0.031);	}	.ace-ambiance .ace_invisible {	color: #333;	}	.ace-ambiance .ace_paren {	color: #24C2C7;	}	.ace-ambiance .ace_keyword {	color: #cda869;	}	.ace-ambiance .ace_keyword.ace_operator {	color: #fa8d6a;	}	.ace-ambiance .ace_punctuation.ace_operator {	color: #fa8d6a;	}	.ace-ambiance .ace_identifier {	}	.ace-ambiance .ace-statement {	color: #cda869;	}	.ace-ambiance .ace_constant {	color: #CF7EA9;	}	.ace-ambiance .ace_constant.ace_language {	color: #CF7EA9;	}	.ace-ambiance .ace_constant.ace_library {	}	.ace-ambiance .ace_constant.ace_numeric {	color: #78CF8A;	}	.ace-ambiance .ace_invalid {	text-decoration: underline;	}	.ace-ambiance .ace_invalid.ace_illegal {	color:#F8F8F8;	background-color: rgba(86, 45, 86, 0.75);	}	.ace-ambiance .ace_invalid,	.ace-ambiance .ace_deprecated {	text-decoration: underline;	font-style: italic;	color: #D2A8A1;	}	.ace-ambiance .ace_support {	color: #9B859D;	}	.ace-ambiance .ace_support.ace_function {	color: #DAD085;	}	.ace-ambiance .ace_function.ace_buildin {	color: #9b859d;	}	.ace-ambiance .ace_string {	color: #8f9d6a;	}	.ace-ambiance .ace_string.ace_regexp {	color: #DAD085;	}	.ace-ambiance .ace_comment {	font-style: italic;	color: #555;	}	.ace-ambiance .ace_comment.ace_doc {	}	.ace-ambiance .ace_comment.ace_doc.ace_tag {	color: #666;	font-style: normal;	}	.ace-ambiance .ace_definition,	.ace-ambiance .ace_type {	color: #aac6e3;	}	.ace-ambiance .ace_variable {	color: #9999cc;	}	.ace-ambiance .ace_variable.ace_language {	color: #9b859d;	}	.ace-ambiance .ace_xml-pe {	color: #494949;	}	.ace-ambiance .ace_gutter-layer,	.ace-ambiance .ace_text-layer {	background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAQAAAAHUWYVAABFFUlEQVQYGbzBCeDVU/74/6fj9HIcx/FRHx9JCFmzMyGRURhLZIkUsoeRfUjS2FNDtr6WkMhO9sm+S8maJfu+Jcsg+/o/c+Z4z/t97/vezy3z+z8ekGlnYICG/o7gdk+wmSHZ1z4pJItqapjoKXWahm8NmV6eOTbWUOp6/6a/XIg6GQqmenJ2lDHyvCFZ2cBDbmtHA043VFhHwXxClWmeYAdLhV00Bd85go8VmaFCkbVkzlQENzfBDZ5gtN7HwF0KDrTwJ0dypSOzpaKCMwQHKTIreYIxlmhXTzTWkVm+LTynZhiSBT3RZQ7aGfjGEd3qyXQ1FDymqbKxpspERQN2MiRjNZlFFQXfCNFm9nM1zpAsoYjmtRTc5ajwuaXc5xrWskT97RaKzAGe5ARHhVUsDbjKklziiX5WROcJwSNCNI+9w1Jwv4Zb2r7lCMZ4oq5C0EdTx+2GzNuKpJ+iFf38JEWkHJn9DNF7mmBDITrWEg0VWL3pHU20tSZnuqWu+R3BtYa8XxV1HO7GyD32UkOpL/yDloINFTmvtId+nmAjxRw40VMwVKiwrKLE4bK5UOVntYwhOcSSXKrJHKPJedocpGjVz/ZMIbnYUPB10/eKCrs5apqpgVmWzBYWpmtKHecJPjaUuEgRDDaU0oZghCJ6zNMQ5ZhDYx05r5v2muQdM0EILtXUsaKiQX9WMEUotagQzFbUNN6NUPC2nm5pxEWGCjMc3GdJHjSU2kORLK/JGSrkfGEIjncU/CYUnOipoYemwj8tST9NsJmB7TUVXtbUtXATJVZXBMvYeTXJfobgJUPmGMP/yFaWonaa6BcFO3nqcIqCozSZoZoSr1g4zJOzuyGnxTEX3lUEJ7WcZgme8ddaWvWJo2AJR9DZU3CUIbhCSG6ybSwN6qtJVnCU2svDTP2ZInOw2cBTrqtQahtNZn9NcJ4l2NaSmSkkP1noZWnVwkLmdUPOwLZEwy2Z3S3R+4rIG9hcbpPXHFVWcQdZkn2FOta3cKWQnNRC5g1LsJah4GCzSVsKnCOY5OAFRTBekyyryeyilhFKva75r4Mc0aWanGEaThcy31s439KKxTzJYY5WTHPU1FtIHjQU3Oip4xlNzj/lBw23dYZVliQa7WAXf4shetcQfatI+jWRDBPmyNeW6A1P5kdDgyYJlba0BIM8BZu1JfrFwItyjcAMR3K0BWOIrtMEXyhyrlVEx3ui5dUBjmB/Q3CXW85R4mBD0s7B+4q5tKUjOlb9qqmhi5AZ6GFIC5HXtOobdYGlVdMVbNJ8toNTFcHxnoL+muBagcctjWnbNMuR00uI7nQESwg5q2qqrKWIfrNUmeQocY6HuyxJV02wj36w00yhpmUFenv4p6fUkZYqLyuinx2RGOjhCXYyJF84oiU00YMOOhhquNdfbOB7gU88pY4xJO8LVdp6/q2voeB4R04vIdhSE40xZObx1HGGJ/ja0LBthFInKaLPPFzuCaYaoj8JjPME8yoyxo6zlBqkiUZYgq00OYMswbWO5NGmq+xhipxHLRW29ARjNKXO0wRnear8XSg4XFPLKEPUS1GqvyLwiuBUoa7zpZ0l5xxFwWmWZC1H5h5FwU8eQ7K+g8UcVY6TMQreVQT/8uQ8Z+ALIXnSEa2pYZQneE9RZbSBNYXfWYJzW/h/4j4Dp1tYVcFIC5019Vyi4ThPqSFCzjGWaHQTBU8q6vrVwgxP9Lkm840imWKpcLCjYTtrKuwvsKSnrvHCXGkSMk9p6lhckfRpIeis+N2PiszT+mFLspyGleUhDwcLrZqmyeylxwjBcKHEapqkmyangyLZRVOijwOtCY5SsG5zL0OwlCJ4y5KznF3EUNDDrinwiyLZRzOXtlBbK5ITHFGLp8Q0R6ab6mS7enI2cFrxOyHvOCFaT1HThS1krjCwqWeurCkk+willhCC+RSZnRXBiZaC5RXRIZYKp2lyfrHwiKPKR0JDzrdU2EFgpidawlFDR6FgXUMNa+g1FY3bUQh2cLCwosRdnuQTS/S+JVrGLeWIvtQUvONJxlqSQYYKpwoN2kaocLjdVsis4Mk80ESF2YpSkzwldjHkjFCUutI/r+EHDU8oCs6yzL3PhWiEooZdFMkymlas4AcI3KmoMMNSQ3tHzjGWCrcJJdYyZC7QFGwjRL9p+MrRkAGWzIaWCn9W0F3TsK01c2ZvQw0byvxuQU0r1lM0qJO7wW0kRIMdDTtXEdzi4VIh+EoIHm0mWtAtpCixlabgn83fKTI7anJe9ST7WIK1DMGpQmYeA58ImV6ezOGOzK2Kgq01pd60cKWiUi9Lievb/0vIDPHQ05Kzt4ddPckQBQtoaurjyHnek/nKzpQLrVgKPjIkh2v4uyezpv+Xoo7fPFXaGFp1vaLKxQ4uUpQQS5VuQs7BCq4xRJv7fwpVvvFEB3j+620haOuocqMhWd6TTPAEx+mdFNGHdranFe95WrWmIvlY4F1Dle2ECgc6cto7SryuqGGGha0tFQ5V53migUKmg6XKAo4qS3mik+0OZpAhOLeZKicacgaYcyx5hypYQE02ZA4xi/pNhOQxR4klNKyqacj+mpxnLTnnGSo85++3ZCZq6lrZkXlGEX3o+C9FieccJbZWVFjC0Yo1FZnJhoYMFoI1hEZ9r6hwg75HwzBNhbZCdJEfJwTPGzJvaKImw1yYX1HDAmpXR+ZJQ/SmgqMNVQb5vgamGwLtt7VwvP7Qk1xpiM5x5Cyv93E06MZmgs0Nya2azIKOYKCGBQQW97RmhKNKF02JZqHEJ4o58qp7X5EcZmc56trXEqzjCBZ1MFGR87Ql2tSTs6CGxS05PTzRQorkbw7aKoKXFDXsYW42VJih/q+FP2BdTzDTwVqOYB13liM50vG7wy28qagyuIXMeQI/Oqq8bcn5wJI50xH00CRntyfpL1T4hydYpoXgNiFzoIUTDZnLNRzh4TBHwbYGDvZkxmlyJloyr6tRihpeUG94GnKtIznREF0tzJG/OOr73JBcrSh1k6WuTprgLU+mnSGnv6Zge0NNz+kTDdH8nuAuTdJDCNb21LCiIuqlYbqGzT3RAoZofQfjFazkqeNWdYaGvYTM001EW2oKPvVk1ldUGSgUtHFwjKM1h9jnFcmy5lChoLNaQMGGDsYbKixlaMBmmsx1QjCfflwTfO/gckW0ruZ3jugKR3R5W9hGUWqCgxuFgsuaCHorotGKzGaeZB9DMsaTnKCpMtwTvOzhYk0rdrArKCqcaWmVk1+F372ur1YkKxgatI8Qfe1gIX9wE9FgS8ESmuABIXnRUbCapcKe+nO7slClSZFzpV/LkLncEb1qiO42fS3R855Su2mCLh62t1SYZZYVmKwIHjREF2uihTzB20JOkz7dkxzYQnK0UOU494wh+VWRc6Un2kpTaVgLDFEkJ/uhzRcI0YKGgpGWOlocBU/a4fKoJ/pEaNV6jip3+Es9VXY078rGnmAdf7t9ylPXS34RBSuYPs1UecZTU78WanhBCHpZ5sAoTz0LGZKjPf9TRypqWEiTvOFglL1fCEY3wY/++rbk7C8bWebA6p6om6PgOL2kp44TFJlVNBXae2rqqdZztOJpT87GQsE9jqCPIe9VReZuQ/CIgacsyZdCpIScSYqcZk8r+nsyCzhyfhOqHGOIvrLknC8wTpFcaYiGC/RU1NRbUeUpocQOnkRpGOrIOcNRx+1uA0UrzhSSt+VyS3SJpnFWkzNDqOFGIWcfR86DnmARTQ1HKIL33ExPiemeOhYSSjzlSUZZuE4TveoJLnBUOFof6KiysCbnAEcZgcUNTDOwkqWu3RWtmGpZwlHhJENdZ3miGz0lJlsKnjbwqSHQjpxnFDlTLLwqJPMZMjd7KrzkSG7VsxXBZE+F8YZkb01Oe00yyRK9psh5SYh29ySPKBo2ylNht7ZkZnsKenjKNJu9PNEyZpaCHv4Kt6RQsLvAVp7M9kIimmCUwGeWqLMmGuIotYMmWNpSahkhZw9FqZsVnKJhsjAHvtHMsTM9fCI06Dx/u3vfUXCqfsKRc4oFY2jMsoo/7DJDwZ1CsIKnJu+J9ldkpmiCxQx1rWjI+T9FwcWWzOuaYH0Hj7klNRVWEQpmaqosakiGNTFHdjS/qnUdmf0NJW5xsL0HhimCCZZSRzmSPTXJQ4aaztAwtZnoabebJ+htCaZ7Cm535ByoqXKbX1WRc4Eh2MkRXWzImVc96Cj4VdOKVxR84VdQsIUM8Psoou2byVHyZFuq7O8otbSQ2UAoeEWTudATLGSpZzVLlXVkPU2Jc+27lsw2jmg5T5VhbeE3BT083K9WsTTkFU/Osi0rC5lRlpwRHUiesNS0sOvmqGML1aRbPAxTJD9ZKtxuob+hhl8cwYGWpJ8nub7t5p6coYbMovZ1BTdaKn1jYD6h4GFDNFyT/Kqe1XCXphXHOKLZmuRSRdBPEfVUXQzJm5YGPGGJdvAEr7hHNdGZnuBvrpciGmopOLf5N0uVMy0FfYToJk90uUCbJupaVpO53UJXR2bVpoU00V2KOo4zMFrBd0Jtz2pa0clT5Q5L8IpQ177mWQejPMEJhuQjS10ref6HHjdEhy1P1EYR7GtO0uSsKJQYLiTnG1rVScj5lyazpqWGl5uBbRWl7m6ixGOOnEsMJR7z8J0n6KMnCdxhiNYQCoZ6CmYLnO8omC3MkW3bktlPmEt/VQQHejL3+dOE5FlPdK/Mq8hZxxJtLyRrepLThYKbLZxkSb5W52vYxNOaOxUF0yxMUPwBTYqCzy01XayYK0sJyWBLqX0MwU5CzoymRzV0EjjeUeLgDpTo6ij42ZAzvD01dHUUTPLU96MdLbBME8nFBn7zJCMtJcZokn8YoqU0FS5WFKyniHobguMcmW8N0XkWZjkyN3hqOMtS08r+/xTBwpZSZ3qiVRX8SzMHHjfUNFjgHEPmY9PL3ykEzxkSre/1ZD6z/NuznuB0RcE1TWTm9zRgfUWVJiG6yrzgmWPXC8EAR4Wxhlad0ZbgQyEz3pG5RVEwwDJH2mgKpjcTiCOzn1lfUWANFbZ2BA8balnEweJC9J0iuaeZoI+ippFCztEKVvckR2iice1JvhVytrQwUAZpgsubCPaU7xUe9vWnaOpaSBEspalykhC9bUlOMpT42ZHca6hyrqKmw/wMR8H5ZmdFoBVJb03O4UL0tSNnvIeRmkrLWqrs78gcrEn2tpcboh0UPOW3UUR9PMk4T4nnNKWmCjlrefhCwxRNztfmIQVdDElvS4m1/WuOujoZCs5XVOjtKPGokJzsYCtFYoWonSPT21DheU/wWhM19FcElwqNGOsp9Q8N/cwXaiND1MmeL1Q5XROtYYgGeFq1aTMsoMmcrKjQrOFQTQ1fmBYhmW6o8Jkjc7iDJRTBIo5kgJD5yMEYA3srCg7VFKwiVJkmRCc5ohGOKhsYMn/XBLdo5taZjlb9YAlGWRimqbCsoY7HFAXLa5I1HPRxMMsQDHFkWtRNniqT9UEeNjcE7RUlrCJ4R2CSJuqlKHWvJXjAUNcITYkenuBRB84TbeepcqTj3zZyFJzgYQdHnqfgI0ddUwS6GqWpsKWhjq9cV0vBAEMN2znq+EBfIWT+pClYw5xsTlJU6GeIBsjGmmANTzJZiIYpgrM0Oa8ZMjd7NP87jxhqGOhJlnQtjuQpB+8aEE00wZFznSJPyHxgH3HkPOsJFvYk8zqCHzTs1BYOa4J3PFU+UVRZxlHDM4YavlNUuMoRveiZA2d7grMNc2g+RbSCEKzmgYsUmWmazFJyoiOZ4KnyhKOGRzWJa0+moyV4TVHDzn51Awtqaphfk/lRQ08FX1iiqxTB/kLwd0VynKfEvI6cd4XMV5bMhZ7gZUWVzYQ6Nm2BYzxJbw3bGthEUUMfgbGeorae6DxHtJoZ6alhZ0+ytiVoK1R4z5PTrOECT/SugseEOlb1MMNR4VRNcJy+V1Hg9ONClSZFZjdHlc6W6FBLdJja2MC5hhpu0DBYEY1TFGwiFAxRRCsYkiM9JRb0JNMVkW6CZYT/2EiTGWmo8k+h4FhDNE7BvppoTSFnmCV5xZKzvcCdDo7VVPnIU+I+Rc68juApC90MwcFCsJ5hDqxgScYKreruyQwTqrzoqDCmhWi4IbhB0Yrt3RGa6GfDv52rKXWhh28dyZaWUvcZeMTBaZoSGyiCtRU5J8iviioHaErs7Jkj61syVzTTgOcUOQ8buFBTYWdL5g3T4qlpe0+wvD63heAXRfCCIed9RbCsp2CiI7raUOYOTU13N8PNHvpaGvayo4a3LLT1lDrVEPT2zLUlheB1R+ZTRfKWJ+dcocLJfi11vyJ51lLqJ0WD7tRwryezjiV5W28uJO9qykzX8JDe2lHl/9oyBwa2UMfOngpXCixvKdXTk3wrsKmiVYdZIqsoWEERjbcUNDuiaQomGoIbFdEHmsyWnuR+IeriKDVLnlawlyNHKwKlSU631PKep8J4Q+ayjkSLKYLhalNHlYvttb6fHm0p6OApsZ4l2VfdqZkjuysy6ysKLlckf1KUutCTs39bmCgEyyoasIWlVaMF7mgmWtBT8Kol5xpH9IGllo8cJdopcvZ2sImlDmMIbtDk3KIpeNiS08lQw11NFPTwVFlPP6pJ2gvRfI7gQUfmNAtf6Gs0wQxDsKGlVBdF8rCa3jzdwMaGHOsItrZk7hAyOzpK9VS06j5F49b0VNGOOfKs3lDToMsMBe9ZWtHFEgxTJLs7qrygKZjUnmCYoeAqeU6jqWuLJup4WghOdvCYJnrSkSzoyRkm5M2StQwVltPkfCAk58tET/CSg+8MUecmotMEnhBKfWBIZsg2ihruMJQaoIm+tkTLKEqspMh00w95gvFCQRtDwTT1gVDDSEVdlwqZfxoQRbK0g+tbiBZxzKlpnpypejdDwTaeOvorMk/IJE10h9CqRe28hhLbe0pMsdSwv4ZbhKivo2BjDWfL8UKJgeavwlwb5KlwhyE4u4XkGE2ytZCznKLCDZZq42VzT8HLCrpruFbIfOIINmh/qCdZ1ZBc65kLHR1Bkyf5zn6pN3SvGKIlFNGplhrO9QSXanLOMQTLCa0YJCRrCZm/CZmrLTm7WzCK4GJDiWUdFeYx1LCFg3NMd0XmCuF3Y5rITLDUsYS9zoHVzwnJoYpSTQoObyEzr4cFBNqYTopoaU/wkyLZ2lPhX/5Y95ulxGTV7KjhWrOZgl8MyUUafjYraNjNU1N3IWcjT5WzWqjwtoarHSUObGYO3GCJZpsBlnJGPd6ZYLyl1GdCA2625IwwJDP8GUKymbzuyPlZlvTUsaUh5zFDhRWFzPKKZLAlWdcQbObgF9tOqOsmB1dqcqYJmWstFbZRRI9poolmqiLnU0POvxScpah2iSL5UJNzgScY5+AuIbpO0YD3NCW+dLMszFSdFCWGqG6eVq2uYVNDdICGD6W7EPRWZEY5gpsE9rUkS3mijzzJnm6UpUFXG1hCUeVoS5WfNcFpblELL2qqrCvMvRfd45oalvKU2tiQ6ePJOVMRXase9iTtLJztPxJKLWpo2CRDcJwn2sWSLKIO1WQWNTCvpVUvOZhgSC40JD0dOctaSqzkCRbXsKlb11Oip6PCJ0IwSJM31j3akRxlP7Rwn6aGaUL0qiLnJkvB3xWZ2+Q1TfCwpQH3G0o92UzmX4o/oJNQMMSQc547wVHhdk+VCw01DFYEnTxzZKAm74QmeNNR1w6WzEhNK15VJzuCdxQ53dRUDws5KvwgBMOEgpcVNe0hZI6RXT1Jd0cyj5nsaEAHgVmGaJIlWdsc5Ui2ElrRR6jrRAttNMEAIWrTDFubkZaok7/AkzfIwfuWVq0jHzuCK4QabtLUMVPB3kJ0oyHTSVFlqMALilJf2Rf8k5aaHtMfayocLBS8L89oKoxpJvnAkDPa0qp5DAUTHKWmCcnthlou8iCKaFFLHWcINd1nyIwXqrSxMNmSs6KmoL2QrKuWtlQ5V0120xQ5vRyZS1rgFkWwhiOwiuQbR0OOVhQM9iS3tiXp4RawRPMp5tDletOOBL95MpM01dZTBM9pkn5qF010rIeHFcFZhmSGpYpTsI6nwhqe5C9ynhlpp5ophuRb6WcJFldkVnVEwwxVfrVkvnWUuNLCg5bgboFHPDlDPDmnK7hUrWiIbjadDclujlZcaokOFup4Ri1kacV6jmrrK1hN9bGwpKEBQ4Q6DvIUXOmo6U5LqQM6EPyiKNjVkPnJkDPNEaxhiFay5ExW1NXVUGqcpYYdPcGiCq7z/TSlbhL4pplWXKd7NZO5QQFrefhRQW/NHOsqcIglc4UhWklR8K0QzbAw08CBDnpbgqXdeD/QUsM4RZXDFBW6WJKe/mFPdH0LtBgiq57wFLzlyQzz82qYx5D5WJP5yVJDW01BfyHnS6HKO/reZqId1WGa4Hkh2kWodJ8i6KoIPlAj2hPt76CzXsVR6koPRzWTfKqIentatYpQw2me4AA3y1Kind3SwoOKZDcFXTwl9tWU6mfgRk9d71sKtlNwrjnYw5tC5n5LdKiGry3JKNlHEd3oaMCFHrazBPMp/uNJ+V7IudcSbeOIdjUEdwl0VHCOZo5t6YluEuaC9mQeMgSfOyKnYGFHcIeQ84yQWbuJYJpZw5CzglDH7gKnWqqM9ZTaXcN0TeYhR84eQtJT76JJ1lREe7WnnvsMmRc9FQ7SBBM9mV3lCUdmHk/S2RAMt0QjFNFqQpWjDPQ01DXWUdDBkXziKPjGEP3VP+zIWU2t7im41FOloyWzn/L6dkUy3VLDaZ6appgDLHPjJEsyvJngWEPUyVBiAaHCTEXwrLvSEbV1e1gKJniicWorC1MUrVjB3uDhJE/wgSOzk1DXpk0k73qCM8xw2UvD5kJmDUfOomqMpWCkJRlvKXGmoeBm18USjVIk04SClxTB6YrgLAPLWYK9HLUt5cmc0vYES8GnTeRc6skZbQkWdxRsIcyBRzx1DbTk9FbU0caTPOgJHhJKnOGIVhQqvKmo0llRw9sabrZkDtdg3PqaKi9oatjY8B+G371paMg6+mZFNNtQ04mWBq3rYLOmtWWQp8KJnpy9DdFensyjdqZ+yY40VJlH8wcdLzC8PZnvHMFUTZUrDTkLyQaGus5X5LzpYAf3i+e/ZlhqGqWhh6Ou6xTR9Z6oi5AZZtp7Mj2EEm8oSpxiYZCHU/1fbGdNNNRRoZMhmilEb2gqHOEJDtXkHK/JnG6IrvbPCwV3NhONVdS1thBMs1T4QOBcTWa2IzhMk2nW5Kyn9tXUtpv9RsG2msxk+ZsQzRQacJncpgke0+T8y5Fzj8BiGo7XlJjaTIlpQs7KFjpqGnKuoyEPeIKnFMkZHvopgh81ySxNFWvJWcKRs70j2FOT012IllEEO1n4pD1513Yg2ssQPOThOkvyrqHUdEXOSEsihmBbTbKX1kLBPWqWkLOqJbjB3GBIZmoa8qWl4CG/iZ7oiA72ZL7TJNeZUY7kFQftDcHHluBzRbCegzMtrRjVQpX2lgoPKKLJAkcbMl01XK2p7yhL8pCBbQ3BN2avJgKvttcrWDK3CiUOVxQ8ZP+pqXKyIxnmBymCg5vJjNfkPK4+c8cIfK8ocVt7kmfd/I5SR1hKvCzUtb+lhgc00ZaO6CyhIQP1Uv4yIZjload72PXX0OIJvnFU+0Zf6MhsJwTfW0r0UwQfW4LNLZl5HK261JCZ4qnBaAreVAS3WrjV0LBnNDUNNDToCEeFfwgcb4gOEqLRhirWkexrCEYKVV711DLYEE1XBEsp5tpTGjorkomKYF9FDXv7fR3BGwbettSxnyL53MBPjsxDZjMh+VUW9NRxq1DhVk+FSxQcaGjV9Pawv6eGByw5qzoy7xk4RsOShqjJwWKe/1pEEfzkobeD/dQJmpqedcyBTy2sr4nGNRH0c0SPWTLrqAc0OQcb/gemKgqucQT7ySWKCn2EUotoCvpZct7RO2sy/QW0IWcXd7pQRQyZVwT2USRO87uhjioTLKV2brpMUcMQRbKH/N2T+UlTpaMls6cmc6CCNy3JdYYSUzzJQ4oSD3oKLncULOiJvjBEC2oqnCJkJluCYy2ZQ5so9YYlZ1VLlQU1mXEW1jZERwj/MUSRc24TdexlqLKfQBtDTScJUV8FszXBEY5ktpD5Ur9hYB4Nb1iikw3JoYpkKX+RodRKFt53MMuRnKSpY31PwYaGaILh3wxJGz9TkTPEETxoCWZrgvOlmyMzxFEwVJE5xZKzvyJ4WxEc16Gd4Xe3Weq4XH2jKRikqOkGQ87hQnC7wBmGYLAnesX3M+S87eFATauuN+Qcrh7xIxXJbUIdMw3JGE3ylCWzrieaqCn4zhGM19TQ3z1oH1AX+pWEqIc7wNGAkULBo/ZxRaV9NNyh4Br3rCHZzbzmSfawBL0dNRwpW1kK9mxPXR9povcdrGSZK9c2k0xwFGzjuniCtRSZCZ6ccZ7gaktmgAOtKbG/JnOkJrjcQTdFMsxRQ2cLY3WTIrlCw1eWKn8R6pvt4GFDso3QoL4a3nLk3G6JrtME3dSenpx7PNFTmga0EaJTLQ061sEeQoWXhSo9LTXsaSjoJQRXeZLtDclbCrYzfzHHeaKjHCVOUkQHO3JeEepr56mhiyaYYKjjNU+Fed1wS5VlhWSqI/hYUdDOkaxiKehoyOnrCV5yBHtbWFqTHCCwtpDcYolesVR5yUzTZBb3RNMd0d6WP+SvhuBmRcGxnuQzT95IC285cr41cLGQ6aJJhmi4TMGempxeimBRQw1tFKV+8jd6KuzoSTqqDxzRtpZkurvKEHxlqXKRIjjfUNNXQsNOsRScoWFLT+YeRZVD3GRN0MdQcKqQjHDMrdGGVu3iYJpQx3WGUvfbmxwFfR20WBq0oYY7LMFhhgYtr8jpaEnaOzjawWWaTP8mMr0t/EPDPoqcnxTBI5o58L7uoWnMrpoqPwgVrlAUWE+V+TQl9rawoyP6QGAlQw2TPRX+YSkxyBC8Z6jhHkXBgQL7WII3DVFnRfCrBfxewv9D6xsyjys4VkhWb9pUU627JllV0YDNHMku/ldNMMXDEo4aFnAkk4U6frNEU4XgZUPmEKHUl44KrzmYamjAbh0JFvGnaTLPu1s9jPCwjFpYiN7z1DTOk/nc07CfDFzmCf7i+bfNHXhDtLeBXzTBT5rkMvWOIxpl4EMh2LGJBu2syDnAEx2naEhHDWMMzPZEhygyS1mS5RTJr5ZkoKbEUoYqr2kqdDUE8ztK7OaIntJkFrIECwv8LJTaVx5XJE86go8dFeZ3FN3rjabCAYpoYEeC9zzJVULBbmZhDyd7ko09ydpNZ3nm2Kee4FPPXHnYEF1nqOFEC08LUVcDvYXkJHW8gTaKCk9YGOeIJhqiE4ToPEepdp7IWFjdwnWaufGMwJJCMtUTTBBK9BGCOy2tGGrJTHIwyEOzp6aPzNMOtlZkDvcEWpP5SVNhfkvDxhmSazTJXYrM9U1E0xwFVwqZQwzJxw6+kGGGUj2FglGGmnb1/G51udRSMNlTw6GGnCcUwVcOpmsqTHa06o72sw1RL02p9z0VbnMLOaIX3QKaYKSCFQzBKEUNHTSc48k53RH9wxGMtpQa5KjjW0W0n6XCCCG4yxNNdhQ4R4l1Ff+2sSd6UFHiIEOyqqFgT01mEUMD+joy75jPhOA+oVVLm309FR4yVOlp4RhLiScNmSmaYF5Pw0STrOIoWMSR2UkRXOMp+M4SHW8o8Zoi6OZgjKOaFar8zZDzkWzvKOjkKBjmCXby8JahhjXULY4KlzgKLvAwxVGhvyd4zxB1d9T0piazmKLCVZY5sKiD0y2ZSYrkUEPUbIk+dlQ4SJHTR50k1DPaUWIdTZW9NJwnJMOECgd7ou/MnppMJ02O1VT4Wsh85MnZzcFTngpXGKo84qmwgKbCL/orR/SzJ2crA+t6Mp94KvxJUeIbT3CQu1uIdlQEOzlKfS3UMcrTiFmOuroocrZrT2AcmamOKg8YomeEKm/rlT2sociMaybaUlFhuqHCM2qIJ+rg4EcDFymiDSxzaHdPcpE62pD5kyM5SBMoA1PaUtfIthS85ig1VPiPPYXgYEMNk4Qq7TXBgo7oT57gPUdwgCHzhIVFPFU6OYJzHAX9m5oNrVjeE61miDrqQ4VSa1oiURTsKHC0IfjNwU2WzK6eqK8jWln4g15TVBnqmDteCJ501PGAocJhhqjZdtBEB6lnhLreFJKxmlKbeGrqLiSThVIbCdGzloasa6lpMQXHCME2boLpJgT7yWaemu6wBONbqGNVRS0PKIL7LckbjmQtR7K8I5qtqel+T/ChJTNIKLjdUMNIRyvOEko9YYl2cwQveBikCNawJKcLBbc7+JM92mysNvd/Fqp8a0k6CNEe7cnZrxlW0wQXaXjaktnRwNOGZKYiONwS7a1JVheq3WgJHlQUGKHKmp4KAxXR/ULURcNgoa4zhKSLpZR3kxRRb0NmD0OFn+UCS7CzI1nbP6+o4x47QZE5xRCt3ZagnYcvmpYQktXdk5YKXTzBC57kKEe0VVuiSYqapssMS3C9p2CKkHOg8B8Pa8p5atrIw3qezIWanMGa5HRDNF6RM9wcacl0N+Q8Z8hsIkSnaIIdHRUOEebAPy1zbCkhM062FCJtif7PU+UtoVXzWKqM1PxXO8cfdruhFQ/a6x3JKYagvVDhQEtNiyiiSQ7OsuRsZUku0CRNDs4Sog6KKjsZgk2bYJqijgsEenoKeniinRXBn/U3lgpPdyDZynQx8IiioMnCep5Ky8mjGs6Wty0l1hUQTcNWswS3WRp2kCNZwJG8omG8JphPUaFbC8lEfabwP7VtM9yoaNCAjpR41VNhrD9LkbN722v0CoZMByFzhaW+MyzRYEWFDQwN2M4/JiT76PuljT3VU/A36eaIThb+R9oZGOAJ9tewkgGvqOMNRWYjT/Cwu99Q8LqDE4TgbLWxJ1jaDDAERsFOFrobgjUsBScaguXU8kKm2RL19tRypSHnHNlHiIZqgufs4opgQdVdwxBNNFBR6kVFqb8ogimOzB6a6HTzrlDHEpYaxjiiA4TMQobkDg2vejjfwJGWmnbVFAw3H3hq2NyQfG7hz4aC+w3BbwbesG0swYayvpAs6++Ri1Vfzx93mFChvyN5xVHTS+0p9aqCAxyZ6ZacZyw5+7uuQkFPR9DDk9NOiE7X1PCYJVjVUqq7JlrHwWALF5nfHNGjApdpqgzx5OwilDhCiDYTgnc9waGW4BdLNNUQvOtpzDOWHDH8D7TR/A/85KljEQu3NREc4Pl/6B1Hhc8Umb5CsKMmGC9EPcxoT2amwHNCmeOEnOPbklnMkbOgIvO5UMOpQrS9UGVdt6iH/fURjhI/WOpaW9OKLYRod6HCUEdOX000wpDZQ6hwg6LgZfOqo1RfT/CrJzjekXOGhpc1VW71ZLbXyyp+93ILbC1kPtIEYx0FIx1VDrLoVzXRKRYWk809yYlC9ImcrinxtabKnzRJk3lAU1OLEN1j2zrYzr2myHRXJFf4h4QKT1qSTzTB5+ZNTzTRkAxX8FcLV2uS8eoQQ2aAkFzvCM72sJIcJET3WPjRk5wi32uSS9rfZajpWEvj9hW42F4o5NytSXYy8IKHay10VYdrcl4SkqscrXpMwyGOgtkajheSxdQqmpxP1L3t4R5PqasFnrQEjytq6qgp9Y09Qx9o4S1FzhUCn1kyHSzBWLemoSGvOqLNhZyBjmCaAUYpMgt4Ck7wBBMMwWKWgjsUwTaGVsxWC1mYoKiyqqeGKYqonSIRQ3KIkHO0pmAxTdBHkbOvfllfr+AA+7gnc50huVKYK393FOyg7rbPO/izI7hE4CnHHHnJ0ogNPRUGeUpsrZZTBJcrovUcJe51BPsr6GkJdhCCsZ6aTtMEb2pqWkqeVtDXE/QVggsU/Nl86d9RMF3DxvZTA58agu810RWawCiSzzXBeU3MMW9oyJUedvNEvQyNu1f10BSMddR1vaLCYpYa/mGocLSiYDcLbQz8aMn5iyF4xBNMs1P0QEOV7o5gaWGuzSeLue4tt3ro7y4Tgm4G/mopdZgl6q0o6KzJWE3mMksNr3r+a6CbT8g5wZNzT9O7fi/zpaOmnz3BRoqos+tv9zMbdpxsqDBOEewtJLt7cg5wtKKbvldpSzRRCD43VFheCI7yZLppggMVBS/KMAdHODJvOwq2NQSbKKKPLdFWQs7Fqo+mpl01JXYRgq8dnGLhTiFzqmWsUMdpllZdbKlyvSdYxhI9YghOtxR8LgSLWHK62mGGVoxzBE8LNWzqH9CUesQzFy5RQzTc56mhi6fgXEWwpKfE5Z7M05ZgZUPmo6auiv8YKzDYwWBLMErIbKHJvOwIrvEdhOBcQ9JdU1NHQ7CXn2XIDFBKU2WAgcX9UAUzDXWd5alwuyJ41Z9rjKLCL4aCp4WarhPm2rH+SaHUYE001JDZ2ZAzXPjdMpZWvC9wmqIB2lLhQ01D5jO06hghWMndbM7yRJMsoCj1vYbnFQVrW9jak3OlEJ3s/96+p33dEPRV5GxiqaGjIthUU6FFEZyqCa5qJrpBdzSw95IUnOPIrCUUjRZQFrbw5PR0R1qiYx3cb6nrWUMrBmmiBQxVHtTew5ICP/ip6g4hed/Akob/32wvBHsIOX83cI8hGeNeNPCIkPmXe8fPKx84OMSRM1MTdXSwjCZ4S30jVGhvqTRak/OVhgGazHuOCud5onEO1lJr6ecVyaOK6H7zqlBlIaHE0oroCgfvGJIdPcmfLNGLjpz7hZwZQpUbFME0A1cIJa7VNORkgfsMBatbKgwwJM9bSvQXeNOvbIjelg6WWvo5kvbKaJJNHexkKNHL9xRyFlH8Ti2riB5wVPhUk7nGkJnoCe428LR/wRGdYIlmWebCyxou1rCk4g/ShugBDX0V0ZQWkh0dOVsagkM0yV6OoLd5ye+pRlsCr0n+KiQrGuq5yJDzrTAXHtLUMduTDBVKrSm3eHL+6ijxhFDX9Z5gVU/wliHYTMiMFpKLNMEywu80wd3meoFmt6VbRMPenhrOc6DVe4pgXU8DnnHakLOIIrlF4FZPIw6R+zxBP0dyq6OOZ4Q5sLKCcz084ok+VsMMyQhNZmmBgX5xIXOEJTmi7VsGTvMTNdHHhpzdbE8Du2oKxgvBqQKdDDnTFOylCFaxR1syz2iqrOI/FEpNc3C6f11/7+ASS6l2inq2ciTrCCzgyemrCL5SVPjQkdPZUmGy2c9Sw9FtR1sS30RmsKPCS4rkIC/2U0MduwucYolGaPjKEyhzmiPYXagyWbYz8LWBDdzRimAXzxx4z8K9hpzlhLq+NiQ97HuKorMUfK/OVvC2JfiHUPCQI/q7J2gjK+tTDNxkCc4TMssqCs4TGtLVwQihyoAWgj9bosU80XGW6Ac9TJGziaUh5+hnFcHOnlaM1iRn29NaqGENTTTSUHCH2tWTeV0osUhH6psuVLjRUmGWhm6OZEshGeNowABHcJ2Bpy2ZszRcKkRXd2QuKVEeXnbfaEq825FguqfgfE2whlChSRMdron+LATTPQ2Z369t4B9C5gs/ylzv+CMmepIDPclFQl13W0rspPd1JOcbghGOEutqCv5qacURQl3dDKyvyJlqKXGPgcM9FfawJAMVmdcspcYKOZc4GjDYkFlK05olNMHyHn4zFNykyOxt99RkHlfwmiHo60l2EKI+mhreEKp080Tbug08BVPcgoqC5zWt+NLDTZ7oNSF51N1qie7Va3uCCwyZbkINf/NED6jzOsBdZjFN8oqG3wxVunqCSYYKf3EdhJyf9YWGf7tRU2oH3VHgPr1fe5J9hOgHd7xQ0y7qBwXr23aGErP0cm64JVjZwsOGqL+mhNgZmhJLW2oY4UhedsyBgzrCKrq7BmcpNVhR6jBPq64Vgi+kn6XE68pp8J5/+0wRHGOpsKenQn9DZntPzjRLZpDAdD2fnSgkG9tmIXnUwQ6WVighs7Yi2MxQ0N3CqYaCXkJ0oyOztMDJjmSSpcpvlrk0RMMOjmArQ04PRV1DO1FwhCVaUVPpKUM03JK5SxPsIWRu8/CGHi8UHChiqGFDTbSRJWeYUDDcH6vJWUxR4k1FXbMUwV6e4AJFXS8oMqsZKqzvYQ9DDQdZckY4aGsIhtlubbd2r3j4QBMoTamdPZk7O/Bf62lacZwneNjQoGcdVU7zJOd7ghsUHOkosagic6cnWc8+4gg285R6zZP5s1/LUbCKIznTwK36PkdwlOrl4U1LwfdCCa+IrvFkmgw1PCAUXKWo0sURXWcI2muKJlgyFzhynCY4RBOsqCjoI1R5zREco0n2Vt09BQtYSizgKNHfUmUrQ5UOCh51BFcLmY7umhYqXKQomOop8bUnWNNQcIiBcYaC6xzMNOS8JQQfeqKBmmglB+97ok/lfk3ygaHSyZaCRTzRxQo6GzLfa2jWBPepw+UmT7SQEJyiyRkhBLMVOfcoMjcK0eZChfUNzFAUzCsEN5vP/X1uP/n/aoMX+K+nw/Hjr/9xOo7j7Pju61tLcgvJpTWXNbfN5jLpi6VfCOviTktKlFusQixdEKWmEBUKNaIpjZRSSOXSgzaaKLdabrm1/9nZ+/f+vd/vz/v9+Xy+zZ7PRorYoZqyLrCwQdEAixxVOEXNNnjX2nUSRlkqGmWowk8lxR50JPy9Bo6qJXaXwNvREBvnThPEPrewryLhcAnj5WE15Fqi8W7R1sAuEu86S4ENikItFN4xkv9Af4nXSnUVcLiA9xzesFpivRRVeFKtsMRaKBhuSbjOELnAUtlSQUpXgdfB4Z1oSbnFEetbQ0IrAe+Y+pqnDcEJFj6S8LDZzZHwY4e3XONNlARraomNEt2bkvGsosA3ioyHm+6jCMbI59wqt4eeara28IzEmyPgoRaUOEDhTVdEJhmCoTWfC0p8aNkCp0oYqih2iqGi4yXeMkOsn4LdLLnmKfh/YogjNsPebeFGR4m9BJHLzB61XQ3BtpISfS2FugsK9FAtLWX1dCRcrCnUp44CNzuCowUZmxSRgYaE6Za0W2u/E7CVXCiI/UOR8aAm1+OSyE3mOUcwyc1zBBeoX1kiKy0Zfxck1Gsyulti11i83QTBF5Kg3pDQThFMVHiPSlK+0cSedng/VaS8bOZbtsBcTcZAR8JP5KeqQ1OYKAi20njdNNRpgnsU//K+JnaXJaGTomr7aYIphoRn9aeShJWKEq9LcozSF7QleEfDI5LYm5bgVkFkRwVDBCVu0DDIkGupo8TZBq+/pMQURYErJQmPKGKjNDkWOLx7Jd5QizdUweIaKrlP7SwJDhZvONjLkOsBBX9UpGxnydhXkfBLQ8IxgojQbLFnJf81JytSljclYYyEFyx0kVBvKWOFJmONpshGAcsduQY5giVNCV51eOdJYo/pLhbvM0uDHSevNKRcrKZIqnCtJeEsO95RoqcgGK4ocZcho1tTYtcZvH41pNQ7vA0WrhIfOSraIIntIAi+NXWCErdbkvrWwjRLrt0NKUdL6KSOscTOdMSOUtBHwL6OLA0vNSdynaWQEnCpIvKaIrJJEbvHkmuNhn6OjM8VkSGSqn1uYJCGHnq9I3aLhNME3t6GjIkO7xrNFumpyTNX/NrwX7CrIRiqqWijI9JO4d1iieykyfiposQIQ8YjjsjlBh6oHWbwRjgYJQn2NgSnNycmJAk3NiXhx44Sxykihxm8ybUwT1OVKySc7vi3OXVkdBJ4AyXBeksDXG0IhgtYY0lY5ahCD0ehborIk5aUWRJviMA7Xt5kyRjonrXENkm8yYqgs8VzgrJmClK20uMM3jRJ0FiQICQF9hdETlLQWRIb5ki6WDfWRPobvO6a4GP5mcOrNzDFELtTkONLh9dXE8xypEg7z8A9jkhrQ6Fhjlg/QVktJXxt4WXzT/03Q8IaQWSqIuEvloQ2mqC9Jfi7wRul4RX3pSPlzpoVlmCtI2jvKHCFhjcM3sN6lqF6HxnKelLjXWbwrpR4xzuCrTUZx2qq9oAh8p6ixCUGr78g8oyjRAtB5CZFwi80VerVpI0h+IeBxa6Zg6kWvpDHaioYYuEsRbDC3eOmC2JvGYLeioxGknL2UATNJN6hmtj1DlpLvDVmocYbrGCVJKOrg4X6DgddLA203BKMFngdJJFtFd7vJLm6KEpc5yjQrkk7M80SGe34X24nSex1Ra5Omgb71JKyg8SrU3i/kARKwWpH0kOGhKkObyfd0ZGjvyXlAkVZ4xRbYJ2irFMkFY1SwyWxr2oo4zlNiV+7zmaweFpT4kR3kaDAFW6xpSqzJay05FtYR4HmZhc9UxKbbfF2V8RG1MBmSaE+kmC6JnaRXK9gsiXhJHl/U0qM0WTcbyhwkYIvFGwjSbjfwhiJt8ZSQU+Bd5+marPMOkVkD0muxYLIfEuhh60x/J92itguihJSEMySVPQnTewnEm+620rTQEMsOfo4/kP/0ARvWjitlpSX7GxBgcMEsd3EEeYWvdytd+Saawi6aCIj1CkGb6Aj9rwhx16Cf3vAwFy5pyLhVonXzy51FDpdEblbkdJbUcEPDEFzQ8qNmhzzLTmmKWKbFCXeEuRabp6rxbvAtLF442QjQ+wEA9eL1xSR7Q0JXzlSHjJ4exq89yR0laScJ/FW6z4a73pFMEfDiRZvuvijIt86RaSFOl01riV2mD1UEvxGk/Geg5aWwGki1zgKPG9J2U8PEg8qYvMsZeytiTRXBMslCU8JSlxi8EabjwUldlDNLfzTUmCgxWsjqWCOHavYAqsknKFIO0yQ61VL5AVFxk6WhEaCAkdJgt9aSkzXlKNX2jEa79waYuc7gq0N3GDJGCBhoiTXUEPsdknCUE1CK0fwsiaylSF2uiDyO4XX3pFhNd7R4itFGc0k/ElBZwWvq+GC6szVeEoS/MZ+qylwpKNKv9Z469UOjqCjwlusicyTxG6VpNxcQ8IncoR4RhLbR+NdpGGmJWOcIzJGUuKPGpQg8rrG21dOMqQssJQ4RxH5jaUqnZuQ0F4Q+cjxLwPtpZbIAk3QTJHQWBE5S1BokoVtDd6lhqr9UpHSUxMcIYl9pojsb8h4SBOsMQcqvOWC2E8EVehqiJ1hrrAEbQxeK0NGZ0Gkq+guSRgniM23bIHVkqwx4hiHd7smaOyglyIyQuM978j4VS08J/A2G1KeMBRo4fBaSNhKUEZfQewVQ/C1I+MgfbEleEzCUw7mKXI0M3hd1EESVji8x5uQ41nxs1q4RMJCCXs7Iq9acpxn22oSDnQ/sJTxsCbHIYZiLyhY05TY0ZLIOQrGaSJDDN4t8pVaIrsqqFdEegtizc1iTew5Q4ayBDMUsQMkXocaYkc0hZua412siZ1rSXlR460zRJ5SlHGe5j801RLMlJTxtaOM3Q1pvxJ45zUlWFD7rsAbpfEm1JHxG0eh8w2R7QQVzBUw28FhFp5QZzq8t2rx2joqulYTWSuJdTYfWwqMFMcovFmSyJPNyLhE4E10pHzYjOC3huArRa571ZsGajQpQx38SBP5pyZB6lMU3khDnp0MBV51BE9o2E+TY5Ml2E8S7C0o6w1xvCZjf0HkVEHCzFoyNmqC+9wdcqN+Tp7jSDheE9ws8Y5V0NJCn2bk2tqSY4okdrEhx1iDN8cSudwepWmAGXKcJXK65H9to8jYQRH7SBF01ESUJdd0TayVInaWhLkOjlXE5irKGOnI6GSWGCJa482zBI9rCr0jyTVcEuzriC1vcr6mwFGSiqy5zMwxBH/TJHwjSPhL8+01kaaSUuMFKTcLEvaUePcrSmwn8DZrgikWb7CGPxkSjhQwrRk57tctmxLsb9sZvL9LSlyuSLlWkqOjwduo8b6Uv1DkmudIeFF2dHCgxVtk8dpIvHpBxhEOdhKk7OLIUSdJ+cSRY57B+0DgGUUlNfpthTfGkauzxrvTsUUaCVhlKeteTXCoJDCa2NOKhOmC4G1H8JBd4OBZReSRGkqcb/CO1PyLJTLB4j1q8JYaIutEjSLX8YKM+a6phdMsdLFUoV5RTm9JSkuDN8WcIon0NZMNZWh1q8C7SJEwV5HxrmnnTrf3KoJBlmCYI2ilSLlfEvlE4011NNgjgthzEua0oKK7JLE7HZHlEl60BLMVFewg4EWNt0ThrVNEVkkiTwpKXSWJzdRENgvKGq4IhjsiezgSFtsfCUq8qki5S1LRQeYQQ4nemmCkImWMw3tFUoUBZk4NOeZYEp4XRKTGa6wJjrWNHBVJR4m3FCnbuD6aak2WsMTh3SZImGCIPKNgsDpVwnsa70K31lCFJZYcwwSMFcQulGTsZuEaSdBXkPGZhu0FsdUO73RHjq8MPGGIfaGIbVTk6iuI3GFgucHrIQkmWSJdBd7BBu+uOryWAhY7+Lki9rK5wtEQzWwvtbqGhIMFwWRJsElsY4m9IIg9L6lCX0VklaPAYkfkZEGDnOWowlBJjtMUkcGK4Lg6EtoZInMUBVYLgn0UsdmCyCz7gIGHFfk+k1QwTh5We7A9x+IdJ6CvIkEagms0hR50eH9UnTQJ+2oiKyVlLFUE+8gBGu8MQ3CppUHesnjTHN4QB/UGPhCTHLFPHMFrCqa73gqObUJGa03wgbhHkrCfpEpzNLE7JDS25FMKhlhKKWKfCgqstLCPu1zBXy0J2ztwjtixBu8UTRn9LVtkmCN2iyFhtME70JHRQ1KVZXqKI/KNIKYMCYs1GUMEKbM1bKOI9LDXC7zbHS+bt+1MTWS9odA9DtrYtpbImQJ2VHh/lisEwaHqUk1kjKTAKknkBEXkbkdMGwq0dnhzLJF3NJH3JVwrqOB4Sca2hti75nmJN0WzxS6UxDYoEpxpa4htVlRjkYE7DZGzJVU72uC9IyhQL4i8YfGWSYLLNcHXloyz7QhNifmKSE9JgfGmuyLhc403Xm9vqcp6gXe3xuuv8F6VJNxkyTHEkHG2g0aKXL0MsXc1bGfgas2//dCONXiNLCX+5mB7eZIl1kHh7ajwpikyzlUUWOVOsjSQlsS+M0R+pPje/dzBXRZGO0rMtgQrLLG9VSu9n6CMXS3BhwYmSoIBhsjNBmZbgusE9BCPCP5triU4VhNbJfE+swSP27aayE8tuTpYYjtrYjMVGZdp2NpS1s6aBnKSHDsbKuplKbHM4a0wMFd/5/DmGyKrJSUaW4IBrqUhx0vyfzTBBLPIUcnZdrAkNsKR0sWRspumSns6Ch0v/qqIbBYUWKvPU/CFoyrDJGwSNFhbA/MlzKqjrO80hRbpKx0Jewsi/STftwGSlKc1JZyAzx05dhLEdnfQvhZOqiHWWEAHC7+30FuRcZUgaO5gpaIK+xsiHRUsqaPElTV40xQZQ107Q9BZE1nryDVGU9ZSQ47bmhBpLcYpUt7S+xuK/FiT8qKjwXYw5ypS2iuCv7q1gtgjhuBuB8LCFY5cUuCNtsQOFcT+4Ih9JX+k8Ea6v0iCIRZOtCT0Et00JW5UeC85Cg0ScK0k411HcG1zKtre3SeITBRk7WfwDhEvaYLTHP9le0m8By0JDwn4TlLW/aJOvGHxdjYUes+ScZigCkYQdNdEOhkiezgShqkx8ueKjI8lDfK2oNiOFvrZH1hS+tk7NV7nOmLHicGWEgubkXKdwdtZknCLJXaCpkrjZBtLZFsDP9CdxWsSr05Sxl6CMmoFbCOgryX40uDtamB7SVmXW4Ihlgpmq+00tBKUUa83WbjLUNkzDmY7cow1JDygyPGlhgGKYKz4vcV7QBNbJIgM11TUqZaMdwTeSguH6rOaw1JRKzaaGyxVm2EJ/uCIrVWUcZUkcp2grMsEjK+DMwS59jQk3Kd6SEq1d0S6uVmO4Bc1lDXTUcHjluCXEq+1OlBDj1pi9zgiXxnKuE0SqTXwhqbETW6RggMEnGl/q49UT2iCzgJvRwVXS2K/d6+ZkyUl7jawSVLit46EwxVljDZwoSQ20sDBihztHfk2yA8NVZghiXwrYHQdfKAOtzsayjhY9bY0yE2CWEeJ9xfzO423xhL5syS2TFJofO2pboHob0nY4GiAgRrvGQEDa/FWSsoaaYl0syRsEt3kWoH3B01shCXhTUWe9w3Bt44SC9QCh3eShQctwbaK2ApLroGCMlZrYqvlY3qYhM0aXpFkPOuoqJ3Dm6fxXrGwVF9gCWZagjPqznfkuMKQ8DPTQRO8ZqG1hPGKEm9IgpGW4DZDgTNriTxvFiq+Lz+0cKfp4wj6OCK9JSnzNSn9LFU7UhKZZMnYwcJ8s8yRsECScK4j5UOB95HFO0CzhY4xJxuCix0lDlEUeMdS6EZBkTsUkZ4K74dugyTXS7aNgL8aqjDfkCE0ZbwkCXpaWCKhl8P7VD5jxykivSyxyZrYERbe168LYu9ZYh86IkscgVLE7tWPKmJv11CgoyJltMEbrohtVAQfO4ImltiHEroYEs7RxAarVpY8AwXMcMReFOTYWe5iiLRQxJ5Q8DtJ8LQhWOhIeFESPGsILhbNDRljNbHzNRlTFbk2S3L0NOS6V1KFJYKUbSTcIIhM0wQ/s2TM0SRMNcQmSap3jCH4yhJZKSkwyRHpYYgsFeQ4U7xoCB7VVOExhXepo9ABBsYbvGWKXPME3lyH95YioZ0gssQRWWbI+FaSMkXijZXwgiTlYdPdkNLaETxlyDVIwqeaEus0aTcYcg0RVOkpR3CSJqIddK+90JCxzsDVloyrFd5ZAr4TBKfaWa6boEA7C7s6EpYaeFPjveooY72mjIccLHJ9HUwVlDhKkmutJDJBwnp1rvulJZggKDRfbXAkvC/4l3ozQOG9a8lxjx0i7nV4jSXc7vhe3OwIxjgSHjdEhhsif9YkPGlus3iLFDnWOFhtCZbJg0UbQcIaR67JjthoCyMEZRwhiXWyxO5QxI6w5NhT4U1WsJvDO60J34fW9hwzwlKij6ZAW9ne4L0s8C6XeBMEkd/LQy1VucBRot6QMlbivaBhoBgjqGiCJNhsqVp/S2SsG6DIONCR0dXhvWbJ+MRRZJkkuEjgDXJjFQW6SSL7GXK8Z2CZg7cVsbWGoKmEpzQ5elpiy8Ryg7dMkLLUEauzeO86CuwlSOlgYLojZWeJ9xM3S1PWfEfKl5ISLQ0MEKR8YOB2QfCxJBjrKPCN4f9MkaSsqoVXJBmP7EpFZ9UQfOoOFwSzBN4MQ8LsGrymlipcJQhmy0GaQjPqCHaXRwuCZwRbqK2Fg9wlClZqYicrIgMdZfxTQ0c7TBIbrChxmuzoKG8XRaSrIhhiyNFJkrC7oIAWMEOQa5aBekPCRknCo4IKPrYkvCDI8aYmY7WFtprgekcJZ3oLIqssCSMtFbQTJKwXYy3BY5oCh2iKPCpJOE+zRdpYgi6O2KmOAgvVCYaU4ySRek1sgyFhJ403QFHiVEmJHwtybO1gs8Hr5+BETQX3War0qZngYGgtVZtoqd6vFSk/UwdZElYqyjrF4HXUeFspIi9IGKf4j92pKGAdCYMVsbcV3kRF0N+R8LUd5PCsIGWoxDtBkCI0nKofdJQxT+LtZflvuc8Q3CjwWkq8KwUpHzkK/NmSsclCL0nseQdj5FRH5CNHSgtLiW80Of5HU9Hhlsga9bnBq3fEVltKfO5IaSTmGjjc4J0otcP7QsJUSQM8pEj5/wCuUuC2DWz8AAAAAElFTkSuQmCC");	}	.ace-ambiance .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNQUFD4z6Crq/sfAAuYAuYl+7lfAAAAAElFTkSuQmCC") right repeat-y;	}	`;var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/ambiance"],function(t){o&&(o.exports=t)})}()})(themeAmbiance);var themeChaos={exports:{}};(function(o,e){ace.define("ace/theme/chaos",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-chaos",n.cssText=".ace-chaos .ace_gutter {	background: #141414;	color: #595959;	border-right: 1px solid #282828;	}	.ace-chaos .ace_gutter-cell.ace_warning {	background-image: none;	background: #FC0;	border-left: none;	padding-left: 0;	color: #000;	}	.ace-chaos .ace_gutter-cell.ace_error {	background-position: -6px center;	background-image: none;	background: #F10;	border-left: none;	padding-left: 0;	color: #000;	}	.ace-chaos .ace_print-margin {	border-left: 1px solid #555;	right: 0;	background: #1D1D1D;	}	.ace-chaos {	background-color: #161616;	color: #E6E1DC;	}	.ace-chaos .ace_cursor {	border-left: 2px solid #FFFFFF;	}	.ace-chaos .ace_cursor.ace_overwrite {	border-left: 0px;	border-bottom: 1px solid #FFFFFF;	}	.ace-chaos .ace_marker-layer .ace_selection {	background: #494836;	}	.ace-chaos .ace_marker-layer .ace_step {	background: rgb(198, 219, 174);	}	.ace-chaos .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #FCE94F;	}	.ace-chaos .ace_marker-layer .ace_active-line {	background: #333;	}	.ace-chaos .ace_gutter-active-line {	background-color: #222;	}	.ace-chaos .ace_invisible {	color: #404040;	}	.ace-chaos .ace_keyword {	color:#00698F;	}	.ace-chaos .ace_keyword.ace_operator {	color:#FF308F;	}	.ace-chaos .ace_constant {	color:#1EDAFB;	}	.ace-chaos .ace_constant.ace_language {	color:#FDC251;	}	.ace-chaos .ace_constant.ace_library {	color:#8DFF0A;	}	.ace-chaos .ace_constant.ace_numeric {	color:#58C554;	}	.ace-chaos .ace_invalid {	color:#FFFFFF;	background-color:#990000;	}	.ace-chaos .ace_invalid.ace_deprecated {	color:#FFFFFF;	background-color:#990000;	}	.ace-chaos .ace_support {	color: #999;	}	.ace-chaos .ace_support.ace_function {	color:#00AEEF;	}	.ace-chaos .ace_function {	color:#00AEEF;	}	.ace-chaos .ace_string {	color:#58C554;	}	.ace-chaos .ace_comment {	color:#555;	font-style:italic;	padding-bottom: 0px;	}	.ace-chaos .ace_variable {	color:#997744;	}	.ace-chaos .ace_meta.ace_tag {	color:#BE53E6;	}	.ace-chaos .ace_entity.ace_other.ace_attribute-name {	color:#FFFF89;	}	.ace-chaos .ace_markup.ace_underline {	text-decoration: underline;	}	.ace-chaos .ace_fold-widget {	text-align: center;	}	.ace-chaos .ace_fold-widget:hover {	color: #777;	}	.ace-chaos .ace_fold-widget.ace_start,	.ace-chaos .ace_fold-widget.ace_end,	.ace-chaos .ace_fold-widget.ace_closed{	background: none !important;	border: none;	box-shadow: none;	}	.ace-chaos .ace_fold-widget.ace_start:after {	content: ''	}	.ace-chaos .ace_fold-widget.ace_end:after {	content: ''	}	.ace-chaos .ace_fold-widget.ace_closed:after {	content: ''	}	.ace-chaos .ace_indent-guide {	border-right:1px dotted #333;	margin-right:-1px;	}	.ace-chaos .ace_fold { 	background: #222; 	border-radius: 3px; 	color: #7AF; 	border: none; 	}	.ace-chaos .ace_fold:hover {	background: #CCC; 	color: #000;	}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/chaos"],function(t){o&&(o.exports=t)})}()})(themeChaos);var themeChrome={exports:{}};(function(o,e){ace.define("ace/theme/chrome",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-chrome",n.cssText='.ace-chrome .ace_gutter {	background: #ebebeb;	color: #333;	overflow : hidden;	}	.ace-chrome .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-chrome {	background-color: #FFFFFF;	color: black;	}	.ace-chrome .ace_cursor {	color: black;	}	.ace-chrome .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-chrome .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-chrome .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-chrome .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-chrome .ace_invalid {	background-color: rgb(153, 0, 0);	color: white;	}	.ace-chrome .ace_fold {	}	.ace-chrome .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-chrome .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-chrome .ace_support.ace_type,	.ace-chrome .ace_support.ace_class	.ace-chrome .ace_support.ace_other {	color: rgb(109, 121, 222);	}	.ace-chrome .ace_variable.ace_parameter {	font-style:italic;	color:#FD971F;	}	.ace-chrome .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-chrome .ace_comment {	color: #236e24;	}	.ace-chrome .ace_comment.ace_doc {	color: #236e24;	}	.ace-chrome .ace_comment.ace_doc.ace_tag {	color: #236e24;	}	.ace-chrome .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-chrome .ace_variable {	color: rgb(49, 132, 149);	}	.ace-chrome .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-chrome .ace_entity.ace_name.ace_function {	color: #0000A2;	}	.ace-chrome .ace_heading {	color: rgb(12, 7, 255);	}	.ace-chrome .ace_list {	color:rgb(185, 6, 144);	}	.ace-chrome .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-chrome .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-chrome .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-chrome .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-chrome .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-chrome .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-chrome .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-chrome .ace_storage,	.ace-chrome .ace_keyword,	.ace-chrome .ace_meta.ace_tag {	color: rgb(147, 15, 128);	}	.ace-chrome .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-chrome .ace_string {	color: #1A1AA6;	}	.ace-chrome .ace_entity.ace_other.ace_attribute-name {	color: #994409;	}	.ace-chrome .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/chrome"],function(t){o&&(o.exports=t)})}()})(themeChrome);var themeClouds={exports:{}};(function(o,e){ace.define("ace/theme/clouds",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-clouds",n.cssText='.ace-clouds .ace_gutter {	background: #ebebeb;	color: #333	}	.ace-clouds .ace_print-margin {	width: 1px;	background: #e8e8e8	}	.ace-clouds {	background-color: #FFFFFF;	color: #000000	}	.ace-clouds .ace_cursor {	color: #000000	}	.ace-clouds .ace_marker-layer .ace_selection {	background: #BDD5FC	}	.ace-clouds.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #FFFFFF;	}	.ace-clouds .ace_marker-layer .ace_step {	background: rgb(255, 255, 0)	}	.ace-clouds .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #BFBFBF	}	.ace-clouds .ace_marker-layer .ace_active-line {	background: #FFFBD1	}	.ace-clouds .ace_gutter-active-line {	background-color : #dcdcdc	}	.ace-clouds .ace_marker-layer .ace_selected-word {	border: 1px solid #BDD5FC	}	.ace-clouds .ace_invisible {	color: #BFBFBF	}	.ace-clouds .ace_keyword,	.ace-clouds .ace_meta,	.ace-clouds .ace_support.ace_constant.ace_property-value {	color: #AF956F	}	.ace-clouds .ace_keyword.ace_operator {	color: #484848	}	.ace-clouds .ace_keyword.ace_other.ace_unit {	color: #96DC5F	}	.ace-clouds .ace_constant.ace_language {	color: #39946A	}	.ace-clouds .ace_constant.ace_numeric {	color: #46A609	}	.ace-clouds .ace_constant.ace_character.ace_entity {	color: #BF78CC	}	.ace-clouds .ace_invalid {	background-color: #FF002A	}	.ace-clouds .ace_fold {	background-color: #AF956F;	border-color: #000000	}	.ace-clouds .ace_storage,	.ace-clouds .ace_support.ace_class,	.ace-clouds .ace_support.ace_function,	.ace-clouds .ace_support.ace_other,	.ace-clouds .ace_support.ace_type {	color: #C52727	}	.ace-clouds .ace_string {	color: #5D90CD	}	.ace-clouds .ace_comment {	color: #BCC8BA	}	.ace-clouds .ace_entity.ace_name.ace_tag,	.ace-clouds .ace_entity.ace_other.ace_attribute-name {	color: #606060	}	.ace-clouds .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y	}';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/clouds"],function(t){o&&(o.exports=t)})}()})(themeClouds);var themeClouds_midnight={exports:{}};(function(o,e){ace.define("ace/theme/clouds_midnight",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-clouds-midnight",n.cssText=".ace-clouds-midnight .ace_gutter {	background: #232323;	color: #929292	}	.ace-clouds-midnight .ace_print-margin {	width: 1px;	background: #232323	}	.ace-clouds-midnight {	background-color: #191919;	color: #929292	}	.ace-clouds-midnight .ace_cursor {	color: #7DA5DC	}	.ace-clouds-midnight .ace_marker-layer .ace_selection {	background: #000000	}	.ace-clouds-midnight.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #191919;	}	.ace-clouds-midnight .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-clouds-midnight .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #BFBFBF	}	.ace-clouds-midnight .ace_marker-layer .ace_active-line {	background: rgba(215, 215, 215, 0.031)	}	.ace-clouds-midnight .ace_gutter-active-line {	background-color: rgba(215, 215, 215, 0.031)	}	.ace-clouds-midnight .ace_marker-layer .ace_selected-word {	border: 1px solid #000000	}	.ace-clouds-midnight .ace_invisible {	color: #666	}	.ace-clouds-midnight .ace_keyword,	.ace-clouds-midnight .ace_meta,	.ace-clouds-midnight .ace_support.ace_constant.ace_property-value {	color: #927C5D	}	.ace-clouds-midnight .ace_keyword.ace_operator {	color: #4B4B4B	}	.ace-clouds-midnight .ace_keyword.ace_other.ace_unit {	color: #366F1A	}	.ace-clouds-midnight .ace_constant.ace_language {	color: #39946A	}	.ace-clouds-midnight .ace_constant.ace_numeric {	color: #46A609	}	.ace-clouds-midnight .ace_constant.ace_character.ace_entity {	color: #A165AC	}	.ace-clouds-midnight .ace_invalid {	color: #FFFFFF;	background-color: #E92E2E	}	.ace-clouds-midnight .ace_fold {	background-color: #927C5D;	border-color: #929292	}	.ace-clouds-midnight .ace_storage,	.ace-clouds-midnight .ace_support.ace_class,	.ace-clouds-midnight .ace_support.ace_function,	.ace-clouds-midnight .ace_support.ace_other,	.ace-clouds-midnight .ace_support.ace_type {	color: #E92E2E	}	.ace-clouds-midnight .ace_string {	color: #5D90CD	}	.ace-clouds-midnight .ace_comment {	color: #3C403B	}	.ace-clouds-midnight .ace_entity.ace_name.ace_tag,	.ace-clouds-midnight .ace_entity.ace_other.ace_attribute-name {	color: #606060	}	.ace-clouds-midnight .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/clouds_midnight"],function(t){o&&(o.exports=t)})}()})(themeClouds_midnight);var themeCobalt={exports:{}};(function(o,e){ace.define("ace/theme/cobalt",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-cobalt",n.cssText=".ace-cobalt .ace_gutter {	background: #011e3a;	color: rgb(128,145,160)	}	.ace-cobalt .ace_print-margin {	width: 1px;	background: #555555	}	.ace-cobalt {	background-color: #002240;	color: #FFFFFF	}	.ace-cobalt .ace_cursor {	color: #FFFFFF	}	.ace-cobalt .ace_marker-layer .ace_selection {	background: rgba(179, 101, 57, 0.75)	}	.ace-cobalt.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #002240;	}	.ace-cobalt .ace_marker-layer .ace_step {	background: rgb(127, 111, 19)	}	.ace-cobalt .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(255, 255, 255, 0.15)	}	.ace-cobalt .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.35)	}	.ace-cobalt .ace_gutter-active-line {	background-color: rgba(0, 0, 0, 0.35)	}	.ace-cobalt .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(179, 101, 57, 0.75)	}	.ace-cobalt .ace_invisible {	color: rgba(255, 255, 255, 0.15)	}	.ace-cobalt .ace_keyword,	.ace-cobalt .ace_meta {	color: #FF9D00	}	.ace-cobalt .ace_constant,	.ace-cobalt .ace_constant.ace_character,	.ace-cobalt .ace_constant.ace_character.ace_escape,	.ace-cobalt .ace_constant.ace_other {	color: #FF628C	}	.ace-cobalt .ace_invalid {	color: #F8F8F8;	background-color: #800F00	}	.ace-cobalt .ace_support {	color: #80FFBB	}	.ace-cobalt .ace_support.ace_constant {	color: #EB939A	}	.ace-cobalt .ace_fold {	background-color: #FF9D00;	border-color: #FFFFFF	}	.ace-cobalt .ace_support.ace_function {	color: #FFB054	}	.ace-cobalt .ace_storage {	color: #FFEE80	}	.ace-cobalt .ace_entity {	color: #FFDD00	}	.ace-cobalt .ace_string {	color: #3AD900	}	.ace-cobalt .ace_string.ace_regexp {	color: #80FFC2	}	.ace-cobalt .ace_comment {	font-style: italic;	color: #0088FF	}	.ace-cobalt .ace_heading,	.ace-cobalt .ace_markup.ace_heading {	color: #C8E4FD;	background-color: #001221	}	.ace-cobalt .ace_list,	.ace-cobalt .ace_markup.ace_list {	background-color: #130D26	}	.ace-cobalt .ace_variable {	color: #CCCCCC	}	.ace-cobalt .ace_variable.ace_language {	color: #FF80E1	}	.ace-cobalt .ace_meta.ace_tag {	color: #9EFFFF	}	.ace-cobalt .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHCLSvkPAAP3AgSDTRd4AAAAAElFTkSuQmCC) right repeat-y	}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/cobalt"],function(t){o&&(o.exports=t)})}()})(themeCobalt);var themeCrimson_editor={exports:{}};(function(o,e){ace.define("ace/theme/crimson_editor",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssText='.ace-crimson-editor .ace_gutter {	background: #ebebeb;	color: #333;	overflow : hidden;	}	.ace-crimson-editor .ace_gutter-layer {	width: 100%;	text-align: right;	}	.ace-crimson-editor .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-crimson-editor {	background-color: #FFFFFF;	color: rgb(64, 64, 64);	}	.ace-crimson-editor .ace_cursor {	color: black;	}	.ace-crimson-editor .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-crimson-editor .ace_identifier {	color: black;	}	.ace-crimson-editor .ace_keyword {	color: blue;	}	.ace-crimson-editor .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-crimson-editor .ace_constant.ace_language {	color: rgb(255, 156, 0);	}	.ace-crimson-editor .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-crimson-editor .ace_invalid {	text-decoration: line-through;	color: rgb(224, 0, 0);	}	.ace-crimson-editor .ace_fold {	}	.ace-crimson-editor .ace_support.ace_function {	color: rgb(192, 0, 0);	}	.ace-crimson-editor .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-crimson-editor .ace_support.ace_type,	.ace-crimson-editor .ace_support.ace_class {	color: rgb(109, 121, 222);	}	.ace-crimson-editor .ace_keyword.ace_operator {	color: rgb(49, 132, 149);	}	.ace-crimson-editor .ace_string {	color: rgb(128, 0, 128);	}	.ace-crimson-editor .ace_comment {	color: rgb(76, 136, 107);	}	.ace-crimson-editor .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-crimson-editor .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-crimson-editor .ace_constant.ace_numeric {	color: rgb(0, 0, 64);	}	.ace-crimson-editor .ace_variable {	color: rgb(0, 64, 128);	}	.ace-crimson-editor .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-crimson-editor .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-crimson-editor .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-crimson-editor .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-crimson-editor .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-crimson-editor .ace_marker-layer .ace_active-line {	background: rgb(232, 242, 254);	}	.ace-crimson-editor .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-crimson-editor .ace_meta.ace_tag {	color:rgb(28, 2, 255);	}	.ace-crimson-editor .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-crimson-editor .ace_string.ace_regex {	color: rgb(192, 0, 192);	}	.ace-crimson-editor .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}',n.cssClass="ace-crimson-editor";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/crimson_editor"],function(t){o&&(o.exports=t)})}()})(themeCrimson_editor);var themeDawn={exports:{}};(function(o,e){ace.define("ace/theme/dawn",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-dawn",n.cssText=".ace-dawn .ace_gutter {	background: #ebebeb;	color: #333	}	.ace-dawn .ace_print-margin {	width: 1px;	background: #e8e8e8	}	.ace-dawn {	background-color: #F9F9F9;	color: #080808	}	.ace-dawn .ace_cursor {	color: #000000	}	.ace-dawn .ace_marker-layer .ace_selection {	background: rgba(39, 95, 255, 0.30)	}	.ace-dawn.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #F9F9F9;	}	.ace-dawn .ace_marker-layer .ace_step {	background: rgb(255, 255, 0)	}	.ace-dawn .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(75, 75, 126, 0.50)	}	.ace-dawn .ace_marker-layer .ace_active-line {	background: rgba(36, 99, 180, 0.12)	}	.ace-dawn .ace_gutter-active-line {	background-color : #dcdcdc	}	.ace-dawn .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(39, 95, 255, 0.30)	}	.ace-dawn .ace_invisible {	color: rgba(75, 75, 126, 0.50)	}	.ace-dawn .ace_keyword,	.ace-dawn .ace_meta {	color: #794938	}	.ace-dawn .ace_constant,	.ace-dawn .ace_constant.ace_character,	.ace-dawn .ace_constant.ace_character.ace_escape,	.ace-dawn .ace_constant.ace_other {	color: #811F24	}	.ace-dawn .ace_invalid.ace_illegal {	text-decoration: underline;	font-style: italic;	color: #F8F8F8;	background-color: #B52A1D	}	.ace-dawn .ace_invalid.ace_deprecated {	text-decoration: underline;	font-style: italic;	color: #B52A1D	}	.ace-dawn .ace_support {	color: #691C97	}	.ace-dawn .ace_support.ace_constant {	color: #B4371F	}	.ace-dawn .ace_fold {	background-color: #794938;	border-color: #080808	}	.ace-dawn .ace_list,	.ace-dawn .ace_markup.ace_list,	.ace-dawn .ace_support.ace_function {	color: #693A17	}	.ace-dawn .ace_storage {	font-style: italic;	color: #A71D5D	}	.ace-dawn .ace_string {	color: #0B6125	}	.ace-dawn .ace_string.ace_regexp {	color: #CF5628	}	.ace-dawn .ace_comment {	font-style: italic;	color: #5A525F	}	.ace-dawn .ace_heading,	.ace-dawn .ace_markup.ace_heading {	color: #19356D	}	.ace-dawn .ace_variable {	color: #234A97	}	.ace-dawn .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYLh/5+x/AAizA4hxNNsZAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/dawn"],function(t){o&&(o.exports=t)})}()})(themeDawn);var themeDracula={exports:{}};(function(o,e){ace.define("ace/theme/dracula",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-dracula",n.cssText="	.ace-dracula .ace_gutter {	background: #282a36;	color: rgb(144,145,148)	}	.ace-dracula .ace_print-margin {	width: 1px;	background: #44475a	}	.ace-dracula {	background-color: #282a36;	color: #f8f8f2	}	.ace-dracula .ace_cursor {	color: #f8f8f0	}	.ace-dracula .ace_marker-layer .ace_selection {	background: #44475a	}	.ace-dracula.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #282a36;	border-radius: 2px	}	.ace-dracula .ace_marker-layer .ace_step {	background: rgb(198, 219, 174)	}	.ace-dracula .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #a29709	}	.ace-dracula .ace_marker-layer .ace_active-line {	background: #44475a	}	.ace-dracula .ace_gutter-active-line {	background-color: #44475a	}	.ace-dracula .ace_marker-layer .ace_selected-word {	box-shadow: 0px 0px 0px 1px #a29709;	border-radius: 3px;	}	.ace-dracula .ace_fold {	background-color: #50fa7b;	border-color: #f8f8f2	}	.ace-dracula .ace_keyword {	color: #ff79c6	}	.ace-dracula .ace_constant.ace_language {	color: #bd93f9	}	.ace-dracula .ace_constant.ace_numeric {	color: #bd93f9	}	.ace-dracula .ace_constant.ace_character {	color: #bd93f9	}	.ace-dracula .ace_constant.ace_character.ace_escape {	color: #ff79c6	}	.ace-dracula .ace_constant.ace_other {	color: #bd93f9	}	.ace-dracula .ace_support.ace_function {	color: #8be9fd	}	.ace-dracula .ace_support.ace_constant {	color: #6be5fd	}	.ace-dracula .ace_support.ace_class {	font-style: italic;	color: #66d9ef	}	.ace-dracula .ace_support.ace_type {	font-style: italic;	color: #66d9ef	}	.ace-dracula .ace_storage {	color: #ff79c6	}	.ace-dracula .ace_storage.ace_type {	font-style: italic;	color: #8be9fd	}	.ace-dracula .ace_invalid {	color: #F8F8F0;	background-color: #ff79c6	}	.ace-dracula .ace_invalid.ace_deprecated {	color: #F8F8F0;	background-color: #bd93f9	}	.ace-dracula .ace_string {	color: #f1fa8c	}	.ace-dracula .ace_comment {	color: #6272a4	}	.ace-dracula .ace_variable {	color: #50fa7b	}	.ace-dracula .ace_variable.ace_parameter {	font-style: italic;	color: #ffb86c	}	.ace-dracula .ace_entity.ace_other.ace_attribute-name {	color: #50fa7b	}	.ace-dracula .ace_entity.ace_name.ace_function {	color: #50fa7b	}	.ace-dracula .ace_entity.ace_name.ace_tag {	color: #ff79c6	}	.ace-dracula .ace_invisible {	color: #626680;	}	.ace-dracula .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y	}",n.$selectionColorConflict=!0;var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/dracula"],function(t){o&&(o.exports=t)})}()})(themeDracula);var themeDreamweaver={exports:{}};(function(o,e){ace.define("ace/theme/dreamweaver",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-dreamweaver",n.cssText='.ace-dreamweaver .ace_gutter {	background: #e8e8e8;	color: #333;	}	.ace-dreamweaver .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-dreamweaver {	background-color: #FFFFFF;	color: black;	}	.ace-dreamweaver .ace_fold {	background-color: #757AD8;	}	.ace-dreamweaver .ace_cursor {	color: black;	}	.ace-dreamweaver .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-dreamweaver .ace_storage,	.ace-dreamweaver .ace_keyword {	color: blue;	}	.ace-dreamweaver .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-dreamweaver .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-dreamweaver .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-dreamweaver .ace_invalid {	background-color: rgb(153, 0, 0);	color: white;	}	.ace-dreamweaver .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-dreamweaver .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-dreamweaver .ace_support.ace_type,	.ace-dreamweaver .ace_support.ace_class {	color: #009;	}	.ace-dreamweaver .ace_support.ace_php_tag {	color: #f00;	}	.ace-dreamweaver .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-dreamweaver .ace_string {	color: #00F;	}	.ace-dreamweaver .ace_comment {	color: rgb(76, 136, 107);	}	.ace-dreamweaver .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-dreamweaver .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-dreamweaver .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-dreamweaver .ace_variable {	color: #06F	}	.ace-dreamweaver .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-dreamweaver .ace_entity.ace_name.ace_function {	color: #00F;	}	.ace-dreamweaver .ace_heading {	color: rgb(12, 7, 255);	}	.ace-dreamweaver .ace_list {	color:rgb(185, 6, 144);	}	.ace-dreamweaver .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-dreamweaver .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-dreamweaver .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-dreamweaver .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-dreamweaver .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-dreamweaver .ace_gutter-active-line {	background-color : #DCDCDC;	}	.ace-dreamweaver .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-dreamweaver .ace_meta.ace_tag {	color:#009;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_anchor {	color:#060;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_form {	color:#F90;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_image {	color:#909;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_script {	color:#900;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_style {	color:#909;	}	.ace-dreamweaver .ace_meta.ace_tag.ace_table {	color:#099;	}	.ace-dreamweaver .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-dreamweaver .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/dreamweaver"],function(t){o&&(o.exports=t)})}()})(themeDreamweaver);var themeEclipse={exports:{}};(function(o,e){ace.define("ace/theme/eclipse",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssText='.ace-eclipse .ace_gutter {	background: #ebebeb;	border-right: 1px solid rgb(159, 159, 159);	color: rgb(136, 136, 136);	}	.ace-eclipse .ace_print-margin {	width: 1px;	background: #ebebeb;	}	.ace-eclipse {	background-color: #FFFFFF;	color: black;	}	.ace-eclipse .ace_fold {	background-color: rgb(60, 76, 114);	}	.ace-eclipse .ace_cursor {	color: black;	}	.ace-eclipse .ace_storage,	.ace-eclipse .ace_keyword,	.ace-eclipse .ace_variable {	color: rgb(127, 0, 85);	}	.ace-eclipse .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-eclipse .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-eclipse .ace_function {	color: rgb(60, 76, 114);	}	.ace-eclipse .ace_string {	color: rgb(42, 0, 255);	}	.ace-eclipse .ace_comment {	color: rgb(113, 150, 130);	}	.ace-eclipse .ace_comment.ace_doc {	color: rgb(63, 95, 191);	}	.ace-eclipse .ace_comment.ace_doc.ace_tag {	color: rgb(127, 159, 191);	}	.ace-eclipse .ace_constant.ace_numeric {	color: darkblue;	}	.ace-eclipse .ace_tag {	color: rgb(25, 118, 116);	}	.ace-eclipse .ace_type {	color: rgb(127, 0, 127);	}	.ace-eclipse .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-eclipse .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-eclipse .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-eclipse .ace_meta.ace_tag {	color:rgb(25, 118, 116);	}	.ace-eclipse .ace_invisible {	color: #ddd;	}	.ace-eclipse .ace_entity.ace_other.ace_attribute-name {	color:rgb(127, 0, 127);	}	.ace-eclipse .ace_marker-layer .ace_step {	background: rgb(255, 255, 0);	}	.ace-eclipse .ace_active-line {	background: rgb(232, 242, 254);	}	.ace-eclipse .ace_gutter-active-line {	background-color : #DADADA;	}	.ace-eclipse .ace_marker-layer .ace_selected-word {	border: 1px solid rgb(181, 213, 255);	}	.ace-eclipse .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}',n.cssClass="ace-eclipse";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/eclipse"],function(t){o&&(o.exports=t)})}()})(themeEclipse);var themeGithub={exports:{}};(function(o,e){ace.define("ace/theme/github",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-github",n.cssText='	.ace-github .ace_gutter {	background: #e8e8e8;	color: #AAA;	}	.ace-github  {	background: #fff;	color: #000;	}	.ace-github .ace_keyword {	font-weight: bold;	}	.ace-github .ace_string {	color: #D14;	}	.ace-github .ace_variable.ace_class {	color: teal;	}	.ace-github .ace_constant.ace_numeric {	color: #099;	}	.ace-github .ace_constant.ace_buildin {	color: #0086B3;	}	.ace-github .ace_support.ace_function {	color: #0086B3;	}	.ace-github .ace_comment {	color: #998;	font-style: italic;	}	.ace-github .ace_variable.ace_language  {	color: #0086B3;	}	.ace-github .ace_paren {	font-weight: bold;	}	.ace-github .ace_boolean {	font-weight: bold;	}	.ace-github .ace_string.ace_regexp {	color: #009926;	font-weight: normal;	}	.ace-github .ace_variable.ace_instance {	color: teal;	}	.ace-github .ace_constant.ace_language {	font-weight: bold;	}	.ace-github .ace_cursor {	color: black;	}	.ace-github.ace_focus .ace_marker-layer .ace_active-line {	background: rgb(255, 255, 204);	}	.ace-github .ace_marker-layer .ace_active-line {	background: rgb(245, 245, 245);	}	.ace-github .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-github.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px white;	}	.ace-github.ace_nobold .ace_line > span {	font-weight: normal !important;	}	.ace-github .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-github .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-github .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-github .ace_gutter-active-line {	background-color : rgba(0, 0, 0, 0.07);	}	.ace-github .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-github .ace_invisible {	color: #BFBFBF	}	.ace-github .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-github .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/github"],function(t){o&&(o.exports=t)})}()})(themeGithub);var themeGob={exports:{}};(function(o,e){ace.define("ace/theme/gob",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-gob",n.cssText=".ace-gob .ace_gutter {	background: #0B1818;	color: #03EE03	}	.ace-gob .ace_print-margin {	width: 1px;	background: #131313	}	.ace-gob {	background-color: #0B0B0B;	color: #00FF00	}	.ace-gob .ace_cursor {	border-color: rgba(16, 248, 255, 0.90);	background-color: rgba(16, 240, 248, 0.70);	opacity: 0.4;	}	.ace-gob .ace_marker-layer .ace_selection {	background: rgba(221, 240, 255, 0.20)	}	.ace-gob.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #141414;	}	.ace-gob .ace_marker-layer .ace_step {	background: rgb(16, 128, 0)	}	.ace-gob .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(64, 255, 255, 0.25)	}	.ace-gob .ace_marker-layer .ace_active-line {	background: rgba(255, 255, 255, 0.04)	}	.ace-gob .ace_gutter-active-line {	background-color: rgba(255, 255, 255, 0.04)	}	.ace-gob .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(192, 240, 255, 0.20)	}	.ace-gob .ace_invisible {	color: rgba(255, 255, 255, 0.25)	}	.ace-gob .ace_keyword,	.ace-gob .ace_meta {	color: #10D8E8	}	.ace-gob .ace_constant,	.ace-gob .ace_constant.ace_character,	.ace-gob .ace_constant.ace_character.ace_escape,	.ace-gob .ace_constant.ace_other,	.ace-gob .ace_heading,	.ace-gob .ace_markup.ace_heading,	.ace-gob .ace_support.ace_constant {	color: #10F0A0	}	.ace-gob .ace_invalid.ace_illegal {	color: #F8F8F8;	background-color: rgba(86, 45, 86, 0.75)	}	.ace-gob .ace_invalid.ace_deprecated {	text-decoration: underline;	font-style: italic;	color: #20F8C0	}	.ace-gob .ace_support {	color: #20E8B0	}	.ace-gob .ace_fold {	background-color: #50B8B8;	border-color: #70F8F8	}	.ace-gob .ace_support.ace_function {	color: #00F800	}	.ace-gob .ace_list,	.ace-gob .ace_markup.ace_list,	.ace-gob .ace_storage {	color: #10FF98	}	.ace-gob .ace_entity.ace_name.ace_function,	.ace-gob .ace_meta.ace_tag,	.ace-gob .ace_variable {	color: #00F868	}	.ace-gob .ace_string {	color: #10F060	}	.ace-gob .ace_string.ace_regexp {	color: #20F090;	}	.ace-gob .ace_comment {	font-style: italic;	color: #00E060;	}	.ace-gob .ace_variable {	color: #00F888;	}	.ace-gob .ace_xml-pe {	color: #488858;	}	.ace-gob .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQERFpYLC1tf0PAAgOAnPnhxyiAAAAAElFTkSuQmCC) right repeat-y	}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/gob"],function(t){o&&(o.exports=t)})}()})(themeGob);var themeGruvbox={exports:{}};(function(o,e){ace.define("ace/theme/gruvbox",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-gruvbox",n.cssText='.ace-gruvbox .ace_gutter-active-line {	background-color: #3C3836;	}	.ace-gruvbox {	color: #EBDAB4;	background-color: #1D2021;	}	.ace-gruvbox .ace_invisible {	color: #504945;	}	.ace-gruvbox .ace_marker-layer .ace_selection {	background: rgba(179, 101, 57, 0.75)	}	.ace-gruvbox.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #002240;	}	.ace-gruvbox .ace_keyword {	color: #8ec07c;	}	.ace-gruvbox .ace_comment {	font-style: italic;	color: #928375;	}	.ace-gruvbox .ace-statement {	color: red;	}	.ace-gruvbox .ace_variable {	color: #84A598;	}	.ace-gruvbox .ace_variable.ace_language {	color: #D2879B;	}	.ace-gruvbox .ace_constant {	color: #C2859A;	}	.ace-gruvbox .ace_constant.ace_language {	color: #C2859A;	}	.ace-gruvbox .ace_constant.ace_numeric {	color: #C2859A;	}	.ace-gruvbox .ace_string {	color: #B8BA37;	}	.ace-gruvbox .ace_support {	color: #F9BC41;	}	.ace-gruvbox .ace_support.ace_function {	color: #F84B3C;	}	.ace-gruvbox .ace_storage {	color: #8FBF7F;	}	.ace-gruvbox .ace_keyword.ace_operator {	color: #EBDAB4;	}	.ace-gruvbox .ace_punctuation.ace_operator {	color: yellow;	}	.ace-gruvbox .ace_marker-layer .ace_active-line {	background: #3C3836;	}	.ace-gruvbox .ace_marker-layer .ace_selected-word {	border-radius: 4px;	border: 8px solid #3f475d;	}	.ace-gruvbox .ace_print-margin {	width: 5px;	background: #3C3836;	}	.ace-gruvbox .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNQUFD4z6Crq/sfAAuYAuYl+7lfAAAAAElFTkSuQmCC") right repeat-y;	}';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/gruvbox"],function(t){o&&(o.exports=t)})}()})(themeGruvbox);var themeIdle_fingers={exports:{}};(function(o,e){ace.define("ace/theme/idle_fingers",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-idle-fingers",n.cssText=".ace-idle-fingers .ace_gutter {	background: #3b3b3b;	color: rgb(153,153,153)	}	.ace-idle-fingers .ace_print-margin {	width: 1px;	background: #3b3b3b	}	.ace-idle-fingers {	background-color: #323232;	color: #FFFFFF	}	.ace-idle-fingers .ace_cursor {	color: #91FF00	}	.ace-idle-fingers .ace_marker-layer .ace_selection {	background: rgba(90, 100, 126, 0.88)	}	.ace-idle-fingers.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #323232;	}	.ace-idle-fingers .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-idle-fingers .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #404040	}	.ace-idle-fingers .ace_marker-layer .ace_active-line {	background: #353637	}	.ace-idle-fingers .ace_gutter-active-line {	background-color: #353637	}	.ace-idle-fingers .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(90, 100, 126, 0.88)	}	.ace-idle-fingers .ace_invisible {	color: #404040	}	.ace-idle-fingers .ace_keyword,	.ace-idle-fingers .ace_meta {	color: #CC7833	}	.ace-idle-fingers .ace_constant,	.ace-idle-fingers .ace_constant.ace_character,	.ace-idle-fingers .ace_constant.ace_character.ace_escape,	.ace-idle-fingers .ace_constant.ace_other,	.ace-idle-fingers .ace_support.ace_constant {	color: #6C99BB	}	.ace-idle-fingers .ace_invalid {	color: #FFFFFF;	background-color: #FF0000	}	.ace-idle-fingers .ace_fold {	background-color: #CC7833;	border-color: #FFFFFF	}	.ace-idle-fingers .ace_support.ace_function {	color: #B83426	}	.ace-idle-fingers .ace_variable.ace_parameter {	font-style: italic	}	.ace-idle-fingers .ace_string {	color: #A5C261	}	.ace-idle-fingers .ace_string.ace_regexp {	color: #CCCC33	}	.ace-idle-fingers .ace_comment {	font-style: italic;	color: #BC9458	}	.ace-idle-fingers .ace_meta.ace_tag {	color: #FFE5BB	}	.ace-idle-fingers .ace_entity.ace_name {	color: #FFC66D	}	.ace-idle-fingers .ace_collab.ace_user1 {	color: #323232;	background-color: #FFF980	}	.ace-idle-fingers .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMwMjLyZYiPj/8PAAreAwAI1+g0AAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/idle_fingers"],function(t){o&&(o.exports=t)})}()})(themeIdle_fingers);var themeIplastic={exports:{}};(function(o,e){ace.define("ace/theme/iplastic",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-iplastic",n.cssText=".ace-iplastic .ace_gutter {	background: #dddddd;	color: #666666	}	.ace-iplastic .ace_print-margin {	width: 1px;	background: #bbbbbb	}	.ace-iplastic {	background-color: #eeeeee;	color: #333333	}	.ace-iplastic .ace_cursor {	color: #333	}	.ace-iplastic .ace_marker-layer .ace_selection {	background: #BAD6FD;	}	.ace-iplastic.ace_multiselect .ace_selection.ace_start {	border-radius: 4px	}	.ace-iplastic .ace_marker-layer .ace_step {	background: #444444	}	.ace-iplastic .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #49483E;	background: #FFF799	}	.ace-iplastic .ace_marker-layer .ace_active-line {	background: #e5e5e5	}	.ace-iplastic .ace_gutter-active-line {	background-color: #eeeeee	}	.ace-iplastic .ace_marker-layer .ace_selected-word {	border: 1px solid #555555;	border-radius:4px	}	.ace-iplastic .ace_invisible {	color: #999999	}	.ace-iplastic .ace_entity.ace_name.ace_tag,	.ace-iplastic .ace_keyword,	.ace-iplastic .ace_meta.ace_tag,	.ace-iplastic .ace_storage {	color: #0000FF	}	.ace-iplastic .ace_punctuation,	.ace-iplastic .ace_punctuation.ace_tag {	color: #000	}	.ace-iplastic .ace_constant {	color: #333333;	font-weight: 700	}	.ace-iplastic .ace_constant.ace_character,	.ace-iplastic .ace_constant.ace_language,	.ace-iplastic .ace_constant.ace_numeric,	.ace-iplastic .ace_constant.ace_other {	color: #0066FF;	font-weight: 700	}	.ace-iplastic .ace_constant.ace_numeric{	font-weight: 100	}	.ace-iplastic .ace_invalid {	color: #F8F8F0;	background-color: #F92672	}	.ace-iplastic .ace_invalid.ace_deprecated {	color: #F8F8F0;	background-color: #AE81FF	}	.ace-iplastic .ace_support.ace_constant,	.ace-iplastic .ace_support.ace_function {	color: #333333;	font-weight: 700	}	.ace-iplastic .ace_fold {	background-color: #464646;	border-color: #F8F8F2	}	.ace-iplastic .ace_storage.ace_type,	.ace-iplastic .ace_support.ace_class,	.ace-iplastic .ace_support.ace_type {	color: #3333fc;	font-weight: 700	}	.ace-iplastic .ace_entity.ace_name.ace_function,	.ace-iplastic .ace_entity.ace_other,	.ace-iplastic .ace_entity.ace_other.ace_attribute-name,	.ace-iplastic .ace_variable {	color: #3366cc;	font-style: italic	}	.ace-iplastic .ace_variable.ace_parameter {	font-style: italic;	color: #2469E0	}	.ace-iplastic .ace_string {	color: #a55f03	}	.ace-iplastic .ace_comment {	color: #777777;	font-style: italic	}	.ace-iplastic .ace_fold-widget {	background-image: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==);	}	.ace-iplastic .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAABlJREFUeNpi+P//PwMzMzPzfwAAAAD//wMAGRsECSML/RIAAAAASUVORK5CYII=) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/iplastic"],function(t){o&&(o.exports=t)})}()})(themeIplastic);var themeKatzenmilch={exports:{}};(function(o,e){ace.define("ace/theme/katzenmilch",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-katzenmilch",n.cssText=".ace-katzenmilch .ace_gutter,	.ace-katzenmilch .ace_gutter {	background: #e8e8e8;	color: #333	}	.ace-katzenmilch .ace_print-margin {	width: 1px;	background: #e8e8e8	}	.ace-katzenmilch {	background-color: #f3f2f3;	color: rgba(15, 0, 9, 1.0)	}	.ace-katzenmilch .ace_cursor {	border-left: 2px solid #100011	}	.ace-katzenmilch .ace_overwrite-cursors .ace_cursor {	border-left: 0px;	border-bottom: 1px solid #100011	}	.ace-katzenmilch .ace_marker-layer .ace_selection {	background: rgba(100, 5, 208, 0.27)	}	.ace-katzenmilch.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #f3f2f3;	}	.ace-katzenmilch .ace_marker-layer .ace_step {	background: rgb(198, 219, 174)	}	.ace-katzenmilch .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(0, 0, 0, 0.33);	}	.ace-katzenmilch .ace_marker-layer .ace_active-line {	background: rgb(232, 242, 254)	}	.ace-katzenmilch .ace_gutter-active-line {	background-color: rgb(232, 242, 254)	}	.ace-katzenmilch .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(100, 5, 208, 0.27)	}	.ace-katzenmilch .ace_invisible {	color: #BFBFBF	}	.ace-katzenmilch .ace_fold {	background-color: rgba(2, 95, 73, 0.97);	border-color: rgba(15, 0, 9, 1.0)	}	.ace-katzenmilch .ace_keyword {	color: #674Aa8;	rbackground-color: rgba(163, 170, 216, 0.055)	}	.ace-katzenmilch .ace_constant.ace_language {	color: #7D7e52;	rbackground-color: rgba(189, 190, 130, 0.059)	}	.ace-katzenmilch .ace_constant.ace_numeric {	color: rgba(79, 130, 123, 0.93);	rbackground-color: rgba(119, 194, 187, 0.059)	}	.ace-katzenmilch .ace_constant.ace_character,	.ace-katzenmilch .ace_constant.ace_other {	color: rgba(2, 95, 105, 1.0);	rbackground-color: rgba(127, 34, 153, 0.063)	}	.ace-katzenmilch .ace_support.ace_function {	color: #9D7e62;	rbackground-color: rgba(189, 190, 130, 0.039)	}	.ace-katzenmilch .ace_support.ace_class {	color: rgba(239, 106, 167, 1.0);	rbackground-color: rgba(239, 106, 167, 0.063)	}	.ace-katzenmilch .ace_storage {	color: rgba(123, 92, 191, 1.0);	rbackground-color: rgba(139, 93, 223, 0.051)	}	.ace-katzenmilch .ace_invalid {	color: #DFDFD5;	rbackground-color: #CC1B27	}	.ace-katzenmilch .ace_string {	color: #5a5f9b;	rbackground-color: rgba(170, 175, 219, 0.035)	}	.ace-katzenmilch .ace_comment {	font-style: italic;	color: rgba(64, 79, 80, 0.67);	rbackground-color: rgba(95, 15, 255, 0.0078)	}	.ace-katzenmilch .ace_entity.ace_name.ace_function,	.ace-katzenmilch .ace_variable {	color: rgba(2, 95, 73, 0.97);	rbackground-color: rgba(34, 255, 73, 0.12)	}	.ace-katzenmilch .ace_variable.ace_language {	color: #316fcf;	rbackground-color: rgba(58, 175, 255, 0.039)	}	.ace-katzenmilch .ace_variable.ace_parameter {	font-style: italic;	color: rgba(51, 150, 159, 0.87);	rbackground-color: rgba(5, 214, 249, 0.043)	}	.ace-katzenmilch .ace_entity.ace_other.ace_attribute-name {	color: rgba(73, 70, 194, 0.93);	rbackground-color: rgba(73, 134, 194, 0.035)	}	.ace-katzenmilch .ace_entity.ace_name.ace_tag {	color: #3976a2;	rbackground-color: rgba(73, 166, 210, 0.039)	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/katzenmilch"],function(t){o&&(o.exports=t)})}()})(themeKatzenmilch);var themeKr_theme={exports:{}};(function(o,e){ace.define("ace/theme/kr_theme",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-kr-theme",n.cssText=".ace-kr-theme .ace_gutter {	background: #1c1917;	color: #FCFFE0	}	.ace-kr-theme .ace_print-margin {	width: 1px;	background: #1c1917	}	.ace-kr-theme {	background-color: #0B0A09;	color: #FCFFE0	}	.ace-kr-theme .ace_cursor {	color: #FF9900	}	.ace-kr-theme .ace_marker-layer .ace_selection {	background: rgba(170, 0, 255, 0.45)	}	.ace-kr-theme.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #0B0A09;	}	.ace-kr-theme .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-kr-theme .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(255, 177, 111, 0.32)	}	.ace-kr-theme .ace_marker-layer .ace_active-line {	background: #38403D	}	.ace-kr-theme .ace_gutter-active-line {	background-color : #38403D	}	.ace-kr-theme .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(170, 0, 255, 0.45)	}	.ace-kr-theme .ace_invisible {	color: rgba(255, 177, 111, 0.32)	}	.ace-kr-theme .ace_keyword,	.ace-kr-theme .ace_meta {	color: #949C8B	}	.ace-kr-theme .ace_constant,	.ace-kr-theme .ace_constant.ace_character,	.ace-kr-theme .ace_constant.ace_character.ace_escape,	.ace-kr-theme .ace_constant.ace_other {	color: rgba(210, 117, 24, 0.76)	}	.ace-kr-theme .ace_invalid {	color: #F8F8F8;	background-color: #A41300	}	.ace-kr-theme .ace_support {	color: #9FC28A	}	.ace-kr-theme .ace_support.ace_constant {	color: #C27E66	}	.ace-kr-theme .ace_fold {	background-color: #949C8B;	border-color: #FCFFE0	}	.ace-kr-theme .ace_support.ace_function {	color: #85873A	}	.ace-kr-theme .ace_storage {	color: #FFEE80	}	.ace-kr-theme .ace_string {	color: rgba(164, 161, 181, 0.8)	}	.ace-kr-theme .ace_string.ace_regexp {	color: rgba(125, 255, 192, 0.65)	}	.ace-kr-theme .ace_comment {	font-style: italic;	color: #706D5B	}	.ace-kr-theme .ace_variable {	color: #D1A796	}	.ace-kr-theme .ace_list,	.ace-kr-theme .ace_markup.ace_list {	background-color: #0F0040	}	.ace-kr-theme .ace_variable.ace_language {	color: #FF80E1	}	.ace-kr-theme .ace_meta.ace_tag {	color: #BABD9C	}	.ace-kr-theme .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/kr_theme"],function(t){o&&(o.exports=t)})}()})(themeKr_theme);var themeKuroir={exports:{}};(function(o,e){ace.define("ace/theme/kuroir",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-kuroir",n.cssText="	.ace-kuroir .ace_gutter {	background: #e8e8e8;	color: #333;	}	.ace-kuroir .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-kuroir {	background-color: #E8E9E8;	color: #363636;	}	.ace-kuroir .ace_cursor {	color: #202020;	}	.ace-kuroir .ace_marker-layer .ace_selection {	background: rgba(245, 170, 0, 0.57);	}	.ace-kuroir.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #E8E9E8;	}	.ace-kuroir .ace_marker-layer .ace_step {	background: rgb(198, 219, 174);	}	.ace-kuroir .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(0, 0, 0, 0.29);	}	.ace-kuroir .ace_marker-layer .ace_active-line {	background: rgba(203, 220, 47, 0.22);	}	.ace-kuroir .ace_gutter-active-line {	background-color: rgba(203, 220, 47, 0.22);	}	.ace-kuroir .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(245, 170, 0, 0.57);	}	.ace-kuroir .ace_invisible {	color: #BFBFBF	}	.ace-kuroir .ace_fold {	border-color: #363636;	}	.ace-kuroir .ace_constant{color:#CD6839;}.ace-kuroir .ace_constant.ace_numeric{color:#9A5925;}.ace-kuroir .ace_support{color:#104E8B;}.ace-kuroir .ace_support.ace_function{color:#005273;}.ace-kuroir .ace_support.ace_constant{color:#CF6A4C;}.ace-kuroir .ace_storage{color:#A52A2A;}.ace-kuroir .ace_invalid.ace_illegal{color:#FD1224;	background-color:rgba(255, 6, 0, 0.15);}.ace-kuroir .ace_invalid.ace_deprecated{text-decoration:underline;	font-style:italic;	color:#FD1732;	background-color:#E8E9E8;}.ace-kuroir .ace_string{color:#639300;}.ace-kuroir .ace_string.ace_regexp{color:#417E00;	background-color:#C9D4BE;}.ace-kuroir .ace_comment{color:rgba(148, 148, 148, 0.91);	background-color:rgba(220, 220, 220, 0.56);}.ace-kuroir .ace_variable{color:#009ACD;}.ace-kuroir .ace_meta.ace_tag{color:#005273;}.ace-kuroir .ace_markup.ace_heading{color:#B8012D;	background-color:rgba(191, 97, 51, 0.051);}.ace-kuroir .ace_markup.ace_list{color:#8F5B26;}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/kuroir"],function(t){o&&(o.exports=t)})}()})(themeKuroir);var themeMerbivore={exports:{}};(function(o,e){ace.define("ace/theme/merbivore",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-merbivore",n.cssText=".ace-merbivore .ace_gutter {	background: #202020;	color: #E6E1DC	}	.ace-merbivore .ace_print-margin {	width: 1px;	background: #555651	}	.ace-merbivore {	background-color: #161616;	color: #E6E1DC	}	.ace-merbivore .ace_cursor {	color: #FFFFFF	}	.ace-merbivore .ace_marker-layer .ace_selection {	background: #454545	}	.ace-merbivore.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #161616;	}	.ace-merbivore .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-merbivore .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #404040	}	.ace-merbivore .ace_marker-layer .ace_active-line {	background: #333435	}	.ace-merbivore .ace_gutter-active-line {	background-color: #333435	}	.ace-merbivore .ace_marker-layer .ace_selected-word {	border: 1px solid #454545	}	.ace-merbivore .ace_invisible {	color: #404040	}	.ace-merbivore .ace_entity.ace_name.ace_tag,	.ace-merbivore .ace_keyword,	.ace-merbivore .ace_meta,	.ace-merbivore .ace_meta.ace_tag,	.ace-merbivore .ace_storage,	.ace-merbivore .ace_support.ace_function {	color: #FC6F09	}	.ace-merbivore .ace_constant,	.ace-merbivore .ace_constant.ace_character,	.ace-merbivore .ace_constant.ace_character.ace_escape,	.ace-merbivore .ace_constant.ace_other,	.ace-merbivore .ace_support.ace_type {	color: #1EDAFB	}	.ace-merbivore .ace_constant.ace_character.ace_escape {	color: #519F50	}	.ace-merbivore .ace_constant.ace_language {	color: #FDC251	}	.ace-merbivore .ace_constant.ace_library,	.ace-merbivore .ace_string,	.ace-merbivore .ace_support.ace_constant {	color: #8DFF0A	}	.ace-merbivore .ace_constant.ace_numeric {	color: #58C554	}	.ace-merbivore .ace_invalid {	color: #FFFFFF;	background-color: #990000	}	.ace-merbivore .ace_fold {	background-color: #FC6F09;	border-color: #E6E1DC	}	.ace-merbivore .ace_comment {	font-style: italic;	color: #AD2EA4	}	.ace-merbivore .ace_entity.ace_other.ace_attribute-name {	color: #FFFF89	}	.ace-merbivore .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQFxf3ZXB1df0PAAdsAmERTkEHAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/merbivore"],function(t){o&&(o.exports=t)})}()})(themeMerbivore);var themeMerbivore_soft={exports:{}};(function(o,e){ace.define("ace/theme/merbivore_soft",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-merbivore-soft",n.cssText=".ace-merbivore-soft .ace_gutter {	background: #262424;	color: #E6E1DC	}	.ace-merbivore-soft .ace_print-margin {	width: 1px;	background: #262424	}	.ace-merbivore-soft {	background-color: #1C1C1C;	color: #E6E1DC	}	.ace-merbivore-soft .ace_cursor {	color: #FFFFFF	}	.ace-merbivore-soft .ace_marker-layer .ace_selection {	background: #494949	}	.ace-merbivore-soft.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #1C1C1C;	}	.ace-merbivore-soft .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-merbivore-soft .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #404040	}	.ace-merbivore-soft .ace_marker-layer .ace_active-line {	background: #333435	}	.ace-merbivore-soft .ace_gutter-active-line {	background-color: #333435	}	.ace-merbivore-soft .ace_marker-layer .ace_selected-word {	border: 1px solid #494949	}	.ace-merbivore-soft .ace_invisible {	color: #404040	}	.ace-merbivore-soft .ace_entity.ace_name.ace_tag,	.ace-merbivore-soft .ace_keyword,	.ace-merbivore-soft .ace_meta,	.ace-merbivore-soft .ace_meta.ace_tag,	.ace-merbivore-soft .ace_storage {	color: #FC803A	}	.ace-merbivore-soft .ace_constant,	.ace-merbivore-soft .ace_constant.ace_character,	.ace-merbivore-soft .ace_constant.ace_character.ace_escape,	.ace-merbivore-soft .ace_constant.ace_other,	.ace-merbivore-soft .ace_support.ace_type {	color: #68C1D8	}	.ace-merbivore-soft .ace_constant.ace_character.ace_escape {	color: #B3E5B4	}	.ace-merbivore-soft .ace_constant.ace_language {	color: #E1C582	}	.ace-merbivore-soft .ace_constant.ace_library,	.ace-merbivore-soft .ace_string,	.ace-merbivore-soft .ace_support.ace_constant {	color: #8EC65F	}	.ace-merbivore-soft .ace_constant.ace_numeric {	color: #7FC578	}	.ace-merbivore-soft .ace_invalid,	.ace-merbivore-soft .ace_invalid.ace_deprecated {	color: #FFFFFF;	background-color: #FE3838	}	.ace-merbivore-soft .ace_fold {	background-color: #FC803A;	border-color: #E6E1DC	}	.ace-merbivore-soft .ace_comment,	.ace-merbivore-soft .ace_meta {	font-style: italic;	color: #AC4BB8	}	.ace-merbivore-soft .ace_entity.ace_other.ace_attribute-name {	color: #EAF1A3	}	.ace-merbivore-soft .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWOQkpLyZfD09PwPAAfYAnaStpHRAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/merbivore_soft"],function(t){o&&(o.exports=t)})}()})(themeMerbivore_soft);var themeMono_industrial={exports:{}};(function(o,e){ace.define("ace/theme/mono_industrial",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-mono-industrial",n.cssText=".ace-mono-industrial .ace_gutter {	background: #1d2521;	color: #C5C9C9	}	.ace-mono-industrial .ace_print-margin {	width: 1px;	background: #555651	}	.ace-mono-industrial {	background-color: #222C28;	color: #FFFFFF	}	.ace-mono-industrial .ace_cursor {	color: #FFFFFF	}	.ace-mono-industrial .ace_marker-layer .ace_selection {	background: rgba(145, 153, 148, 0.40)	}	.ace-mono-industrial.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #222C28;	}	.ace-mono-industrial .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-mono-industrial .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(102, 108, 104, 0.50)	}	.ace-mono-industrial .ace_marker-layer .ace_active-line {	background: rgba(12, 13, 12, 0.25)	}	.ace-mono-industrial .ace_gutter-active-line {	background-color: rgba(12, 13, 12, 0.25)	}	.ace-mono-industrial .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(145, 153, 148, 0.40)	}	.ace-mono-industrial .ace_invisible {	color: rgba(102, 108, 104, 0.50)	}	.ace-mono-industrial .ace_string {	background-color: #151C19;	color: #FFFFFF	}	.ace-mono-industrial .ace_keyword,	.ace-mono-industrial .ace_meta {	color: #A39E64	}	.ace-mono-industrial .ace_constant,	.ace-mono-industrial .ace_constant.ace_character,	.ace-mono-industrial .ace_constant.ace_character.ace_escape,	.ace-mono-industrial .ace_constant.ace_numeric,	.ace-mono-industrial .ace_constant.ace_other {	color: #E98800	}	.ace-mono-industrial .ace_entity.ace_name.ace_function,	.ace-mono-industrial .ace_keyword.ace_operator,	.ace-mono-industrial .ace_variable {	color: #A8B3AB	}	.ace-mono-industrial .ace_invalid {	color: #FFFFFF;	background-color: rgba(153, 0, 0, 0.68)	}	.ace-mono-industrial .ace_support.ace_constant {	color: #C87500	}	.ace-mono-industrial .ace_fold {	background-color: #A8B3AB;	border-color: #FFFFFF	}	.ace-mono-industrial .ace_support.ace_function {	color: #588E60	}	.ace-mono-industrial .ace_entity.ace_name,	.ace-mono-industrial .ace_support.ace_class,	.ace-mono-industrial .ace_support.ace_type {	color: #5778B6	}	.ace-mono-industrial .ace_storage {	color: #C23B00	}	.ace-mono-industrial .ace_variable.ace_language,	.ace-mono-industrial .ace_variable.ace_parameter {	color: #648BD2	}	.ace-mono-industrial .ace_comment {	color: #666C68;	background-color: #151C19	}	.ace-mono-industrial .ace_entity.ace_other.ace_attribute-name {	color: #909993	}	.ace-mono-industrial .ace_entity.ace_name.ace_tag {	color: #A65EFF	}	.ace-mono-industrial .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNQ1NbwZfALD/4PAAlTArlEC4r/AAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/mono_industrial"],function(t){o&&(o.exports=t)})}()})(themeMono_industrial);var themeMonokai={exports:{}};(function(o,e){ace.define("ace/theme/monokai",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-monokai",n.cssText=".ace-monokai .ace_gutter {	background: #2F3129;	color: #8F908A	}	.ace-monokai .ace_print-margin {	width: 1px;	background: #555651	}	.ace-monokai {	background-color: #272822;	color: #F8F8F2	}	.ace-monokai .ace_cursor {	color: #F8F8F0	}	.ace-monokai .ace_marker-layer .ace_selection {	background: #49483E	}	.ace-monokai.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #272822;	}	.ace-monokai .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-monokai .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #49483E	}	.ace-monokai .ace_marker-layer .ace_active-line {	background: #202020	}	.ace-monokai .ace_gutter-active-line {	background-color: #272727	}	.ace-monokai .ace_marker-layer .ace_selected-word {	border: 1px solid #49483E	}	.ace-monokai .ace_invisible {	color: #52524d	}	.ace-monokai .ace_entity.ace_name.ace_tag,	.ace-monokai .ace_keyword,	.ace-monokai .ace_meta.ace_tag,	.ace-monokai .ace_storage {	color: #F92672	}	.ace-monokai .ace_punctuation,	.ace-monokai .ace_punctuation.ace_tag {	color: #fff	}	.ace-monokai .ace_constant.ace_character,	.ace-monokai .ace_constant.ace_language,	.ace-monokai .ace_constant.ace_numeric,	.ace-monokai .ace_constant.ace_other {	color: #AE81FF	}	.ace-monokai .ace_invalid {	color: #F8F8F0;	background-color: #F92672	}	.ace-monokai .ace_invalid.ace_deprecated {	color: #F8F8F0;	background-color: #AE81FF	}	.ace-monokai .ace_support.ace_constant,	.ace-monokai .ace_support.ace_function {	color: #66D9EF	}	.ace-monokai .ace_fold {	background-color: #A6E22E;	border-color: #F8F8F2	}	.ace-monokai .ace_storage.ace_type,	.ace-monokai .ace_support.ace_class,	.ace-monokai .ace_support.ace_type {	font-style: italic;	color: #66D9EF	}	.ace-monokai .ace_entity.ace_name.ace_function,	.ace-monokai .ace_entity.ace_other,	.ace-monokai .ace_entity.ace_other.ace_attribute-name,	.ace-monokai .ace_variable {	color: #A6E22E	}	.ace-monokai .ace_variable.ace_parameter {	font-style: italic;	color: #FD971F	}	.ace-monokai .ace_string {	color: #E6DB74	}	.ace-monokai .ace_comment {	color: #75715E	}	.ace-monokai .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ0FD0ZXBzd/wPAAjVAoxeSgNeAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/monokai"],function(t){o&&(o.exports=t)})}()})(themeMonokai);var themeNord_dark={exports:{}};(function(o,e){ace.define("ace/theme/nord_dark",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-nord-dark",n.cssText=".ace-nord-dark .ace_gutter {	color: #616e88;	}	.ace-nord-dark .ace_print-margin {	width: 1px;	background: #4c566a;	}	.ace-nord-dark {	background-color: #2e3440;	color: #d8dee9;	}	.ace-nord-dark .ace_entity.ace_other.ace_attribute-name,	.ace-nord-dark .ace_storage {	color: #d8dee9;	}	.ace-nord-dark .ace_cursor {	color: #d8dee9;	}	.ace-nord-dark .ace_string.ace_regexp {	color: #bf616a;	}	.ace-nord-dark .ace_marker-layer .ace_active-line {	background: #434c5ecc;	}	.ace-nord-dark .ace_marker-layer .ace_selection {	background: #434c5ecc;	}	.ace-nord-dark.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #2e3440;	}	.ace-nord-dark .ace_marker-layer .ace_step {	background: #ebcb8b;	}	.ace-nord-dark .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #88c0d066;	}	.ace-nord-dark .ace_gutter-active-line {	background-color: #434c5ecc;	}	.ace-nord-dark .ace_marker-layer .ace_selected-word {	border: 1px solid #88c0d066;	}	.ace-nord-dark .ace_invisible {	color: #4c566a;	}	.ace-nord-dark .ace_keyword,	.ace-nord-dark .ace_meta,	.ace-nord-dark .ace_support.ace_class,	.ace-nord-dark .ace_support.ace_type {	color: #81a1c1;	}	.ace-nord-dark .ace_constant.ace_character,	.ace-nord-dark .ace_constant.ace_other {	color: #d8dee9;	}	.ace-nord-dark .ace_constant.ace_language {	color: #5e81ac;	}	.ace-nord-dark .ace_constant.ace_escape {	color: #ebcB8b;	}	.ace-nord-dark .ace_constant.ace_numeric {	color: #b48ead;	}	.ace-nord-dark .ace_fold {	background-color: #4c566a;	border-color: #d8dee9;	}	.ace-nord-dark .ace_entity.ace_name.ace_function,	.ace-nord-dark .ace_entity.ace_name.ace_tag,	.ace-nord-dark .ace_support.ace_function,	.ace-nord-dark .ace_variable,	.ace-nord-dark .ace_variable.ace_language {	color: #8fbcbb;	}	.ace-nord-dark .ace_string {	color: #a3be8c;	}	.ace-nord-dark .ace_comment {	color: #616e88;	}	.ace-nord-dark .ace_indent-guide {	box-shadow: inset -1px 0 0 0 #434c5eb3;	}	",n.$selectionColorConflict=!0;var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/nord_dark"],function(t){o&&(o.exports=t)})}()})(themeNord_dark);var themePastel_on_dark={exports:{}};(function(o,e){ace.define("ace/theme/pastel_on_dark",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-pastel-on-dark",n.cssText=".ace-pastel-on-dark .ace_gutter {	background: #353030;	color: #8F938F	}	.ace-pastel-on-dark .ace_print-margin {	width: 1px;	background: #353030	}	.ace-pastel-on-dark {	background-color: #2C2828;	color: #8F938F	}	.ace-pastel-on-dark .ace_cursor {	color: #A7A7A7	}	.ace-pastel-on-dark .ace_marker-layer .ace_selection {	background: rgba(221, 240, 255, 0.20)	}	.ace-pastel-on-dark.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #2C2828;	}	.ace-pastel-on-dark .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-pastel-on-dark .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(255, 255, 255, 0.25)	}	.ace-pastel-on-dark .ace_marker-layer .ace_active-line {	background: rgba(255, 255, 255, 0.031)	}	.ace-pastel-on-dark .ace_gutter-active-line {	background-color: rgba(255, 255, 255, 0.031)	}	.ace-pastel-on-dark .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(221, 240, 255, 0.20)	}	.ace-pastel-on-dark .ace_invisible {	color: rgba(255, 255, 255, 0.25)	}	.ace-pastel-on-dark .ace_keyword,	.ace-pastel-on-dark .ace_meta {	color: #757aD8	}	.ace-pastel-on-dark .ace_constant,	.ace-pastel-on-dark .ace_constant.ace_character,	.ace-pastel-on-dark .ace_constant.ace_character.ace_escape,	.ace-pastel-on-dark .ace_constant.ace_other {	color: #4FB7C5	}	.ace-pastel-on-dark .ace_keyword.ace_operator {	color: #797878	}	.ace-pastel-on-dark .ace_constant.ace_character {	color: #AFA472	}	.ace-pastel-on-dark .ace_constant.ace_language {	color: #DE8E30	}	.ace-pastel-on-dark .ace_constant.ace_numeric {	color: #CCCCCC	}	.ace-pastel-on-dark .ace_invalid,	.ace-pastel-on-dark .ace_invalid.ace_illegal {	color: #F8F8F8;	background-color: rgba(86, 45, 86, 0.75)	}	.ace-pastel-on-dark .ace_invalid.ace_deprecated {	text-decoration: underline;	font-style: italic;	color: #D2A8A1	}	.ace-pastel-on-dark .ace_fold {	background-color: #757aD8;	border-color: #8F938F	}	.ace-pastel-on-dark .ace_support.ace_function {	color: #AEB2F8	}	.ace-pastel-on-dark .ace_string {	color: #66A968	}	.ace-pastel-on-dark .ace_string.ace_regexp {	color: #E9C062	}	.ace-pastel-on-dark .ace_comment {	color: #A6C6FF	}	.ace-pastel-on-dark .ace_variable {	color: #BEBF55	}	.ace-pastel-on-dark .ace_variable.ace_language {	color: #C1C144	}	.ace-pastel-on-dark .ace_xml-pe {	color: #494949	}	.ace-pastel-on-dark .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYIiPj/8PAARgAh2NTMh8AAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/pastel_on_dark"],function(t){o&&(o.exports=t)})}()})(themePastel_on_dark);var themeSolarized_dark={exports:{}};(function(o,e){ace.define("ace/theme/solarized_dark",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-solarized-dark",n.cssText=".ace-solarized-dark .ace_gutter {	background: #01313f;	color: #d0edf7	}	.ace-solarized-dark .ace_print-margin {	width: 1px;	background: #33555E	}	.ace-solarized-dark {	background-color: #002B36;	color: #93A1A1	}	.ace-solarized-dark .ace_entity.ace_other.ace_attribute-name,	.ace-solarized-dark .ace_storage {	color: #93A1A1	}	.ace-solarized-dark .ace_cursor,	.ace-solarized-dark .ace_string.ace_regexp {	color: #D30102	}	.ace-solarized-dark .ace_marker-layer .ace_active-line,	.ace-solarized-dark .ace_marker-layer .ace_selection {	background: rgba(255, 255, 255, 0.1)	}	.ace-solarized-dark.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #002B36;	}	.ace-solarized-dark .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-solarized-dark .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(147, 161, 161, 0.50)	}	.ace-solarized-dark .ace_gutter-active-line {	background-color: #0d3440	}	.ace-solarized-dark .ace_marker-layer .ace_selected-word {	border: 1px solid #073642	}	.ace-solarized-dark .ace_invisible {	color: rgba(147, 161, 161, 0.50)	}	.ace-solarized-dark .ace_keyword,	.ace-solarized-dark .ace_meta,	.ace-solarized-dark .ace_support.ace_class,	.ace-solarized-dark .ace_support.ace_type {	color: #859900	}	.ace-solarized-dark .ace_constant.ace_character,	.ace-solarized-dark .ace_constant.ace_other {	color: #CB4B16	}	.ace-solarized-dark .ace_constant.ace_language {	color: #B58900	}	.ace-solarized-dark .ace_constant.ace_numeric {	color: #D33682	}	.ace-solarized-dark .ace_fold {	background-color: #268BD2;	border-color: #93A1A1	}	.ace-solarized-dark .ace_entity.ace_name.ace_function,	.ace-solarized-dark .ace_entity.ace_name.ace_tag,	.ace-solarized-dark .ace_support.ace_function,	.ace-solarized-dark .ace_variable,	.ace-solarized-dark .ace_variable.ace_language {	color: #268BD2	}	.ace-solarized-dark .ace_string {	color: #2AA198	}	.ace-solarized-dark .ace_comment {	font-style: italic;	color: #657B83	}	.ace-solarized-dark .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNg0Db1ZVCxc/sPAAd4AlUHlLenAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/solarized_dark"],function(t){o&&(o.exports=t)})}()})(themeSolarized_dark);var themeSolarized_light={exports:{}};(function(o,e){ace.define("ace/theme/solarized_light",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-solarized-light",n.cssText=".ace-solarized-light .ace_gutter {	background: #fbf1d3;	color: #333	}	.ace-solarized-light .ace_print-margin {	width: 1px;	background: #e8e8e8	}	.ace-solarized-light {	background-color: #FDF6E3;	color: #586E75	}	.ace-solarized-light .ace_cursor {	color: #000000	}	.ace-solarized-light .ace_marker-layer .ace_selection {	background: rgba(7, 54, 67, 0.09)	}	.ace-solarized-light.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #FDF6E3;	}	.ace-solarized-light .ace_marker-layer .ace_step {	background: rgb(255, 255, 0)	}	.ace-solarized-light .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(147, 161, 161, 0.50)	}	.ace-solarized-light .ace_marker-layer .ace_active-line {	background: #EEE8D5	}	.ace-solarized-light .ace_gutter-active-line {	background-color : #EDE5C1	}	.ace-solarized-light .ace_marker-layer .ace_selected-word {	border: 1px solid #7f9390	}	.ace-solarized-light .ace_invisible {	color: rgba(147, 161, 161, 0.50)	}	.ace-solarized-light .ace_keyword,	.ace-solarized-light .ace_meta,	.ace-solarized-light .ace_support.ace_class,	.ace-solarized-light .ace_support.ace_type {	color: #859900	}	.ace-solarized-light .ace_constant.ace_character,	.ace-solarized-light .ace_constant.ace_other {	color: #CB4B16	}	.ace-solarized-light .ace_constant.ace_language {	color: #B58900	}	.ace-solarized-light .ace_constant.ace_numeric {	color: #D33682	}	.ace-solarized-light .ace_fold {	background-color: #268BD2;	border-color: #586E75	}	.ace-solarized-light .ace_entity.ace_name.ace_function,	.ace-solarized-light .ace_entity.ace_name.ace_tag,	.ace-solarized-light .ace_support.ace_function,	.ace-solarized-light .ace_variable,	.ace-solarized-light .ace_variable.ace_language {	color: #268BD2	}	.ace-solarized-light .ace_storage {	color: #073642	}	.ace-solarized-light .ace_string {	color: #2AA198	}	.ace-solarized-light .ace_string.ace_regexp {	color: #D30102	}	.ace-solarized-light .ace_comment,	.ace-solarized-light .ace_entity.ace_other.ace_attribute-name {	color: #93A1A1	}	.ace-solarized-light .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHjy8NJ/AAjgA5fzQUmBAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/solarized_light"],function(t){o&&(o.exports=t)})}()})(themeSolarized_light);var themeSqlserver={exports:{}};(function(o,e){ace.define("ace/theme/sqlserver",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-sqlserver",n.cssText='.ace-sqlserver .ace_gutter {	background: #ebebeb;	color: #333;	overflow: hidden;	}	.ace-sqlserver .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-sqlserver {	background-color: #FFFFFF;	color: black;	}	.ace-sqlserver .ace_identifier {	color: black;	}	.ace-sqlserver .ace_keyword {	color: #0000FF;	}	.ace-sqlserver .ace_numeric {	color: black;	}	.ace-sqlserver .ace_storage {	color: #11B7BE;	}	.ace-sqlserver .ace_keyword.ace_operator,	.ace-sqlserver .ace_lparen,	.ace-sqlserver .ace_rparen,	.ace-sqlserver .ace_punctuation {	color: #808080;	}	.ace-sqlserver .ace_set.ace_statement {	color: #0000FF;	text-decoration: underline;	}	.ace-sqlserver .ace_cursor {	color: black;	}	.ace-sqlserver .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-sqlserver .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-sqlserver .ace_constant.ace_language {	color: #979797;	}	.ace-sqlserver .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-sqlserver .ace_invalid {	background-color: rgb(153, 0, 0);	color: white;	}	.ace-sqlserver .ace_support.ace_function {	color: #FF00FF;	}	.ace-sqlserver .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-sqlserver .ace_class {	color: #008080;	}	.ace-sqlserver .ace_support.ace_other {	color: #6D79DE;	}	.ace-sqlserver .ace_variable.ace_parameter {	font-style: italic;	color: #FD971F;	}	.ace-sqlserver .ace_comment {	color: #008000;	}	.ace-sqlserver .ace_constant.ace_numeric {	color: black;	}	.ace-sqlserver .ace_variable {	color: rgb(49, 132, 149);	}	.ace-sqlserver .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-sqlserver .ace_support.ace_storedprocedure {	color: #800000;	}	.ace-sqlserver .ace_heading {	color: rgb(12, 7, 255);	}	.ace-sqlserver .ace_list {	color: rgb(185, 6, 144);	}	.ace-sqlserver .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-sqlserver .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-sqlserver .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-sqlserver .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-sqlserver .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-sqlserver .ace_gutter-active-line {	background-color: #dcdcdc;	}	.ace-sqlserver .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-sqlserver .ace_meta.ace_tag {	color: #0000FF;	}	.ace-sqlserver .ace_string.ace_regex {	color: #FF0000;	}	.ace-sqlserver .ace_string {	color: #FF0000;	}	.ace-sqlserver .ace_entity.ace_other.ace_attribute-name {	color: #994409;	}	.ace-sqlserver .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}	';var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/sqlserver"],function(t){o&&(o.exports=t)})}()})(themeSqlserver);var themeTerminal={exports:{}};(function(o,e){ace.define("ace/theme/terminal",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-terminal-theme",n.cssText=".ace-terminal-theme .ace_gutter {	background: #1a0005;	color: steelblue	}	.ace-terminal-theme .ace_print-margin {	width: 1px;	background: #1a1a1a	}	.ace-terminal-theme {	background-color: black;	color: #DEDEDE	}	.ace-terminal-theme .ace_cursor {	color: #9F9F9F	}	.ace-terminal-theme .ace_marker-layer .ace_selection {	background: #424242	}	.ace-terminal-theme.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px black;	}	.ace-terminal-theme .ace_marker-layer .ace_step {	background: rgb(0, 0, 0)	}	.ace-terminal-theme .ace_marker-layer .ace_bracket {	background: #090;	}	.ace-terminal-theme .ace_marker-layer .ace_bracket-start {	background: #090;	}	.ace-terminal-theme .ace_marker-layer .ace_bracket-unmatched {	margin: -1px 0 0 -1px;	border: 1px solid #900	}	.ace-terminal-theme .ace_marker-layer .ace_active-line {	background: #2A2A2A	}	.ace-terminal-theme .ace_gutter-active-line {	background-color: #2A112A	}	.ace-terminal-theme .ace_marker-layer .ace_selected-word {	border: 1px solid #424242	}	.ace-terminal-theme .ace_invisible {	color: #343434	}	.ace-terminal-theme .ace_keyword,	.ace-terminal-theme .ace_meta,	.ace-terminal-theme .ace_storage,	.ace-terminal-theme .ace_storage.ace_type,	.ace-terminal-theme .ace_support.ace_type {	color: tomato	}	.ace-terminal-theme .ace_keyword.ace_operator {	color: deeppink	}	.ace-terminal-theme .ace_constant.ace_character,	.ace-terminal-theme .ace_constant.ace_language,	.ace-terminal-theme .ace_constant.ace_numeric,	.ace-terminal-theme .ace_keyword.ace_other.ace_unit,	.ace-terminal-theme .ace_support.ace_constant,	.ace-terminal-theme .ace_variable.ace_parameter {	color: #E78C45	}	.ace-terminal-theme .ace_constant.ace_other {	color: gold	}	.ace-terminal-theme .ace_invalid {	color: yellow;	background-color: red	}	.ace-terminal-theme .ace_invalid.ace_deprecated {	color: #CED2CF;	background-color: #B798BF	}	.ace-terminal-theme .ace_fold {	background-color: #7AA6DA;	border-color: #DEDEDE	}	.ace-terminal-theme .ace_entity.ace_name.ace_function,	.ace-terminal-theme .ace_support.ace_function,	.ace-terminal-theme .ace_variable {	color: #7AA6DA	}	.ace-terminal-theme .ace_support.ace_class,	.ace-terminal-theme .ace_support.ace_type {	color: #E7C547	}	.ace-terminal-theme .ace_heading,	.ace-terminal-theme .ace_string {	color: #B9CA4A	}	.ace-terminal-theme .ace_entity.ace_name.ace_tag,	.ace-terminal-theme .ace_entity.ace_other.ace_attribute-name,	.ace-terminal-theme .ace_meta.ace_tag,	.ace-terminal-theme .ace_string.ace_regexp,	.ace-terminal-theme .ace_variable {	color: #D54E53	}	.ace-terminal-theme .ace_comment {	color: orangered	}	.ace-terminal-theme .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYLBWV/8PAAK4AYnhiq+xAAAAAElFTkSuQmCC) right repeat-y;	}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/terminal"],function(t){o&&(o.exports=t)})}()})(themeTerminal);var themeTextmate={exports:{}};(function(o,e){ace.define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-tm",n.cssText='.ace-tm .ace_gutter {	background: #f0f0f0;	color: #333;	}	.ace-tm .ace_print-margin {	width: 1px;	background: #e8e8e8;	}	.ace-tm .ace_fold {	background-color: #6B72E6;	}	.ace-tm {	background-color: #FFFFFF;	color: black;	}	.ace-tm .ace_cursor {	color: black;	}	.ace-tm .ace_invisible {	color: rgb(191, 191, 191);	}	.ace-tm .ace_storage,	.ace-tm .ace_keyword {	color: blue;	}	.ace-tm .ace_constant {	color: rgb(197, 6, 11);	}	.ace-tm .ace_constant.ace_buildin {	color: rgb(88, 72, 246);	}	.ace-tm .ace_constant.ace_language {	color: rgb(88, 92, 246);	}	.ace-tm .ace_constant.ace_library {	color: rgb(6, 150, 14);	}	.ace-tm .ace_invalid {	background-color: rgba(255, 0, 0, 0.1);	color: red;	}	.ace-tm .ace_support.ace_function {	color: rgb(60, 76, 114);	}	.ace-tm .ace_support.ace_constant {	color: rgb(6, 150, 14);	}	.ace-tm .ace_support.ace_type,	.ace-tm .ace_support.ace_class {	color: rgb(109, 121, 222);	}	.ace-tm .ace_keyword.ace_operator {	color: rgb(104, 118, 135);	}	.ace-tm .ace_string {	color: rgb(3, 106, 7);	}	.ace-tm .ace_comment {	color: rgb(76, 136, 107);	}	.ace-tm .ace_comment.ace_doc {	color: rgb(0, 102, 255);	}	.ace-tm .ace_comment.ace_doc.ace_tag {	color: rgb(128, 159, 191);	}	.ace-tm .ace_constant.ace_numeric {	color: rgb(0, 0, 205);	}	.ace-tm .ace_variable {	color: rgb(49, 132, 149);	}	.ace-tm .ace_xml-pe {	color: rgb(104, 104, 91);	}	.ace-tm .ace_entity.ace_name.ace_function {	color: #0000A2;	}	.ace-tm .ace_heading {	color: rgb(12, 7, 255);	}	.ace-tm .ace_list {	color:rgb(185, 6, 144);	}	.ace-tm .ace_meta.ace_tag {	color:rgb(0, 22, 142);	}	.ace-tm .ace_string.ace_regex {	color: rgb(255, 0, 0)	}	.ace-tm .ace_marker-layer .ace_selection {	background: rgb(181, 213, 255);	}	.ace-tm.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px white;	}	.ace-tm .ace_marker-layer .ace_step {	background: rgb(252, 255, 0);	}	.ace-tm .ace_marker-layer .ace_stack {	background: rgb(164, 229, 101);	}	.ace-tm .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgb(192, 192, 192);	}	.ace-tm .ace_marker-layer .ace_active-line {	background: rgba(0, 0, 0, 0.07);	}	.ace-tm .ace_gutter-active-line {	background-color : #dcdcdc;	}	.ace-tm .ace_marker-layer .ace_selected-word {	background: rgb(250, 250, 255);	border: 1px solid rgb(200, 200, 250);	}	.ace-tm .ace_indent-guide {	background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;	}	',n.$id="ace/theme/textmate";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/textmate"],function(t){o&&(o.exports=t)})}()})(themeTextmate);var themeTomorrow={exports:{}};(function(o,e){ace.define("ace/theme/tomorrow",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!1,n.cssClass="ace-tomorrow",n.cssText=".ace-tomorrow .ace_gutter {	background: #f6f6f6;	color: #4D4D4C	}	.ace-tomorrow .ace_print-margin {	width: 1px;	background: #f6f6f6	}	.ace-tomorrow {	background-color: #FFFFFF;	color: #4D4D4C	}	.ace-tomorrow .ace_cursor {	color: #AEAFAD	}	.ace-tomorrow .ace_marker-layer .ace_selection {	background: #D6D6D6	}	.ace-tomorrow.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #FFFFFF;	}	.ace-tomorrow .ace_marker-layer .ace_step {	background: rgb(255, 255, 0)	}	.ace-tomorrow .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #D1D1D1	}	.ace-tomorrow .ace_marker-layer .ace_active-line {	background: #EFEFEF	}	.ace-tomorrow .ace_gutter-active-line {	background-color : #dcdcdc	}	.ace-tomorrow .ace_marker-layer .ace_selected-word {	border: 1px solid #D6D6D6	}	.ace-tomorrow .ace_invisible {	color: #D1D1D1	}	.ace-tomorrow .ace_keyword,	.ace-tomorrow .ace_meta,	.ace-tomorrow .ace_storage,	.ace-tomorrow .ace_storage.ace_type,	.ace-tomorrow .ace_support.ace_type {	color: #8959A8	}	.ace-tomorrow .ace_keyword.ace_operator {	color: #3E999F	}	.ace-tomorrow .ace_constant.ace_character,	.ace-tomorrow .ace_constant.ace_language,	.ace-tomorrow .ace_constant.ace_numeric,	.ace-tomorrow .ace_keyword.ace_other.ace_unit,	.ace-tomorrow .ace_support.ace_constant,	.ace-tomorrow .ace_variable.ace_parameter {	color: #F5871F	}	.ace-tomorrow .ace_constant.ace_other {	color: #666969	}	.ace-tomorrow .ace_invalid {	color: #FFFFFF;	background-color: #C82829	}	.ace-tomorrow .ace_invalid.ace_deprecated {	color: #FFFFFF;	background-color: #8959A8	}	.ace-tomorrow .ace_fold {	background-color: #4271AE;	border-color: #4D4D4C	}	.ace-tomorrow .ace_entity.ace_name.ace_function,	.ace-tomorrow .ace_support.ace_function,	.ace-tomorrow .ace_variable {	color: #4271AE	}	.ace-tomorrow .ace_support.ace_class,	.ace-tomorrow .ace_support.ace_type {	color: #C99E00	}	.ace-tomorrow .ace_heading,	.ace-tomorrow .ace_markup.ace_heading,	.ace-tomorrow .ace_string {	color: #718C00	}	.ace-tomorrow .ace_entity.ace_name.ace_tag,	.ace-tomorrow .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow .ace_meta.ace_tag,	.ace-tomorrow .ace_string.ace_regexp,	.ace-tomorrow .ace_variable {	color: #C82829	}	.ace-tomorrow .ace_comment {	color: #8E908C	}	.ace-tomorrow .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bdu3f/BwAlfgctduB85QAAAABJRU5ErkJggg==) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow"],function(t){o&&(o.exports=t)})}()})(themeTomorrow);var themeTomorrow_night_blue={exports:{}};(function(o,e){ace.define("ace/theme/tomorrow_night_blue",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-tomorrow-night-blue",n.cssText=".ace-tomorrow-night-blue .ace_gutter {	background: #00204b;	color: #7388b5	}	.ace-tomorrow-night-blue .ace_print-margin {	width: 1px;	background: #00204b	}	.ace-tomorrow-night-blue {	background-color: #002451;	color: #FFFFFF	}	.ace-tomorrow-night-blue .ace_constant.ace_other,	.ace-tomorrow-night-blue .ace_cursor {	color: #FFFFFF	}	.ace-tomorrow-night-blue .ace_marker-layer .ace_selection {	background: #003F8E	}	.ace-tomorrow-night-blue.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #002451;	}	.ace-tomorrow-night-blue .ace_marker-layer .ace_step {	background: rgb(127, 111, 19)	}	.ace-tomorrow-night-blue .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #404F7D	}	.ace-tomorrow-night-blue .ace_marker-layer .ace_active-line {	background: #00346E	}	.ace-tomorrow-night-blue .ace_gutter-active-line {	background-color: #022040	}	.ace-tomorrow-night-blue .ace_marker-layer .ace_selected-word {	border: 1px solid #003F8E	}	.ace-tomorrow-night-blue .ace_invisible {	color: #404F7D	}	.ace-tomorrow-night-blue .ace_keyword,	.ace-tomorrow-night-blue .ace_meta,	.ace-tomorrow-night-blue .ace_storage,	.ace-tomorrow-night-blue .ace_storage.ace_type,	.ace-tomorrow-night-blue .ace_support.ace_type {	color: #EBBBFF	}	.ace-tomorrow-night-blue .ace_keyword.ace_operator {	color: #99FFFF	}	.ace-tomorrow-night-blue .ace_constant.ace_character,	.ace-tomorrow-night-blue .ace_constant.ace_language,	.ace-tomorrow-night-blue .ace_constant.ace_numeric,	.ace-tomorrow-night-blue .ace_keyword.ace_other.ace_unit,	.ace-tomorrow-night-blue .ace_support.ace_constant,	.ace-tomorrow-night-blue .ace_variable.ace_parameter {	color: #FFC58F	}	.ace-tomorrow-night-blue .ace_invalid {	color: #FFFFFF;	background-color: #F99DA5	}	.ace-tomorrow-night-blue .ace_invalid.ace_deprecated {	color: #FFFFFF;	background-color: #EBBBFF	}	.ace-tomorrow-night-blue .ace_fold {	background-color: #BBDAFF;	border-color: #FFFFFF	}	.ace-tomorrow-night-blue .ace_entity.ace_name.ace_function,	.ace-tomorrow-night-blue .ace_support.ace_function,	.ace-tomorrow-night-blue .ace_variable {	color: #BBDAFF	}	.ace-tomorrow-night-blue .ace_support.ace_class,	.ace-tomorrow-night-blue .ace_support.ace_type {	color: #FFEEAD	}	.ace-tomorrow-night-blue .ace_heading,	.ace-tomorrow-night-blue .ace_markup.ace_heading,	.ace-tomorrow-night-blue .ace_string {	color: #D1F1A9	}	.ace-tomorrow-night-blue .ace_entity.ace_name.ace_tag,	.ace-tomorrow-night-blue .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow-night-blue .ace_meta.ace_tag,	.ace-tomorrow-night-blue .ace_string.ace_regexp,	.ace-tomorrow-night-blue .ace_variable {	color: #FF9DA4	}	.ace-tomorrow-night-blue .ace_comment {	color: #7285B7	}	.ace-tomorrow-night-blue .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYJDzqfwPAANXAeNsiA+ZAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow_night_blue"],function(t){o&&(o.exports=t)})}()})(themeTomorrow_night_blue);var themeTomorrow_night_bright={exports:{}};(function(o,e){ace.define("ace/theme/tomorrow_night_bright",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-tomorrow-night-bright",n.cssText=".ace-tomorrow-night-bright .ace_gutter {	background: #1a1a1a;	color: #DEDEDE	}	.ace-tomorrow-night-bright .ace_print-margin {	width: 1px;	background: #1a1a1a	}	.ace-tomorrow-night-bright {	background-color: #000000;	color: #DEDEDE	}	.ace-tomorrow-night-bright .ace_cursor {	color: #9F9F9F	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_selection {	background: #424242	}	.ace-tomorrow-night-bright.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #000000;	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #888888	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_highlight {	border: 1px solid rgb(110, 119, 0);	border-bottom: 0;	box-shadow: inset 0 -1px rgb(110, 119, 0);	margin: -1px 0 0 -1px;	background: rgba(255, 235, 0, 0.1)	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_active-line {	background: #2A2A2A	}	.ace-tomorrow-night-bright .ace_gutter-active-line {	background-color: #2A2A2A	}	.ace-tomorrow-night-bright .ace_stack {	background-color: rgb(66, 90, 44)	}	.ace-tomorrow-night-bright .ace_marker-layer .ace_selected-word {	border: 1px solid #888888	}	.ace-tomorrow-night-bright .ace_invisible {	color: #343434	}	.ace-tomorrow-night-bright .ace_keyword,	.ace-tomorrow-night-bright .ace_meta,	.ace-tomorrow-night-bright .ace_storage,	.ace-tomorrow-night-bright .ace_storage.ace_type,	.ace-tomorrow-night-bright .ace_support.ace_type {	color: #C397D8	}	.ace-tomorrow-night-bright .ace_keyword.ace_operator {	color: #70C0B1	}	.ace-tomorrow-night-bright .ace_constant.ace_character,	.ace-tomorrow-night-bright .ace_constant.ace_language,	.ace-tomorrow-night-bright .ace_constant.ace_numeric,	.ace-tomorrow-night-bright .ace_keyword.ace_other.ace_unit,	.ace-tomorrow-night-bright .ace_support.ace_constant,	.ace-tomorrow-night-bright .ace_variable.ace_parameter {	color: #E78C45	}	.ace-tomorrow-night-bright .ace_constant.ace_other {	color: #EEEEEE	}	.ace-tomorrow-night-bright .ace_invalid {	color: #CED2CF;	background-color: #DF5F5F	}	.ace-tomorrow-night-bright .ace_invalid.ace_deprecated {	color: #CED2CF;	background-color: #B798BF	}	.ace-tomorrow-night-bright .ace_fold {	background-color: #7AA6DA;	border-color: #DEDEDE	}	.ace-tomorrow-night-bright .ace_entity.ace_name.ace_function,	.ace-tomorrow-night-bright .ace_support.ace_function,	.ace-tomorrow-night-bright .ace_variable {	color: #7AA6DA	}	.ace-tomorrow-night-bright .ace_support.ace_class,	.ace-tomorrow-night-bright .ace_support.ace_type {	color: #E7C547	}	.ace-tomorrow-night-bright .ace_heading,	.ace-tomorrow-night-bright .ace_markup.ace_heading,	.ace-tomorrow-night-bright .ace_string {	color: #B9CA4A	}	.ace-tomorrow-night-bright .ace_entity.ace_name.ace_tag,	.ace-tomorrow-night-bright .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow-night-bright .ace_meta.ace_tag,	.ace-tomorrow-night-bright .ace_string.ace_regexp,	.ace-tomorrow-night-bright .ace_variable {	color: #D54E53	}	.ace-tomorrow-night-bright .ace_comment {	color: #969896	}	.ace-tomorrow-night-bright .ace_c9searchresults.ace_keyword {	color: #C2C280	}	.ace-tomorrow-night-bright .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYFBXV/8PAAJoAXX4kT2EAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow_night_bright"],function(t){o&&(o.exports=t)})}()})(themeTomorrow_night_bright);var themeTomorrow_night_eighties={exports:{}};(function(o,e){ace.define("ace/theme/tomorrow_night_eighties",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-tomorrow-night-eighties",n.cssText=".ace-tomorrow-night-eighties .ace_gutter {	background: #272727;	color: #CCC	}	.ace-tomorrow-night-eighties .ace_print-margin {	width: 1px;	background: #272727	}	.ace-tomorrow-night-eighties {	background-color: #2D2D2D;	color: #CCCCCC	}	.ace-tomorrow-night-eighties .ace_constant.ace_other,	.ace-tomorrow-night-eighties .ace_cursor {	color: #CCCCCC	}	.ace-tomorrow-night-eighties .ace_marker-layer .ace_selection {	background: #515151	}	.ace-tomorrow-night-eighties.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #2D2D2D;	}	.ace-tomorrow-night-eighties .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-tomorrow-night-eighties .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #6A6A6A	}	.ace-tomorrow-night-bright .ace_stack {	background: rgb(66, 90, 44)	}	.ace-tomorrow-night-eighties .ace_marker-layer .ace_active-line {	background: #393939	}	.ace-tomorrow-night-eighties .ace_gutter-active-line {	background-color: #393939	}	.ace-tomorrow-night-eighties .ace_marker-layer .ace_selected-word {	border: 1px solid #515151	}	.ace-tomorrow-night-eighties .ace_invisible {	color: #6A6A6A	}	.ace-tomorrow-night-eighties .ace_keyword,	.ace-tomorrow-night-eighties .ace_meta,	.ace-tomorrow-night-eighties .ace_storage,	.ace-tomorrow-night-eighties .ace_storage.ace_type,	.ace-tomorrow-night-eighties .ace_support.ace_type {	color: #CC99CC	}	.ace-tomorrow-night-eighties .ace_keyword.ace_operator {	color: #66CCCC	}	.ace-tomorrow-night-eighties .ace_constant.ace_character,	.ace-tomorrow-night-eighties .ace_constant.ace_language,	.ace-tomorrow-night-eighties .ace_constant.ace_numeric,	.ace-tomorrow-night-eighties .ace_keyword.ace_other.ace_unit,	.ace-tomorrow-night-eighties .ace_support.ace_constant,	.ace-tomorrow-night-eighties .ace_variable.ace_parameter {	color: #F99157	}	.ace-tomorrow-night-eighties .ace_invalid {	color: #CDCDCD;	background-color: #F2777A	}	.ace-tomorrow-night-eighties .ace_invalid.ace_deprecated {	color: #CDCDCD;	background-color: #CC99CC	}	.ace-tomorrow-night-eighties .ace_fold {	background-color: #6699CC;	border-color: #CCCCCC	}	.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_function,	.ace-tomorrow-night-eighties .ace_support.ace_function,	.ace-tomorrow-night-eighties .ace_variable {	color: #6699CC	}	.ace-tomorrow-night-eighties .ace_support.ace_class,	.ace-tomorrow-night-eighties .ace_support.ace_type {	color: #FFCC66	}	.ace-tomorrow-night-eighties .ace_heading,	.ace-tomorrow-night-eighties .ace_markup.ace_heading,	.ace-tomorrow-night-eighties .ace_string {	color: #99CC99	}	.ace-tomorrow-night-eighties .ace_comment {	color: #999999	}	.ace-tomorrow-night-eighties .ace_entity.ace_name.ace_tag,	.ace-tomorrow-night-eighties .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow-night-eighties .ace_meta.ace_tag,	.ace-tomorrow-night-eighties .ace_variable {	color: #F2777A	}	.ace-tomorrow-night-eighties .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWPQ09NrYAgMjP4PAAtGAwchHMyAAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow_night_eighties"],function(t){o&&(o.exports=t)})}()})(themeTomorrow_night_eighties);var themeTomorrow_night={exports:{}};(function(o,e){ace.define("ace/theme/tomorrow_night",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-tomorrow-night",n.cssText=".ace-tomorrow-night .ace_gutter {	background: #25282c;	color: #C5C8C6	}	.ace-tomorrow-night .ace_print-margin {	width: 1px;	background: #25282c	}	.ace-tomorrow-night {	background-color: #1D1F21;	color: #C5C8C6	}	.ace-tomorrow-night .ace_cursor {	color: #AEAFAD	}	.ace-tomorrow-night .ace_marker-layer .ace_selection {	background: #373B41	}	.ace-tomorrow-night.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #1D1F21;	}	.ace-tomorrow-night .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-tomorrow-night .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid #4B4E55	}	.ace-tomorrow-night .ace_marker-layer .ace_active-line {	background: #282A2E	}	.ace-tomorrow-night .ace_gutter-active-line {	background-color: #282A2E	}	.ace-tomorrow-night .ace_marker-layer .ace_selected-word {	border: 1px solid #373B41	}	.ace-tomorrow-night .ace_invisible {	color: #4B4E55	}	.ace-tomorrow-night .ace_keyword,	.ace-tomorrow-night .ace_meta,	.ace-tomorrow-night .ace_storage,	.ace-tomorrow-night .ace_storage.ace_type,	.ace-tomorrow-night .ace_support.ace_type {	color: #B294BB	}	.ace-tomorrow-night .ace_keyword.ace_operator {	color: #8ABEB7	}	.ace-tomorrow-night .ace_constant.ace_character,	.ace-tomorrow-night .ace_constant.ace_language,	.ace-tomorrow-night .ace_constant.ace_numeric,	.ace-tomorrow-night .ace_keyword.ace_other.ace_unit,	.ace-tomorrow-night .ace_support.ace_constant,	.ace-tomorrow-night .ace_variable.ace_parameter {	color: #DE935F	}	.ace-tomorrow-night .ace_constant.ace_other {	color: #CED1CF	}	.ace-tomorrow-night .ace_invalid {	color: #CED2CF;	background-color: #DF5F5F	}	.ace-tomorrow-night .ace_invalid.ace_deprecated {	color: #CED2CF;	background-color: #B798BF	}	.ace-tomorrow-night .ace_fold {	background-color: #81A2BE;	border-color: #C5C8C6	}	.ace-tomorrow-night .ace_entity.ace_name.ace_function,	.ace-tomorrow-night .ace_support.ace_function,	.ace-tomorrow-night .ace_variable {	color: #81A2BE	}	.ace-tomorrow-night .ace_support.ace_class,	.ace-tomorrow-night .ace_support.ace_type {	color: #F0C674	}	.ace-tomorrow-night .ace_heading,	.ace-tomorrow-night .ace_markup.ace_heading,	.ace-tomorrow-night .ace_string {	color: #B5BD68	}	.ace-tomorrow-night .ace_entity.ace_name.ace_tag,	.ace-tomorrow-night .ace_entity.ace_other.ace_attribute-name,	.ace-tomorrow-night .ace_meta.ace_tag,	.ace-tomorrow-night .ace_string.ace_regexp,	.ace-tomorrow-night .ace_variable {	color: #CC6666	}	.ace-tomorrow-night .ace_comment {	color: #969896	}	.ace-tomorrow-night .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWNgYGBgYHB3d/8PAAOIAdULw8qMAAAAAElFTkSuQmCC) right repeat-y	}";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/tomorrow_night"],function(t){o&&(o.exports=t)})}()})(themeTomorrow_night);var themeTwilight={exports:{}};(function(o,e){ace.define("ace/theme/twilight",["require","exports","module","ace/lib/dom"],function(t,n,r){n.isDark=!0,n.cssClass="ace-twilight",n.cssText=".ace-twilight .ace_gutter {	background: #232323;	color: #E2E2E2	}	.ace-twilight .ace_print-margin {	width: 1px;	background: #232323	}	.ace-twilight {	background-color: #141414;	color: #F8F8F8	}	.ace-twilight .ace_cursor {	color: #A7A7A7	}	.ace-twilight .ace_marker-layer .ace_selection {	background: rgba(221, 240, 255, 0.20)	}	.ace-twilight.ace_multiselect .ace_selection.ace_start {	box-shadow: 0 0 3px 0px #141414;	}	.ace-twilight .ace_marker-layer .ace_step {	background: rgb(102, 82, 0)	}	.ace-twilight .ace_marker-layer .ace_bracket {	margin: -1px 0 0 -1px;	border: 1px solid rgba(255, 255, 255, 0.25)	}	.ace-twilight .ace_marker-layer .ace_active-line {	background: rgba(255, 255, 255, 0.031)	}	.ace-twilight .ace_gutter-active-line {	background-color: rgba(255, 255, 255, 0.031)	}	.ace-twilight .ace_marker-layer .ace_selected-word {	border: 1px solid rgba(221, 240, 255, 0.20)	}	.ace-twilight .ace_invisible {	color: rgba(255, 255, 255, 0.25)	}	.ace-twilight .ace_keyword,	.ace-twilight .ace_meta {	color: #CDA869	}	.ace-twilight .ace_constant,	.ace-twilight .ace_constant.ace_character,	.ace-twilight .ace_constant.ace_character.ace_escape,	.ace-twilight .ace_constant.ace_other,	.ace-twilight .ace_heading,	.ace-twilight .ace_markup.ace_heading,	.ace-twilight .ace_support.ace_constant {	color: #CF6A4C	}	.ace-twilight .ace_invalid.ace_illegal {	color: #F8F8F8;	background-color: rgba(86, 45, 86, 0.75)	}	.ace-twilight .ace_invalid.ace_deprecated {	text-decoration: underline;	font-style: italic;	color: #D2A8A1	}	.ace-twilight .ace_support {	color: #9B859D	}	.ace-twilight .ace_fold {	background-color: #AC885B;	border-color: #F8F8F8	}	.ace-twilight .ace_support.ace_function {	color: #DAD085	}	.ace-twilight .ace_list,	.ace-twilight .ace_markup.ace_list,	.ace-twilight .ace_storage {	color: #F9EE98	}	.ace-twilight .ace_entity.ace_name.ace_function,	.ace-twilight .ace_meta.ace_tag {	color: #AC885B	}	.ace-twilight .ace_string {	color: #8F9D6A	}	.ace-twilight .ace_string.ace_regexp {	color: #E9C062	}	.ace-twilight .ace_comment {	font-style: italic;	color: #5F5A60	}	.ace-twilight .ace_variable {	color: #7587A6	}	.ace-twilight .ace_xml-pe {	color: #494949	}	.ace-twilight .ace_indent-guide {	background: url(data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAEklEQVQImWMQERFpYLC1tf0PAAgOAnPnhxyiAAAAAElFTkSuQmCC) right repeat-y	}	";var a=t("../lib/dom");a.importCssString(n.cssText,n.cssClass,!1)}),function(){ace.require(["ace/theme/twilight"],function(t){o&&(o.exports=t)})}()})(themeTwilight);function runCommand(o){const t=getCommands()[o];if(t){if(!t.enabled)return;t.isGroupCommand?runGroupCommand(t.group):t.onClick?t.onClick():t.getSubCommands&&visibleCommandPalette.set(t)}}function runGroupCommand(o){const e=getCommands(),n=Object.values(e).find(r=>r.group==o&&!r.isGroupCommand&&r.enabled);n&&n.onClick&&n.onClick()}function findCommand(o){return getCommands()[o]}function create_fragment$3C(o){let e,t;return{c:noop$1,m(n,r){e||(t=listen(window,"keydown",handleCommandKeyDown),e=!0)},p:noop$1,i:noop$1,o:noop$1,d(n){e=!1,t()}}}function handleCommandKeyDown(o){let e="";o.ctrlKey&&(e+="Ctrl+"),o.metaKey&&(e+="Command+"),o.shiftKey&&(e+="Shift+"),o.altKey&&(e+="Alt+"),e+=o.key;const t=get_store_value(commandsCustomized);let n=Object.values(t).filter(s=>s.keyText&&resolveKeyText(s.keyText).toLowerCase().split("|").map(l=>l.trim()).includes(e.toLowerCase())&&(s.disableHandleKeyText==null||!resolveKeyText(s.disableHandleKeyText).toLowerCase().split("|").map(l=>l.trim()).includes(e.toLowerCase())));if(n.length>0&&n.find(s=>!s.systemCommand)&&(o.preventDefault(),o.stopPropagation()),n.length>1&&n.find(s=>s.systemCommand)&&n.find(s=>!s.systemCommand)&&(n=n.filter(s=>!s.systemCommand)),n.every(s=>s.systemCommand))return;const r=n.filter(s=>s.enabled&&!s.isGroupCommand);if(r.length>1&&console.log("Warning, multiple commands mapped to",e,r),r.length==1){const s=r[0];s.onClick?s.onClick():s.getSubCommands&&visibleCommandPalette.set(s);return}const a=n.filter(s=>s.enabled&&s.isGroupCommand);if(a.length>1&&console.log("Warning, multiple commands mapped to",e,a),a.length==1){const s=a[0];runGroupCommand(s.group)}}class CommandListener extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$3C,safe_not_equal,{})}}const CommandListener$1=Object.freeze(Object.defineProperty({__proto__:null,default:CommandListener,handleCommandKeyDown},Symbol.toStringTag,{value:"Module"}));function c(o){return lib$2.splitQuery(o.text,o.options)}const AceEditor_svelte_svelte_type_style_lang="";function create_fragment$3B(o){let e,t,n,r;return{c(){e=element("div"),t=element("div"),attr(t,"id",o[2]),set_style(t,"width",o[0]+"px"),set_style(t,"height",o[1]+"px"),attr(e,"class","ace-container svelte-14wuf0i")},m(a,s){insert(a,e,s),append(e,t),n||(r=[action_destroyer(resizeObserver.call(null,e,!0)),listen(e,"resize",o[22])],n=!0)},p(a,s){s[0]&1&&set_style(t,"width",a[0]+"px"),s[0]&2&&set_style(t,"height",a[1]+"px")},i:noop$1,o:noop$1,d(a){a&&detach(e),n=!1,run_all(r)}}}const EDITOR_THEMES=["ambiance","chaos","chrome","clouds","clouds_midnight","cobalt","crimson_editor","dawn","dracula","dreamweaver","eclipse","github","gob","gruvbox","idle_fingers","iplastic","katzenmilch","kr_theme","kuroir","merbivore","merbivore_soft","mono_industrial","monokai","nord_dark","pastel_on_dark","solarized_dark","solarized_light","sqlserver","terminal","textmate","tomorrow","tomorrow_night_blue","tomorrow_night_bright","tomorrow_night_eighties","tomorrow_night","twilight"],FONT_SIZES=[{label:"8",value:"8"},{label:"9",value:"9"},{label:"10",value:"10"},{label:"11",value:"11"},{label:"12 - Normal",value:"12"},{label:"13",value:"13"},{label:"14",value:"14"},{label:"15",value:"15"},{label:"16",value:"16"},{label:"17",value:"17"},{label:"Custom",value:"custom"}];function instance$3A(o,e,t){let n,r,a,s,l,u;component_subscribe(o,currentEditorFontSize,ue=>t(17,r=ue)),component_subscribe(o,currentEditorFont,ue=>t(19,s=ue)),component_subscribe(o,currentThemeDefinition,ue=>t(20,l=ue)),component_subscribe(o,currentEditorTheme,ue=>t(21,u=ue));const d=`svelte-ace-editor-div:${Math.floor(Math.random()*1e10)}`,f=createEventDispatcher();let{value:m=""}=e,{mode:h="text"}=e,{options:p={}}=e,{menu:g=null}=e,{readOnly:b=!1}=e,{splitterOptions:v=null}=e,{onKeyDown:y=null}=e,{onExecuteFragment:C=null}=e,{errorMessages:E=null}=e;const A=getContext("tabVisible");component_subscribe(o,A,ue=>t(18,a=ue));let k,T="",$,S,I=[],R=null,N=[],M,F;const D={showPrintMargin:!1};function x(){return k}function B(){if(R!=null)return{text:R.text,line:R.trimStart.line};if(!k)return{text:""};const ue=k.getSelectedText();if(ue)return{text:ue,line:k.getSelectionRange().start.row};const he=k.getSelectionRange().start.row;return{text:k.session.getLine(he),line:he}}function K(){return R!=null?R.text:k.getValue()}function U(ue){T!==ue&&k&&typeof ue=="string"&&(k.session.setValue(ue),T=ue)}function G(ue){k&&k.setFontSize(ue?parseInt(ue):F)}function W(ue){k&&k.setTheme("ace/theme/"+ue)}function q(ue){k&&k.getSession().setMode("ace/mode/"+ue)}function H(ue,he){k&&k.setOptions(Object.assign(Object.assign(Object.assign({},D),ue),{fontFamily:he||"Menlo, Monaco, Ubuntu Mono, Consolas, source-code-pro, monospace"}))}function z(ue){if(ue){if(!M)try{M=new Worker("build/query-parser-worker.js"),M.onmessage=he=>{V(he.data)}}catch(he){console.log("WORKER ERROR, using fallback worker",he.message),M="fallback"}}else M&&(M!="fallback"&&M.terminate(),M=null);ie()}const Y=()=>tick().then(()=>{k&&k.resize()});function V(ue){I=ue,ce(),J()}function J(){var ue;h!=null&&h.includes("sql")&&((ue=k==null?void 0:k.session)===null||ue===void 0||ue.setAnnotations([...(I||[]).filter(he=>!(E||[]).find(pe=>pe.line==he.trimStart.line)).map(he=>({row:he.trimStart.line,text:he.text,className:N.includes(he.trimStart.line)?"ace-gutter-sql-run ace-gutter-current-part":"ace-gutter-sql-run"})),...(E||[]).map(he=>({row:he.line,text:he.message,type:"error"}))]))}const Q=ue=>{ue.preventDefault();const he=ue.pageX,pe=ue.pageY;currentDropDownMenu.set({left:he,top:pe,items:g,targetElement:ue.target})},X=(ue,he,pe,Oe,qe)=>{qe&&handleCommandKeyDown(qe),y&&qe&&y(qe)};function ie(){const ue=x();if(v&&ue&&M){const he={text:ue.getValue(),options:Object.assign(Object.assign({},v),{returnRichInfo:!0})};if(M=="fallback"){const pe=c(he);V(pe)}else M.postMessage(he)}}function ce(){var ue,he,pe,Oe;if(I.length<=1){de(),J();return}const et=k.getSelectionRange().start,Ue=I.find(fe=>(et.row==fe.start.line&&et.column>=fe.start.column||et.row>fe.start.line)&&(et.row==fe.end.line&&et.column<=fe.end.column||et.row<fe.end.line));if((Ue==null?void 0:Ue.text)!=(R==null?void 0:R.text)||((ue=Ue==null?void 0:Ue.start)===null||ue===void 0?void 0:ue.position)!=((he=R==null?void 0:R.start)===null||he===void 0?void 0:he.position)||((pe=Ue==null?void 0:Ue.end)===null||pe===void 0?void 0:pe.position)!=((Oe=R==null?void 0:R.end)===null||Oe===void 0?void 0:Oe.position)){if(de(),R=Ue,R){const fe=R.trimStart||R.start,Ie=R.trimEnd||R.end;if(fe&&Ie){N=_.range(fe.line,Ie.line+1);for(const We of N)(I||[]).find($e=>$e.trimStart.line==We)||k.getSession().addGutterDecoration(We,"ace-gutter-current-part")}}J()}}function de(){for(const ue of N)k.getSession().removeGutterDecoration(ue,"ace-gutter-current-part");N=[]}onMount(()=>{k=aceExports.edit(d),f("init",k),k.$blockScrolling=1/0,k.getSession().setMode("ace/mode/"+h),k.setTheme("ace/theme/"+n),k.setValue(m,1),k.setHighlightActiveLine(!1),T=m,se(),p&&k.setOptions(Object.assign(Object.assign({},D),p)),k.container.addEventListener("contextmenu",Q),k.keyBinding.addKeyboardHandler(X),k.renderer.setScrollMargin(2,0),ie(),k.on("guttermousedown",ue=>{const he=ue.getDocumentPosition().row,pe=(I||[]).find(Oe=>Oe.trimStart.line==he);pe&&C&&(C(pe.text,pe.trimStart.line),ue.stop(),k.moveCursorTo(pe.trimStart.line,0),k.selection.clearSelection())},!0)}),onDestroy(()=>{k&&(k.container.removeEventListener("contextmenu",Q),k.keyBinding.removeKeyboardHandler(X),k.destroy(),k.container.remove()),M&&(M!="fallback"&&M.terminate(),M=null)});function se(){k.on("focus",()=>f("focus")),k.setReadOnly(b),k.on("change",()=>{const ue=k.getValue();t(4,m=ue),f("input",ue),T=ue,ie()}),F=k.getFontSize(),r&&k.setFontSize(parseInt(r)||12),k.on("changeSelection",()=>{ce()})}const me=ue=>{t(0,$=ue.detail.width),t(1,S=ue.detail.height)};return o.$$set=ue=>{"value"in ue&&t(4,m=ue.value),"mode"in ue&&t(5,h=ue.mode),"options"in ue&&t(6,p=ue.options),"menu"in ue&&t(7,g=ue.menu),"readOnly"in ue&&t(8,b=ue.readOnly),"splitterOptions"in ue&&t(9,v=ue.splitterOptions),"onKeyDown"in ue&&t(10,y=ue.onKeyDown),"onExecuteFragment"in ue&&t(11,C=ue.onExecuteFragment),"errorMessages"in ue&&t(12,E=ue.errorMessages)},o.$$.update=()=>{o.$$.dirty[0]&3145728&&t(16,n=u||((l==null?void 0:l.themeType)=="dark"?"merbivore":"github")),o.$$.dirty[0]&131072&&G(r),o.$$.dirty[0]&16&&U(m),o.$$.dirty[0]&65536&&W(n),o.$$.dirty[0]&32&&q(h),o.$$.dirty[0]&524352&&H(p,s),o.$$.dirty[0]&262656&&z(v&&a),o.$$.dirty[0]&3&&$!=null&&S!=null&&Y(),o.$$.dirty[0]&4096&&J()},[$,S,d,A,m,h,p,g,b,v,y,C,E,x,B,K,n,r,a,s,l,u,me]}class AceEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$3A,create_fragment$3B,safe_not_equal,{value:4,mode:5,options:6,menu:7,readOnly:8,splitterOptions:9,onKeyDown:10,onExecuteFragment:11,errorMessages:12,getEditor:13,getCurrentCommandText:14,getCodeCompletionCommandText:15},null,[-1,-1])}get getEditor(){return this.$$.ctx[13]}get getCurrentCommandText(){return this.$$.ctx[14]}get getCodeCompletionCommandText(){return this.$$.ctx[15]}}function analyseQuerySources(o,e){const t=e.map(a=>a.toUpperCase()),n=o.split(/\s+/),r=[];for(let a=0;a<n.length;a+=1){const s=n[a].match(/([^.]+)$/);if(s){const l=s[1],u=l.toUpperCase();if(t.includes(u)){const d=n[a-1];if(d&&/^((join)|(from)|(update)|(delete)|(insert))$/i.test(d)){let f=n[a+1];f&&/^as$/i.test(f)&&(f=n[a+2]),f?/^((where)|(inner)|(left)|(right)|(on)|(join)|(set)|(order)|(group))$/i.test(f)||!/^[a-zA-Z][a-zA-Z0-9]*$/i.test(f)?r.push({name:l}):r.push({name:l,alias:f}):r.push({name:l})}}}}return r}function getIntSettingsValue(o,e,t=null,n=null){const r=getCurrentSettings(),a=parseInt(r[o]);return _.isNaN(a)?e:_.isNumber(a)?t!=null&&a<t?t:n!=null&&a>n?n:a:e}function getBoolSettingsValue(o,e){const n=getCurrentSettings()[o];return n==null?e:!!n}function getStringSettingsValue(o,e){const n=getCurrentSettings()[o];return n??e}const COMMON_KEYWORDS=["select","where","update","delete","group","order","from","by","create","table","drop","alter","view","execute","procedure","distinct","go"];function createTableLikeList(o,e){var t;return[...((t=o.schemas)==null?void 0:t.map(n=>({name:n.schemaName,value:n.schemaName,caption:n.schemaName,meta:"schema",score:1e3})))||[],...o.tables.filter(e).map(n=>({name:n.pureName,value:n.pureName,caption:n.pureName,meta:"table",score:1e3})),...o.views.filter(e).map(n=>({name:n.pureName,value:n.pureName,caption:n.pureName,meta:"view",score:1e3})),...o.matviews.filter(e).map(n=>({name:n.pureName,value:n.pureName,caption:n.pureName,meta:"matview",score:1e3})),...o.functions.filter(e).map(n=>({name:n.pureName,value:n.pureName,caption:n.pureName,meta:"function",score:1e3})),...o.procedures.filter(e).map(n=>({name:n.pureName,value:n.pureName,caption:n.pureName,meta:"procedure",score:1e3}))]}function mountCodeCompletion({conid:o,database:e,editor:t,getText:n}){extLanguage_toolsExports.setCompleters([]),extLanguage_toolsExports.addCompleter({getCompletions:async function(a,s,l,u,d){const f=s.selection.cursor,m=s.getLine(f.row).slice(0,f.column),h=await getDatabaseInfo({conid:o,database:e}),p=getStringSettingsValue("sqlEditor.sqlCommandsCase","upperCase")=="upperCase";let g=COMMON_KEYWORDS.map(b=>(p&&(b=b.toUpperCase()),{name:b,value:b,caption:b,meta:"keyword",score:800}));if(h){const b=m.match(/([a-zA-Z0-9_]+)\.([a-zA-Z0-9_]*)?$/),v=m.match(/([a-zA-Z0-9_]*)\s*$/),y=v?v[1].toUpperCase().trim():"",C=analyseQuerySources(n(),[...h.tables.map(A=>A.pureName),...h.views.map(A=>A.pureName),...h.matviews.map(A=>A.pureName)]),E=C.map(A=>{const k=h.tables.find(S=>S.pureName==A.name),T=h.views.find(S=>S.pureName==A.name),$=h.matviews.find(S=>S.pureName==A.name);return{...k||T||$,alias:A.alias}});if(b){const A=b[1],k=C.find(T=>(T.alias||T.name)==A);if(k){const T=h.tables.find(S=>S.pureName==k.name);T&&(g=[...T.columns.map(S=>({name:S.columnName,value:S.columnName,caption:S.columnName,meta:"column",score:1e3}))]);const $=[...h.views||[],...h.matviews||[]].find(S=>S.pureName==k.name);$&&(g=[...$.columns.map(S=>({name:S.columnName,value:S.columnName,caption:S.columnName,meta:"column",score:1e3}))])}else{const T=(h.schemas||[]).find($=>$.schemaName==b[1]);T&&(g=createTableLikeList(h,$=>$.schemaName==T.schemaName))}}else{const A=y=="FROM"||y=="JOIN"||y=="UPDATE"||y=="DELETE";y=="EXEC"||y=="EXECUTE"||y=="CALL"?g=h.procedures.map(T=>({name:T.pureName,value:T.pureName,caption:T.pureName,meta:"procedure",score:1e3})):g=[...A?[]:g,...createTableLikeList(h,T=>!h.defaultSchema||h.defaultSchema==T.schemaName),...A?[]:_.flatten(E.map(T=>(T.columns||[]).map($=>({name:$.columnName,value:T.alias?`${T.alias}.${$.columnName}`:$.columnName,caption:T.alias?`${T.alias}.${$.columnName}`:$.columnName,meta:`column (${T.pureName})`,score:1200}))))]}}d(null,g)}});const r=function(a){const s=a.editor;var l=s.completer&&s.completer.activated;const u=s.session,d=u.selection.cursor,f=u.getLine(d.row).slice(0,d.column);a.command.name==="backspace"||a.command.name==="insertstring"&&((!l&&/^[a-zA-Z]/.test(a.args)||a.args==".")&&s.execCommand("startAutocomplete"),a.args==" "&&/((from)|(join)|(update)|(call)|(exec)|(execute))\s*$/i.test(f)&&s.execCommand("startAutocomplete"))};return t.commands.on("afterExec",r),()=>{t.commands.removeListener("afterExec",r)}}function create_fragment$3A(o){let e,t;const n=[{mode:o[1]},o[4],{options:{enableBasicAutocompletion:!0}}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new AceEditor({props:r}),o[13](e),e.$on("input",o[14]),e.$on("focus",o[15]),e.$on("blur",o[16]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&18?get_spread_update(n,[s&2&&{mode:a[1]},s&16&&get_spread_object(a[4]),n[2]]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){o[13](null),destroy_component(e,a)}}}const engineToMode={mssql:"sqlserver",mysql:"mysql",postgres:"pgsql"};function instance$3z(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,k=>t(11,r=k)),n),l;o.$$.on_destroy.push(()=>a());let{engine:u=null}=e,{conid:d=null}=e,{database:f=null}=e,{readOnly:m=!1}=e,h,p;const g=getContext("tabVisible");component_subscribe(o,g,k=>t(12,l=k));function b(){return h.getEditor()}function v(){return h.getCurrentCommandText()}function y(k){binding_callbacks[k?"unshift":"push"](()=>{h=k,t(0,h)})}function C(k){bubble.call(this,o,k)}function E(k){bubble.call(this,o,k)}function A(k){bubble.call(this,o,k)}return o.$$set=k=>{t(4,e=assign(assign({},e),exclude_internal_props(k))),"engine"in k&&t(5,u=k.engine),"conid"in k&&t(6,d=k.conid),"database"in k&&t(7,f=k.database),"readOnly"in k&&t(8,m=k.readOnly)},o.$$.update=()=>{if(o.$$.dirty&32){const k=(u||"").match(/^([^@]*)@/);t(1,p=engineToMode[k?k[1]:u]||"sql")}o.$$.dirty&4545&&s(t(2,n=useEffect(()=>{const k=h==null?void 0:h.getEditor();return l&&d&&f&&!m&&k?mountCodeCompletion({conid:d,database:f,editor:k,getText:()=>h.getCodeCompletionCommandText()}):()=>{}}))),o.$$.dirty&2048},e=exclude_internal_props(e),[h,p,n,g,e,u,d,f,m,b,v,r,l,y,C,E,A]}class SqlEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$3z,create_fragment$3A,safe_not_equal,{engine:5,conid:6,database:7,readOnly:8,getEditor:9,getCurrentCommandText:10})}get getEditor(){return this.$$.ctx[9]}get getCurrentCommandText(){return this.$$.ctx[10]}}function create_if_block$1B(o){let e,t;return e=new LoadingInfo({props:{message:"Anaysing input files"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3z(o){let e,t,n,r;e=new FormStyledButton({props:{type:"button",value:"Add file(s)"}}),e.$on("click",o[2]);let a=o[0]&&create_if_block$1B();return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,[l]){s[0]?a?l&1&&transition_in(a,1):(a=create_if_block$1B(),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}globalThis&&globalThis.__awaiter;function getFileFilters(o,e){const t=[],n=findFileFormat(o,e);return n&&t.push({name:n.name,extensions:[n.extension]}),t.push({name:"All Files",extensions:["*"]}),t}function instance$3y(o,e,t){let n,r;component_subscribe(o,extensions,d=>t(4,r=d));var a=this&&this.__awaiter||function(d,f,m,h){function p(g){return g instanceof m?g:new m(function(b){b(g)})}return new(m||(m=Promise))(function(g,b){function v(E){try{C(h.next(E))}catch(A){b(A)}}function y(E){try{C(h.throw(E))}catch(A){b(A)}}function C(E){E.done?g(E.value):p(E.value).then(v,y)}C((h=h.apply(d,f||[])).next())})};let s=!1;const{values:l}=getFormContext();return component_subscribe(o,l,d=>t(3,n=d)),[s,l,()=>a(void 0,void 0,void 0,function*(){const f=yield getElectron().showOpenDialog({properties:["openFile","multiSelections"],filters:getFileFilters(r,n.sourceStorageType)});if(f){const m=window.require("path");try{t(0,s=!0),yield addFilesToSourceList(r,f.map(h=>({fileName:h,shortName:m.parse(h).name})),n,l)}finally{t(0,s=!1)}}})]}class ElectronFilesInput extends SvelteComponent{constructor(e){super(),init(this,e,instance$3y,create_fragment$3z,safe_not_equal,{})}}const FormStyledButtonLikeLabel_svelte_svelte_type_style_lang="";function create_fragment$3y(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);let a=[o[1]],s={};for(let l=0;l<a.length;l+=1)s=assign(s,a[l]);return{c(){e=element("label"),r&&r.c(),set_attributes(e,s),toggle_class(e,"disabled",o[0]),toggle_class(e,"svelte-1oyc27i",!0)},m(l,u){insert(l,e,u),r&&r.m(e,null),t=!0},p(l,[u]){r&&r.p&&(!t||u&4)&&update_slot_base(r,n,l,l[2],t?get_slot_changes(n,l[2],u,null):get_all_dirty_from_scope(l[2]),null),set_attributes(e,s=get_spread_update(a,[u&2&&l[1]])),toggle_class(e,"disabled",l[0]),toggle_class(e,"svelte-1oyc27i",!0)},i(l){t||(transition_in(r,l),t=!0)},o(l){transition_out(r,l),t=!1},d(l){l&&detach(e),r&&r.d(l)}}}function instance$3x(o,e,t){let{$$slots:n={},$$scope:r}=e,{disabled:a=!1}=e;return o.$$set=s=>{t(1,e=assign(assign({},e),exclude_internal_props(s))),"disabled"in s&&t(0,a=s.disabled),"$$scope"in s&&t(2,r=s.$$scope)},e=exclude_internal_props(e),[a,e,r,n]}class FormStyledButtonLikeLabel extends SvelteComponent{constructor(e){super(),init(this,e,instance$3x,create_fragment$3y,safe_not_equal,{disabled:0})}}function create_default_slot$1n(o){let e;return{c(){e=text("Upload file")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$3x(o){let e,t,n,r,a,s,l;return t=new FormStyledButtonLikeLabel({props:{htmlFor:"uploadFileButton",$$slots:{default:[create_default_slot$1n]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("input"),attr(r,"type","file"),attr(r,"id","uploadFileButton"),r.hidden=!0,attr(e,"class","m-1")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),append(e,r),a=!0,s||(l=listen(r,"change",o[0]),s=!0)},p(u,[d]){const f={};d&2&&(f.$$scope={dirty:d,ctx:u}),t.$set(f)},i(u){a||(transition_in(t.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),a=!1},d(u){u&&detach(e),destroy_component(t),s=!1,l()}}}function instance$3w(o){return[t=>{const n=[...t.target.files];uploadFiles(n)}]}class UploadButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$3w,create_fragment$3x,safe_not_equal,{})}}const FilesInput_svelte_svelte_type_style_lang="";function create_else_block$H(o){let e,t;return e=new UploadButton({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1A(o){let e,t;return e=new ElectronFilesInput({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3w(o){let e,t,n,r,a,s,l,u,d;const f=[create_if_block$1A,create_else_block$H],m=[];function h(p,g){return p[0]?0:1}return n=h(o),r=m[n]=f[n](o),s=new FormStyledButton({props:{value:"Add web URL"}}),s.$on("click",o[2]),{c(){e=element("div"),t=element("div"),r.c(),a=space(),create_component(s.$$.fragment),l=space(),u=element("div"),u.textContent="Drag & drop imported files here",attr(t,"class","flex"),attr(u,"class","wrapper svelte-5j61hy"),attr(e,"class","main svelte-5j61hy")},m(p,g){insert(p,e,g),append(e,t),m[n].m(t,null),append(t,a),mount_component(s,t,null),append(e,l),append(e,u),d=!0},p:noop$1,i(p){d||(transition_in(r),transition_in(s.$$.fragment,p),d=!0)},o(p){transition_out(r),transition_out(s.$$.fragment,p),d=!1},d(p){p&&detach(e),m[n].d(),destroy_component(s)}}}function extractUrlName(o,e){const t=o.match(/\/([^/]+)($|\?)/);if(t){const n=t[1];return n.includes(".")?n.slice(0,n.indexOf(".")):n}return`url${e&&e.sourceList?e.sourceList.length+1:"1"}`}function instance$3v(o,e,t){let n,r;component_subscribe(o,extensions,f=>t(5,r=f));let{setPreviewSource:a=void 0}=e;const s=getElectron(),{values:l}=getFormContext();component_subscribe(o,l,f=>t(4,n=f));const u=f=>{addFilesToSourceList(r,[{fileName:f,shortName:extractUrlName(f,n),isDownload:!0}],n,l,null,a)},d=()=>showModal(ChangeDownloadUrlModal,{onConfirm:u});return o.$$set=f=>{"setPreviewSource"in f&&t(3,a=f.setPreviewSource)},[s,l,d,a]}class FilesInput extends SvelteComponent{constructor(e){super(),init(this,e,instance$3v,create_fragment$3w,safe_not_equal,{setPreviewSource:3})}}function create_fragment$3v(o){let e,t;const n=[o[2],{options:o[0]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectField({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&5?get_spread_update(n,[s&4&&get_spread_object(a[2]),s&1&&{options:a[0]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$3u(o,e,t){let n,r;const a=["allowChooseModel","direction"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(n,h=>t(5,l=h)),n);o.$$.on_destroy.push(()=>u());let{allowChooseModel:f=!1}=e,{direction:m}=e;return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(2,s=compute_rest_props(e,a)),"allowChooseModel"in h&&t(3,f=h.allowChooseModel),"direction"in h&&t(4,m=h.direction)},o.$$.update=()=>{o.$$.dirty&56&&t(0,r=[...f?[{label:"(DB Model)",value:"__model"}]:[],..._.sortBy((l||[]).filter(h=>!h.unsaved&&(m=="target"?!h.isReadOnly:!0)).map(h=>({value:h._id,label:getConnectionLabel(h)})),"label")])},d(t(1,n=useConnectionList())),[r,n,s,f,m,l]}class FormConnectionSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3u,create_fragment$3v,safe_not_equal,{allowChooseModel:3,direction:4})}}function create_fragment$3u(o){let e,t;const n=[o[3],{options:o[0]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectField({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&9?get_spread_update(n,[s&8&&get_spread_object(a[3]),s&1&&{options:a[0]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$3t(o,e,t){let n,r;const a=["conidName"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(n,p=>t(5,l=p)),n),f;o.$$.on_destroy.push(()=>u());let{conidName:m}=e;const{values:h}=getFormContext();return component_subscribe(o,h,p=>t(6,f=p)),o.$$set=p=>{e=assign(assign({},e),exclude_internal_props(p)),t(3,s=compute_rest_props(e,a)),"conidName"in p&&t(4,m=p.conidName)},o.$$.update=()=>{o.$$.dirty&80&&d(t(1,n=useDatabaseList({conid:f&&f[m]}))),o.$$.dirty&32&&t(0,r=_.sortBy((l||[]).map(p=>({value:p.name,label:p.name})),"label"))},[r,n,h,s,m,l,f]}class FormDatabaseSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3t,create_fragment$3u,safe_not_equal,{conidName:4})}}function create_if_block$1z(o){let e,t;const n=[o[3],{options:o[0]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectField({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&9?get_spread_update(n,[s&8&&get_spread_object(a[3]),s&1&&{options:a[0]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3t(o){let e,t,n=o[0].length>0&&create_if_block$1z(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[0].length>0?n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block$1z(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$3s(o,e,t){let n,r;const a=["conidName","databaseName"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(n,g=>t(6,l=g)),n),f;o.$$.on_destroy.push(()=>u());let{conidName:m}=e,{databaseName:h}=e;const{values:p}=getFormContext();return component_subscribe(o,p,g=>t(7,f=g)),o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(3,s=compute_rest_props(e,a)),"conidName"in g&&t(4,m=g.conidName),"databaseName"in g&&t(5,h=g.databaseName)},o.$$.update=()=>{o.$$.dirty&176&&d(t(1,n=useDatabaseInfo({conid:f[m],database:p[h]}))),o.$$.dirty&64&&t(0,r=(l&&l.schemas||[]).map(g=>({value:g.schemaName,label:g.schemaName})))},[r,n,p,s,m,h,l,f]}class FormSchemaSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3s,create_fragment$3t,safe_not_equal,{conidName:4,databaseName:5})}}const FormTablesSelect_svelte_svelte_type_style_lang="";function get_each_context$y(o,e,t){const n=o.slice();return n[13]=e[t],n}function create_if_block$1y(o){let e,t;function n(){return o[11](o[13])}return e=new FormStyledButton({props:{type:"button",value:`All ${o[13]}`}}),e.$on("click",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_each_block$y(o){var r;let e,t,n=o[2]&&((r=o[2][o[13]])==null?void 0:r.length)>0&&create_if_block$1y(o);return{c(){n&&n.c(),e=empty()},m(a,s){n&&n.m(a,s),insert(a,e,s),t=!0},p(a,s){var l;a[2]&&((l=a[2][a[13]])==null?void 0:l.length)>0?n?(n.p(a,s),s&4&&transition_in(n,1)):(n=create_if_block$1y(a),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){a&&detach(e),n&&n.d(a)}}}function create_fragment$3s(o){let e,t,n,r,a,s,l;const u=[o[7],{name:o[0]},{options:o[3]},{isMulti:!0},{templateProps:{noMargin:!0}}];let d={};for(let p=0;p<u.length;p+=1)d=assign(d,u[p]);t=new FormSelectField({props:d});let f=ensure_array_like(["tables","views","matviews","collections"]),m=[];for(let p=0;p<4;p+=1)m[p]=create_each_block$y(get_each_context$y(o,f,p));const h=p=>transition_out(m[p],1,1,()=>{m[p]=null});return s=new FormStyledButton({props:{type:"button",value:"Remove all"}}),s.$on("click",o[12]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div");for(let p=0;p<4;p+=1)m[p].c();a=space(),create_component(s.$$.fragment),attr(e,"class","wrapper svelte-1xz9rwb")},m(p,g){insert(p,e,g),mount_component(t,e,null),append(e,n),append(e,r);for(let b=0;b<4;b+=1)m[b]&&m[b].m(r,null);append(r,a),mount_component(s,r,null),l=!0},p(p,[g]){const b=g&137?get_spread_update(u,[g&128&&get_spread_object(p[7]),g&1&&{name:p[0]},g&8&&{options:p[3]},u[3],u[4]]):{};if(t.$set(b),g&71){f=ensure_array_like(["tables","views","matviews","collections"]);let v;for(v=0;v<4;v+=1){const y=get_each_context$y(p,f,v);m[v]?(m[v].p(y,g),transition_in(m[v],1)):(m[v]=create_each_block$y(y),m[v].c(),transition_in(m[v],1),m[v].m(r,a))}for(group_outros(),v=4;v<4;v+=1)h(v);check_outros()}},i(p){if(!l){transition_in(t.$$.fragment,p);for(let g=0;g<4;g+=1)transition_in(m[g]);transition_in(s.$$.fragment,p),l=!0}},o(p){transition_out(t.$$.fragment,p),m=m.filter(Boolean);for(let g=0;g<4;g+=1)transition_out(m[g]);transition_out(s.$$.fragment,p),l=!1},d(p){p&&detach(e),destroy_component(t),destroy_each(m,p),destroy_component(s)}}}function instance$3r(o,e,t){let n,r;const a=["conidName","databaseName","schemaName","name"];let s=compute_rest_props(e,a),l,u,d=noop$1,f=()=>(d(),d=subscribe(n,E=>t(2,u=E)),n);o.$$.on_destroy.push(()=>d());let{conidName:m}=e,{databaseName:h}=e,{schemaName:p}=e,{name:g}=e;const{values:b,setFieldValue:v}=getFormContext();component_subscribe(o,b,E=>t(1,l=E));const y=E=>{var A;return v(g,_.compact(_.uniq([...l[g]||[],...((A=u[E])==null?void 0:A.map(k=>k.pureName))||[]])))},C=()=>v(g,[]);return o.$$set=E=>{e=assign(assign({},e),exclude_internal_props(E)),t(7,s=compute_rest_props(e,a)),"conidName"in E&&t(8,m=E.conidName),"databaseName"in E&&t(9,h=E.databaseName),"schemaName"in E&&t(10,p=E.schemaName),"name"in E&&t(0,g=E.name)},o.$$.update=()=>{o.$$.dirty&770&&f(t(4,n=useDatabaseInfo({conid:l[m],database:l[h]}))),o.$$.dirty&1030&&t(3,r=_.compact([...(u==null?void 0:u.tables)||[],...(u==null?void 0:u.views)||[],...(u==null?void 0:u.matviews)||[],...(u==null?void 0:u.collections)||[]]).filter(E=>!l[p]||E.schemaName==l[p]).map(E=>({value:E.pureName,label:E.pureName})))},[g,l,u,r,n,b,v,s,m,h,p,y,C]}class FormTablesSelect extends SvelteComponent{constructor(e){super(),init(this,e,instance$3r,create_fragment$3s,safe_not_equal,{conidName:8,databaseName:9,schemaName:10,name:0})}}const SourceTargetConfig_svelte_svelte_type_style_lang="";function create_if_block_13$3(o){let e,t,n,r;return t=new FontIcon({props:{icon:"icon import"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(" Source configuration"),attr(e,"class","title svelte-d1p00z")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_12$3(o){let e,t,n,r;return t=new FontIcon({props:{icon:"icon export"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(" Target configuration"),attr(e,"class","title svelte-d1p00z")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_11$4(o){let e,t;return e=new FormStyledButton({props:{value:"Current DB"}}),e.$on("click",o[21]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_10$4(o){let e,t;return e=new FormStyledButton({props:{value:"New archive"}}),e.$on("click",o[23]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_9$5(o){let e,t,n,r;return e=new FormConnectionSelect({props:{name:o[2],label:"Server",direction:o[0]}}),n=new FormDatabaseSelect({props:{conidName:o[2],name:o[3],label:"Database"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&4&&(l.name=a[2]),s&1&&(l.direction=a[0]),e.$set(l);const u={};s&4&&(u.conidName=a[2]),s&8&&(u.name=a[3]),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_if_block_7$6(o){let e,t,n,r;e=new FormSchemaSelect({props:{conidName:o[2],databaseName:o[3],name:o[5],label:"Schema"}});let a=o[6]&&create_if_block_8$5(o);return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,l){const u={};l&4&&(u.conidName=s[2]),l&8&&(u.databaseName=s[3]),l&32&&(u.name=s[5]),e.$set(u),s[6]?a?(a.p(s,l),l&64&&transition_in(a,1)):(a=create_if_block_8$5(s),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}function create_if_block_8$5(o){let e,t;return e=new FormTablesSelect({props:{conidName:o[2],schemaName:o[5],databaseName:o[3],name:o[6],label:"Tables / views / collections"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.conidName=n[2]),r&32&&(a.schemaName=n[5]),r&8&&(a.databaseName=n[3]),r&64&&(a.name=n[6]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$h(o){let e,t,n,r,a,s;const l=[create_if_block_6$a,create_else_block$G],u=[];function d(f,m){return f[11].sourceQueryType=="json"?0:1}return r=d(o),a=u[r]=l[r](o),{c(){e=element("div"),e.textContent="Query",t=space(),n=element("div"),a.c(),attr(e,"class","label svelte-d1p00z"),attr(n,"class","sqlwrap svelte-d1p00z")},m(f,m){insert(f,e,m),insert(f,t,m),insert(f,n,m),u[r].m(n,null),s=!0},p(f,m){let h=r;r=d(f),r===h?u[r].p(f,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),a=u[r],a?a.p(f,m):(a=u[r]=l[r](f),a.c()),transition_in(a,1),a.m(n,null))},i(f){s||(transition_in(a),s=!0)},o(f){transition_out(a),s=!1},d(f){f&&(detach(e),detach(t),detach(n)),u[r].d()}}}function create_else_block$G(o){let e,t;return e=new SqlEditor({props:{value:o[11].sourceQuery,engine:o[7]}}),e.$on("input",o[26]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2048&&(a.value=n[11].sourceQuery),r&128&&(a.engine=n[7]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$a(o){let e,t;return e=new AceEditor({props:{value:o[11].sourceQuery,mode:"json"}}),e.$on("input",o[25]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2048&&(a.value=n[11].sourceQuery),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$p(o){let e,t;return e=new FormArchiveFolderSelect({props:{label:"Archive folder",name:o[4],additionalFolders:_.compact([o[11][o[4]]])}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.name=n[4]),r&2064&&(a.additionalFolders=_.compact([n[11][n[4]]])),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$t(o){let e,t;return e=new FormArchiveFilesSelect({props:{label:"Source files",folderName:o[11][o[4]],name:o[6]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2064&&(a.folderName=n[11][n[4]]),r&64&&(a.name=n[6]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$F(o){let e,t;return e=new FilesInput({props:{setPreviewSource:o[8]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&256&&(a.setPreviewSource=n[8]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$U(o){let e,t;return e=new FormArgumentList({props:{args:o[10].args.filter(o[27]),namePrefix:`${o[0]}_${o[10].storageType}_`}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1025&&(a.args=n[10].args.filter(n[27])),r&1025&&(a.namePrefix=`${n[0]}_${n[10].storageType}_`),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1x(o){var n;let e,t;return e=new FormArgumentList({props:{args:(n=o[12])==null?void 0:n.importExportArgs.filter(o[28]),namePrefix:`${o[0]}_${o[12].engine}_`}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&4097&&(s.args=(l=r[12])==null?void 0:l.importExportArgs.filter(r[28])),a&4097&&(s.namePrefix=`${r[0]}_${r[12].engine}_`),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_fragment$3r(o){var x,B;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=o[0]=="source"&&create_if_block_13$3(),A=o[0]=="target"&&create_if_block_12$3(),k=o[15]&&create_if_block_11$4(o);s=new FormStyledButton({props:{value:"Current archive"}}),s.$on("click",o[22]);let T=o[0]=="target"&&create_if_block_10$4(o);d=new FormSelectField({props:{options:o[14].filter(o[24]),name:o[1],label:"Storage type"}});let $=(o[9]=="database"||o[9]=="query")&&create_if_block_9$5(o),S=o[9]=="database"&&create_if_block_7$6(o),I=o[9]=="query"&&create_if_block_5$h(o),R=o[9]=="archive"&&create_if_block_4$p(o),N=o[9]=="archive"&&o[0]=="source"&&create_if_block_3$t(o),M=o[10]&&o[0]=="source"&&create_if_block_2$F(o),F=((x=o[10])==null?void 0:x.args)&&create_if_block_1$U(o),D=((B=o[12])==null?void 0:B.importExportArgs)&&create_if_block$1x(o);return{c(){e=element("div"),E&&E.c(),t=space(),A&&A.c(),n=space(),r=element("div"),k&&k.c(),a=space(),create_component(s.$$.fragment),l=space(),T&&T.c(),u=space(),create_component(d.$$.fragment),f=space(),$&&$.c(),m=space(),S&&S.c(),h=space(),I&&I.c(),p=space(),R&&R.c(),g=space(),N&&N.c(),b=space(),M&&M.c(),v=space(),F&&F.c(),y=space(),D&&D.c(),attr(r,"class","buttons svelte-d1p00z"),attr(e,"class","column svelte-d1p00z")},m(K,U){insert(K,e,U),E&&E.m(e,null),append(e,t),A&&A.m(e,null),append(e,n),append(e,r),k&&k.m(r,null),append(r,a),mount_component(s,r,null),append(r,l),T&&T.m(r,null),append(e,u),mount_component(d,e,null),append(e,f),$&&$.m(e,null),append(e,m),S&&S.m(e,null),append(e,h),I&&I.m(e,null),append(e,p),R&&R.m(e,null),append(e,g),N&&N.m(e,null),append(e,b),M&&M.m(e,null),append(e,v),F&&F.m(e,null),append(e,y),D&&D.m(e,null),C=!0},p(K,[U]){var W,q;K[0]=="source"?E?U&1&&transition_in(E,1):(E=create_if_block_13$3(),E.c(),transition_in(E,1),E.m(e,t)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),K[0]=="target"?A?U&1&&transition_in(A,1):(A=create_if_block_12$3(),A.c(),transition_in(A,1),A.m(e,n)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),K[15]?k?(k.p(K,U),U&32768&&transition_in(k,1)):(k=create_if_block_11$4(K),k.c(),transition_in(k,1),k.m(r,a)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),K[0]=="target"?T?(T.p(K,U),U&1&&transition_in(T,1)):(T=create_if_block_10$4(K),T.c(),transition_in(T,1),T.m(r,null)):T&&(group_outros(),transition_out(T,1,1,()=>{T=null}),check_outros());const G={};U&16385&&(G.options=K[14].filter(K[24])),U&2&&(G.name=K[1]),d.$set(G),K[9]=="database"||K[9]=="query"?$?($.p(K,U),U&512&&transition_in($,1)):($=create_if_block_9$5(K),$.c(),transition_in($,1),$.m(e,m)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros()),K[9]=="database"?S?(S.p(K,U),U&512&&transition_in(S,1)):(S=create_if_block_7$6(K),S.c(),transition_in(S,1),S.m(e,h)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()),K[9]=="query"?I?(I.p(K,U),U&512&&transition_in(I,1)):(I=create_if_block_5$h(K),I.c(),transition_in(I,1),I.m(e,p)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros()),K[9]=="archive"?R?(R.p(K,U),U&512&&transition_in(R,1)):(R=create_if_block_4$p(K),R.c(),transition_in(R,1),R.m(e,g)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros()),K[9]=="archive"&&K[0]=="source"?N?(N.p(K,U),U&513&&transition_in(N,1)):(N=create_if_block_3$t(K),N.c(),transition_in(N,1),N.m(e,b)):N&&(group_outros(),transition_out(N,1,1,()=>{N=null}),check_outros()),K[10]&&K[0]=="source"?M?(M.p(K,U),U&1025&&transition_in(M,1)):(M=create_if_block_2$F(K),M.c(),transition_in(M,1),M.m(e,v)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),(W=K[10])!=null&&W.args?F?(F.p(K,U),U&1024&&transition_in(F,1)):(F=create_if_block_1$U(K),F.c(),transition_in(F,1),F.m(e,y)):F&&(group_outros(),transition_out(F,1,1,()=>{F=null}),check_outros()),(q=K[12])!=null&&q.importExportArgs?D?(D.p(K,U),U&4096&&transition_in(D,1)):(D=create_if_block$1x(K),D.c(),transition_in(D,1),D.m(e,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros())},i(K){C||(transition_in(E),transition_in(A),transition_in(k),transition_in(s.$$.fragment,K),transition_in(T),transition_in(d.$$.fragment,K),transition_in($),transition_in(S),transition_in(I),transition_in(R),transition_in(N),transition_in(M),transition_in(F),transition_in(D),C=!0)},o(K){transition_out(E),transition_out(A),transition_out(k),transition_out(s.$$.fragment,K),transition_out(T),transition_out(d.$$.fragment,K),transition_out($),transition_out(S),transition_out(I),transition_out(R),transition_out(N),transition_out(M),transition_out(F),transition_out(D),C=!1},d(K){K&&detach(e),E&&E.d(),A&&A.d(),k&&k.d(),destroy_component(s),T&&T.d(),destroy_component(d),$&&$.d(),S&&S.d(),I&&I.d(),R&&R.d(),N&&N.d(),M&&M.d(),F&&F.d(),D&&D.d()}}}function instance$3q(o,e,t){let n,r,a,s,l,u,d,f=noop$1,m=()=>(f(),f=subscribe(s,U=>t(20,d=U)),s),h,p,g;component_subscribe(o,extensions,U=>t(19,u=U)),component_subscribe(o,currentDatabase,U=>t(15,p=U)),component_subscribe(o,currentArchive,U=>t(16,g=U)),o.$$.on_destroy.push(()=>f());let{direction:b}=e,{storageTypeField:v}=e,{connectionIdField:y}=e,{databaseNameField:C}=e,{archiveFolderField:E}=e,{schemaNameField:A}=e,{tablesField:k=void 0}=e,{engine:T=void 0}=e,{setPreviewSource:$=void 0}=e;const{values:S,setFieldValue:I}=getFormContext();component_subscribe(o,S,U=>t(11,h=U));const R=()=>{S.update(U=>{var G;return{...U,[v]:"database",[y]:(G=p==null?void 0:p.connection)==null?void 0:G._id,[C]:p==null?void 0:p.name}})},N=()=>{S.update(U=>({...U,[v]:"archive",[E]:g}))},M=()=>{S.update(U=>({...U,[v]:"archive",[E]:`import-${hooks().format("YYYY-MM-DD-hh-mm-ss")}`}))},F=U=>U.directions.includes(b),D=U=>I("sourceQuery",U.detail),x=U=>I("sourceQuery",U.detail),B=U=>!U.direction||U.direction==b,K=U=>!U.direction||U.direction==b;return o.$$set=U=>{"direction"in U&&t(0,b=U.direction),"storageTypeField"in U&&t(1,v=U.storageTypeField),"connectionIdField"in U&&t(2,y=U.connectionIdField),"databaseNameField"in U&&t(3,C=U.databaseNameField),"archiveFolderField"in U&&t(4,E=U.archiveFolderField),"schemaNameField"in U&&t(5,A=U.schemaNameField),"tablesField"in U&&t(6,k=U.tablesField),"engine"in U&&t(7,T=U.engine),"setPreviewSource"in U&&t(8,$=U.setPreviewSource)},o.$$.update=()=>{o.$$.dirty&526338&&t(14,n=h[v]=="jsldata"?[{value:"jsldata",label:"Query result data",directions:["source"]}]:[{value:"database",label:"Database",directions:["source","target"]},...u.fileFormats.map(U=>({value:U.storageType,label:`${U.name} files(s)`,directions:getFileFormatDirections(U)})),{value:"query",label:"Query",directions:["source"]},{value:"archive",label:"Archive",directions:["source","target"]}]),o.$$.dirty&2050&&t(9,r=h[v]),o.$$.dirty&2060&&useDatabaseInfo({conid:h[y],database:h[C]}),o.$$.dirty&2064&&useArchiveFiles({folder:h[E]}),o.$$.dirty&524800&&t(10,a=findFileFormat(u,r)),o.$$.dirty&2052&&m(t(13,s=useConnectionInfo({conid:h[y]}))),o.$$.dirty&1572864&&t(12,l=lib.findEngineDriver(d,u))},[b,v,y,C,E,A,k,T,$,r,a,h,l,s,n,p,g,S,I,u,d,R,N,M,F,D,x,B,K]}class SourceTargetConfig extends SvelteComponent{constructor(e){super(),init(this,e,instance$3q,create_fragment$3r,safe_not_equal,{direction:0,storageTypeField:1,connectionIdField:2,databaseNameField:3,archiveFolderField:4,schemaNameField:5,tablesField:6,engine:7,setPreviewSource:8})}}const ImportExportConfigurator_svelte_svelte_type_style_lang="";function get_context(o){const e=(o[0][`columns_${o[22]}`]||[]).filter(t=>!t.skip).length;o[23]=e}function create_if_block$1w(o){let e,t;function n(...r){return o[16](o[22],...r)}return e=new CheckboxField({props:{checked:o[2]==o[22]}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&4194308&&(s.checked=o[2]==o[22]),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__0_slot$8(o){let e,t,n=o[3]&&create_if_block$1w(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[3]?n?(n.p(r,a),a&8&&transition_in(n,1)):(n=create_if_block$1w(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create__1_slot$p(o){let e,t;function n(...r){return o[15](o[22],...r)}return e=new TextField({props:{value:getTargetName(o[1],o[22],o[0])}}),e.$on("input",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&4194307&&(s.value=getTargetName(o[1],o[22],o[0])),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot$1m(o){let e=o[23]>0?`(${o[23]} columns)`:"(copy from source)",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&4194305&&e!==(e=n[23]>0?`(${n[23]} columns)`:"(copy from source)")&&set_data(t,e)},d(n){n&&detach(t)}}}function create__2_slot$o(o){get_context(o);let e,t;function n(){return o[14](o[22])}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot$1m]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r,get_context(o);const s={};a&4194305&&(s.onClick=n),a&20971521&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_fragment$3q(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v;return n=new SourceTargetConfig({props:{direction:"source",storageTypeField:"sourceStorageType",connectionIdField:"sourceConnectionId",databaseNameField:"sourceDatabaseName",archiveFolderField:"sourceArchiveFolder",schemaNameField:"sourceSchemaName",tablesField:"sourceList",engine:o[4],setPreviewSource:o[9].set}}),s=new FontIcon({props:{icon:"icon arrow-right-bold"}}),u=new SourceTargetConfig({props:{direction:"target",storageTypeField:"targetStorageType",connectionIdField:"targetConnectionId",databaseNameField:"targetDatabaseName",archiveFolderField:"targetArchiveFolder",schemaNameField:"targetSchemaName"}}),h=new FontIcon({props:{icon:"icon tables"}}),b=new TableControl({props:{rows:o[0].sourceList||[],columns:[{fieldName:"source",header:"Source",component:SourceName,getProps:func_2$7},{fieldName:"action",header:"Action",component:SourceAction,getProps:o[17]},{fieldName:"target",header:"Target",slot:1},{fieldName:"preview",header:"Preview",slot:0},{fieldName:"columns",header:"Columns",slot:2}],$$slots:{2:[create__2_slot$o,({row:y})=>({22:y}),({row:y})=>y?4194304:0],1:[create__1_slot$p,({row:y})=>({22:y}),({row:y})=>y?4194304:0],0:[create__0_slot$8,({row:y})=>({22:y}),({row:y})=>y?4194304:0]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),d=space(),f=element("div"),m=element("div"),create_component(h.$$.fragment),p=text(" Map source tables/files"),g=space(),create_component(b.$$.fragment),attr(a,"class","arrow svelte-tc4cku"),attr(t,"class","flex"),attr(m,"class","title svelte-tc4cku"),attr(f,"class","m-2"),attr(e,"class","flex1")},m(y,C){insert(y,e,C),append(e,t),mount_component(n,t,null),append(t,r),append(t,a),mount_component(s,a,null),append(t,l),mount_component(u,t,null),append(e,d),append(e,f),append(f,m),mount_component(h,m,null),append(m,p),append(f,g),mount_component(b,f,null),v=!0},p(y,[C]){const E={};C&16&&(E.engine=y[4]),n.$set(E);const A={};C&1&&(A.rows=y[0].sourceList||[]),C&64&&(A.columns=[{fieldName:"source",header:"Source",component:SourceName,getProps:func_2$7},{fieldName:"action",header:"Action",component:SourceAction,getProps:y[17]},{fieldName:"target",header:"Target",slot:1},{fieldName:"preview",header:"Preview",slot:0},{fieldName:"columns",header:"Columns",slot:2}]),C&20971535&&(A.$$scope={dirty:C,ctx:y}),b.$set(A)},i(y){v||(transition_in(n.$$.fragment,y),transition_in(s.$$.fragment,y),transition_in(u.$$.fragment,y),transition_in(h.$$.fragment,y),transition_in(b.$$.fragment,y),v=!0)},o(y){transition_out(n.$$.fragment,y),transition_out(s.$$.fragment,y),transition_out(u.$$.fragment,y),transition_out(h.$$.fragment,y),transition_out(b.$$.fragment,y),v=!1},d(y){y&&detach(e),destroy_component(n),destroy_component(s),destroy_component(u),destroy_component(h),destroy_component(b)}}}var __awaiter$a=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};function addFileToSourceListDefault({fileName:o,shortName:e,isDownload:t},n,r){return __awaiter$a(this,void 0,void 0,function*(){const a=e;n.push(a),r[`sourceFile_${a}`]={fileName:o,isDownload:t}})}function addFilesToSourceList(o,e,t,n,r=void 0,a=void 0){return __awaiter$a(this,void 0,void 0,function*(){const s=[],l={},u=r||t.sourceStorageType;for(const d of getAsArray(e)){const f=findFileFormat(o,u);f&&(yield(f.addFileToSourceList||addFileToSourceListDefault)(d,s,l,apiCall))}l.sourceList=[...(t.sourceList||[]).filter(d=>!s.includes(d)),...s],r&&r!=t.sourceStorageType&&(l.sourceStorageType=r);for(const d of s)t.fixedTargetPureName&&(t[`targetName_${d}`]=t.fixedTargetPureName,t[`actionType_${d}`]="appendData");n.set(Object.assign(Object.assign({},t),l)),a&&s.length==1&&a(s[0])})}const func_2$7=o=>({name:o});function instance$3p(o,e,t){let n,r,a,s,l,u,d,f,m,h=noop$1,p=()=>(h(),h=subscribe(r,N=>t(13,m=N)),r);component_subscribe(o,extensions,N=>t(1,d=N)),o.$$.on_destroy.push(()=>h());var g=this&&this.__awaiter||function(N,M,F,D){function x(B){return B instanceof F?B:new F(function(K){K(B)})}return new(F||(F=Promise))(function(B,K){function U(q){try{W(D.next(q))}catch(H){K(H)}}function G(q){try{W(D.throw(q))}catch(H){K(H)}}function W(q){q.done?B(q.value):x(q.value).then(U,G)}W((D=D.apply(N,M||[])).next())})};let{uploadedFile:b=void 0}=e,{openedFile:v=void 0}=e,{previewReaderStore:y}=e;const{values:C,setFieldValue:E}=getFormContext();component_subscribe(o,C,N=>t(0,u=N));const A=writable(null);component_subscribe(o,A,N=>t(2,f=N));const k=N=>g(void 0,void 0,void 0,function*(){if(N&&l){const M=yield createPreviewReader(d,u,N);y&&y.set(M)}else y&&y.set(null)}),T=N=>{addFilesToSourceList(d,[{fileName:N.filePath,shortName:N.shortName}],u,C,!s||s.length==0?N.storageType:null,A.set)};onMount(()=>(setUploadListener(T),b&&T(b),v&&T(v),()=>{setUploadListener(null)}));const $=N=>{showModal(ColumnMapModal,{value:u[`columns_${N}`],onConfirm:M=>E(`columns_${N}`,M)})},S=(N,M)=>E(`targetName_${N}`,M.target.value),I=(N,M)=>{M.target.checked?set_store_value(A,f=N,f):set_store_value(A,f=null,f)},R=N=>({name:N,targetDbinfo:n});return o.$$set=N=>{"uploadedFile"in N&&t(10,b=N.uploadedFile),"openedFile"in N&&t(11,v=N.openedFile),"previewReaderStore"in N&&t(12,y=N.previewReaderStore)},o.$$.update=()=>{o.$$.dirty&1&&t(6,n=useDatabaseInfo({conid:u.targetConnectionId,database:u.targetDatabaseName})),o.$$.dirty&1&&p(t(5,r=useConnectionInfo({conid:u.sourceConnectionId}))),o.$$.dirty&8192&&t(4,a=m==null?void 0:m.engine),o.$$.dirty&1&&(s=u.sourceList),o.$$.dirty&3&&t(3,l=!!findFileFormat(d,u.sourceStorageType)||u.sourceStorageType=="archive"),o.$$.dirty&5&&k(f)},[u,d,f,l,a,r,n,C,E,A,b,v,y,m,$,S,I,R]}class ImportExportConfigurator extends SvelteComponent{constructor(e){super(),init(this,e,instance$3p,create_fragment$3q,safe_not_equal,{uploadedFile:10,openedFile:11,previewReaderStore:12})}}function registerCommand(o){const{testEnabled:e}=o;commands.update(t=>t[o.id]?(console.error(`Command ${o.id} already registered`),t):{...t,[o.id]:{text:`${o.category}: ${o.name}`,...o,enabled:!e}}),invalidateCommandDefinitions()}const VirtualForeignKeyEditorModal_svelte_svelte_type_style_lang="";function get_each_context$x(o,e,t){const n=o.slice();return n[25]=e[t],n[27]=t,n}function create_key_block_1$3(o){var r;let e,t;function n(...a){return o[19](o[27],...a)}return e=new SelectField({props:{value:o[25].columnName,isNative:!0,notSelected:!0,options:(((r=o[11])==null?void 0:r.columns)||[]).map(func$f)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;o=a;const l={};s&256&&(l.value=o[25].columnName),s&2048&&(l.options=(((u=o[11])==null?void 0:u.columns)||[]).map(func$f)),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_key_block$a(o){var r;let e,t;function n(...a){return o[20](o[27],...a)}return e=new SelectField({props:{value:o[25].refColumnName,isNative:!0,notSelected:!0,options:(((r=o[10])==null?void 0:r.columns)||[]).map(func_1$e)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;o=a;const l={};s&256&&(l.value=o[25].refColumnName),s&1024&&(l.options=(((u=o[10])==null?void 0:u.columns)||[]).map(func_1$e)),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_each_block$x(o){let e,t,n=o[25].columnName,r,a,s=o[25].refColumnName,l,u,d,f,m=create_key_block_1$3(o),h=create_key_block$a(o);function p(...g){return o[21](o[27],...g)}return d=new FormStyledButton({props:{value:"Delete"}}),d.$on("click",p),{c(){e=element("div"),t=element("div"),m.c(),r=space(),a=element("div"),h.c(),l=space(),u=element("div"),create_component(d.$$.fragment),attr(t,"class","col-5 mr-1"),attr(a,"class","col-5 ml-1"),attr(u,"class","col-2 button svelte-1ecnyiy"),attr(e,"class","row svelte-1ecnyiy")},m(g,b){insert(g,e,b),append(e,t),m.m(t,null),append(e,r),append(e,a),h.m(a,null),append(e,l),append(e,u),mount_component(d,u,null),f=!0},p(g,b){o=g,b&256&&safe_not_equal(n,n=o[25].columnName)?(group_outros(),transition_out(m,1,1,noop$1),check_outros(),m=create_key_block_1$3(o),m.c(),transition_in(m,1),m.m(t,null)):m.p(o,b),b&256&&safe_not_equal(s,s=o[25].refColumnName)?(group_outros(),transition_out(h,1,1,noop$1),check_outros(),h=create_key_block$a(o),h.c(),transition_in(h,1),h.m(a,null)):h.p(o,b)},i(g){f||(transition_in(m),transition_in(h),transition_in(d.$$.fragment,g),f=!0)},o(g){transition_out(m),transition_out(h),transition_out(d.$$.fragment,g),f=!1},d(g){g&&detach(e),m.d(g),h.d(g),destroy_component(d)}}}function create_default_slot_1$K(o){var U;let e,t,n,r,a,s,l,u,d,f,m=((U=o[11])==null?void 0:U.pureName)+"",h,p,g,b,v=(o[4]||"(table not set)")+"",y,C,E,A,k,T,$,S,I,R,N,M;s=new SelectField({props:{value:lib.fullNameToString({pureName:o[4],schemaName:o[5]}),isNative:!0,notSelected:!0,options:o[9]}}),s.$on("change",o[18]);let F=ensure_array_like(o[8]),D=[];for(let G=0;G<F.length;G+=1)D[G]=create_each_block$x(get_each_context$x(o,F,G));const x=G=>transition_out(D[G],1,1,()=>{D[G]=null});A=new FormStyledButton({props:{type:"button",value:"Add column"}}),A.$on("click",o[22]);function B(G){o[23](G)}let K={};return o[7]!==void 0&&(K.value=o[7]),R=new TargetApplicationSelect({props:K}),binding_callbacks.push(()=>bind(R,"value",B)),{c(){e=element("div"),t=element("div"),n=element("div"),n.textContent="Referenced table",r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),u=element("div"),d=element("div"),f=text("Base column - "),h=text(m),p=space(),g=element("div"),b=text("Ref column - "),y=text(v),C=space();for(let G=0;G<D.length;G+=1)D[G].c();E=space(),create_component(A.$$.fragment),k=space(),T=element("div"),$=element("div"),$.textContent="Target application",S=space(),I=element("div"),create_component(R.$$.fragment),attr(n,"class","label col-3 svelte-1ecnyiy"),attr(a,"class","col-9"),attr(t,"class","row svelte-1ecnyiy"),attr(d,"class","col-5 mr-1"),attr(g,"class","col-5 ml-1"),attr(u,"class","row svelte-1ecnyiy"),attr($,"class","label col-3 svelte-1ecnyiy"),attr(I,"class","col-9"),attr(T,"class","row svelte-1ecnyiy"),attr(e,"class","largeFormMarker")},m(G,W){insert(G,e,W),append(e,t),append(t,n),append(t,r),append(t,a),mount_component(s,a,null),append(e,l),append(e,u),append(u,d),append(d,f),append(d,h),append(u,p),append(u,g),append(g,b),append(g,y),append(e,C);for(let q=0;q<D.length;q+=1)D[q]&&D[q].m(e,null);append(e,E),mount_component(A,e,null),append(e,k),append(e,T),append(T,$),append(T,S),append(T,I),mount_component(R,I,null),M=!0},p(G,W){var z;const q={};if(W&48&&(q.value=lib.fullNameToString({pureName:G[4],schemaName:G[5]})),W&512&&(q.options=G[9]),s.$set(q),(!M||W&2048)&&m!==(m=((z=G[11])==null?void 0:z.pureName)+"")&&set_data(h,m),(!M||W&16)&&v!==(v=(G[4]||"(table not set)")+"")&&set_data(y,v),W&3328){F=ensure_array_like(G[8]);let Y;for(Y=0;Y<F.length;Y+=1){const V=get_each_context$x(G,F,Y);D[Y]?(D[Y].p(V,W),transition_in(D[Y],1)):(D[Y]=create_each_block$x(V),D[Y].c(),transition_in(D[Y],1),D[Y].m(e,E))}for(group_outros(),Y=F.length;Y<D.length;Y+=1)x(Y);check_outros()}const H={};!N&&W&128&&(N=!0,H.value=G[7],add_flush_callback(()=>N=!1)),R.$set(H)},i(G){if(!M){transition_in(s.$$.fragment,G);for(let W=0;W<F.length;W+=1)transition_in(D[W]);transition_in(A.$$.fragment,G),transition_in(R.$$.fragment,G),M=!0}},o(G){transition_out(s.$$.fragment,G),D=D.filter(Boolean);for(let W=0;W<D.length;W+=1)transition_out(D[W]);transition_out(A.$$.fragment,G),transition_out(R.$$.fragment,G),M=!1},d(G){G&&detach(e),destroy_component(s),destroy_each(D,G),destroy_component(A),destroy_component(R)}}}function create_header_slot$m(o){let e;return{c(){e=text("Virtual foreign key")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$l(o){let e,t,n,r;return e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[17]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$1l(o){let e,t;const n=[o[14]];let r={$$slots:{footer:[create_footer_slot$l],header:[create_header_slot$m],default:[create_default_slot_1$K]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16384?get_spread_update(n,[get_spread_object(a[14])]):{};s&268439551&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3p(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1l]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&268455935&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$f=o=>({label:o.columnName,value:o.columnName}),func_1$e=o=>({label:o.columnName,value:o.columnName});function instance$3o(o,e,t){let n,r;const a=["conid","database","schemaName","pureName","columnName"];let s=compute_rest_props(e,a),l,u;var d=this&&this.__awaiter||function(F,D,x,B){function K(U){return U instanceof x?U:new x(function(G){G(U)})}return new(x||(x=Promise))(function(U,G){function W(z){try{H(B.next(z))}catch(Y){G(Y)}}function q(z){try{H(B.throw(z))}catch(Y){G(Y)}}function H(z){z.done?U(z.value):K(z.value).then(W,q)}H((B=B.apply(F,D||[])).next())})};let{conid:f}=e,{database:m}=e,{schemaName:h}=e,{pureName:p}=e,{columnName:g}=e,b;const v=useDatabaseInfo({conid:f,database:m});component_subscribe(o,v,F=>t(6,l=F));const y=useTableInfo({conid:f,database:m,schemaName:h,pureName:p});component_subscribe(o,y,F=>t(11,u=F));let C=[],E=null,A=null,k=[];onMount(()=>{g&&t(8,C=[...C,{columnName:g}])});const T=async()=>{const F=await saveDbToApp(f,m,b);await apiCall("apps/save-virtual-reference",{appFolder:F,schemaName:h,pureName:p,refSchemaName:A,refTableName:E,columns:C}),closeCurrentModal()},$=F=>{var D,x,B;if(F.detail){const K=lib.fullNameFromString(F.detail);if(t(4,E=K.pureName),t(5,A=K.schemaName),(C==null?void 0:C.length)==1){const U=(D=l==null?void 0:l.tables)==null?void 0:D.find(G=>G.pureName==E&&G.schemaName==A);((B=(x=U==null?void 0:U.primaryKey)==null?void 0:x.columns)==null?void 0:B.length)==1&&t(8,C=[{...C[0],refColumnName:U.primaryKey.columns[0].columnName}])}}},S=(F,D)=>{D.detail&&t(8,C=C.map((x,B)=>B==F?{...x,columnName:D.detail}:x))},I=(F,D)=>{D.detail&&t(8,C=C.map((x,B)=>B==F?{...x,refColumnName:D.detail}:x))},R=(F,D)=>{const x=[...C];x.splice(F,1),t(8,C=x)},N=()=>{t(8,C=[...C,{}])};function M(F){b=F,t(7,b)}return o.$$set=F=>{e=assign(assign({},e),exclude_internal_props(F)),t(14,s=compute_rest_props(e,a)),"conid"in F&&t(0,f=F.conid),"database"in F&&t(1,m=F.database),"schemaName"in F&&t(2,h=F.schemaName),"pureName"in F&&t(3,p=F.pureName),"columnName"in F&&t(15,g=F.columnName)},o.$$.update=()=>{o.$$.dirty&64&&t(16,n=[..._.sortBy((l==null?void 0:l.tables)||[],["schemaName","pureName"])]),o.$$.dirty&65536&&d(void 0,void 0,void 0,function*(){yield tick(),t(9,k=n.map(F=>({label:lib.fullNameToLabel(F),value:lib.fullNameToString(F)})))}),o.$$.dirty&65584&&t(10,r=n.find(F=>F.pureName==E&&F.schemaName==A))},[f,m,h,p,E,A,l,b,C,k,r,u,v,y,s,g,n,T,$,S,I,R,N,M]}class VirtualForeignKeyEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$3o,create_fragment$3p,safe_not_equal,{conid:0,database:1,schemaName:2,pureName:3,columnName:15})}}const ColumnHeaderControl_svelte_svelte_type_style_lang="";function create_if_block_5$g(o){let e,t=(o[1]=="COUNT DISTINCT"?"distinct":o[1].toLowerCase())+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","grouping svelte-qcvs6b")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t=(r[1]=="COUNT DISTINCT"?"distinct":r[1].toLowerCase())+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block_4$o(o){let e,t=o[0].dataType.toLowerCase()+"",n,r;return{c(){e=element("span"),n=text(t),attr(e,"class","data-type svelte-qcvs6b"),attr(e,"title",r=o[0].dataType)},m(a,s){insert(a,e,s),append(e,n)},p(a,s){s&1&&t!==(t=a[0].dataType.toLowerCase()+"")&&set_data(n,t),s&1&&r!==(r=a[0].dataType)&&attr(e,"title",r)},d(a){a&&detach(e)}}}function create_if_block_2$E(o){let e,t,n,r;t=new FontIcon({props:{icon:"img sort-asc"}});let a=o[3]>=0&&create_if_block_3$s(o);return{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","icon svelte-qcvs6b")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){s[3]>=0?a?a.p(s,l):(a=create_if_block_3$s(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){r||(transition_in(t.$$.fragment,s),r=!0)},o(s){transition_out(t.$$.fragment,s),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_if_block_3$s(o){let e,t=o[3]+1+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","color-icon-green order-index svelte-qcvs6b")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&8&&t!==(t=r[3]+1+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block$1v(o){let e,t,n,r;t=new FontIcon({props:{icon:"img sort-desc"}});let a=o[3]>=0&&create_if_block_1$T(o);return{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","icon svelte-qcvs6b")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){s[3]>=0?a?a.p(s,l):(a=create_if_block_1$T(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){r||(transition_in(t.$$.fragment,s),r=!0)},o(s){transition_out(t.$$.fragment,s),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_if_block_1$T(o){let e,t=o[3]+1+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","color-icon-green order-index svelte-qcvs6b")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&8&&t!==(t=r[3]+1+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_fragment$3o(o){let e,t,n,r,a,s=_.isString(o[0].dataType)&&!o[2],l,u,d,f,m,h,p,g,b,v=o[1]&&create_if_block_5$g(o);const y=[o[0]];let C={};for(let T=0;T<y.length;T+=1)C=assign(C,y[T]);r=new ColumnLabel({props:C});let E=s&&create_if_block_4$o(o),A=o[2]=="ASC"&&create_if_block_2$E(o),k=o[2]=="DESC"&&create_if_block$1v(o);return f=new DropDownButton({props:{menu:o[4],narrow:!0}}),{c(){e=element("div"),t=element("div"),v&&v.c(),n=space(),create_component(r.$$.fragment),a=space(),E&&E.c(),l=space(),A&&A.c(),u=space(),k&&k.c(),d=space(),create_component(f.$$.fragment),m=space(),h=element("div"),attr(t,"class","label svelte-qcvs6b"),attr(h,"class","horizontal-split-handle resizeHandleControl"),attr(e,"class","header svelte-qcvs6b")},m(T,$){insert(T,e,$),append(e,t),v&&v.m(t,null),append(t,n),mount_component(r,t,null),append(t,a),E&&E.m(t,null),append(e,l),A&&A.m(e,null),append(e,u),k&&k.m(e,null),append(e,d),mount_component(f,e,null),append(e,m),append(e,h),p=!0,g||(b=[action_destroyer(splitterDrag.call(null,h,"clientX")),listen(h,"resizeSplitter",o[13])],g=!0)},p(T,[$]){T[1]?v?v.p(T,$):(v=create_if_block_5$g(T),v.c(),v.m(t,n)):v&&(v.d(1),v=null);const S=$&1?get_spread_update(y,[get_spread_object(T[0])]):{};r.$set(S),$&5&&(s=_.isString(T[0].dataType)&&!T[2]),s?E?E.p(T,$):(E=create_if_block_4$o(T),E.c(),E.m(t,null)):E&&(E.d(1),E=null),T[2]=="ASC"?A?(A.p(T,$),$&4&&transition_in(A,1)):(A=create_if_block_2$E(T),A.c(),transition_in(A,1),A.m(e,u)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),T[2]=="DESC"?k?(k.p(T,$),$&4&&transition_in(k,1)):(k=create_if_block$1v(T),k.c(),transition_in(k,1),k.m(e,d)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros())},i(T){p||(transition_in(r.$$.fragment,T),transition_in(A),transition_in(k),transition_in(f.$$.fragment,T),p=!0)},o(T){transition_out(r.$$.fragment,T),transition_out(A),transition_out(k),transition_out(f.$$.fragment,T),p=!1},d(T){T&&detach(e),v&&v.d(),destroy_component(r),E&&E.d(),A&&A.d(),k&&k.d(),destroy_component(f),g=!1,run_all(b)}}}function instance$3n(o,e,t){let{column:n}=e,{conid:r=void 0}=e,{database:a=void 0}=e,{setSort:s=void 0}=e,{addToSort:l=void 0}=e,{clearSort:u=void 0}=e,{grouping:d=void 0}=e,{order:f=void 0}=e,{orderIndex:m=void 0}=e,{isSortDefined:h=!1}=e,{allowDefineVirtualReferences:p=!1}=e,{setGrouping:g}=e;const b=()=>{openDatabaseObjectDetail("TableDataTab",null,{schemaName:n.foreignKey.refSchemaName,pureName:n.foreignKey.refTableName,conid:r,database:a,objectTypeField:"tables"})},v=()=>{showModal(VirtualForeignKeyEditorModal,{schemaName:n.schemaName,pureName:n.pureName,conid:r,database:a,columnName:n.columnName})};function y(){return[s&&{onClick:()=>s("ASC"),text:"Sort ascending"},s&&{onClick:()=>s("DESC"),text:"Sort descending"},h&&l&&!f&&{onClick:()=>l("ASC"),text:"Add to sort - ascending"},h&&l&&!f&&{onClick:()=>l("DESC"),text:"Add to sort - descending"},f&&u&&{onClick:()=>u(),text:"Clear sort criteria"},{onClick:()=>copyTextToClipboard(n.columnName),text:"Copy column name"},n.foreignKey&&[{divider:!0},{onClick:b,text:n.foreignKey.refTableName}],g&&{divider:!0},g&&{onClick:()=>g("GROUP"),text:"Group by"},g&&{onClick:()=>g("MAX"),text:"MAX"},g&&{onClick:()=>g("MIN"),text:"MIN"},g&&{onClick:()=>g("SUM"),text:"SUM"},g&&{onClick:()=>g("AVG"),text:"AVG"},g&&{onClick:()=>g("COUNT"),text:"COUNT"},g&&{onClick:()=>g("COUNT DISTINCT"),text:"COUNT DISTINCT"},lib.isTypeDateTime(n.dataType)&&[{divider:!0},{onClick:()=>g("GROUP:YEAR"),text:"Group by YEAR"},{onClick:()=>g("GROUP:MONTH"),text:"Group by MONTH"},{onClick:()=>g("GROUP:DAY"),text:"Group by DAY"}],p&&[{divider:!0},{onClick:v,text:"Define virtual foreign key"}]]}function C(E){bubble.call(this,o,E)}return o.$$set=E=>{"column"in E&&t(0,n=E.column),"conid"in E&&t(5,r=E.conid),"database"in E&&t(6,a=E.database),"setSort"in E&&t(7,s=E.setSort),"addToSort"in E&&t(8,l=E.addToSort),"clearSort"in E&&t(9,u=E.clearSort),"grouping"in E&&t(1,d=E.grouping),"order"in E&&t(2,f=E.order),"orderIndex"in E&&t(3,m=E.orderIndex),"isSortDefined"in E&&t(10,h=E.isSortDefined),"allowDefineVirtualReferences"in E&&t(11,p=E.allowDefineVirtualReferences),"setGrouping"in E&&t(12,g=E.setGrouping)},[n,d,f,m,y,r,a,s,l,u,h,p,g,C]}class ColumnHeaderControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$3n,create_fragment$3o,safe_not_equal,{column:0,conid:5,database:6,setSort:7,addToSort:8,clearSort:9,grouping:1,order:2,orderIndex:3,isSortDefined:10,allowDefineVirtualReferences:11,setGrouping:12})}}const ColumnHeaderControl$1=Object.freeze(Object.defineProperty({__proto__:null,default:ColumnHeaderControl},Symbol.toStringTag,{value:"Module"})),ShowFormButton_svelte_svelte_type_style_lang="";function create_fragment$3n(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:o[0]}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","showFormButtonMarker svelte-fa9c0t")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=[listen(e,"click",stop_propagation(prevent_default(o[1]))),listen(e,"mousedown",stop_propagation(prevent_default(o[2]))),listen(e,"mouseup",stop_propagation(prevent_default(o[3])))],r=!0)},p(s,[l]){const u={};l&1&&(u.icon=s[0]),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,run_all(a)}}}function instance$3m(o,e,t){let{icon:n="icon form"}=e;function r(l){bubble.call(this,o,l)}function a(l){bubble.call(this,o,l)}function s(l){bubble.call(this,o,l)}return o.$$set=l=>{"icon"in l&&t(0,n=l.icon)},[n,r,a,s]}class ShowFormButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$3m,create_fragment$3n,safe_not_equal,{icon:0})}}const CellValue_svelte_svelte_type_style_lang="";function get_if_ctx_1(o){const e=o.slice(),t=JSON.stringify(e[2],void 0,2);return e[5]=t,e}function get_if_ctx$1(o){const e=o.slice(),t=JSON.stringify(e[1],void 0,2);return e[5]=t,e}function create_else_block_4(o){let e=o[1].toString()+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&2&&e!==(e=n[1].toString()+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block_17$1(o){let e,t,n=o[2].length+"",r,a,s;return{c(){e=element("span"),t=text("["),r=text(n),a=text(" items]"),attr(e,"class","null svelte-7yy3rb"),attr(e,"title",s=o[2].map(o[4]).join(`
`))},m(l,u){insert(l,e,u),append(e,t),append(e,r),append(e,a)},p(l,u){u&4&&n!==(n=l[2].length+"")&&set_data(r,n),u&4&&s!==(s=l[2].map(l[4]).join(`
`))&&attr(e,"title",s)},d(l){l&&detach(e)}}}function create_if_block_15$1(o){let e,t;function n(s,l){return s[5].length<100?create_if_block_16$1:create_else_block_3}let r=n(o),a=r(o);return{c(){e=element("span"),a.c(),attr(e,"class","null svelte-7yy3rb"),attr(e,"title",t=o[5])},m(s,l){insert(s,e,l),a.m(e,null)},p(s,l){r===(r=n(s))&&a?a.p(s,l):(a.d(1),a=r(s),a&&(a.c(),a.m(e,null))),l&4&&t!==(t=s[5])&&attr(e,"title",t)},d(s){s&&detach(e),a.d()}}}function create_if_block_14$1(o){let e,t,n=o[1].length+"",r,a,s;return{c(){e=element("span"),t=text("["),r=text(n),a=text(" items]"),attr(e,"class","null svelte-7yy3rb"),attr(e,"title",s=o[1].map(o[3]).join(`
`))},m(l,u){insert(l,e,u),append(e,t),append(e,r),append(e,a)},p(l,u){u&2&&n!==(n=l[1].length+"")&&set_data(r,n),u&2&&s!==(s=l[1].map(l[3]).join(`
`))&&attr(e,"title",s)},d(l){l&&detach(e)}}}function create_if_block_12$2(o){let e,t;function n(s,l){return s[5].length<100?create_if_block_13$2:create_else_block_2$1}let r=n(o),a=r(o);return{c(){e=element("span"),a.c(),attr(e,"class","null svelte-7yy3rb"),attr(e,"title",t=o[5])},m(s,l){insert(s,e,l),a.m(e,null)},p(s,l){r===(r=n(s))&&a?a.p(s,l):(a.d(1),a=r(s),a&&(a.c(),a.m(e,null))),l&2&&t!==(t=s[5])&&attr(e,"title",t)},d(s){s&&detach(e),a.d()}}}function create_if_block_11$3(o){let e,t,n=o[1].$oid+"",r,a;return{c(){e=element("span"),t=text('ObjectId("'),r=text(n),a=text('")'),attr(e,"class","value svelte-7yy3rb")},m(s,l){insert(s,e,l),append(e,t),append(e,r),append(e,a)},p(s,l){l&2&&n!==(n=s[1].$oid+"")&&set_data(r,n)},d(s){s&&detach(e)}}}function create_if_block_9$4(o){let e;function t(a,s){return a[1].data.length<=16?create_if_block_10$3:create_else_block_1$6}let n=t(o),r=n(o);return{c(){r.c(),e=empty()},m(a,s){r.m(a,s),insert(a,e,s)},p(a,s){n===(n=t(a))&&r?r.p(a,s):(r.d(1),r=n(a),r&&(r.c(),r.m(e.parentNode,e)))},d(a){a&&detach(e),r.d(a)}}}function create_if_block_7$5(o){let e,t;function n(s,l){return l&2&&(e=null),e==null&&(e=!!dateTimeRegex.test(s[1])),e?create_if_block_8$4:create_else_block$F}let r=n(o,-1),a=r(o);return{c(){a.c(),t=empty()},m(s,l){a.m(s,l),insert(s,t,l)},p(s,l){r===(r=n(s,l))&&a?a.p(s,l):(a.d(1),a=r(s),a&&(a.c(),a.m(t.parentNode,t)))},d(s){s&&detach(t),a.d(s)}}}function create_if_block_6$9(o){let e,t=formatNumber$1(o[1])+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","value svelte-7yy3rb")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t=formatNumber$1(r[1])+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block_5$f(o){let e;return{c(){e=element("span"),e.textContent="false",attr(e,"class","value svelte-7yy3rb")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_4$n(o){let e;return{c(){e=element("span"),e.textContent="true",attr(e,"class","value svelte-7yy3rb")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_3$r(o){let e=o[1].toString()+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&2&&e!==(e=n[1].toString()+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block_2$D(o){let e;return{c(){e=element("span"),e.textContent="(No field)",attr(e,"class","null svelte-7yy3rb")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_1$S(o){let e;return{c(){e=element("span"),e.textContent="(NULL)",attr(e,"class","null svelte-7yy3rb")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block$1u(o){let e;return{c(){e=element("span"),e.textContent="(No row)",attr(e,"class","null svelte-7yy3rb")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_else_block_3(o){let e;return{c(){e=text("(JSON)")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_16$1(o){let e=JSON.stringify(o[2])+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&4&&e!==(e=JSON.stringify(n[2])+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_else_block_2$1(o){let e;return{c(){e=text("(JSON)")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_13$2(o){let e=JSON.stringify(o[1])+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&2&&e!==(e=JSON.stringify(n[1])+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_else_block_1$6(o){let e,t,n=o[1].data.length+"",r,a;return{c(){e=element("span"),t=text("("),r=text(n),a=text(" bytes)"),attr(e,"class","null svelte-7yy3rb")},m(s,l){insert(s,e,l),append(e,t),append(e,r),append(e,a)},p(s,l){l&2&&n!==(n=s[1].data.length+"")&&set_data(r,n)},d(s){s&&detach(e)}}}function create_if_block_10$3(o){let e,t="0x"+lib.arrayToHexString(o[1].data),n;return{c(){e=element("span"),n=text(t),attr(e,"class","value svelte-7yy3rb")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t="0x"+lib.arrayToHexString(r[1].data))&&set_data(n,t)},d(r){r&&detach(e)}}}function create_else_block$F(o){let e=highlightSpecialCharacters(o[1])+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&2&&e!==(e=highlightSpecialCharacters(n[1])+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block_8$4(o){let e,t=formatDateTime(o[1])+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","value svelte-7yy3rb")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t=formatDateTime(r[1])+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_fragment$3m(o){let e,t,n,r,a,s,l,u,d;function f(g,b){var v;return b&2&&(e=null),b&2&&(t=null),b&6&&(n=null),b&2&&(r=null),b&2&&(a=null),b&2&&(s=null),b&4&&(l=null),b&4&&(u=null),g[0]==null?create_if_block$1u:g[1]===null?create_if_block_1$S:g[1]===void 0?create_if_block_2$D:(e==null&&(e=!!_.isDate(g[1])),e?create_if_block_3$r:g[1]===!0?create_if_block_4$n:g[1]===!1?create_if_block_5$f:(t==null&&(t=!!_.isNumber(g[1])),t?create_if_block_6$9:(n==null&&(n=!!(_.isString(g[1])&&!g[2])),n?create_if_block_7$5:(r==null&&(r=!!(((v=g[1])==null?void 0:v.type)=="Buffer"&&_.isArray(g[1].data))),r?create_if_block_9$4:g[1].$oid?create_if_block_11$3:(a==null&&(a=!!_.isPlainObject(g[1])),a?create_if_block_12$2:(s==null&&(s=!!_.isArray(g[1])),s?create_if_block_14$1:(l==null&&(l=!!_.isPlainObject(g[2])),l?create_if_block_15$1:(u==null&&(u=!!_.isArray(g[2])),u?create_if_block_17$1:create_else_block_4))))))))}function m(g,b){return b===create_if_block_12$2?get_if_ctx$1(g):b===create_if_block_15$1?get_if_ctx_1(g):g}let h=f(o,-1),p=h(m(o,h));return{c(){p.c(),d=empty()},m(g,b){p.m(g,b),insert(g,d,b)},p(g,[b]){h===(h=f(g,b))&&p?p.p(m(g,h),b):(p.d(1),p=h(m(g,h)),p&&(p.c(),p.m(d.parentNode,d)))},i:noop$1,o:noop$1,d(g){g&&detach(d),p.d(g)}}}function makeBulletString(o){return _.pad("",o.length,"")}function highlightSpecialCharacters(o){return o=o.replace(/\n/g,""),o=o.replace(/\r/g,""),o=o.replace(/^(\s+)/,makeBulletString),o=o.replace(/(\s+)$/,makeBulletString),o=o.replace(/(\s\s+)/g,makeBulletString),o}const dateTimeRegex=/^([0-9]+)-(0[1-9]|1[012])-(0[1-9]|[12][0-9]|3[01])[Tt]([01][0-9]|2[0-3]):([0-5][0-9]):([0-5][0-9]|60)(\.[0-9]+)?(([Zz])|()|([\+|\-]([01][0-9]|2[0-3]):[0-5][0-9]))$/;function formatNumber$1(o){return(o>=1e4||o<=-1e4)&&getBoolSettingsValue("dataGrid.thousandsSeparator",!1)?o.toLocaleString():o.toString()}function formatDateTime(o){const e=o.match(dateTimeRegex);return`${e[1]}-${e[2]}-${e[3]} ${e[4]}:${e[5]}:${e[6]}`}function instance$3l(o,e,t){let{rowData:n}=e,{value:r}=e,{jsonParsedValue:a=void 0}=e;const s=u=>JSON.stringify(u),l=u=>JSON.stringify(u);return o.$$set=u=>{"rowData"in u&&t(0,n=u.rowData),"value"in u&&t(1,r=u.value),"jsonParsedValue"in u&&t(2,a=u.jsonParsedValue)},[n,r,a,s,l]}class CellValue extends SvelteComponent{constructor(e){super(),init(this,e,instance$3l,create_fragment$3m,safe_not_equal,{rowData:0,value:1,jsonParsedValue:2})}}const CellValue$1=Object.freeze(Object.defineProperty({__proto__:null,default:CellValue},Symbol.toStringTag,{value:"Module"})),DataGridCell_svelte_svelte_type_style_lang="";function create_if_block_7$4(o){let e,t=o[2].hintColumnNames.map(o[30]).join(o[2].hintColumnDelimiter||" ")+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","hint svelte-1do4nz4")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a[0]&12&&t!==(t=r[2].hintColumnNames.map(r[30]).join(r[2].hintColumnDelimiter||" ")+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block_6$8(o){let e,t;return e=new ShowFormButton({}),e.$on("click",o[31]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$e(o){let e,t;return e=new ShowFormButton({props:{icon:"icon dots-horizontal"}}),e.$on("click",function(){is_function(o[18])&&o[18].apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){o=n},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$m(o){let e,t;return e=new ShowFormButton({props:{icon:"icon open-in-new"}}),e.$on("click",o[32]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$q(o){let e,t;return e=new ShowFormButton({props:{icon:"icon open-in-new"}}),e.$on("click",o[33]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$C(o){let e,t;return e=new ShowFormButton({props:{icon:"icon open-in-new"}}),e.$on("click",o[34]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$R(o){let e;return{c(){e=element("div"),attr(e,"class","autoFillMarker autofillHandleMarker svelte-1do4nz4")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block$1t(o){let e;const t=o[28].default,n=create_slot(t,o,o[27],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a[0]&134217728)&&update_slot_base(n,t,r,r[27],e?get_slot_changes(t,r[27],a,null):get_all_dirty_from_scope(r[27]),null)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$3l(o){let e,t,n,r=o[5]&&o[3]&&_.some(o[2].hintColumnNames,o[29]),a,s,l,u,d=o[20]&&_.isPlainObject(o[20]),f,m=_.isArray(o[20]||o[19]),h,p,g,b;t=new CellValue({props:{rowData:o[3],value:o[19],jsonParsedValue:o[20]}});let v=r&&create_if_block_7$4(o),y=o[2].foreignKey&&o[3]&&o[3][o[2].uniqueName]&&!o[17]&&create_if_block_6$8(o),C=o[2].foreignKey&&o[17]&&o[18]&&create_if_block_5$e(o),E=o[21]&&create_if_block_4$m(o),A=d&&create_if_block_3$q(o),k=m&&create_if_block_2$C(o),T=o[16]&&create_if_block_1$R(),$=o[14]&&create_if_block$1t(o);return{c(){e=element("td"),create_component(t.$$.fragment),n=space(),v&&v.c(),a=space(),y&&y.c(),s=space(),C&&C.c(),l=space(),E&&E.c(),u=space(),A&&A.c(),f=space(),k&&k.c(),h=space(),T&&T.c(),p=space(),$&&$.c(),attr(e,"data-row",o[1]),attr(e,"data-col",g=o[4]==null?o[2].colIndex:o[4]),attr(e,"style",o[22]),attr(e,"class","svelte-1do4nz4"),toggle_class(e,"isSelected",o[6]),toggle_class(e,"isFrameSelected",o[7]),toggle_class(e,"isModifiedRow",o[8]),toggle_class(e,"isModifiedCell",o[9]),toggle_class(e,"isInserted",o[10]),toggle_class(e,"isDeleted",o[11]),toggle_class(e,"isAutofillSelected",o[12]),toggle_class(e,"isFocusedColumn",o[13])},m(S,I){insert(S,e,I),mount_component(t,e,null),append(e,n),v&&v.m(e,null),append(e,a),y&&y.m(e,null),append(e,s),C&&C.m(e,null),append(e,l),E&&E.m(e,null),append(e,u),A&&A.m(e,null),append(e,f),k&&k.m(e,null),append(e,h),T&&T.m(e,null),append(e,p),$&&$.m(e,null),o[35](e),b=!0},p(S,I){const R={};I[0]&8&&(R.rowData=S[3]),I[0]&524288&&(R.value=S[19]),I[0]&1048576&&(R.jsonParsedValue=S[20]),t.$set(R),I[0]&44&&(r=S[5]&&S[3]&&_.some(S[2].hintColumnNames,S[29])),r?v?v.p(S,I):(v=create_if_block_7$4(S),v.c(),v.m(e,a)):v&&(v.d(1),v=null),S[2].foreignKey&&S[3]&&S[3][S[2].uniqueName]&&!S[17]?y?(y.p(S,I),I[0]&131084&&transition_in(y,1)):(y=create_if_block_6$8(S),y.c(),transition_in(y,1),y.m(e,s)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros()),S[2].foreignKey&&S[17]&&S[18]?C?(C.p(S,I),I[0]&393220&&transition_in(C,1)):(C=create_if_block_5$e(S),C.c(),transition_in(C,1),C.m(e,l)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros()),S[21]?E?(E.p(S,I),I[0]&2097152&&transition_in(E,1)):(E=create_if_block_4$m(S),E.c(),transition_in(E,1),E.m(e,u)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),I[0]&1048576&&(d=S[20]&&_.isPlainObject(S[20])),d?A?(A.p(S,I),I[0]&1048576&&transition_in(A,1)):(A=create_if_block_3$q(S),A.c(),transition_in(A,1),A.m(e,f)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),I[0]&1572864&&(m=_.isArray(S[20]||S[19])),m?k?(k.p(S,I),I[0]&1572864&&transition_in(k,1)):(k=create_if_block_2$C(S),k.c(),transition_in(k,1),k.m(e,h)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),S[16]?T||(T=create_if_block_1$R(),T.c(),T.m(e,p)):T&&(T.d(1),T=null),S[14]?$?($.p(S,I),I[0]&16384&&transition_in($,1)):($=create_if_block$1t(S),$.c(),transition_in($,1),$.m(e,null)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros()),(!b||I[0]&2)&&attr(e,"data-row",S[1]),(!b||I[0]&20&&g!==(g=S[4]==null?S[2].colIndex:S[4]))&&attr(e,"data-col",g),(!b||I[0]&4194304)&&attr(e,"style",S[22]),(!b||I[0]&64)&&toggle_class(e,"isSelected",S[6]),(!b||I[0]&128)&&toggle_class(e,"isFrameSelected",S[7]),(!b||I[0]&256)&&toggle_class(e,"isModifiedRow",S[8]),(!b||I[0]&512)&&toggle_class(e,"isModifiedCell",S[9]),(!b||I[0]&1024)&&toggle_class(e,"isInserted",S[10]),(!b||I[0]&2048)&&toggle_class(e,"isDeleted",S[11]),(!b||I[0]&4096)&&toggle_class(e,"isAutofillSelected",S[12]),(!b||I[0]&8192)&&toggle_class(e,"isFocusedColumn",S[13])},i(S){b||(transition_in(t.$$.fragment,S),transition_in(y),transition_in(C),transition_in(E),transition_in(A),transition_in(k),transition_in($),b=!0)},o(S){transition_out(t.$$.fragment,S),transition_out(y),transition_out(C),transition_out(E),transition_out(A),transition_out(k),transition_out($),b=!1},d(S){S&&detach(e),destroy_component(t),v&&v.d(),y&&y.d(),C&&C.d(),E&&E.d(),A&&A.d(),k&&k.d(),T&&T.d(),$&&$.d(),o[35](null)}}}function instance$3k(o,e,t){let n,r,a,s,{$$slots:l={},$$scope:u}=e,{rowIndex:d}=e,{col:f}=e,{rowData:m}=e,{colIndex:h=void 0}=e,{allowHintField:p=!1}=e,{maxWidth:g=null}=e,{minWidth:b=null}=e,{isSelected:v=!1}=e,{isFrameSelected:y=!1}=e,{isModifiedRow:C=!1}=e,{isModifiedCell:E=!1}=e,{isInserted:A=!1}=e,{isDeleted:k=!1}=e,{isAutofillSelected:T=!1}=e,{isFocusedColumn:$=!1}=e,{domCell:S=void 0}=e,{showSlot:I=!1}=e,{onSetFormView:R}=e,{isDynamicStructure:N=!1}=e,{isAutoFillMarker:M=!1}=e,{isCurrentCell:F=!1}=e,{onDictionaryLookup:D=null}=e,{onSetValue:x}=e;function B(Y,V){let J="";return V.width!=null?J+=`width:${V.width}px; min-width:${V.width}px; max-width:${V.width}px;`:(Y!=null&&(J+=`max-width:${Y}px;`),b!=null&&(J+=`min-width:${b}px;`)),J}const K=Y=>m[Y],U=Y=>m[Y],G=()=>R(m,f),W=()=>openJsonDocument(n,void 0,!0),q=()=>openJsonDocument(s,void 0,!0),H=()=>{_.every(s||n,Y=>_.isPlainObject(Y))?openJsonLinesData(s||n):openJsonDocument(s||n,void 0,!0)};function z(Y){binding_callbacks[Y?"unshift":"push"](()=>{S=Y,t(0,S)})}return o.$$set=Y=>{"rowIndex"in Y&&t(1,d=Y.rowIndex),"col"in Y&&t(2,f=Y.col),"rowData"in Y&&t(3,m=Y.rowData),"colIndex"in Y&&t(4,h=Y.colIndex),"allowHintField"in Y&&t(5,p=Y.allowHintField),"maxWidth"in Y&&t(23,g=Y.maxWidth),"minWidth"in Y&&t(24,b=Y.minWidth),"isSelected"in Y&&t(6,v=Y.isSelected),"isFrameSelected"in Y&&t(7,y=Y.isFrameSelected),"isModifiedRow"in Y&&t(8,C=Y.isModifiedRow),"isModifiedCell"in Y&&t(9,E=Y.isModifiedCell),"isInserted"in Y&&t(10,A=Y.isInserted),"isDeleted"in Y&&t(11,k=Y.isDeleted),"isAutofillSelected"in Y&&t(12,T=Y.isAutofillSelected),"isFocusedColumn"in Y&&t(13,$=Y.isFocusedColumn),"domCell"in Y&&t(0,S=Y.domCell),"showSlot"in Y&&t(14,I=Y.showSlot),"onSetFormView"in Y&&t(15,R=Y.onSetFormView),"isDynamicStructure"in Y&&t(25,N=Y.isDynamicStructure),"isAutoFillMarker"in Y&&t(16,M=Y.isAutoFillMarker),"isCurrentCell"in Y&&t(17,F=Y.isCurrentCell),"onDictionaryLookup"in Y&&t(18,D=Y.onDictionaryLookup),"onSetValue"in Y&&t(26,x=Y.onSetValue),"$$scope"in Y&&t(27,u=Y.$$scope)},o.$$.update=()=>{o.$$.dirty[0]&12&&t(19,n=f.isStructured?_.get(m||{},f.uniquePath):(m||{})[f.uniqueName]),o.$$.dirty[0]&8388612&&t(22,r=B(g,f)),o.$$.dirty[0]&524288&&t(21,a=_.isPlainObject(n)&&!((n==null?void 0:n.type)=="Buffer"&&_.isArray(n.data))&&!n.$oid),o.$$.dirty[0]&524288&&t(20,s=lib.isJsonLikeLongString(n)?lib.safeJsonParse(n):null)},[S,d,f,m,h,p,v,y,C,E,A,k,T,$,I,R,M,F,D,n,s,a,r,g,b,N,x,u,l,K,U,G,W,q,H,z]}class DataGridCell extends SvelteComponent{constructor(e){super(),init(this,e,instance$3k,create_fragment$3l,safe_not_equal,{rowIndex:1,col:2,rowData:3,colIndex:4,allowHintField:5,maxWidth:23,minWidth:24,isSelected:6,isFrameSelected:7,isModifiedRow:8,isModifiedCell:9,isInserted:10,isDeleted:11,isAutofillSelected:12,isFocusedColumn:13,domCell:0,showSlot:14,onSetFormView:15,isDynamicStructure:25,isAutoFillMarker:16,isCurrentCell:17,onDictionaryLookup:18,onSetValue:26},null,[-1,-1])}}const DataGridCell$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataGridCell},Symbol.toStringTag,{value:"Module"}));class SeriesSizeItem{constructor(){this.scrollIndex=-1,this.frozenIndex=-1}get endPosition(){return this.position+this.size}}class SeriesSizes{constructor(){this.sizeOverridesByModelIndex={},this.count=0,this.defaultSize=50,this.maxSize=1e3,this.hiddenAndFrozenModelIndexes=[],this.frozenModelIndexes=[],this.hiddenModelIndexes=[],this.scrollItems=[],this.positions=[],this.scrollIndexes=[],this.modelIndexes=[],this.frozenItems=[]}get scrollCount(){return this.count-(this.hiddenAndFrozenModelIndexes!=null?this.hiddenAndFrozenModelIndexes.length:0)}get frozenCount(){return this.frozenModelIndexes!=null?this.frozenModelIndexes.length:0}get frozenSize(){return _.sumBy(this.frozenItems,e=>e.size)}get realCount(){return this.frozenCount+this.scrollCount}putSizeOverride(e,t,n=!1){this.maxSize&&t>this.maxSize&&!n&&(t=this.maxSize);let r=this.sizeOverridesByModelIndex[e];(n||!r||t>r)&&(this.sizeOverridesByModelIndex[e]=t)}buildIndex(){this.scrollItems=[],this.scrollIndexes=_.filter(_.map(_.range(this.count),r=>this.modelToReal(r)-this.frozenCount),r=>r>=0),this.scrollIndexes.sort((r,a)=>r-a);let e=-1,t=0;this.scrollIndexes.forEach(r=>{let a=this.realToModel(r+this.frozenCount),s=this.sizeOverridesByModelIndex[a],l=new SeriesSizeItem;l.scrollIndex=r,l.modelIndex=a,l.size=s,l.position=t+(r-e-1)*this.defaultSize,this.scrollItems.push(l),e=r,t=l.endPosition}),this.positions=_.map(this.scrollItems,r=>r.position),this.frozenItems=[];let n=0;for(let r=0;r<this.frozenCount;r++){let a=this.frozenModelIndexes[r],s=this.getSizeByModelIndex(a),l=new SeriesSizeItem;l.frozenIndex=r,l.modelIndex=a,l.size=s,l.position=n,this.frozenItems.push(l),n+=s}this.modelIndexes=_.range(0,this.count),this.hiddenAndFrozenModelIndexes&&(this.modelIndexes=this.modelIndexes.filter(r=>!this.hiddenAndFrozenModelIndexes.includes(r)))}getScrollIndexOnPosition(e){let t=_.sortedIndex(this.positions,e);return this.positions[t]==e?t:t==0?Math.floor(e/this.defaultSize):e<=this.scrollItems[t-1].endPosition?this.scrollItems[t-1].scrollIndex:Math.floor((e-this.scrollItems[t-1].position)/this.defaultSize)+this.scrollItems[t-1].scrollIndex}getFrozenIndexOnPosition(e){return this.frozenItems.forEach(function(t){if(e>=t.position&&e<=t.endPosition)return t.frozenIndex}),-1}getSizeByModelIndex(e){return _.has(this.sizeOverridesByModelIndex,e)?this.sizeOverridesByModelIndex[e]:this.defaultSize}getSizeByScrollIndex(e){return this.getSizeByRealIndex(e+this.frozenCount)}getSizeByRealIndex(e){let t=this.realToModel(e);return this.getSizeByModelIndex(t)}removeSizeOverride(e){let t=this.realToModel(e);delete this.sizeOverridesByModelIndex[t]}getScroll(e,t){return e<t?-_.sum(_.map(_.range(e,t-e),n=>this.getSizeByScrollIndex(n))):_.sum(_.map(_.range(t,e-t),n=>this.getSizeByScrollIndex(n)))}modelIndexIsInScrollArea(e){return this.modelToReal(e)>=this.frozenCount}getTotalScrollSizeSum(){let e=_.map(_.filter(this.intKeys(this.sizeOverridesByModelIndex),t=>this.modelIndexIsInScrollArea(t)),t=>this.sizeOverridesByModelIndex[t]);return _.sum(e)+(this.count-e.length)*this.defaultSize}getVisibleScrollSizeSum(){let e=_.map(_.filter(this.intKeys(this.sizeOverridesByModelIndex),t=>!_.includes(this.hiddenAndFrozenModelIndexes,t)),t=>this.sizeOverridesByModelIndex[t]);return _.sum(e)+(this.count-this.hiddenModelIndexes.length-e.length)*this.defaultSize}intKeys(e){return _.keys(e).map(t=>_.parseInt(t))}getPositionByRealIndex(e){return e<0?0:e<this.frozenCount?this.frozenItems[e].position:this.getPositionByScrollIndex(e-this.frozenCount)}getPositionByScrollIndex(e){let t=_.sortedIndex(this.scrollIndexes,e);return this.scrollIndexes[t]==e?this.scrollItems[t].position:(t--,t<0?e*this.defaultSize:this.scrollItems[t].endPosition+(e-this.scrollItems[t].scrollIndex-1)*this.defaultSize)}getVisibleScrollCount(e,t){let n=0,r=e,a=0;for(;n<t&&r<=this.scrollCount;)n+=this.getSizeByScrollIndex(r),r++,a++;return a}getVisibleScrollCountReversed(e,t){let n=0,r=e,a=0;for(;n<t&&r>=0;)n+=this.getSizeByScrollIndex(r),r--,a++;return a}invalidateAfterScroll(e,t,n,r){if(t>e){let a=this.getVisibleScrollCount(e,r),s=this.getVisibleScrollCount(t,r);for(let l=e+a-1;l<=t+s;l++)n(l+this.frozenCount)}else for(let a=t;a<=e;a++)n(a+this.frozenCount)}isWholeInView(e,t,n){let r=0,a=e;for(;r<n&&a<this.count;){if(r+=this.getSizeByScrollIndex(a),a==t)return r<=n;a++}return!1}scrollInView(e,t,n){if(this.isWholeInView(e,t,n))return e;if(t<e)return t;let r=e+1;for(;r<this.scrollCount;){if(this.isWholeInView(r,t,n))return r;r++}return this.scrollCount-1}resize(e,t){if(e<0)return;let n=this.realToModel(e);n<0||(this.sizeOverridesByModelIndex[n]=t,this.buildIndex())}setExtraordinaryIndexes(e,t){e=e.filter(n=>n>=0),t=t.filter(n=>n>=0),e.sort((n,r)=>n-r),t.sort((n,r)=>n-r),this.frozenModelIndexes=_.filter(t,n=>!_.includes(e,n)),this.hiddenModelIndexes=_.filter(e,n=>!_.includes(t,n)),this.hiddenAndFrozenModelIndexes=_.concat(e,this.frozenModelIndexes),this.frozenModelIndexes.sort((n,r)=>n-r),this.hiddenAndFrozenModelIndexes.length==0&&(this.hiddenAndFrozenModelIndexes=null),this.frozenModelIndexes.length==0&&(this.frozenModelIndexes=null),this.buildIndex()}realToModel(e){return this.modelIndexes[e]??-1}modelToReal(e){return this.modelIndexes.indexOf(e)}getFrozenPosition(e){return this.frozenItems[e].position}hasSizeOverride(e){return _.has(this.sizeOverridesByModelIndex,e)}isVisible(e,t,n){if(e<0)return!1;if(e>=0&&e<this.frozenCount)return!0;let a=e-this.frozenCount-t;return a>=0&&a<this.getVisibleScrollCount(t,n)}}function countColumnSizes(o,e,t,n){const r=new SeriesSizes;if(!o||!e||!n)return r;let s=document.createElement("canvas").getContext("2d");r.maxSize=t*2/3,r.count=e.length,r.setExtraordinaryIndexes(n.hiddenColumnIndexes,[]);for(let l=0;l<e.length;l++){const u=e[l];if(n.config.columnWidths[u.uniqueName]){r.putSizeOverride(l,n.config.columnWidths[u.uniqueName]);continue}s.font="bold 14px Helvetica";const d=u.headerText,f=s.measureText(d).width+64;r.putSizeOverride(l,f)}s.font="14px Helvetica";for(let l=0;l<Math.min(o.rowCount,20);l+=1){const u=o.getRowData(l);if(u)for(let d=0;d<e.length;d++){const f=e[d].uniqueName;if(n.config.columnWidths[f])continue;const m=u[f];let h=m;_.isArray(m)?h=`[${m.length} items]`:m!=null&&m.$oid?h=`ObjectId("${m.$oid}")`:lib.isJsonLikeLongString(m)&&lib.safeJsonParse(m)&&(h="(JSON)");const p=s.measureText(h).width+8;r.putSizeOverride(d,p)}}return r.buildIndex(),r}function countVisibleRealColumns(o,e,t,n){const r=o.getVisibleScrollCount(e,t),a=[],s=[];for(let l=0;l<o.frozenCount;l++)a.push(l);for(let l=e;l<e+r;l++)a.push(l+o.frozenCount);for(let l of a){let u=o.realToModel(l),d=n[u];if(!d)continue;const f=o.getSizeByRealIndex(l);s.push({...d,colIndex:l,width:f})}return s}function filterCellForRow(o,e){return o&&(o[0]==e||_.isString(o[0]))?o:null}function filterCellsForRow(o,e){const t=(o||[]).filter(n=>n[0]==e||_.isString(n[0]));return t.length>0?t:null}function cellIsSelected(o,e,t){if(!t)return!1;for(const[n,r]of t)if(o==n&&e==r||n=="header"&&e==r||o==n&&r=="header"||n=="header"&&r=="header")return!0;return!1}const EditCellDataModal_svelte_svelte_type_style_lang="";function create_default_slot_1$J(o){let e,t,n,r;function a(l){o[10](l)}let s={onKeyDown:o[4],mode:o[2]};return o[3]!==void 0&&(s.value=o[3]),t=new AceEditor({props:s}),binding_callbacks.push(()=>bind(t,"value",a)),o[11](t),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","editor svelte-1vqhgea")},m(l,u){insert(l,e,u),mount_component(t,e,null),r=!0},p(l,u){const d={};u&4&&(d.mode=l[2]),!n&&u&8&&(n=!0,d.value=l[3],add_flush_callback(()=>n=!1)),t.$set(d)},i(l){r||(transition_in(t.$$.fragment,l),r=!0)},o(l){transition_out(t.$$.fragment,l),r=!1},d(l){l&&detach(e),o[11](null),destroy_component(t)}}}function create_header_slot$l(o){let e;return{c(){e=element("div"),e.textContent="Edit cell value",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$k(o){let e,t,n,r,a,s,l,u,d,f,m;return n=new FormStyledButton({props:{value:"OK",title:"Ctrl+Enter"}}),n.$on("click",o[8]),a=new FormStyledButton({props:{type:"button",value:"Cancel"}}),a.$on("click",closeCurrentModal),u=new FormStyledButton({props:{type:"button",value:"Format JSON"}}),u.$on("click",o[5]),f=new SelectField({props:{isNative:!0,value:o[2],options:[{value:"text",label:"None (raw text)"},{value:"json",label:"JSON"},{value:"html",label:"HTML"},{value:"xml",label:"XML"}]}}),f.$on("change",o[9]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),l=element("div"),create_component(u.$$.fragment),d=text(`

        Code highlighting:
        `),create_component(f.$$.fragment),attr(e,"slot","footer"),attr(e,"class","footer svelte-1vqhgea")},m(h,p){insert(h,e,p),append(e,t),mount_component(n,t,null),append(t,r),mount_component(a,t,null),append(e,s),append(e,l),mount_component(u,l,null),append(l,d),mount_component(f,l,null),m=!0},p(h,p){const g={};p&4&&(g.value=h[2]),f.$set(g)},i(h){m||(transition_in(n.$$.fragment,h),transition_in(a.$$.fragment,h),transition_in(u.$$.fragment,h),transition_in(f.$$.fragment,h),m=!0)},o(h){transition_out(n.$$.fragment,h),transition_out(a.$$.fragment,h),transition_out(u.$$.fragment,h),transition_out(f.$$.fragment,h),m=!1},d(h){h&&detach(e),destroy_component(n),destroy_component(a),destroy_component(u),destroy_component(f)}}}function create_default_slot$1k(o){let e,t;const n=[o[6]];let r={$$slots:{footer:[create_footer_slot$k],header:[create_header_slot$l],default:[create_default_slot_1$J]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&64?get_spread_update(n,[get_spread_object(a[6])]):{};s&4111&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3k(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1k]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4175&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function shouldOpenMultilineDialog(o){if(_.isString(o)){if(o.includes(`
`))return!0;const e=lib.safeJsonParse(o);if(e&&(_.isPlainObject(e)||_.isArray(e)))return!0}return!1}function instance$3j(o,e,t){const n=["onSave","value"];let r=compute_rest_props(e,n),{onSave:a}=e,{value:s}=e,l,u="text",d=(s==null?void 0:s.toString())||"";onMount(()=>{l.getEditor().focus(),lib.safeJsonParse(d)&&t(2,u="json"),d.match(/<\/[a-zA-z0-9-]+\s*>/)&&(d.match(/<\/(div|span|h[0-6]|p|input|a)\s*>/)?t(2,u="html"):t(2,u="xml"))});function f(v){v.keyCode==keycodes.enter&&v.ctrlKey&&(a(d),closeCurrentModal())}function m(){const v=lib.safeJsonParse(d);v?t(3,d=JSON.stringify(v,null,2)):showModal(ErrorMessageModal,{message:"Not valid JSON"})}const h=()=>{a(d),closeCurrentModal()},p=v=>t(2,u=v.detail);function g(v){d=v,t(3,d)}function b(v){binding_callbacks[v?"unshift":"push"](()=>{l=v,t(1,l)})}return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(6,r=compute_rest_props(e,n)),"onSave"in v&&t(0,a=v.onSave),"value"in v&&t(7,s=v.value)},[a,l,u,d,f,m,r,s,h,p,g,b]}class EditCellDataModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$3j,create_fragment$3k,safe_not_equal,{onSave:0,value:7})}}const EditCellDataModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:EditCellDataModal,shouldOpenMultilineDialog},Symbol.toStringTag,{value:"Module"})),InplaceEditor_svelte_svelte_type_style_lang="";function create_if_block$1s(o){let e,t;return e=new ShowFormButton({props:{icon:"icon edit"}}),e.$on("click",o[15]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3j(o){let e,t,n,r,a,s,l,u=o[4]&&create_if_block$1s(o);return{c(){e=element("input"),n=space(),u&&u.c(),r=empty(),attr(e,"type","text"),attr(e,"style",t=o[7]?`width:${o[6]}px;min-width:${o[6]}px;max-width:${o[6]}px`:void 0),attr(e,"class","svelte-ogsfvv"),toggle_class(e,"fillParent",o[3]),toggle_class(e,"showEditorButton",o[4])},m(d,f){insert(d,e,f),o[14](e),insert(d,n,f),u&&u.m(d,f),insert(d,r,f),a=!0,s||(l=[listen(e,"change",o[13]),listen(e,"keydown",o[9]),listen(e,"blur",o[10])],s=!0)},p(d,[f]){(!a||f&64&&t!==(t=d[7]?`width:${d[6]}px;min-width:${d[6]}px;max-width:${d[6]}px`:void 0))&&attr(e,"style",t),(!a||f&8)&&toggle_class(e,"fillParent",d[3]),(!a||f&16)&&toggle_class(e,"showEditorButton",d[4]),d[4]?u?(u.p(d,f),f&16&&transition_in(u,1)):(u=create_if_block$1s(d),u.c(),transition_in(u,1),u.m(r.parentNode,r)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros())},i(d){a||(transition_in(u),a=!0)},o(d){transition_out(u),a=!1},d(d){d&&(detach(e),detach(n),detach(r)),o[14](null),u&&u.d(d),s=!1,run_all(l)}}}function instance$3i(o,e,t){let n,{inplaceEditorState:r}=e,{dispatchInsplaceEditor:a}=e,{onSetValue:s}=e,{width:l}=e,{cellValue:u}=e,{fillParent:d=!1}=e,f,m=!0;const h=l,p=createRef(!!r.text);function g(E){switch(t(4,m=!1),E.keyCode){case keycodes.escape:p.set(!1),a({type:"close"});break;case keycodes.enter:p.get()&&(s(lib.parseCellValue(f.value)),p.set(!1)),f.blur(),E.preventDefault(),a({type:"close",mode:"enter"});break;case keycodes.tab:p.get()&&(s(lib.parseCellValue(f.value)),p.set(!1)),f.blur(),E.preventDefault(),a({type:"close",mode:E.shiftKey?"shiftTab":"tab"});break;case keycodes.s:isCtrlOrCommandKey(E)&&(p.get()&&(s(lib.parseCellValue(f.value)),p.set(!1)),E.preventDefault(),a({type:"close",mode:"save"}));break}}function b(){p.get()&&(s(lib.parseCellValue(f.value)),p.set(!1)),a({type:"close"})}onMount(()=>{t(5,f.value=r.text||lib.stringifyCellValue(u),f),f.focus(),r.selectAll&&f.select()});const v=()=>{p.set(!0),t(4,m=!1)};function y(E){binding_callbacks[E?"unshift":"push"](()=>{f=E,t(5,f)})}const C=()=>{p.set(!1),a({type:"close"}),showModal(EditCellDataModal,{value:lib.stringifyCellValue(u),onSave:s})};return o.$$set=E=>{"inplaceEditorState"in E&&t(11,r=E.inplaceEditorState),"dispatchInsplaceEditor"in E&&t(0,a=E.dispatchInsplaceEditor),"onSetValue"in E&&t(1,s=E.onSetValue),"width"in E&&t(12,l=E.width),"cellValue"in E&&t(2,u=E.cellValue),"fillParent"in E&&t(3,d=E.fillParent)},o.$$.update=()=>{o.$$.dirty&16&&t(6,n=h?h-(m?16:0):void 0)},[a,s,u,d,m,f,n,h,p,g,b,r,l,v,y,C]}class InplaceEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$3i,create_fragment$3j,safe_not_equal,{inplaceEditorState:11,dispatchInsplaceEditor:0,onSetValue:1,width:12,cellValue:2,fillParent:3})}}const InplaceEditor$1=Object.freeze(Object.defineProperty({__proto__:null,default:InplaceEditor},Symbol.toStringTag,{value:"Module"})),RowHeaderCell_svelte_svelte_type_style_lang="";function create_if_block$1r(o){let e,t;return e=new ShowFormButton({}),e.$on("click",function(){is_function(o[1])&&o[1].apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){o=n},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3i(o){let e,t=o[0]+1+"",n,r,a,s,l,u=o[2]&&o[1]&&create_if_block$1r(o);return{c(){e=element("td"),n=text(t),r=space(),u&&u.c(),attr(e,"data-row",o[0]),attr(e,"data-col","header"),attr(e,"class","svelte-xbqy26")},m(d,f){insert(d,e,f),append(e,n),append(e,r),u&&u.m(e,null),a=!0,s||(l=[listen(e,"mouseenter",o[3]),listen(e,"mouseleave",o[4])],s=!0)},p(d,[f]){(!a||f&1)&&t!==(t=d[0]+1+"")&&set_data(n,t),d[2]&&d[1]?u?(u.p(d,f),f&6&&transition_in(u,1)):(u=create_if_block$1r(d),u.c(),transition_in(u,1),u.m(e,null)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),(!a||f&1)&&attr(e,"data-row",d[0])},i(d){a||(transition_in(u),a=!0)},o(d){transition_out(u),a=!1},d(d){d&&detach(e),u&&u.d(),s=!1,run_all(l)}}}function instance$3h(o,e,t){let{rowIndex:n}=e,{onShowForm:r}=e,a=!1;const s=()=>t(2,a=!0),l=()=>t(2,a=!1);return o.$$set=u=>{"rowIndex"in u&&t(0,n=u.rowIndex),"onShowForm"in u&&t(1,r=u.onShowForm)},[n,r,a,s,l]}class RowHeaderCell extends SvelteComponent{constructor(e){super(),init(this,e,instance$3h,create_fragment$3i,safe_not_equal,{rowIndex:0,onShowForm:1})}}const RowHeaderCell$1=Object.freeze(Object.defineProperty({__proto__:null,default:RowHeaderCell},Symbol.toStringTag,{value:"Module"})),DataGridRow_svelte_svelte_type_style_lang="";function get_each_context$w(o,e,t){const n=o.slice();return n[25]=e[t],n}function create_else_block$E(o){var a,s;let e,t;function n(){return o[23](o[25])}function r(...l){return o[24](o[25],...l)}return e=new DataGridCell({props:{rowIndex:o[1],rowData:o[18],col:o[25],conid:o[14],database:o[15],allowHintField:(a=o[17])==null?void 0:a.includes(o[25].uniqueName),isSelected:o[4]?!1:cellIsSelected(o[1],o[25].colIndex,o[5]),isCurrentCell:o[25].colIndex==o[13],isFrameSelected:o[4]?cellIsSelected(o[1],o[25].colIndex,o[5]):!1,isAutofillSelected:cellIsSelected(o[1],o[25].colIndex,o[6]),isFocusedColumn:(s=o[8])==null?void 0:s.includes(o[25].uniqueName),isModifiedCell:o[16].modifiedFields&&o[16].modifiedFields.has(o[25].uniqueName),isModifiedRow:o[16].status=="updated",isInserted:o[16].status=="inserted"||o[16].insertedFields&&o[16].insertedFields.has(o[25].uniqueName),isDeleted:o[16].status=="deleted"||o[16].deletedFields&&o[16].deletedFields.has(o[25].uniqueName),onSetFormView:o[11],isDynamicStructure:o[12],isAutoFillMarker:o[7]&&o[7][1]==o[25].colIndex&&o[7][0]==o[1]&&o[3].editable,onDictionaryLookup:n,onSetValue:r}}),{c(){create_component(e.$$.fragment)},m(l,u){mount_component(e,l,u),t=!0},p(l,u){var f,m;o=l;const d={};u&2&&(d.rowIndex=o[1]),u&262144&&(d.rowData=o[18]),u&4&&(d.col=o[25]),u&16384&&(d.conid=o[14]),u&32768&&(d.database=o[15]),u&131076&&(d.allowHintField=(f=o[17])==null?void 0:f.includes(o[25].uniqueName)),u&54&&(d.isSelected=o[4]?!1:cellIsSelected(o[1],o[25].colIndex,o[5])),u&8196&&(d.isCurrentCell=o[25].colIndex==o[13]),u&54&&(d.isFrameSelected=o[4]?cellIsSelected(o[1],o[25].colIndex,o[5]):!1),u&70&&(d.isAutofillSelected=cellIsSelected(o[1],o[25].colIndex,o[6])),u&260&&(d.isFocusedColumn=(m=o[8])==null?void 0:m.includes(o[25].uniqueName)),u&65540&&(d.isModifiedCell=o[16].modifiedFields&&o[16].modifiedFields.has(o[25].uniqueName)),u&65536&&(d.isModifiedRow=o[16].status=="updated"),u&65540&&(d.isInserted=o[16].status=="inserted"||o[16].insertedFields&&o[16].insertedFields.has(o[25].uniqueName)),u&65540&&(d.isDeleted=o[16].status=="deleted"||o[16].deletedFields&&o[16].deletedFields.has(o[25].uniqueName)),u&2048&&(d.onSetFormView=o[11]),u&4096&&(d.isDynamicStructure=o[12]),u&142&&(d.isAutoFillMarker=o[7]&&o[7][1]==o[25].colIndex&&o[7][0]==o[1]&&o[3].editable),u&4&&(d.onDictionaryLookup=n),u&14&&(d.onSetValue=r),e.$set(d)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}function create_if_block$1q(o){let e,t,n,r;function a(...s){return o[22](o[25],...s)}return t=new InplaceEditor({props:{width:o[25].width,inplaceEditorState:o[9],dispatchInsplaceEditor:o[10],cellValue:o[18][o[25].uniqueName],onSetValue:a}}),{c(){e=element("td"),create_component(t.$$.fragment),n=space(),attr(e,"class","editor svelte-10zssvq")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),r=!0},p(s,l){o=s;const u={};l&4&&(u.width=o[25].width),l&512&&(u.inplaceEditorState=o[9]),l&1024&&(u.dispatchInsplaceEditor=o[10]),l&262148&&(u.cellValue=o[18][o[25].uniqueName]),l&14&&(u.onSetValue=a),t.$set(u)},i(s){r||(transition_in(t.$$.fragment,s),r=!0)},o(s){transition_out(t.$$.fragment,s),r=!1},d(s){s&&detach(e),destroy_component(t)}}}function create_each_block$w(o,e){let t,n,r,a,s;const l=[create_if_block$1q,create_else_block$E],u=[];function d(f,m){return f[9].cell&&f[1]==f[9].cell[0]&&f[25].colIndex==f[9].cell[1]?0:1}return n=d(e),r=u[n]=l[n](e),{key:o,first:null,c(){t=empty(),r.c(),a=empty(),this.first=t},m(f,m){insert(f,t,m),u[n].m(f,m),insert(f,a,m),s=!0},p(f,m){e=f;let h=n;n=d(e),n===h?u[n].p(e,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),r=u[n],r?r.p(e,m):(r=u[n]=l[n](e),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(f){s||(transition_in(r),s=!0)},o(f){transition_out(r),s=!1},d(f){f&&(detach(t),detach(a)),u[n].d(f)}}}function create_fragment$3h(o){let e,t,n,r=[],a=new Map,s,l;t=new RowHeaderCell({props:{rowIndex:o[1],onShowForm:o[11]?o[21]:null}});let u=ensure_array_like(o[2]);const d=f=>f[25].uniqueName;for(let f=0;f<u.length;f+=1){let m=get_each_context$w(o,u,f),h=d(m);a.set(h,r[f]=create_each_block$w(h,m))}return{c(){e=element("tr"),create_component(t.$$.fragment),n=space();for(let f=0;f<r.length;f+=1)r[f].c();attr(e,"style",s=`height: ${o[0]}px`),attr(e,"class","svelte-10zssvq")},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n);for(let h=0;h<r.length;h+=1)r[h]&&r[h].m(e,null);l=!0},p(f,[m]){const h={};m&2&&(h.rowIndex=f[1]),m&264192&&(h.onShowForm=f[11]?f[21]:null),t.$set(h),m&1048574&&(u=ensure_array_like(f[2]),group_outros(),r=update_keyed_each(r,m,d,1,f,u,a,e,outro_and_destroy_block,create_each_block$w,null,get_each_context$w),check_outros()),(!l||m&1&&s!==(s=`height: ${f[0]}px`))&&attr(e,"style",s)},i(f){if(!l){transition_in(t.$$.fragment,f);for(let m=0;m<u.length;m+=1)transition_in(r[m]);l=!0}},o(f){transition_out(t.$$.fragment,f);for(let m=0;m<r.length;m+=1)transition_out(r[m]);l=!1},d(f){f&&detach(e),destroy_component(t);for(let m=0;m<r.length;m+=1)r[m].d()}}}function instance$3g(o,e,t){let n,r,a,{rowHeight:s}=e,{rowIndex:l}=e,{visibleRealColumns:u}=e,{grider:d}=e,{frameSelection:f=void 0}=e,{selectedCells:m=void 0}=e,{autofillSelectedCells:h=void 0}=e,{autofillMarkerCell:p=void 0}=e,{focusedColumns:g=void 0}=e,{inplaceEditorState:b}=e,{dispatchInsplaceEditor:v}=e,{onSetFormView:y}=e,{isDynamicStructure:C=!1}=e,{currentCellColumn:E}=e,{conid:A}=e,{database:k}=e,{driver:T}=e;function $(M){showModal(DictionaryLookupModal,{conid:A,database:k,driver:T,pureName:M.foreignKey.refTableName,schemaName:M.foreignKey.refSchemaName,onConfirm:F=>d.setCellValue(l,M.uniqueName,F)})}const S=()=>y(n,null),I=(M,F)=>d.setCellValue(l,M.uniqueName,F),R=M=>$(M),N=(M,F)=>d.setCellValue(l,M.uniqueName,F);return o.$$set=M=>{"rowHeight"in M&&t(0,s=M.rowHeight),"rowIndex"in M&&t(1,l=M.rowIndex),"visibleRealColumns"in M&&t(2,u=M.visibleRealColumns),"grider"in M&&t(3,d=M.grider),"frameSelection"in M&&t(4,f=M.frameSelection),"selectedCells"in M&&t(5,m=M.selectedCells),"autofillSelectedCells"in M&&t(6,h=M.autofillSelectedCells),"autofillMarkerCell"in M&&t(7,p=M.autofillMarkerCell),"focusedColumns"in M&&t(8,g=M.focusedColumns),"inplaceEditorState"in M&&t(9,b=M.inplaceEditorState),"dispatchInsplaceEditor"in M&&t(10,v=M.dispatchInsplaceEditor),"onSetFormView"in M&&t(11,y=M.onSetFormView),"isDynamicStructure"in M&&t(12,C=M.isDynamicStructure),"currentCellColumn"in M&&t(13,E=M.currentCellColumn),"conid"in M&&t(14,A=M.conid),"database"in M&&t(15,k=M.database),"driver"in M&&t(20,T=M.driver)},o.$$.update=()=>{o.$$.dirty&10&&t(18,n=d.getRowData(l)),o.$$.dirty&10&&t(16,r=d.getRowStatus(l)),o.$$.dirty&65540&&t(17,a=u.filter(M=>!(!M.hintColumnNames||r.modifiedFields&&r.modifiedFields.has(M.uniqueName))).map(M=>M.uniqueName))},[s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,r,a,n,$,T,S,I,R,N]}class DataGridRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$3g,create_fragment$3h,safe_not_equal,{rowHeight:0,rowIndex:1,visibleRealColumns:2,grider:3,frameSelection:4,selectedCells:5,autofillSelectedCells:6,autofillMarkerCell:7,focusedColumns:8,inplaceEditorState:9,dispatchInsplaceEditor:10,onSetFormView:11,isDynamicStructure:12,currentCellColumn:13,conid:14,database:15,driver:20})}}const DataGridRow$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataGridRow},Symbol.toStringTag,{value:"Module"})),HorizontalScrollBar_svelte_svelte_type_style_lang="";function create_fragment$3g(o){let e,t,n,r,a,s,l;return{c(){e=element("div"),t=element("div"),n=text(""),attr(t,"style",r=`width: ${o[2]}px`),attr(e,"class","main svelte-146rrm"),add_render_callback(()=>o[8].call(e))},m(u,d){insert(u,e,d),append(e,t),append(t,n),a=add_iframe_resize_listener(e,o[8].bind(e)),o[9](e),s||(l=listen(e,"scroll",o[3]),s=!0)},p(u,[d]){d&4&&r!==(r=`width: ${u[2]}px`)&&attr(t,"style",r)},i:noop$1,o:noop$1,d(u){u&&detach(e),a(),o[9](null),s=!1,l()}}}function instance$3f(o,e,t){let n,{viewportRatio:r=.5}=e,{minimum:a}=e,{maximum:s}=e;const l=createEventDispatcher();let u,d;function f(){const b=d.scrollLeft/(n-u);if(b<0)return 0;const v=b*(s-a+1)+a;l("scroll",Math.floor(v+.3))}function m(g){const v=(g-a)/(s-a+1)*(n-u);d&&t(1,d.scrollLeft=Math.floor(v),d)}function h(){u=this.clientWidth,t(0,u)}function p(g){binding_callbacks[g?"unshift":"push"](()=>{d=g,t(1,d)})}return o.$$set=g=>{"viewportRatio"in g&&t(4,r=g.viewportRatio),"minimum"in g&&t(5,a=g.minimum),"maximum"in g&&t(6,s=g.maximum)},o.$$.update=()=>{o.$$.dirty&17&&t(2,n=Math.round(u/r))},[u,d,n,f,r,a,s,m,h,p]}class HorizontalScrollBar extends SvelteComponent{constructor(e){super(),init(this,e,instance$3f,create_fragment$3g,safe_not_equal,{viewportRatio:4,minimum:5,maximum:6,scroll:7})}get scroll(){return this.$$.ctx[7]}}const HorizontalScrollBar$1=Object.freeze(Object.defineProperty({__proto__:null,default:HorizontalScrollBar},Symbol.toStringTag,{value:"Module"})),topLeftCell=[0,0],undefinedCell=[void 0,void 0],nullCell=null,emptyCellArray=[];function isRegularCell(o){if(!o)return!1;const[e,t]=o;return _.isNumber(e)&&_.isNumber(t)}function normalizeHeaderForSelection(o){return o[0]=="filter"?["header",o[1]]:o}function getCellRange(o,e){const[t,n]=normalizeHeaderForSelection(o),[r,a]=normalizeHeaderForSelection(e);if(_.isNumber(t)&&_.isNumber(n)&&_.isNumber(r)&&_.isNumber(a)){const s=Math.min(t,r),l=Math.max(t,r),u=Math.min(n,a),d=Math.max(n,a),f=[];for(let m=s;m<=l;m++)for(let h=u;h<=d;h++)f.push([m,h]);return f}if(t=="header"&&r=="header"&&_.isNumber(n)&&_.isNumber(a)){const s=Math.min(n,a),l=Math.max(n,a),u=[];for(let d=s;d<=l;d++)u.push(["header",d]);return u}if(n=="header"&&a=="header"&&_.isNumber(t)&&_.isNumber(r)){const s=Math.min(t,r),l=Math.max(t,r),u=[];for(let d=s;d<=l;d++)u.push([d,"header"]);return u}return n=="header"&&a=="header"&&t=="header"&&r=="header"?[["header","header"]]:[]}function convertCellAddress(o,e){const t=parseInt(o),n=parseInt(e);return[_.isNaN(t)?o:t,_.isNaN(n)?e:n]}function cellFromEvent(o){const e=o.target.closest("td");if(!e)return undefinedCell;const t=e.getAttribute("data-col"),n=e.getAttribute("data-row");return convertCellAddress(n,t)}const VerticalScrollBar_svelte_svelte_type_style_lang="";function create_fragment$3f(o){let e,t,n,r,a,s,l;return{c(){e=element("div"),t=element("div"),n=text(""),attr(t,"style",r=`height: ${o[2]}px`),attr(e,"class","main svelte-17x38nz"),add_render_callback(()=>o[8].call(e))},m(u,d){insert(u,e,d),append(e,t),append(t,n),a=add_iframe_resize_listener(e,o[8].bind(e)),o[9](e),s||(l=listen(e,"scroll",o[3]),s=!0)},p(u,[d]){d&4&&r!==(r=`height: ${u[2]}px`)&&attr(t,"style",r)},i:noop$1,o:noop$1,d(u){u&&detach(e),a(),o[9](null),s=!1,l()}}}function instance$3e(o,e,t){let n,{viewportRatio:r=.5}=e,{minimum:a}=e,{maximum:s}=e;const l=createEventDispatcher();let u,d;function f(){const b=d.scrollTop/(n-u);if(b<0)return 0;let v=b*(s-a+1)+a;l("scroll",Math.floor(v+.3))}function m(g){const v=(g-a)/(s-a+1)*(n-u);d&&t(1,d.scrollTop=Math.floor(v),d)}function h(){u=this.clientHeight,t(0,u)}function p(g){binding_callbacks[g?"unshift":"push"](()=>{d=g,t(1,d)})}return o.$$set=g=>{"viewportRatio"in g&&t(4,r=g.viewportRatio),"minimum"in g&&t(5,a=g.minimum),"maximum"in g&&t(6,s=g.maximum)},o.$$.update=()=>{o.$$.dirty&17&&t(2,n=Math.round(u/r))},[u,d,n,f,r,a,s,m,h,p]}class VerticalScrollBar extends SvelteComponent{constructor(e){super(),init(this,e,instance$3e,create_fragment$3f,safe_not_equal,{viewportRatio:4,minimum:5,maximum:6,scroll:7})}get scroll(){return this.$$.ctx[7]}}const VerticalScrollBar$1=Object.freeze(Object.defineProperty({__proto__:null,default:VerticalScrollBar},Symbol.toStringTag,{value:"Module"}));function createReducer(o,e){const t=writable(e);function n(r){t.update(a=>o(a,r))}return[t,n]}function openReferenceForm(o,e,t,n){openNewTab({title:e.foreignKey.refTableName,icon:"img table",tabComponent:"TableDataTab",props:{schemaName:e.foreignKey.refSchemaName,pureName:e.foreignKey.refTableName,conid:t,database:n,objectTypeField:"tables"}},{grid:{isFormView:!0,filters:{[e.foreignKey.columns[0].refColumnName]:lib$1.getFilterValueExpression(o[e.foreignKey.columns[0].columnName],"string")}}},{forceNewTab:!0})}function openPrimaryKeyForm(o,e,t,n){const r=_.fromPairs(e.primaryKey.columns.map(({columnName:a})=>[a,o[a]]));openNewTab({title:e.pureName,icon:"img table",tabComponent:"TableDataTab",props:{schemaName:e.schemaName,pureName:e.pureName,conid:t,database:n,objectTypeField:"tables"}},{grid:{isFormView:!0,filters:{[e.primaryKey.columns[0].columnName]:lib$1.getFilterValueExpression(o[e.primaryKey.columns[0].columnName],"string")},formViewKey:r}},{forceNewTab:!0})}const DataGridRowHeightMeter_svelte_svelte_type_style_lang="";function create_default_slot$1j(o){let e,t;return e=new FontIcon({props:{icon:"icon chevron-down"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$3e(o){let e,t,n,r,a,s,l,u,d;return s=new InlineButton({props:{square:!0,$$slots:{default:[create_default_slot$1j]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=element("table"),n=element("tr"),r=element("td"),a=text(`title
        `),create_component(s.$$.fragment),attr(r,"class","svelte-pa7e1d"),attr(e,"class","svelte-pa7e1d")},m(f,m){insert(f,e,m),append(e,t),append(t,n),append(n,r),append(r,a),mount_component(s,r,null),l=!0,u||(d=[action_destroyer(resizeObserver.call(null,r,!0)),listen(r,"resize",o[1])],u=!0)},p(f,[m]){const h={};m&4&&(h.$$scope={dirty:m,ctx:f}),s.$set(h)},i(f){l||(transition_in(s.$$.fragment,f),l=!0)},o(f){transition_out(s.$$.fragment,f),l=!1},d(f){f&&detach(e),destroy_component(s),u=!1,run_all(d)}}}const dataGridRowHeight=writable(0);function instance$3d(o,e,t){let n,r=noop$1;component_subscribe(o,dataGridRowHeight,s=>t(0,n=s)),o.$$.on_destroy.push(()=>r());const a=s=>{set_store_value(dataGridRowHeight,n=s.detail.height+1,n)};return o.$$.update=()=>{o.$$.dirty&1&&console.log("dataGridRowHeight",n)},[n,a]}class DataGridRowHeightMeter extends SvelteComponent{constructor(e){super(),init(this,e,instance$3d,create_fragment$3e,safe_not_equal,{})}}const DataGridRowHeightMeter$1=Object.freeze(Object.defineProperty({__proto__:null,dataGridRowHeight,default:DataGridRowHeightMeter},Symbol.toStringTag,{value:"Module"})),EditJsonModal_svelte_svelte_type_style_lang="";function create_if_block$1p(o){let e;return{c(){e=element("div"),e.textContent=`Edit JSON object or array. You can paste JSON array or object directly into data grid, new row(s) will be added
        to recordset.`,attr(e,"class","m-2")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$I(o){let e,t,n,r,a,s=o[1]&&create_if_block$1p();function l(d){o[7](d)}let u={mode:"json"};return o[2]!==void 0&&(u.value=o[2]),n=new AceEditor({props:u}),binding_callbacks.push(()=>bind(n,"value",l)),o[8](n),{c(){s&&s.c(),e=space(),t=element("div"),create_component(n.$$.fragment),attr(t,"class","editor svelte-jgnle7")},m(d,f){s&&s.m(d,f),insert(d,e,f),insert(d,t,f),mount_component(n,t,null),a=!0},p(d,f){d[1]?s||(s=create_if_block$1p(),s.c(),s.m(e.parentNode,e)):s&&(s.d(1),s=null);const m={};!r&&f&4&&(r=!0,m.value=d[2],add_flush_callback(()=>r=!1)),n.$set(m)},i(d){a||(transition_in(n.$$.fragment,d),a=!0)},o(d){transition_out(n.$$.fragment,d),a=!1},d(d){d&&(detach(e),detach(t)),s&&s.d(d),o[8](null),destroy_component(n)}}}function create_header_slot$k(o){let e;return{c(){e=element("div"),e.textContent="Edit JSON value",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$j(o){let e,t,n,r,a;return t=new FormStyledButton({props:{value:"Save"}}),t.$on("click",o[6]),r=new FormStyledButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"slot","footer")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p:noop$1,i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_default_slot$1i(o){let e,t;const n=[o[4]];let r={$$slots:{footer:[create_footer_slot$j],header:[create_header_slot$k],default:[create_default_slot_1$I]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&527&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$3d(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1i]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&543&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$3c(o,e,t){const n=["onSave","json","showPasteInfo"];let r=compute_rest_props(e,n),{onSave:a}=e,{json:s}=e,{showPasteInfo:l}=e,u,d;onMount(()=>{s&&t(2,u=JSON.stringify(s,void 0,2)),d.getEditor().focus()});const f=()=>{try{const p=JSON.parse(u);a(p)&&closeCurrentModal()}catch(p){showModal(ErrorMessageModal,{message:p.message});return}};function m(p){u=p,t(2,u)}function h(p){binding_callbacks[p?"unshift":"push"](()=>{d=p,t(3,d)})}return o.$$set=p=>{e=assign(assign({},e),exclude_internal_props(p)),t(4,r=compute_rest_props(e,n)),"onSave"in p&&t(0,a=p.onSave),"json"in p&&t(5,s=p.json),"showPasteInfo"in p&&t(1,l=p.showPasteInfo)},[a,l,u,d,r,s,f,m,h]}class EditJsonModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$3c,create_fragment$3d,safe_not_equal,{onSave:0,json:5,showPasteInfo:1})}}const EditJsonModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:EditJsonModal},Symbol.toStringTag,{value:"Module"}));function create_fragment$3c(o){let e,t;return e=new JSONTree({props:{value:o[2],labelOverride:"("+(o[0]+1)+") ",isModified:o[1].status=="updated",isInserted:o[1].status=="inserted",isDeleted:o[1].status=="deleted"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4&&(a.value=n[2]),r&1&&(a.labelOverride="("+(n[0]+1)+") "),r&2&&(a.isModified=n[1].status=="updated"),r&2&&(a.isInserted=n[1].status=="inserted"),r&2&&(a.isDeleted=n[1].status=="deleted"),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function editJsonRowDocument(o,e){const t=o.getRowData(e);showModal(EditJsonModal,{json:t,onSave:n=>o.getRowStatus(e).status!="inserted"&&t._id&&stableStringify(n._id)!=stableStringify(t._id)?(showModal(ErrorMessageModal,{message:"_id attribute cannot be changed"}),!1):(o.setRowData(e,n),!0)})}function instance$3b(o,e,t){let n,r,{rowIndex:a}=e,{grider:s}=e;function l(){editJsonRowDocument(s,a)}function u(){const d=s.getRowData(a);copyTextToClipboard(JSON.stringify(d,void 0,2))}return registerMenu([{text:"Copy JSON document",onClick:u},{text:"Edit document",onClick:l},{text:"Delete document",onClick:()=>s.deleteRow(a)},{text:"Revert row changes",onClick:()=>s.revertRowChanges(a)}]),o.$$set=d=>{"rowIndex"in d&&t(0,a=d.rowIndex),"grider"in d&&t(3,s=d.grider)},o.$$.update=()=>{o.$$.dirty&9&&t(2,n=s.getRowData(a)),o.$$.dirty&9&&t(1,r=s.getRowStatus(a))},[a,r,n,s]}class CollectionJsonRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$3b,create_fragment$3c,safe_not_equal,{rowIndex:0,grider:3})}}const lastActiveDictionary={};function isParent(o,e){for(;e&&e.activator;){if(o==e)return!0;e=e.activator.parentActivatorInstance}return!1}function createActivator(o,e=!1,t=[]){const n=get_current_component(),r=getContext("tabVisible"),a=getContext("tabid"),s=getContext("parentActivatorInstance");setContext("parentActivatorInstance",n);let l;onMount(()=>{if(r){const f=r.subscribe(m=>{l=m,e&&l&&u()});return invalidateCommands(),()=>{f()}}});const u=()=>{const f=[];for(const m in lastActiveDictionary)isParent(lastActiveDictionary[m],n)||isParent(n,lastActiveDictionary[m])||t.includes(m)||f.push(m);for(const m of f)delete lastActiveDictionary[m];lastActiveDictionary[o]=n,s&&s.activator.activate()};return{activate:u,tabid:a,getTabVisible:()=>l,parentActivatorInstance:s}}function getActiveComponent(o){const e=lastActiveDictionary[o];return!e||!e.activator||!e.activator.getTabVisible||!e.activator.getTabVisible()?null:e}const CollapseButton_svelte_svelte_type_style_lang="";function create_fragment$3b(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:o[0]?"icon triple-right":"icon triple-left"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","collapseButtonMarker svelte-1uc1fyu")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",stop_propagation(o[1])),r=!0)},p(s,[l]){const u={};l&1&&(u.icon=s[0]?"icon triple-right":"icon triple-left"),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function instance$3a(o,e,t){let{collapsed:n}=e;function r(a){bubble.call(this,o,a)}return o.$$set=a=>{"collapsed"in a&&t(0,n=a.collapsed)},[n,r]}class CollapseButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$3a,create_fragment$3b,safe_not_equal,{collapsed:0})}}const CollapseButton$1=Object.freeze(Object.defineProperty({__proto__:null,default:CollapseButton},Symbol.toStringTag,{value:"Module"})),CheckableColumnList_svelte_svelte_type_style_lang="";function get_each_context$v(o,e,t){const n=o.slice();return n[8]=e[t],n}function create_each_block$v(o){let e,t,n,r,a,s=o[8]+"",l,u,d,f;function m(){return o[6](o[8])}function h(){return o[7](o[8])}return{c(){e=element("div"),t=element("input"),r=space(),a=element("span"),l=text(s),u=space(),attr(t,"type","checkbox"),t.disabled=o[2],t.checked=n=o[0].includes(o[8]),attr(a,"class","label svelte-1frbq1k")},m(p,g){insert(p,e,g),append(e,t),append(e,r),append(e,a),append(a,l),append(e,u),d||(f=[listen(t,"change",m),listen(a,"click",h)],d=!0)},p(p,g){o=p,g&4&&(t.disabled=o[2]),g&3&&n!==(n=o[0].includes(o[8]))&&(t.checked=n),g&2&&s!==(s=o[8]+"")&&set_data(l,s)},d(p){p&&detach(e),d=!1,run_all(f)}}}function create_fragment$3a(o){let e,t,n,r,a,s,l;t=new FormStyledButton({props:{value:"All",disabled:o[2]}}),t.$on("click",o[4]),r=new FormStyledButton({props:{value:"None",disabled:o[2]}}),r.$on("click",o[5]);let u=ensure_array_like(o[1]),d=[];for(let f=0;f<u.length;f+=1)d[f]=create_each_block$v(get_each_context$v(o,u,f));return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),s=element("div");for(let f=0;f<d.length;f+=1)d[f].c();attr(s,"class","list svelte-1frbq1k")},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),mount_component(r,e,null),insert(f,a,m),insert(f,s,m);for(let h=0;h<d.length;h+=1)d[h]&&d[h].m(s,null);l=!0},p(f,[m]){const h={};m&4&&(h.disabled=f[2]),t.$set(h);const p={};if(m&4&&(p.disabled=f[2]),r.$set(p),m&15){u=ensure_array_like(f[1]);let g;for(g=0;g<u.length;g+=1){const b=get_each_context$v(f,u,g);d[g]?d[g].p(b,m):(d[g]=create_each_block$v(b),d[g].c(),d[g].m(s,null))}for(;g<d.length;g+=1)d[g].d(1);d.length=u.length}},i(f){l||(transition_in(t.$$.fragment,f),transition_in(r.$$.fragment,f),l=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(r.$$.fragment,f),l=!1},d(f){f&&(detach(e),detach(a),detach(s)),destroy_component(t),destroy_component(r),destroy_each(d,f)}}}function instance$39(o,e,t){let{selectedColumns:n}=e,{allColumns:r}=e,{disabled:a=!1}=e;function s(m){n.includes(m)?t(0,n=n.filter(h=>h!=m)):t(0,n=[...n,m])}const l=()=>t(0,n=r),u=()=>t(0,n=[]),d=m=>s(m),f=m=>s(m);return o.$$set=m=>{"selectedColumns"in m&&t(0,n=m.selectedColumns),"allColumns"in m&&t(1,r=m.allColumns),"disabled"in m&&t(2,a=m.disabled)},[n,r,a,s,l,u,d,f]}class CheckableColumnList extends SvelteComponent{constructor(e){super(),init(this,e,instance$39,create_fragment$3a,safe_not_equal,{selectedColumns:0,allColumns:1,disabled:2})}}const GenerateSqlFromDataModal_svelte_svelte_type_style_lang="";function create_default_slot_1$H(o){var x;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$;function S(B){o[16](B)}function I(B){o[17](B)}let R={rows:o[7].map(func$e),focusOnCreate:!0,selectable:!0,columns:[{fieldName:"name",header:"Query type"}]};o[2]!==void 0&&(R.selectedIndex=o[2]),o[5]!==void 0&&(R.domTable=o[5]),a=new TableControl({props:R}),binding_callbacks.push(()=>bind(a,"selectedIndex",S)),binding_callbacks.push(()=>bind(a,"domTable",I));function N(B){o[18](B)}let M={allColumns:o[0],disabled:!o[8].includes(o[7][o[2]])};o[3]!==void 0&&(M.selectedColumns=o[3]),h=new CheckableColumnList({props:M}),binding_callbacks.push(()=>bind(h,"selectedColumns",N));function F(B){o[19](B)}let D={allColumns:o[0],disabled:!o[9].includes(o[7][o[2]])};return o[4]!==void 0&&(D.selectedColumns=o[4]),C=new CheckableColumnList({props:D}),binding_callbacks.push(()=>bind(C,"selectedColumns",F)),T=new SqlEditor({props:{readOnly:!0,value:o[6],engine:(x=o[1])==null?void 0:x.engine}}),{c(){e=element("div"),t=element("div"),n=element("div"),n.textContent="Choose query type",r=space(),create_component(a.$$.fragment),u=space(),d=element("div"),f=element("div"),f.textContent="Value columns",m=space(),create_component(h.$$.fragment),g=space(),b=element("div"),v=element("div"),v.textContent="WHERE columns",y=space(),create_component(C.$$.fragment),A=space(),k=element("div"),create_component(T.$$.fragment),attr(n,"class","m-1"),attr(t,"class","m-1 col-4"),attr(f,"class","m-1"),attr(d,"class","m-1 col-4"),attr(v,"class","m-1"),attr(b,"class","m-1 col-4"),attr(e,"class","flex mb-3"),attr(k,"class","sql svelte-115tce0")},m(B,K){insert(B,e,K),append(e,t),append(t,n),append(t,r),mount_component(a,t,null),append(e,u),append(e,d),append(d,f),append(d,m),mount_component(h,d,null),append(e,g),append(e,b),append(b,v),append(b,y),mount_component(C,b,null),insert(B,A,K),insert(B,k,K),mount_component(T,k,null),$=!0},p(B,K){var H;const U={};!s&&K&4&&(s=!0,U.selectedIndex=B[2],add_flush_callback(()=>s=!1)),!l&&K&32&&(l=!0,U.domTable=B[5],add_flush_callback(()=>l=!1)),a.$set(U);const G={};K&1&&(G.allColumns=B[0]),K&4&&(G.disabled=!B[8].includes(B[7][B[2]])),!p&&K&8&&(p=!0,G.selectedColumns=B[3],add_flush_callback(()=>p=!1)),h.$set(G);const W={};K&1&&(W.allColumns=B[0]),K&4&&(W.disabled=!B[9].includes(B[7][B[2]])),!E&&K&16&&(E=!0,W.selectedColumns=B[4],add_flush_callback(()=>E=!1)),C.$set(W);const q={};K&64&&(q.value=B[6]),K&2&&(q.engine=(H=B[1])==null?void 0:H.engine),T.$set(q)},i(B){$||(transition_in(a.$$.fragment,B),transition_in(h.$$.fragment,B),transition_in(C.$$.fragment,B),transition_in(T.$$.fragment,B),$=!0)},o(B){transition_out(a.$$.fragment,B),transition_out(h.$$.fragment,B),transition_out(C.$$.fragment,B),transition_out(T.$$.fragment,B),$=!1},d(B){B&&(detach(e),detach(A),detach(k)),destroy_component(a),destroy_component(h),destroy_component(C),destroy_component(T)}}}function create_header_slot$j(o){let e;return{c(){e=text("Generate SQL from data")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$i(o){let e,t,n,r;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[15]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$1h(o){let e,t;const n=[o[10]];let r={$$slots:{footer:[create_footer_slot$i],header:[create_header_slot$j],default:[create_default_slot_1$H]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&1024?get_spread_update(n,[get_spread_object(a[10])]):{};s&2097279&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$39(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$1h]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&2098303&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$e=o=>({name:o});function instance$38(o,e,t){let n;const r=["rows","allColumns","selectedColumns","keyColumns","tableInfo","engineDriver"];let a=compute_rest_props(e,r),{rows:s}=e,{allColumns:l=[]}=e,{selectedColumns:u=[]}=e,{keyColumns:d=[]}=e,{tableInfo:f}=e,{engineDriver:m}=e,h=0,p=null,g=u.filter(I=>l.includes(I)),b=d.filter(I=>l.includes(I));const v=["INSERT","UPDATE","DELETE"],y=["INSERT","UPDATE"],C=["UPDATE","DELETE"];function E(I,R,N,M){const F=v[M],D=m.createDumper();function x(B){D.putCollection(" ^and ",N,K=>B[K]==null?D.put("%i ^is ^null",K):D.put("%i=%v",K,B[K]))}switch(F){case"INSERT":for(const B of I)D.putCmd("^insert ^into %f (%,i) ^values (%,v)",f,R,R.map(K=>B[K]));break;case"UPDATE":for(const B of I)D.put("^update %f ^set",f),D.putCollection(", ",R,K=>D.put("%i=%v",K,B[K])),D.put(" ^where "),x(B),D.endCommand();break;case"DELETE":for(const B of I)D.put("^delete ^from %f ^where ",f),x(B),D.endCommand();break}return D.s}const A=()=>{newQuery({initialData:n}),closeCurrentModal()};function k(I){h=I,t(2,h)}function T(I){p=I,t(5,p)}function $(I){g=I,t(3,g)}function S(I){b=I,t(4,b)}return o.$$set=I=>{e=assign(assign({},e),exclude_internal_props(I)),t(10,a=compute_rest_props(e,r)),"rows"in I&&t(11,s=I.rows),"allColumns"in I&&t(0,l=I.allColumns),"selectedColumns"in I&&t(12,u=I.selectedColumns),"keyColumns"in I&&t(13,d=I.keyColumns),"tableInfo"in I&&t(14,f=I.tableInfo),"engineDriver"in I&&t(1,m=I.engineDriver)},o.$$.update=()=>{o.$$.dirty&2076&&t(6,n=E(s,g,b,h))},[l,m,h,g,b,p,n,v,y,C,a,s,u,d,f,A,k,T,$,S]}class GenerateSqlFromDataModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$38,create_fragment$39,safe_not_equal,{rows:11,allColumns:0,selectedColumns:12,keyColumns:13,tableInfo:14,engineDriver:1})}}const GenerateSqlFromDataModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:GenerateSqlFromDataModal},Symbol.toStringTag,{value:"Module"})),statusBarTabInfo=writable({});function updateStatuBarInfoItem(o,e,t){statusBarTabInfo.update(n=>{const r=n[o]||[];let a;return t==null?a=r.filter(s=>s.key!=e):r.find(s=>s.key==e)?a=r.map(s=>s.key==e?{...t,key:e}:s):a=[...r,{...t,key:e}],{...n,[o]:a}})}function instance$37(o,e,t){let{text:n}=e,{clickable:r=!1}=e,{icon:a=null}=e,{onClick:s=null}=e;const l=uuidv1(),u=getContext("tabid");return onMount(()=>{updateStatuBarInfoItem(u,l,{text:n,icon:a,clickable:r,onClick:s})}),onDestroy(()=>updateStatuBarInfoItem(u,l,null)),o.$$set=d=>{"text"in d&&t(0,n=d.text),"clickable"in d&&t(1,r=d.clickable),"icon"in d&&t(2,a=d.icon),"onClick"in d&&t(3,s=d.onClick)},o.$$.update=()=>{o.$$.dirty&15&&updateStatuBarInfoItem(u,l,{text:n,icon:a,clickable:r,onClick:s})},[n,r,a,s]}class StatusBarTabItem extends SvelteComponent{constructor(e){super(),init(this,e,instance$37,null,safe_not_equal,{text:0,clickable:1,icon:2,onClick:3})}}const StatusBarTabItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:StatusBarTabItem},Symbol.toStringTag,{value:"Module"})),leaflet$1="";var wellknown$1={exports:{}};wellknown$1.exports=parse$3;wellknown$1.exports.parse=parse$3;wellknown$1.exports.stringify=stringify;var numberRegexp=/[-+]?([0-9]*\.[0-9]+|[0-9]+)([eE][-+]?[0-9]+)?/,tuples=new RegExp("^"+numberRegexp.source+"(\\s"+numberRegexp.source+"){1,}");function parse$3(o){var e=o.split(";"),t=e.pop(),n=(e.shift()||"").split("=").pop(),r=0;function a(C){var E=t.substring(r).match(C);return E?(r+=E[0].length,E[0]):null}function s(C){return C&&n.match(/\d+/)&&(C.crs={type:"name",properties:{name:"urn:ogc:def:crs:EPSG::"+n}}),C}function l(){a(/^\s*/)}function u(){l();for(var C=0,E=[],A=[E],k=E,T;T=a(/^(\()/)||a(/^(\))/)||a(/^(,)/)||a(tuples);){if(T==="(")A.push(k),k=[],A[A.length-1].push(k),C++;else if(T===")"){if(k.length===0||(k=A.pop(),!k))return null;if(C--,C===0)break}else if(T===",")k=[],A[A.length-1].push(k);else if(!T.split(/\s/g).some(isNaN))Array.prototype.push.apply(k,T.split(/\s/g).map(parseFloat));else return null;l()}return C!==0?null:E}function d(){for(var C=[],E,A;A=a(tuples)||a(/^(,)/);)A===","?(C.push(E),E=[]):A.split(/\s/g).some(isNaN)||(E||(E=[]),Array.prototype.push.apply(E,A.split(/\s/g).map(parseFloat))),l();if(E)C.push(E);else return null;return C.length?C:null}function f(){if(!a(/^(point(\sz)?)/i)||(l(),!a(/^(\()/)))return null;var C=d();return!C||(l(),!a(/^(\))/))?null:{type:"Point",coordinates:C[0]}}function m(){if(!a(/^(multipoint)/i))return null;l();var C=t.substring(t.indexOf("(")+1,t.length-1).replace(/\(/g,"").replace(/\)/g,"");t="MULTIPOINT ("+C+")";var E=u();return E?(l(),{type:"MultiPoint",coordinates:E}):null}function h(){if(!a(/^(multilinestring)/i))return null;l();var C=u();return C?(l(),{type:"MultiLineString",coordinates:C}):null}function p(){if(!a(/^(linestring(\sz)?)/i)||(l(),!a(/^(\()/)))return null;var C=d();return!C||!a(/^(\))/)?null:{type:"LineString",coordinates:C}}function g(){if(!a(/^(polygon(\sz)?)/i))return null;l();var C=u();return C?{type:"Polygon",coordinates:C}:null}function b(){if(!a(/^(multipolygon)/i))return null;l();var C=u();return C?{type:"MultiPolygon",coordinates:C}:null}function v(){var C=[],E;if(!a(/^(geometrycollection)/i)||(l(),!a(/^(\()/)))return null;for(;E=y();)C.push(E),l(),a(/^(,)/),l();return a(/^(\))/)?{type:"GeometryCollection",geometries:C}:null}function y(){return f()||p()||g()||m()||h()||b()||v()}return s(y())}function stringify(o){o.type==="Feature"&&(o=o.geometry);function e(s){return s.join(" ")}function t(s){return s.map(e).join(", ")}function n(s){return s.map(t).map(a).join(", ")}function r(s){return s.map(n).map(a).join(", ")}function a(s){return"("+s+")"}switch(o.type){case"Point":return"POINT ("+e(o.coordinates)+")";case"LineString":return"LINESTRING ("+t(o.coordinates)+")";case"Polygon":return"POLYGON ("+n(o.coordinates)+")";case"MultiPoint":return"MULTIPOINT ("+t(o.coordinates)+")";case"MultiPolygon":return"MULTIPOLYGON ("+r(o.coordinates)+")";case"MultiLineString":return"MULTILINESTRING ("+n(o.coordinates)+")";case"GeometryCollection":return"GEOMETRYCOLLECTION ("+o.geometries.map(stringify).join(", ")+")";default:throw new Error("stringify requires a valid GeoJSON Feature or geometry object as input")}}var wellknownExports=wellknown$1.exports;const wellknown=getDefaultExportFromCjs(wellknownExports);var leafletSrc={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */(function(o,e){(function(t,n){n(e)})(commonjsGlobal,function(t){var n="1.9.4";function r(w){var O,P,j,Z;for(P=1,j=arguments.length;P<j;P++){Z=arguments[P];for(O in Z)w[O]=Z[O]}return w}var a=Object.create||function(){function w(){}return function(O){return w.prototype=O,new w}}();function s(w,O){var P=Array.prototype.slice;if(w.bind)return w.bind.apply(w,P.call(arguments,1));var j=P.call(arguments,2);return function(){return w.apply(O,j.length?j.concat(P.call(arguments)):arguments)}}var l=0;function u(w){return"_leaflet_id"in w||(w._leaflet_id=++l),w._leaflet_id}function d(w,O,P){var j,Z,oe,ke;return ke=function(){j=!1,Z&&(oe.apply(P,Z),Z=!1)},oe=function(){j?Z=arguments:(w.apply(P,arguments),setTimeout(ke,O),j=!0)},oe}function f(w,O,P){var j=O[1],Z=O[0],oe=j-Z;return w===j&&P?w:((w-Z)%oe+oe)%oe+Z}function m(){return!1}function h(w,O){if(O===!1)return w;var P=Math.pow(10,O===void 0?6:O);return Math.round(w*P)/P}function p(w){return w.trim?w.trim():w.replace(/^\s+|\s+$/g,"")}function g(w){return p(w).split(/\s+/)}function b(w,O){Object.prototype.hasOwnProperty.call(w,"options")||(w.options=w.options?a(w.options):{});for(var P in O)w.options[P]=O[P];return w.options}function v(w,O,P){var j=[];for(var Z in w)j.push(encodeURIComponent(P?Z.toUpperCase():Z)+"="+encodeURIComponent(w[Z]));return(!O||O.indexOf("?")===-1?"?":"&")+j.join("&")}var y=/\{ *([\w_ -]+) *\}/g;function C(w,O){return w.replace(y,function(P,j){var Z=O[j];if(Z===void 0)throw new Error("No value provided for variable "+P);return typeof Z=="function"&&(Z=Z(O)),Z})}var E=Array.isArray||function(w){return Object.prototype.toString.call(w)==="[object Array]"};function A(w,O){for(var P=0;P<w.length;P++)if(w[P]===O)return P;return-1}var k="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function T(w){return window["webkit"+w]||window["moz"+w]||window["ms"+w]}var $=0;function S(w){var O=+new Date,P=Math.max(0,16-(O-$));return $=O+P,window.setTimeout(w,P)}var I=window.requestAnimationFrame||T("RequestAnimationFrame")||S,R=window.cancelAnimationFrame||T("CancelAnimationFrame")||T("CancelRequestAnimationFrame")||function(w){window.clearTimeout(w)};function N(w,O,P){if(P&&I===S)w.call(O);else return I.call(window,s(w,O))}function M(w){w&&R.call(window,w)}var F={__proto__:null,extend:r,create:a,bind:s,get lastId(){return l},stamp:u,throttle:d,wrapNum:f,falseFn:m,formatNum:h,trim:p,splitWords:g,setOptions:b,getParamString:v,template:C,isArray:E,indexOf:A,emptyImageUrl:k,requestFn:I,cancelFn:R,requestAnimFrame:N,cancelAnimFrame:M};function D(){}D.extend=function(w){var O=function(){b(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},P=O.__super__=this.prototype,j=a(P);j.constructor=O,O.prototype=j;for(var Z in this)Object.prototype.hasOwnProperty.call(this,Z)&&Z!=="prototype"&&Z!=="__super__"&&(O[Z]=this[Z]);return w.statics&&r(O,w.statics),w.includes&&(x(w.includes),r.apply(null,[j].concat(w.includes))),r(j,w),delete j.statics,delete j.includes,j.options&&(j.options=P.options?a(P.options):{},r(j.options,w.options)),j._initHooks=[],j.callInitHooks=function(){if(!this._initHooksCalled){P.callInitHooks&&P.callInitHooks.call(this),this._initHooksCalled=!0;for(var oe=0,ke=j._initHooks.length;oe<ke;oe++)j._initHooks[oe].call(this)}},O},D.include=function(w){var O=this.prototype.options;return r(this.prototype,w),w.options&&(this.prototype.options=O,this.mergeOptions(w.options)),this},D.mergeOptions=function(w){return r(this.prototype.options,w),this},D.addInitHook=function(w){var O=Array.prototype.slice.call(arguments,1),P=typeof w=="function"?w:function(){this[w].apply(this,O)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(P),this};function x(w){if(!(typeof L>"u"||!L||!L.Mixin)){w=E(w)?w:[w];for(var O=0;O<w.length;O++)w[O]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var B={on:function(w,O,P){if(typeof w=="object")for(var j in w)this._on(j,w[j],O);else{w=g(w);for(var Z=0,oe=w.length;Z<oe;Z++)this._on(w[Z],O,P)}return this},off:function(w,O,P){if(!arguments.length)delete this._events;else if(typeof w=="object")for(var j in w)this._off(j,w[j],O);else{w=g(w);for(var Z=arguments.length===1,oe=0,ke=w.length;oe<ke;oe++)Z?this._off(w[oe]):this._off(w[oe],O,P)}return this},_on:function(w,O,P,j){if(typeof O!="function"){console.warn("wrong listener type: "+typeof O);return}if(this._listens(w,O,P)===!1){P===this&&(P=void 0);var Z={fn:O,ctx:P};j&&(Z.once=!0),this._events=this._events||{},this._events[w]=this._events[w]||[],this._events[w].push(Z)}},_off:function(w,O,P){var j,Z,oe;if(this._events&&(j=this._events[w],!!j)){if(arguments.length===1){if(this._firingCount)for(Z=0,oe=j.length;Z<oe;Z++)j[Z].fn=m;delete this._events[w];return}if(typeof O!="function"){console.warn("wrong listener type: "+typeof O);return}var ke=this._listens(w,O,P);if(ke!==!1){var Ne=j[ke];this._firingCount&&(Ne.fn=m,this._events[w]=j=j.slice()),j.splice(ke,1)}}},fire:function(w,O,P){if(!this.listens(w,P))return this;var j=r({},O,{type:w,target:this,sourceTarget:O&&O.sourceTarget||this});if(this._events){var Z=this._events[w];if(Z){this._firingCount=this._firingCount+1||1;for(var oe=0,ke=Z.length;oe<ke;oe++){var Ne=Z[oe],De=Ne.fn;Ne.once&&this.off(w,De,Ne.ctx),De.call(Ne.ctx||this,j)}this._firingCount--}}return P&&this._propagateEvent(j),this},listens:function(w,O,P,j){typeof w!="string"&&console.warn('"string" type argument expected');var Z=O;typeof O!="function"&&(j=!!O,Z=void 0,P=void 0);var oe=this._events&&this._events[w];if(oe&&oe.length&&this._listens(w,Z,P)!==!1)return!0;if(j){for(var ke in this._eventParents)if(this._eventParents[ke].listens(w,O,P,j))return!0}return!1},_listens:function(w,O,P){if(!this._events)return!1;var j=this._events[w]||[];if(!O)return!!j.length;P===this&&(P=void 0);for(var Z=0,oe=j.length;Z<oe;Z++)if(j[Z].fn===O&&j[Z].ctx===P)return Z;return!1},once:function(w,O,P){if(typeof w=="object")for(var j in w)this._on(j,w[j],O,!0);else{w=g(w);for(var Z=0,oe=w.length;Z<oe;Z++)this._on(w[Z],O,P,!0)}return this},addEventParent:function(w){return this._eventParents=this._eventParents||{},this._eventParents[u(w)]=w,this},removeEventParent:function(w){return this._eventParents&&delete this._eventParents[u(w)],this},_propagateEvent:function(w){for(var O in this._eventParents)this._eventParents[O].fire(w.type,r({layer:w.target,propagatedFrom:w.target},w),!0)}};B.addEventListener=B.on,B.removeEventListener=B.clearAllEventListeners=B.off,B.addOneTimeEventListener=B.once,B.fireEvent=B.fire,B.hasEventListeners=B.listens;var K=D.extend(B);function U(w,O,P){this.x=P?Math.round(w):w,this.y=P?Math.round(O):O}var G=Math.trunc||function(w){return w>0?Math.floor(w):Math.ceil(w)};U.prototype={clone:function(){return new U(this.x,this.y)},add:function(w){return this.clone()._add(W(w))},_add:function(w){return this.x+=w.x,this.y+=w.y,this},subtract:function(w){return this.clone()._subtract(W(w))},_subtract:function(w){return this.x-=w.x,this.y-=w.y,this},divideBy:function(w){return this.clone()._divideBy(w)},_divideBy:function(w){return this.x/=w,this.y/=w,this},multiplyBy:function(w){return this.clone()._multiplyBy(w)},_multiplyBy:function(w){return this.x*=w,this.y*=w,this},scaleBy:function(w){return new U(this.x*w.x,this.y*w.y)},unscaleBy:function(w){return new U(this.x/w.x,this.y/w.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=G(this.x),this.y=G(this.y),this},distanceTo:function(w){w=W(w);var O=w.x-this.x,P=w.y-this.y;return Math.sqrt(O*O+P*P)},equals:function(w){return w=W(w),w.x===this.x&&w.y===this.y},contains:function(w){return w=W(w),Math.abs(w.x)<=Math.abs(this.x)&&Math.abs(w.y)<=Math.abs(this.y)},toString:function(){return"Point("+h(this.x)+", "+h(this.y)+")"}};function W(w,O,P){return w instanceof U?w:E(w)?new U(w[0],w[1]):w==null?w:typeof w=="object"&&"x"in w&&"y"in w?new U(w.x,w.y):new U(w,O,P)}function q(w,O){if(w)for(var P=O?[w,O]:w,j=0,Z=P.length;j<Z;j++)this.extend(P[j])}q.prototype={extend:function(w){var O,P;if(!w)return this;if(w instanceof U||typeof w[0]=="number"||"x"in w)O=P=W(w);else if(w=H(w),O=w.min,P=w.max,!O||!P)return this;return!this.min&&!this.max?(this.min=O.clone(),this.max=P.clone()):(this.min.x=Math.min(O.x,this.min.x),this.max.x=Math.max(P.x,this.max.x),this.min.y=Math.min(O.y,this.min.y),this.max.y=Math.max(P.y,this.max.y)),this},getCenter:function(w){return W((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,w)},getBottomLeft:function(){return W(this.min.x,this.max.y)},getTopRight:function(){return W(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(w){var O,P;return typeof w[0]=="number"||w instanceof U?w=W(w):w=H(w),w instanceof q?(O=w.min,P=w.max):O=P=w,O.x>=this.min.x&&P.x<=this.max.x&&O.y>=this.min.y&&P.y<=this.max.y},intersects:function(w){w=H(w);var O=this.min,P=this.max,j=w.min,Z=w.max,oe=Z.x>=O.x&&j.x<=P.x,ke=Z.y>=O.y&&j.y<=P.y;return oe&&ke},overlaps:function(w){w=H(w);var O=this.min,P=this.max,j=w.min,Z=w.max,oe=Z.x>O.x&&j.x<P.x,ke=Z.y>O.y&&j.y<P.y;return oe&&ke},isValid:function(){return!!(this.min&&this.max)},pad:function(w){var O=this.min,P=this.max,j=Math.abs(O.x-P.x)*w,Z=Math.abs(O.y-P.y)*w;return H(W(O.x-j,O.y-Z),W(P.x+j,P.y+Z))},equals:function(w){return w?(w=H(w),this.min.equals(w.getTopLeft())&&this.max.equals(w.getBottomRight())):!1}};function H(w,O){return!w||w instanceof q?w:new q(w,O)}function z(w,O){if(w)for(var P=O?[w,O]:w,j=0,Z=P.length;j<Z;j++)this.extend(P[j])}z.prototype={extend:function(w){var O=this._southWest,P=this._northEast,j,Z;if(w instanceof V)j=w,Z=w;else if(w instanceof z){if(j=w._southWest,Z=w._northEast,!j||!Z)return this}else return w?this.extend(J(w)||Y(w)):this;return!O&&!P?(this._southWest=new V(j.lat,j.lng),this._northEast=new V(Z.lat,Z.lng)):(O.lat=Math.min(j.lat,O.lat),O.lng=Math.min(j.lng,O.lng),P.lat=Math.max(Z.lat,P.lat),P.lng=Math.max(Z.lng,P.lng)),this},pad:function(w){var O=this._southWest,P=this._northEast,j=Math.abs(O.lat-P.lat)*w,Z=Math.abs(O.lng-P.lng)*w;return new z(new V(O.lat-j,O.lng-Z),new V(P.lat+j,P.lng+Z))},getCenter:function(){return new V((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new V(this.getNorth(),this.getWest())},getSouthEast:function(){return new V(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(w){typeof w[0]=="number"||w instanceof V||"lat"in w?w=J(w):w=Y(w);var O=this._southWest,P=this._northEast,j,Z;return w instanceof z?(j=w.getSouthWest(),Z=w.getNorthEast()):j=Z=w,j.lat>=O.lat&&Z.lat<=P.lat&&j.lng>=O.lng&&Z.lng<=P.lng},intersects:function(w){w=Y(w);var O=this._southWest,P=this._northEast,j=w.getSouthWest(),Z=w.getNorthEast(),oe=Z.lat>=O.lat&&j.lat<=P.lat,ke=Z.lng>=O.lng&&j.lng<=P.lng;return oe&&ke},overlaps:function(w){w=Y(w);var O=this._southWest,P=this._northEast,j=w.getSouthWest(),Z=w.getNorthEast(),oe=Z.lat>O.lat&&j.lat<P.lat,ke=Z.lng>O.lng&&j.lng<P.lng;return oe&&ke},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(w,O){return w?(w=Y(w),this._southWest.equals(w.getSouthWest(),O)&&this._northEast.equals(w.getNorthEast(),O)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function Y(w,O){return w instanceof z?w:new z(w,O)}function V(w,O,P){if(isNaN(w)||isNaN(O))throw new Error("Invalid LatLng object: ("+w+", "+O+")");this.lat=+w,this.lng=+O,P!==void 0&&(this.alt=+P)}V.prototype={equals:function(w,O){if(!w)return!1;w=J(w);var P=Math.max(Math.abs(this.lat-w.lat),Math.abs(this.lng-w.lng));return P<=(O===void 0?1e-9:O)},toString:function(w){return"LatLng("+h(this.lat,w)+", "+h(this.lng,w)+")"},distanceTo:function(w){return X.distance(this,J(w))},wrap:function(){return X.wrapLatLng(this)},toBounds:function(w){var O=180*w/40075017,P=O/Math.cos(Math.PI/180*this.lat);return Y([this.lat-O,this.lng-P],[this.lat+O,this.lng+P])},clone:function(){return new V(this.lat,this.lng,this.alt)}};function J(w,O,P){return w instanceof V?w:E(w)&&typeof w[0]!="object"?w.length===3?new V(w[0],w[1],w[2]):w.length===2?new V(w[0],w[1]):null:w==null?w:typeof w=="object"&&"lat"in w?new V(w.lat,"lng"in w?w.lng:w.lon,w.alt):O===void 0?null:new V(w,O,P)}var Q={latLngToPoint:function(w,O){var P=this.projection.project(w),j=this.scale(O);return this.transformation._transform(P,j)},pointToLatLng:function(w,O){var P=this.scale(O),j=this.transformation.untransform(w,P);return this.projection.unproject(j)},project:function(w){return this.projection.project(w)},unproject:function(w){return this.projection.unproject(w)},scale:function(w){return 256*Math.pow(2,w)},zoom:function(w){return Math.log(w/256)/Math.LN2},getProjectedBounds:function(w){if(this.infinite)return null;var O=this.projection.bounds,P=this.scale(w),j=this.transformation.transform(O.min,P),Z=this.transformation.transform(O.max,P);return new q(j,Z)},infinite:!1,wrapLatLng:function(w){var O=this.wrapLng?f(w.lng,this.wrapLng,!0):w.lng,P=this.wrapLat?f(w.lat,this.wrapLat,!0):w.lat,j=w.alt;return new V(P,O,j)},wrapLatLngBounds:function(w){var O=w.getCenter(),P=this.wrapLatLng(O),j=O.lat-P.lat,Z=O.lng-P.lng;if(j===0&&Z===0)return w;var oe=w.getSouthWest(),ke=w.getNorthEast(),Ne=new V(oe.lat-j,oe.lng-Z),De=new V(ke.lat-j,ke.lng-Z);return new z(Ne,De)}},X=r({},Q,{wrapLng:[-180,180],R:6371e3,distance:function(w,O){var P=Math.PI/180,j=w.lat*P,Z=O.lat*P,oe=Math.sin((O.lat-w.lat)*P/2),ke=Math.sin((O.lng-w.lng)*P/2),Ne=oe*oe+Math.cos(j)*Math.cos(Z)*ke*ke,De=2*Math.atan2(Math.sqrt(Ne),Math.sqrt(1-Ne));return this.R*De}}),ie=6378137,ce={R:ie,MAX_LATITUDE:85.0511287798,project:function(w){var O=Math.PI/180,P=this.MAX_LATITUDE,j=Math.max(Math.min(P,w.lat),-P),Z=Math.sin(j*O);return new U(this.R*w.lng*O,this.R*Math.log((1+Z)/(1-Z))/2)},unproject:function(w){var O=180/Math.PI;return new V((2*Math.atan(Math.exp(w.y/this.R))-Math.PI/2)*O,w.x*O/this.R)},bounds:function(){var w=ie*Math.PI;return new q([-w,-w],[w,w])}()};function de(w,O,P,j){if(E(w)){this._a=w[0],this._b=w[1],this._c=w[2],this._d=w[3];return}this._a=w,this._b=O,this._c=P,this._d=j}de.prototype={transform:function(w,O){return this._transform(w.clone(),O)},_transform:function(w,O){return O=O||1,w.x=O*(this._a*w.x+this._b),w.y=O*(this._c*w.y+this._d),w},untransform:function(w,O){return O=O||1,new U((w.x/O-this._b)/this._a,(w.y/O-this._d)/this._c)}};function se(w,O,P,j){return new de(w,O,P,j)}var me=r({},X,{code:"EPSG:3857",projection:ce,transformation:function(){var w=.5/(Math.PI*ce.R);return se(w,.5,-w,.5)}()}),ue=r({},me,{code:"EPSG:900913"});function he(w){return document.createElementNS("http://www.w3.org/2000/svg",w)}function pe(w,O){var P="",j,Z,oe,ke,Ne,De;for(j=0,oe=w.length;j<oe;j++){for(Ne=w[j],Z=0,ke=Ne.length;Z<ke;Z++)De=Ne[Z],P+=(Z?"L":"M")+De.x+" "+De.y;P+=O?lt.svg?"z":"x":""}return P||"M0 0"}var Oe=document.documentElement.style,qe="ActiveXObject"in window,et=qe&&!document.addEventListener,Ue="msLaunchUri"in navigator&&!("documentMode"in document),fe=zt("webkit"),Ie=zt("android"),We=zt("android 2")||zt("android 3"),$e=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),Le=Ie&&zt("Google")&&$e<537&&!("AudioNode"in window),ze=!!window.opera,re=!Ue&&zt("chrome"),ge=zt("gecko")&&!fe&&!ze&&!qe,Be=!re&&zt("safari"),Ze=zt("phantom"),Pe="OTransition"in Oe,Ee=navigator.platform.indexOf("Win")===0,Ce=qe&&"transition"in Oe,je="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!We,pt="MozPerspective"in Oe,wt=!window.L_DISABLE_3D&&(Ce||je||pt)&&!Pe&&!Ze,ut=typeof orientation<"u"||zt("mobile"),Ct=ut&&fe,xt=ut&&je,ht=!window.PointerEvent&&window.MSPointerEvent,Rt=!!(window.PointerEvent||ht),Ae="ontouchstart"in window||!!window.TouchEvent,Me=!window.L_NO_TOUCH&&(Ae||Rt),xe=ut&&ze,Qe=ut&&ge,rt=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,ot=function(){var w=!1;try{var O=Object.defineProperty({},"passive",{get:function(){w=!0}});window.addEventListener("testPassiveEventSupport",m,O),window.removeEventListener("testPassiveEventSupport",m,O)}catch{}return w}(),ft=function(){return!!document.createElement("canvas").getContext}(),kt=!!(document.createElementNS&&he("svg").createSVGRect),$t=!!kt&&function(){var w=document.createElement("div");return w.innerHTML="<svg/>",(w.firstChild&&w.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Lt=!kt&&function(){try{var w=document.createElement("div");w.innerHTML='<v:shape adj="1"/>';var O=w.firstChild;return O.style.behavior="url(#default#VML)",O&&typeof O.adj=="object"}catch{return!1}}(),Ut=navigator.platform.indexOf("Mac")===0,rn=navigator.platform.indexOf("Linux")===0;function zt(w){return navigator.userAgent.toLowerCase().indexOf(w)>=0}var lt={ie:qe,ielt9:et,edge:Ue,webkit:fe,android:Ie,android23:We,androidStock:Le,opera:ze,chrome:re,gecko:ge,safari:Be,phantom:Ze,opera12:Pe,win:Ee,ie3d:Ce,webkit3d:je,gecko3d:pt,any3d:wt,mobile:ut,mobileWebkit:Ct,mobileWebkit3d:xt,msPointer:ht,pointer:Rt,touch:Me,touchNative:Ae,mobileOpera:xe,mobileGecko:Qe,retina:rt,passiveEvents:ot,canvas:ft,svg:kt,vml:Lt,inlineSvg:$t,mac:Ut,linux:rn},Cn=lt.msPointer?"MSPointerDown":"pointerdown",an=lt.msPointer?"MSPointerMove":"pointermove",wn=lt.msPointer?"MSPointerUp":"pointerup",vn=lt.msPointer?"MSPointerCancel":"pointercancel",_n={touchstart:Cn,touchmove:an,touchend:wn,touchcancel:vn},sn={touchstart:ct,touchmove:ve,touchend:ve,touchcancel:ve},Yt={},nn=!1;function Zt(w,O,P){return O==="touchstart"&&En(),sn[O]?(P=sn[O].bind(this,P),w.addEventListener(_n[O],P,!1),P):(console.warn("wrong event specified:",O),m)}function ln(w,O,P){if(!_n[O]){console.warn("wrong event specified:",O);return}w.removeEventListener(_n[O],P,!1)}function cn(w){Yt[w.pointerId]=w}function hn(w){Yt[w.pointerId]&&(Yt[w.pointerId]=w)}function un(w){delete Yt[w.pointerId]}function En(){nn||(document.addEventListener(Cn,cn,!0),document.addEventListener(an,hn,!0),document.addEventListener(wn,un,!0),document.addEventListener(vn,un,!0),nn=!0)}function ve(w,O){if(O.pointerType!==(O.MSPOINTER_TYPE_MOUSE||"mouse")){O.touches=[];for(var P in Yt)O.touches.push(Yt[P]);O.changedTouches=[O],w(O)}}function ct(w,O){O.MSPOINTER_TYPE_TOUCH&&O.pointerType===O.MSPOINTER_TYPE_TOUCH&&qt(O),ve(w,O)}function bt(w){var O={},P,j;for(j in w)P=w[j],O[j]=P&&P.bind?P.bind(w):P;return w=O,O.type="dblclick",O.detail=2,O.isTrusted=!1,O._simulated=!0,O}var At=200;function Wt(w,O){w.addEventListener("dblclick",O);var P=0,j;function Z(oe){if(oe.detail!==1){j=oe.detail;return}if(!(oe.pointerType==="mouse"||oe.sourceCapabilities&&!oe.sourceCapabilities.firesTouchEvents)){var ke=so(oe);if(!(ke.some(function(De){return De instanceof HTMLLabelElement&&De.attributes.for})&&!ke.some(function(De){return De instanceof HTMLInputElement||De instanceof HTMLSelectElement}))){var Ne=Date.now();Ne-P<=At?(j++,j===2&&O(bt(oe))):j=1,P=Ne}}}return w.addEventListener("click",Z),{dblclick:O,simDblclick:Z}}function Ot(w,O){w.removeEventListener("dblclick",O.dblclick),w.removeEventListener("click",O.simDblclick)}var Xt=at(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),jt=at(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Jt=jt==="webkitTransition"||jt==="OTransition"?jt+"End":"transitionend";function yn(w){return typeof w=="string"?document.getElementById(w):w}function pn(w,O){var P=w.style[O]||w.currentStyle&&w.currentStyle[O];if((!P||P==="auto")&&document.defaultView){var j=document.defaultView.getComputedStyle(w,null);P=j?j[O]:null}return P==="auto"?null:P}function St(w,O,P){var j=document.createElement(w);return j.className=O||"",P&&P.appendChild(j),j}function ne(w){var O=w.parentNode;O&&O.removeChild(w)}function ye(w){for(;w.firstChild;)w.removeChild(w.firstChild)}function le(w){var O=w.parentNode;O&&O.lastChild!==w&&O.appendChild(w)}function we(w){var O=w.parentNode;O&&O.firstChild!==w&&O.insertBefore(w,O.firstChild)}function Se(w,O){if(w.classList!==void 0)return w.classList.contains(O);var P=Xe(w);return P.length>0&&new RegExp("(^|\\s)"+O+"(\\s|$)").test(P)}function be(w,O){if(w.classList!==void 0)for(var P=g(O),j=0,Z=P.length;j<Z;j++)w.classList.add(P[j]);else if(!Se(w,O)){var oe=Xe(w);Ve(w,(oe?oe+" ":"")+O)}}function Fe(w,O){w.classList!==void 0?w.classList.remove(O):Ve(w,p((" "+Xe(w)+" ").replace(" "+O+" "," ")))}function Ve(w,O){w.className.baseVal===void 0?w.className=O:w.className.baseVal=O}function Xe(w){return w.correspondingElement&&(w=w.correspondingElement),w.className.baseVal===void 0?w.className:w.className.baseVal}function Ye(w,O){"opacity"in w.style?w.style.opacity=O:"filter"in w.style&&tt(w,O)}function tt(w,O){var P=!1,j="DXImageTransform.Microsoft.Alpha";try{P=w.filters.item(j)}catch{if(O===1)return}O=Math.round(O*100),P?(P.Enabled=O!==100,P.Opacity=O):w.style.filter+=" progid:"+j+"(opacity="+O+")"}function at(w){for(var O=document.documentElement.style,P=0;P<w.length;P++)if(w[P]in O)return w[P];return!1}function mt(w,O,P){var j=O||new U(0,0);w.style[Xt]=(lt.ie3d?"translate("+j.x+"px,"+j.y+"px)":"translate3d("+j.x+"px,"+j.y+"px,0)")+(P?" scale("+P+")":"")}function _t(w,O){w._leaflet_pos=O,lt.any3d?mt(w,O):(w.style.left=O.x+"px",w.style.top=O.y+"px")}function ee(w){return w._leaflet_pos||new U(0,0)}var ae,_e,Re;if("onselectstart"in document)ae=function(){vt(window,"selectstart",qt)},_e=function(){Mt(window,"selectstart",qt)};else{var Ge=at(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ae=function(){if(Ge){var w=document.documentElement.style;Re=w[Ge],w[Ge]="none"}},_e=function(){Ge&&(document.documentElement.style[Ge]=Re,Re=void 0)}}function it(){vt(window,"dragstart",qt)}function yt(){Mt(window,"dragstart",qt)}var It,Pt;function Ft(w){for(;w.tabIndex===-1;)w=w.parentNode;w.style&&(Ht(),It=w,Pt=w.style.outlineStyle,w.style.outlineStyle="none",vt(window,"keydown",Ht))}function Ht(){It&&(It.style.outlineStyle=Pt,It=void 0,Pt=void 0,Mt(window,"keydown",Ht))}function Fn(w){do w=w.parentNode;while((!w.offsetWidth||!w.offsetHeight)&&w!==document.body);return w}function Kn(w){var O=w.getBoundingClientRect();return{x:O.width/w.offsetWidth||1,y:O.height/w.offsetHeight||1,boundingClientRect:O}}var Yn={__proto__:null,TRANSFORM:Xt,TRANSITION:jt,TRANSITION_END:Jt,get:yn,getStyle:pn,create:St,remove:ne,empty:ye,toFront:le,toBack:we,hasClass:Se,addClass:be,removeClass:Fe,setClass:Ve,getClass:Xe,setOpacity:Ye,testProp:at,setTransform:mt,setPosition:_t,getPosition:ee,get disableTextSelection(){return ae},get enableTextSelection(){return _e},disableImageDrag:it,enableImageDrag:yt,preventOutline:Ft,restoreOutline:Ht,getSizedParentNode:Fn,getScale:Kn};function vt(w,O,P,j){if(O&&typeof O=="object")for(var Z in O)zn(w,Z,O[Z],P);else{O=g(O);for(var oe=0,ke=O.length;oe<ke;oe++)zn(w,O[oe],P,j)}return this}var Nt="_leaflet_events";function Mt(w,O,P,j){if(arguments.length===1)Ln(w),delete w[Nt];else if(O&&typeof O=="object")for(var Z in O)Wn(w,Z,O[Z],P);else if(O=g(O),arguments.length===2)Ln(w,function(Ne){return A(O,Ne)!==-1});else for(var oe=0,ke=O.length;oe<ke;oe++)Wn(w,O[oe],P,j);return this}function Ln(w,O){for(var P in w[Nt]){var j=P.split(/\d/)[0];(!O||O(j))&&Wn(w,j,null,null,P)}}var Jn={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function zn(w,O,P,j){var Z=O+u(P)+(j?"_"+u(j):"");if(w[Nt]&&w[Nt][Z])return this;var oe=function(Ne){return P.call(j||w,Ne||window.event)},ke=oe;!lt.touchNative&&lt.pointer&&O.indexOf("touch")===0?oe=Zt(w,O,oe):lt.touch&&O==="dblclick"?oe=Wt(w,oe):"addEventListener"in w?O==="touchstart"||O==="touchmove"||O==="wheel"||O==="mousewheel"?w.addEventListener(Jn[O]||O,oe,lt.passiveEvents?{passive:!1}:!1):O==="mouseenter"||O==="mouseleave"?(oe=function(Ne){Ne=Ne||window.event,Xn(w,Ne)&&ke(Ne)},w.addEventListener(Jn[O],oe,!1)):w.addEventListener(O,ke,!1):w.attachEvent("on"+O,oe),w[Nt]=w[Nt]||{},w[Nt][Z]=oe}function Wn(w,O,P,j,Z){Z=Z||O+u(P)+(j?"_"+u(j):"");var oe=w[Nt]&&w[Nt][Z];if(!oe)return this;!lt.touchNative&&lt.pointer&&O.indexOf("touch")===0?ln(w,O,oe):lt.touch&&O==="dblclick"?Ot(w,oe):"removeEventListener"in w?w.removeEventListener(Jn[O]||O,oe,!1):w.detachEvent("on"+O,oe),w[Nt][Z]=null}function dn(w){return w.stopPropagation?w.stopPropagation():w.originalEvent?w.originalEvent._stopped=!0:w.cancelBubble=!0,this}function Zn(w){return zn(w,"wheel",dn),this}function Dn(w){return vt(w,"mousedown touchstart dblclick contextmenu",dn),w._leaflet_disable_click=!0,this}function qt(w){return w.preventDefault?w.preventDefault():w.returnValue=!1,this}function $n(w){return qt(w),dn(w),this}function so(w){if(w.composedPath)return w.composedPath();for(var O=[],P=w.target;P;)O.push(P),P=P.parentNode;return O}function lo(w,O){if(!O)return new U(w.clientX,w.clientY);var P=Kn(O),j=P.boundingClientRect;return new U((w.clientX-j.left)/P.x-O.clientLeft,(w.clientY-j.top)/P.y-O.clientTop)}var Eo=lt.linux&&lt.chrome?window.devicePixelRatio:lt.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function co(w){return lt.edge?w.wheelDeltaY/2:w.deltaY&&w.deltaMode===0?-w.deltaY/Eo:w.deltaY&&w.deltaMode===1?-w.deltaY*20:w.deltaY&&w.deltaMode===2?-w.deltaY*60:w.deltaX||w.deltaZ?0:w.wheelDelta?(w.wheelDeltaY||w.wheelDelta)/2:w.detail&&Math.abs(w.detail)<32765?-w.detail*20:w.detail?w.detail/-32765*60:0}function Xn(w,O){var P=O.relatedTarget;if(!P)return!0;try{for(;P&&P!==w;)P=P.parentNode}catch{return!1}return P!==w}var $o={__proto__:null,on:vt,off:Mt,stopPropagation:dn,disableScrollPropagation:Zn,disableClickPropagation:Dn,preventDefault:qt,stop:$n,getPropagationPath:so,getMousePosition:lo,getWheelDelta:co,isExternalTarget:Xn,addListener:vt,removeListener:Mt},uo=K.extend({run:function(w,O,P,j){this.stop(),this._el=w,this._inProgress=!0,this._duration=P||.25,this._easeOutPower=1/Math.max(j||.5,.2),this._startPos=ee(w),this._offset=O.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=N(this._animate,this),this._step()},_step:function(w){var O=+new Date-this._startTime,P=this._duration*1e3;O<P?this._runFrame(this._easeOut(O/P),w):(this._runFrame(1),this._complete())},_runFrame:function(w,O){var P=this._startPos.add(this._offset.multiplyBy(w));O&&P._round(),_t(this._el,P),this.fire("step")},_complete:function(){M(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(w){return 1-Math.pow(1-w,this._easeOutPower)}}),Et=K.extend({options:{crs:me,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(w,O){O=b(this,O),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(w),this._initLayout(),this._onResize=s(this._onResize,this),this._initEvents(),O.maxBounds&&this.setMaxBounds(O.maxBounds),O.zoom!==void 0&&(this._zoom=this._limitZoom(O.zoom)),O.center&&O.zoom!==void 0&&this.setView(J(O.center),O.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=jt&&lt.any3d&&!lt.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),vt(this._proxy,Jt,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(w,O,P){if(O=O===void 0?this._zoom:this._limitZoom(O),w=this._limitCenter(J(w),O,this.options.maxBounds),P=P||{},this._stop(),this._loaded&&!P.reset&&P!==!0){P.animate!==void 0&&(P.zoom=r({animate:P.animate},P.zoom),P.pan=r({animate:P.animate,duration:P.duration},P.pan));var j=this._zoom!==O?this._tryAnimatedZoom&&this._tryAnimatedZoom(w,O,P.zoom):this._tryAnimatedPan(w,P.pan);if(j)return clearTimeout(this._sizeTimer),this}return this._resetView(w,O,P.pan&&P.pan.noMoveStart),this},setZoom:function(w,O){return this._loaded?this.setView(this.getCenter(),w,{zoom:O}):(this._zoom=w,this)},zoomIn:function(w,O){return w=w||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+w,O)},zoomOut:function(w,O){return w=w||(lt.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-w,O)},setZoomAround:function(w,O,P){var j=this.getZoomScale(O),Z=this.getSize().divideBy(2),oe=w instanceof U?w:this.latLngToContainerPoint(w),ke=oe.subtract(Z).multiplyBy(1-1/j),Ne=this.containerPointToLatLng(Z.add(ke));return this.setView(Ne,O,{zoom:P})},_getBoundsCenterZoom:function(w,O){O=O||{},w=w.getBounds?w.getBounds():Y(w);var P=W(O.paddingTopLeft||O.padding||[0,0]),j=W(O.paddingBottomRight||O.padding||[0,0]),Z=this.getBoundsZoom(w,!1,P.add(j));if(Z=typeof O.maxZoom=="number"?Math.min(O.maxZoom,Z):Z,Z===1/0)return{center:w.getCenter(),zoom:Z};var oe=j.subtract(P).divideBy(2),ke=this.project(w.getSouthWest(),Z),Ne=this.project(w.getNorthEast(),Z),De=this.unproject(ke.add(Ne).divideBy(2).add(oe),Z);return{center:De,zoom:Z}},fitBounds:function(w,O){if(w=Y(w),!w.isValid())throw new Error("Bounds are not valid.");var P=this._getBoundsCenterZoom(w,O);return this.setView(P.center,P.zoom,O)},fitWorld:function(w){return this.fitBounds([[-90,-180],[90,180]],w)},panTo:function(w,O){return this.setView(w,this._zoom,{pan:O})},panBy:function(w,O){if(w=W(w).round(),O=O||{},!w.x&&!w.y)return this.fire("moveend");if(O.animate!==!0&&!this.getSize().contains(w))return this._resetView(this.unproject(this.project(this.getCenter()).add(w)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new uo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),O.noMoveStart||this.fire("movestart"),O.animate!==!1){be(this._mapPane,"leaflet-pan-anim");var P=this._getMapPanePos().subtract(w).round();this._panAnim.run(this._mapPane,P,O.duration||.25,O.easeLinearity)}else this._rawPanBy(w),this.fire("move").fire("moveend");return this},flyTo:function(w,O,P){if(P=P||{},P.animate===!1||!lt.any3d)return this.setView(w,O,P);this._stop();var j=this.project(this.getCenter()),Z=this.project(w),oe=this.getSize(),ke=this._zoom;w=J(w),O=O===void 0?ke:O;var Ne=Math.max(oe.x,oe.y),De=Ne*this.getZoomScale(ke,O),Je=Z.distanceTo(j)||1,st=1.42,gt=st*st;function Tt(Vt){var To=Vt?-1:1,qi=Vt?De:Ne,Gi=De*De-Ne*Ne+To*gt*gt*Je*Je,Ki=2*qi*gt*Je,zo=Gi/Ki,hi=Math.sqrt(zo*zo+1)-zo,Yi=hi<1e-9?-18:Math.log(hi);return Yi}function tn(Vt){return(Math.exp(Vt)-Math.exp(-Vt))/2}function Kt(Vt){return(Math.exp(Vt)+Math.exp(-Vt))/2}function bn(Vt){return tn(Vt)/Kt(Vt)}var on=Tt(0);function Gn(Vt){return Ne*(Kt(on)/Kt(on+st*Vt))}function Ui(Vt){return Ne*(Kt(on)*bn(on+st*Vt)-tn(on))/gt}function Hi(Vt){return 1-Math.pow(1-Vt,1.5)}var ji=Date.now(),mi=(Tt(1)-on)/st,Vi=P.duration?1e3*P.duration:1e3*mi*.8;function _i(){var Vt=(Date.now()-ji)/Vi,To=Hi(Vt)*mi;Vt<=1?(this._flyToFrame=N(_i,this),this._move(this.unproject(j.add(Z.subtract(j).multiplyBy(Ui(To)/Je)),ke),this.getScaleZoom(Ne/Gn(To),ke),{flyTo:!0})):this._move(w,O)._moveEnd(!0)}return this._moveStart(!0,P.noMoveStart),_i.call(this),this},flyToBounds:function(w,O){var P=this._getBoundsCenterZoom(w,O);return this.flyTo(P.center,P.zoom,O)},setMaxBounds:function(w){return w=Y(w),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),w.isValid()?(this.options.maxBounds=w,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(w){var O=this.options.minZoom;return this.options.minZoom=w,this._loaded&&O!==w&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(w):this},setMaxZoom:function(w){var O=this.options.maxZoom;return this.options.maxZoom=w,this._loaded&&O!==w&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(w):this},panInsideBounds:function(w,O){this._enforcingBounds=!0;var P=this.getCenter(),j=this._limitCenter(P,this._zoom,Y(w));return P.equals(j)||this.panTo(j,O),this._enforcingBounds=!1,this},panInside:function(w,O){O=O||{};var P=W(O.paddingTopLeft||O.padding||[0,0]),j=W(O.paddingBottomRight||O.padding||[0,0]),Z=this.project(this.getCenter()),oe=this.project(w),ke=this.getPixelBounds(),Ne=H([ke.min.add(P),ke.max.subtract(j)]),De=Ne.getSize();if(!Ne.contains(oe)){this._enforcingBounds=!0;var Je=oe.subtract(Ne.getCenter()),st=Ne.extend(oe).getSize().subtract(De);Z.x+=Je.x<0?-st.x:st.x,Z.y+=Je.y<0?-st.y:st.y,this.panTo(this.unproject(Z),O),this._enforcingBounds=!1}return this},invalidateSize:function(w){if(!this._loaded)return this;w=r({animate:!1,pan:!0},w===!0?{animate:!0}:w);var O=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var P=this.getSize(),j=O.divideBy(2).round(),Z=P.divideBy(2).round(),oe=j.subtract(Z);return!oe.x&&!oe.y?this:(w.animate&&w.pan?this.panBy(oe):(w.pan&&this._rawPanBy(oe),this.fire("move"),w.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(s(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:O,newSize:P}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(w){if(w=this._locateOptions=r({timeout:1e4,watch:!1},w),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var O=s(this._handleGeolocationResponse,this),P=s(this._handleGeolocationError,this);return w.watch?this._locationWatchId=navigator.geolocation.watchPosition(O,P,w):navigator.geolocation.getCurrentPosition(O,P,w),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(w){if(this._container._leaflet_id){var O=w.code,P=w.message||(O===1?"permission denied":O===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:O,message:"Geolocation error: "+P+"."})}},_handleGeolocationResponse:function(w){if(this._container._leaflet_id){var O=w.coords.latitude,P=w.coords.longitude,j=new V(O,P),Z=j.toBounds(w.coords.accuracy*2),oe=this._locateOptions;if(oe.setView){var ke=this.getBoundsZoom(Z);this.setView(j,oe.maxZoom?Math.min(ke,oe.maxZoom):ke)}var Ne={latlng:j,bounds:Z,timestamp:w.timestamp};for(var De in w.coords)typeof w.coords[De]=="number"&&(Ne[De]=w.coords[De]);this.fire("locationfound",Ne)}},addHandler:function(w,O){if(!O)return this;var P=this[w]=new O(this);return this._handlers.push(P),this.options[w]&&P.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),ne(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(M(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var w;for(w in this._layers)this._layers[w].remove();for(w in this._panes)ne(this._panes[w]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(w,O){var P="leaflet-pane"+(w?" leaflet-"+w.replace("Pane","")+"-pane":""),j=St("div",P,O||this._mapPane);return w&&(this._panes[w]=j),j},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var w=this.getPixelBounds(),O=this.unproject(w.getBottomLeft()),P=this.unproject(w.getTopRight());return new z(O,P)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(w,O,P){w=Y(w),P=W(P||[0,0]);var j=this.getZoom()||0,Z=this.getMinZoom(),oe=this.getMaxZoom(),ke=w.getNorthWest(),Ne=w.getSouthEast(),De=this.getSize().subtract(P),Je=H(this.project(Ne,j),this.project(ke,j)).getSize(),st=lt.any3d?this.options.zoomSnap:1,gt=De.x/Je.x,Tt=De.y/Je.y,tn=O?Math.max(gt,Tt):Math.min(gt,Tt);return j=this.getScaleZoom(tn,j),st&&(j=Math.round(j/(st/100))*(st/100),j=O?Math.ceil(j/st)*st:Math.floor(j/st)*st),Math.max(Z,Math.min(oe,j))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new U(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(w,O){var P=this._getTopLeftPoint(w,O);return new q(P,P.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(w){return this.options.crs.getProjectedBounds(w===void 0?this.getZoom():w)},getPane:function(w){return typeof w=="string"?this._panes[w]:w},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(w,O){var P=this.options.crs;return O=O===void 0?this._zoom:O,P.scale(w)/P.scale(O)},getScaleZoom:function(w,O){var P=this.options.crs;O=O===void 0?this._zoom:O;var j=P.zoom(w*P.scale(O));return isNaN(j)?1/0:j},project:function(w,O){return O=O===void 0?this._zoom:O,this.options.crs.latLngToPoint(J(w),O)},unproject:function(w,O){return O=O===void 0?this._zoom:O,this.options.crs.pointToLatLng(W(w),O)},layerPointToLatLng:function(w){var O=W(w).add(this.getPixelOrigin());return this.unproject(O)},latLngToLayerPoint:function(w){var O=this.project(J(w))._round();return O._subtract(this.getPixelOrigin())},wrapLatLng:function(w){return this.options.crs.wrapLatLng(J(w))},wrapLatLngBounds:function(w){return this.options.crs.wrapLatLngBounds(Y(w))},distance:function(w,O){return this.options.crs.distance(J(w),J(O))},containerPointToLayerPoint:function(w){return W(w).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(w){return W(w).add(this._getMapPanePos())},containerPointToLatLng:function(w){var O=this.containerPointToLayerPoint(W(w));return this.layerPointToLatLng(O)},latLngToContainerPoint:function(w){return this.layerPointToContainerPoint(this.latLngToLayerPoint(J(w)))},mouseEventToContainerPoint:function(w){return lo(w,this._container)},mouseEventToLayerPoint:function(w){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(w))},mouseEventToLatLng:function(w){return this.layerPointToLatLng(this.mouseEventToLayerPoint(w))},_initContainer:function(w){var O=this._container=yn(w);if(O){if(O._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");vt(O,"scroll",this._onScroll,this),this._containerId=u(O)},_initLayout:function(){var w=this._container;this._fadeAnimated=this.options.fadeAnimation&&lt.any3d,be(w,"leaflet-container"+(lt.touch?" leaflet-touch":"")+(lt.retina?" leaflet-retina":"")+(lt.ielt9?" leaflet-oldie":"")+(lt.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var O=pn(w,"position");O!=="absolute"&&O!=="relative"&&O!=="fixed"&&O!=="sticky"&&(w.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var w=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),_t(this._mapPane,new U(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(be(w.markerPane,"leaflet-zoom-hide"),be(w.shadowPane,"leaflet-zoom-hide"))},_resetView:function(w,O,P){_t(this._mapPane,new U(0,0));var j=!this._loaded;this._loaded=!0,O=this._limitZoom(O),this.fire("viewprereset");var Z=this._zoom!==O;this._moveStart(Z,P)._move(w,O)._moveEnd(Z),this.fire("viewreset"),j&&this.fire("load")},_moveStart:function(w,O){return w&&this.fire("zoomstart"),O||this.fire("movestart"),this},_move:function(w,O,P,j){O===void 0&&(O=this._zoom);var Z=this._zoom!==O;return this._zoom=O,this._lastCenter=w,this._pixelOrigin=this._getNewPixelOrigin(w),j?P&&P.pinch&&this.fire("zoom",P):((Z||P&&P.pinch)&&this.fire("zoom",P),this.fire("move",P)),this},_moveEnd:function(w){return w&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return M(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(w){_t(this._mapPane,this._getMapPanePos().subtract(w))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(w){this._targets={},this._targets[u(this._container)]=this;var O=w?Mt:vt;O(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&O(window,"resize",this._onResize,this),lt.any3d&&this.options.transform3DLimit&&(w?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){M(this._resizeRequest),this._resizeRequest=N(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var w=this._getMapPanePos();Math.max(Math.abs(w.x),Math.abs(w.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(w,O){for(var P=[],j,Z=O==="mouseout"||O==="mouseover",oe=w.target||w.srcElement,ke=!1;oe;){if(j=this._targets[u(oe)],j&&(O==="click"||O==="preclick")&&this._draggableMoved(j)){ke=!0;break}if(j&&j.listens(O,!0)&&(Z&&!Xn(oe,w)||(P.push(j),Z))||oe===this._container)break;oe=oe.parentNode}return!P.length&&!ke&&!Z&&this.listens(O,!0)&&(P=[this]),P},_isClickDisabled:function(w){for(;w&&w!==this._container;){if(w._leaflet_disable_click)return!0;w=w.parentNode}},_handleDOMEvent:function(w){var O=w.target||w.srcElement;if(!(!this._loaded||O._leaflet_disable_events||w.type==="click"&&this._isClickDisabled(O))){var P=w.type;P==="mousedown"&&Ft(O),this._fireDOMEvent(w,P)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(w,O,P){if(w.type==="click"){var j=r({},w);j.type="preclick",this._fireDOMEvent(j,j.type,P)}var Z=this._findEventTargets(w,O);if(P){for(var oe=[],ke=0;ke<P.length;ke++)P[ke].listens(O,!0)&&oe.push(P[ke]);Z=oe.concat(Z)}if(Z.length){O==="contextmenu"&&qt(w);var Ne=Z[0],De={originalEvent:w};if(w.type!=="keypress"&&w.type!=="keydown"&&w.type!=="keyup"){var Je=Ne.getLatLng&&(!Ne._radius||Ne._radius<=10);De.containerPoint=Je?this.latLngToContainerPoint(Ne.getLatLng()):this.mouseEventToContainerPoint(w),De.layerPoint=this.containerPointToLayerPoint(De.containerPoint),De.latlng=Je?Ne.getLatLng():this.layerPointToLatLng(De.layerPoint)}for(ke=0;ke<Z.length;ke++)if(Z[ke].fire(O,De,!0),De.originalEvent._stopped||Z[ke].options.bubblingMouseEvents===!1&&A(this._mouseEvents,O)!==-1)return}},_draggableMoved:function(w){return w=w.dragging&&w.dragging.enabled()?w:this,w.dragging&&w.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var w=0,O=this._handlers.length;w<O;w++)this._handlers[w].disable()},whenReady:function(w,O){return this._loaded?w.call(O||this,{target:this}):this.on("load",w,O),this},_getMapPanePos:function(){return ee(this._mapPane)||new U(0,0)},_moved:function(){var w=this._getMapPanePos();return w&&!w.equals([0,0])},_getTopLeftPoint:function(w,O){var P=w&&O!==void 0?this._getNewPixelOrigin(w,O):this.getPixelOrigin();return P.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(w,O){var P=this.getSize()._divideBy(2);return this.project(w,O)._subtract(P)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(w,O,P){var j=this._getNewPixelOrigin(P,O);return this.project(w,O)._subtract(j)},_latLngBoundsToNewLayerBounds:function(w,O,P){var j=this._getNewPixelOrigin(P,O);return H([this.project(w.getSouthWest(),O)._subtract(j),this.project(w.getNorthWest(),O)._subtract(j),this.project(w.getSouthEast(),O)._subtract(j),this.project(w.getNorthEast(),O)._subtract(j)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(w){return this.latLngToLayerPoint(w).subtract(this._getCenterLayerPoint())},_limitCenter:function(w,O,P){if(!P)return w;var j=this.project(w,O),Z=this.getSize().divideBy(2),oe=new q(j.subtract(Z),j.add(Z)),ke=this._getBoundsOffset(oe,P,O);return Math.abs(ke.x)<=1&&Math.abs(ke.y)<=1?w:this.unproject(j.add(ke),O)},_limitOffset:function(w,O){if(!O)return w;var P=this.getPixelBounds(),j=new q(P.min.add(w),P.max.add(w));return w.add(this._getBoundsOffset(j,O))},_getBoundsOffset:function(w,O,P){var j=H(this.project(O.getNorthEast(),P),this.project(O.getSouthWest(),P)),Z=j.min.subtract(w.min),oe=j.max.subtract(w.max),ke=this._rebound(Z.x,-oe.x),Ne=this._rebound(Z.y,-oe.y);return new U(ke,Ne)},_rebound:function(w,O){return w+O>0?Math.round(w-O)/2:Math.max(0,Math.ceil(w))-Math.max(0,Math.floor(O))},_limitZoom:function(w){var O=this.getMinZoom(),P=this.getMaxZoom(),j=lt.any3d?this.options.zoomSnap:1;return j&&(w=Math.round(w/j)*j),Math.max(O,Math.min(P,w))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Fe(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(w,O){var P=this._getCenterOffset(w)._trunc();return(O&&O.animate)!==!0&&!this.getSize().contains(P)?!1:(this.panBy(P,O),!0)},_createAnimProxy:function(){var w=this._proxy=St("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(w),this.on("zoomanim",function(O){var P=Xt,j=this._proxy.style[P];mt(this._proxy,this.project(O.center,O.zoom),this.getZoomScale(O.zoom,1)),j===this._proxy.style[P]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){ne(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var w=this.getCenter(),O=this.getZoom();mt(this._proxy,this.project(w,O),this.getZoomScale(O,1))},_catchTransitionEnd:function(w){this._animatingZoom&&w.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(w,O,P){if(this._animatingZoom)return!0;if(P=P||{},!this._zoomAnimated||P.animate===!1||this._nothingToAnimate()||Math.abs(O-this._zoom)>this.options.zoomAnimationThreshold)return!1;var j=this.getZoomScale(O),Z=this._getCenterOffset(w)._divideBy(1-1/j);return P.animate!==!0&&!this.getSize().contains(Z)?!1:(N(function(){this._moveStart(!0,P.noMoveStart||!1)._animateZoom(w,O,!0)},this),!0)},_animateZoom:function(w,O,P,j){this._mapPane&&(P&&(this._animatingZoom=!0,this._animateToCenter=w,this._animateToZoom=O,be(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:w,zoom:O,noUpdate:j}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(s(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Fe(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function Ao(w,O){return new Et(w,O)}var fn=D.extend({options:{position:"topright"},initialize:function(w){b(this,w)},getPosition:function(){return this.options.position},setPosition:function(w){var O=this._map;return O&&O.removeControl(this),this.options.position=w,O&&O.addControl(this),this},getContainer:function(){return this._container},addTo:function(w){this.remove(),this._map=w;var O=this._container=this.onAdd(w),P=this.getPosition(),j=w._controlCorners[P];return be(O,"leaflet-control"),P.indexOf("bottom")!==-1?j.insertBefore(O,j.firstChild):j.appendChild(O),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(ne(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(w){this._map&&w&&w.screenX>0&&w.screenY>0&&this._map.getContainer().focus()}}),xn=function(w){return new fn(w)};Et.include({addControl:function(w){return w.addTo(this),this},removeControl:function(w){return w.remove(),this},_initControlPos:function(){var w=this._controlCorners={},O="leaflet-",P=this._controlContainer=St("div",O+"control-container",this._container);function j(Z,oe){var ke=O+Z+" "+O+oe;w[Z+oe]=St("div",ke,P)}j("top","left"),j("top","right"),j("bottom","left"),j("bottom","right")},_clearControlPos:function(){for(var w in this._controlCorners)ne(this._controlCorners[w]);ne(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var fo=fn.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(w,O,P,j){return P<j?-1:j<P?1:0}},initialize:function(w,O,P){b(this,P),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var j in w)this._addLayer(w[j],j);for(j in O)this._addLayer(O[j],j,!0)},onAdd:function(w){this._initLayout(),this._update(),this._map=w,w.on("zoomend",this._checkDisabledLayers,this);for(var O=0;O<this._layers.length;O++)this._layers[O].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(w){return fn.prototype.addTo.call(this,w),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var w=0;w<this._layers.length;w++)this._layers[w].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(w,O){return this._addLayer(w,O),this._map?this._update():this},addOverlay:function(w,O){return this._addLayer(w,O,!0),this._map?this._update():this},removeLayer:function(w){w.off("add remove",this._onLayerChange,this);var O=this._getLayer(u(w));return O&&this._layers.splice(this._layers.indexOf(O),1),this._map?this._update():this},expand:function(){be(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var w=this._map.getSize().y-(this._container.offsetTop+50);return w<this._section.clientHeight?(be(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=w+"px"):Fe(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Fe(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var w="leaflet-control-layers",O=this._container=St("div",w),P=this.options.collapsed;O.setAttribute("aria-haspopup",!0),Dn(O),Zn(O);var j=this._section=St("section",w+"-list");P&&(this._map.on("click",this.collapse,this),vt(O,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var Z=this._layersLink=St("a",w+"-toggle",O);Z.href="#",Z.title="Layers",Z.setAttribute("role","button"),vt(Z,{keydown:function(oe){oe.keyCode===13&&this._expandSafely()},click:function(oe){qt(oe),this._expandSafely()}},this),P||this.expand(),this._baseLayersList=St("div",w+"-base",j),this._separator=St("div",w+"-separator",j),this._overlaysList=St("div",w+"-overlays",j),O.appendChild(j)},_getLayer:function(w){for(var O=0;O<this._layers.length;O++)if(this._layers[O]&&u(this._layers[O].layer)===w)return this._layers[O]},_addLayer:function(w,O,P){this._map&&w.on("add remove",this._onLayerChange,this),this._layers.push({layer:w,name:O,overlay:P}),this.options.sortLayers&&this._layers.sort(s(function(j,Z){return this.options.sortFunction(j.layer,Z.layer,j.name,Z.name)},this)),this.options.autoZIndex&&w.setZIndex&&(this._lastZIndex++,w.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ye(this._baseLayersList),ye(this._overlaysList),this._layerControlInputs=[];var w,O,P,j,Z=0;for(P=0;P<this._layers.length;P++)j=this._layers[P],this._addItem(j),O=O||j.overlay,w=w||!j.overlay,Z+=j.overlay?0:1;return this.options.hideSingleBase&&(w=w&&Z>1,this._baseLayersList.style.display=w?"":"none"),this._separator.style.display=O&&w?"":"none",this},_onLayerChange:function(w){this._handlingClick||this._update();var O=this._getLayer(u(w.target)),P=O.overlay?w.type==="add"?"overlayadd":"overlayremove":w.type==="add"?"baselayerchange":null;P&&this._map.fire(P,O)},_createRadioElement:function(w,O){var P='<input type="radio" class="leaflet-control-layers-selector" name="'+w+'"'+(O?' checked="checked"':"")+"/>",j=document.createElement("div");return j.innerHTML=P,j.firstChild},_addItem:function(w){var O=document.createElement("label"),P=this._map.hasLayer(w.layer),j;w.overlay?(j=document.createElement("input"),j.type="checkbox",j.className="leaflet-control-layers-selector",j.defaultChecked=P):j=this._createRadioElement("leaflet-base-layers_"+u(this),P),this._layerControlInputs.push(j),j.layerId=u(w.layer),vt(j,"click",this._onInputClick,this);var Z=document.createElement("span");Z.innerHTML=" "+w.name;var oe=document.createElement("span");O.appendChild(oe),oe.appendChild(j),oe.appendChild(Z);var ke=w.overlay?this._overlaysList:this._baseLayersList;return ke.appendChild(O),this._checkDisabledLayers(),O},_onInputClick:function(){if(!this._preventClick){var w=this._layerControlInputs,O,P,j=[],Z=[];this._handlingClick=!0;for(var oe=w.length-1;oe>=0;oe--)O=w[oe],P=this._getLayer(O.layerId).layer,O.checked?j.push(P):O.checked||Z.push(P);for(oe=0;oe<Z.length;oe++)this._map.hasLayer(Z[oe])&&this._map.removeLayer(Z[oe]);for(oe=0;oe<j.length;oe++)this._map.hasLayer(j[oe])||this._map.addLayer(j[oe]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var w=this._layerControlInputs,O,P,j=this._map.getZoom(),Z=w.length-1;Z>=0;Z--)O=w[Z],P=this._getLayer(O.layerId).layer,O.disabled=P.options.minZoom!==void 0&&j<P.options.minZoom||P.options.maxZoom!==void 0&&j>P.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var w=this._section;this._preventClick=!0,vt(w,"click",qt),this.expand();var O=this;setTimeout(function(){Mt(w,"click",qt),O._preventClick=!1})}}),Ro=function(w,O,P){return new fo(w,O,P)},Qn=fn.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(w){var O="leaflet-control-zoom",P=St("div",O+" leaflet-bar"),j=this.options;return this._zoomInButton=this._createButton(j.zoomInText,j.zoomInTitle,O+"-in",P,this._zoomIn),this._zoomOutButton=this._createButton(j.zoomOutText,j.zoomOutTitle,O+"-out",P,this._zoomOut),this._updateDisabled(),w.on("zoomend zoomlevelschange",this._updateDisabled,this),P},onRemove:function(w){w.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(w){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(w.shiftKey?3:1))},_zoomOut:function(w){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(w.shiftKey?3:1))},_createButton:function(w,O,P,j,Z){var oe=St("a",P,j);return oe.innerHTML=w,oe.href="#",oe.title=O,oe.setAttribute("role","button"),oe.setAttribute("aria-label",O),Dn(oe),vt(oe,"click",$n),vt(oe,"click",Z,this),vt(oe,"click",this._refocusOnMap,this),oe},_updateDisabled:function(){var w=this._map,O="leaflet-disabled";Fe(this._zoomInButton,O),Fe(this._zoomOutButton,O),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||w._zoom===w.getMinZoom())&&(be(this._zoomOutButton,O),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||w._zoom===w.getMaxZoom())&&(be(this._zoomInButton,O),this._zoomInButton.setAttribute("aria-disabled","true"))}});Et.mergeOptions({zoomControl:!0}),Et.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Qn,this.addControl(this.zoomControl))});var Io=function(w){return new Qn(w)},mo=fn.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(w){var O="leaflet-control-scale",P=St("div",O),j=this.options;return this._addScales(j,O+"-line",P),w.on(j.updateWhenIdle?"moveend":"move",this._update,this),w.whenReady(this._update,this),P},onRemove:function(w){w.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(w,O,P){w.metric&&(this._mScale=St("div",O,P)),w.imperial&&(this._iScale=St("div",O,P))},_update:function(){var w=this._map,O=w.getSize().y/2,P=w.distance(w.containerPointToLatLng([0,O]),w.containerPointToLatLng([this.options.maxWidth,O]));this._updateScales(P)},_updateScales:function(w){this.options.metric&&w&&this._updateMetric(w),this.options.imperial&&w&&this._updateImperial(w)},_updateMetric:function(w){var O=this._getRoundNum(w),P=O<1e3?O+" m":O/1e3+" km";this._updateScale(this._mScale,P,O/w)},_updateImperial:function(w){var O=w*3.2808399,P,j,Z;O>5280?(P=O/5280,j=this._getRoundNum(P),this._updateScale(this._iScale,j+" mi",j/P)):(Z=this._getRoundNum(O),this._updateScale(this._iScale,Z+" ft",Z/O))},_updateScale:function(w,O,P){w.style.width=Math.round(this.options.maxWidth*P)+"px",w.innerHTML=O},_getRoundNum:function(w){var O=Math.pow(10,(Math.floor(w)+"").length-1),P=w/O;return P=P>=10?10:P>=5?5:P>=3?3:P>=2?2:1,O*P}}),No=function(w){return new mo(w)},Lo='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',eo=fn.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(lt.inlineSvg?Lo+" ":"")+"Leaflet</a>"},initialize:function(w){b(this,w),this._attributions={}},onAdd:function(w){w.attributionControl=this,this._container=St("div","leaflet-control-attribution"),Dn(this._container);for(var O in w._layers)w._layers[O].getAttribution&&this.addAttribution(w._layers[O].getAttribution());return this._update(),w.on("layeradd",this._addAttribution,this),this._container},onRemove:function(w){w.off("layeradd",this._addAttribution,this)},_addAttribution:function(w){w.layer.getAttribution&&(this.addAttribution(w.layer.getAttribution()),w.layer.once("remove",function(){this.removeAttribution(w.layer.getAttribution())},this))},setPrefix:function(w){return this.options.prefix=w,this._update(),this},addAttribution:function(w){return w?(this._attributions[w]||(this._attributions[w]=0),this._attributions[w]++,this._update(),this):this},removeAttribution:function(w){return w?(this._attributions[w]&&(this._attributions[w]--,this._update()),this):this},_update:function(){if(this._map){var w=[];for(var O in this._attributions)this._attributions[O]&&w.push(O);var P=[];this.options.prefix&&P.push(this.options.prefix),w.length&&P.push(w.join(", ")),this._container.innerHTML=P.join(' <span aria-hidden="true">|</span> ')}}});Et.mergeOptions({attributionControl:!0}),Et.addInitHook(function(){this.options.attributionControl&&new eo().addTo(this)});var Oo=function(w){return new eo(w)};fn.Layers=fo,fn.Zoom=Qn,fn.Scale=mo,fn.Attribution=eo,xn.layers=Ro,xn.zoom=Io,xn.scale=No,xn.attribution=Oo;var te=D.extend({initialize:function(w){this._map=w},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});te.addTo=function(w,O){return w.addHandler(O,this),this};var Te={Events:B},He=lt.touch?"touchstart mousedown":"mousedown",Ke=K.extend({options:{clickTolerance:3},initialize:function(w,O,P,j){b(this,j),this._element=w,this._dragStartTarget=O||w,this._preventOutline=P},enable:function(){this._enabled||(vt(this._dragStartTarget,He,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ke._dragging===this&&this.finishDrag(!0),Mt(this._dragStartTarget,He,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(w){if(this._enabled&&(this._moved=!1,!Se(this._element,"leaflet-zoom-anim"))){if(w.touches&&w.touches.length!==1){Ke._dragging===this&&this.finishDrag();return}if(!(Ke._dragging||w.shiftKey||w.which!==1&&w.button!==1&&!w.touches)&&(Ke._dragging=this,this._preventOutline&&Ft(this._element),it(),ae(),!this._moving)){this.fire("down");var O=w.touches?w.touches[0]:w,P=Fn(this._element);this._startPoint=new U(O.clientX,O.clientY),this._startPos=ee(this._element),this._parentScale=Kn(P);var j=w.type==="mousedown";vt(document,j?"mousemove":"touchmove",this._onMove,this),vt(document,j?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(w){if(this._enabled){if(w.touches&&w.touches.length>1){this._moved=!0;return}var O=w.touches&&w.touches.length===1?w.touches[0]:w,P=new U(O.clientX,O.clientY)._subtract(this._startPoint);!P.x&&!P.y||Math.abs(P.x)+Math.abs(P.y)<this.options.clickTolerance||(P.x/=this._parentScale.x,P.y/=this._parentScale.y,qt(w),this._moved||(this.fire("dragstart"),this._moved=!0,be(document.body,"leaflet-dragging"),this._lastTarget=w.target||w.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),be(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(P),this._moving=!0,this._lastEvent=w,this._updatePosition())}},_updatePosition:function(){var w={originalEvent:this._lastEvent};this.fire("predrag",w),_t(this._element,this._newPos),this.fire("drag",w)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(w){Fe(document.body,"leaflet-dragging"),this._lastTarget&&(Fe(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Mt(document,"mousemove touchmove",this._onMove,this),Mt(document,"mouseup touchend touchcancel",this._onUp,this),yt(),_e();var O=this._moved&&this._moving;this._moving=!1,Ke._dragging=!1,O&&this.fire("dragend",{noInertia:w,distance:this._newPos.distanceTo(this._startPos)})}});function nt(w,O,P){var j,Z=[1,4,2,8],oe,ke,Ne,De,Je,st,gt,Tt;for(oe=0,st=w.length;oe<st;oe++)w[oe]._code=Bn(w[oe],O);for(Ne=0;Ne<4;Ne++){for(gt=Z[Ne],j=[],oe=0,st=w.length,ke=st-1;oe<st;ke=oe++)De=w[oe],Je=w[ke],De._code&gt?Je._code&gt||(Tt=_o(Je,De,gt,O,P),Tt._code=Bn(Tt,O),j.push(Tt)):(Je._code&gt&&(Tt=_o(Je,De,gt,O,P),Tt._code=Bn(Tt,O),j.push(Tt)),j.push(De));w=j}return w}function dt(w,O){var P,j,Z,oe,ke,Ne,De,Je,st;if(!w||w.length===0)throw new Error("latlngs not passed");gn(w)||(console.warn("latlngs are not flat! Only the first ring will be used"),w=w[0]);var gt=J([0,0]),Tt=Y(w),tn=Tt.getNorthWest().distanceTo(Tt.getSouthWest())*Tt.getNorthEast().distanceTo(Tt.getNorthWest());tn<1700&&(gt=Dt(w));var Kt=w.length,bn=[];for(P=0;P<Kt;P++){var on=J(w[P]);bn.push(O.project(J([on.lat-gt.lat,on.lng-gt.lng])))}for(Ne=De=Je=0,P=0,j=Kt-1;P<Kt;j=P++)Z=bn[P],oe=bn[j],ke=Z.y*oe.x-oe.y*Z.x,De+=(Z.x+oe.x)*ke,Je+=(Z.y+oe.y)*ke,Ne+=ke*3;Ne===0?st=bn[0]:st=[De/Ne,Je/Ne];var Gn=O.unproject(W(st));return J([Gn.lat+gt.lat,Gn.lng+gt.lng])}function Dt(w){for(var O=0,P=0,j=0,Z=0;Z<w.length;Z++){var oe=J(w[Z]);O+=oe.lat,P+=oe.lng,j++}return J([O/j,P/j])}var Gt={__proto__:null,clipPolygon:nt,polygonCenter:dt,centroid:Dt};function mn(w,O){if(!O||!w.length)return w.slice();var P=O*O;return w=en(w,P),w=Sn(w,P),w}function Bt(w,O,P){return Math.sqrt(no(w,O,P,!0))}function Qt(w,O,P){return no(w,O,P)}function Sn(w,O){var P=w.length,j=typeof Uint8Array!=void 0+""?Uint8Array:Array,Z=new j(P);Z[0]=Z[P-1]=1,Pn(w,Z,O,0,P-1);var oe,ke=[];for(oe=0;oe<P;oe++)Z[oe]&&ke.push(w[oe]);return ke}function Pn(w,O,P,j,Z){var oe=0,ke,Ne,De;for(Ne=j+1;Ne<=Z-1;Ne++)De=no(w[Ne],w[j],w[Z],!0),De>oe&&(ke=Ne,oe=De);oe>P&&(O[ke]=1,Pn(w,O,P,j,ke),Pn(w,O,P,ke,Z))}function en(w,O){for(var P=[w[0]],j=1,Z=0,oe=w.length;j<oe;j++)pi(w[j],w[Z])>O&&(P.push(w[j]),Z=j);return Z<oe-1&&P.push(w[oe-1]),P}var Ho;function jo(w,O,P,j,Z){var oe=j?Ho:Bn(w,P),ke=Bn(O,P),Ne,De,Je;for(Ho=ke;;){if(!(oe|ke))return[w,O];if(oe&ke)return!1;Ne=oe||ke,De=_o(w,O,Ne,P,Z),Je=Bn(De,P),Ne===oe?(w=De,oe=Je):(O=De,ke=Je)}}function _o(w,O,P,j,Z){var oe=O.x-w.x,ke=O.y-w.y,Ne=j.min,De=j.max,Je,st;return P&8?(Je=w.x+oe*(De.y-w.y)/ke,st=De.y):P&4?(Je=w.x+oe*(Ne.y-w.y)/ke,st=Ne.y):P&2?(Je=De.x,st=w.y+ke*(De.x-w.x)/oe):P&1&&(Je=Ne.x,st=w.y+ke*(Ne.x-w.x)/oe),new U(Je,st,Z)}function Bn(w,O){var P=0;return w.x<O.min.x?P|=1:w.x>O.max.x&&(P|=2),w.y<O.min.y?P|=4:w.y>O.max.y&&(P|=8),P}function pi(w,O){var P=O.x-w.x,j=O.y-w.y;return P*P+j*j}function no(w,O,P,j){var Z=O.x,oe=O.y,ke=P.x-Z,Ne=P.y-oe,De=ke*ke+Ne*Ne,Je;return De>0&&(Je=((w.x-Z)*ke+(w.y-oe)*Ne)/De,Je>1?(Z=P.x,oe=P.y):Je>0&&(Z+=ke*Je,oe+=Ne*Je)),ke=w.x-Z,Ne=w.y-oe,j?ke*ke+Ne*Ne:new U(Z,oe)}function gn(w){return!E(w[0])||typeof w[0][0]!="object"&&typeof w[0][0]<"u"}function Vo(w){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),gn(w)}function qo(w,O){var P,j,Z,oe,ke,Ne,De,Je;if(!w||w.length===0)throw new Error("latlngs not passed");gn(w)||(console.warn("latlngs are not flat! Only the first ring will be used"),w=w[0]);var st=J([0,0]),gt=Y(w),Tt=gt.getNorthWest().distanceTo(gt.getSouthWest())*gt.getNorthEast().distanceTo(gt.getNorthWest());Tt<1700&&(st=Dt(w));var tn=w.length,Kt=[];for(P=0;P<tn;P++){var bn=J(w[P]);Kt.push(O.project(J([bn.lat-st.lat,bn.lng-st.lng])))}for(P=0,j=0;P<tn-1;P++)j+=Kt[P].distanceTo(Kt[P+1])/2;if(j===0)Je=Kt[0];else for(P=0,oe=0;P<tn-1;P++)if(ke=Kt[P],Ne=Kt[P+1],Z=ke.distanceTo(Ne),oe+=Z,oe>j){De=(oe-j)/Z,Je=[Ne.x-De*(Ne.x-ke.x),Ne.y-De*(Ne.y-ke.y)];break}var on=O.unproject(W(Je));return J([on.lat+st.lat,on.lng+st.lng])}var gi={__proto__:null,simplify:mn,pointToSegmentDistance:Bt,closestPointOnSegment:Qt,clipSegment:jo,_getEdgeIntersection:_o,_getBitCode:Bn,_sqClosestPointOnSegment:no,isFlat:gn,_flat:Vo,polylineCenter:qo},Mo={project:function(w){return new U(w.lng,w.lat)},unproject:function(w){return new V(w.y,w.x)},bounds:new q([-180,-90],[180,90])},Fo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new q([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(w){var O=Math.PI/180,P=this.R,j=w.lat*O,Z=this.R_MINOR/P,oe=Math.sqrt(1-Z*Z),ke=oe*Math.sin(j),Ne=Math.tan(Math.PI/4-j/2)/Math.pow((1-ke)/(1+ke),oe/2);return j=-P*Math.log(Math.max(Ne,1e-10)),new U(w.lng*O*P,j)},unproject:function(w){for(var O=180/Math.PI,P=this.R,j=this.R_MINOR/P,Z=Math.sqrt(1-j*j),oe=Math.exp(-w.y/P),ke=Math.PI/2-2*Math.atan(oe),Ne=0,De=.1,Je;Ne<15&&Math.abs(De)>1e-7;Ne++)Je=Z*Math.sin(ke),Je=Math.pow((1-Je)/(1+Je),Z/2),De=Math.PI/2-2*Math.atan(oe*Je)-ke,ke+=De;return new V(ke*O,w.x*O/P)}},bi={__proto__:null,LonLat:Mo,Mercator:Fo,SphericalMercator:ce},vi=r({},X,{code:"EPSG:3395",projection:Fo,transformation:function(){var w=.5/(Math.PI*Fo.R);return se(w,.5,-w,.5)}()}),Go=r({},X,{code:"EPSG:4326",projection:Mo,transformation:se(1/180,1,-1/180,.5)}),yi=r({},Q,{projection:Mo,transformation:se(1,0,-1,0),scale:function(w){return Math.pow(2,w)},zoom:function(w){return Math.log(w)/Math.LN2},distance:function(w,O){var P=O.lng-w.lng,j=O.lat-w.lat;return Math.sqrt(P*P+j*j)},infinite:!0});Q.Earth=X,Q.EPSG3395=vi,Q.EPSG3857=me,Q.EPSG900913=ue,Q.EPSG4326=Go,Q.Simple=yi;var kn=K.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(w){return w.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(w){return w&&w.removeLayer(this),this},getPane:function(w){return this._map.getPane(w?this.options[w]||w:this.options.pane)},addInteractiveTarget:function(w){return this._map._targets[u(w)]=this,this},removeInteractiveTarget:function(w){return delete this._map._targets[u(w)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(w){var O=w.target;if(O.hasLayer(this)){if(this._map=O,this._zoomAnimated=O._zoomAnimated,this.getEvents){var P=this.getEvents();O.on(P,this),this.once("remove",function(){O.off(P,this)},this)}this.onAdd(O),this.fire("add"),O.fire("layeradd",{layer:this})}}});Et.include({addLayer:function(w){if(!w._layerAdd)throw new Error("The provided object is not a Layer.");var O=u(w);return this._layers[O]?this:(this._layers[O]=w,w._mapToAdd=this,w.beforeAdd&&w.beforeAdd(this),this.whenReady(w._layerAdd,w),this)},removeLayer:function(w){var O=u(w);return this._layers[O]?(this._loaded&&w.onRemove(this),delete this._layers[O],this._loaded&&(this.fire("layerremove",{layer:w}),w.fire("remove")),w._map=w._mapToAdd=null,this):this},hasLayer:function(w){return u(w)in this._layers},eachLayer:function(w,O){for(var P in this._layers)w.call(O,this._layers[P]);return this},_addLayers:function(w){w=w?E(w)?w:[w]:[];for(var O=0,P=w.length;O<P;O++)this.addLayer(w[O])},_addZoomLimit:function(w){(!isNaN(w.options.maxZoom)||!isNaN(w.options.minZoom))&&(this._zoomBoundLayers[u(w)]=w,this._updateZoomLevels())},_removeZoomLimit:function(w){var O=u(w);this._zoomBoundLayers[O]&&(delete this._zoomBoundLayers[O],this._updateZoomLevels())},_updateZoomLevels:function(){var w=1/0,O=-1/0,P=this._getZoomSpan();for(var j in this._zoomBoundLayers){var Z=this._zoomBoundLayers[j].options;w=Z.minZoom===void 0?w:Math.min(w,Z.minZoom),O=Z.maxZoom===void 0?O:Math.max(O,Z.maxZoom)}this._layersMaxZoom=O===-1/0?void 0:O,this._layersMinZoom=w===1/0?void 0:w,P!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Un=kn.extend({initialize:function(w,O){b(this,O),this._layers={};var P,j;if(w)for(P=0,j=w.length;P<j;P++)this.addLayer(w[P])},addLayer:function(w){var O=this.getLayerId(w);return this._layers[O]=w,this._map&&this._map.addLayer(w),this},removeLayer:function(w){var O=w in this._layers?w:this.getLayerId(w);return this._map&&this._layers[O]&&this._map.removeLayer(this._layers[O]),delete this._layers[O],this},hasLayer:function(w){var O=typeof w=="number"?w:this.getLayerId(w);return O in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(w){var O=Array.prototype.slice.call(arguments,1),P,j;for(P in this._layers)j=this._layers[P],j[w]&&j[w].apply(j,O);return this},onAdd:function(w){this.eachLayer(w.addLayer,w)},onRemove:function(w){this.eachLayer(w.removeLayer,w)},eachLayer:function(w,O){for(var P in this._layers)w.call(O,this._layers[P]);return this},getLayer:function(w){return this._layers[w]},getLayers:function(){var w=[];return this.eachLayer(w.push,w),w},setZIndex:function(w){return this.invoke("setZIndex",w)},getLayerId:function(w){return u(w)}}),ki=function(w,O){return new Un(w,O)},An=Un.extend({addLayer:function(w){return this.hasLayer(w)?this:(w.addEventParent(this),Un.prototype.addLayer.call(this,w),this.fire("layeradd",{layer:w}))},removeLayer:function(w){return this.hasLayer(w)?(w in this._layers&&(w=this._layers[w]),w.removeEventParent(this),Un.prototype.removeLayer.call(this,w),this.fire("layerremove",{layer:w})):this},setStyle:function(w){return this.invoke("setStyle",w)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var w=new z;for(var O in this._layers){var P=this._layers[O];w.extend(P.getBounds?P.getBounds():P.getLatLng())}return w}}),Ci=function(w,O){return new An(w,O)},Hn=D.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(w){b(this,w)},createIcon:function(w){return this._createIcon("icon",w)},createShadow:function(w){return this._createIcon("shadow",w)},_createIcon:function(w,O){var P=this._getIconUrl(w);if(!P){if(w==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var j=this._createImg(P,O&&O.tagName==="IMG"?O:null);return this._setIconStyles(j,w),(this.options.crossOrigin||this.options.crossOrigin==="")&&(j.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),j},_setIconStyles:function(w,O){var P=this.options,j=P[O+"Size"];typeof j=="number"&&(j=[j,j]);var Z=W(j),oe=W(O==="shadow"&&P.shadowAnchor||P.iconAnchor||Z&&Z.divideBy(2,!0));w.className="leaflet-marker-"+O+" "+(P.className||""),oe&&(w.style.marginLeft=-oe.x+"px",w.style.marginTop=-oe.y+"px"),Z&&(w.style.width=Z.x+"px",w.style.height=Z.y+"px")},_createImg:function(w,O){return O=O||document.createElement("img"),O.src=w,O},_getIconUrl:function(w){return lt.retina&&this.options[w+"RetinaUrl"]||this.options[w+"Url"]}});function wi(w){return new Hn(w)}var oo=Hn.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(w){return typeof oo.imagePath!="string"&&(oo.imagePath=this._detectIconPath()),(this.options.imagePath||oo.imagePath)+Hn.prototype._getIconUrl.call(this,w)},_stripUrl:function(w){var O=function(P,j,Z){var oe=j.exec(P);return oe&&oe[Z]};return w=O(w,/^url\((['"])?(.+)\1\)$/,2),w&&O(w,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var w=St("div","leaflet-default-icon-path",document.body),O=pn(w,"background-image")||pn(w,"backgroundImage");if(document.body.removeChild(w),O=this._stripUrl(O),O)return O;var P=document.querySelector('link[href$="leaflet.css"]');return P?P.href.substring(0,P.href.length-11-1):""}}),Ko=te.extend({initialize:function(w){this._marker=w},addHooks:function(){var w=this._marker._icon;this._draggable||(this._draggable=new Ke(w,w,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),be(w,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Fe(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(w){var O=this._marker,P=O._map,j=this._marker.options.autoPanSpeed,Z=this._marker.options.autoPanPadding,oe=ee(O._icon),ke=P.getPixelBounds(),Ne=P.getPixelOrigin(),De=H(ke.min._subtract(Ne).add(Z),ke.max._subtract(Ne).subtract(Z));if(!De.contains(oe)){var Je=W((Math.max(De.max.x,oe.x)-De.max.x)/(ke.max.x-De.max.x)-(Math.min(De.min.x,oe.x)-De.min.x)/(ke.min.x-De.min.x),(Math.max(De.max.y,oe.y)-De.max.y)/(ke.max.y-De.max.y)-(Math.min(De.min.y,oe.y)-De.min.y)/(ke.min.y-De.min.y)).multiplyBy(j);P.panBy(Je,{animate:!1}),this._draggable._newPos._add(Je),this._draggable._startPos._add(Je),_t(O._icon,this._draggable._newPos),this._onDrag(w),this._panRequest=N(this._adjustPan.bind(this,w))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(w){this._marker.options.autoPan&&(M(this._panRequest),this._panRequest=N(this._adjustPan.bind(this,w)))},_onDrag:function(w){var O=this._marker,P=O._shadow,j=ee(O._icon),Z=O._map.layerPointToLatLng(j);P&&_t(P,j),O._latlng=Z,w.latlng=Z,w.oldLatLng=this._oldLatLng,O.fire("move",w).fire("drag",w)},_onDragEnd:function(w){M(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",w)}}),ho=kn.extend({options:{icon:new oo,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(w,O){b(this,O),this._latlng=J(w)},onAdd:function(w){this._zoomAnimated=this._zoomAnimated&&w.options.markerZoomAnimation,this._zoomAnimated&&w.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(w){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&w.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(w){var O=this._latlng;return this._latlng=J(w),this.update(),this.fire("move",{oldLatLng:O,latlng:this._latlng})},setZIndexOffset:function(w){return this.options.zIndexOffset=w,this.update()},getIcon:function(){return this.options.icon},setIcon:function(w){return this.options.icon=w,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var w=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(w)}return this},_initIcon:function(){var w=this.options,O="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),P=w.icon.createIcon(this._icon),j=!1;P!==this._icon&&(this._icon&&this._removeIcon(),j=!0,w.title&&(P.title=w.title),P.tagName==="IMG"&&(P.alt=w.alt||"")),be(P,O),w.keyboard&&(P.tabIndex="0",P.setAttribute("role","button")),this._icon=P,w.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&vt(P,"focus",this._panOnFocus,this);var Z=w.icon.createShadow(this._shadow),oe=!1;Z!==this._shadow&&(this._removeShadow(),oe=!0),Z&&(be(Z,O),Z.alt=""),this._shadow=Z,w.opacity<1&&this._updateOpacity(),j&&this.getPane().appendChild(this._icon),this._initInteraction(),Z&&oe&&this.getPane(w.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Mt(this._icon,"focus",this._panOnFocus,this),ne(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&ne(this._shadow),this._shadow=null},_setPos:function(w){this._icon&&_t(this._icon,w),this._shadow&&_t(this._shadow,w),this._zIndex=w.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(w){this._icon&&(this._icon.style.zIndex=this._zIndex+w)},_animateZoom:function(w){var O=this._map._latLngToNewLayerPoint(this._latlng,w.zoom,w.center).round();this._setPos(O)},_initInteraction:function(){if(this.options.interactive&&(be(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Ko)){var w=this.options.draggable;this.dragging&&(w=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Ko(this),w&&this.dragging.enable()}},setOpacity:function(w){return this.options.opacity=w,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var w=this.options.opacity;this._icon&&Ye(this._icon,w),this._shadow&&Ye(this._shadow,w)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var w=this._map;if(w){var O=this.options.icon.options,P=O.iconSize?W(O.iconSize):W(0,0),j=O.iconAnchor?W(O.iconAnchor):W(0,0);w.panInside(this._latlng,{paddingTopLeft:j,paddingBottomRight:P.subtract(j)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Si(w,O){return new ho(w,O)}var On=kn.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(w){this._renderer=w.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(w){return b(this,w),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&w&&Object.prototype.hasOwnProperty.call(w,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),po=On.extend({options:{fill:!0,radius:10},initialize:function(w,O){b(this,O),this._latlng=J(w),this._radius=this.options.radius},setLatLng:function(w){var O=this._latlng;return this._latlng=J(w),this.redraw(),this.fire("move",{oldLatLng:O,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(w){return this.options.radius=this._radius=w,this.redraw()},getRadius:function(){return this._radius},setStyle:function(w){var O=w&&w.radius||this._radius;return On.prototype.setStyle.call(this,w),this.setRadius(O),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var w=this._radius,O=this._radiusY||w,P=this._clickTolerance(),j=[w+P,O+P];this._pxBounds=new q(this._point.subtract(j),this._point.add(j))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(w){return w.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ti(w,O){return new po(w,O)}var Do=po.extend({initialize:function(w,O,P){if(typeof O=="number"&&(O=r({},P,{radius:O})),b(this,O),this._latlng=J(w),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(w){return this._mRadius=w,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var w=[this._radius,this._radiusY||this._radius];return new z(this._map.layerPointToLatLng(this._point.subtract(w)),this._map.layerPointToLatLng(this._point.add(w)))},setStyle:On.prototype.setStyle,_project:function(){var w=this._latlng.lng,O=this._latlng.lat,P=this._map,j=P.options.crs;if(j.distance===X.distance){var Z=Math.PI/180,oe=this._mRadius/X.R/Z,ke=P.project([O+oe,w]),Ne=P.project([O-oe,w]),De=ke.add(Ne).divideBy(2),Je=P.unproject(De).lat,st=Math.acos((Math.cos(oe*Z)-Math.sin(O*Z)*Math.sin(Je*Z))/(Math.cos(O*Z)*Math.cos(Je*Z)))/Z;(isNaN(st)||st===0)&&(st=oe/Math.cos(Math.PI/180*O)),this._point=De.subtract(P.getPixelOrigin()),this._radius=isNaN(st)?0:De.x-P.project([Je,w-st]).x,this._radiusY=De.y-ke.y}else{var gt=j.unproject(j.project(this._latlng).subtract([this._mRadius,0]));this._point=P.latLngToLayerPoint(this._latlng),this._radius=this._point.x-P.latLngToLayerPoint(gt).x}this._updateBounds()}});function Ei(w,O,P){return new Do(w,O,P)}var Rn=On.extend({options:{smoothFactor:1,noClip:!1},initialize:function(w,O){b(this,O),this._setLatLngs(w)},getLatLngs:function(){return this._latlngs},setLatLngs:function(w){return this._setLatLngs(w),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(w){for(var O=1/0,P=null,j=no,Z,oe,ke=0,Ne=this._parts.length;ke<Ne;ke++)for(var De=this._parts[ke],Je=1,st=De.length;Je<st;Je++){Z=De[Je-1],oe=De[Je];var gt=j(w,Z,oe,!0);gt<O&&(O=gt,P=j(w,Z,oe))}return P&&(P.distance=Math.sqrt(O)),P},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return qo(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(w,O){return O=O||this._defaultShape(),w=J(w),O.push(w),this._bounds.extend(w),this.redraw()},_setLatLngs:function(w){this._bounds=new z,this._latlngs=this._convertLatLngs(w)},_defaultShape:function(){return gn(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(w){for(var O=[],P=gn(w),j=0,Z=w.length;j<Z;j++)P?(O[j]=J(w[j]),this._bounds.extend(O[j])):O[j]=this._convertLatLngs(w[j]);return O},_project:function(){var w=new q;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,w),this._bounds.isValid()&&w.isValid()&&(this._rawPxBounds=w,this._updateBounds())},_updateBounds:function(){var w=this._clickTolerance(),O=new U(w,w);this._rawPxBounds&&(this._pxBounds=new q([this._rawPxBounds.min.subtract(O),this._rawPxBounds.max.add(O)]))},_projectLatlngs:function(w,O,P){var j=w[0]instanceof V,Z=w.length,oe,ke;if(j){for(ke=[],oe=0;oe<Z;oe++)ke[oe]=this._map.latLngToLayerPoint(w[oe]),P.extend(ke[oe]);O.push(ke)}else for(oe=0;oe<Z;oe++)this._projectLatlngs(w[oe],O,P)},_clipPoints:function(){var w=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(w))){if(this.options.noClip){this._parts=this._rings;return}var O=this._parts,P,j,Z,oe,ke,Ne,De;for(P=0,Z=0,oe=this._rings.length;P<oe;P++)for(De=this._rings[P],j=0,ke=De.length;j<ke-1;j++)Ne=jo(De[j],De[j+1],w,j,!0),Ne&&(O[Z]=O[Z]||[],O[Z].push(Ne[0]),(Ne[1]!==De[j+1]||j===ke-2)&&(O[Z].push(Ne[1]),Z++))}},_simplifyPoints:function(){for(var w=this._parts,O=this.options.smoothFactor,P=0,j=w.length;P<j;P++)w[P]=mn(w[P],O)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(w,O){var P,j,Z,oe,ke,Ne,De=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(w))return!1;for(P=0,oe=this._parts.length;P<oe;P++)for(Ne=this._parts[P],j=0,ke=Ne.length,Z=ke-1;j<ke;Z=j++)if(!(!O&&j===0)&&Bt(w,Ne[Z],Ne[j])<=De)return!0;return!1}});function $i(w,O){return new Rn(w,O)}Rn._flat=Vo;var jn=Rn.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return dt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(w){var O=Rn.prototype._convertLatLngs.call(this,w),P=O.length;return P>=2&&O[0]instanceof V&&O[0].equals(O[P-1])&&O.pop(),O},_setLatLngs:function(w){Rn.prototype._setLatLngs.call(this,w),gn(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return gn(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var w=this._renderer._bounds,O=this.options.weight,P=new U(O,O);if(w=new q(w.min.subtract(P),w.max.add(P)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(w))){if(this.options.noClip){this._parts=this._rings;return}for(var j=0,Z=this._rings.length,oe;j<Z;j++)oe=nt(this._rings[j],w,!0),oe.length&&this._parts.push(oe)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(w){var O=!1,P,j,Z,oe,ke,Ne,De,Je;if(!this._pxBounds||!this._pxBounds.contains(w))return!1;for(oe=0,De=this._parts.length;oe<De;oe++)for(P=this._parts[oe],ke=0,Je=P.length,Ne=Je-1;ke<Je;Ne=ke++)j=P[ke],Z=P[Ne],j.y>w.y!=Z.y>w.y&&w.x<(Z.x-j.x)*(w.y-j.y)/(Z.y-j.y)+j.x&&(O=!O);return O||Rn.prototype._containsPoint.call(this,w,!0)}});function Ai(w,O){return new jn(w,O)}var In=An.extend({initialize:function(w,O){b(this,O),this._layers={},w&&this.addData(w)},addData:function(w){var O=E(w)?w:w.features,P,j,Z;if(O){for(P=0,j=O.length;P<j;P++)Z=O[P],(Z.geometries||Z.geometry||Z.features||Z.coordinates)&&this.addData(Z);return this}var oe=this.options;if(oe.filter&&!oe.filter(w))return this;var ke=go(w,oe);return ke?(ke.feature=yo(w),ke.defaultOptions=ke.options,this.resetStyle(ke),oe.onEachFeature&&oe.onEachFeature(w,ke),this.addLayer(ke)):this},resetStyle:function(w){return w===void 0?this.eachLayer(this.resetStyle,this):(w.options=r({},w.defaultOptions),this._setLayerStyle(w,this.options.style),this)},setStyle:function(w){return this.eachLayer(function(O){this._setLayerStyle(O,w)},this)},_setLayerStyle:function(w,O){w.setStyle&&(typeof O=="function"&&(O=O(w.feature)),w.setStyle(O))}});function go(w,O){var P=w.type==="Feature"?w.geometry:w,j=P?P.coordinates:null,Z=[],oe=O&&O.pointToLayer,ke=O&&O.coordsToLatLng||xo,Ne,De,Je,st;if(!j&&!P)return null;switch(P.type){case"Point":return Ne=ke(j),Yo(oe,w,Ne,O);case"MultiPoint":for(Je=0,st=j.length;Je<st;Je++)Ne=ke(j[Je]),Z.push(Yo(oe,w,Ne,O));return new An(Z);case"LineString":case"MultiLineString":return De=bo(j,P.type==="LineString"?0:1,ke),new Rn(De,O);case"Polygon":case"MultiPolygon":return De=bo(j,P.type==="Polygon"?1:2,ke),new jn(De,O);case"GeometryCollection":for(Je=0,st=P.geometries.length;Je<st;Je++){var gt=go({geometry:P.geometries[Je],type:"Feature",properties:w.properties},O);gt&&Z.push(gt)}return new An(Z);case"FeatureCollection":for(Je=0,st=P.features.length;Je<st;Je++){var Tt=go(P.features[Je],O);Tt&&Z.push(Tt)}return new An(Z);default:throw new Error("Invalid GeoJSON object.")}}function Yo(w,O,P,j){return w?w(O,P):new ho(P,j&&j.markersInheritOptions&&j)}function xo(w){return new V(w[1],w[0],w[2])}function bo(w,O,P){for(var j=[],Z=0,oe=w.length,ke;Z<oe;Z++)ke=O?bo(w[Z],O-1,P):(P||xo)(w[Z]),j.push(ke);return j}function Po(w,O){return w=J(w),w.alt!==void 0?[h(w.lng,O),h(w.lat,O),h(w.alt,O)]:[h(w.lng,O),h(w.lat,O)]}function vo(w,O,P,j){for(var Z=[],oe=0,ke=w.length;oe<ke;oe++)Z.push(O?vo(w[oe],gn(w[oe])?0:O-1,P,j):Po(w[oe],j));return!O&&P&&Z.length>0&&Z.push(Z[0].slice()),Z}function Vn(w,O){return w.feature?r({},w.feature,{geometry:O}):yo(O)}function yo(w){return w.type==="Feature"||w.type==="FeatureCollection"?w:{type:"Feature",properties:{},geometry:w}}var Bo={toGeoJSON:function(w){return Vn(this,{type:"Point",coordinates:Po(this.getLatLng(),w)})}};ho.include(Bo),Do.include(Bo),po.include(Bo),Rn.include({toGeoJSON:function(w){var O=!gn(this._latlngs),P=vo(this._latlngs,O?1:0,!1,w);return Vn(this,{type:(O?"Multi":"")+"LineString",coordinates:P})}}),jn.include({toGeoJSON:function(w){var O=!gn(this._latlngs),P=O&&!gn(this._latlngs[0]),j=vo(this._latlngs,P?2:O?1:0,!0,w);return O||(j=[j]),Vn(this,{type:(P?"Multi":"")+"Polygon",coordinates:j})}}),Un.include({toMultiPoint:function(w){var O=[];return this.eachLayer(function(P){O.push(P.toGeoJSON(w).geometry.coordinates)}),Vn(this,{type:"MultiPoint",coordinates:O})},toGeoJSON:function(w){var O=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(O==="MultiPoint")return this.toMultiPoint(w);var P=O==="GeometryCollection",j=[];return this.eachLayer(function(Z){if(Z.toGeoJSON){var oe=Z.toGeoJSON(w);if(P)j.push(oe.geometry);else{var ke=yo(oe);ke.type==="FeatureCollection"?j.push.apply(j,ke.features):j.push(ke)}}}),P?Vn(this,{geometries:j,type:"GeometryCollection"}):{type:"FeatureCollection",features:j}}});function Jo(w,O){return new In(w,O)}var Ri=Jo,ko=kn.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(w,O,P){this._url=w,this._bounds=Y(O),b(this,P)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(be(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){ne(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(w){return this.options.opacity=w,this._image&&this._updateOpacity(),this},setStyle:function(w){return w.opacity&&this.setOpacity(w.opacity),this},bringToFront:function(){return this._map&&le(this._image),this},bringToBack:function(){return this._map&&we(this._image),this},setUrl:function(w){return this._url=w,this._image&&(this._image.src=w),this},setBounds:function(w){return this._bounds=Y(w),this._map&&this._reset(),this},getEvents:function(){var w={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(w.zoomanim=this._animateZoom),w},setZIndex:function(w){return this.options.zIndex=w,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var w=this._url.tagName==="IMG",O=this._image=w?this._url:St("img");if(be(O,"leaflet-image-layer"),this._zoomAnimated&&be(O,"leaflet-zoom-animated"),this.options.className&&be(O,this.options.className),O.onselectstart=m,O.onmousemove=m,O.onload=s(this.fire,this,"load"),O.onerror=s(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(O.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),w){this._url=O.src;return}O.src=this._url,O.alt=this.options.alt},_animateZoom:function(w){var O=this._map.getZoomScale(w.zoom),P=this._map._latLngBoundsToNewLayerBounds(this._bounds,w.zoom,w.center).min;mt(this._image,P,O)},_reset:function(){var w=this._image,O=new q(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),P=O.getSize();_t(w,O.min),w.style.width=P.x+"px",w.style.height=P.y+"px"},_updateOpacity:function(){Ye(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var w=this.options.errorOverlayUrl;w&&this._url!==w&&(this._url=w,this._image.src=w)},getCenter:function(){return this._bounds.getCenter()}}),Ii=function(w,O,P){return new ko(w,O,P)},Zo=ko.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var w=this._url.tagName==="VIDEO",O=this._image=w?this._url:St("video");if(be(O,"leaflet-image-layer"),this._zoomAnimated&&be(O,"leaflet-zoom-animated"),this.options.className&&be(O,this.options.className),O.onselectstart=m,O.onmousemove=m,O.onloadeddata=s(this.fire,this,"load"),w){for(var P=O.getElementsByTagName("source"),j=[],Z=0;Z<P.length;Z++)j.push(P[Z].src);this._url=P.length>0?j:[O.src];return}E(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(O.style,"objectFit")&&(O.style.objectFit="fill"),O.autoplay=!!this.options.autoplay,O.loop=!!this.options.loop,O.muted=!!this.options.muted,O.playsInline=!!this.options.playsInline;for(var oe=0;oe<this._url.length;oe++){var ke=St("source");ke.src=this._url[oe],O.appendChild(ke)}}});function Ni(w,O,P){return new Zo(w,O,P)}var Xo=ko.extend({_initImage:function(){var w=this._image=this._url;be(w,"leaflet-image-layer"),this._zoomAnimated&&be(w,"leaflet-zoom-animated"),this.options.className&&be(w,this.options.className),w.onselectstart=m,w.onmousemove=m}});function Li(w,O,P){return new Xo(w,O,P)}var Tn=kn.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(w,O){w&&(w instanceof V||E(w))?(this._latlng=J(w),b(this,O)):(b(this,w),this._source=O),this.options.content&&(this._content=this.options.content)},openOn:function(w){return w=arguments.length?w:this._source._map,w.hasLayer(this)||w.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(w){return this._map?this.close():(arguments.length?this._source=w:w=this._source,this._prepareOpen(),this.openOn(w._map)),this},onAdd:function(w){this._zoomAnimated=w._zoomAnimated,this._container||this._initLayout(),w._fadeAnimated&&Ye(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),w._fadeAnimated&&Ye(this._container,1),this.bringToFront(),this.options.interactive&&(be(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(w){w._fadeAnimated?(Ye(this._container,0),this._removeTimeout=setTimeout(s(ne,void 0,this._container),200)):ne(this._container),this.options.interactive&&(Fe(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(w){return this._latlng=J(w),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(w){return this._content=w,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var w={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(w.zoomanim=this._animateZoom),w},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&le(this._container),this},bringToBack:function(){return this._map&&we(this._container),this},_prepareOpen:function(w){var O=this._source;if(!O._map)return!1;if(O instanceof An){O=null;var P=this._source._layers;for(var j in P)if(P[j]._map){O=P[j];break}if(!O)return!1;this._source=O}if(!w)if(O.getCenter)w=O.getCenter();else if(O.getLatLng)w=O.getLatLng();else if(O.getBounds)w=O.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(w),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var w=this._contentNode,O=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof O=="string")w.innerHTML=O;else{for(;w.hasChildNodes();)w.removeChild(w.firstChild);w.appendChild(O)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var w=this._map.latLngToLayerPoint(this._latlng),O=W(this.options.offset),P=this._getAnchor();this._zoomAnimated?_t(this._container,w.add(P)):O=O.add(w).add(P);var j=this._containerBottom=-O.y,Z=this._containerLeft=-Math.round(this._containerWidth/2)+O.x;this._container.style.bottom=j+"px",this._container.style.left=Z+"px"}},_getAnchor:function(){return[0,0]}});Et.include({_initOverlay:function(w,O,P,j){var Z=O;return Z instanceof w||(Z=new w(j).setContent(O)),P&&Z.setLatLng(P),Z}}),kn.include({_initOverlay:function(w,O,P,j){var Z=P;return Z instanceof w?(b(Z,j),Z._source=this):(Z=O&&!j?O:new w(j,this),Z.setContent(P)),Z}});var Co=Tn.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(w){return w=arguments.length?w:this._source._map,!w.hasLayer(this)&&w._popup&&w._popup.options.autoClose&&w.removeLayer(w._popup),w._popup=this,Tn.prototype.openOn.call(this,w)},onAdd:function(w){Tn.prototype.onAdd.call(this,w),w.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof On||this._source.on("preclick",dn))},onRemove:function(w){Tn.prototype.onRemove.call(this,w),w.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof On||this._source.off("preclick",dn))},getEvents:function(){var w=Tn.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(w.preclick=this.close),this.options.keepInView&&(w.moveend=this._adjustPan),w},_initLayout:function(){var w="leaflet-popup",O=this._container=St("div",w+" "+(this.options.className||"")+" leaflet-zoom-animated"),P=this._wrapper=St("div",w+"-content-wrapper",O);if(this._contentNode=St("div",w+"-content",P),Dn(O),Zn(this._contentNode),vt(O,"contextmenu",dn),this._tipContainer=St("div",w+"-tip-container",O),this._tip=St("div",w+"-tip",this._tipContainer),this.options.closeButton){var j=this._closeButton=St("a",w+"-close-button",O);j.setAttribute("role","button"),j.setAttribute("aria-label","Close popup"),j.href="#close",j.innerHTML='<span aria-hidden="true">&#215;</span>',vt(j,"click",function(Z){qt(Z),this.close()},this)}},_updateLayout:function(){var w=this._contentNode,O=w.style;O.width="",O.whiteSpace="nowrap";var P=w.offsetWidth;P=Math.min(P,this.options.maxWidth),P=Math.max(P,this.options.minWidth),O.width=P+1+"px",O.whiteSpace="",O.height="";var j=w.offsetHeight,Z=this.options.maxHeight,oe="leaflet-popup-scrolled";Z&&j>Z?(O.height=Z+"px",be(w,oe)):Fe(w,oe),this._containerWidth=this._container.offsetWidth},_animateZoom:function(w){var O=this._map._latLngToNewLayerPoint(this._latlng,w.zoom,w.center),P=this._getAnchor();_t(this._container,O.add(P))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var w=this._map,O=parseInt(pn(this._container,"marginBottom"),10)||0,P=this._container.offsetHeight+O,j=this._containerWidth,Z=new U(this._containerLeft,-P-this._containerBottom);Z._add(ee(this._container));var oe=w.layerPointToContainerPoint(Z),ke=W(this.options.autoPanPadding),Ne=W(this.options.autoPanPaddingTopLeft||ke),De=W(this.options.autoPanPaddingBottomRight||ke),Je=w.getSize(),st=0,gt=0;oe.x+j+De.x>Je.x&&(st=oe.x+j-Je.x+De.x),oe.x-st-Ne.x<0&&(st=oe.x-Ne.x),oe.y+P+De.y>Je.y&&(gt=oe.y+P-Je.y+De.y),oe.y-gt-Ne.y<0&&(gt=oe.y-Ne.y),(st||gt)&&(this.options.keepInView&&(this._autopanning=!0),w.fire("autopanstart").panBy([st,gt]))}},_getAnchor:function(){return W(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Oi=function(w,O){return new Co(w,O)};Et.mergeOptions({closePopupOnClick:!0}),Et.include({openPopup:function(w,O,P){return this._initOverlay(Co,w,O,P).openOn(this),this},closePopup:function(w){return w=arguments.length?w:this._popup,w&&w.close(),this}}),kn.include({bindPopup:function(w,O){return this._popup=this._initOverlay(Co,this._popup,w,O),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(w){return this._popup&&(this instanceof An||(this._popup._source=this),this._popup._prepareOpen(w||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(w){return this._popup&&this._popup.setContent(w),this},getPopup:function(){return this._popup},_openPopup:function(w){if(!(!this._popup||!this._map)){$n(w);var O=w.layer||w.target;if(this._popup._source===O&&!(O instanceof On)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(w.latlng);return}this._popup._source=O,this.openPopup(w.latlng)}},_movePopup:function(w){this._popup.setLatLng(w.latlng)},_onKeyPress:function(w){w.originalEvent.keyCode===13&&this._openPopup(w)}});var wo=Tn.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(w){Tn.prototype.onAdd.call(this,w),this.setOpacity(this.options.opacity),w.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(w){Tn.prototype.onRemove.call(this,w),w.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var w=Tn.prototype.getEvents.call(this);return this.options.permanent||(w.preclick=this.close),w},_initLayout:function(){var w="leaflet-tooltip",O=w+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=St("div",O),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+u(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(w){var O,P,j=this._map,Z=this._container,oe=j.latLngToContainerPoint(j.getCenter()),ke=j.layerPointToContainerPoint(w),Ne=this.options.direction,De=Z.offsetWidth,Je=Z.offsetHeight,st=W(this.options.offset),gt=this._getAnchor();Ne==="top"?(O=De/2,P=Je):Ne==="bottom"?(O=De/2,P=0):Ne==="center"?(O=De/2,P=Je/2):Ne==="right"?(O=0,P=Je/2):Ne==="left"?(O=De,P=Je/2):ke.x<oe.x?(Ne="right",O=0,P=Je/2):(Ne="left",O=De+(st.x+gt.x)*2,P=Je/2),w=w.subtract(W(O,P,!0)).add(st).add(gt),Fe(Z,"leaflet-tooltip-right"),Fe(Z,"leaflet-tooltip-left"),Fe(Z,"leaflet-tooltip-top"),Fe(Z,"leaflet-tooltip-bottom"),be(Z,"leaflet-tooltip-"+Ne),_t(Z,w)},_updatePosition:function(){var w=this._map.latLngToLayerPoint(this._latlng);this._setPosition(w)},setOpacity:function(w){this.options.opacity=w,this._container&&Ye(this._container,w)},_animateZoom:function(w){var O=this._map._latLngToNewLayerPoint(this._latlng,w.zoom,w.center);this._setPosition(O)},_getAnchor:function(){return W(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Mi=function(w,O){return new wo(w,O)};Et.include({openTooltip:function(w,O,P){return this._initOverlay(wo,w,O,P).openOn(this),this},closeTooltip:function(w){return w.close(),this}}),kn.include({bindTooltip:function(w,O){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(wo,this._tooltip,w,O),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(w){if(!(!w&&this._tooltipHandlersAdded)){var O=w?"off":"on",P={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?P.add=this._openTooltip:(P.mouseover=this._openTooltip,P.mouseout=this.closeTooltip,P.click=this._openTooltip,this._map?this._addFocusListeners():P.add=this._addFocusListeners),this._tooltip.options.sticky&&(P.mousemove=this._moveTooltip),this[O](P),this._tooltipHandlersAdded=!w}},openTooltip:function(w){return this._tooltip&&(this instanceof An||(this._tooltip._source=this),this._tooltip._prepareOpen(w)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(w){return this._tooltip&&this._tooltip.setContent(w),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(w){var O=typeof w.getElement=="function"&&w.getElement();O&&(vt(O,"focus",function(){this._tooltip._source=w,this.openTooltip()},this),vt(O,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(w){var O=typeof w.getElement=="function"&&w.getElement();O&&O.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(w){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var O=this;this._map.once("moveend",function(){O._openOnceFlag=!1,O._openTooltip(w)});return}this._tooltip._source=w.layer||w.target,this.openTooltip(this._tooltip.options.sticky?w.latlng:void 0)}},_moveTooltip:function(w){var O=w.latlng,P,j;this._tooltip.options.sticky&&w.originalEvent&&(P=this._map.mouseEventToContainerPoint(w.originalEvent),j=this._map.containerPointToLayerPoint(P),O=this._map.layerPointToLatLng(j)),this._tooltip.setLatLng(O)}});var Qo=Hn.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(w){var O=w&&w.tagName==="DIV"?w:document.createElement("div"),P=this.options;if(P.html instanceof Element?(ye(O),O.appendChild(P.html)):O.innerHTML=P.html!==!1?P.html:"",P.bgPos){var j=W(P.bgPos);O.style.backgroundPosition=-j.x+"px "+-j.y+"px"}return this._setIconStyles(O,"icon"),O},createShadow:function(){return null}});function Fi(w){return new Qo(w)}Hn.Default=oo;var io=kn.extend({options:{tileSize:256,opacity:1,updateWhenIdle:lt.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(w){b(this,w)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(w){w._addZoomLimit(this)},onRemove:function(w){this._removeAllTiles(),ne(this._container),w._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(le(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(we(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(w){return this.options.opacity=w,this._updateOpacity(),this},setZIndex:function(w){return this.options.zIndex=w,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var w=this._clampZoom(this._map.getZoom());w!==this._tileZoom&&(this._tileZoom=w,this._updateLevels()),this._update()}return this},getEvents:function(){var w={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=d(this._onMoveEnd,this.options.updateInterval,this)),w.move=this._onMove),this._zoomAnimated&&(w.zoomanim=this._animateZoom),w},createTile:function(){return document.createElement("div")},getTileSize:function(){var w=this.options.tileSize;return w instanceof U?w:new U(w,w)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(w){for(var O=this.getPane().children,P=-w(-1/0,1/0),j=0,Z=O.length,oe;j<Z;j++)oe=O[j].style.zIndex,O[j]!==this._container&&oe&&(P=w(P,+oe));isFinite(P)&&(this.options.zIndex=P+w(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!lt.ielt9){Ye(this._container,this.options.opacity);var w=+new Date,O=!1,P=!1;for(var j in this._tiles){var Z=this._tiles[j];if(!(!Z.current||!Z.loaded)){var oe=Math.min(1,(w-Z.loaded)/200);Ye(Z.el,oe),oe<1?O=!0:(Z.active?P=!0:this._onOpaqueTile(Z),Z.active=!0)}}P&&!this._noPrune&&this._pruneTiles(),O&&(M(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this))}},_onOpaqueTile:m,_initContainer:function(){this._container||(this._container=St("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var w=this._tileZoom,O=this.options.maxZoom;if(w!==void 0){for(var P in this._levels)P=Number(P),this._levels[P].el.children.length||P===w?(this._levels[P].el.style.zIndex=O-Math.abs(w-P),this._onUpdateLevel(P)):(ne(this._levels[P].el),this._removeTilesAtZoom(P),this._onRemoveLevel(P),delete this._levels[P]);var j=this._levels[w],Z=this._map;return j||(j=this._levels[w]={},j.el=St("div","leaflet-tile-container leaflet-zoom-animated",this._container),j.el.style.zIndex=O,j.origin=Z.project(Z.unproject(Z.getPixelOrigin()),w).round(),j.zoom=w,this._setZoomTransform(j,Z.getCenter(),Z.getZoom()),m(j.el.offsetWidth),this._onCreateLevel(j)),this._level=j,j}},_onUpdateLevel:m,_onRemoveLevel:m,_onCreateLevel:m,_pruneTiles:function(){if(this._map){var w,O,P=this._map.getZoom();if(P>this.options.maxZoom||P<this.options.minZoom){this._removeAllTiles();return}for(w in this._tiles)O=this._tiles[w],O.retain=O.current;for(w in this._tiles)if(O=this._tiles[w],O.current&&!O.active){var j=O.coords;this._retainParent(j.x,j.y,j.z,j.z-5)||this._retainChildren(j.x,j.y,j.z,j.z+2)}for(w in this._tiles)this._tiles[w].retain||this._removeTile(w)}},_removeTilesAtZoom:function(w){for(var O in this._tiles)this._tiles[O].coords.z===w&&this._removeTile(O)},_removeAllTiles:function(){for(var w in this._tiles)this._removeTile(w)},_invalidateAll:function(){for(var w in this._levels)ne(this._levels[w].el),this._onRemoveLevel(Number(w)),delete this._levels[w];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(w,O,P,j){var Z=Math.floor(w/2),oe=Math.floor(O/2),ke=P-1,Ne=new U(+Z,+oe);Ne.z=+ke;var De=this._tileCoordsToKey(Ne),Je=this._tiles[De];return Je&&Je.active?(Je.retain=!0,!0):(Je&&Je.loaded&&(Je.retain=!0),ke>j?this._retainParent(Z,oe,ke,j):!1)},_retainChildren:function(w,O,P,j){for(var Z=2*w;Z<2*w+2;Z++)for(var oe=2*O;oe<2*O+2;oe++){var ke=new U(Z,oe);ke.z=P+1;var Ne=this._tileCoordsToKey(ke),De=this._tiles[Ne];if(De&&De.active){De.retain=!0;continue}else De&&De.loaded&&(De.retain=!0);P+1<j&&this._retainChildren(Z,oe,P+1,j)}},_resetView:function(w){var O=w&&(w.pinch||w.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),O,O)},_animateZoom:function(w){this._setView(w.center,w.zoom,!0,w.noUpdate)},_clampZoom:function(w){var O=this.options;return O.minNativeZoom!==void 0&&w<O.minNativeZoom?O.minNativeZoom:O.maxNativeZoom!==void 0&&O.maxNativeZoom<w?O.maxNativeZoom:w},_setView:function(w,O,P,j){var Z=Math.round(O);this.options.maxZoom!==void 0&&Z>this.options.maxZoom||this.options.minZoom!==void 0&&Z<this.options.minZoom?Z=void 0:Z=this._clampZoom(Z);var oe=this.options.updateWhenZooming&&Z!==this._tileZoom;(!j||oe)&&(this._tileZoom=Z,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),Z!==void 0&&this._update(w),P||this._pruneTiles(),this._noPrune=!!P),this._setZoomTransforms(w,O)},_setZoomTransforms:function(w,O){for(var P in this._levels)this._setZoomTransform(this._levels[P],w,O)},_setZoomTransform:function(w,O,P){var j=this._map.getZoomScale(P,w.zoom),Z=w.origin.multiplyBy(j).subtract(this._map._getNewPixelOrigin(O,P)).round();lt.any3d?mt(w.el,Z,j):_t(w.el,Z)},_resetGrid:function(){var w=this._map,O=w.options.crs,P=this._tileSize=this.getTileSize(),j=this._tileZoom,Z=this._map.getPixelWorldBounds(this._tileZoom);Z&&(this._globalTileRange=this._pxBoundsToTileRange(Z)),this._wrapX=O.wrapLng&&!this.options.noWrap&&[Math.floor(w.project([0,O.wrapLng[0]],j).x/P.x),Math.ceil(w.project([0,O.wrapLng[1]],j).x/P.y)],this._wrapY=O.wrapLat&&!this.options.noWrap&&[Math.floor(w.project([O.wrapLat[0],0],j).y/P.x),Math.ceil(w.project([O.wrapLat[1],0],j).y/P.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(w){var O=this._map,P=O._animatingZoom?Math.max(O._animateToZoom,O.getZoom()):O.getZoom(),j=O.getZoomScale(P,this._tileZoom),Z=O.project(w,this._tileZoom).floor(),oe=O.getSize().divideBy(j*2);return new q(Z.subtract(oe),Z.add(oe))},_update:function(w){var O=this._map;if(O){var P=this._clampZoom(O.getZoom());if(w===void 0&&(w=O.getCenter()),this._tileZoom!==void 0){var j=this._getTiledPixelBounds(w),Z=this._pxBoundsToTileRange(j),oe=Z.getCenter(),ke=[],Ne=this.options.keepBuffer,De=new q(Z.getBottomLeft().subtract([Ne,-Ne]),Z.getTopRight().add([Ne,-Ne]));if(!(isFinite(Z.min.x)&&isFinite(Z.min.y)&&isFinite(Z.max.x)&&isFinite(Z.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Je in this._tiles){var st=this._tiles[Je].coords;(st.z!==this._tileZoom||!De.contains(new U(st.x,st.y)))&&(this._tiles[Je].current=!1)}if(Math.abs(P-this._tileZoom)>1){this._setView(w,P);return}for(var gt=Z.min.y;gt<=Z.max.y;gt++)for(var Tt=Z.min.x;Tt<=Z.max.x;Tt++){var tn=new U(Tt,gt);if(tn.z=this._tileZoom,!!this._isValidTile(tn)){var Kt=this._tiles[this._tileCoordsToKey(tn)];Kt?Kt.current=!0:ke.push(tn)}}if(ke.sort(function(on,Gn){return on.distanceTo(oe)-Gn.distanceTo(oe)}),ke.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var bn=document.createDocumentFragment();for(Tt=0;Tt<ke.length;Tt++)this._addTile(ke[Tt],bn);this._level.el.appendChild(bn)}}}},_isValidTile:function(w){var O=this._map.options.crs;if(!O.infinite){var P=this._globalTileRange;if(!O.wrapLng&&(w.x<P.min.x||w.x>P.max.x)||!O.wrapLat&&(w.y<P.min.y||w.y>P.max.y))return!1}if(!this.options.bounds)return!0;var j=this._tileCoordsToBounds(w);return Y(this.options.bounds).overlaps(j)},_keyToBounds:function(w){return this._tileCoordsToBounds(this._keyToTileCoords(w))},_tileCoordsToNwSe:function(w){var O=this._map,P=this.getTileSize(),j=w.scaleBy(P),Z=j.add(P),oe=O.unproject(j,w.z),ke=O.unproject(Z,w.z);return[oe,ke]},_tileCoordsToBounds:function(w){var O=this._tileCoordsToNwSe(w),P=new z(O[0],O[1]);return this.options.noWrap||(P=this._map.wrapLatLngBounds(P)),P},_tileCoordsToKey:function(w){return w.x+":"+w.y+":"+w.z},_keyToTileCoords:function(w){var O=w.split(":"),P=new U(+O[0],+O[1]);return P.z=+O[2],P},_removeTile:function(w){var O=this._tiles[w];O&&(ne(O.el),delete this._tiles[w],this.fire("tileunload",{tile:O.el,coords:this._keyToTileCoords(w)}))},_initTile:function(w){be(w,"leaflet-tile");var O=this.getTileSize();w.style.width=O.x+"px",w.style.height=O.y+"px",w.onselectstart=m,w.onmousemove=m,lt.ielt9&&this.options.opacity<1&&Ye(w,this.options.opacity)},_addTile:function(w,O){var P=this._getTilePos(w),j=this._tileCoordsToKey(w),Z=this.createTile(this._wrapCoords(w),s(this._tileReady,this,w));this._initTile(Z),this.createTile.length<2&&N(s(this._tileReady,this,w,null,Z)),_t(Z,P),this._tiles[j]={el:Z,coords:w,current:!0},O.appendChild(Z),this.fire("tileloadstart",{tile:Z,coords:w})},_tileReady:function(w,O,P){O&&this.fire("tileerror",{error:O,tile:P,coords:w});var j=this._tileCoordsToKey(w);P=this._tiles[j],P&&(P.loaded=+new Date,this._map._fadeAnimated?(Ye(P.el,0),M(this._fadeFrame),this._fadeFrame=N(this._updateOpacity,this)):(P.active=!0,this._pruneTiles()),O||(be(P.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:P.el,coords:w})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),lt.ielt9||!this._map._fadeAnimated?N(this._pruneTiles,this):setTimeout(s(this._pruneTiles,this),250)))},_getTilePos:function(w){return w.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(w){var O=new U(this._wrapX?f(w.x,this._wrapX):w.x,this._wrapY?f(w.y,this._wrapY):w.y);return O.z=w.z,O},_pxBoundsToTileRange:function(w){var O=this.getTileSize();return new q(w.min.unscaleBy(O).floor(),w.max.unscaleBy(O).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var w in this._tiles)if(!this._tiles[w].loaded)return!1;return!0}});function Di(w){return new io(w)}var qn=io.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(w,O){this._url=w,O=b(this,O),O.detectRetina&&lt.retina&&O.maxZoom>0?(O.tileSize=Math.floor(O.tileSize/2),O.zoomReverse?(O.zoomOffset--,O.minZoom=Math.min(O.maxZoom,O.minZoom+1)):(O.zoomOffset++,O.maxZoom=Math.max(O.minZoom,O.maxZoom-1)),O.minZoom=Math.max(0,O.minZoom)):O.zoomReverse?O.minZoom=Math.min(O.maxZoom,O.minZoom):O.maxZoom=Math.max(O.minZoom,O.maxZoom),typeof O.subdomains=="string"&&(O.subdomains=O.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(w,O){return this._url===w&&O===void 0&&(O=!0),this._url=w,O||this.redraw(),this},createTile:function(w,O){var P=document.createElement("img");return vt(P,"load",s(this._tileOnLoad,this,O,P)),vt(P,"error",s(this._tileOnError,this,O,P)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(P.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(P.referrerPolicy=this.options.referrerPolicy),P.alt="",P.src=this.getTileUrl(w),P},getTileUrl:function(w){var O={r:lt.retina?"@2x":"",s:this._getSubdomain(w),x:w.x,y:w.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var P=this._globalTileRange.max.y-w.y;this.options.tms&&(O.y=P),O["-y"]=P}return C(this._url,r(O,this.options))},_tileOnLoad:function(w,O){lt.ielt9?setTimeout(s(w,this,null,O),0):w(null,O)},_tileOnError:function(w,O,P){var j=this.options.errorTileUrl;j&&O.getAttribute("src")!==j&&(O.src=j),w(P,O)},_onTileRemove:function(w){w.tile.onload=null},_getZoomForUrl:function(){var w=this._tileZoom,O=this.options.maxZoom,P=this.options.zoomReverse,j=this.options.zoomOffset;return P&&(w=O-w),w+j},_getSubdomain:function(w){var O=Math.abs(w.x+w.y)%this.options.subdomains.length;return this.options.subdomains[O]},_abortLoading:function(){var w,O;for(w in this._tiles)if(this._tiles[w].coords.z!==this._tileZoom&&(O=this._tiles[w].el,O.onload=m,O.onerror=m,!O.complete)){O.src=k;var P=this._tiles[w].coords;ne(O),delete this._tiles[w],this.fire("tileabort",{tile:O,coords:P})}},_removeTile:function(w){var O=this._tiles[w];if(O)return O.el.setAttribute("src",k),io.prototype._removeTile.call(this,w)},_tileReady:function(w,O,P){if(!(!this._map||P&&P.getAttribute("src")===k))return io.prototype._tileReady.call(this,w,O,P)}});function ei(w,O){return new qn(w,O)}var ti=qn.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(w,O){this._url=w;var P=r({},this.defaultWmsParams);for(var j in O)j in this.options||(P[j]=O[j]);O=b(this,O);var Z=O.detectRetina&&lt.retina?2:1,oe=this.getTileSize();P.width=oe.x*Z,P.height=oe.y*Z,this.wmsParams=P},onAdd:function(w){this._crs=this.options.crs||w.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var O=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[O]=this._crs.code,qn.prototype.onAdd.call(this,w)},getTileUrl:function(w){var O=this._tileCoordsToNwSe(w),P=this._crs,j=H(P.project(O[0]),P.project(O[1])),Z=j.min,oe=j.max,ke=(this._wmsVersion>=1.3&&this._crs===Go?[Z.y,Z.x,oe.y,oe.x]:[Z.x,Z.y,oe.x,oe.y]).join(","),Ne=qn.prototype.getTileUrl.call(this,w);return Ne+v(this.wmsParams,Ne,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ke},setParams:function(w,O){return r(this.wmsParams,w),O||this.redraw(),this}});function xi(w,O){return new ti(w,O)}qn.WMS=ti,ei.wms=xi;var Nn=kn.extend({options:{padding:.1},initialize:function(w){b(this,w),u(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),be(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var w={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(w.zoomanim=this._onAnimZoom),w},_onAnimZoom:function(w){this._updateTransform(w.center,w.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(w,O){var P=this._map.getZoomScale(O,this._zoom),j=this._map.getSize().multiplyBy(.5+this.options.padding),Z=this._map.project(this._center,O),oe=j.multiplyBy(-P).add(Z).subtract(this._map._getNewPixelOrigin(w,O));lt.any3d?mt(this._container,oe,P):_t(this._container,oe)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var w in this._layers)this._layers[w]._reset()},_onZoomEnd:function(){for(var w in this._layers)this._layers[w]._project()},_updatePaths:function(){for(var w in this._layers)this._layers[w]._update()},_update:function(){var w=this.options.padding,O=this._map.getSize(),P=this._map.containerPointToLayerPoint(O.multiplyBy(-w)).round();this._bounds=new q(P,P.add(O.multiplyBy(1+w*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),ni=Nn.extend({options:{tolerance:0},getEvents:function(){var w=Nn.prototype.getEvents.call(this);return w.viewprereset=this._onViewPreReset,w},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Nn.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var w=this._container=document.createElement("canvas");vt(w,"mousemove",this._onMouseMove,this),vt(w,"click dblclick mousedown mouseup contextmenu",this._onClick,this),vt(w,"mouseout",this._handleMouseOut,this),w._leaflet_disable_events=!0,this._ctx=w.getContext("2d")},_destroyContainer:function(){M(this._redrawRequest),delete this._ctx,ne(this._container),Mt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var w;this._redrawBounds=null;for(var O in this._layers)w=this._layers[O],w._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var w=this._bounds,O=this._container,P=w.getSize(),j=lt.retina?2:1;_t(O,w.min),O.width=j*P.x,O.height=j*P.y,O.style.width=P.x+"px",O.style.height=P.y+"px",lt.retina&&this._ctx.scale(2,2),this._ctx.translate(-w.min.x,-w.min.y),this.fire("update")}},_reset:function(){Nn.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(w){this._updateDashArray(w),this._layers[u(w)]=w;var O=w._order={layer:w,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=O),this._drawLast=O,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(w){this._requestRedraw(w)},_removePath:function(w){var O=w._order,P=O.next,j=O.prev;P?P.prev=j:this._drawLast=j,j?j.next=P:this._drawFirst=P,delete w._order,delete this._layers[u(w)],this._requestRedraw(w)},_updatePath:function(w){this._extendRedrawBounds(w),w._project(),w._update(),this._requestRedraw(w)},_updateStyle:function(w){this._updateDashArray(w),this._requestRedraw(w)},_updateDashArray:function(w){if(typeof w.options.dashArray=="string"){var O=w.options.dashArray.split(/[, ]+/),P=[],j,Z;for(Z=0;Z<O.length;Z++){if(j=Number(O[Z]),isNaN(j))return;P.push(j)}w.options._dashArray=P}else w.options._dashArray=w.options.dashArray},_requestRedraw:function(w){this._map&&(this._extendRedrawBounds(w),this._redrawRequest=this._redrawRequest||N(this._redraw,this))},_extendRedrawBounds:function(w){if(w._pxBounds){var O=(w.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new q,this._redrawBounds.extend(w._pxBounds.min.subtract([O,O])),this._redrawBounds.extend(w._pxBounds.max.add([O,O]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var w=this._redrawBounds;if(w){var O=w.getSize();this._ctx.clearRect(w.min.x,w.min.y,O.x,O.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var w,O=this._redrawBounds;if(this._ctx.save(),O){var P=O.getSize();this._ctx.beginPath(),this._ctx.rect(O.min.x,O.min.y,P.x,P.y),this._ctx.clip()}this._drawing=!0;for(var j=this._drawFirst;j;j=j.next)w=j.layer,(!O||w._pxBounds&&w._pxBounds.intersects(O))&&w._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(w,O){if(this._drawing){var P,j,Z,oe,ke=w._parts,Ne=ke.length,De=this._ctx;if(Ne){for(De.beginPath(),P=0;P<Ne;P++){for(j=0,Z=ke[P].length;j<Z;j++)oe=ke[P][j],De[j?"lineTo":"moveTo"](oe.x,oe.y);O&&De.closePath()}this._fillStroke(De,w)}}},_updateCircle:function(w){if(!(!this._drawing||w._empty())){var O=w._point,P=this._ctx,j=Math.max(Math.round(w._radius),1),Z=(Math.max(Math.round(w._radiusY),1)||j)/j;Z!==1&&(P.save(),P.scale(1,Z)),P.beginPath(),P.arc(O.x,O.y/Z,j,0,Math.PI*2,!1),Z!==1&&P.restore(),this._fillStroke(P,w)}},_fillStroke:function(w,O){var P=O.options;P.fill&&(w.globalAlpha=P.fillOpacity,w.fillStyle=P.fillColor||P.color,w.fill(P.fillRule||"evenodd")),P.stroke&&P.weight!==0&&(w.setLineDash&&w.setLineDash(O.options&&O.options._dashArray||[]),w.globalAlpha=P.opacity,w.lineWidth=P.weight,w.strokeStyle=P.color,w.lineCap=P.lineCap,w.lineJoin=P.lineJoin,w.stroke())},_onClick:function(w){for(var O=this._map.mouseEventToLayerPoint(w),P,j,Z=this._drawFirst;Z;Z=Z.next)P=Z.layer,P.options.interactive&&P._containsPoint(O)&&(!(w.type==="click"||w.type==="preclick")||!this._map._draggableMoved(P))&&(j=P);this._fireEvent(j?[j]:!1,w)},_onMouseMove:function(w){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var O=this._map.mouseEventToLayerPoint(w);this._handleMouseHover(w,O)}},_handleMouseOut:function(w){var O=this._hoveredLayer;O&&(Fe(this._container,"leaflet-interactive"),this._fireEvent([O],w,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(w,O){if(!this._mouseHoverThrottled){for(var P,j,Z=this._drawFirst;Z;Z=Z.next)P=Z.layer,P.options.interactive&&P._containsPoint(O)&&(j=P);j!==this._hoveredLayer&&(this._handleMouseOut(w),j&&(be(this._container,"leaflet-interactive"),this._fireEvent([j],w,"mouseover"),this._hoveredLayer=j)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,w),this._mouseHoverThrottled=!0,setTimeout(s(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(w,O,P){this._map._fireDOMEvent(O,P||O.type,w)},_bringToFront:function(w){var O=w._order;if(O){var P=O.next,j=O.prev;if(P)P.prev=j;else return;j?j.next=P:P&&(this._drawFirst=P),O.prev=this._drawLast,this._drawLast.next=O,O.next=null,this._drawLast=O,this._requestRedraw(w)}},_bringToBack:function(w){var O=w._order;if(O){var P=O.next,j=O.prev;if(j)j.next=P;else return;P?P.prev=j:j&&(this._drawLast=j),O.prev=null,O.next=this._drawFirst,this._drawFirst.prev=O,this._drawFirst=O,this._requestRedraw(w)}}});function oi(w){return lt.canvas?new ni(w):null}var ro=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(w){return document.createElement("<lvml:"+w+' class="lvml">')}}catch{}return function(w){return document.createElement("<"+w+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),Pi={_initContainer:function(){this._container=St("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Nn.prototype._update.call(this),this.fire("update"))},_initPath:function(w){var O=w._container=ro("shape");be(O,"leaflet-vml-shape "+(this.options.className||"")),O.coordsize="1 1",w._path=ro("path"),O.appendChild(w._path),this._updateStyle(w),this._layers[u(w)]=w},_addPath:function(w){var O=w._container;this._container.appendChild(O),w.options.interactive&&w.addInteractiveTarget(O)},_removePath:function(w){var O=w._container;ne(O),w.removeInteractiveTarget(O),delete this._layers[u(w)]},_updateStyle:function(w){var O=w._stroke,P=w._fill,j=w.options,Z=w._container;Z.stroked=!!j.stroke,Z.filled=!!j.fill,j.stroke?(O||(O=w._stroke=ro("stroke")),Z.appendChild(O),O.weight=j.weight+"px",O.color=j.color,O.opacity=j.opacity,j.dashArray?O.dashStyle=E(j.dashArray)?j.dashArray.join(" "):j.dashArray.replace(/( *, *)/g," "):O.dashStyle="",O.endcap=j.lineCap.replace("butt","flat"),O.joinstyle=j.lineJoin):O&&(Z.removeChild(O),w._stroke=null),j.fill?(P||(P=w._fill=ro("fill")),Z.appendChild(P),P.color=j.fillColor||j.color,P.opacity=j.fillOpacity):P&&(Z.removeChild(P),w._fill=null)},_updateCircle:function(w){var O=w._point.round(),P=Math.round(w._radius),j=Math.round(w._radiusY||P);this._setPath(w,w._empty()?"M0 0":"AL "+O.x+","+O.y+" "+P+","+j+" 0,"+65535*360)},_setPath:function(w,O){w._path.v=O},_bringToFront:function(w){le(w._container)},_bringToBack:function(w){we(w._container)}},So=lt.vml?ro:he,ao=Nn.extend({_initContainer:function(){this._container=So("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=So("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){ne(this._container),Mt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Nn.prototype._update.call(this);var w=this._bounds,O=w.getSize(),P=this._container;(!this._svgSize||!this._svgSize.equals(O))&&(this._svgSize=O,P.setAttribute("width",O.x),P.setAttribute("height",O.y)),_t(P,w.min),P.setAttribute("viewBox",[w.min.x,w.min.y,O.x,O.y].join(" ")),this.fire("update")}},_initPath:function(w){var O=w._path=So("path");w.options.className&&be(O,w.options.className),w.options.interactive&&be(O,"leaflet-interactive"),this._updateStyle(w),this._layers[u(w)]=w},_addPath:function(w){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(w._path),w.addInteractiveTarget(w._path)},_removePath:function(w){ne(w._path),w.removeInteractiveTarget(w._path),delete this._layers[u(w)]},_updatePath:function(w){w._project(),w._update()},_updateStyle:function(w){var O=w._path,P=w.options;O&&(P.stroke?(O.setAttribute("stroke",P.color),O.setAttribute("stroke-opacity",P.opacity),O.setAttribute("stroke-width",P.weight),O.setAttribute("stroke-linecap",P.lineCap),O.setAttribute("stroke-linejoin",P.lineJoin),P.dashArray?O.setAttribute("stroke-dasharray",P.dashArray):O.removeAttribute("stroke-dasharray"),P.dashOffset?O.setAttribute("stroke-dashoffset",P.dashOffset):O.removeAttribute("stroke-dashoffset")):O.setAttribute("stroke","none"),P.fill?(O.setAttribute("fill",P.fillColor||P.color),O.setAttribute("fill-opacity",P.fillOpacity),O.setAttribute("fill-rule",P.fillRule||"evenodd")):O.setAttribute("fill","none"))},_updatePoly:function(w,O){this._setPath(w,pe(w._parts,O))},_updateCircle:function(w){var O=w._point,P=Math.max(Math.round(w._radius),1),j=Math.max(Math.round(w._radiusY),1)||P,Z="a"+P+","+j+" 0 1,0 ",oe=w._empty()?"M0 0":"M"+(O.x-P)+","+O.y+Z+P*2+",0 "+Z+-P*2+",0 ";this._setPath(w,oe)},_setPath:function(w,O){w._path.setAttribute("d",O)},_bringToFront:function(w){le(w._path)},_bringToBack:function(w){we(w._path)}});lt.vml&&ao.include(Pi);function ii(w){return lt.svg||lt.vml?new ao(w):null}Et.include({getRenderer:function(w){var O=w.options.renderer||this._getPaneRenderer(w.options.pane)||this.options.renderer||this._renderer;return O||(O=this._renderer=this._createRenderer()),this.hasLayer(O)||this.addLayer(O),O},_getPaneRenderer:function(w){if(w==="overlayPane"||w===void 0)return!1;var O=this._paneRenderers[w];return O===void 0&&(O=this._createRenderer({pane:w}),this._paneRenderers[w]=O),O},_createRenderer:function(w){return this.options.preferCanvas&&oi(w)||ii(w)}});var ri=jn.extend({initialize:function(w,O){jn.prototype.initialize.call(this,this._boundsToLatLngs(w),O)},setBounds:function(w){return this.setLatLngs(this._boundsToLatLngs(w))},_boundsToLatLngs:function(w){return w=Y(w),[w.getSouthWest(),w.getNorthWest(),w.getNorthEast(),w.getSouthEast()]}});function Bi(w,O){return new ri(w,O)}ao.create=So,ao.pointsToPath=pe,In.geometryToLayer=go,In.coordsToLatLng=xo,In.coordsToLatLngs=bo,In.latLngToCoords=Po,In.latLngsToCoords=vo,In.getFeature=Vn,In.asFeature=yo,Et.mergeOptions({boxZoom:!0});var ai=te.extend({initialize:function(w){this._map=w,this._container=w._container,this._pane=w._panes.overlayPane,this._resetStateTimeout=0,w.on("unload",this._destroy,this)},addHooks:function(){vt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Mt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){ne(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(w){if(!w.shiftKey||w.which!==1&&w.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ae(),it(),this._startPoint=this._map.mouseEventToContainerPoint(w),vt(document,{contextmenu:$n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(w){this._moved||(this._moved=!0,this._box=St("div","leaflet-zoom-box",this._container),be(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(w);var O=new q(this._point,this._startPoint),P=O.getSize();_t(this._box,O.min),this._box.style.width=P.x+"px",this._box.style.height=P.y+"px"},_finish:function(){this._moved&&(ne(this._box),Fe(this._container,"leaflet-crosshair")),_e(),yt(),Mt(document,{contextmenu:$n,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(w){if(!(w.which!==1&&w.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(s(this._resetState,this),0);var O=new z(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(O).fire("boxzoomend",{boxZoomBounds:O})}},_onKeyDown:function(w){w.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Et.addInitHook("addHandler","boxZoom",ai),Et.mergeOptions({doubleClickZoom:!0});var si=te.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(w){var O=this._map,P=O.getZoom(),j=O.options.zoomDelta,Z=w.originalEvent.shiftKey?P-j:P+j;O.options.doubleClickZoom==="center"?O.setZoom(Z):O.setZoomAround(w.containerPoint,Z)}});Et.addInitHook("addHandler","doubleClickZoom",si),Et.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var li=te.extend({addHooks:function(){if(!this._draggable){var w=this._map;this._draggable=new Ke(w._mapPane,w._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),w.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),w.on("zoomend",this._onZoomEnd,this),w.whenReady(this._onZoomEnd,this))}be(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Fe(this._map._container,"leaflet-grab"),Fe(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var w=this._map;if(w._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var O=Y(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(O.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(O.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;w.fire("movestart").fire("dragstart"),w.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(w){if(this._map.options.inertia){var O=this._lastTime=+new Date,P=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(P),this._times.push(O),this._prunePositions(O)}this._map.fire("move",w).fire("drag",w)},_prunePositions:function(w){for(;this._positions.length>1&&w-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var w=this._map.getSize().divideBy(2),O=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=O.subtract(w).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(w,O){return w-(w-O)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var w=this._draggable._newPos.subtract(this._draggable._startPos),O=this._offsetLimit;w.x<O.min.x&&(w.x=this._viscousLimit(w.x,O.min.x)),w.y<O.min.y&&(w.y=this._viscousLimit(w.y,O.min.y)),w.x>O.max.x&&(w.x=this._viscousLimit(w.x,O.max.x)),w.y>O.max.y&&(w.y=this._viscousLimit(w.y,O.max.y)),this._draggable._newPos=this._draggable._startPos.add(w)}},_onPreDragWrap:function(){var w=this._worldWidth,O=Math.round(w/2),P=this._initialWorldOffset,j=this._draggable._newPos.x,Z=(j-O+P)%w+O-P,oe=(j+O+P)%w-O-P,ke=Math.abs(Z+P)<Math.abs(oe+P)?Z:oe;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ke},_onDragEnd:function(w){var O=this._map,P=O.options,j=!P.inertia||w.noInertia||this._times.length<2;if(O.fire("dragend",w),j)O.fire("moveend");else{this._prunePositions(+new Date);var Z=this._lastPos.subtract(this._positions[0]),oe=(this._lastTime-this._times[0])/1e3,ke=P.easeLinearity,Ne=Z.multiplyBy(ke/oe),De=Ne.distanceTo([0,0]),Je=Math.min(P.inertiaMaxSpeed,De),st=Ne.multiplyBy(Je/De),gt=Je/(P.inertiaDeceleration*ke),Tt=st.multiplyBy(-gt/2).round();!Tt.x&&!Tt.y?O.fire("moveend"):(Tt=O._limitOffset(Tt,O.options.maxBounds),N(function(){O.panBy(Tt,{duration:gt,easeLinearity:ke,noMoveStart:!0,animate:!0})}))}}});Et.addInitHook("addHandler","dragging",li),Et.mergeOptions({keyboard:!0,keyboardPanDelta:80});var ci=te.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(w){this._map=w,this._setPanDelta(w.options.keyboardPanDelta),this._setZoomDelta(w.options.zoomDelta)},addHooks:function(){var w=this._map._container;w.tabIndex<=0&&(w.tabIndex="0"),vt(w,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Mt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var w=document.body,O=document.documentElement,P=w.scrollTop||O.scrollTop,j=w.scrollLeft||O.scrollLeft;this._map._container.focus(),window.scrollTo(j,P)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(w){var O=this._panKeys={},P=this.keyCodes,j,Z;for(j=0,Z=P.left.length;j<Z;j++)O[P.left[j]]=[-1*w,0];for(j=0,Z=P.right.length;j<Z;j++)O[P.right[j]]=[w,0];for(j=0,Z=P.down.length;j<Z;j++)O[P.down[j]]=[0,w];for(j=0,Z=P.up.length;j<Z;j++)O[P.up[j]]=[0,-1*w]},_setZoomDelta:function(w){var O=this._zoomKeys={},P=this.keyCodes,j,Z;for(j=0,Z=P.zoomIn.length;j<Z;j++)O[P.zoomIn[j]]=w;for(j=0,Z=P.zoomOut.length;j<Z;j++)O[P.zoomOut[j]]=-w},_addHooks:function(){vt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Mt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(w){if(!(w.altKey||w.ctrlKey||w.metaKey)){var O=w.keyCode,P=this._map,j;if(O in this._panKeys){if(!P._panAnim||!P._panAnim._inProgress)if(j=this._panKeys[O],w.shiftKey&&(j=W(j).multiplyBy(3)),P.options.maxBounds&&(j=P._limitOffset(W(j),P.options.maxBounds)),P.options.worldCopyJump){var Z=P.wrapLatLng(P.unproject(P.project(P.getCenter()).add(j)));P.panTo(Z)}else P.panBy(j)}else if(O in this._zoomKeys)P.setZoom(P.getZoom()+(w.shiftKey?3:1)*this._zoomKeys[O]);else if(O===27&&P._popup&&P._popup.options.closeOnEscapeKey)P.closePopup();else return;$n(w)}}});Et.addInitHook("addHandler","keyboard",ci),Et.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ui=te.extend({addHooks:function(){vt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Mt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(w){var O=co(w),P=this._map.options.wheelDebounceTime;this._delta+=O,this._lastMousePos=this._map.mouseEventToContainerPoint(w),this._startTime||(this._startTime=+new Date);var j=Math.max(P-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(s(this._performZoom,this),j),$n(w)},_performZoom:function(){var w=this._map,O=w.getZoom(),P=this._map.options.zoomSnap||0;w._stop();var j=this._delta/(this._map.options.wheelPxPerZoomLevel*4),Z=4*Math.log(2/(1+Math.exp(-Math.abs(j))))/Math.LN2,oe=P?Math.ceil(Z/P)*P:Z,ke=w._limitZoom(O+(this._delta>0?oe:-oe))-O;this._delta=0,this._startTime=null,ke&&(w.options.scrollWheelZoom==="center"?w.setZoom(O+ke):w.setZoomAround(this._lastMousePos,O+ke))}});Et.addInitHook("addHandler","scrollWheelZoom",ui);var zi=600;Et.mergeOptions({tapHold:lt.touchNative&&lt.safari&&lt.mobile,tapTolerance:15});var di=te.extend({addHooks:function(){vt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Mt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(w){if(clearTimeout(this._holdTimeout),w.touches.length===1){var O=w.touches[0];this._startPos=this._newPos=new U(O.clientX,O.clientY),this._holdTimeout=setTimeout(s(function(){this._cancel(),this._isTapValid()&&(vt(document,"touchend",qt),vt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",O))},this),zi),vt(document,"touchend touchcancel contextmenu",this._cancel,this),vt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function w(){Mt(document,"touchend",qt),Mt(document,"touchend touchcancel",w)},_cancel:function(){clearTimeout(this._holdTimeout),Mt(document,"touchend touchcancel contextmenu",this._cancel,this),Mt(document,"touchmove",this._onMove,this)},_onMove:function(w){var O=w.touches[0];this._newPos=new U(O.clientX,O.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(w,O){var P=new MouseEvent(w,{bubbles:!0,cancelable:!0,view:window,screenX:O.screenX,screenY:O.screenY,clientX:O.clientX,clientY:O.clientY});P._simulated=!0,O.target.dispatchEvent(P)}});Et.addInitHook("addHandler","tapHold",di),Et.mergeOptions({touchZoom:lt.touch,bounceAtZoomLimits:!0});var fi=te.extend({addHooks:function(){be(this._map._container,"leaflet-touch-zoom"),vt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Fe(this._map._container,"leaflet-touch-zoom"),Mt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(w){var O=this._map;if(!(!w.touches||w.touches.length!==2||O._animatingZoom||this._zooming)){var P=O.mouseEventToContainerPoint(w.touches[0]),j=O.mouseEventToContainerPoint(w.touches[1]);this._centerPoint=O.getSize()._divideBy(2),this._startLatLng=O.containerPointToLatLng(this._centerPoint),O.options.touchZoom!=="center"&&(this._pinchStartLatLng=O.containerPointToLatLng(P.add(j)._divideBy(2))),this._startDist=P.distanceTo(j),this._startZoom=O.getZoom(),this._moved=!1,this._zooming=!0,O._stop(),vt(document,"touchmove",this._onTouchMove,this),vt(document,"touchend touchcancel",this._onTouchEnd,this),qt(w)}},_onTouchMove:function(w){if(!(!w.touches||w.touches.length!==2||!this._zooming)){var O=this._map,P=O.mouseEventToContainerPoint(w.touches[0]),j=O.mouseEventToContainerPoint(w.touches[1]),Z=P.distanceTo(j)/this._startDist;if(this._zoom=O.getScaleZoom(Z,this._startZoom),!O.options.bounceAtZoomLimits&&(this._zoom<O.getMinZoom()&&Z<1||this._zoom>O.getMaxZoom()&&Z>1)&&(this._zoom=O._limitZoom(this._zoom)),O.options.touchZoom==="center"){if(this._center=this._startLatLng,Z===1)return}else{var oe=P._add(j)._divideBy(2)._subtract(this._centerPoint);if(Z===1&&oe.x===0&&oe.y===0)return;this._center=O.unproject(O.project(this._pinchStartLatLng,this._zoom).subtract(oe),this._zoom)}this._moved||(O._moveStart(!0,!1),this._moved=!0),M(this._animRequest);var ke=s(O._move,O,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=N(ke,this,!0),qt(w)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,M(this._animRequest),Mt(document,"touchmove",this._onTouchMove,this),Mt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Et.addInitHook("addHandler","touchZoom",fi),Et.BoxZoom=ai,Et.DoubleClickZoom=si,Et.Drag=li,Et.Keyboard=ci,Et.ScrollWheelZoom=ui,Et.TapHold=di,Et.TouchZoom=fi,t.Bounds=q,t.Browser=lt,t.CRS=Q,t.Canvas=ni,t.Circle=Do,t.CircleMarker=po,t.Class=D,t.Control=fn,t.DivIcon=Qo,t.DivOverlay=Tn,t.DomEvent=$o,t.DomUtil=Yn,t.Draggable=Ke,t.Evented=K,t.FeatureGroup=An,t.GeoJSON=In,t.GridLayer=io,t.Handler=te,t.Icon=Hn,t.ImageOverlay=ko,t.LatLng=V,t.LatLngBounds=z,t.Layer=kn,t.LayerGroup=Un,t.LineUtil=gi,t.Map=Et,t.Marker=ho,t.Mixin=Te,t.Path=On,t.Point=U,t.PolyUtil=Gt,t.Polygon=jn,t.Polyline=Rn,t.Popup=Co,t.PosAnimation=uo,t.Projection=bi,t.Rectangle=ri,t.Renderer=Nn,t.SVG=ao,t.SVGOverlay=Xo,t.TileLayer=qn,t.Tooltip=wo,t.Transformation=de,t.Util=F,t.VideoOverlay=Zo,t.bind=s,t.bounds=H,t.canvas=oi,t.circle=Ei,t.circleMarker=Ti,t.control=xn,t.divIcon=Fi,t.extend=r,t.featureGroup=Ci,t.geoJSON=Jo,t.geoJson=Ri,t.gridLayer=Di,t.icon=wi,t.imageOverlay=Ii,t.latLng=J,t.latLngBounds=Y,t.layerGroup=ki,t.map=Ao,t.marker=Si,t.point=W,t.polygon=Ai,t.polyline=$i,t.popup=Oi,t.rectangle=Bi,t.setOptions=b,t.stamp=u,t.svg=ii,t.svgOverlay=Li,t.tileLayer=ei,t.tooltip=Mi,t.transformation=se,t.version=n,t.videoOverlay=Ni;var Wi=window.L;t.noConflict=function(){return window.L=Wi,this},window.L=t})})(leafletSrc,leafletSrc.exports);var leafletSrcExports=leafletSrc.exports;const leaflet=getDefaultExportFromCjs(leafletSrcExports);function create_fragment$38(o){let e,t,n;return{c(){e=element("div"),attr(e,"class","flex1")},m(r,a){insert(r,e,a),o[4](e),t||(n=[action_destroyer(contextMenu.call(null,e,o[2])),action_destroyer(resizeObserver.call(null,e,!0)),listen(e,"resize",o[5])],t=!0)},p:noop$1,i:noop$1,o:noop$1,d(r){r&&detach(e),o[4](null),t=!1,run_all(n)}}}function instance$36(o,e,t){var n=this&&this.__awaiter||function(h,p,g,b){function v(y){return y instanceof g?y:new g(function(C){C(y)})}return new(g||(g=Promise))(function(y,C){function E(T){try{k(b.next(T))}catch($){C($)}}function A(T){try{k(b.throw(T))}catch($){C($)}}function k(T){T.done?y(T.value):v(T.value).then(E,A)}k((b=b.apply(h,p||[])).next())})};let r,a,s=[],{geoJson:l}=e;function u(){if(!a)return;for(const p of s)p.remove();s=[];const h=leaflet.geoJSON(l,{style(){return{weight:2,fillColor:"#ff7800",color:"#ff7800",opacity:.8,fillOpacity:.4}},pointToLayer:(p,g)=>leaflet.circleMarker(g,{radius:7,weight:2,fillColor:"#ff0000",color:"#ff0000",opacity:.9,fillOpacity:.9}),onEachFeature:(p,g)=>{p.properties&&p.properties.popupContent&&(g.bindPopup(p.properties.popupContent),g.bindTooltip(p.properties.popupContent))}}).addTo(a);a.fitBounds(h.getBounds()),s.push(h)}onMount(()=>{t(1,a=leaflet.map(r).setView([50,15],13)),leaflet.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{maxZoom:19,attribution:" OpenStreetMap"}).addTo(a),u()});function d(){return[{text:"Open on new tab",onClick:()=>{openNewTab({title:"Map",icon:"img map",tabComponent:"MapTab"},{editor:l})}},{text:"Export to HTML file",onClick:()=>{saveFileToDisk(h=>n(this,void 0,void 0,function*(){yield apiCall("files/export-map",{geoJson:l,filePath:h})}))}}]}function f(h){binding_callbacks[h?"unshift":"push"](()=>{r=h,t(0,r)})}const m=async h=>{await tick(),a.invalidateSize()};return o.$$set=h=>{"geoJson"in h&&t(3,l=h.geoJson)},o.$$.update=()=>{o.$$.dirty&8&&u()},[r,a,d,l,f,m]}class MapView extends SvelteComponent{constructor(e){super(),init(this,e,instance$36,create_fragment$38,safe_not_equal,{geoJson:3})}}function create_fragment$37(o){let e,t;return e=new MapView({props:{geoJson:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.geoJson=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function findLatLonPaths(o,e,t=[],n=""){for(const r of Object.keys(o))e(r,o[r])&&t.push(n+r),_.isPlainObject(o[r])&&findLatLonPaths(o[r],e,t,n+r+".");return t}function findLatPaths(o){return findLatLonPaths(o,e=>e.includes("lat"))}function findLonPaths(o){return findLatLonPaths(o,e=>e.includes("lon")||e.includes("lng"))}function findAllObjectPaths(o){return findLatLonPaths(o,(e,t)=>t!=null&&!_.isNaN(Number(t)))}function selectionCouldBeShownOnMap(o){return!!(o.length>0&&_.find(o,e=>lib.isWktGeometry(e.value))||o.length>0&&_.find(o,e=>findLatPaths(e.rowData).length>0&&findLonPaths(e.rowData).length>0))}function instance$35(o,e,t){let{selection:n}=e,{latitudeField:r=""}=e,{longitudeField:a=""}=e,s;function l(d){return d.length==0?"":`<table>${d.map(f=>`<tr><td>${f.column}</td><td>${lib.stringifyCellValue(f.value)}</td></tr>`).join(`
`)}</table>`}function u(){const d=_.groupBy(n||[],"row"),f=[];for(const m of _.keys(d)){const h=d[m],p=h.map(v=>v.value).filter(lib.isWktGeometry),g=r?Number(_.get(h[0].rowData,r)):NaN,b=a?Number(_.get(h[0].rowData,a)):NaN;!_.isNaN(g)&&!_.isNaN(b)&&f.push({type:"Feature",properties:{popupContent:l(h)},geometry:{type:"Point",coordinates:[Number(b),Number(g)]}}),p.length>0&&f.push(...p.map(wellknown).map(v=>({type:"Feature",properties:{popupContent:l(h.filter(y=>!lib.isWktGeometry(y.value)))},geometry:v})))}f.length!=0&&t(0,s={type:"FeatureCollection",features:f})}return o.$$set=d=>{"selection"in d&&t(1,n=d.selection),"latitudeField"in d&&t(2,r=d.latitudeField),"longitudeField"in d&&t(3,a=d.longitudeField)},o.$$.update=()=>{o.$$.dirty&14&&u()},[s,n,r,a]}class SelectionMapView extends SvelteComponent{constructor(e){super(),init(this,e,instance$35,create_fragment$37,safe_not_equal,{selection:1,latitudeField:2,longitudeField:3})}}const DataGridCore_svelte_svelte_type_style_lang="";function get_each_context_1$8(o,e,t){const n=o.slice();return n[177]=e[t],n}function get_each_context_2$2(o,e,t){const n=o.slice();return n[180]=e[t],n}function get_each_context_3$2(o,e,t){const n=o.slice();return n[180]=e[t],n}function get_each_context$u(o,e,t){const n=o.slice();return n[174]=e[t],n}function create_else_block$D(o){let e,t,n,r,a,s,l,u,d,f,m=[],h=new Map,p,g,b,v=[],y=new Map,C,E,A,k,T,$,S,I,R,N,M;u=new CollapseButton({props:{collapsed:o[43]}}),u.$on("click",o[124]);let F=ensure_array_like(o[40]);const D=V=>V[180].uniqueName;for(let V=0;V<F.length;V+=1){let J=get_each_context_3$2(o,F,V),Q=D(J);h.set(Q,m[V]=create_each_block_3$2(Q,J))}let x=o[1].filterable&&create_if_block_12$1(o),B=ensure_array_like(_.range(o[24],Math.min(o[24]+o[32],o[0].rowCount)));const K=V=>V[177];for(let V=0;V<B.length;V+=1){let J=get_each_context_1$8(o,B,V),Q=K(J);y.set(Q,v[V]=create_each_block_1$8(Q,J))}let U={minimum:0,maximum:o[38],viewportRatio:o[30]/o[29].getVisibleScrollSizeSum()};E=new HorizontalScrollBar({props:U}),o[135](E),E.$on("scroll",o[136]);let G={minimum:0,maximum:o[0].rowCount-o[32]+2,viewportRatio:o[32]/o[0].rowCount};k=new VerticalScrollBar({props:G}),o[137](k),k.$on("scroll",o[138]);function W(V,J){if(V[39])return create_if_block_10$2;if(V[6]!=null&&V[14])return create_if_block_11$2}let q=W(o),H=q&&q(o),z=o[5]&&create_if_block_9$3(),Y=!o[15]&&!o[14]&&o[6]!=null&&create_if_block_8$3(o);return{c(){e=element("div"),t=element("input"),n=space(),r=element("table"),a=element("thead"),s=element("tr"),l=element("td"),create_component(u.$$.fragment),f=space();for(let V=0;V<m.length;V+=1)m[V].c();p=space(),x&&x.c(),g=space(),b=element("tbody");for(let V=0;V<v.length;V+=1)v[V].c();C=space(),create_component(E.$$.fragment),A=space(),create_component(k.$$.fragment),T=space(),H&&H.c(),$=space(),z&&z.c(),S=space(),Y&&Y.c(),attr(t,"type","text"),attr(t,"class","focus-field svelte-xkt834"),attr(l,"class","header-cell svelte-xkt834"),attr(l,"data-row","header"),attr(l,"data-col","header"),attr(l,"style",d=`width:${o[33]}px; min-width:${o[33]}px; max-width:${o[33]}px`),attr(r,"class","table svelte-xkt834"),attr(e,"class","container svelte-xkt834"),add_render_callback(()=>o[139].call(e))},m(V,J){insert(V,e,J),append(e,t),o[122](t),append(e,n),append(e,r),append(r,a),append(a,s),append(s,l),mount_component(u,l,null),append(s,f);for(let Q=0;Q<m.length;Q+=1)m[Q]&&m[Q].m(s,null);append(a,p),x&&x.m(a,null),append(r,g),append(r,b);for(let Q=0;Q<v.length;Q+=1)v[Q]&&v[Q].m(b,null);append(e,C),mount_component(E,e,null),append(e,A),mount_component(k,e,null),append(e,T),H&&H.m(e,null),append(e,$),z&&z.m(e,null),append(e,S),Y&&Y.m(e,null),I=add_iframe_resize_listener(e,o[139].bind(e)),R=!0,N||(M=[listen(t,"keydown",o[51]),listen(t,"focus",o[123]),listen(t,"paste",o[52]),listen(t,"copy",o[20]),listen(t,"blur",o[47]),listen(r,"mousedown",o[46]),listen(r,"mousemove",o[48]),listen(r,"mouseup",o[49]),action_destroyer(contextMenu.call(null,e,o[57])),listen(e,"wheel",o[50])],N=!0)},p(V,J){const Q={};J[1]&4096&&(Q.collapsed=V[43]),u.$set(Q),(!R||J[1]&4&&d!==(d=`width:${V[33]}px; min-width:${V[33]}px; max-width:${V[33]}px`))&&attr(l,"style",d),J[0]&526|J[1]&512&&(F=ensure_array_like(V[40]),group_outros(),m=update_keyed_each(m,J,D,1,V,F,h,s,outro_and_destroy_block,create_each_block_3$2,null,get_each_context_3$2),check_outros()),V[1].filterable?x?(x.p(V,J),J[0]&2&&transition_in(x,1)):(x=create_if_block_12$1(V),x.c(),transition_in(x,1),x.m(a,null)):x&&(group_outros(),transition_out(x,1,1,()=>{x=null}),check_outros()),J[0]&150999199|J[1]&37752419&&(B=ensure_array_like(_.range(V[24],Math.min(V[24]+V[32],V[0].rowCount))),group_outros(),v=update_keyed_each(v,J,K,1,V,B,y,b,outro_and_destroy_block,create_each_block_1$8,null,get_each_context_1$8),check_outros());const X={};J[1]&128&&(X.maximum=V[38]),J[0]&1610612736&&(X.viewportRatio=V[30]/V[29].getVisibleScrollSizeSum()),E.$set(X);const ie={};J[0]&1|J[1]&2&&(ie.maximum=V[0].rowCount-V[32]+2),J[0]&1|J[1]&2&&(ie.viewportRatio=V[32]/V[0].rowCount),k.$set(ie),q===(q=W(V))&&H?H.p(V,J):(H&&H.d(1),H=q&&q(V),H&&(H.c(),H.m(e,$))),V[5]?z?J[0]&32&&transition_in(z,1):(z=create_if_block_9$3(),z.c(),transition_in(z,1),z.m(e,S)):z&&(group_outros(),transition_out(z,1,1,()=>{z=null}),check_outros()),!V[15]&&!V[14]&&V[6]!=null?Y?(Y.p(V,J),J[0]&49216&&transition_in(Y,1)):(Y=create_if_block_8$3(V),Y.c(),transition_in(Y,1),Y.m(e,null)):Y&&(group_outros(),transition_out(Y,1,1,()=>{Y=null}),check_outros())},i(V){if(!R){transition_in(u.$$.fragment,V);for(let J=0;J<F.length;J+=1)transition_in(m[J]);transition_in(x);for(let J=0;J<B.length;J+=1)transition_in(v[J]);transition_in(E.$$.fragment,V),transition_in(k.$$.fragment,V),transition_in(z),transition_in(Y),R=!0}},o(V){transition_out(u.$$.fragment,V);for(let J=0;J<m.length;J+=1)transition_out(m[J]);transition_out(x);for(let J=0;J<v.length;J+=1)transition_out(v[J]);transition_out(E.$$.fragment,V),transition_out(k.$$.fragment,V),transition_out(z),transition_out(Y),R=!1},d(V){V&&detach(e),o[122](null),destroy_component(u);for(let J=0;J<m.length;J+=1)m[J].d();x&&x.d();for(let J=0;J<v.length;J+=1)v[J].d();o[135](null),destroy_component(E),o[137](null),destroy_component(k),H&&H.d(),z&&z.d(),Y&&Y.d(),I(),N=!1,run_all(M)}}}function create_if_block_7$3(o){let e,t,n=ensure_array_like(o[0].errors),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$u(get_each_context$u(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){e=element("div");for(let s=0;s<r.length;s+=1)r[s].c()},m(s,l){insert(s,e,l);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);t=!0},p(s,l){if(l[0]&1){n=ensure_array_like(s[0].errors);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$u(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$u(d),r[u].c(),transition_in(r[u],1),r[u].m(e,null))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_if_block_3$p(o){let e,t,n,r,a,s;t=new ErrorInfo({props:{alignTop:!0,message:o[0].editable?"No rows loaded, check filter or add new documents. You could copy documents from ohter collections/tables with Copy advanved/Copy as JSON command.":"No rows loaded"}});let l=o[1].filterCount>0&&create_if_block_6$7(o),u=o[0].editable&&create_if_block_5$d(o),d=o[16]&&create_if_block_4$l(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),l&&l.c(),r=space(),u&&u.c(),a=space(),d&&d.c()},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),l&&l.m(e,null),append(e,r),u&&u.m(e,null),append(e,a),d&&d.m(e,null),s=!0},p(f,m){const h={};m[0]&1&&(h.message=f[0].editable?"No rows loaded, check filter or add new documents. You could copy documents from ohter collections/tables with Copy advanved/Copy as JSON command.":"No rows loaded"),t.$set(h),f[1].filterCount>0?l?(l.p(f,m),m[0]&2&&transition_in(l,1)):(l=create_if_block_6$7(f),l.c(),transition_in(l,1),l.m(e,r)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros()),f[0].editable?u?(u.p(f,m),m[0]&1&&transition_in(u,1)):(u=create_if_block_5$d(f),u.c(),transition_in(u,1),u.m(e,a)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),f[16]?d?(d.p(f,m),m[0]&65536&&transition_in(d,1)):(d=create_if_block_4$l(f),d.c(),transition_in(d,1),d.m(e,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){s||(transition_in(t.$$.fragment,f),transition_in(l),transition_in(u),transition_in(d),s=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(l),transition_out(u),transition_out(d),s=!1},d(f){f&&detach(e),destroy_component(t),l&&l.d(),u&&u.d(),d&&d.d()}}}function create_if_block_1$Q(o){let e,t,n,r,a,s,l,u;t=new ErrorInfo({props:{message:o[8],alignTop:!0}}),r=new FormStyledButton({props:{value:"Reset filter"}}),r.$on("click",o[119]),s=new FormStyledButton({props:{value:"Reset view"}}),s.$on("click",o[120]);let d=o[16]&&create_if_block_2$B(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),d&&d.c()},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),append(e,l),d&&d.m(e,null),u=!0},p(f,m){const h={};m[0]&256&&(h.message=f[8]),t.$set(h),f[16]?d?(d.p(f,m),m[0]&65536&&transition_in(d,1)):(d=create_if_block_2$B(f),d.c(),transition_in(d,1),d.m(e,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){u||(transition_in(t.$$.fragment,f),transition_in(r.$$.fragment,f),transition_in(s.$$.fragment,f),transition_in(d),u=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(r.$$.fragment,f),transition_out(s.$$.fragment,f),transition_out(d),u=!1},d(f){f&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s),d&&d.d()}}}function create_if_block$1o(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Waiting for structure"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_3$2(o,e){let t,n,r,a,s,l;function u(...h){return e[125](e[180],...h)}function d(...h){return e[126](e[180],...h)}function f(...h){return e[128](e[180],...h)}function m(...h){return e[129](e[180],...h)}return n=new ColumnHeaderControl({props:{column:e[180],conid:e[2],database:e[3],setSort:e[1].sortable?u:null,addToSort:e[1].sortable?d:null,order:e[1].sortable?e[1].getSortOrder(e[180].uniqueName):null,orderIndex:e[1].sortable?e[1].getSortOrderIndex(e[180].uniqueName):-1,isSortDefined:e[1].sortable?e[1].isSortDefined():!1,clearSort:e[1].sortable?e[127]:null,setGrouping:e[1].groupable?f:null,grouping:e[1].getGrouping(e[180].uniqueName),allowDefineVirtualReferences:e[9]}}),n.$on("resizeSplitter",m),{key:o,first:null,c(){t=element("td"),create_component(n.$$.fragment),r=space(),attr(t,"class","header-cell svelte-xkt834"),attr(t,"data-row","header"),attr(t,"data-col",a=e[180].colIndex),attr(t,"style",s=`width:${e[180].width}px; min-width:${e[180].width}px; max-width:${e[180].width}px`),this.first=t},m(h,p){insert(h,t,p),mount_component(n,t,null),append(t,r),l=!0},p(h,p){e=h;const g={};p[1]&512&&(g.column=e[180]),p[0]&4&&(g.conid=e[2]),p[0]&8&&(g.database=e[3]),p[0]&2|p[1]&512&&(g.setSort=e[1].sortable?u:null),p[0]&2|p[1]&512&&(g.addToSort=e[1].sortable?d:null),p[0]&2|p[1]&512&&(g.order=e[1].sortable?e[1].getSortOrder(e[180].uniqueName):null),p[0]&2|p[1]&512&&(g.orderIndex=e[1].sortable?e[1].getSortOrderIndex(e[180].uniqueName):-1),p[0]&2&&(g.isSortDefined=e[1].sortable?e[1].isSortDefined():!1),p[0]&2&&(g.clearSort=e[1].sortable?e[127]:null),p[0]&2|p[1]&512&&(g.setGrouping=e[1].groupable?f:null),p[0]&2|p[1]&512&&(g.grouping=e[1].getGrouping(e[180].uniqueName)),p[0]&512&&(g.allowDefineVirtualReferences=e[9]),n.$set(g),(!l||p[1]&512&&a!==(a=e[180].colIndex))&&attr(t,"data-col",a),(!l||p[1]&512&&s!==(s=`width:${e[180].width}px; min-width:${e[180].width}px; max-width:${e[180].width}px`))&&attr(t,"style",s)},i(h){l||(transition_in(n.$$.fragment,h),l=!0)},o(h){transition_out(n.$$.fragment,h),l=!1},d(h){h&&detach(t),destroy_component(n)}}}function create_if_block_12$1(o){let e,t,n,r,a=[],s=new Map,l,u=o[1].filterCount>0&&create_if_block_13$1(o),d=ensure_array_like(o[40]);const f=m=>m[180].uniqueName;for(let m=0;m<d.length;m+=1){let h=get_each_context_2$2(o,d,m),p=f(h);s.set(p,a[m]=create_each_block_2$2(p,h))}return{c(){e=element("tr"),t=element("td"),u&&u.c(),r=space();for(let m=0;m<a.length;m+=1)a[m].c();attr(t,"class","header-cell svelte-xkt834"),attr(t,"data-row","filter"),attr(t,"data-col","header"),attr(t,"style",n=`width:${o[33]}px; min-width:${o[33]}px; max-width:${o[33]}px`)},m(m,h){insert(m,e,h),append(e,t),u&&u.m(t,null),append(e,r);for(let p=0;p<a.length;p+=1)a[p]&&a[p].m(e,null);l=!0},p(m,h){m[1].filterCount>0?u?(u.p(m,h),h[0]&2&&transition_in(u,1)):(u=create_if_block_13$1(m),u.c(),transition_in(u,1),u.m(t,null)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),(!l||h[1]&4&&n!==(n=`width:${m[33]}px; min-width:${m[33]}px; max-width:${m[33]}px`))&&attr(t,"style",n),h[0]&394254|h[1]&8405504&&(d=ensure_array_like(m[40]),group_outros(),a=update_keyed_each(a,h,f,1,m,d,s,e,outro_and_destroy_block,create_each_block_2$2,null,get_each_context_2$2),check_outros())},i(m){if(!l){transition_in(u);for(let h=0;h<d.length;h+=1)transition_in(a[h]);l=!0}},o(m){transition_out(u);for(let h=0;h<a.length;h+=1)transition_out(a[h]);l=!1},d(m){m&&detach(e),u&&u.d();for(let h=0;h<a.length;h+=1)a[h].d()}}}function create_if_block_13$1(o){let e,t;return e=new InlineButton({props:{square:!0,$$slots:{default:[create_default_slot$1g]},$$scope:{ctx:o}}}),e.$on("click",o[130]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[5]&1073741824&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$1g(o){let e,t;return e=new FontIcon({props:{icon:"icon filter-off"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_2$2(o,e){var h;let t,n,r,a,s,l;function u(...p){return e[131](e[180],...p)}function d(...p){return e[132](e[180],...p)}function f(){return e[133](e[180])}function m(...p){return e[134](e[180],...p)}return n=new DataFilterControl({props:{onGetReference:u,foreignKey:e[180].foreignKey,columnName:e[180].uniquePath.length==1?e[180].uniquePath[0]:null,uniqueName:e[180].uniqueName,pureName:e[180].pureName,schemaName:e[180].schemaName,conid:e[2],database:e[3],jslid:e[18],formatterFunction:e[10],driver:(h=e[1])==null?void 0:h.driver,filterType:e[17]?"eval":e[180].filterType||lib$1.getFilterType(e[180].dataType),filter:e[1].getFilter(e[180].uniqueName),setFilter:d,showResizeSplitter:!0,onFocusGrid:f}}),n.$on("resizeSplitter",m),{key:o,first:null,c(){t=element("td"),create_component(n.$$.fragment),r=space(),attr(t,"class","filter-cell svelte-xkt834"),attr(t,"data-row","filter"),attr(t,"data-col",a=e[180].colIndex),attr(t,"style",s=`width:${e[180].width}px; min-width:${e[180].width}px; max-width:${e[180].width}px`),this.first=t},m(p,g){insert(p,t,g),mount_component(n,t,null),append(t,r),l=!0},p(p,g){var v;e=p;const b={};g[1]&512&&(b.onGetReference=u),g[1]&512&&(b.foreignKey=e[180].foreignKey),g[1]&512&&(b.columnName=e[180].uniquePath.length==1?e[180].uniquePath[0]:null),g[1]&512&&(b.uniqueName=e[180].uniqueName),g[1]&512&&(b.pureName=e[180].pureName),g[1]&512&&(b.schemaName=e[180].schemaName),g[0]&4&&(b.conid=e[2]),g[0]&8&&(b.database=e[3]),g[0]&262144&&(b.jslid=e[18]),g[0]&1024&&(b.formatterFunction=e[10]),g[0]&2&&(b.driver=(v=e[1])==null?void 0:v.driver),g[0]&131072|g[1]&512&&(b.filterType=e[17]?"eval":e[180].filterType||lib$1.getFilterType(e[180].dataType)),g[0]&2|g[1]&512&&(b.filter=e[1].getFilter(e[180].uniqueName)),g[0]&2|g[1]&512&&(b.setFilter=d),g[1]&512&&(b.onFocusGrid=f),n.$set(b),(!l||g[1]&512&&a!==(a=e[180].colIndex))&&attr(t,"data-col",a),(!l||g[1]&512&&s!==(s=`width:${e[180].width}px; min-width:${e[180].width}px; max-width:${e[180].width}px`))&&attr(t,"style",s)},i(p){l||(transition_in(n.$$.fragment,p),l=!0)},o(p){transition_out(n.$$.fragment,p),l=!1},d(p){p&&detach(t),destroy_component(n)}}}function create_each_block_1$8(o,e){var a,s,l;let t,n,r;return n=new DataGridRow({props:{rowIndex:e[177],grider:e[0],conid:e[2],database:e[3],driver:(a=e[1])==null?void 0:a.driver,visibleRealColumns:e[40],rowHeight:e[31],autofillSelectedCells:e[37],isDynamicStructure:e[12],selectedCells:filterCellsForRow(e[27],e[177]),autofillMarkerCell:filterCellForRow(e[41],e[177]),focusedColumns:e[1].focusedColumns,inplaceEditorState:e[42],currentCellColumn:e[36]&&e[36][0]==e[177]?e[36][1]:null,dispatchInsplaceEditor:e[56],frameSelection:e[4],onSetFormView:e[7]&&((l=(s=e[1])==null?void 0:s.baseTable)!=null&&l.primaryKey)?e[53]:null}}),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(u,d){insert(u,t,d),mount_component(n,u,d),r=!0},p(u,d){var m,h,p;e=u;const f={};d[0]&16777217|d[1]&2&&(f.rowIndex=e[177]),d[0]&1&&(f.grider=e[0]),d[0]&4&&(f.conid=e[2]),d[0]&8&&(f.database=e[3]),d[0]&2&&(f.driver=(m=e[1])==null?void 0:m.driver),d[1]&512&&(f.visibleRealColumns=e[40]),d[1]&1&&(f.rowHeight=e[31]),d[1]&64&&(f.autofillSelectedCells=e[37]),d[0]&4096&&(f.isDynamicStructure=e[12]),d[0]&150994945|d[1]&2&&(f.selectedCells=filterCellsForRow(e[27],e[177])),d[0]&16777217|d[1]&1026&&(f.autofillMarkerCell=filterCellForRow(e[41],e[177])),d[0]&2&&(f.focusedColumns=e[1].focusedColumns),d[1]&2048&&(f.inplaceEditorState=e[42]),d[0]&16777217|d[1]&34&&(f.currentCellColumn=e[36]&&e[36][0]==e[177]?e[36][1]:null),d[0]&16&&(f.frameSelection=e[4]),d[0]&130&&(f.onSetFormView=e[7]&&((p=(h=e[1])==null?void 0:h.baseTable)!=null&&p.primaryKey)?e[53]:null),n.$set(f)},i(u){r||(transition_in(n.$$.fragment,u),r=!0)},o(u){transition_out(n.$$.fragment,u),r=!1},d(u){u&&detach(t),destroy_component(n,u)}}}function create_if_block_11$2(o){let e,t,n=o[6].toLocaleString()+"",r;return{c(){e=element("div"),t=text("Rows: "),r=text(n),attr(e,"class","row-count-label svelte-xkt834")},m(a,s){insert(a,e,s),append(e,t),append(e,r)},p(a,s){s[0]&64&&n!==(n=a[6].toLocaleString()+"")&&set_data(r,n)},d(a){a&&detach(e)}}}function create_if_block_10$2(o){let e,t;return{c(){e=element("div"),t=text(o[39]),attr(e,"class","row-count-label svelte-xkt834")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r[1]&256&&set_data(t,n[39])},d(n){n&&detach(e)}}}function create_if_block_9$3(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_8$3(o){let e,t;return e=new StatusBarTabItem({props:{text:`Rows: ${o[6].toLocaleString()}`}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&64&&(a.text=`Rows: ${n[6].toLocaleString()}`),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$u(o){let e,t;return e=new ErrorInfo({props:{message:o[174],isSmall:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&1&&(a.message=n[174]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$7(o){let e,t;return e=new FormStyledButton({props:{value:"Reset filter"}}),e.$on("click",o[121]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$d(o){let e,t;return e=new FormStyledButton({props:{value:"Add document"}}),e.$on("click",o[21]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$l(o){let e,t;return e=new FormStyledButton({props:{value:"Open Query"}}),e.$on("click",function(){is_function(o[16])&&o[16].apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){o=n},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$B(o){let e,t;return e=new FormStyledButton({props:{value:"Open Query"}}),e.$on("click",function(){is_function(o[16])&&o[16].apply(this,arguments)}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){o=n},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$36(o){let e,t,n,r;const a=[create_if_block$1o,create_if_block_1$Q,create_if_block_3$p,create_if_block_7$3,create_else_block$D],s=[];function l(u,d){var f;return!u[1]||!u[12]&&(!u[28]||u[28].length==0)?0:u[8]?1:u[12]&&u[11]&&((f=u[0])==null?void 0:f.rowCount)==0?2:u[0].errors&&u[0].errors.length>0?3:4}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}globalThis&&globalThis.__awaiter;const getCurrentDataGrid=()=>getActiveComponent("DataGridCore");registerCommand({id:"dataGrid.refresh",category:"Data grid",name:"Refresh",keyText:"F5 | CtrlOrCommand+R",toolbar:!0,isRelatedToTab:!0,icon:"icon reload",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.canRefresh()},onClick:()=>getCurrentDataGrid().refresh()});registerCommand({id:"dataGrid.deepRefresh",category:"Data grid",name:"Refresh with structure",keyText:"Ctrl+F5",toolbar:!0,isRelatedToTab:!0,icon:"icon reload",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.canDeepRefresh()},onClick:()=>getCurrentDataGrid().deepRefresh()});registerCommand({id:"dataGrid.revertRowChanges",category:"Data grid",name:"Revert row changes",keyText:"CtrlOrCommand+U",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.containsChanges},onClick:()=>getCurrentDataGrid().revertRowChanges()});registerCommand({id:"dataGrid.revertAllChanges",category:"Data grid",name:"Revert all changes",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.containsChanges},onClick:()=>getCurrentDataGrid().revertAllChanges()});registerCommand({id:"dataGrid.deleteSelectedRows",category:"Data grid",name:"Delete selected rows",toolbarName:"Delete",keyText:isMac()?"Command+Backspace":"CtrlOrCommand+Delete",icon:"icon minus",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.editable},onClick:()=>getCurrentDataGrid().deleteSelectedRows()});registerCommand({id:"dataGrid.insertNewRow",category:"Data grid",name:"Insert new row",toolbarName:"New",icon:"icon add",keyText:isMac()?"Command+I":"Insert",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.editable},onClick:()=>getCurrentDataGrid().insertNewRow()});registerCommand({id:"dataGrid.cloneRows",category:"Data grid",name:"Clone rows",toolbarName:"Clone row(s)",keyText:"CtrlOrCommand+Shift+C",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.editable},onClick:()=>getCurrentDataGrid().cloneRows()});registerCommand({id:"dataGrid.setNull",category:"Data grid",name:"Set NULL",keyText:"CtrlOrCommand+0",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.editable},onClick:()=>getCurrentDataGrid().setFixedValue(null)});registerCommand({id:"dataGrid.undo",category:"Data grid",name:"Undo",group:"undo",icon:"icon undo",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.canUndo},onClick:()=>getCurrentDataGrid().undo()});registerCommand({id:"dataGrid.redo",category:"Data grid",name:"Redo",group:"redo",icon:"icon redo",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o,e;return(e=(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.canRedo},onClick:()=>getCurrentDataGrid().redo()});registerCommand({id:"dataGrid.reconnect",category:"Data grid",name:"Reconnect",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().reconnect()});registerCommand({id:"dataGrid.copyToClipboard",category:"Data grid",name:"Copy to clipboard",keyText:"CtrlOrCommand+C",disableHandleKeyText:"CtrlOrCommand+C",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().copyToClipboard()});registerCommand({id:"dataGrid.editJsonDocument",category:"Data grid",keyText:"CtrlOrCommand+J",name:"Edit row as JSON document",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.editJsonEnabled()},onClick:()=>getCurrentDataGrid().editJsonDocument()});registerCommand({id:"dataGrid.openSelectionInMap",category:"Data grid",name:"Open selection in map",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().openSelectionInMap()});registerCommand({id:"dataGrid.viewJsonDocument",category:"Data grid",name:"View row as JSON document",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.viewJsonDocumentEnabled()},onClick:()=>getCurrentDataGrid().viewJsonDocument()});registerCommand({id:"dataGrid.viewJsonValue",category:"Data grid",name:"View cell as JSON document",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.viewJsonValueEnabled()},onClick:()=>getCurrentDataGrid().viewJsonValue()});registerCommand({id:"dataGrid.openJsonArrayInSheet",category:"Data grid",name:"Open array as table",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.openJsonArrayInSheetEnabled()},onClick:()=>getCurrentDataGrid().openJsonArrayInSheet()});registerCommand({id:"dataGrid.saveCellToFile",category:"Data grid",name:"Save cell to file",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.saveCellToFileEnabled()},onClick:()=>getCurrentDataGrid().saveCellToFile()});registerCommand({id:"dataGrid.loadCellFromFile",category:"Data grid",name:"Load cell from file",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.loadCellFromFileEnabled()},onClick:()=>getCurrentDataGrid().loadCellFromFile()});registerCommand({id:"dataGrid.filterSelected",category:"Data grid",name:"Filter selected value",keyText:"CtrlOrCommand+Shift+F",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.getDisplay().filterable},onClick:()=>getCurrentDataGrid().filterSelectedValue()});registerCommand({id:"dataGrid.findColumn",category:"Data grid",name:"Find column",keyText:"CtrlOrCommand+F",testEnabled:()=>getCurrentDataGrid()!=null,getSubCommands:()=>getCurrentDataGrid().buildFindMenu()});registerCommand({id:"dataGrid.hideColumn",category:"Data grid",name:"Hide column",keyText:isMac()?"Alt+Command+F":"CtrlOrCommand+H",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().hideColumn()});registerCommand({id:"dataGrid.clearFilter",category:"Data grid",name:"Clear filter",keyText:"CtrlOrCommand+Shift+E",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.clearFilterEnabled()},onClick:()=>getCurrentDataGrid().clearFilter()});registerCommand({id:"dataGrid.generateSqlFromData",category:"Data grid",name:"Generate SQL",keyText:"CtrlOrCommand+G",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.generateSqlFromDataEnabled()},onClick:()=>getCurrentDataGrid().generateSqlFromData()});registerCommand({id:"dataGrid.openFreeTable",category:"Data grid",name:"Edit selection as table",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().openFreeTable()});registerCommand({id:"dataGrid.openChartFromSelection",category:"Data grid",name:"Open chart from selection",testEnabled:()=>getCurrentDataGrid()!=null,onClick:()=>getCurrentDataGrid().openChartFromSelection()});registerCommand({id:"dataGrid.newJson",category:"Data grid",name:"Add JSON document",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.addJsonDocumentEnabled()},onClick:()=>getCurrentDataGrid().addJsonDocument()});registerCommand({id:"dataGrid.editCellValue",category:"Data grid",name:"Edit cell value",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.editCellValueEnabled()},onClick:()=>getCurrentDataGrid().editCellValue()});registerCommand({id:"dataGrid.mergeSelectedCellsIntoMirror",category:"Data grid",name:"Merge selected cells",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"merge",fullRows:!1})});registerCommand({id:"dataGrid.mergeSelectedRowsIntoMirror",category:"Data grid",name:"Merge selected rows",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"merge",fullRows:!0})});registerCommand({id:"dataGrid.appendSelectedCellsIntoMirror",category:"Data grid",name:"Append selected cells",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"append",fullRows:!1})});registerCommand({id:"dataGrid.appendSelectedRowsIntoMirror",category:"Data grid",name:"Append selected rows",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"append",fullRows:!0})});registerCommand({id:"dataGrid.replaceSelectedCellsIntoMirror",category:"Data grid",name:"Replace with selected cells",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"replace",fullRows:!1})});registerCommand({id:"dataGrid.replaceSelectedRowsIntoMirror",category:"Data grid",name:"Replace with selected rows",testEnabled:()=>{var o;return(o=getCurrentDataGrid())===null||o===void 0?void 0:o.mirrorWriteEnabled(!0)},onClick:()=>getCurrentDataGrid().mergeSelectionIntoMirror({mergeMode:"replace",fullRows:!0})});function getSelectedCellsInfo(o,e,t,n){if(o.length>1&&o.every(r=>_.isNumber(r[0])&&_.isNumber(r[1]))){let r=_.sumBy(o,l=>{const u=e.getRowData(l[0]);if(u){const d=t[l[1]];if(d){const f=u[d];if(!f)return 0;let m=+f;return _.isNaN(m)?0:m}}return 0}),a=o.length;return`Rows: ${n.length.toLocaleString()}, Count: ${a.toLocaleString()}, Sum:${r.toLocaleString()}`}return null}const wheelRowCount=5;function instance$34(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$=noop$1,S=()=>($(),$=subscribe(he,te=>t(43,T=te)),he);component_subscribe(o,copyRowsFormat,te=>t(145,v=te)),component_subscribe(o,selectedCellsCallback,te=>t(146,C=te)),component_subscribe(o,currentArchive,te=>t(147,A=te)),component_subscribe(o,dataGridRowHeight,te=>t(118,k=te)),o.$$.on_destroy.push(()=>$());var I=this&&this.__awaiter||function(te,Te,He,Ke){function nt(dt){return dt instanceof He?dt:new He(function(Dt){Dt(dt)})}return new(He||(He=Promise))(function(dt,Dt){function Gt(Qt){try{Bt(Ke.next(Qt))}catch(Sn){Dt(Sn)}}function mn(Qt){try{Bt(Ke.throw(Qt))}catch(Sn){Dt(Sn)}}function Bt(Qt){Qt.done?dt(Qt.value):nt(Qt.value).then(Gt,mn)}Bt((Ke=Ke.apply(te,Te||[])).next())})},R,N;let{onLoadNextData:M=void 0}=e,{grider:F=void 0}=e,{display:D=void 0}=e,{conid:x=void 0}=e,{database:B=void 0}=e,{frameSelection:K=void 0}=e,{isLoading:U=!1}=e,{allRowCount:G=void 0}=e,{onReferenceSourceChanged:W=void 0}=e,{onReferenceClick:q=void 0}=e,{onChangeSelectedColumns:H=void 0}=e,{focusOnVisible:z=!1}=e,{formViewAvailable:Y=!1}=e,{errorMessage:V=void 0}=e,{pureName:J=void 0}=e,{schemaName:Q=void 0}=e,{allowDefineVirtualReferences:X=!1}=e,{formatterFunction:ie}=e,{isLoadedAll:ce}=e,{loadedTime:de}=e,{changeSetStore:se}=e,{isDynamicStructure:me=!1}=e,{selectedCellsPublished:ue=()=>[]}=e,{collapsedLeftColumnStore:he}=e;S();let{multipleGridsOnTab:pe=!1}=e,{tabControlHiddenTab:Oe=!1}=e,{onCustomGridRefresh:qe=null}=e,{onOpenQuery:et=null}=e,{useEvalFilters:Ue=!1}=e,{jslid:fe}=e;const Ie=createActivator("DataGridCore",!1),We=getContext("tabVisible");component_subscribe(o,We,te=>t(117,E=te));let $e=0,Le=0,ze=0,re=0,ge,Be,Ze,Pe=topLeftCell,Ee=[topLeftCell],Ce=nullCell,je=nullCell,pt=nullCell,wt=emptyCellArray;const ut=createRef({});getContext("tabid");let Ct;onDestroy(xt);function xt(){Ct&&(Ct(),Ct=null)}function ht(te){return I(this,void 0,void 0,function*(){(te==null?void 0:te.name)!="pending"&&(te==null?void 0:te.name)!="checkStructure"&&(te==null?void 0:te.name)!="loadStructure"&&(xt(),yield getDatabaseInfo({conid:x,database:B}),Rt())})}function Rt(){qe?qe():D.reload()}function Ae(){var te;return qe?!0:(te=ot())===null||te===void 0?void 0:te.supportsReload}function Me(){return Ae()&&!!x&&!!B}function xe(){return I(this,void 0,void 0,function*(){xt(),yield apiCall("database-connections/sync-model",{conid:x,database:B}),Ct=useDatabaseStatus({conid:x,database:B}).subscribe(ht)})}function Qe(){return F}function rt(){return se}function ot(){return D}function ft(){F.beginUpdate();for(const te of It())_.isNumber(te)&&F.revertRowChanges(te);F.endUpdate()}function kt(){F.revertAllChanges()}function $t(){F.beginUpdate();for(const te of _.sortBy(It(),Te=>-Te))_.isNumber(te)&&F.deleteRow(te);F.endUpdate()}function Lt(){return I(this,void 0,void 0,function*(){if(!F.canInsert)return;const Te=[F.insertRow(),Pe&&Pe[1]||0];t(36,Pe=Te),t(27,Ee=[Te]),yield tick(),mt(Te)})}function Ut(){return I(this,void 0,void 0,function*(){if(!F.canInsert)return;let te=null;F.beginUpdate();for(const He of _.sortBy(It(),Ke=>Ke))if(_.isNumber(He)){te=F.insertRow();for(const Ke of D.columns)Ke.uniquePath.length>1||Ke.autoIncrement||Ke.columnName=="_id"&&me||F.setCellValue(te,Ke.uniqueName,F.getRowData(He)[Ke.uniqueName])}if(F.endUpdate(),te==null)return;const Te=[te,Pe&&Pe[1]||0];t(36,Pe=Te),t(27,Ee=[Te]),yield tick(),mt(Te)})}function rn(te){F.beginUpdate(),Ee.filter(isRegularCell).forEach(Te=>{vt(Te,te)}),F.endUpdate()}function zt(){F.undo()}function lt(){F.redo()}function Cn(){return I(this,void 0,void 0,function*(){yield apiCall("database-connections/refresh",{conid:x,database:B}),D.reload()})}function an(te){var Te,He,Ke;const nt=Ln(Ee),dt=_.sortBy(_.uniq(nt.map(Bt=>Bt[0]))),Dt=_.sortBy(_.uniq(nt.map(Bt=>Bt[1]))),Gt=dt.map(Bt=>F.getRowData(Bt)),mn=Dt.map(Bt=>g[Bt]);copyRowsToClipboard(te,mn,Gt,{schemaName:Q,pureName:J||"target",driver:(D==null?void 0:D.driver)||lib.driverBase,keyColumns:((Ke=(He=(Te=D==null?void 0:D.baseTable)===null||Te===void 0?void 0:Te.primaryKey)===null||He===void 0?void 0:He.columns)===null||Ke===void 0?void 0:Ke.map(Bt=>Bt.columnName))||[D!=null&&D.columns?D==null?void 0:D.columns[0].columnName:mn[0]]}),ge&&ge.focus()}function wn(){an(v)}function vn(){M&&ze+f>=F.rowCount&&M()}function _n(){const te={};for(const Te of Ee){if(!isRegularCell(Te))continue;const He=s.realToModel(Te[1]),Ke=a[He].uniqueName;let nt=F.getRowData(Te[0])[Ke],dt=lib$1.getFilterValueExpression(nt,a[He].dataType);_.has(te,Ke)?te[Ke]+=","+dt:te[Ke]=dt}D.setFilters(te)}function sn(){D.clearFilters()}function Yt(){return D.filterCount>0}function nn(){openJsonLinesData(tt())}function Zt(){openNewTab({title:"Chart #",icon:"img chart",tabComponent:"ChartTab",props:{}},{editor:{data:Ye(),config:{chartType:"bar"}}})}function ln(){return me&&_.uniq(Ee.map(te=>te[0])).length==1}function cn(){const te=Ee[0][0],Te=F.getRowData(te);openJsonDocument(Te)}function hn(){const te=at(Ee);if(!selectionCouldBeShownOnMap(te)){showModal(ErrorMessageModal,{message:"There is nothing to be shown on map"});return}openNewTab({title:"Map",icon:"img map",tabComponent:"MapTab"},{editor:te.map(Te=>_.omit(Te,["engine"]))})}function un(){if(getElectron()&&Ee.length==1){const Te=Ee[0],He=F.getRowData(Te[0]);return He?He[g[Te[1]]]:null}}function En(){const te=un();return _.isString(te)||(te==null?void 0:te.type)=="Buffer"&&_.isArray(te==null?void 0:te.data)}function ve(){return I(this,void 0,void 0,function*(){const Te=yield getElectron().showSaveDialog({});if(Te){const He=window.require("fs"),Ke=un();_.isString(Ke)?He.promises.writeFile(Te,Ke):(Ke==null?void 0:Ke.type)=="Buffer"&&_.isArray(Ke==null?void 0:Ke.data)&&He.promises.writeFile(Te,window.Buffer.from(Ke.data))}})}function ct(){return getElectron()&&Ee.length==1&&isRegularCell(Ee[0])}function bt(){return I(this,void 0,void 0,function*(){const Te=yield getElectron().showOpenDialog({properties:["showHiddenFiles","openFile"],filters:[{name:"All Files",extensions:["*"]}]}),He=Te&&Te[0];if(He){const Ke=window.require("fs"),nt=He.endsWith(".json")||He.endsWith(".txt")||He.endsWith(".html")||He.endsWith(".xml"),dt=yield Ke.promises.readFile(He,nt?{encoding:"utf-8"}:null);vt(Ee[0],nt?dt:{type:"Buffer",data:[...dt]})}})}function At(te=!1){const He=Ln(Ee).map(Ke=>{const nt=F.getRowData(Ke[0]);return nt?nt[g[Ke[1]]]:null});return!He.every(Ke=>_.isArray(Ke)||_.isPlainObject(Ke))||He.length==0?null:He.length==1&&_.isPlainObject(He[0])&&!te?He[0]:_.flatten(He)}function Wt(){return At()!=null}function Ot(){openJsonDocument(At())}function Xt(){return At()!=null}function jt(){openJsonLinesData(At(!0))}function Jt(){return F.editable&&_.uniq(Ee.map(te=>te[0])).length==1}function yn(){const te=Ee[0][0];editJsonRowDocument(F,te)}function pn(){return F.editable&&Ee.length==1}function St(){if(!Pe)return!1;const te=F.getRowData(Pe[0]);if(!te)return null;const Te=te[g[Pe[1]]];showModal(EditCellDataModal,{value:(Te==null?void 0:Te.toString())||"",onSave:He=>F.setCellValue(Pe[0],g[Pe[1]],He)})}function ne(){return F.editable}function ye(){showModal(EditJsonModal,{showPasteInfo:!0,onSave:te=>(F.insertDocuments(_.isArray(te)?te:[te]),!0)})}function le(){var te,Te;const He=[];function Ke(nt){return I(this,void 0,void 0,function*(){D.setColumnVisibility(nt,!0),yield tick();const Dt=_.invert(g)[nt.join(".")];mt([null,Dt]),t(36,Pe=[Pe[0],parseInt(Dt)]),t(27,Ee=[Pe])})}for(const nt of D.columns)nt.uniquePath.length>1||He.push({text:nt.columnName,icon:"img column",onClick:()=>I(this,void 0,void 0,function*(){Ke(nt.uniquePath)})});for(const nt of D.columns)if(!(nt.uniquePath.length>1)&&nt.isExpandable){const dt=D.getFkTarget(nt);if(!dt)continue;for(const Dt of dt.columns)He.push({text:`${nt.columnName}.${Dt.columnName}`,icon:"img column",onClick:()=>I(this,void 0,void 0,function*(){D.toggleExpandedColumn(nt.uniqueName,!0),Ke([...nt.uniquePath,Dt.columnName])})})}for(const nt of((te=D==null?void 0:D.baseTable)===null||te===void 0?void 0:te.foreignKeys)||[])He.push({text:`${nt.refTableName} (${nt.columns.map(dt=>dt.columnName).join(", ")})`,icon:"img link",onClick:()=>{q({schemaName:nt.refSchemaName,pureName:nt.refTableName,columns:nt.columns.map(dt=>({baseName:dt.columnName,refName:dt.refColumnName}))})}});for(const nt of((Te=D==null?void 0:D.baseTable)===null||Te===void 0?void 0:Te.dependencies)||[])He.push({text:`${nt.pureName} (${nt.columns.map(dt=>dt.columnName).join(", ")})`,icon:"img reference",onClick:()=>{q({schemaName:nt.schemaName,pureName:nt.pureName,columns:nt.columns.map(dt=>({baseName:dt.refColumnName,refName:dt.columnName}))})}});return He}function we(){const te=_.uniq(Ee.map(Te=>Te[1]));for(const Te of te){const He=g[Te],Ke=D.allColumns.find(nt=>nt.uniqueName==He);Ke&&D.setColumnVisibility(Ke.uniquePath,!1)}}function Se(){return!!(D!=null&&D.baseTable)}function be(){var te,Te,He;const Ke=_.uniq(Ee.map(nt=>nt[1]));Ke.sort((nt,dt)=>nt-dt),showModal(GenerateSqlFromDataModal,{rows:Ft(),allColumns:D.baseTable.columns.map(nt=>nt.columnName),selectedColumns:Ke.map(nt=>g[nt]),keyColumns:((He=(Te=(te=D==null?void 0:D.baseTable)===null||te===void 0?void 0:te.primaryKey)===null||Te===void 0?void 0:Te.columns)===null||He===void 0?void 0:He.map(nt=>nt.columnName))||[D.baseTable.columns[0].columnName],engineDriver:D==null?void 0:D.driver,tableInfo:D.baseTable})}function Fe(te){var Te;return te?!!(!((Te=D.baseTable)===null||Te===void 0)&&Te.primaryKey)||!!D.baseCollection:!!D.baseTableOrSimilar}function Ve({fullRows:te,mergeMode:Te="merge"}){var He,Ke;return I(this,void 0,void 0,function*(){const nt=(He=D.baseTableOrSimilar)===null||He===void 0?void 0:He.pureName,dt=D.baseCollection?["_id"]:(Ke=D.baseTable)===null||Ke===void 0?void 0:Ke.primaryKey.columns.map(en=>en.columnName),Dt=Ln(Ee),Gt=_.sortBy(_.uniq(Dt.map(en=>en[0]))),mn=_.sortBy(_.uniq(Dt.map(en=>en[1]))),Bt=Gt.map(en=>F.getRowData(en)),Qt=mn.map(en=>g[en]),Sn=te?Bt:Bt.map(en=>_.pick(en,_.uniq([...Qt,...dt])));(yield apiCall("archive/modify-file",{folder:A,file:nt,mergedRows:Sn,mergeKey:dt,mergeMode:Te}))&&showSnackbarSuccess(`Merged ${Sn.length} rows into ${nt} in archive ${A}`)})}const Xe=createRef(""),Ye=()=>{const te=Ht(),Te=Ft().map(He=>_.pickBy(He,(Ke,nt)=>te.find(dt=>dt.columnName==nt)));return{structure:{columns:te},rows:Te}},tt=()=>{const te=Ht();return Ft().map(He=>_.pickBy(He,(Ke,nt)=>te.find(dt=>dt.columnName==nt)))};function at(te){return Ln(te).map(Ke=>{const nt=Ke[0],dt=F.getRowData(nt),Dt=g[Ke[1]];return{row:nt,rowData:dt,column:Dt,value:dt&&dt[Dt],engine:D==null?void 0:D.driver}}).filter(Ke=>Ke.column)}function mt(te){const[Te,He]=te;if(Te!=null){let Ke=null;const nt=F.rowCount;if(nt==0)return;Te<ze?Ke=Te:Te+1>=ze+m&&(Ke=Te-m+2),Ke<0&&(Ke=0),Ke>=nt&&(Ke=nt-1),Ke!=null&&(t(24,ze=Ke),Ze.scroll(Ke))}if(He!=null&&He>=s.frozenCount){let Ke=s.scrollInView(re,He-s.frozenCount,d);t(25,re=Ke),Be.scroll(Ke)}}function _t(te){if(te.target.closest(".buttonLike")||te.target.closest(".resizeHandleControl")||te.target.closest(".collapseButtonMarker")||te.target.closest(".showFormButtonMarker")||te.target.closest("input"))return;je=null,te.preventDefault(),ge&&ge.focus();const Te=cellFromEvent(te);if(te.button==2){Te&&!cellIsSelected(Te[0],Te[1],Ee)&&t(27,Ee=[Te]);return}if(te.target.closest("div.autofillHandleMarker"))pt=Te;else{const Ke=Pe;t(36,Pe=Te),isCtrlOrCommandKey(te)?isRegularCell(Te)&&(Ee.find(nt=>nt[0]==Te[0]&&nt[1]==Te[1])?t(27,Ee=Ee.filter(nt=>nt[0]!=Te[0]||nt[1]!=Te[1])):t(27,Ee=[...Ee,Te])):te.shiftKey?t(27,Ee=getCellRange(Ke,Te)):(t(27,Ee=getCellRange(Te,Te)),Ce=Te,isRegularCell(Te)&&!_.isEqual(Te,y.cell)&&_.isEqual(Te,Ke)?ae(Te)||dn({type:"show",cell:Te,selectAll:!0}):_.isEqual(Te,y.cell)||dn({type:"close"}))}D.focusedColumns&&D.focusColumns(null)}function ee(){je=null,Ce=null}function ae(te){if(!te)return!1;const Te=F.getRowData(te[0]);if(!Te)return null;const He=Te[g[te[1]]];return shouldOpenMultilineDialog(He)?(showModal(EditCellDataModal,{value:He,onSave:Ke=>F.setCellValue(te[0],g[te[1]],Ke)}),!0):!1}function _e(te){if(pt){const Te=cellFromEvent(te);if(isRegularCell(Te)&&(Te[0]==pt[0]||Te[1]==pt[1])){const He=[Ee[0][0],_.min(Ee.map(Ke=>Ke[1]))];t(37,wt=getCellRange(He,Te))}}else if(Ce){const Te=cellFromEvent(te);t(36,Pe=Te),t(27,Ee=getCellRange(Ce,Te))}}function Re(te){if(Ce){const Te=cellFromEvent(te);t(36,Pe=Te),t(27,Ee=getCellRange(Ce,Te)),Ce=null}if(pt){const Te=Pe[0];if(_.isNumber(Te)){const He=_.uniq((wt||[]).map(dt=>dt[0])).filter(dt=>dt!=Te),Ke=Ee.map(dt=>g[dt[1]]),nt=_.pick(F.getRowData(Te),Ke);F.beginUpdate();for(const dt of He)F.updateRow(dt,nt);F.endUpdate()}pt=null,t(37,wt=[]),t(27,Ee=wt)}}function Ge(te){te.shiftKey?yt(te.deltaY,te.deltaX):(yt(te.deltaX,te.deltaY),it(te.deltaX,te.deltaY))}function it(te,Te){let He=ze;Te>0&&te===-0?He+=wheelRowCount:Te<0&&te===-0&&(He-=wheelRowCount);let Ke=F.rowCount;He+m>Ke&&(He=Ke-m+1),He<0&&(He=0),t(24,ze=He),Ze.scroll(He)}function yt(te,Te){let He=re;te>0&&Te===-0?He++:te<0&&Te===-0&&He--,He>b&&(He=b),He<0&&(He=0),t(25,re=He),Be.scroll(He)}function It(){return Ee.find(te=>te[0]=="header")?_.range(0,F.rowCount):_.uniq((Ee||[]).map(te=>te[0])).filter(te=>_.isNumber(te))}function Pt(){return Ee.find(te=>te[1]=="header")?_.range(0,g.length):_.uniq((Ee||[]).map(te=>te[1])).filter(te=>_.isNumber(te))}function Ft(){return _.compact(It().map(te=>F.getRowData(te)))}function Ht(){return _.compact(Pt().map(te=>({columnName:g[te]})))}function Fn(te){y.cell||(!te.ctrlKey&&!te.altKey&&!te.metaKey&&(te.keyCode>=keycodes.a&&te.keyCode<=keycodes.z||te.keyCode>=keycodes.n0&&te.keyCode<=keycodes.n9||te.keyCode>=keycodes.numPad0&&te.keyCode<=keycodes.numPad9||te.keyCode==keycodes.dash)&&(te.preventDefault(),dn({type:"show",text:te.key,cell:Pe})),(te.keyCode==keycodes.f2||te.keyCode==keycodes.enter)&&(ae(Pe)||dn({type:"show",cell:Pe,selectAll:!0})),te.shiftKey?isRegularCell(je)||(je=Pe):je=nullCell,Kn(te),te.shiftKey&&te.keyCode!=keycodes.shift&&te.keyCode!=keycodes.tab&&te.keyCode!=keycodes.ctrl&&te.keyCode!=keycodes.leftWindowKey&&te.keyCode!=keycodes.rightWindowKey&&!(te.keyCode>=keycodes.a&&te.keyCode<=keycodes.z||te.keyCode>=keycodes.n0&&te.keyCode<=keycodes.n9||te.keyCode>=keycodes.numPad0&&te.keyCode<=keycodes.numPad9||te.keyCode==keycodes.dash)&&t(27,Ee=getCellRange(je||Pe,Pe)))}function Kn(te){if(!isRegularCell(Pe))return null;let Te=F.rowCount;if(isCtrlOrCommandKey(te))switch(te.keyCode){case keycodes.upArrow:case keycodes.pageUp:return Nt(0,Pe[1],te);case keycodes.downArrow:case keycodes.pageDown:return Nt(Te-1,Pe[1],te);case keycodes.leftArrow:return Nt(Pe[0],0,te);case keycodes.rightArrow:return Nt(Pe[0],s.realCount-1,te);case keycodes.home:return Nt(0,0,te);case keycodes.end:return Nt(Te-1,s.realCount-1,te);case keycodes.a:return t(27,Ee=[["header","header"]]),te.preventDefault(),["header","header"]}else switch(te.keyCode){case keycodes.upArrow:return Pe[0]==0?Zn(Pe[1]):Nt(Pe[0]-1,Pe[1],te);case keycodes.downArrow:return Nt(Pe[0]+1,Pe[1],te);case keycodes.enter:if(!F.editable)return Nt(Pe[0]+1,Pe[1],te);break;case keycodes.leftArrow:return Nt(Pe[0],Pe[1]-1,te);case keycodes.rightArrow:return Nt(Pe[0],Pe[1]+1,te);case keycodes.home:return Nt(Pe[0],0,te);case keycodes.end:return Nt(Pe[0],s.realCount-1,te);case keycodes.pageUp:return Nt(Pe[0]-m,Pe[1],te);case keycodes.pageDown:return Nt(Pe[0]+m,Pe[1],te);case keycodes.tab:return Yn(te.shiftKey)}return null}function Yn(te){return isRegularCell(Pe)?te?Pe[1]>0?Nt(Pe[0],Pe[1]-1,event):Nt(Pe[0]-1,s.realCount-1,event):Pe[1]<s.realCount-1?Nt(Pe[0],Pe[1]+1,event):Nt(Pe[0]+1,0,event):null}function vt(te,Te){F.setCellValue(te[0],g[te[1]],Te)}function Nt(te,Te,He=null){const Ke=F.rowCount;return te<0&&(te=0),te>=Ke&&(te=Ke-1),Te<0&&(Te=0),Te>=s.realCount&&(Te=s.realCount-1),t(36,Pe=[te,Te]),t(27,Ee=[[te,Te]]),mt([te,Te]),He&&He.preventDefault(),[te,Te]}function Mt(te){return I(this,void 0,void 0,function*(){var Te=void 0;window.clipboardData&&window.clipboardData.getData?Te=window.clipboardData.getData("Text"):te.clipboardData&&te.clipboardData.getData&&(Te=te.clipboardData.getData("text/plain")),te.preventDefault();let He=null;if(F.canInsert)try{He=JSON.parse(Te)}catch{He=null}if(He&&(_.isArray(He)||_.isPlainObject(He))){const nt=[F.insertDocuments(_.isArray(He)?He:[He]),Pe&&Pe[1]||0];t(36,Pe=nt),t(27,Ee=[nt]),yield tick(),mt(nt)}else{F.beginUpdate();const Ke=Te.replace(/\r/g,"").split(`
`).map(dt=>dt.split("	")),nt=Ln(Ee);if(nt.length<=1){const dt=isRegularCell(Pe)?Pe[0]:F.rowCount,Dt=isRegularCell(Pe)?Pe[1]:0;let Gt=dt;for(const mn of Ke){Gt>=F.rowCountInUpdate&&F.insertRow();let Bt=Dt;for(const Qt of mn)vt([Gt,Bt],lib.parseCellValue(Qt)),Bt+=1;Gt+=1}}if(nt.length>1){const dt=_.min(nt.map(Gt=>Gt[0])),Dt=_.min(nt.map(Gt=>Gt[1]));for(const Gt of nt){const[mn,Bt]=Gt,Qt=mn-dt,Sn=Bt-Dt,Pn=Ke[Qt%Ke.length],en=Pn[Sn%Pn.length];vt(Gt,en)}}F.endUpdate()}})}function Ln(te){return te=_.flatten(te.map(Te=>Te[1]=="header"?_.range(0,s.count).map(He=>[Te[0],He]):[Te])),te=_.flatten(te.map(Te=>Te[0]=="header"?_.range(0,F.rowCount).map(He=>[He,Te[1]]):[Te])),te.filter(isRegularCell)}function Jn(te,Te){Te?openReferenceForm(te,Te,x,B):openPrimaryKeyForm(te,D.baseTable,x,B)}const zn=te=>{const Te=a.findIndex(nt=>nt.uniquePath==te),He=s.modelToReal(Te);let Ke=[ze,He];t(36,Pe=Ke),t(27,Ee=[Ke]),ge&&ge.focus()},[Wn,dn]=createReducer((te,Te)=>{switch(Te.type){case"show":return F.editable?{cell:Te.cell,text:Te.text,selectAll:Te.selectAll}:{};case"close":return ge&&ge.focus(),(Te.mode=="enter"||Te.mode=="tab"||Te.mode=="shiftTab")&&setTimeout(()=>{if(isRegularCell(Pe))switch(Te.mode){case"enter":Nt(Pe[0]+1,Pe[1]);break;case"tab":Yn(!1);break;case"shiftTab":Yn(!0);break}},0),{}}return{}},{});component_subscribe(o,Wn,te=>t(42,y=te));function Zn(te){let Te=s.realToModel(te);const He=ut.get()[a[Te].uniqueName];return He&&He.focus(),["filter",te]}registerMenu({command:"dataGrid.refresh"},{placeTag:"copy"},{text:"Copy advanced",submenu:[_.keys(copyRowsFormatDefs).map(te=>({text:copyRowsFormatDefs[te].label,onClick:()=>an(te)})),{divider:!0},_.keys(copyRowsFormatDefs).map(te=>({text:`Set format: ${copyRowsFormatDefs[te].name}`,onClick:()=>set_store_value(copyRowsFormat,v=te,v)}))]},{placeTag:"switch"},{divider:!0},{placeTag:"save"},{command:"dataGrid.revertRowChanges",hideDisabled:!0},{command:"dataGrid.revertAllChanges",hideDisabled:!0},{command:"dataGrid.deleteSelectedRows"},{command:"dataGrid.insertNewRow"},{command:"dataGrid.cloneRows"},{command:"dataGrid.setNull"},{placeTag:"edit"},{divider:!0},{command:"dataGrid.findColumn"},{command:"dataGrid.hideColumn"},{command:"dataGrid.filterSelected"},{command:"dataGrid.clearFilter"},{command:"dataGrid.undo",hideDisabled:!0},{command:"dataGrid.redo",hideDisabled:!0},{divider:!0},{command:"dataGrid.editCellValue",hideDisabled:!0},{command:"dataGrid.newJson",hideDisabled:!0},{command:"dataGrid.editJsonDocument",hideDisabled:!0},{command:"dataGrid.viewJsonDocument",hideDisabled:!0},{command:"dataGrid.viewJsonValue",hideDisabled:!0},{command:"dataGrid.openJsonArrayInSheet",hideDisabled:!0},{command:"dataGrid.saveCellToFile",hideDisabled:!0},{command:"dataGrid.loadCellFromFile",hideDisabled:!0},{divider:!0},{placeTag:"export"},{label:"Save to current archive",submenu:[{command:"dataGrid.mergeSelectedCellsIntoMirror"},{command:"dataGrid.mergeSelectedRowsIntoMirror"},{command:"dataGrid.appendSelectedCellsIntoMirror"},{command:"dataGrid.appendSelectedRowsIntoMirror"},{command:"dataGrid.replaceSelectedCellsIntoMirror"},{command:"dataGrid.replaceSelectedRowsIntoMirror"}]},{command:"dataGrid.generateSqlFromData"},{command:"dataGrid.openFreeTable"},{command:"dataGrid.openChartFromSelection"},{command:"dataGrid.openSelectionInMap",hideDisabled:!0},{placeTag:"chart"});const Dn=getContextMenu();function qt(){return[Dn,{text:copyRowsFormatDefs[v].label,onClick:()=>an(v),keyText:"CtrlOrCommand+C",tag:"copy"}]}const $n=()=>D.clearFilters(),so=()=>D.resetConfig(),lo=()=>D.clearFilters();function Eo(te){binding_callbacks[te?"unshift":"push"](()=>{ge=te,t(26,ge)})}const co=()=>{Ie.activate(),invalidateCommands()},Xn=()=>he.update(te=>!te),$o=(te,Te)=>D.setSort(te.uniqueName,Te),uo=(te,Te)=>D.addToSort(te.uniqueName,Te),Et=()=>D.clearSort(),Ao=(te,Te)=>D.setGrouping(te.uniqueName,Te),fn=(te,Te)=>{D.resizeColumn(te.uniqueName,te.width,Te.detail)},xn=()=>D.clearFilters(),fo=(te,Te)=>ut.get()[te.uniqueName]=Te,Ro=(te,Te)=>D.setFilter(te.uniqueName,Te),Qn=te=>{zn(te.uniqueName)},Io=(te,Te)=>{D.resizeColumn(te.uniqueName,te.width,Te.detail)};function mo(te){binding_callbacks[te?"unshift":"push"](()=>{Be=te,t(34,Be)})}const No=te=>t(25,re=te.detail);function Lo(te){binding_callbacks[te?"unshift":"push"](()=>{Ze=te,t(35,Ze)})}const eo=te=>t(24,ze=te.detail);function Oo(){Le=this.clientWidth,$e=this.clientHeight,t(23,Le),t(22,$e)}return o.$$set=te=>{"onLoadNextData"in te&&t(59,M=te.onLoadNextData),"grider"in te&&t(0,F=te.grider),"display"in te&&t(1,D=te.display),"conid"in te&&t(2,x=te.conid),"database"in te&&t(3,B=te.database),"frameSelection"in te&&t(4,K=te.frameSelection),"isLoading"in te&&t(5,U=te.isLoading),"allRowCount"in te&&t(6,G=te.allRowCount),"onReferenceSourceChanged"in te&&t(60,W=te.onReferenceSourceChanged),"onReferenceClick"in te&&t(61,q=te.onReferenceClick),"onChangeSelectedColumns"in te&&t(62,H=te.onChangeSelectedColumns),"focusOnVisible"in te&&t(63,z=te.focusOnVisible),"formViewAvailable"in te&&t(7,Y=te.formViewAvailable),"errorMessage"in te&&t(8,V=te.errorMessage),"pureName"in te&&t(64,J=te.pureName),"schemaName"in te&&t(65,Q=te.schemaName),"allowDefineVirtualReferences"in te&&t(9,X=te.allowDefineVirtualReferences),"formatterFunction"in te&&t(10,ie=te.formatterFunction),"isLoadedAll"in te&&t(11,ce=te.isLoadedAll),"loadedTime"in te&&t(66,de=te.loadedTime),"changeSetStore"in te&&t(67,se=te.changeSetStore),"isDynamicStructure"in te&&t(12,me=te.isDynamicStructure),"selectedCellsPublished"in te&&t(58,ue=te.selectedCellsPublished),"collapsedLeftColumnStore"in te&&S(t(13,he=te.collapsedLeftColumnStore)),"multipleGridsOnTab"in te&&t(14,pe=te.multipleGridsOnTab),"tabControlHiddenTab"in te&&t(15,Oe=te.tabControlHiddenTab),"onCustomGridRefresh"in te&&t(68,qe=te.onCustomGridRefresh),"onOpenQuery"in te&&t(16,et=te.onOpenQuery),"useEvalFilters"in te&&t(17,Ue=te.useEvalFilters),"jslid"in te&&t(18,fe=te.jslid)},o.$$.update=()=>{if(o.$$.dirty[3]&33554432&&t(31,n=k),o.$$.dirty[0]&134217728&&t(41,r=Ee&&Ee.length>0&&_.uniq(Ee.map(te=>te[0])).length==1?[_.max(Ee.map(te=>te[0])),_.max(Ee.map(te=>te[1]))]:null),o.$$.dirty[0]&2&&t(28,a=(D==null?void 0:D.allColumns)||[]),o.$$.dirty[0]&276824067&&t(29,s=countColumnSizes(F,a,Le,D)),o.$$.dirty[0]&4194304|o.$$.dirty[1]&1&&t(116,u=$e-2*n),o.$$.dirty[0]&545259520|o.$$.dirty[1]&4&&t(30,d=Le-s.frozenSize-l-32),o.$$.dirty[1]&1|o.$$.dirty[3]&8388608&&t(32,f=Math.ceil(u/Math.floor(Math.max(1,n)))),o.$$.dirty[1]&1|o.$$.dirty[3]&8388608&&(m=Math.floor(u/Math.ceil(Math.max(1,n)))),o.$$.dirty[0]&1912602624&&t(40,h=countVisibleRealColumns(s,re,d,a)),o.$$.dirty[0]&805306368&&t(115,g=_.range(s.realCount).map(te=>(a[s.realToModel(te)]||{}).uniqueName)),o.$$.dirty[0]&134217729|o.$$.dirty[3]&4194304&&t(39,p=getSelectedCellsInfo(Ee,F,g,Ft())),o.$$.dirty[0]&1879048192&&t(38,b=s.scrollInView(0,a.length-1-s.frozenCount,d)),o.$$.dirty[0]&16777217|o.$$.dirty[1]&268435459&&M&&ze+f>=F.rowCount&&n>0&&M(),o.$$.dirty[0]&2|o.$$.dirty[3]&4194304&&tick().then(()=>{var te;if(((te=D==null?void 0:D.focusedColumns)===null||te===void 0?void 0:te.length)>0){const He=_.invert(g)[D.focusedColumns[0]];He&&mt([null,He])}}),o.$$.dirty[0]&134219777|o.$$.dirty[1]&536870912|o.$$.dirty[2]&16&&W&&(F.rowCount>0||ce)&&W(Ft(),de),o.$$.dirty[0]&2|o.$$.dirty[1]&1073741824|o.$$.dirty[3]&3145728&&D!=null&&D.groupColumns&&D!=null&&D.baseTableOrSimilar&&q&&q({referenceId:stableStringify(D&&D.groupColumns),schemaName:t(113,R=D.baseTableOrSimilar)===null||R===void 0?void 0:R.schemaName,pureName:t(114,N=D.baseTableOrSimilar)===null||N===void 0?void 0:N.pureName,columns:D.groupColumns.map(te=>{var Te,He;return{baseName:te,refName:te,dataType:_.get((He=(Te=D.baseTableOrView)===null||Te===void 0?void 0:Te.columns)===null||He===void 0?void 0:He.find(Ke=>Ke.columnName==te),"dataType")}})}),o.$$.dirty[0]&67108864|o.$$.dirty[2]&2|o.$$.dirty[3]&16777216&&E&&ge&&z&&ge.focus(),o.$$.dirty[0]&134217728|o.$$.dirty[2]&1){const te=stableStringify(Ee);if(Xe.get()!=te){Xe.set(te);const Te=()=>at(Ee);t(58,ue=Te),set_store_value(selectedCellsCallback,C=Te,C),H&&H(Ht().map(He=>He.columnName))}}},t(33,l=40),[F,D,x,B,K,U,G,Y,V,X,ie,ce,me,he,pe,Oe,et,Ue,fe,Ie,wn,ye,$e,Le,ze,re,ge,Ee,a,s,d,n,f,l,Be,Ze,Pe,wt,b,p,h,r,y,T,We,ut,_t,ee,_e,Re,Ge,Fn,Mt,Jn,zn,Wn,dn,qt,ue,M,W,q,H,z,J,Q,de,se,qe,Rt,Ae,Me,xe,Qe,rt,ot,ft,kt,$t,Lt,Ut,rn,zt,lt,Cn,vn,_n,sn,Yt,nn,Zt,ln,cn,hn,En,ve,ct,bt,Wt,Ot,Xt,jt,Jt,yn,pn,St,ne,le,we,Se,be,Fe,Ve,R,N,g,u,E,k,$n,so,lo,Eo,co,Xn,$o,uo,Et,Ao,fn,xn,fo,Ro,Qn,Io,mo,No,Lo,eo,Oo]}class DataGridCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$34,create_fragment$36,safe_not_equal,{onLoadNextData:59,grider:0,display:1,conid:2,database:3,frameSelection:4,isLoading:5,allRowCount:6,onReferenceSourceChanged:60,onReferenceClick:61,onChangeSelectedColumns:62,focusOnVisible:63,formViewAvailable:7,errorMessage:8,pureName:64,schemaName:65,allowDefineVirtualReferences:9,formatterFunction:10,isLoadedAll:11,loadedTime:66,changeSetStore:67,isDynamicStructure:12,selectedCellsPublished:58,collapsedLeftColumnStore:13,multipleGridsOnTab:14,tabControlHiddenTab:15,onCustomGridRefresh:68,onOpenQuery:16,useEvalFilters:17,jslid:18,activator:19,refresh:69,canRefresh:70,canDeepRefresh:71,deepRefresh:72,getGrider:73,getChangeSetStore:74,getDisplay:75,revertRowChanges:76,revertAllChanges:77,deleteSelectedRows:78,insertNewRow:79,cloneRows:80,setFixedValue:81,undo:82,redo:83,reconnect:84,copyToClipboard:20,loadNextDataIfNeeded:85,filterSelectedValue:86,clearFilter:87,clearFilterEnabled:88,openFreeTable:89,openChartFromSelection:90,viewJsonDocumentEnabled:91,viewJsonDocument:92,openSelectionInMap:93,saveCellToFileEnabled:94,saveCellToFile:95,loadCellFromFileEnabled:96,loadCellFromFile:97,viewJsonValueEnabled:98,viewJsonValue:99,openJsonArrayInSheetEnabled:100,openJsonArrayInSheet:101,editJsonEnabled:102,editJsonDocument:103,editCellValueEnabled:104,editCellValue:105,addJsonDocumentEnabled:106,addJsonDocument:21,buildFindMenu:107,hideColumn:108,generateSqlFromDataEnabled:109,generateSqlFromData:110,mirrorWriteEnabled:111,mergeSelectionIntoMirror:112},null,[-1,-1,-1,-1,-1,-1])}get activator(){return this.$$.ctx[19]}get refresh(){return this.$$.ctx[69]}get canRefresh(){return this.$$.ctx[70]}get canDeepRefresh(){return this.$$.ctx[71]}get deepRefresh(){return this.$$.ctx[72]}get getGrider(){return this.$$.ctx[73]}get getChangeSetStore(){return this.$$.ctx[74]}get getDisplay(){return this.$$.ctx[75]}get revertRowChanges(){return this.$$.ctx[76]}get revertAllChanges(){return this.$$.ctx[77]}get deleteSelectedRows(){return this.$$.ctx[78]}get insertNewRow(){return this.$$.ctx[79]}get cloneRows(){return this.$$.ctx[80]}get setFixedValue(){return this.$$.ctx[81]}get undo(){return this.$$.ctx[82]}get redo(){return this.$$.ctx[83]}get reconnect(){return this.$$.ctx[84]}get copyToClipboard(){return this.$$.ctx[20]}get loadNextDataIfNeeded(){return this.$$.ctx[85]}get filterSelectedValue(){return this.$$.ctx[86]}get clearFilter(){return this.$$.ctx[87]}get clearFilterEnabled(){return this.$$.ctx[88]}get openFreeTable(){return this.$$.ctx[89]}get openChartFromSelection(){return this.$$.ctx[90]}get viewJsonDocumentEnabled(){return this.$$.ctx[91]}get viewJsonDocument(){return this.$$.ctx[92]}get openSelectionInMap(){return this.$$.ctx[93]}get saveCellToFileEnabled(){return this.$$.ctx[94]}get saveCellToFile(){return this.$$.ctx[95]}get loadCellFromFileEnabled(){return this.$$.ctx[96]}get loadCellFromFile(){return this.$$.ctx[97]}get viewJsonValueEnabled(){return this.$$.ctx[98]}get viewJsonValue(){return this.$$.ctx[99]}get openJsonArrayInSheetEnabled(){return this.$$.ctx[100]}get openJsonArrayInSheet(){return this.$$.ctx[101]}get editJsonEnabled(){return this.$$.ctx[102]}get editJsonDocument(){return this.$$.ctx[103]}get editCellValueEnabled(){return this.$$.ctx[104]}get editCellValue(){return this.$$.ctx[105]}get addJsonDocumentEnabled(){return this.$$.ctx[106]}get addJsonDocument(){return this.$$.ctx[21]}get buildFindMenu(){return this.$$.ctx[107]}get hideColumn(){return this.$$.ctx[108]}get generateSqlFromDataEnabled(){return this.$$.ctx[109]}get generateSqlFromData(){return this.$$.ctx[110]}get mirrorWriteEnabled(){return this.$$.ctx[111]}get mergeSelectionIntoMirror(){return this.$$.ctx[112]}}const DataGridCore$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataGridCore},Symbol.toStringTag,{value:"Module"}));class Grider{getRowStatus(e){return{status:"regular"}}beginUpdate(){}endUpdate(){}setCellValue(e,t,n){}deleteRow(e){}insertRow(){return null}insertDocuments(e){return null}revertRowChanges(e){}revertAllChanges(){}undo(){}redo(){}get editable(){return!1}get canInsert(){return!1}get allowSave(){return this.containsChanges}get rowCountInUpdate(){return this.rowCount}get canUndo(){return!1}get canRedo(){return!1}get containsChanges(){return!1}get disableLoadNextPage(){return!1}get errors(){return null}updateRow(e,t){for(const n of Object.keys(t))this.setCellValue(e,n,t[n])}}class RowsArrayGrider extends Grider{constructor(e){super(),this.rows=e}getRowData(e){return this.rows[e]}get rowCount(){return this.rows.length}}function create_if_block_2$A(o){let e,t;const n=[o[6],{grider:o[1]},{display:o[3]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new DataGridCore({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&74?get_spread_update(n,[s&64&&get_spread_object(a[6]),s&2&&{grider:a[1]},s&8&&{display:a[3]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_1$P(o){let e,t;return e=new ErrorInfo({props:{message:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.message=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1n(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$35(o){let e,t,n,r;const a=[create_if_block$1n,create_if_block_1$P,create_if_block_2$A],s=[];function l(u,d){return u[0]?0:u[2]?1:u[1]?2:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function instance$33(o,e,t){let n,r,a;var s=this&&this.__awaiter||function(b,v,y,C){function E(A){return A instanceof y?A:new y(function(k){k(A)})}return new(y||(y=Promise))(function(A,k){function T(I){try{S(C.next(I))}catch(R){k(R)}}function $(I){try{S(C.throw(I))}catch(R){k(R)}}function S(I){I.done?A(I.value):E(I.value).then(T,$)}S((C=C.apply(b,v||[])).next())})};let{reader:l}=e,u=!1,d=null,f=null,m=null;const h=writable(lib$3.createGridConfig());component_subscribe(o,h,b=>t(10,a=b));const p=writable(lib$3.createGridCache());component_subscribe(o,p,b=>t(9,r=b));const g=b=>s(void 0,void 0,void 0,function*(){try{if(!b){t(8,d=null),t(1,f=null);return}t(2,m=null),t(0,u=!0);const v=yield apiCall("runners/load-reader",b);if(v.errorMessage){t(0,u=!1),t(2,m=v.errorMessage);return}t(8,d=v),t(1,f=new RowsArrayGrider(v.rows)),t(0,u=!1)}catch(v){t(0,u=!1),t(2,m="Loading failed"),console.error(v.response)}});return o.$$set=b=>{t(6,e=assign(assign({},e),exclude_internal_props(b))),"reader"in b&&t(7,l=b.reader)},o.$$.update=()=>{o.$$.dirty&128&&g(l),o.$$.dirty&1792&&t(3,n=new lib$3.FreeTableGridDisplay(d,a,h.update,r,p.update))},e=exclude_internal_props(e),[u,f,m,n,h,p,e,l,d,r,a]}class PreviewDataGrid extends SvelteComponent{constructor(e){super(),init(this,e,instance$33,create_fragment$35,safe_not_equal,{reader:7})}}function formatFileSize(o){return o>1e9?`${Math.round(o/1e10)*10} GB`:o>1e6?`${Math.round(o/1e7)*10} MB`:o>1e3?`${Math.round(o/1e4)*10} KB`:`${o} bytes`}function create_else_block$C(o){let e,t;return e=new TableControl({props:{rows:o[1],columns:[{fieldName:"name",header:"Name"},{fieldName:"size",header:"Size",formatter:o[8]},!o[3]&&{fieldName:"download",header:"Download",slot:0},o[3]&&{fieldName:"copy",header:"Copy",slot:1},o[3]&&{fieldName:"show",header:"Show",slot:2}],$$slots:{2:[create__2_slot$n,({row:n})=>({11:n}),({row:n})=>n?2048:0],1:[create__1_slot$o,({row:n})=>({11:n}),({row:n})=>n?2048:0],0:[create__0_slot$7,({row:n})=>({11:n}),({row:n})=>n?2048:0]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.rows=n[1]),r&6145&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1m(o){let e,t;return e=new ErrorInfo({props:{message:"No output files",icon:"img alert"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__0_slot$7(o){let e,t,n;return{c(){e=element("a"),t=text("download"),attr(e,"slot","0"),attr(e,"href",n=`${resolveApi()}/runners/data/${o[0]}/${o[11].name}`),attr(e,"target","_blank"),attr(e,"rel","noopener noreferrer")},m(r,a){insert(r,e,a),append(e,t)},p(r,a){a&2049&&n!==(n=`${resolveApi()}/runners/data/${r[0]}/${r[11].name}`)&&attr(e,"href",n)},d(r){r&&detach(e)}}}function create__1_slot$o(o){let e,t,n;function r(){return o[7](o[11])}return{c(){e=element("a"),e.textContent="save",attr(e,"slot","1"),attr(e,"href","#")},m(a,s){insert(a,e,s),t||(n=listen(e,"click",r),t=!0)},p(a,s){o=a},d(a){a&&detach(e),t=!1,n()}}}function create__2_slot$n(o){let e,t,n;function r(){return o[6](o[11])}return{c(){e=element("a"),e.textContent="show",attr(e,"slot","2"),attr(e,"href","#")},m(a,s){insert(a,e,s),t||(n=listen(e,"click",r),t=!0)},p(a,s){o=a},d(a){a&&detach(e),t=!1,n()}}}function create_fragment$34(o){let e,t,n,r;const a=[create_if_block$1m,create_else_block$C],s=[];function l(u,d){return!u[1]||u[1].length==0?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$32(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,v=>t(5,r=v)),n);o.$$.on_destroy.push(()=>a());let{runnerId:l}=e,{executeNumber:u}=e;const d=getElectron();let f=[];function m(v){return v?(apiOn(`runner-done-${v}`,h),()=>{apiOff(`runner-done-${v}`,h)}):()=>{}}const h=async()=>{const v=await apiCall("runners/files",{runid:l});t(1,f=v)},p=v=>{d.showItemInFolder(v.path)},g=async v=>{const y=await d.showSaveDialog({});y&&window.require("fs").copyFile(v.path,y,()=>{})},b=v=>formatFileSize(v.size);return o.$$set=v=>{"runnerId"in v&&t(0,l=v.runnerId),"executeNumber"in v&&t(4,u=v.executeNumber)},o.$$.update=()=>{o.$$.dirty&16&&u>=0&&t(1,f=[]),o.$$.dirty&1&&s(t(2,n=useEffect(()=>m(l)))),o.$$.dirty&32},[l,f,n,d,u,r,p,g,b]}class RunnerOutputFiles extends SvelteComponent{constructor(e){super(),init(this,e,instance$32,create_fragment$34,safe_not_equal,{runnerId:0,executeNumber:4})}}const WidgetColumnBar_svelte_svelte_type_style_lang="";function create_fragment$33(o){let e,t,n;const r=o[5].default,a=create_slot(r,o,o[4],null);return{c(){e=element("div"),a&&a.c(),attr(e,"class","main-container svelte-14nnwtl"),add_render_callback(()=>o[6].call(e)),toggle_class(e,"hidden",o[0])},m(s,l){insert(s,e,l),a&&a.m(e,null),t=add_iframe_resize_listener(e,o[6].bind(e)),n=!0},p(s,[l]){a&&a.p&&(!n||l&16)&&update_slot_base(a,r,s,s[4],n?get_slot_changes(r,s[4],l,null):get_all_dirty_from_scope(s[4]),null),(!n||l&1)&&toggle_class(e,"hidden",s[0])},i(s){n||(transition_in(a,s),n=!0)},o(s){transition_out(a,s),n=!1},d(s){s&&detach(e),a&&a.d(s),t()}}}function instance$31(o,e,t){let n,{$$slots:r={},$$scope:a}=e,{hidden:s=!1}=e,l=[];const u=[];let d;const f=writable(0);component_subscribe(o,f,p=>t(7,n=p)),setContext("widgetColumnBarHeight",f),setContext("pushWidgetItemDefinition",(p,g)=>(u.push(g),t(3,l=[...l,p]),l.length-1)),setContext("updateWidgetItemDefinition",(p,g)=>{t(3,l[p]=g,l)});function m(p){const g=p.filter(b=>!b.collapsed&&!b.skip).length;for(let b=0;b<p.length;b++){p[b];const v=!!p.slice(b+1).find(y=>y&&!y.collapsed&&!y.skip);u[b].set({splitterVisible:v,visibleItemsCount:g})}}function h(){d=this.clientHeight,t(1,d)}return o.$$set=p=>{"hidden"in p&&t(0,s=p.hidden),"$$scope"in p&&t(4,a=p.$$scope)},o.$$.update=()=>{o.$$.dirty&2&&set_store_value(f,n=d,n),o.$$.dirty&8&&m(l)},[s,d,f,l,a,r,h]}class WidgetColumnBar extends SvelteComponent{constructor(e){super(),init(this,e,instance$31,create_fragment$33,safe_not_equal,{hidden:0})}}const WidgetColumnBar$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetColumnBar},Symbol.toStringTag,{value:"Module"})),WidgetTitle_svelte_svelte_type_style_lang="";function create_fragment$32(o){let e,t,n,r;const a=o[2].default,s=create_slot(a,o,o[1],null);return{c(){e=element("div"),s&&s.c(),attr(e,"class","svelte-wtgtn"),toggle_class(e,"clickable",o[0])},m(l,u){insert(l,e,u),s&&s.m(e,null),t=!0,n||(r=listen(e,"click",o[3]),n=!0)},p(l,[u]){s&&s.p&&(!t||u&2)&&update_slot_base(s,a,l,l[1],t?get_slot_changes(a,l[1],u,null):get_all_dirty_from_scope(l[1]),null),(!t||u&1)&&toggle_class(e,"clickable",l[0])},i(l){t||(transition_in(s,l),t=!0)},o(l){transition_out(s,l),t=!1},d(l){l&&detach(e),s&&s.d(l),n=!1,r()}}}function instance$30(o,e,t){let{$$slots:n={},$$scope:r}=e,{clickable:a=!1}=e;function s(l){bubble.call(this,o,l)}return o.$$set=l=>{"clickable"in l&&t(0,a=l.clickable),"$$scope"in l&&t(1,r=l.$$scope)},[a,r,n,s]}class WidgetTitle extends SvelteComponent{constructor(e){super(),init(this,e,instance$30,create_fragment$32,safe_not_equal,{clickable:0})}}const WidgetTitle$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetTitle},Symbol.toStringTag,{value:"Module"})),WidgetColumnBarItem_svelte_svelte_type_style_lang="";function create_if_block$1l(o){let e,t,n,r;e=new WidgetTitle({props:{clickable:o[5],$$slots:{default:[create_default_slot$1f]},$$scope:{ctx:o}}}),e.$on("click",function(){is_function(o[5]?o[14]:null)&&(o[5]?o[14]:null).apply(this,arguments)});let a=o[3]&&create_if_block_1$O(o);return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,l){o=s;const u={};l&32&&(u.clickable=o[5]),l&65537&&(u.$$scope={dirty:l,ctx:o}),e.$set(u),o[3]?a?(a.p(o,l),l&8&&transition_in(a,1)):(a=create_if_block_1$O(o),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}function create_default_slot$1f(o){let e;return{c(){e=text(o[0])},m(t,n){insert(t,e,n)},p(t,n){n&1&&set_data(e,t[0])},d(t){t&&detach(e)}}}function create_if_block_1$O(o){let e,t,n,r,a;const s=o[13].default,l=create_slot(s,o,o[16],null);let u=o[4].splitterVisible&&create_if_block_2$z(o);return{c(){e=element("div"),l&&l.c(),n=space(),u&&u.c(),r=empty(),attr(e,"class","wrapper svelte-184i6gf"),attr(e,"style",t=o[4].splitterVisible?`height:${o[2]}px`:"flex: 1 1 0")},m(d,f){insert(d,e,f),l&&l.m(e,null),insert(d,n,f),u&&u.m(d,f),insert(d,r,f),a=!0},p(d,f){l&&l.p&&(!a||f&65536)&&update_slot_base(l,s,d,d[16],a?get_slot_changes(s,d[16],f,null):get_all_dirty_from_scope(d[16]),null),(!a||f&20&&t!==(t=d[4].splitterVisible?`height:${d[2]}px`:"flex: 1 1 0"))&&attr(e,"style",t),d[4].splitterVisible?u?u.p(d,f):(u=create_if_block_2$z(d),u.c(),u.m(r.parentNode,r)):u&&(u.d(1),u=null)},i(d){a||(transition_in(l,d),a=!0)},o(d){transition_out(l,d),a=!1},d(d){d&&(detach(e),detach(n),detach(r)),l&&l.d(d),u&&u.d(d)}}}function create_if_block_2$z(o){let e,t,n;return{c(){e=element("div"),attr(e,"class","vertical-split-handle")},m(r,a){insert(r,e,a),t||(n=[action_destroyer(splitterDrag.call(null,e,"clientY")),listen(e,"resizeSplitter",o[15])],t=!0)},p:noop$1,d(r){r&&detach(e),t=!1,run_all(n)}}}function create_fragment$31(o){let e,t,n=!o[1]&&create_if_block$1l(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[1]?n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()):n?(n.p(r,a),a&2&&transition_in(n,1)):(n=create_if_block$1l(r),n.c(),transition_in(n,1),n.m(e.parentNode,e))},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$2$(o,e,t){let n,r,a,{$$slots:s={},$$scope:l}=e,{title:u}=e,{name:d}=e,{skip:f=!1}=e,{height:m=null}=e,{collapsed:h=null}=e,{storageName:p=null}=e,g=0;const b=writable({splitterVisible:!1,visibleItemsCount:0});component_subscribe(o,b,S=>t(4,r=S));const v=getContext("pushWidgetItemDefinition"),y=getContext("updateWidgetItemDefinition"),C=getContext("widgetColumnBarHeight");component_subscribe(o,C,S=>t(12,a=S));const E=v({collapsed:h,height:m,skip:f},b);function A(S,I){if(p){const R=getLocalStorage(p);if(R){t(2,g=I*R.relativeHeight);return}}_.isString(S)&&S.endsWith("px")?t(2,g=parseInt(S.slice(0,-2))):_.isString(S)&&S.endsWith("%")?t(2,g=I*parseFloat(S.slice(0,-1))/100):t(2,g=I/3)}let k=p&&getLocalStorage(p)&&getLocalStorage(p).visible!=null?getLocalStorage(p).visible:!h;const T=()=>t(3,k=!k),$=S=>t(2,g+=S.detail);return o.$$set=S=>{"title"in S&&t(0,u=S.title),"name"in S&&t(8,d=S.name),"skip"in S&&t(1,f=S.skip),"height"in S&&t(9,m=S.height),"collapsed"in S&&t(10,h=S.collapsed),"storageName"in S&&t(11,p=S.storageName),"$$scope"in S&&t(16,l=S.$$scope)},o.$$.update=()=>{o.$$.dirty&522&&y(E,{collapsed:!k,height:m,skip:f}),o.$$.dirty&4608&&A(m,a),o.$$.dirty&6156&&p&&a>0&&setLocalStorage(p,{relativeHeight:g/a,visible:k}),o.$$.dirty&24&&t(5,n=r.visibleItemsCount!=1||!k)},[u,f,g,k,r,n,b,C,d,m,h,p,a,s,T,$,l]}class WidgetColumnBarItem extends SvelteComponent{constructor(e){super(),init(this,e,instance$2$,create_fragment$31,safe_not_equal,{title:0,name:8,skip:1,height:9,collapsed:10,storageName:11})}}const WidgetColumnBarItem$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetColumnBarItem},Symbol.toStringTag,{value:"Module"})),ImportExportModal_svelte_svelte_type_style_lang="";function create_if_block_2$y(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Processing import/export ..."}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$n(o){let e,t,n,r;t=new ImportExportConfigurator({props:{uploadedFile:o[1],openedFile:o[2],previewReaderStore:o[10]}});let a=o[4]&&create_if_block_2$y();return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","content svelte-nk47x3"),attr(e,"slot","1")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){const u={};l&2&&(u.uploadedFile=s[1]),l&4&&(u.openedFile=s[2]),t.$set(u),s[4]?a?l&16&&transition_in(a,1):(a=create_if_block_2$y(),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(t.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(a),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_default_slot_10$1(o){let e,t;return e=new RunnerOutputFiles({props:{runnerId:o[3],executeNumber:o[5]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.runnerId=n[3]),r&32&&(a.executeNumber=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_9$3(o){let e,t;return e=new SocketMessageView({props:{eventName:o[3]?`runner-info-${o[3]}`:null,executeNumber:o[5],showNoMessagesAlert:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.eventName=n[3]?`runner-info-${n[3]}`:null),r&32&&(a.executeNumber=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_8$4(o){let e,t;return e=new PreviewDataGrid({props:{reader:o[9]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&512&&(a.reader=n[9]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_7$5(o){let e,t,n,r;return e=new FormTextField({props:{label:"Schedule",name:"schedule"}}),n=new FormTextField({props:{label:"Start variable index",name:"startVariableIndex"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot_6$5(o){let e,t,n,r,a,s,l,u;return e=new WidgetColumnBarItem({props:{title:"Output files",name:"output",height:"20%",$$slots:{default:[create_default_slot_10$1]},$$scope:{ctx:o}}}),n=new WidgetColumnBarItem({props:{title:"Messages",name:"messages",$$slots:{default:[create_default_slot_9$3]},$$scope:{ctx:o}}}),a=new WidgetColumnBarItem({props:{title:"Preview",name:"preview",skip:!o[9],$$slots:{default:[create_default_slot_8$4]},$$scope:{ctx:o}}}),l=new WidgetColumnBarItem({props:{title:"Advanced configuration",name:"config",collapsed:!0,$$slots:{default:[create_default_slot_7$5]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p(d,f){const m={};f&33554472&&(m.$$scope={dirty:f,ctx:d}),e.$set(m);const h={};f&33554472&&(h.$$scope={dirty:f,ctx:d}),n.$set(h);const p={};f&512&&(p.skip=!d[9]),f&33554944&&(p.$$scope={dirty:f,ctx:d}),a.$set(p);const g={};f&33554432&&(g.$$scope={dirty:f,ctx:d}),l.$set(g)},i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create__2_slot$m(o){let e,t;return e=new WidgetColumnBar({props:{$$slots:{default:[create_default_slot_6$5]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&33554984&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_5$a(o){let e,t;return e=new HorizontalSplitter({props:{initialValue:"70%",$$slots:{2:[create__2_slot$m],1:[create__1_slot$n]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&33555006&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$N(o){let e,t;return e=new FontIcon({props:{icon:"icon loading"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$i(o){let e,t,n,r=o[4]&&create_if_block_1$N();return{c(){e=text(`Import/Export
      `),r&&r.c(),t=empty()},m(a,s){insert(a,e,s),r&&r.m(a,s),insert(a,t,s),n=!0},p(a,s){a[4]?r?s&16&&transition_in(r,1):(r=create_if_block_1$N(),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&(detach(e),detach(t)),r&&r.d(a)}}}function create_else_block$B(o){let e,t;return e=new LargeFormButton({props:{icon:"icon run",$$slots:{default:[create_default_slot_4$b]},$$scope:{ctx:o}}}),e.$on("click",o[13]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&33554432&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1k(o){let e,t;return e=new LargeButton({props:{icon:"icon stop",$$slots:{default:[create_default_slot_3$g]},$$scope:{ctx:o}}}),e.$on("click",o[14]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&33554432&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_4$b(o){let e;return{c(){e=text("Run")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_3$g(o){let e;return{c(){e=text("Stop")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_2$k(o){let e;return{c(){e=text("Generate script")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$G(o){let e;return{c(){e=text("Close")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$h(o){let e,t,n,r,a,s,l,u;const d=[create_if_block$1k,create_else_block$B],f=[];function m(h,p){return h[4]?0:1}return t=m(o),n=f[t]=d[t](o),a=new LargeFormButton({props:{icon:"img sql-file",$$slots:{default:[create_default_slot_2$k]},$$scope:{ctx:o}}}),a.$on("click",o[12]),l=new LargeButton({props:{icon:"icon close",$$slots:{default:[create_default_slot_1$G]},$$scope:{ctx:o}}}),l.$on("click",closeCurrentModal),{c(){e=element("div"),n.c(),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),attr(e,"class","flex m-2")},m(h,p){insert(h,e,p),f[t].m(e,null),append(e,r),mount_component(a,e,null),append(e,s),mount_component(l,e,null),u=!0},p(h,p){let g=t;t=m(h),t===g?f[t].p(h,p):(group_outros(),transition_out(f[g],1,1,()=>{f[g]=null}),check_outros(),n=f[t],n?n.p(h,p):(n=f[t]=d[t](h),n.c()),transition_in(n,1),n.m(e,r));const b={};p&33554432&&(b.$$scope={dirty:p,ctx:h}),a.$set(b);const v={};p&33554432&&(v.$$scope={dirty:p,ctx:h}),l.$set(v)},i(h){u||(transition_in(n),transition_in(a.$$.fragment,h),transition_in(l.$$.fragment,h),u=!0)},o(h){transition_out(n),transition_out(a.$$.fragment,h),transition_out(l.$$.fragment,h),u=!1},d(h){h&&detach(e),f[t].d(),destroy_component(a),destroy_component(l)}}}function create_default_slot$1e(o){let e,t;const n=[o[15],{fullScreen:!0}];let r={$$slots:{footer:[create_footer_slot$h],header:[create_header_slot$i],default:[create_default_slot_5$a]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&32768?get_spread_update(n,[get_spread_object(a[15]),n[1]]):{};s&33555006&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$30(o){let e,t;return e=new FormProvider({props:{initialValues:{sourceStorageType:"database",targetStorageType:getDefaultFileFormat(o[7]).storageType,targetArchiveFolder:o[8],sourceArchiveFolder:o[8],...o[11](),...o[0]},$$slots:{default:[create_default_slot$1e]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&385&&(a.initialValues={sourceStorageType:"database",targetStorageType:getDefaultFileFormat(n[7]).storageType,targetArchiveFolder:n[8],sourceArchiveFolder:n[8],...n[11](),...n[0]}),r&33587774&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2_(o,e,t){let n;const r=["initialValues","uploadedFile","openedFile","importToCurrentTarget"];let a=compute_rest_props(e,r),s,l,u,d,f,m=noop$1,h=()=>(m(),m=subscribe(n,x=>t(17,f=x)),n),p,g;component_subscribe(o,extensions,x=>t(7,s=x)),component_subscribe(o,visibleWidgetSideBar,x=>t(18,l=x)),component_subscribe(o,selectedWidget,x=>t(19,u=x)),component_subscribe(o,currentArchive,x=>t(8,d=x)),component_subscribe(o,currentDatabase,x=>t(20,p=x)),o.$$.on_destroy.push(()=>m());var b=this&&this.__awaiter||function(x,B,K,U){function G(W){return W instanceof K?W:new K(function(q){q(W)})}return new(K||(K=Promise))(function(W,q){function H(V){try{Y(U.next(V))}catch(J){q(J)}}function z(V){try{Y(U.throw(V))}catch(J){q(J)}}function Y(V){V.done?W(V.value):G(V.value).then(H,z)}Y((U=U.apply(x,B||[])).next())})};let v=!1,y=0,C=null;const E=writable(null);component_subscribe(o,E,x=>t(9,g=x));let{initialValues:A}=e,{uploadedFile:k=void 0}=e,{openedFile:T=void 0}=e,{importToCurrentTarget:$=!1}=e;const S=createRef(null);function I(){var x;return $?p&&u!="archive"?{targetStorageType:"database",targetConnectionId:(x=p==null?void 0:p.connection)===null||x===void 0?void 0:x._id,targetDatabaseName:p==null?void 0:p.name}:d=="default"?{targetStorageType:"archive",targetArchiveFolder:`import-${hooks().format("YYYY-MM-DD-hh-mm-ss")}`}:{targetStorageType:"archive",targetArchiveFolder:d}:{}}function R(x){return x?(apiOn(`runner-done-${x}`,N),()=>{apiOff(`runner-done-${x}`,N)}):()=>{}}const N=()=>{t(4,v=!1),S.get()&&(apiCall("archive/refresh-folders",{}),apiCall("archive/refresh-files",{folder:S.get()}),set_store_value(currentArchive,d=S.get(),d),set_store_value(selectedWidget,u="archive",u),set_store_value(visibleWidgetSideBar,l=!0,l))},M=x=>b(void 0,void 0,void 0,function*(){closeCurrentModal();const B=yield createImpExpScript(s,x.detail,void 0,!0);openNewTab({title:"Shell #",icon:"img shell",tabComponent:"ShellTab"},{editor:B})}),F=x=>b(void 0,void 0,void 0,function*(){if(v)return;const B=x.detail;t(4,v=!0);const K=yield createImpExpScript(s,B);t(5,y+=1);let U=C;U=(yield apiCall("runners/start",{script:K})).runid,t(3,C=U),B.targetStorageType=="archive"?S.set(B.targetArchiveFolder):S.set(null)}),D=()=>{apiCall("runners/cancel",{runid:C})};return o.$$set=x=>{e=assign(assign({},e),exclude_internal_props(x)),t(15,a=compute_rest_props(e,r)),"initialValues"in x&&t(0,A=x.initialValues),"uploadedFile"in x&&t(1,k=x.uploadedFile),"openedFile"in x&&t(2,T=x.openedFile),"importToCurrentTarget"in x&&t(16,$=x.importToCurrentTarget)},o.$$.update=()=>{o.$$.dirty&8&&h(t(6,n=useEffect(()=>R(C)))),o.$$.dirty&131072},[A,k,T,C,v,y,n,s,d,g,E,I,M,F,D,a,$,f]}class ImportExportModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2_,create_fragment$30,safe_not_equal,{initialValues:0,uploadedFile:1,openedFile:2,importToCurrentTarget:16})}}const ImportExportModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ImportExportModal},Symbol.toStringTag,{value:"Module"})),FormFieldTemplateTiny_svelte_svelte_type_style_lang="";function create_else_block$A(o){let e,t,n,r,a,s,l,u,d,f=[o[3]],m={};for(let v=0;v<f.length;v+=1)m=assign(m,f[v]);let h=[{class:"label"},o[3]],p={};for(let v=0;v<h.length;v+=1)p=assign(p,h[v]);const g=o[6].default,b=create_slot(g,o,o[5],null);return{c(){e=element("div"),t=element("div"),n=element("span"),r=text(o[1]),a=space(),s=element("div"),b&&b.c(),set_attributes(n,m),toggle_class(n,"disabled",o[2]),toggle_class(n,"svelte-9r8t4s",!0),attr(t,"class","label svelte-9r8t4s"),set_attributes(e,p),toggle_class(e,"svelte-9r8t4s",!0),attr(s,"class","value svelte-9r8t4s")},m(v,y){insert(v,e,y),append(e,t),append(t,n),append(n,r),insert(v,a,y),insert(v,s,y),b&&b.m(s,null),l=!0,u||(d=[listen(n,"click",function(){is_function(o[3].onClick)&&o[3].onClick.apply(this,arguments)}),listen(e,"click",function(){is_function(o[3].onClick)&&o[3].onClick.apply(this,arguments)})],u=!0)},p(v,y){o=v,(!l||y&2)&&set_data_maybe_contenteditable(r,o[1],m.contenteditable),set_attributes(n,m=get_spread_update(f,[y&8&&o[3]])),toggle_class(n,"disabled",o[2]),toggle_class(n,"svelte-9r8t4s",!0),set_attributes(e,p=get_spread_update(h,[{class:"label"},y&8&&o[3]])),toggle_class(e,"svelte-9r8t4s",!0),b&&b.p&&(!l||y&32)&&update_slot_base(b,g,o,o[5],l?get_slot_changes(g,o[5],y,null):get_all_dirty_from_scope(o[5]),null)},i(v){l||(transition_in(b,v),l=!0)},o(v){transition_out(b,v),l=!1},d(v){v&&(detach(e),detach(a),detach(s)),b&&b.d(v),u=!1,run_all(d)}}}function create_if_block$1j(o){let e,t,n,r,a,s;const l=o[6].default,u=create_slot(l,o,o[5],null);let d=[o[3],{class:"checkLabel"}],f={};for(let m=0;m<d.length;m+=1)f=assign(f,d[m]);return{c(){u&&u.c(),e=space(),t=element("span"),n=text(o[1]),set_attributes(t,f),toggle_class(t,"disabled",o[2]),toggle_class(t,"svelte-9r8t4s",!0)},m(m,h){u&&u.m(m,h),insert(m,e,h),insert(m,t,h),append(t,n),r=!0,a||(s=listen(t,"click",function(){is_function(o[3].onClick)&&o[3].onClick.apply(this,arguments)}),a=!0)},p(m,h){o=m,u&&u.p&&(!r||h&32)&&update_slot_base(u,l,o,o[5],r?get_slot_changes(l,o[5],h,null):get_all_dirty_from_scope(o[5]),null),(!r||h&2)&&set_data_maybe_contenteditable(n,o[1],f.contenteditable),set_attributes(t,f=get_spread_update(d,[h&8&&o[3],{class:"checkLabel"}])),toggle_class(t,"disabled",o[2]),toggle_class(t,"svelte-9r8t4s",!0)},i(m){r||(transition_in(u,m),r=!0)},o(m){transition_out(u,m),r=!1},d(m){m&&(detach(e),detach(t)),u&&u.d(m),a=!1,s()}}}function create_fragment$2$(o){let e,t,n,r;const a=[create_if_block$1j,create_else_block$A],s=[];function l(u,d){return u[0]=="checkbox"?0:1}return t=l(o),n=s[t]=a[t](o),{c(){e=element("div"),n.c(),attr(e,"class","row svelte-9r8t4s")},m(u,d){insert(u,e,d),s[t].m(e,null),r=!0},p(u,[d]){let f=t;t=l(u),t===f?s[t].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),n=s[t],n?n.p(u,d):(n=s[t]=a[t](u),n.c()),transition_in(n,1),n.m(e,null))},i(u){r||(transition_in(n),r=!0)},o(u){transition_out(n),r=!1},d(u){u&&detach(e),s[t].d()}}}function instance$2Z(o,e,t){let{$$slots:n={},$$scope:r}=e,{type:a}=e,{label:s}=e,{noMargin:l}=e,{disabled:u=!1}=e,{labelProps:d={}}=e;return o.$$set=f=>{"type"in f&&t(0,a=f.type),"label"in f&&t(1,s=f.label),"noMargin"in f&&t(4,l=f.noMargin),"disabled"in f&&t(2,u=f.disabled),"labelProps"in f&&t(3,d=f.labelProps),"$$scope"in f&&t(5,r=f.$$scope)},[a,s,u,d,l,r,n]}class FormFieldTemplateTiny extends SvelteComponent{constructor(e){super(),init(this,e,instance$2Z,create_fragment$2$,safe_not_equal,{type:0,label:1,noMargin:4,disabled:2,labelProps:3})}}const SqlGeneratorModal_svelte_svelte_type_style_lang="";function get_each_context$t(o,e,t){const n=o.slice();return n[28]=e[t],n}function create_default_slot_9$2(o){let e;return{c(){e=text("Choose objects")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_8$3(o){let e,t,n;function r(s){o[20](s)}let a={placeholder:"Search tables or objects"};return o[4]!==void 0&&(a.value=o[4]),e=new SearchInput({props:a}),binding_callbacks.push(()=>bind(e,"value",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};!t&&l[0]&16&&(t=!0,u.value=s[4],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}function create_default_slot_7$4(o){let e,t;return e=new AppObjectList({props:{list:o[8].map(o[21]),module:databaseObjectAppObject,groupFunc:o[22],isExpandable:func_2$6,filter:o[4],disableContextMenu:!0,checkedObjectsStore:o[10]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&259&&(a.list=n[8].map(n[21])),r[0]&16&&(a.filter=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot_1$6(o){let e,t,n,r,a,s,l;return t=new WidgetTitle({props:{$$slots:{default:[create_default_slot_9$2]},$$scope:{ctx:o}}}),r=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_8$3]},$$scope:{ctx:o}}}),s=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot_7$4]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"class","flexcol flex1")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),l=!0},p(u,d){const f={};d[1]&1&&(f.$$scope={dirty:d,ctx:u}),t.$set(f);const m={};d[0]&16|d[1]&1&&(m.$$scope={dirty:d,ctx:u}),r.$set(m);const h={};d[0]&275|d[1]&1&&(h.$$scope={dirty:d,ctx:u}),s.$set(h)},i(u){l||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s)}}}function create_else_block$z(o){let e,t,n,r,a,s,l,u=o[7]&&create_if_block_6$6();r=new SqlEditor({props:{readOnly:!0,value:o[5]}});let d=o[2]&&create_if_block_5$c();return{c(){e=element("div"),u&&u.c(),t=space(),n=element("div"),create_component(r.$$.fragment),a=space(),d&&d.c(),s=empty(),attr(n,"class","relative flex1"),attr(e,"class","flexcol flex1")},m(f,m){insert(f,e,m),u&&u.m(e,null),append(e,t),append(e,n),mount_component(r,n,null),insert(f,a,m),d&&d.m(f,m),insert(f,s,m),l=!0},p(f,m){f[7]?u?m[0]&128&&transition_in(u,1):(u=create_if_block_6$6(),u.c(),transition_in(u,1),u.m(e,t)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros());const h={};m[0]&32&&(h.value=f[5]),r.$set(h),f[2]?d?m[0]&4&&transition_in(d,1):(d=create_if_block_5$c(),d.c(),transition_in(d,1),d.m(s.parentNode,s)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){l||(transition_in(u),transition_in(r.$$.fragment,f),transition_in(d),l=!0)},o(f){transition_out(u),transition_out(r.$$.fragment,f),transition_out(d),l=!1},d(f){f&&(detach(e),detach(a),detach(s)),u&&u.d(),destroy_component(r),d&&d.d(f)}}}function create_if_block_4$k(o){let e,t;return e=new ErrorInfo({props:{message:o[6]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&64&&(a.message=n[6]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$6(o){let e,t;return e=new ErrorInfo({props:{icon:"img warn",message:"SQL truncated, file size limit exceed"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$c(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading SQL preview"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$m(o){let e,t,n,r;const a=[create_if_block_4$k,create_else_block$z],s=[];function l(u,d){return u[6]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_default_slot_6$4(o){let e;return{c(){e=text("Generator settings")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_3$o(o){let e,t,n;return t=new FormCheckboxField({props:{label:"Test if exists",name:"checkIfTableExists"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","ml-2")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_2$x(o){let e,t,n,r,a,s,l;return t=new FormCheckboxField({props:{label:"Skip autoincrement column",name:"skipAutoincrementColumn"}}),r=new FormCheckboxField({props:{label:"Disable constraints",name:"disableConstraints"}}),s=new FormCheckboxField({props:{label:"Omit NULL values",name:"omitNulls"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"class","ml-2")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),l=!0},i(u){l||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s)}}}function create_if_block_1$M(o){let e,t,n,r;return t=new FormCheckboxField({props:{label:"Check if exists",name:`checkIf${o[28]}Exists`}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),attr(e,"class","ml-2")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_each_block$t(o){let e,t,n,r,a,s,l,u;n=new FormCheckboxField({props:{label:"Create",name:`create${o[28]}s`}}),a=new FormCheckboxField({props:{label:"Drop",name:`drop${o[28]}s`}});let d=o[27][`drop${o[28]}s`]&&create_if_block_1$M(o);return{c(){e=element("div"),e.textContent=`${getObjectTypeFieldLabel(o[28].toLowerCase()+"s")}`,t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),d&&d.c(),l=empty(),attr(e,"class","obj-heading svelte-2dwto4")},m(f,m){insert(f,e,m),insert(f,t,m),mount_component(n,f,m),insert(f,r,m),mount_component(a,f,m),insert(f,s,m),d&&d.m(f,m),insert(f,l,m),u=!0},p(f,m){f[27][`drop${f[28]}s`]?d?m[0]&134217728&&transition_in(d,1):(d=create_if_block_1$M(f),d.c(),transition_in(d,1),d.m(l.parentNode,l)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){u||(transition_in(n.$$.fragment,f),transition_in(a.$$.fragment,f),transition_in(d),u=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(a.$$.fragment,f),transition_out(d),u=!1},d(f){f&&(detach(e),detach(t),detach(r),detach(s),detach(l)),destroy_component(n,f),destroy_component(a,f),d&&d.d(f)}}}function create_default_slot_5$9(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T;n=new FormCheckboxField({props:{label:"Drop tables",name:"dropTables"}});let $=o[27].dropTables&&create_if_block_3$o();s=new FormCheckboxField({props:{label:"Drop references",name:"dropReferences"}}),u=new FormCheckboxField({props:{label:"Create tables",name:"createTables"}}),f=new FormCheckboxField({props:{label:"Create references",name:"createReferences"}}),h=new FormCheckboxField({props:{label:"Create foreign keys",name:"createForeignKeys"}}),g=new FormCheckboxField({props:{label:"Create indexes",name:"createIndexes"}}),v=new FormCheckboxField({props:{label:"Insert",name:"insert"}});let S=o[27].insert&&create_if_block_2$x();E=new FormCheckboxField({props:{label:"Truncate tables (delete all rows)",name:"truncate"}});let I=ensure_array_like(["View","Matview","Procedure","Function","Trigger"]),R=[];for(let M=0;M<5;M+=1)R[M]=create_each_block$t(get_each_context$t(o,I,M));const N=M=>transition_out(R[M],1,1,()=>{R[M]=null});return{c(){e=element("div"),e.textContent="Tables",t=space(),create_component(n.$$.fragment),r=space(),$&&$.c(),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),d=space(),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),p=space(),create_component(g.$$.fragment),b=space(),create_component(v.$$.fragment),y=space(),S&&S.c(),C=space(),create_component(E.$$.fragment),A=space();for(let M=0;M<5;M+=1)R[M].c();k=empty(),attr(e,"class","obj-heading svelte-2dwto4")},m(M,F){insert(M,e,F),insert(M,t,F),mount_component(n,M,F),insert(M,r,F),$&&$.m(M,F),insert(M,a,F),mount_component(s,M,F),insert(M,l,F),mount_component(u,M,F),insert(M,d,F),mount_component(f,M,F),insert(M,m,F),mount_component(h,M,F),insert(M,p,F),mount_component(g,M,F),insert(M,b,F),mount_component(v,M,F),insert(M,y,F),S&&S.m(M,F),insert(M,C,F),mount_component(E,M,F),insert(M,A,F);for(let D=0;D<5;D+=1)R[D]&&R[D].m(M,F);insert(M,k,F),T=!0},p(M,F){if(M[27].dropTables?$?F[0]&134217728&&transition_in($,1):($=create_if_block_3$o(),$.c(),transition_in($,1),$.m(a.parentNode,a)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros()),M[27].insert?S?F[0]&134217728&&transition_in(S,1):(S=create_if_block_2$x(),S.c(),transition_in(S,1),S.m(C.parentNode,C)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()),F[0]&134217728){I=ensure_array_like(["View","Matview","Procedure","Function","Trigger"]);let D;for(D=0;D<5;D+=1){const x=get_each_context$t(M,I,D);R[D]?(R[D].p(x,F),transition_in(R[D],1)):(R[D]=create_each_block$t(x),R[D].c(),transition_in(R[D],1),R[D].m(k.parentNode,k))}for(group_outros(),D=5;D<5;D+=1)N(D);check_outros()}},i(M){if(!T){transition_in(n.$$.fragment,M),transition_in($),transition_in(s.$$.fragment,M),transition_in(u.$$.fragment,M),transition_in(f.$$.fragment,M),transition_in(h.$$.fragment,M),transition_in(g.$$.fragment,M),transition_in(v.$$.fragment,M),transition_in(S),transition_in(E.$$.fragment,M);for(let F=0;F<5;F+=1)transition_in(R[F]);T=!0}},o(M){transition_out(n.$$.fragment,M),transition_out($),transition_out(s.$$.fragment,M),transition_out(u.$$.fragment,M),transition_out(f.$$.fragment,M),transition_out(h.$$.fragment,M),transition_out(g.$$.fragment,M),transition_out(v.$$.fragment,M),transition_out(S),transition_out(E.$$.fragment,M),R=R.filter(Boolean);for(let F=0;F<5;F+=1)transition_out(R[F]);T=!1},d(M){M&&(detach(e),detach(t),detach(r),detach(a),detach(l),detach(d),detach(m),detach(p),detach(b),detach(y),detach(C),detach(A),detach(k)),destroy_component(n,M),$&&$.d(M),destroy_component(s,M),destroy_component(u,M),destroy_component(f,M),destroy_component(h,M),destroy_component(g,M),destroy_component(v,M),S&&S.d(M),destroy_component(E,M),destroy_each(R,M)}}}function create_default_slot_4$a(o){let e,t;return e=new FormValues({props:{$$slots:{default:[create_default_slot_5$9,({values:n})=>({27:n}),({values:n})=>[n?134217728:0]]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&134217728|r[1]&1&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot_1$5(o){let e,t,n,r,a;return t=new WidgetTitle({props:{$$slots:{default:[create_default_slot_6$4]},$$scope:{ctx:o}}}),r=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot_4$a]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","flexcol flex1")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l[1]&1&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l[1]&1&&(d.$$scope={dirty:l,ctx:s}),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create__2_slot$l(o){let e,t;return e=new HorizontalSplitter({props:{initialValue:"~300px",$$slots:{2:[create__2_slot_1$5],1:[create__1_slot$m]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&228|r[1]&1&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$f(o){let e,t,n;function r(s){o[23](s)}let a={initialValue:"300px",$$slots:{2:[create__2_slot$l],1:[create__1_slot_1$6]},$$scope:{ctx:o}};return o[3]!==void 0&&(a.size=o[3]),e=new HorizontalSplitter({props:a}),binding_callbacks.push(()=>bind(e,"size",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};l[0]&503|l[1]&1&&(u.$$scope={dirty:l,ctx:s}),!t&&l[0]&8&&(t=!0,u.size=s[3],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}function create_if_block$1i(o){let e,t;return e=new FontIcon({props:{icon:"icon loading"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$h(o){let e,t,n,r,a,s,l,u;n=new FontIcon({props:{icon:"icon database"}});let d=o[2]&&create_if_block$1i();return{c(){e=text(`SQL Generator
      `),t=element("span"),create_component(n.$$.fragment),r=space(),a=text(o[1]),s=space(),d&&d.c(),l=empty(),attr(t,"class","dbname svelte-2dwto4")},m(f,m){insert(f,e,m),insert(f,t,m),mount_component(n,t,null),append(t,r),append(t,a),insert(f,s,m),d&&d.m(f,m),insert(f,l,m),u=!0},p(f,m){(!u||m[0]&2)&&set_data(a,f[1]),f[2]?d?m[0]&4&&transition_in(d,1):(d=create_if_block$1i(),d.c(),transition_in(d,1),d.m(l.parentNode,l)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){u||(transition_in(n.$$.fragment,f),transition_in(d),u=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(d),u=!1},d(f){f&&(detach(e),detach(t),detach(s),detach(l)),destroy_component(n),d&&d.d(f)}}}function create_default_slot_2$j(o){let e;return{c(){e=text("Edit SQL")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$F(o){let e;return{c(){e=text("Close")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$g(o){let e,t,n,r,a;return t=new LargeButton({props:{icon:"icon sql-file",$$slots:{default:[create_default_slot_2$j]},$$scope:{ctx:o}}}),t.$on("click",o[12]),r=new LargeButton({props:{icon:"icon close",$$slots:{default:[create_default_slot_1$F]},$$scope:{ctx:o}}}),r.$on("click",closeCurrentModal),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","flex m-2")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l[1]&1&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l[1]&1&&(d.$$scope={dirty:l,ctx:s}),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_default_slot$1d(o){let e,t;const n=[o[13],{fullScreen:!0}];let r={$$slots:{footer:[create_footer_slot$g],header:[create_header_slot$h],default:[create_default_slot_3$f]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&8192?get_spread_update(n,[get_spread_object(a[13]),n[1]]):{};s[0]&511|s[1]&1&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2_(o){let e,t;return e=new FormProviderCore({props:{values:o[11],template:FormFieldTemplateTiny,$$slots:{default:[create_default_slot$1d]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&8703|r[1]&1&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func_2$6=o=>o.objectTypeField=="tables"||o.objectTypeField=="views";function instance$2Y(o,e,t){let n,r;const a=["conid","database","initialConfig","initialObjects"];let s=compute_rest_props(e,a),l,u=noop$1,d=()=>(u(),u=subscribe(n,K=>t(17,l=K)),n),f,m;o.$$.on_destroy.push(()=>u());var h=this&&this.__awaiter||function(K,U,G,W){function q(H){return H instanceof G?H:new G(function(z){z(H)})}return new(G||(G=Promise))(function(H,z){function Y(Q){try{J(W.next(Q))}catch(X){z(X)}}function V(Q){try{J(W.throw(Q))}catch(X){z(X)}}function J(Q){Q.done?H(Q.value):q(Q.value).then(Y,V)}J((W=W.apply(K,U||[])).next())})};let{conid:p}=e,{database:g}=e,{initialConfig:b={checkIfTableExists:!0,disableConstraints:!0,createTables:!0,createForeignKeys:!0,createViews:!0,createMatviews:!0,createProcedures:!0,createFunctions:!0,createTriggers:!0}}=e,{initialObjects:v=null}=e,y=!1,C,E="",A="",k=!1,T=null,$=!1;const S=writable(v||l&&l.tables||[]);component_subscribe(o,S,K=>t(18,f=K));const I=writable(b);component_subscribe(o,I,K=>t(19,m=K));const R=createRef(null);function N(K,U){return h(this,void 0,void 0,function*(){const G=uuidv1();R.set(G),t(2,y=!0);const W=yield apiCall("database-connections/sql-preview",{conid:p,database:g,objects:U,options:K});if(R.get()!=G)return;const{sql:q,isTruncated:H,isError:z,errorMessage:Y}=W||{};t(7,$=H),z?t(6,T=Y||"Unknown error"):(t(6,T=null),_.isString(q)&&t(5,A=q)),t(2,y=!1)})}function M(){openNewTab({title:"Query #",icon:"img sql-file",tabComponent:"QueryTab",props:{conid:p,database:g}},{editor:A}),closeCurrentModal()}function F(K){E=K,t(4,E)}const D=K=>({...K,conid:p,database:g}),x=K=>getObjectTypeFieldLabel(K.objectTypeField);function B(K){C=K,t(3,C)}return o.$$set=K=>{e=assign(assign({},e),exclude_internal_props(K)),t(13,s=compute_rest_props(e,a)),"conid"in K&&t(0,p=K.conid),"database"in K&&t(1,g=K.database),"initialConfig"in K&&t(14,b=K.initialConfig),"initialObjects"in K&&t(15,v=K.initialObjects)},o.$$.update=()=>{o.$$.dirty[0]&3&&d(t(9,n=useDatabaseInfo({conid:p,database:g}))),o.$$.dirty[0]&229376&&l&&!k&&!v&&(t(16,k=!0),set_store_value(S,f=l.tables,f)),o.$$.dirty[0]&786432&&N(m,f),o.$$.dirty[0]&131072&&t(8,r=_.flatten(["tables","views","matviews","procedures","functions"].map(K=>_.sortBy(((l||{})[K]||[]).map(U=>Object.assign(Object.assign({},U),{objectTypeField:K})),["schemaName","pureName"]))))},[p,g,y,C,E,A,T,$,r,n,S,I,M,s,b,v,k,l,f,m,F,D,x,B]}class SqlGeneratorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2Y,create_fragment$2_,safe_not_equal,{conid:0,database:1,initialConfig:14,initialObjects:15},null,[-1,-1])}}const SqlGeneratorModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:SqlGeneratorModal},Symbol.toStringTag,{value:"Module"}));function createQuickExportMenuItems(o,e){return[...getExtensions().quickExports.map(n=>({text:n.label,onClick:o(n)})),{divider:!0},{text:"Current archive",onClick:o({extension:"jsonl",label:"Current archive",noFilenameDependency:!0,createWriter:(n,r)=>({functionName:"archiveWriter",props:{fileName:r,folderName:getCurrentArchive()}})})},{divider:!0},{text:"More...",...e}]}function createQuickExportMenu(o,e){return{text:"Export",submenu:createQuickExportMenuItems(o,e)}}function create_default_slot$1c(o){let e,t,n,r=[{checked:o[3]},{type:"checkbox"},o[8]],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("input"),set_attributes(e,a)},m(s,l){insert(s,e,l),e.autofocus&&e.focus(),o[10](e),t||(n=listen(e,"change",o[7]),t=!0)},p(s,l){set_attributes(e,a=get_spread_update(r,[l&8&&{checked:s[3]},{type:"checkbox"},l&256&&s[8]]))},d(s){s&&detach(e),o[10](null),t=!1,n()}}}function create_fragment$2Z(o){let e,t,n;const r=[{type:"checkbox"},{label:o[0]},{disabled:o[1]},o[2],{labelProps:o[1]?{disabled:!0}:{onClick:o[11]}}];var a=o[5];function s(l){let u={$$slots:{default:[create_default_slot$1c]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&87?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&2&&{disabled:l[1]},u&4&&get_spread_object(l[2]),u&82&&{labelProps:l[1]?{disabled:!0}:{onClick:l[11]}}]):{};if(u&16664&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[5])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$2X(o,e,t){const n=["label","name","disabled","templateProps","checked"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{disabled:l=!1}=e,{templateProps:u={}}=e,{checked:d}=e,f;const{template:m,setFieldValue:h,values:p}=getFormContext(),g=createEventDispatcher();function b(){g("change",f.checked)}function v(C){binding_callbacks[C?"unshift":"push"](()=>{f=C,t(4,f)})}const y=()=>{g("change",!f.checked)};return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(8,r=compute_rest_props(e,n)),"label"in C&&t(0,a=C.label),"name"in C&&t(9,s=C.name),"disabled"in C&&t(1,l=C.disabled),"templateProps"in C&&t(2,u=C.templateProps),"checked"in C&&t(3,d=C.checked)},[a,l,u,d,f,m,g,b,r,s,v,y]}class TemplatedCheckboxField extends SvelteComponent{constructor(e){super(),init(this,e,instance$2X,create_fragment$2Z,safe_not_equal,{label:0,name:9,disabled:1,templateProps:2,checked:3})}}const ConfirmSqlModal_svelte_svelte_type_style_lang="";function get_each_context$s(o,e,t){const n=o.slice();return n[17]=e[t],n}function create_if_block_3$n(o){let e,t,n;return t=new FormCheckboxField({props:{templateProps:{noMargin:!0},label:"Delete references CASCADE",name:"deleteReferencesCascade"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","mt-2")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_2$w(o){let e,t,n,r,a,s,l;t=new FormStyledButton({props:{value:"Check all"}}),t.$on("click",o[14]),r=new FormStyledButton({props:{value:"Uncheck all"}}),r.$on("click",o[15]);let u=ensure_array_like(_.sortBy(o[2],"title")),d=[];for(let m=0;m<u.length;m+=1)d[m]=create_each_block$s(get_each_context$s(o,u,m));const f=m=>transition_out(d[m],1,1,()=>{d[m]=null});return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),s=element("div");for(let m=0;m<d.length;m+=1)d[m].c();attr(e,"class","form-margin flex svelte-1jlkcxq"),attr(s,"class","form-margin flex flex-wrap svelte-1jlkcxq")},m(m,h){insert(m,e,h),mount_component(t,e,null),append(e,n),mount_component(r,e,null),insert(m,a,h),insert(m,s,h);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(s,null);l=!0},p(m,h){if(h&4){u=ensure_array_like(_.sortBy(m[2],"title"));let p;for(p=0;p<u.length;p+=1){const g=get_each_context$s(m,u,p);d[p]?(d[p].p(g,h),transition_in(d[p],1)):(d[p]=create_each_block$s(g),d[p].c(),transition_in(d[p],1),d[p].m(s,null))}for(group_outros(),p=u.length;p<d.length;p+=1)f(p);check_outros()}},i(m){if(!l){transition_in(t.$$.fragment,m),transition_in(r.$$.fragment,m);for(let h=0;h<u.length;h+=1)transition_in(d[h]);l=!0}},o(m){transition_out(t.$$.fragment,m),transition_out(r.$$.fragment,m),d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)transition_out(d[h]);l=!1},d(m){m&&(detach(e),detach(a),detach(s)),destroy_component(t),destroy_component(r),destroy_each(d,m)}}}function create_each_block$s(o){let e,t,n,r;return t=new FormCheckboxField({props:{defaultValue:!0,templateProps:{noMargin:!0},label:o[17].title,name:`deleteReferencesFor_${o[17].title}`}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),attr(e,"class","mr-1 nowrap")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},p(a,s){const l={};s&4&&(l.label=a[17].title),s&4&&(l.name=`deleteReferencesFor_${a[17].title}`),t.$set(l)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_1$L(o){let e,t,n,r,a,s,l;return n=new FontIcon({props:{icon:"img warn"}}),s=new FormCheckboxField({props:{templateProps:{noMargin:!0},label:"Allow recreate (don't use on production databases)",name:"allowRecreate"}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=text(` This operation is not directly supported by SQL engine. DbGate can emulate it, but
          please check the generated SQL script.`),a=space(),create_component(s.$$.fragment),attr(e,"class","form-margin svelte-1jlkcxq")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(t,r),append(e,a),mount_component(s,e,null),l=!0},i(u){l||(transition_in(n.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n),destroy_component(s)}}}function create_if_block$1h(o){let e,t,n;return t=new TemplatedCheckboxField({props:{label:"Don't ask again",templateProps:{noMargin:!0},checked:o[5]}}),t.$on("change",o[16]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","mt-2")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&32&&(s.checked=r[5]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_default_slot_1$E(o){let e,t,n,r=!_.isEmpty(o[2]),a,s,l,u,d;t=new SqlEditor({props:{engine:o[1],value:o[6],readOnly:!0}});let f=r&&create_if_block_3$n(),m=o[4].deleteReferencesCascade&&create_if_block_2$w(o),h=o[7]&&create_if_block_1$L(),p=o[3]&&create_if_block$1h(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),f&&f.c(),a=space(),m&&m.c(),s=space(),h&&h.c(),l=space(),p&&p.c(),u=empty(),attr(e,"class","editor svelte-1jlkcxq")},m(g,b){insert(g,e,b),mount_component(t,e,null),insert(g,n,b),f&&f.m(g,b),insert(g,a,b),m&&m.m(g,b),insert(g,s,b),h&&h.m(g,b),insert(g,l,b),p&&p.m(g,b),insert(g,u,b),d=!0},p(g,b){const v={};b&2&&(v.engine=g[1]),b&64&&(v.value=g[6]),t.$set(v),b&4&&(r=!_.isEmpty(g[2])),r?f?b&4&&transition_in(f,1):(f=create_if_block_3$n(),f.c(),transition_in(f,1),f.m(a.parentNode,a)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),g[4].deleteReferencesCascade?m?(m.p(g,b),b&16&&transition_in(m,1)):(m=create_if_block_2$w(g),m.c(),transition_in(m,1),m.m(s.parentNode,s)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),g[7]?h?b&128&&transition_in(h,1):(h=create_if_block_1$L(),h.c(),transition_in(h,1),h.m(l.parentNode,l)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),g[3]?p?(p.p(g,b),b&8&&transition_in(p,1)):(p=create_if_block$1h(g),p.c(),transition_in(p,1),p.m(u.parentNode,u)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(g){d||(transition_in(t.$$.fragment,g),transition_in(f),transition_in(m),transition_in(h),transition_in(p),d=!0)},o(g){transition_out(t.$$.fragment,g),transition_out(f),transition_out(m),transition_out(h),transition_out(p),d=!1},d(g){g&&(detach(e),detach(n),detach(a),detach(s),detach(l),detach(u)),destroy_component(t),f&&f.d(g),m&&m.d(g),h&&h.d(g),p&&p.d(g)}}}function create_header_slot$g(o){let e;return{c(){e=element("div"),e.textContent="Save changes",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$f(o){let e,t,n,r,a,s,l;return t=new FormSubmit({props:{value:"OK",disabled:o[7]&&!o[4].allowRecreate}}),t.$on("click",o[12]),r=new FormStyledButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal),s=new FormStyledButton({props:{type:"button",value:"Open script"}}),s.$on("click",o[13]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"slot","footer")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),l=!0},p(u,d){const f={};d&144&&(f.disabled=u[7]&&!u[4].allowRecreate),t.$set(f)},i(u){l||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s)}}}function create_default_slot$1b(o){let e,t;const n=[o[9]];let r={$$slots:{footer:[create_footer_slot$f],header:[create_header_slot$g],default:[create_default_slot_1$E]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&512?get_spread_update(n,[get_spread_object(a[9])]):{};s&1048831&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2Y(o){let e,t;return e=new FormProviderCore({props:{values:o[8],$$slots:{default:[create_default_slot$1b]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1049343&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}async function saveScriptToDatabase({conid:o,database:e},t,n=!0){const r=await apiCall("database-connections/run-script",{conid:o,database:e,sql:t}),{errorMessage:a}=r||{};a?showModal(ErrorMessageModal,{title:"Error when executing script",message:a}):(showSnackbarSuccess("Saved to database"),n&&apiCall("database-connections/sync-model",{conid:o,database:e}))}function instance$2W(o,e,t){let n,r;const a=["sql","onConfirm","engine","recreates","deleteCascadesScripts","skipConfirmSettingKey"];let s=compute_rest_props(e,a),l,{sql:u}=e,{onConfirm:d}=e,{engine:f}=e,{recreates:m}=e,{deleteCascadesScripts:h}=e,{skipConfirmSettingKey:p=null}=e,g;const b=writable({});component_subscribe(o,b,k=>t(4,l=k));const v=k=>{closeCurrentModal(),d(r)},y=()=>{newQuery({initialData:r}),closeCurrentModal()},C=()=>{set_store_value(b,l=_.omitBy(l,(k,T)=>T.startsWith("deleteReferencesFor_")),l)},E=()=>{const k={...l};for(const T of h)k[`deleteReferencesFor_${T.title}`]=!1;set_store_value(b,l=k,l)},A=k=>{t(5,g=k.detail),apiCall("config/update-settings",{[p]:k.detail})};return o.$$set=k=>{e=assign(assign({},e),exclude_internal_props(k)),t(9,s=compute_rest_props(e,a)),"sql"in k&&t(10,u=k.sql),"onConfirm"in k&&t(0,d=k.onConfirm),"engine"in k&&t(1,f=k.engine),"recreates"in k&&t(11,m=k.recreates),"deleteCascadesScripts"in k&&t(2,h=k.deleteCascadesScripts),"skipConfirmSettingKey"in k&&t(3,p=k.skipConfirmSettingKey)},o.$$.update=()=>{o.$$.dirty&2048&&t(7,n=_.sum(_.values(m||{}))>0),o.$$.dirty&1044&&t(6,r=l.deleteReferencesCascade?[...h.filter(({script:k,title:T})=>l[`deleteReferencesFor_${T}`]!==!1).map(({script:k,title:T})=>k),u].join(`
`):u)},[d,f,h,p,l,g,r,n,b,s,u,m,v,y,C,E,A]}class ConfirmSqlModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2W,create_fragment$2Y,safe_not_equal,{sql:10,onConfirm:0,engine:1,recreates:11,deleteCascadesScripts:2,skipConfirmSettingKey:3})}}const ConfirmSqlModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConfirmSqlModal,saveScriptToDatabase},Symbol.toStringTag,{value:"Module"}));async function alterDatabaseDialog(o,e,t){const n=await getConnectionInfo({conid:o}),r=lib.findEngineDriver(n,getExtensions()),a=lib.generateDbPairingId(await getDatabaseInfo({conid:o,database:e})),s=_.cloneDeep(a);t(s);const{sql:l,recreates:u}=lib.getAlterDatabaseScript(a,s,{},a,s,r);showModal(ConfirmSqlModal,{sql:l,recreates:u,onConfirm:async()=>{saveScriptToDatabase({conid:o,database:e},l)},engine:r.engine})}async function renameDatabaseObjectDialog(o,e,t,n){showModal(InputTextModal,{value:t,label:"New name",header:"Rename object",onConfirm:r=>{alterDatabaseDialog(o,e,a=>n(a,r))}})}function _typeof$1(o){"@babel/helpers - typeof";return _typeof$1=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof$1(o)}function toInteger(o){if(o===null||o===!0||o===!1)return NaN;var e=Number(o);return isNaN(e)?e:e<0?Math.ceil(e):Math.floor(e)}function requiredArgs(o,e){if(e.length<o)throw new TypeError(o+" argument"+(o>1?"s":"")+" required, but only "+e.length+" present")}function toDate(o){requiredArgs(1,arguments);var e=Object.prototype.toString.call(o);return o instanceof Date||_typeof$1(o)==="object"&&e==="[object Date]"?new Date(o.getTime()):typeof o=="number"||e==="[object Number]"?new Date(o):((typeof o=="string"||e==="[object String]")&&typeof console<"u"&&(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://github.com/date-fns/date-fns/blob/master/docs/upgradeGuide.md#string-arguments"),console.warn(new Error().stack)),new Date(NaN))}function addMilliseconds(o,e){requiredArgs(2,arguments);var t=toDate(o).getTime(),n=toInteger(e);return new Date(t+n)}var defaultOptions$1={};function getDefaultOptions(){return defaultOptions$1}function getTimezoneOffsetInMilliseconds(o){var e=new Date(Date.UTC(o.getFullYear(),o.getMonth(),o.getDate(),o.getHours(),o.getMinutes(),o.getSeconds(),o.getMilliseconds()));return e.setUTCFullYear(o.getFullYear()),o.getTime()-e.getTime()}function isDate(o){return requiredArgs(1,arguments),o instanceof Date||_typeof$1(o)==="object"&&Object.prototype.toString.call(o)==="[object Date]"}function isValid(o){if(requiredArgs(1,arguments),!isDate(o)&&typeof o!="number")return!1;var e=toDate(o);return!isNaN(Number(e))}function subMilliseconds(o,e){requiredArgs(2,arguments);var t=toInteger(e);return addMilliseconds(o,-t)}var MILLISECONDS_IN_DAY=864e5;function getUTCDayOfYear(o){requiredArgs(1,arguments);var e=toDate(o),t=e.getTime();e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0);var n=e.getTime(),r=t-n;return Math.floor(r/MILLISECONDS_IN_DAY)+1}function startOfUTCISOWeek(o){requiredArgs(1,arguments);var e=1,t=toDate(o),n=t.getUTCDay(),r=(n<e?7:0)+n-e;return t.setUTCDate(t.getUTCDate()-r),t.setUTCHours(0,0,0,0),t}function getUTCISOWeekYear(o){requiredArgs(1,arguments);var e=toDate(o),t=e.getUTCFullYear(),n=new Date(0);n.setUTCFullYear(t+1,0,4),n.setUTCHours(0,0,0,0);var r=startOfUTCISOWeek(n),a=new Date(0);a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0);var s=startOfUTCISOWeek(a);return e.getTime()>=r.getTime()?t+1:e.getTime()>=s.getTime()?t:t-1}function startOfUTCISOWeekYear(o){requiredArgs(1,arguments);var e=getUTCISOWeekYear(o),t=new Date(0);t.setUTCFullYear(e,0,4),t.setUTCHours(0,0,0,0);var n=startOfUTCISOWeek(t);return n}var MILLISECONDS_IN_WEEK$1=6048e5;function getUTCISOWeek(o){requiredArgs(1,arguments);var e=toDate(o),t=startOfUTCISOWeek(e).getTime()-startOfUTCISOWeekYear(e).getTime();return Math.round(t/MILLISECONDS_IN_WEEK$1)+1}function startOfUTCWeek(o,e){var t,n,r,a,s,l,u,d;requiredArgs(1,arguments);var f=getDefaultOptions(),m=toInteger((t=(n=(r=(a=e==null?void 0:e.weekStartsOn)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.weekStartsOn)!==null&&r!==void 0?r:f.weekStartsOn)!==null&&n!==void 0?n:(u=f.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&t!==void 0?t:0);if(!(m>=0&&m<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var h=toDate(o),p=h.getUTCDay(),g=(p<m?7:0)+p-m;return h.setUTCDate(h.getUTCDate()-g),h.setUTCHours(0,0,0,0),h}function getUTCWeekYear(o,e){var t,n,r,a,s,l,u,d;requiredArgs(1,arguments);var f=toDate(o),m=f.getUTCFullYear(),h=getDefaultOptions(),p=toInteger((t=(n=(r=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:h.firstWeekContainsDate)!==null&&n!==void 0?n:(u=h.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:1);if(!(p>=1&&p<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var g=new Date(0);g.setUTCFullYear(m+1,0,p),g.setUTCHours(0,0,0,0);var b=startOfUTCWeek(g,e),v=new Date(0);v.setUTCFullYear(m,0,p),v.setUTCHours(0,0,0,0);var y=startOfUTCWeek(v,e);return f.getTime()>=b.getTime()?m+1:f.getTime()>=y.getTime()?m:m-1}function startOfUTCWeekYear(o,e){var t,n,r,a,s,l,u,d;requiredArgs(1,arguments);var f=getDefaultOptions(),m=toInteger((t=(n=(r=(a=e==null?void 0:e.firstWeekContainsDate)!==null&&a!==void 0?a:e==null||(s=e.locale)===null||s===void 0||(l=s.options)===null||l===void 0?void 0:l.firstWeekContainsDate)!==null&&r!==void 0?r:f.firstWeekContainsDate)!==null&&n!==void 0?n:(u=f.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.firstWeekContainsDate)!==null&&t!==void 0?t:1),h=getUTCWeekYear(o,e),p=new Date(0);p.setUTCFullYear(h,0,m),p.setUTCHours(0,0,0,0);var g=startOfUTCWeek(p,e);return g}var MILLISECONDS_IN_WEEK=6048e5;function getUTCWeek(o,e){requiredArgs(1,arguments);var t=toDate(o),n=startOfUTCWeek(t,e).getTime()-startOfUTCWeekYear(t,e).getTime();return Math.round(n/MILLISECONDS_IN_WEEK)+1}function addLeadingZeros(o,e){for(var t=o<0?"-":"",n=Math.abs(o).toString();n.length<e;)n="0"+n;return t+n}var formatters$3={y:function o(e,t){var n=e.getUTCFullYear(),r=n>0?n:1-n;return addLeadingZeros(t==="yy"?r%100:r,t.length)},M:function o(e,t){var n=e.getUTCMonth();return t==="M"?String(n+1):addLeadingZeros(n+1,2)},d:function o(e,t){return addLeadingZeros(e.getUTCDate(),t.length)},a:function o(e,t){var n=e.getUTCHours()/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.toUpperCase();case"aaa":return n;case"aaaaa":return n[0];case"aaaa":default:return n==="am"?"a.m.":"p.m."}},h:function o(e,t){return addLeadingZeros(e.getUTCHours()%12||12,t.length)},H:function o(e,t){return addLeadingZeros(e.getUTCHours(),t.length)},m:function o(e,t){return addLeadingZeros(e.getUTCMinutes(),t.length)},s:function o(e,t){return addLeadingZeros(e.getUTCSeconds(),t.length)},S:function o(e,t){var n=t.length,r=e.getUTCMilliseconds(),a=Math.floor(r*Math.pow(10,n-3));return addLeadingZeros(a,t.length)}};const formatters$4=formatters$3;var dayPeriodEnum={am:"am",pm:"pm",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},formatters$1={G:function o(e,t,n){var r=e.getUTCFullYear()>0?1:0;switch(t){case"G":case"GG":case"GGG":return n.era(r,{width:"abbreviated"});case"GGGGG":return n.era(r,{width:"narrow"});case"GGGG":default:return n.era(r,{width:"wide"})}},y:function o(e,t,n){if(t==="yo"){var r=e.getUTCFullYear(),a=r>0?r:1-r;return n.ordinalNumber(a,{unit:"year"})}return formatters$4.y(e,t)},Y:function o(e,t,n,r){var a=getUTCWeekYear(e,r),s=a>0?a:1-a;if(t==="YY"){var l=s%100;return addLeadingZeros(l,2)}return t==="Yo"?n.ordinalNumber(s,{unit:"year"}):addLeadingZeros(s,t.length)},R:function o(e,t){var n=getUTCISOWeekYear(e);return addLeadingZeros(n,t.length)},u:function o(e,t){var n=e.getUTCFullYear();return addLeadingZeros(n,t.length)},Q:function o(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"Q":return String(r);case"QQ":return addLeadingZeros(r,2);case"Qo":return n.ordinalNumber(r,{unit:"quarter"});case"QQQ":return n.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return n.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(r,{width:"wide",context:"formatting"})}},q:function o(e,t,n){var r=Math.ceil((e.getUTCMonth()+1)/3);switch(t){case"q":return String(r);case"qq":return addLeadingZeros(r,2);case"qo":return n.ordinalNumber(r,{unit:"quarter"});case"qqq":return n.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return n.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(r,{width:"wide",context:"standalone"})}},M:function o(e,t,n){var r=e.getUTCMonth();switch(t){case"M":case"MM":return formatters$4.M(e,t);case"Mo":return n.ordinalNumber(r+1,{unit:"month"});case"MMM":return n.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return n.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(r,{width:"wide",context:"formatting"})}},L:function o(e,t,n){var r=e.getUTCMonth();switch(t){case"L":return String(r+1);case"LL":return addLeadingZeros(r+1,2);case"Lo":return n.ordinalNumber(r+1,{unit:"month"});case"LLL":return n.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return n.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(r,{width:"wide",context:"standalone"})}},w:function o(e,t,n,r){var a=getUTCWeek(e,r);return t==="wo"?n.ordinalNumber(a,{unit:"week"}):addLeadingZeros(a,t.length)},I:function o(e,t,n){var r=getUTCISOWeek(e);return t==="Io"?n.ordinalNumber(r,{unit:"week"}):addLeadingZeros(r,t.length)},d:function o(e,t,n){return t==="do"?n.ordinalNumber(e.getUTCDate(),{unit:"date"}):formatters$4.d(e,t)},D:function o(e,t,n){var r=getUTCDayOfYear(e);return t==="Do"?n.ordinalNumber(r,{unit:"dayOfYear"}):addLeadingZeros(r,t.length)},E:function o(e,t,n){var r=e.getUTCDay();switch(t){case"E":case"EE":case"EEE":return n.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return n.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(r,{width:"short",context:"formatting"});case"EEEE":default:return n.day(r,{width:"wide",context:"formatting"})}},e:function o(e,t,n,r){var a=e.getUTCDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"e":return String(s);case"ee":return addLeadingZeros(s,2);case"eo":return n.ordinalNumber(s,{unit:"day"});case"eee":return n.day(a,{width:"abbreviated",context:"formatting"});case"eeeee":return n.day(a,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(a,{width:"short",context:"formatting"});case"eeee":default:return n.day(a,{width:"wide",context:"formatting"})}},c:function o(e,t,n,r){var a=e.getUTCDay(),s=(a-r.weekStartsOn+8)%7||7;switch(t){case"c":return String(s);case"cc":return addLeadingZeros(s,t.length);case"co":return n.ordinalNumber(s,{unit:"day"});case"ccc":return n.day(a,{width:"abbreviated",context:"standalone"});case"ccccc":return n.day(a,{width:"narrow",context:"standalone"});case"cccccc":return n.day(a,{width:"short",context:"standalone"});case"cccc":default:return n.day(a,{width:"wide",context:"standalone"})}},i:function o(e,t,n){var r=e.getUTCDay(),a=r===0?7:r;switch(t){case"i":return String(a);case"ii":return addLeadingZeros(a,t.length);case"io":return n.ordinalNumber(a,{unit:"day"});case"iii":return n.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return n.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return n.day(r,{width:"short",context:"formatting"});case"iiii":default:return n.day(r,{width:"wide",context:"formatting"})}},a:function o(e,t,n){var r=e.getUTCHours(),a=r/12>=1?"pm":"am";switch(t){case"a":case"aa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"aaa":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},b:function o(e,t,n){var r=e.getUTCHours(),a;switch(r===12?a=dayPeriodEnum.noon:r===0?a=dayPeriodEnum.midnight:a=r/12>=1?"pm":"am",t){case"b":case"bb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"bbb":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},B:function o(e,t,n){var r=e.getUTCHours(),a;switch(r>=17?a=dayPeriodEnum.evening:r>=12?a=dayPeriodEnum.afternoon:r>=4?a=dayPeriodEnum.morning:a=dayPeriodEnum.night,t){case"B":case"BB":case"BBB":return n.dayPeriod(a,{width:"abbreviated",context:"formatting"});case"BBBBB":return n.dayPeriod(a,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(a,{width:"wide",context:"formatting"})}},h:function o(e,t,n){if(t==="ho"){var r=e.getUTCHours()%12;return r===0&&(r=12),n.ordinalNumber(r,{unit:"hour"})}return formatters$4.h(e,t)},H:function o(e,t,n){return t==="Ho"?n.ordinalNumber(e.getUTCHours(),{unit:"hour"}):formatters$4.H(e,t)},K:function o(e,t,n){var r=e.getUTCHours()%12;return t==="Ko"?n.ordinalNumber(r,{unit:"hour"}):addLeadingZeros(r,t.length)},k:function o(e,t,n){var r=e.getUTCHours();return r===0&&(r=24),t==="ko"?n.ordinalNumber(r,{unit:"hour"}):addLeadingZeros(r,t.length)},m:function o(e,t,n){return t==="mo"?n.ordinalNumber(e.getUTCMinutes(),{unit:"minute"}):formatters$4.m(e,t)},s:function o(e,t,n){return t==="so"?n.ordinalNumber(e.getUTCSeconds(),{unit:"second"}):formatters$4.s(e,t)},S:function o(e,t){return formatters$4.S(e,t)},X:function o(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();if(s===0)return"Z";switch(t){case"X":return formatTimezoneWithOptionalMinutes(s);case"XXXX":case"XX":return formatTimezone(s);case"XXXXX":case"XXX":default:return formatTimezone(s,":")}},x:function o(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"x":return formatTimezoneWithOptionalMinutes(s);case"xxxx":case"xx":return formatTimezone(s);case"xxxxx":case"xxx":default:return formatTimezone(s,":")}},O:function o(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"O":case"OO":case"OOO":return"GMT"+formatTimezoneShort(s,":");case"OOOO":default:return"GMT"+formatTimezone(s,":")}},z:function o(e,t,n,r){var a=r._originalDate||e,s=a.getTimezoneOffset();switch(t){case"z":case"zz":case"zzz":return"GMT"+formatTimezoneShort(s,":");case"zzzz":default:return"GMT"+formatTimezone(s,":")}},t:function o(e,t,n,r){var a=r._originalDate||e,s=Math.floor(a.getTime()/1e3);return addLeadingZeros(s,t.length)},T:function o(e,t,n,r){var a=r._originalDate||e,s=a.getTime();return addLeadingZeros(s,t.length)}};function formatTimezoneShort(o,e){var t=o>0?"-":"+",n=Math.abs(o),r=Math.floor(n/60),a=n%60;if(a===0)return t+String(r);var s=e||"";return t+String(r)+s+addLeadingZeros(a,2)}function formatTimezoneWithOptionalMinutes(o,e){if(o%60===0){var t=o>0?"-":"+";return t+addLeadingZeros(Math.abs(o)/60,2)}return formatTimezone(o,e)}function formatTimezone(o,e){var t=e||"",n=o>0?"-":"+",r=Math.abs(o),a=addLeadingZeros(Math.floor(r/60),2),s=addLeadingZeros(r%60,2);return n+a+t+s}const formatters$2=formatters$1;var dateLongFormatter=function o(e,t){switch(e){case"P":return t.date({width:"short"});case"PP":return t.date({width:"medium"});case"PPP":return t.date({width:"long"});case"PPPP":default:return t.date({width:"full"})}},timeLongFormatter=function o(e,t){switch(e){case"p":return t.time({width:"short"});case"pp":return t.time({width:"medium"});case"ppp":return t.time({width:"long"});case"pppp":default:return t.time({width:"full"})}},dateTimeLongFormatter=function o(e,t){var n=e.match(/(P+)(p+)?/)||[],r=n[1],a=n[2];if(!a)return dateLongFormatter(e,t);var s;switch(r){case"P":s=t.dateTime({width:"short"});break;case"PP":s=t.dateTime({width:"medium"});break;case"PPP":s=t.dateTime({width:"long"});break;case"PPPP":default:s=t.dateTime({width:"full"});break}return s.replace("{{date}}",dateLongFormatter(r,t)).replace("{{time}}",timeLongFormatter(a,t))},longFormatters={p:timeLongFormatter,P:dateTimeLongFormatter};const longFormatters$1=longFormatters;var protectedDayOfYearTokens=["D","DD"],protectedWeekYearTokens=["YY","YYYY"];function isProtectedDayOfYearToken(o){return protectedDayOfYearTokens.indexOf(o)!==-1}function isProtectedWeekYearToken(o){return protectedWeekYearTokens.indexOf(o)!==-1}function throwProtectedError(o,e,t){if(o==="YYYY")throw new RangeError("Use `yyyy` instead of `YYYY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="YY")throw new RangeError("Use `yy` instead of `YY` (in `".concat(e,"`) for formatting years to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="D")throw new RangeError("Use `d` instead of `D` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"));if(o==="DD")throw new RangeError("Use `dd` instead of `DD` (in `".concat(e,"`) for formatting days of the month to the input `").concat(t,"`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md"))}var formatDistanceLocale={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},formatDistance=function o(e,t,n){var r,a=formatDistanceLocale[e];return typeof a=="string"?r=a:t===1?r=a.one:r=a.other.replace("{{count}}",t.toString()),n!=null&&n.addSuffix?n.comparison&&n.comparison>0?"in "+r:r+" ago":r};const formatDistance$1=formatDistance;function buildFormatLongFn(o){return function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=e.width?String(e.width):o.defaultWidth,n=o.formats[t]||o.formats[o.defaultWidth];return n}}var dateFormats={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},timeFormats={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},dateTimeFormats={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},formatLong={date:buildFormatLongFn({formats:dateFormats,defaultWidth:"full"}),time:buildFormatLongFn({formats:timeFormats,defaultWidth:"full"}),dateTime:buildFormatLongFn({formats:dateTimeFormats,defaultWidth:"full"})};const formatLong$1=formatLong;var formatRelativeLocale={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},formatRelative=function o(e,t,n,r){return formatRelativeLocale[e]};const formatRelative$1=formatRelative;function buildLocalizeFn(o){return function(e,t){var n=t!=null&&t.context?String(t.context):"standalone",r;if(n==="formatting"&&o.formattingValues){var a=o.defaultFormattingWidth||o.defaultWidth,s=t!=null&&t.width?String(t.width):a;r=o.formattingValues[s]||o.formattingValues[a]}else{var l=o.defaultWidth,u=t!=null&&t.width?String(t.width):o.defaultWidth;r=o.values[u]||o.values[l]}var d=o.argumentCallback?o.argumentCallback(e):e;return r[d]}}var eraValues={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},quarterValues={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},monthValues={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},dayValues={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},dayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},formattingDayPeriodValues={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},ordinalNumber=function o(e,t){var n=Number(e),r=n%100;if(r>20||r<10)switch(r%10){case 1:return n+"st";case 2:return n+"nd";case 3:return n+"rd"}return n+"th"},localize={ordinalNumber,era:buildLocalizeFn({values:eraValues,defaultWidth:"wide"}),quarter:buildLocalizeFn({values:quarterValues,defaultWidth:"wide",argumentCallback:function o(e){return e-1}}),month:buildLocalizeFn({values:monthValues,defaultWidth:"wide"}),day:buildLocalizeFn({values:dayValues,defaultWidth:"wide"}),dayPeriod:buildLocalizeFn({values:dayPeriodValues,defaultWidth:"wide",formattingValues:formattingDayPeriodValues,defaultFormattingWidth:"wide"})};const localize$1=localize;function buildMatchFn(o){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.width,r=n&&o.matchPatterns[n]||o.matchPatterns[o.defaultMatchWidth],a=e.match(r);if(!a)return null;var s=a[0],l=n&&o.parsePatterns[n]||o.parsePatterns[o.defaultParseWidth],u=Array.isArray(l)?findIndex(l,function(m){return m.test(s)}):findKey(l,function(m){return m.test(s)}),d;d=o.valueCallback?o.valueCallback(u):u,d=t.valueCallback?t.valueCallback(d):d;var f=e.slice(s.length);return{value:d,rest:f}}}function findKey(o,e){for(var t in o)if(o.hasOwnProperty(t)&&e(o[t]))return t}function findIndex(o,e){for(var t=0;t<o.length;t++)if(e(o[t]))return t}function buildMatchPatternFn(o){return function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=e.match(o.matchPattern);if(!n)return null;var r=n[0],a=e.match(o.parsePattern);if(!a)return null;var s=o.valueCallback?o.valueCallback(a[0]):a[0];s=t.valueCallback?t.valueCallback(s):s;var l=e.slice(r.length);return{value:s,rest:l}}}var matchOrdinalNumberPattern=/^(\d+)(th|st|nd|rd)?/i,parseOrdinalNumberPattern=/\d+/i,matchEraPatterns={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},parseEraPatterns={any:[/^b/i,/^(a|c)/i]},matchQuarterPatterns={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},parseQuarterPatterns={any:[/1/i,/2/i,/3/i,/4/i]},matchMonthPatterns={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},parseMonthPatterns={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},matchDayPatterns={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},parseDayPatterns={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},matchDayPeriodPatterns={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},parseDayPeriodPatterns={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},match={ordinalNumber:buildMatchPatternFn({matchPattern:matchOrdinalNumberPattern,parsePattern:parseOrdinalNumberPattern,valueCallback:function o(e){return parseInt(e,10)}}),era:buildMatchFn({matchPatterns:matchEraPatterns,defaultMatchWidth:"wide",parsePatterns:parseEraPatterns,defaultParseWidth:"any"}),quarter:buildMatchFn({matchPatterns:matchQuarterPatterns,defaultMatchWidth:"wide",parsePatterns:parseQuarterPatterns,defaultParseWidth:"any",valueCallback:function o(e){return e+1}}),month:buildMatchFn({matchPatterns:matchMonthPatterns,defaultMatchWidth:"wide",parsePatterns:parseMonthPatterns,defaultParseWidth:"any"}),day:buildMatchFn({matchPatterns:matchDayPatterns,defaultMatchWidth:"wide",parsePatterns:parseDayPatterns,defaultParseWidth:"any"}),dayPeriod:buildMatchFn({matchPatterns:matchDayPeriodPatterns,defaultMatchWidth:"any",parsePatterns:parseDayPeriodPatterns,defaultParseWidth:"any"})};const match$1=match;var locale={code:"en-US",formatDistance:formatDistance$1,formatLong:formatLong$1,formatRelative:formatRelative$1,localize:localize$1,match:match$1,options:{weekStartsOn:0,firstWeekContainsDate:1}};const defaultLocale=locale;var formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function format(o,e,t){var n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A;requiredArgs(2,arguments);var k=String(e),T=getDefaultOptions(),$=(n=(r=t==null?void 0:t.locale)!==null&&r!==void 0?r:T.locale)!==null&&n!==void 0?n:defaultLocale,S=toInteger((a=(s=(l=(u=t==null?void 0:t.firstWeekContainsDate)!==null&&u!==void 0?u:t==null||(d=t.locale)===null||d===void 0||(f=d.options)===null||f===void 0?void 0:f.firstWeekContainsDate)!==null&&l!==void 0?l:T.firstWeekContainsDate)!==null&&s!==void 0?s:(m=T.locale)===null||m===void 0||(h=m.options)===null||h===void 0?void 0:h.firstWeekContainsDate)!==null&&a!==void 0?a:1);if(!(S>=1&&S<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var I=toInteger((p=(g=(b=(v=t==null?void 0:t.weekStartsOn)!==null&&v!==void 0?v:t==null||(y=t.locale)===null||y===void 0||(C=y.options)===null||C===void 0?void 0:C.weekStartsOn)!==null&&b!==void 0?b:T.weekStartsOn)!==null&&g!==void 0?g:(E=T.locale)===null||E===void 0||(A=E.options)===null||A===void 0?void 0:A.weekStartsOn)!==null&&p!==void 0?p:0);if(!(I>=0&&I<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(!$.localize)throw new RangeError("locale must contain localize property");if(!$.formatLong)throw new RangeError("locale must contain formatLong property");var R=toDate(o);if(!isValid(R))throw new RangeError("Invalid time value");var N=getTimezoneOffsetInMilliseconds(R),M=subMilliseconds(R,N),F={firstWeekContainsDate:S,weekStartsOn:I,locale:$,_originalDate:R},D=k.match(longFormattingTokensRegExp).map(function(x){var B=x[0];if(B==="p"||B==="P"){var K=longFormatters$1[B];return K(x,$.formatLong)}return x}).join("").match(formattingTokensRegExp).map(function(x){if(x==="''")return"'";var B=x[0];if(B==="'")return cleanEscapedString(x);var K=formatters$2[B];if(K)return!(t!=null&&t.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(x)&&throwProtectedError(x,e,String(o)),!(t!=null&&t.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(x)&&throwProtectedError(x,e,String(o)),K(M,x,$.localize,F);if(B.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+B+"`");return x}).join("");return D}function cleanEscapedString(o){var e=o.match(escapedStringRegExp);return e?e[1].replace(doubleQuoteRegExp,"'"):o}function create_fragment$2X(o){var a;let e,t;const n=[o[5],{module:o[6].module},{data:o[0]},{title:o[0].schemaName?`${o[0].schemaName}.${o[0].pureName}`:o[0].pureName},{icon:databaseObjectIcons[o[0].objectTypeField]},{menu:o[4]},{showPinnedInsteadOfUnpin:(a=o[1])==null?void 0:a.showPinnedInsteadOfUnpin},{onPin:o[2]?null:o[8]},{onUnpin:o[2]?o[9]:null},{extInfo:o[0].tableRowCount!=null?`${formatRowCount(o[0].tableRowCount)} rows`:null}];let r={};for(let s=0;s<n.length;s+=1)r=assign(r,n[s]);return e=new AppObjectCore({props:r}),e.$on("click",o[10]),e.$on("middleclick",o[11]),e.$on("expand",o[12]),e.$on("dragstart",o[13]),e.$on("dragenter",o[14]),e.$on("dragend",o[15]),e.$on("drop",o[16]),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),t=!0},p(s,[l]){var d;const u=l&119?get_spread_update(n,[l&32&&get_spread_object(s[5]),l&64&&{module:s[6].module},l&1&&{data:s[0]},l&1&&{title:s[0].schemaName?`${s[0].schemaName}.${s[0].pureName}`:s[0].pureName},l&1&&{icon:databaseObjectIcons[s[0].objectTypeField]},l&16&&{menu:s[4]},l&2&&{showPinnedInsteadOfUnpin:(d=s[1])==null?void 0:d.showPinnedInsteadOfUnpin},l&5&&{onPin:s[2]?null:s[8]},l&5&&{onUnpin:s[2]?s[9]:null},l&1&&{extInfo:s[0].tableRowCount!=null?`${formatRowCount(s[0].tableRowCount)} rows`:null}]):{};e.$set(u)},i(s){t||(transition_in(e.$$.fragment,s),t=!0)},o(s){transition_out(e.$$.fragment,s),t=!1},d(s){destroy_component(e,s)}}}var __awaiter$9=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const extractKey$6=({schemaName:o,pureName:e})=>o?`${o}.${e}`:e,createMatcher$2=({schemaName:o,pureName:e,columns:t})=>n=>lib.filterName(n,e,o,...(t==null?void 0:t.map(({columnName:r})=>({childName:r})))||[]),createTitle$1=({schemaName:o,pureName:e})=>o?`${o}.${e}`:e,databaseObjectIcons={tables:"img table",collections:"img collection",views:"img view",matviews:"img view",procedures:"img procedure",functions:"img function",queries:"img query-data"},defaultTabs={tables:"TableDataTab",collections:"CollectionDataTab",views:"ViewDataTab",matviews:"ViewDataTab",queries:"QueryDataTab"},menus={tables:[{label:"Open data",tab:"TableDataTab",forceNewTab:!0},{label:"Open form",tab:"TableDataTab",forceNewTab:!0,initialData:{grid:{isFormView:!0}}},{label:"Open structure",tab:"TableStructureTab",icon:"img table-structure"},{label:"Design query",isQueryDesigner:!0,requiresWriteAccess:!0},{label:"Design perspective query",tab:"PerspectiveTab",forceNewTab:!0,icon:"img perspective"},{divider:!0},{label:"Drop table",isDrop:!0,requiresWriteAccess:!0},{label:"Rename table",isRename:!0,requiresWriteAccess:!0},{label:"Truncate table",isTruncate:!0,requiresWriteAccess:!0},{label:"Create table backup",isDuplicateTable:!0,requiresWriteAccess:!0},{label:"Show diagram",isDiagram:!0},{divider:!0},{label:"Export",functionName:"tableReader",isExport:!0},{label:"Import",isImport:!0,requiresWriteAccess:!0},{label:"Open active chart",isActiveChart:!0},{divider:!0},{label:"SQL: CREATE TABLE",scriptTemplate:"CREATE TABLE"},{label:"SQL: SELECT",scriptTemplate:"SELECT"},{label:"SQL Generator: CREATE TABLE",sqlGeneratorProps:{createTables:!0,createIndexes:!0,createForeignKeys:!0}},{label:"SQL Generator: DROP TABLE",sqlGeneratorProps:{dropTables:!0,dropReferences:!0}},{label:"SQL Generator: INSERT",sqlGeneratorProps:{insert:!0}}],views:[{label:"Open data",tab:"ViewDataTab",forceNewTab:!0},{label:"Open structure",tab:"TableStructureTab",icon:"img view-structure"},{label:"Design query",isQueryDesigner:!0},{label:"Design perspective query",tab:"PerspectiveTab",forceNewTab:!0,icon:"img perspective"},{label:"Drop view",isDrop:!0},{divider:!0},{label:"Export",isExport:!0,functionName:"tableReader"},{label:"Open active chart",isActiveChart:!0},{divider:!0},{label:"SQL: CREATE VIEW",scriptTemplate:"CREATE OBJECT"},{label:"SQL: ALTER VIEW",scriptTemplate:"ALTER OBJECT"},{label:"SQL: CREATE TABLE",scriptTemplate:"CREATE TABLE"},{label:"SQL: SELECT",scriptTemplate:"SELECT"},{label:"SQL Generator: CREATE VIEW",sqlGeneratorProps:{createViews:!0}},{label:"SQL Generator: DROP VIEW",sqlGeneratorProps:{dropViews:!0}}],matviews:[{label:"Open data",tab:"ViewDataTab",forceNewTab:!0},{label:"Open structure",tab:"TableStructureTab"},{label:"Drop view",isDrop:!0},{label:"Query designer",isQueryDesigner:!0},{divider:!0},{label:"Export",isExport:!0,functionName:"tableReader"},{label:"Open active chart",isActiveChart:!0},{divider:!0},{label:"SQL: CREATE MATERIALIZED VIEW",scriptTemplate:"CREATE OBJECT"},{label:"SQL: ALTER MATERIALIZED VIEW",scriptTemplate:"ALTER OBJECT"},{label:"SQL: CREATE TABLE",scriptTemplate:"CREATE TABLE"},{label:"SQL: SELECT",scriptTemplate:"SELECT"},{label:"SQL Generator: CREATE MATERIALIZED VIEW",sqlGeneratorProps:{createMatviews:!0}},{label:"SQL Generator: DROP MATERIALIZED VIEW",sqlGeneratorProps:{dropMatviews:!0}}],queries:[{label:"Open data",tab:"QueryDataTab",forceNewTab:!0}],procedures:[{label:"Drop procedure",isDrop:!0},{label:"SQL: CREATE PROCEDURE",scriptTemplate:"CREATE OBJECT"},{label:"SQL: ALTER PROCEDURE",scriptTemplate:"ALTER OBJECT"},{label:"SQL: EXECUTE",scriptTemplate:"EXECUTE PROCEDURE"},{label:"SQL Generator: CREATE PROCEDURE",sqlGeneratorProps:{createProcedures:!0}},{label:"SQL Generator: DROP PROCEDURE",sqlGeneratorProps:{dropProcedures:!0}}],functions:[{label:"Drop function",isDrop:!0},{label:"SQL: CREATE FUNCTION",scriptTemplate:"CREATE OBJECT"},{label:"SQL: ALTER FUNCTION",scriptTemplate:"ALTER OBJECT"},{label:"SQL Generator: CREATE FUNCTION",sqlGeneratorProps:{createFunctions:!0}},{label:"SQL Generator: DROP FUNCTION",sqlGeneratorProps:{dropFunctions:!0}}],collections:[{label:"Open data",tab:"CollectionDataTab",forceNewTab:!0},{label:"Open JSON",tab:"CollectionDataTab",forceNewTab:!0,initialData:{grid:{isJsonView:!0}}},{label:"Design perspective query",tab:"PerspectiveTab",forceNewTab:!0,icon:"img perspective"},{label:"Export",isExport:!0,functionName:"tableReader"},{label:"Drop collection",isDropCollection:!0,requiresWriteAccess:!0},{label:"Rename collection",isRenameCollection:!0,requiresWriteAccess:!0},{label:"Create collection backup",isDuplicateCollection:!0,requiresWriteAccess:!0},{divider:!0},{label:"JS: dropCollection()",scriptTemplate:"dropCollection"},{label:"JS: find()",scriptTemplate:"findCollection"}]};function databaseObjectMenuClickHandler(o,e){return __awaiter$9(this,void 0,void 0,function*(){const t=()=>__awaiter$9(this,void 0,void 0,function*(){const n=yield getConnectionInfo(o);return n?lib.findEngineDriver(n,getExtensions()):void 0});if(e.isActiveChart){const r=(yield t()).createDumper();r.put("^select * from %f",o),openNewTab({title:o.pureName,icon:"img chart",tabComponent:"ChartTab",props:{conid:o.conid,database:o.database}},{editor:{config:{chartType:"bar"},sql:r.s}})}else if(e.isQueryDesigner)openNewTab({title:"Query #",icon:"img query-design",tabComponent:"QueryDesignTab",props:{conid:o.conid,database:o.database}},{editor:{tables:[Object.assign(Object.assign({},o),{designerId:uuidv1(),left:50,top:50})]}});else if(e.isDiagram)openNewTab({title:"Diagram #",icon:"img diagram",tabComponent:"DiagramTab",props:{conid:o.conid,database:o.database}},{editor:{tables:[Object.assign(Object.assign({},o),{designerId:`${o.pureName}-${uuidv1()}`,autoAddReferences:!0})],references:[],autoLayout:!0}});else if(e.sqlGeneratorProps)showModal(SqlGeneratorModal,{initialObjects:[o],initialConfig:e.sqlGeneratorProps,conid:o.conid,database:o.database});else if(e.isDrop){const{conid:n,database:r}=o;alterDatabaseDialog(n,r,a=>{_.remove(a[o.objectTypeField],s=>s.schemaName==o.schemaName&&s.pureName==o.pureName)})}else if(e.isTruncate){const{conid:n,database:r}=o,a=yield t(),s=a.createDumper();s.truncateTable(o);const l=s.s;showModal(ConfirmSqlModal,{sql:l,onConfirm:()=>__awaiter$9(this,void 0,void 0,function*(){saveScriptToDatabase({conid:n,database:r},l)}),engine:a.engine})}else if(e.isRename){const{conid:n,database:r}=o;renameDatabaseObjectDialog(n,r,o.pureName,(a,s)=>{const l=a[o.objectTypeField].find(u=>u.schemaName==o.schemaName&&u.pureName==o.pureName);l.pureName=s})}else if(e.isDropCollection)showModal(ConfirmModal,{message:`Really drop collection ${o.pureName}?`,onConfirm:()=>__awaiter$9(this,void 0,void 0,function*(){const n=_.pick(o,["conid","database"]);saveScriptToDatabase(n,`db.dropCollection('${o.pureName}')`)})});else if(e.isRenameCollection)showModal(InputTextModal,{label:"New collection name",header:"Rename collection",value:o.pureName,onConfirm:n=>__awaiter$9(this,void 0,void 0,function*(){const r=_.pick(o,["conid","database"]);yield apiCall("database-connections/run-script",Object.assign(Object.assign({},r),{sql:`db.renameCollection('${o.pureName}', '${n}')`})),apiCall("database-connections/sync-model",r)})});else if(e.isDuplicateCollection){const n=`_${o.pureName}_${format(new Date,"yyyy-MM-dd-hh-mm-ss")}`;showModal(ConfirmModal,{message:`Really create collection copy named ${n}?`,onConfirm:()=>__awaiter$9(this,void 0,void 0,function*(){const r=_.pick(o,["conid","database"]);saveScriptToDatabase(r,`db.collection('${o.pureName}').aggregate([{$out: '${n}'}]).toArray()`)})})}else if(e.isDuplicateTable){const n=yield t(),r=n.createDumper(),a=_.cloneDeep(o),{conid:s,database:l}=o;a.pureName=`_${a.pureName}_${format(new Date,"yyyy-MM-dd-hh-mm-ss")}`,a.columns.forEach(u=>{u.autoIncrement=!1,u.defaultConstraint=null}),a.foreignKeys=[],a.checks=[],a.uniques=[],a.indexes=[],a.primaryKey&&(a.primaryKey.constraintName=null),r.createTable(a),r.putCmd("^insert ^into %f(%,i) ^select %,i from %f",a,a.columns.map(u=>u.columnName),o.columns.map(u=>u.columnName),o),showModal(ConfirmSqlModal,{sql:r.s,onConfirm:()=>__awaiter$9(this,void 0,void 0,function*(){saveScriptToDatabase({conid:s,database:l},r.s)}),engine:n.engine})}else if(e.isImport){const{conid:n,database:r}=o;showModal(ImportExportModal,{initialValues:{sourceStorageType:getDefaultFileFormat(getExtensions()).storageType,targetStorageType:"database",targetConnectionId:n,targetDatabaseName:r,fixedTargetPureName:o.pureName}})}else openDatabaseObjectDetail(e.tab,e.scriptTemplate,o,e.forceNewTab,e.initialData,e.icon,o)})}function getObjectTitle(o,e,t){var n;const r=lib.findEngineDriver(o,getExtensions()),a=(n=r==null?void 0:r.dialect)===null||n===void 0?void 0:n.defaultSchemaName;return e&&a&&e!=a?`${e}.${t}`:t}function openDatabaseObjectDetail(o,e,{schemaName:t,pureName:n,conid:r,database:a,objectTypeField:s},l,u,d,f){return __awaiter$9(this,void 0,void 0,function*(){const m=yield getConnectionInfo({conid:r}),h=`${getConnectionLabel(m)}
${a}
${fullDisplayName({schemaName:t,pureName:n})}`;openNewTab({title:e?"Query #":getObjectTitle(m,t,n),tooltip:h,icon:d||(e?"img sql-file":databaseObjectIcons[s]),tabComponent:e?"QueryTab":o,appObject:"DatabaseObjectAppObject",appObjectData:f,props:{schemaName:t,pureName:n,conid:r,database:a,objectTypeField:s,initialArgs:e?{scriptTemplate:e}:null}},u,{forceNewTab:l})})}function handleDatabaseObjectClick(o,e=!1){const{schemaName:t,pureName:n,conid:r,database:a,objectTypeField:s}=o,l=getCurrentSettings()[`defaultAction.dbObjectClick.${s}`],u=menus[s].find(d=>d.label&&d.label==l);if(u){databaseObjectMenuClickHandler(o,u);return}openDatabaseObjectDetail(defaultTabs[s],defaultTabs[s]?null:"CREATE OBJECT",{schemaName:t,pureName:n,conid:r,database:a,objectTypeField:s},e,null,null,o)}function testEqual(o,e){return o.conid==e.conid&&o.database==e.database&&o.objectTypeField==e.objectTypeField&&o.pureName==e.pureName&&o.schemaName==e.schemaName}function createDatabaseObjectMenu(o,e=null){const{objectTypeField:t}=o;return menus[t].filter(n=>n).map(n=>n.divider?n:n.isExport?createQuickExportMenu(r=>()=>__awaiter$9(this,void 0,void 0,function*(){const a=yield getConnectionInfo(o);exportQuickExportFile(o.pureName,{functionName:n.functionName,props:Object.assign({connection:extractShellConnection(a,o.database)},_.pick(o,["pureName","schemaName"]))},r)}),{onClick:()=>{showModal(ImportExportModal,{initialValues:{sourceStorageType:"database",sourceConnectionId:o.conid,sourceDatabaseName:o.database,sourceSchemaName:o.schemaName,sourceList:[o.pureName]}})}}):e!=null&&e.isReadOnly&&n.requiresWriteAccess?null:{text:n.label,onClick:()=>{databaseObjectMenuClickHandler(o,n)}})}function formatRowCount(o){const e=parseInt(o);return _.isNaN(e)?o:e.toLocaleString()}function createAppObjectMenu(o){return createDatabaseObjectMenu(o)}function instance$2V(o,e,t){let n;const r=["data","passProps"];let a=compute_rest_props(e,r),s;component_subscribe(o,pinnedTables,A=>t(7,s=A)),this&&this.__awaiter;let{data:l}=e,{passProps:u}=e;function d(A=!1){handleDatabaseObjectClick(l,A)}function f(){return createDatabaseObjectMenu(l,u==null?void 0:u.connection)}const m=()=>pinnedTables.update(A=>[...A,l]),h=()=>pinnedTables.update(A=>A.filter(k=>!testEqual(k,l))),p=()=>d(),g=()=>d(!0);function b(A){bubble.call(this,o,A)}function v(A){bubble.call(this,o,A)}function y(A){bubble.call(this,o,A)}function C(A){bubble.call(this,o,A)}function E(A){bubble.call(this,o,A)}return o.$$set=A=>{t(6,e=assign(assign({},e),exclude_internal_props(A))),t(5,a=compute_rest_props(e,r)),"data"in A&&t(0,l=A.data),"passProps"in A&&t(1,u=A.passProps)},o.$$.update=()=>{o.$$.dirty&129&&t(2,n=!!s.find(A=>testEqual(l,A)))},e=exclude_internal_props(e),[l,u,n,d,f,a,e,s,m,h,p,g,b,v,y,C,E]}class DatabaseObjectAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$2V,create_fragment$2X,safe_not_equal,{data:0,passProps:1})}}const ColumnLabel_svelte_svelte_type_style_lang="";function create_if_block_5$b(o){let e,t;return e=new FontIcon({props:{icon:o[9]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&512&&(a.icon=n[9]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$j(o){let e,t;return{c(){e=element("span"),t=text(o[3]),attr(e,"class","extinfo svelte-1dxl6hp")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r&8&&set_data(t,n[3])},d(n){n&&detach(e)}}}function create_if_block$1g(o){let e,t,n,r;const a=[create_if_block_1$K,create_if_block_3$m],s=[];function l(u,d){return u[6]?0:u[4]?1:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function create_if_block_3$m(o){let e,t=o[4].toLowerCase()+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","extinfo svelte-1dxl6hp")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&16&&t!==(t=r[4].toLowerCase()+"")&&set_data(n,t)},i:noop$1,o:noop$1,d(r){r&&detach(e)}}}function create_if_block_1$K(o){let e,t,n,r,a,s;t=new FontIcon({props:{icon:"icon arrow-right"}});const l=[create_if_block_2$v,create_else_block$y],u=[];function d(f,m){return f[7]&&f[8]?0:1}return r=d(o),a=u[r]=l[r](o),{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a.c(),attr(e,"class","extinfo svelte-1dxl6hp")},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),u[r].m(e,null),s=!0},p(f,m){let h=r;r=d(f),r===h?u[r].p(f,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),a=u[r],a?a.p(f,m):(a=u[r]=l[r](f),a.c()),transition_in(a,1),a.m(e,null))},i(f){s||(transition_in(t.$$.fragment,f),transition_in(a),s=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(a),s=!1},d(f){f&&detach(e),destroy_component(t),u[r].d()}}}function create_else_block$y(o){let e=o[6].refTableName+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&64&&e!==(e=n[6].refTableName+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_2$v(o){let e,t;return e=new Link$1({props:{onClick:o[12],$$slots:{default:[create_default_slot$1a]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&448&&(a.onClick=n[12]),r&16448&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$1a(o){let e=o[6].refTableName+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&64&&e!==(e=n[6].refTableName+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_fragment$2W(o){let e,t,n=(o[1]||o[2])+"",r,a,s,l,u=o[9]&&create_if_block_5$b(o),d=o[3]&&create_if_block_4$j(o),f=o[5]&&create_if_block$1g(o);return{c(){e=element("span"),u&&u.c(),t=space(),r=text(n),a=space(),d&&d.c(),s=space(),f&&f.c(),attr(e,"class","label svelte-1dxl6hp"),toggle_class(e,"notNull",o[0])},m(m,h){insert(m,e,h),u&&u.m(e,null),append(e,t),append(e,r),append(e,a),d&&d.m(e,null),append(e,s),f&&f.m(e,null),l=!0},p(m,[h]){m[9]?u?(u.p(m,h),h&512&&transition_in(u,1)):(u=create_if_block_5$b(m),u.c(),transition_in(u,1),u.m(e,t)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),(!l||h&6)&&n!==(n=(m[1]||m[2])+"")&&set_data(r,n),m[3]?d?d.p(m,h):(d=create_if_block_4$j(m),d.c(),d.m(e,s)):d&&(d.d(1),d=null),m[5]?f?(f.p(m,h),h&32&&transition_in(f,1)):(f=create_if_block$1g(m),f.c(),transition_in(f,1),f.m(e,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),(!l||h&1)&&toggle_class(e,"notNull",m[0])},i(m){l||(transition_in(u),transition_in(f),l=!0)},o(m){transition_out(u),transition_out(f),l=!1},d(m){m&&detach(e),u&&u.d(),d&&d.d(),f&&f.d()}}}function getColumnIcon(o,e=!1){return o.autoIncrement?"img autoincrement":o.foreignKey?"img foreign-key":e?"img column":null}function instance$2U(o,e,t){let n,{notNull:r=!1}=e,{forceIcon:a=!1}=e,{headerText:s=""}=e,{columnName:l=""}=e,{extInfo:u=null}=e,{dataType:d=null}=e,{showDataType:f=!1}=e,{foreignKey:m}=e,{conid:h=void 0}=e,{database:p=void 0}=e,{iconOverride:g=void 0}=e;const b=v=>{v.stopPropagation(),openDatabaseObjectDetail("TableDataTab",null,{schemaName:m.refSchemaName,pureName:m.refTableName,conid:h,database:p,objectTypeField:"tables"})};return o.$$set=v=>{t(13,e=assign(assign({},e),exclude_internal_props(v))),"notNull"in v&&t(0,r=v.notNull),"forceIcon"in v&&t(10,a=v.forceIcon),"headerText"in v&&t(1,s=v.headerText),"columnName"in v&&t(2,l=v.columnName),"extInfo"in v&&t(3,u=v.extInfo),"dataType"in v&&t(4,d=v.dataType),"showDataType"in v&&t(5,f=v.showDataType),"foreignKey"in v&&t(6,m=v.foreignKey),"conid"in v&&t(7,h=v.conid),"database"in v&&t(8,p=v.database),"iconOverride"in v&&t(11,g=v.iconOverride)},o.$$.update=()=>{t(9,n=g||getColumnIcon(e,a))},e=exclude_internal_props(e),[r,s,l,u,d,f,m,h,p,n,a,g,b]}class ColumnLabel extends SvelteComponent{constructor(e){super(),init(this,e,instance$2U,create_fragment$2W,safe_not_equal,{notNull:0,forceIcon:10,headerText:1,columnName:2,extInfo:3,dataType:4,showDataType:5,foreignKey:6,conid:7,database:8,iconOverride:11})}}function create_if_block$1f(o){let e,t,n,r,a,s,l,u;const d=[o[10]];let f={};for(let m=0;m<d.length;m+=1)f=assign(f,d[m]);return n=new ColumnLabel({props:f}),a=new InlineButton({props:{square:!0,narrow:!0,$$slots:{default:[create_default_slot$19]},$$scope:{ctx:o}}}),a.$on("click",o[14]),l=new DataFilterControl({props:{filterType:o[11](o[10],o[9],o[8]),filter:o[2][o[0]],setFilter:o[15],driver:o[3],conid:o[4],database:o[5],schemaName:o[6],pureName:o[7],columnName:o[10].uniquePath.length==1?o[10].uniquePath[0]:null,foreignKey:o[10].foreignKey}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),attr(t,"class","space-between"),attr(e,"class","m-1")},m(m,h){insert(m,e,h),append(e,t),mount_component(n,t,null),append(t,r),mount_component(a,t,null),append(e,s),mount_component(l,e,null),u=!0},p(m,h){const p=h&1024?get_spread_update(d,[get_spread_object(m[10])]):{};n.$set(p);const g={};h&65536&&(g.$$scope={dirty:h,ctx:m}),a.$set(g);const b={};h&1792&&(b.filterType=m[11](m[10],m[9],m[8])),h&5&&(b.filter=m[2][m[0]]),h&3&&(b.setFilter=m[15]),h&8&&(b.driver=m[3]),h&16&&(b.conid=m[4]),h&32&&(b.database=m[5]),h&64&&(b.schemaName=m[6]),h&128&&(b.pureName=m[7]),h&1024&&(b.columnName=m[10].uniquePath.length==1?m[10].uniquePath[0]:null),h&1024&&(b.foreignKey=m[10].foreignKey),l.$set(b)},i(m){u||(transition_in(n.$$.fragment,m),transition_in(a.$$.fragment,m),transition_in(l.$$.fragment,m),u=!0)},o(m){transition_out(n.$$.fragment,m),transition_out(a.$$.fragment,m),transition_out(l.$$.fragment,m),u=!1},d(m){m&&detach(e),destroy_component(n),destroy_component(a),destroy_component(l)}}}function create_default_slot$19(o){let e,t;return e=new FontIcon({props:{icon:"icon close"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2V(o){let e,t,n=o[10]&&create_if_block$1f(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[10]?n?(n.p(r,a),a&1024&&transition_in(n,1)):(n=create_if_block$1f(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$2T(o,e,t){let n;var r;let{uniqueName:a}=e,{display:s}=e,{filters:l}=e,{driver:u}=e,{conid:d}=e,{database:f}=e,{schemaName:m}=e,{pureName:h}=e,{useEvalFilters:p}=e,{isDynamicStructure:g}=e,{isFormView:b}=e;function v(E,A,k){return k?"eval":A?"mongo":E?E.filterType||lib$1.getFilterType(E.dataType):"string"}const y=()=>{s.removeFilter(a)},C=E=>s.setFilter(a,E);return o.$$set=E=>{"uniqueName"in E&&t(0,a=E.uniqueName),"display"in E&&t(1,s=E.display),"filters"in E&&t(2,l=E.filters),"driver"in E&&t(3,u=E.driver),"conid"in E&&t(4,d=E.conid),"database"in E&&t(5,f=E.database),"schemaName"in E&&t(6,m=E.schemaName),"pureName"in E&&t(7,h=E.pureName),"useEvalFilters"in E&&t(8,p=E.useEvalFilters),"isDynamicStructure"in E&&t(9,g=E.isDynamicStructure),"isFormView"in E&&t(12,b=E.isFormView)},o.$$.update=()=>{o.$$.dirty&12291&&t(10,n=b?t(13,r=s.formColumns)===null||r===void 0?void 0:r.find(E=>E.uniqueName==a):s==null?void 0:s.findColumn(a))},[a,s,l,u,d,f,m,h,p,g,n,v,b,r,y,C]}class FormViewFilterColumn extends SvelteComponent{constructor(e){super(),init(this,e,instance$2T,create_fragment$2V,safe_not_equal,{uniqueName:0,display:1,filters:2,driver:3,conid:4,database:5,schemaName:6,pureName:7,useEvalFilters:8,isDynamicStructure:9,isFormView:12})}}function get_each_context$r(o,e,t){const n=o.slice();return n[24]=e[t],n}function create_if_block_2$u(o){let e,t,n,r,a,s,l,u;return{c(){var d,f;e=element("div"),t=element("div"),t.textContent="Column name filter",n=space(),r=element("div"),a=element("input"),attr(a,"type","text"),a.value=s=((f=(d=o[1])==null?void 0:d.config)==null?void 0:f.formColumnFilterText)||"",attr(r,"class","flex"),attr(e,"class","m-1")},m(d,f){insert(d,e,f),append(e,t),append(e,n),append(e,r),append(r,a),l||(u=[listen(a,"keydown",o[19]),listen(a,"input",o[20])],l=!0)},p(d,f){var m,h;f&2&&s!==(s=((h=(m=d[1])==null?void 0:m.config)==null?void 0:h.formColumnFilterText)||"")&&a.value!==s&&(a.value=s)},d(d){d&&detach(e),l=!1,run_all(u)}}}function create_if_block$1e(o){let e,t,n,r,a,s,l,u=o[14]&&create_if_block_1$J(o);return s=new DataFilterControl({props:{filterType:"string",filter:o[14],setFilter:o[22],driver:o[3],conid:o[4],database:o[5],schemaName:o[6],pureName:o[7]}}),{c(){e=element("div"),t=element("div"),n=element("span"),n.textContent="Multi column filter",r=space(),u&&u.c(),a=space(),create_component(s.$$.fragment),attr(t,"class","space-between"),attr(e,"class","m-1")},m(d,f){insert(d,e,f),append(e,t),append(t,n),append(t,r),u&&u.m(t,null),append(e,a),mount_component(s,e,null),l=!0},p(d,f){d[14]?u?(u.p(d,f),f&16384&&transition_in(u,1)):(u=create_if_block_1$J(d),u.c(),transition_in(u,1),u.m(t,null)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros());const m={};f&16384&&(m.filter=d[14]),f&2&&(m.setFilter=d[22]),f&8&&(m.driver=d[3]),f&16&&(m.conid=d[4]),f&32&&(m.database=d[5]),f&64&&(m.schemaName=d[6]),f&128&&(m.pureName=d[7]),s.$set(m)},i(d){l||(transition_in(u),transition_in(s.$$.fragment,d),l=!0)},o(d){transition_out(u),transition_out(s.$$.fragment,d),l=!1},d(d){d&&detach(e),u&&u.d(),destroy_component(s)}}}function create_if_block_1$J(o){let e,t;return e=new InlineButton({props:{square:!0,narrow:!0,$$slots:{default:[create_default_slot_1$D]},$$scope:{ctx:o}}}),e.$on("click",o[21]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&134217728&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$D(o){let e,t;return e=new FontIcon({props:{icon:"icon close"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block$r(o){let e,t;return e=new FormViewFilterColumn({props:{isDynamicStructure:o[8],useEvalFilters:o[9],isFormView:o[10],uniqueName:o[24],display:o[1],filters:o[12],driver:o[3],conid:o[4],database:o[5],schemaName:o[6],pureName:o[7]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&256&&(a.isDynamicStructure=n[8]),r&512&&(a.useEvalFilters=n[9]),r&1024&&(a.isFormView=n[10]),r&8192&&(a.uniqueName=n[24]),r&2&&(a.display=n[1]),r&4096&&(a.filters=n[12]),r&8&&(a.driver=n[3]),r&16&&(a.conid=n[4]),r&32&&(a.database=n[5]),r&64&&(a.schemaName=n[6]),r&128&&(a.pureName=n[7]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$18(o){let e,t,n=ensure_array_like(o[13]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$r(get_each_context$r(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&14330){n=ensure_array_like(s[13]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$r(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$r(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_fragment$2U(o){let e,t,n,r,a=o[10]&&create_if_block_2$u(o),s=o[11]&&create_if_block$1e(o);return n=new ManagerInnerContainer({props:{width:o[0],$$slots:{default:[create_default_slot$18]},$$scope:{ctx:o}}}),{c(){a&&a.c(),e=space(),s&&s.c(),t=space(),create_component(n.$$.fragment)},m(l,u){a&&a.m(l,u),insert(l,e,u),s&&s.m(l,u),insert(l,t,u),mount_component(n,l,u),r=!0},p(l,[u]){l[10]?a?a.p(l,u):(a=create_if_block_2$u(l),a.c(),a.m(e.parentNode,e)):a&&(a.d(1),a=null),l[11]?s?(s.p(l,u),u&2048&&transition_in(s,1)):(s=create_if_block$1e(l),s.c(),transition_in(s,1),s.m(t.parentNode,t)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros());const d={};u&1&&(d.width=l[0]),u&134232058&&(d.$$scope={dirty:u,ctx:l}),n.$set(d)},i(l){r||(transition_in(s),transition_in(n.$$.fragment,l),r=!0)},o(l){transition_out(s),transition_out(n.$$.fragment,l),r=!1},d(l){l&&(detach(e),detach(t)),a&&a.d(l),s&&s.d(l),destroy_component(n,l)}}}function instance$2S(o,e,t){let n,r,a,s;var l,u,d;let{managerSize:f}=e,{display:m}=e,{setConfig:h}=e,{driver:p}=e,{conid:g}=e,{database:b}=e,{schemaName:v}=e,{pureName:y}=e,{isDynamicStructure:C}=e,{useEvalFilters:E}=e,{isFormView:A}=e,{hasMultiColumnFilter:k}=e;const T=R=>{R.keyCode==keycodes.escape&&h(N=>({...N,formColumnFilterText:""}))},$=R=>h(N=>({...N,formColumnFilterText:R.target.value})),S=()=>{m.setMutliColumnFilter(null)},I=R=>m.setMutliColumnFilter(R);return o.$$set=R=>{"managerSize"in R&&t(0,f=R.managerSize),"display"in R&&t(1,m=R.display),"setConfig"in R&&t(2,h=R.setConfig),"driver"in R&&t(3,p=R.driver),"conid"in R&&t(4,g=R.conid),"database"in R&&t(5,b=R.database),"schemaName"in R&&t(6,v=R.schemaName),"pureName"in R&&t(7,y=R.pureName),"isDynamicStructure"in R&&t(8,C=R.isDynamicStructure),"useEvalFilters"in R&&t(9,E=R.useEvalFilters),"isFormView"in R&&t(10,A=R.isFormView),"hasMultiColumnFilter"in R&&t(11,k=R.hasMultiColumnFilter)},o.$$.update=()=>{o.$$.dirty&2&&(m==null||m.baseTable),o.$$.dirty&32770&&t(18,n=t(15,l=m==null?void 0:m.config)===null||l===void 0?void 0:l.formFilterColumns),o.$$.dirty&65538&&t(12,r=t(16,u=m==null?void 0:m.config)===null||u===void 0?void 0:u.filters),o.$$.dirty&131074&&t(14,a=t(17,d=m==null?void 0:m.config)===null||d===void 0?void 0:d.multiColumnFilter),o.$$.dirty&267264&&t(13,s=A?_.union(_.keys(r||{}),n||[]):_.keys(r))},[f,m,h,p,g,b,v,y,C,E,A,k,r,s,a,l,u,d,n,T,$,S,I]}class FormViewFilters extends SvelteComponent{constructor(e){super(),init(this,e,instance$2S,create_fragment$2U,safe_not_equal,{managerSize:0,display:1,setConfig:2,driver:3,conid:4,database:5,schemaName:6,pureName:7,isDynamicStructure:8,useEvalFilters:9,isFormView:10,hasMultiColumnFilter:11})}}const TabControl_svelte_svelte_type_style_lang="";function get_each_context$q(o,e,t){const n=o.slice();return n[11]=e[t],n[13]=t,n}const get__7_slot_changes$2=o=>({}),get__7_slot_context$2=o=>({}),get__6_slot_changes$2=o=>({}),get__6_slot_context$2=o=>({}),get__5_slot_changes$2=o=>({}),get__5_slot_context$2=o=>({}),get__4_slot_changes$2=o=>({}),get__4_slot_context$2=o=>({}),get__3_slot_changes$2=o=>({}),get__3_slot_context$2=o=>({}),get__2_slot_changes$2=o=>({}),get__2_slot_context$2=o=>({}),get__1_slot_changes$2=o=>({}),get__1_slot_context$2=o=>({}),get__0_slot_changes$2=o=>({}),get__0_slot_context$2=o=>({});function get_each_context_1$7(o,e,t){const n=o.slice();return n[11]=e[t],n[13]=t,n}function create_each_block_1$7(o){let e,t,n=o[11].label+"",r,a,s;function l(){return o[10](o[13])}return{c(){e=element("div"),t=element("span"),r=text(n),attr(t,"class","ml-2"),attr(e,"class","tab-item svelte-orhipv"),toggle_class(e,"selected",o[0]==o[13])},m(u,d){insert(u,e,d),append(e,t),append(t,r),a||(s=listen(e,"click",l),a=!0)},p(u,d){o=u,d&2&&n!==(n=o[11].label+"")&&set_data(r,n),d&1&&toggle_class(e,"selected",o[0]==o[13])},d(u){u&&detach(e),a=!1,s()}}}function create_if_block_9$2(o){let e,t;return e=new DropDownButton({props:{menu:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.menu=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1d(o){let e,t,n,r;const a=[create_if_block_1$I,create_if_block_2$t,create_if_block_3$l,create_if_block_4$i,create_if_block_5$a,create_if_block_6$5,create_if_block_7$2,create_if_block_8$2],s=[];function l(u,d){return u[11].slot==0?0:u[11].slot==1?1:u[11].slot==2?2:u[11].slot==3?3:u[11].slot==4?4:u[11].slot==5?5:u[11].slot==6?6:u[11].slot==7?7:-1}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function create_if_block_8$2(o){let e;const t=o[9][7],n=create_slot(t,o,o[8],get__7_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__7_slot_changes$2):get_all_dirty_from_scope(r[8]),get__7_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_7$2(o){let e;const t=o[9][6],n=create_slot(t,o,o[8],get__6_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__6_slot_changes$2):get_all_dirty_from_scope(r[8]),get__6_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_6$5(o){let e;const t=o[9][5],n=create_slot(t,o,o[8],get__5_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__5_slot_changes$2):get_all_dirty_from_scope(r[8]),get__5_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_5$a(o){let e;const t=o[9][4],n=create_slot(t,o,o[8],get__4_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__4_slot_changes$2):get_all_dirty_from_scope(r[8]),get__4_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_4$i(o){let e;const t=o[9][3],n=create_slot(t,o,o[8],get__3_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__3_slot_changes$2):get_all_dirty_from_scope(r[8]),get__3_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_3$l(o){let e;const t=o[9][2],n=create_slot(t,o,o[8],get__2_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__2_slot_changes$2):get_all_dirty_from_scope(r[8]),get__2_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_2$t(o){let e;const t=o[9][1],n=create_slot(t,o,o[8],get__1_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__1_slot_changes$2):get_all_dirty_from_scope(r[8]),get__1_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_if_block_1$I(o){let e;const t=o[9][0],n=create_slot(t,o,o[8],get__0_slot_context$2);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&256)&&update_slot_base(n,t,r,r[8],e?get_slot_changes(t,r[8],a,get__0_slot_changes$2):get_all_dirty_from_scope(r[8]),get__0_slot_context$2)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_each_block$q(o){let e,t,n,r,a;const s=[o[11].props,{tabControlHiddenTab:o[13]!=o[0]}];var l=o[11].component;function u(f){let m={};for(let h=0;h<s.length;h+=1)m=assign(m,s[h]);return{props:m}}l&&(t=construct_svelte_component(l,u()));let d=o[11].slot!=null&&create_if_block$1d(o);return{c(){e=element("div"),t&&create_component(t.$$.fragment),n=space(),d&&d.c(),r=space(),attr(e,"class","container svelte-orhipv"),toggle_class(e,"isInline",o[3]),toggle_class(e,"tabVisible",o[13]==o[0]),set_style(e,"max-width",o[4])},m(f,m){insert(f,e,m),t&&mount_component(t,e,null),append(e,n),d&&d.m(e,null),append(e,r),a=!0},p(f,m){const h=m&3?get_spread_update(s,[m&2&&get_spread_object(f[11].props),m&1&&{tabControlHiddenTab:f[13]!=f[0]}]):{};if(m&2&&l!==(l=f[11].component)){if(t){group_outros();const p=t;transition_out(p.$$.fragment,1,0,()=>{destroy_component(p,1)}),check_outros()}l?(t=construct_svelte_component(l,u()),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,n)):t=null}else l&&t.$set(h);f[11].slot!=null?d?(d.p(f,m),m&2&&transition_in(d,1)):(d=create_if_block$1d(f),d.c(),transition_in(d,1),d.m(e,r)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),(!a||m&8)&&toggle_class(e,"isInline",f[3]),(!a||m&1)&&toggle_class(e,"tabVisible",f[13]==f[0]),m&16&&set_style(e,"max-width",f[4])},i(f){a||(t&&transition_in(t.$$.fragment,f),transition_in(d),a=!0)},o(f){t&&transition_out(t.$$.fragment,f),transition_out(d),a=!1},d(f){f&&detach(e),t&&destroy_component(t),d&&d.d()}}}function create_fragment$2T(o){let e,t,n,r,a,s,l=ensure_array_like(_.compact(o[1])),u=[];for(let p=0;p<l.length;p+=1)u[p]=create_each_block_1$7(get_each_context_1$7(o,l,p));let d=o[2]&&create_if_block_9$2(o),f=ensure_array_like(_.compact(o[1])),m=[];for(let p=0;p<f.length;p+=1)m[p]=create_each_block$q(get_each_context$q(o,f,p));const h=p=>transition_out(m[p],1,1,()=>{m[p]=null});return{c(){e=element("div"),t=element("div");for(let p=0;p<u.length;p+=1)u[p].c();n=space(),d&&d.c(),r=space(),a=element("div");for(let p=0;p<m.length;p+=1)m[p].c();attr(t,"class","tabs svelte-orhipv"),attr(a,"class","content-container svelte-orhipv"),attr(e,"class","main svelte-orhipv"),toggle_class(e,"flex1",o[5])},m(p,g){insert(p,e,g),append(e,t);for(let b=0;b<u.length;b+=1)u[b]&&u[b].m(t,null);append(t,n),d&&d.m(t,null),append(e,r),append(e,a);for(let b=0;b<m.length;b+=1)m[b]&&m[b].m(a,null);s=!0},p(p,[g]){if(g&3){l=ensure_array_like(_.compact(p[1]));let b;for(b=0;b<l.length;b+=1){const v=get_each_context_1$7(p,l,b);u[b]?u[b].p(v,g):(u[b]=create_each_block_1$7(v),u[b].c(),u[b].m(t,n))}for(;b<u.length;b+=1)u[b].d(1);u.length=l.length}if(p[2]?d?(d.p(p,g),g&4&&transition_in(d,1)):(d=create_if_block_9$2(p),d.c(),transition_in(d,1),d.m(t,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),g&283){f=ensure_array_like(_.compact(p[1]));let b;for(b=0;b<f.length;b+=1){const v=get_each_context$q(p,f,b);m[b]?(m[b].p(v,g),transition_in(m[b],1)):(m[b]=create_each_block$q(v),m[b].c(),transition_in(m[b],1),m[b].m(a,null))}for(group_outros(),b=f.length;b<m.length;b+=1)h(b);check_outros()}(!s||g&32)&&toggle_class(e,"flex1",p[5])},i(p){if(!s){transition_in(d);for(let g=0;g<f.length;g+=1)transition_in(m[g]);s=!0}},o(p){transition_out(d),m=m.filter(Boolean);for(let g=0;g<m.length;g+=1)transition_out(m[g]);s=!1},d(p){p&&detach(e),destroy_each(u,p),d&&d.d(),destroy_each(m,p)}}}function instance$2R(o,e,t){let{$$slots:n={},$$scope:r}=e,{tabs:a}=e,{value:s=0}=e,{menu:l=null}=e,{isInline:u=!1}=e,{containerMaxWidth:d=void 0}=e,{flex1:f=!0}=e;function m(g){t(0,s=g)}function h(){return s}const p=g=>t(0,s=g);return o.$$set=g=>{"tabs"in g&&t(1,a=g.tabs),"value"in g&&t(0,s=g.value),"menu"in g&&t(2,l=g.menu),"isInline"in g&&t(3,u=g.isInline),"containerMaxWidth"in g&&t(4,d=g.containerMaxWidth),"flex1"in g&&t(5,f=g.flex1),"$$scope"in g&&t(8,r=g.$$scope)},[s,a,l,u,d,f,m,h,r,n,p]}class TabControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$2R,create_fragment$2T,safe_not_equal,{tabs:1,value:0,menu:2,isInline:3,containerMaxWidth:4,flex1:5,setValue:6,getValue:7})}get setValue(){return this.$$.ctx[6]}get getValue(){return this.$$.ctx[7]}}const ToolbarButton_svelte_svelte_type_style_lang="";function create_else_block$x(o){let e,t,n,r;t=new FontIcon({props:{icon:o[1]}});const a=o[6].default,s=create_slot(a,o,o[5],null);return{c(){e=element("span"),create_component(t.$$.fragment),n=space(),s&&s.c(),attr(e,"class","icon svelte-ygrxja"),toggle_class(e,"disabled",o[0])},m(l,u){insert(l,e,u),mount_component(t,e,null),insert(l,n,u),s&&s.m(l,u),r=!0},p(l,u){const d={};u&2&&(d.icon=l[1]),t.$set(d),(!r||u&1)&&toggle_class(e,"disabled",l[0]),s&&s.p&&(!r||u&32)&&update_slot_base(s,a,l,l[5],r?get_slot_changes(a,l[5],u,null):get_all_dirty_from_scope(l[5]),null)},i(l){r||(transition_in(t.$$.fragment,l),transition_in(s,l),r=!0)},o(l){transition_out(t.$$.fragment,l),transition_out(s,l),r=!1},d(l){l&&(detach(e),detach(n)),destroy_component(t),s&&s.d(l)}}}function create_if_block$1c(o){let e,t;return{c(){e=element("img"),src_url_equal(e.src,t=o[3])||attr(e,"src",t),attr(e,"class","svelte-ygrxja")},m(n,r){insert(n,e,r)},p(n,r){r&8&&!src_url_equal(e.src,t=n[3])&&attr(e,"src",t)},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function create_fragment$2S(o){let e,t,n,r,a,s,l;const u=[create_if_block$1c,create_else_block$x],d=[];function f(m,h){return m[3]?0:1}return n=f(o),r=d[n]=u[n](o),{c(){e=element("div"),t=element("div"),r.c(),attr(t,"class","inner svelte-ygrxja"),attr(e,"class","button svelte-ygrxja"),attr(e,"title",o[2]),toggle_class(e,"disabled",o[0])},m(m,h){insert(m,e,h),append(e,t),d[n].m(t,null),a=!0,s||(l=listen(e,"click",o[4]),s=!0)},p(m,[h]){let p=n;n=f(m),n===p?d[n].p(m,h):(group_outros(),transition_out(d[p],1,1,()=>{d[p]=null}),check_outros(),r=d[n],r?r.p(m,h):(r=d[n]=u[n](m),r.c()),transition_in(r,1),r.m(t,null)),(!a||h&4)&&attr(e,"title",m[2]),(!a||h&1)&&toggle_class(e,"disabled",m[0])},i(m){a||(transition_in(r),a=!0)},o(m){transition_out(r),a=!1},d(m){m&&detach(e),d[n].d(),s=!1,l()}}}function instance$2Q(o,e,t){let{$$slots:n={},$$scope:r}=e,{disabled:a=!1}=e,{icon:s=null}=e,{title:l=null}=e,{externalImage:u=null}=e;const d=createEventDispatcher();function f(m){a||d("click")}return o.$$set=m=>{"disabled"in m&&t(0,a=m.disabled),"icon"in m&&t(1,s=m.icon),"title"in m&&t(2,l=m.title),"externalImage"in m&&t(3,u=m.externalImage),"$$scope"in m&&t(5,r=m.$$scope)},[a,s,l,u,f,r,n]}class ToolbarButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2Q,create_fragment$2S,safe_not_equal,{disabled:0,icon:1,title:2,externalImage:3})}}const MacroHeader_svelte_svelte_type_style_lang="";function create_default_slot_1$C(o){let e;return{c(){e=text("Execute")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot$17(o){let e;return{c(){e=text("Close")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$2R(o){var g;let e,t,n,r,a,s=((g=o[1])==null?void 0:g.title)+"",l,u,d,f,m,h,p;return n=new FontIcon({props:{icon:"img macro"}}),f=new ToolbarButton({props:{icon:"icon run",$$slots:{default:[create_default_slot_1$C]},$$scope:{ctx:o}}}),f.$on("click",function(){is_function(o[0])&&o[0].apply(this,arguments)}),h=new ToolbarButton({props:{icon:"icon close",$$slots:{default:[create_default_slot$17]},$$scope:{ctx:o}}}),h.$on("click",o[3]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),l=text(s),u=space(),d=element("div"),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),attr(a,"class","ml-2"),attr(t,"class","header svelte-161tttp"),attr(d,"class","buttons svelte-161tttp"),attr(e,"class","container svelte-161tttp")},m(b,v){insert(b,e,v),append(e,t),mount_component(n,t,null),append(t,r),append(t,a),append(a,l),append(e,u),append(e,d),mount_component(f,d,null),append(d,m),mount_component(h,d,null),p=!0},p(b,[v]){var E;o=b,(!p||v&2)&&s!==(s=((E=o[1])==null?void 0:E.title)+"")&&set_data(l,s);const y={};v&16&&(y.$$scope={dirty:v,ctx:o}),f.$set(y);const C={};v&16&&(C.$$scope={dirty:v,ctx:o}),h.$set(C)},i(b){p||(transition_in(n.$$.fragment,b),transition_in(f.$$.fragment,b),transition_in(h.$$.fragment,b),p=!0)},o(b){transition_out(n.$$.fragment,b),transition_out(f.$$.fragment,b),transition_out(h.$$.fragment,b),p=!1},d(b){b&&detach(e),destroy_component(n),destroy_component(f),destroy_component(h)}}}function instance$2P(o,e,t){let n,{onExecute:r}=e;const a=getContext("selectedMacro");component_subscribe(o,a,l=>t(1,n=l));const s=()=>set_store_value(a,n=null,n);return o.$$set=l=>{"onExecute"in l&&t(0,r=l.onExecute)},[r,n,a,s]}class MacroHeader extends SvelteComponent{constructor(e){super(),init(this,e,instance$2P,create_fragment$2R,safe_not_equal,{onExecute:0})}}const FormFieldTemplateRow_svelte_svelte_type_style_lang="";function create_fragment$2Q(o){let e,t,n,r,a,s,l,u,d=[{class:"label"},o[1]],f={};for(let p=0;p<d.length;p+=1)f=assign(f,d[p]);const m=o[3].default,h=create_slot(m,o,o[2],null);return{c(){e=element("div"),t=element("div"),n=text(o[0]),r=space(),a=element("div"),h&&h.c(),set_attributes(t,f),toggle_class(t,"svelte-qzbyei",!0),attr(e,"class","row svelte-qzbyei")},m(p,g){insert(p,e,g),append(e,t),append(t,n),append(e,r),append(e,a),h&&h.m(a,null),s=!0,l||(u=listen(t,"click",function(){is_function(o[1].onClick)&&o[1].onClick.apply(this,arguments)}),l=!0)},p(p,[g]){o=p,(!s||g&1)&&set_data_maybe_contenteditable(n,o[0],f.contenteditable),set_attributes(t,f=get_spread_update(d,[{class:"label"},g&2&&o[1]])),toggle_class(t,"svelte-qzbyei",!0),h&&h.p&&(!s||g&4)&&update_slot_base(h,m,o,o[2],s?get_slot_changes(m,o[2],g,null):get_all_dirty_from_scope(o[2]),null)},i(p){s||(transition_in(h,p),s=!0)},o(p){transition_out(h,p),s=!1},d(p){p&&detach(e),h&&h.d(p),l=!1,u()}}}function instance$2O(o,e,t){let{$$slots:n={},$$scope:r}=e,{label:a}=e,{labelProps:s={}}=e;return o.$$set=l=>{"label"in l&&t(0,a=l.label),"labelProps"in l&&t(1,s=l.labelProps),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class FormFieldTemplateRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$2O,create_fragment$2Q,safe_not_equal,{label:0,labelProps:1})}}function create_default_slot$16(o){let e,t;return e=new FormArgumentList({props:{args:o[0],namePrefix:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.args=n[0]),r&2&&(a.namePrefix=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2P(o){let e,t;return e=new FormProviderCore({props:{values:o[2],template:FormFieldTemplateRow,$$slots:{default:[create_default_slot$16]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&11&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2N(o,e,t){let{args:n=[]}=e;const r=getContext("macroValues");let{namePrefix:a}=e;return o.$$set=s=>{"args"in s&&t(0,n=s.args),"namePrefix"in s&&t(1,a=s.namePrefix)},[n,a,r]}class MacroParameters extends SvelteComponent{constructor(e){super(),init(this,e,instance$2N,create_fragment$2P,safe_not_equal,{args:0,namePrefix:1})}}const MacroInfoTab_svelte_svelte_type_style_lang="";function create_default_slot_2$i(o){let e;return{c(){e=text("Execute")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$B(o){let e;return{c(){e=text("Parameters")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_else_block$w(o){let e;return{c(){e=element("div"),e.textContent="This macro has no parameters",attr(e,"class","m-1")},m(t,n){insert(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function create_if_block$1b(o){var a;let e=(a=o[1])==null?void 0:a.name,t,n,r=create_key_block$9(o);return{c(){r.c(),t=empty()},m(s,l){r.m(s,l),insert(s,t,l),n=!0},p(s,l){var u;l&2&&safe_not_equal(e,e=(u=s[1])==null?void 0:u.name)?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block$9(s),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r.p(s,l)},i(s){n||(transition_in(r),n=!0)},o(s){transition_out(r),n=!1},d(s){s&&detach(t),r.d(s)}}}function create_key_block$9(o){var n,r;let e,t;return e=new MacroParameters({props:{args:((n=o[1])==null?void 0:n.args)||[],namePrefix:`${(r=o[1])==null?void 0:r.name}#`}}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s&2&&(l.args=((u=a[1])==null?void 0:u.args)||[]),s&2&&(l.namePrefix=`${(d=a[1])==null?void 0:d.name}#`),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot$15(o){let e;return{c(){e=text("Description")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$2O(o){var $;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y=(($=o[1])==null?void 0:$.description)+"",C,E;n=new WidgetTitle({props:{$$slots:{default:[create_default_slot_2$i]},$$scope:{ctx:o}}}),a=new FormStyledButton({props:{value:"Execute"}}),a.$on("click",function(){is_function(o[0])&&o[0].apply(this,arguments)}),u=new WidgetTitle({props:{$$slots:{default:[create_default_slot_1$B]},$$scope:{ctx:o}}});const A=[create_if_block$1b,create_else_block$w],k=[];function T(S,I){var R,N,M;return(R=S[1])!=null&&R.args&&((M=(N=S[1])==null?void 0:N.args)==null?void 0:M.length)>0?0:1}return f=T(o),m=k[f]=A[f](o),g=new WidgetTitle({props:{$$slots:{default:[create_default_slot$15]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),l=element("div"),create_component(u.$$.fragment),d=space(),m.c(),h=space(),p=element("div"),create_component(g.$$.fragment),b=space(),v=element("div"),C=text(y),attr(t,"class","section svelte-1elitvt"),attr(l,"class","section svelte-1elitvt"),attr(v,"class","m-1"),attr(p,"class","section svelte-1elitvt"),attr(e,"class","wrapper svelte-1elitvt")},m(S,I){insert(S,e,I),append(e,t),mount_component(n,t,null),append(t,r),mount_component(a,t,null),append(e,s),append(e,l),mount_component(u,l,null),append(l,d),k[f].m(l,null),append(e,h),append(e,p),mount_component(g,p,null),append(p,b),append(p,v),append(v,C),E=!0},p(S,[I]){var D;o=S;const R={};I&8&&(R.$$scope={dirty:I,ctx:o}),n.$set(R);const N={};I&8&&(N.$$scope={dirty:I,ctx:o}),u.$set(N);let M=f;f=T(o),f===M?k[f].p(o,I):(group_outros(),transition_out(k[M],1,1,()=>{k[M]=null}),check_outros(),m=k[f],m?m.p(o,I):(m=k[f]=A[f](o),m.c()),transition_in(m,1),m.m(l,null));const F={};I&8&&(F.$$scope={dirty:I,ctx:o}),g.$set(F),(!E||I&2)&&y!==(y=((D=o[1])==null?void 0:D.description)+"")&&set_data(C,y)},i(S){E||(transition_in(n.$$.fragment,S),transition_in(a.$$.fragment,S),transition_in(u.$$.fragment,S),transition_in(m),transition_in(g.$$.fragment,S),E=!0)},o(S){transition_out(n.$$.fragment,S),transition_out(a.$$.fragment,S),transition_out(u.$$.fragment,S),transition_out(m),transition_out(g.$$.fragment,S),E=!1},d(S){S&&detach(e),destroy_component(n),destroy_component(a),destroy_component(u),k[f].d(),destroy_component(g)}}}function instance$2M(o,e,t){let n;const r=getContext("selectedMacro");component_subscribe(o,r,s=>t(1,n=s));let{onExecute:a}=e;return o.$$set=s=>{"onExecute"in s&&t(0,a=s.onExecute)},[a,n,r]}class MacroInfoTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$2M,create_fragment$2O,safe_not_equal,{onExecute:0})}}const MacroDetail_svelte_svelte_type_style_lang="";function create_fragment$2N(o){var s;let e,t,n,r,a;return t=new MacroHeader({props:{onExecute:o[0]}}),r=new TabControl({props:{tabs:[{label:"Macro detail",component:MacroInfoTab,props:{onExecute:o[0]}},{label:"JavaScript",component:AceEditor,props:{readOnly:!0,value:(s=o[1])==null?void 0:s.code,mode:"javascript"}}]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","container svelte-7rm6j6")},m(l,u){insert(l,e,u),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(l,[u]){var m;const d={};u&1&&(d.onExecute=l[0]),t.$set(d);const f={};u&3&&(f.tabs=[{label:"Macro detail",component:MacroInfoTab,props:{onExecute:l[0]}},{label:"JavaScript",component:AceEditor,props:{readOnly:!0,value:(m=l[1])==null?void 0:m.code,mode:"javascript"}}]),r.$set(f)},i(l){a||(transition_in(t.$$.fragment,l),transition_in(r.$$.fragment,l),a=!0)},o(l){transition_out(t.$$.fragment,l),transition_out(r.$$.fragment,l),a=!1},d(l){l&&detach(e),destroy_component(t),destroy_component(r)}}}function instance$2L(o,e,t){let n;const r=getContext("selectedMacro");component_subscribe(o,r,s=>t(1,n=s));let{onExecute:a}=e;return o.$$set=s=>{"onExecute"in s&&t(0,a=s.onExecute)},[a,n,r]}class MacroDetail extends SvelteComponent{constructor(e){super(),init(this,e,instance$2L,create_fragment$2N,safe_not_equal,{onExecute:0})}}function create_fragment$2M(o){var a;let e,t;const n=[o[3],{data:o[0]},{title:o[0].title},{icon:"img macro"},{isBold:((a=o[1])==null?void 0:a.name)==o[0].name}];let r={};for(let s=0;s<n.length;s+=1)r=assign(r,n[s]);return e=new AppObjectCore({props:r}),e.$on("click",o[4]),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),t=!0},p(s,[l]){var d;const u=l&11?get_spread_update(n,[l&8&&get_spread_object(s[3]),l&1&&{data:s[0]},l&1&&{title:s[0].title},n[3],l&3&&{isBold:((d=s[1])==null?void 0:d.name)==s[0].name}]):{};e.$set(u)},i(s){t||(transition_in(e.$$.fragment,s),t=!0)},o(s){transition_out(e.$$.fragment,s),t=!1},d(s){destroy_component(e,s)}}}const extractKey$5=o=>o.name,createMatcher$1=({name:o,title:e})=>t=>lib.filterName(t,o,e);function instance$2K(o,e,t){const n=["data"];let r=compute_rest_props(e,n),a,{data:s}=e;const l=getContext("selectedMacro");component_subscribe(o,l,d=>t(1,a=d));const u=()=>set_store_value(l,a=s,a);return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(3,r=compute_rest_props(e,n)),"data"in d&&t(0,s=d.data)},[s,a,l,r,u]}class MacroAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$2K,create_fragment$2M,safe_not_equal,{data:0})}}const macroAppObject=Object.freeze(Object.defineProperty({__proto__:null,createMatcher:createMatcher$1,default:MacroAppObject,extractKey:extractKey$5},Symbol.toStringTag,{value:"Module"})),macros=[{title:"Remove diacritics",name:"removeDiacritics",group:"Text",description:"Removes diacritics from selected cells",type:"transformValue",code:"return modules.lodash.deburr(value)"},{title:"Search & replace text",name:"stringReplace",group:"Text",description:"Search & replace text or regular expression",type:"transformValue",args:[{type:"text",label:"Find",name:"find"},{type:"text",label:"Replace with",name:"replace"},{type:"checkbox",label:"Case sensitive",name:"caseSensitive"},{type:"checkbox",label:"Regular expression",name:"isRegex"}],code:`
const rtext = args.isRegex ? args.find : modules.lodash.escapeRegExp(args.find);
const rflags = args.caseSensitive ? 'g' : 'ig';
return value ? value.toString().replace(new RegExp(rtext, rflags), args.replace || '') : value
    `},{title:"Change text case",name:"changeTextCase",group:"Text",description:"Uppercase, lowercase and other case functions",type:"transformValue",args:[{type:"select",options:["toUpper","toLower","lowerCase","upperCase","kebabCase","snakeCase","camelCase","startCase"],label:"Type",name:"type",default:"toUpper"}],code:"return modules.lodash[args.type](value)"},{title:"Pad left",name:"padLeft",group:"Text",args:[{type:"text",label:"Character",name:"character",default:"0"},{type:"text",label:"Length",name:"length",default:"3"}],description:"Returns string of a specified length in which the beginning of the current string is padded with spaces or other character",type:"transformValue",code:"return modules.lodash.padStart(value, +args.length, args.character)"},{title:"Pad right",name:"padRight",group:"Text",args:[{type:"text",label:"Character",name:"character",default:"0"},{type:"text",label:"Length",name:"length",default:"3"}],description:"Returns string of a specified length in which the end of the current string is padded with spaces or other character",type:"transformValue",code:"return modules.lodash.padEnd(value, +args.length, args.character)"},{title:"Trim",name:"trim",group:"Text",description:"Removes leading and trailing whitespace ",type:"transformValue",code:"return modules.lodash.trim(value)"},{title:"Row index",name:"rowIndex",group:"Tools",description:"Index of row from 1 (autoincrement)",type:"transformValue",code:"return rowIndex + 1"},{title:"Generate UUID",name:"uuidv1",group:"Tools",description:"Generate unique identifier",type:"transformValue",args:[{type:"select",options:[{value:"uuidv1",name:"V1 - from timestamp"},{value:"uuidv4",name:"V4 - random generated"}],label:"Version",name:"version",default:"uuidv1"}],code:"return modules[args.version]()"},{title:"Convert to integer",name:"toInt",group:"Tools",description:"Converts to integral number",type:"transformValue",code:"return modules.lodash.isNaN(parseInt(value)) ? null : parseInt(value)"},{title:"Convert to number",name:"toNumber",group:"Tools",description:"Converts to number",type:"transformValue",code:"return modules.lodash.isNaN(parseFloat(value)) ? null : parseFloat(value)"},{title:"Convert to boolean",name:"toBoolean",group:"Tools",description:"Converts to boolean",type:"transformValue",code:`
if (modules.lodash.isString(value)) {
  if (value.toLowerCase()=='true') return true;
  if (value.toLowerCase()=='false') return false;
  if (value == '1') return true;
  if (value == '0') return false;
  if (value.toLowerCase()=='t') return true;
  if (value.toLowerCase()=='f') return false;
} 
if (value==null) return null;
return !!value;
  `},{title:"Convert to string",name:"toString",group:"Tools",description:"Converts to string",type:"transformValue",code:`
    if (value==null) return null;
    if (value && value.$oid) return value.$oid;
    return value.toString();
  `},{title:"Current date",name:"currentDate",group:"Tools",description:"Gets current date",type:"transformValue",args:[{type:"text",label:"Format",name:"format",default:"YYYY-MM-DD HH:mm:ss"}],code:"return modules.moment().format(args.format)"},{title:"Duplicate columns",name:"duplicateColumns",group:"Tools",description:"Duplicate selected columns",type:"transformRow",code:`
      return {
        ...row,
        ...modules.lodash.fromPairs(columns.map(col=>[(args.prefix || '') + col + (args.postfix || ''), row[col]]))
      }
    `,args:[{type:"text",label:"Prefix",name:"prefix"},{type:"text",label:"Postfix",name:"postfix",default:"_copy"}]},{title:"Split columns",name:"splitColumns",group:"Tools",description:"Split selected columns",type:"transformRow",code:`
       const res = {...row};
       for(const col of columns) {
          const value = row[col];
          if (modules.lodash.isString(value)) {
            const splitted = value.split(args.delimiter);      
            splitted.forEach((splitValue, valueIndex) => {
              const name = col + '_' + (valueIndex + 1).toString();
              res[name] = splitValue;
            });
          }
       }
       return res;
    `,args:[{type:"text",label:"Delimiter",name:"delimiter",default:","}]},{title:"Calculation",name:"calculation",group:"Tools",description:"Custom expression. Use row.column_name for accessing column values, value for original value",type:"transformValue",args:[{type:"text",label:"Expression",name:"expression",default:"value"}],code:"return eval(args.expression);"},{title:"Extract date fields",name:"extractDateFields",group:"Tools",description:"Extract yaear, month, day and other date/time fields from selection and adds it as new columns",type:"transformRow",code:`
      let mom = null;
      for(const col of columns) {
        const m = modules.moment(row[col]);
        if (m.isValid()) {
          mom = m;
          break;
        }
      }

      if (!mom) return row;

      const addedColumnNames = modules.lodash.compact([args.year, args.month, args.day, args.hour, args.minute, args.second]);

      const fields = {
        [args.year]: mom.year(),
        [args.month]: mom.month() + 1,
        [args.day]: mom.day(),
        [args.hour]: mom.hour(),
        [args.minute]: mom.minute(),
        [args.second]: mom.second(),
      };
    
      return {
        ...row,
        ...modules.lodash.pick(fields, addedColumnNames),
      };
    `,args:[{type:"text",label:"Year name",name:"year",default:"year"},{type:"text",label:"Month name",name:"month",default:"month"},{type:"text",label:"Day name",name:"day",default:"day"},{type:"text",label:"Hour name",name:"hour",default:"hour"},{type:"text",label:"Minute name",name:"minute",default:"minute"},{type:"text",label:"Second name",name:"second",default:"second"}]}];function create_default_slot_1$A(o){let e,t,n;function r(s){o[3](s)}let a={placeholder:"Search macros"};return o[2]!==void 0&&(a.value=o[2]),e=new SearchInput({props:a}),binding_callbacks.push(()=>bind(e,"value",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};!t&&l&4&&(t=!0,u.value=s[2],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}function create_default_slot$14(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_1$A]},$$scope:{ctx:o}}}),n=new AppObjectList({props:{list:_.sortBy(macros,"title").filter(o[4]),module:macroAppObject,filter:o[2],groupFunc:func_1$d}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&36&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&2&&(u.list=_.sortBy(macros,"title").filter(a[4])),s&4&&(u.filter=a[2]),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_fragment$2L(o){let e,t;return e=new ManagerInnerContainer({props:{width:o[0],$$slots:{default:[create_default_slot$14]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.width=n[0]),r&38&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func_1$d=o=>o.group;function instance$2J(o,e,t){let n="",{managerSize:r}=e,{macroCondition:a}=e;function s(u){n=u,t(2,n)}const l=u=>a?a(u):!0;return o.$$set=u=>{"managerSize"in u&&t(0,r=u.managerSize),"macroCondition"in u&&t(1,a=u.macroCondition)},[r,a,n,s,l]}class MacroManager extends SvelteComponent{constructor(e){super(),init(this,e,instance$2J,create_fragment$2L,safe_not_equal,{managerSize:0,macroCondition:1})}}function create_if_block$1a(o){let e,t;return e=new InlineButton({props:{title:"Clear filter",disabled:!o[0],$$slots:{default:[create_default_slot$13]},$$scope:{ctx:o}}}),e.$on("click",o[2]),e.$on("click",o[3]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.disabled=!n[0]),r&16&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$13(o){let e,t;return e=new FontIcon({props:{icon:"icon close"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2K(o){let e,t,n=(o[0]||o[1])&&create_if_block$1a(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[0]||r[1]?n?(n.p(r,a),a&3&&transition_in(n,1)):(n=create_if_block$1a(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$2I(o,e,t){let{filter:n}=e,{showDisabled:r=!1}=e;function a(l){bubble.call(this,o,l)}const s=()=>{t(0,n="")};return o.$$set=l=>{"filter"in l&&t(0,n=l.filter),"showDisabled"in l&&t(1,r=l.showDisabled)},[n,r,a,s]}class CloseSearchButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2I,create_fragment$2K,safe_not_equal,{filter:0,showDisabled:1})}}function create_fragment$2J(o){let e,t,n,r,a;const s=[o[7],{value:o[4][o[0]]??o[2]}];let l={};for(let u=0;u<s.length;u+=1)l=assign(l,s[u]);return t=new TextField({props:l}),t.$on("input",o[9]),r=new DropDownButton({props:{menu:o[3],disabled:o[1]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","flex")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(u,[d]){const f=d&149?get_spread_update(s,[d&128&&get_spread_object(u[7]),d&21&&{value:u[4][u[0]]??u[2]}]):{};t.$set(f);const m={};d&8&&(m.menu=u[3]),d&2&&(m.disabled=u[1]),r.$set(m)},i(u){a||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),a=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r)}}}function instance$2H(o,e,t){let n;const r=["name","disabled","defaultValue","menu"];let a=compute_rest_props(e,r),s,{name:l}=e,{disabled:u=!1}=e,{defaultValue:d}=e,{menu:f}=e;const{values:m,setFieldValue:h}=getFormContext();component_subscribe(o,m,g=>t(4,s=g));const p=g=>h(l,g.target.value);return o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(7,a=compute_rest_props(e,r)),"name"in g&&t(0,l=g.name),"disabled"in g&&t(1,u=g.disabled),"defaultValue"in g&&t(2,d=g.defaultValue),"menu"in g&&t(3,f=g.menu)},o.$$.update=()=>{o.$$.dirty&17&&t(8,n=s[l]),o.$$.dirty&256&&n&&n.startsWith("crypt:")},[l,u,d,f,s,m,h,a,n,p]}class FormDropDownTextFieldRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$2H,create_fragment$2J,safe_not_equal,{name:0,disabled:1,defaultValue:2,menu:3})}}function create_default_slot$12(o){let e,t;const n=[{name:o[1]},o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormDropDownTextFieldRaw({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&18?get_spread_update(n,[s&2&&{name:a[1]},s&16&&get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2I(o){let e,t,n;const r=[{type:"text"},{label:o[0]},o[2]];var a=o[3];function s(l){let u={$$slots:{default:[create_default_slot$12]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&5?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&get_spread_object(l[2])]):{};if(u&50&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[3])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$2G(o,e,t){const n=["label","name","templateProps"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{templateProps:l={}}=e;const{template:u}=getFormContext();return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(4,r=compute_rest_props(e,n)),"label"in d&&t(0,a=d.label),"name"in d&&t(1,s=d.name),"templateProps"in d&&t(2,l=d.templateProps)},[a,s,l,u,r]}class FormDropDownTextField extends SvelteComponent{constructor(e){super(),init(this,e,instance$2G,create_fragment$2I,safe_not_equal,{label:0,name:1,templateProps:2})}}function create_fragment$2H(o){let e,t;return e=new FormDropDownTextField({props:{name:"dataType",label:"Data type",menu:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2F(o,e,t){let n;const{values:r,setFieldValue:a}=getFormContext();function s(){return n.map(u=>({text:u,onClick:()=>a("dataType",u)}))}let{dialect:l}=e;return o.$$set=u=>{"dialect"in u&&t(1,l=u.dialect)},o.$$.update=()=>{o.$$.dirty&2&&(n=(l==null?void 0:l.predefinedDataTypes)||["int","varchar(250)","datetime","numeric(10,2)","float"])},[s,l]}class DataTypeEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$2F,create_fragment$2H,safe_not_equal,{dialect:1})}}function create_if_block_5$9(o){let e,t;return e=new FormCheckboxField({props:{name:"isUnsigned",label:"Unsigned"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$h(o){let e,t;return e=new FormCheckboxField({props:{name:"isZerofill",label:"Zero fill"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$k(o){let e,t;return e=new FormTextField({props:{name:"columnComment",label:"Comment"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$s(o){let e,t;return e=new FormCheckboxField({props:{name:"isSparse",label:"Sparse"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$z(o){var S,I,R,N,M,F,D,x,B,K,U,G,W;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E;e=new FormTextField({props:{name:"columnName",label:"Column name",focused:!0}}),n=new DataTypeEditor({props:{dialect:(S=o[4])==null?void 0:S.dialect}}),a=new FormCheckboxField({props:{name:"notNull",label:"NOT NULL"}}),l=new FormCheckboxField({props:{name:"isPrimaryKey",label:"Is Primary Key"}}),d=new FormCheckboxField({props:{name:"autoIncrement",label:"Is Autoincrement"}}),m=new FormTextField({props:{name:"defaultValue",label:"Default value. Please use valid SQL expression, eg. 'Hello World' for string value, '' for empty string"}}),p=new FormTextField({props:{name:"computedExpression",label:"Computed expression"}});let A=((N=(R=(I=o[4])==null?void 0:I.dialect)==null?void 0:R.columnProperties)==null?void 0:N.isUnsigned)&&create_if_block_5$9(),k=((D=(F=(M=o[4])==null?void 0:M.dialect)==null?void 0:F.columnProperties)==null?void 0:D.isZerofill)&&create_if_block_4$h(),T=((K=(B=(x=o[4])==null?void 0:x.dialect)==null?void 0:B.columnProperties)==null?void 0:K.columnComment)&&create_if_block_3$k(),$=((W=(G=(U=o[4])==null?void 0:U.dialect)==null?void 0:G.columnProperties)==null?void 0:W.isSparse)&&create_if_block_2$s();return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment),h=space(),create_component(p.$$.fragment),g=space(),A&&A.c(),b=space(),k&&k.c(),v=space(),T&&T.c(),y=space(),$&&$.c(),C=empty()},m(q,H){mount_component(e,q,H),insert(q,t,H),mount_component(n,q,H),insert(q,r,H),mount_component(a,q,H),insert(q,s,H),mount_component(l,q,H),insert(q,u,H),mount_component(d,q,H),insert(q,f,H),mount_component(m,q,H),insert(q,h,H),mount_component(p,q,H),insert(q,g,H),A&&A.m(q,H),insert(q,b,H),k&&k.m(q,H),insert(q,v,H),T&&T.m(q,H),insert(q,y,H),$&&$.m(q,H),insert(q,C,H),E=!0},p(q,H){var Y,V,J,Q,X,ie,ce,de,se,me,ue,he,pe;const z={};H&16&&(z.dialect=(Y=q[4])==null?void 0:Y.dialect),n.$set(z),(Q=(J=(V=q[4])==null?void 0:V.dialect)==null?void 0:J.columnProperties)!=null&&Q.isUnsigned?A?H&16&&transition_in(A,1):(A=create_if_block_5$9(),A.c(),transition_in(A,1),A.m(b.parentNode,b)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),(ce=(ie=(X=q[4])==null?void 0:X.dialect)==null?void 0:ie.columnProperties)!=null&&ce.isZerofill?k?H&16&&transition_in(k,1):(k=create_if_block_4$h(),k.c(),transition_in(k,1),k.m(v.parentNode,v)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),(me=(se=(de=q[4])==null?void 0:de.dialect)==null?void 0:se.columnProperties)!=null&&me.columnComment?T?H&16&&transition_in(T,1):(T=create_if_block_3$k(),T.c(),transition_in(T,1),T.m(y.parentNode,y)):T&&(group_outros(),transition_out(T,1,1,()=>{T=null}),check_outros()),(pe=(he=(ue=q[4])==null?void 0:ue.dialect)==null?void 0:he.columnProperties)!=null&&pe.isSparse?$?H&16&&transition_in($,1):($=create_if_block_2$s(),$.c(),transition_in($,1),$.m(C.parentNode,C)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros())},i(q){E||(transition_in(e.$$.fragment,q),transition_in(n.$$.fragment,q),transition_in(a.$$.fragment,q),transition_in(l.$$.fragment,q),transition_in(d.$$.fragment,q),transition_in(m.$$.fragment,q),transition_in(p.$$.fragment,q),transition_in(A),transition_in(k),transition_in(T),transition_in($),E=!0)},o(q){transition_out(e.$$.fragment,q),transition_out(n.$$.fragment,q),transition_out(a.$$.fragment,q),transition_out(l.$$.fragment,q),transition_out(d.$$.fragment,q),transition_out(m.$$.fragment,q),transition_out(p.$$.fragment,q),transition_out(A),transition_out(k),transition_out(T),transition_out($),E=!1},d(q){q&&(detach(t),detach(r),detach(s),detach(u),detach(f),detach(h),detach(g),detach(b),detach(v),detach(y),detach(C)),destroy_component(e,q),destroy_component(n,q),destroy_component(a,q),destroy_component(l,q),destroy_component(d,q),destroy_component(m,q),destroy_component(p,q),A&&A.d(q),k&&k.d(q),T&&T.d(q),$&&$.d(q)}}}function create_header_slot$f(o){var n;let e=o[0]?"Edit column":`Add column ${(((n=o[2])==null?void 0:n.columns)||[]).length+1}`,t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&5&&e!==(e=r[0]?"Edit column":`Add column ${(((s=r[2])==null?void 0:s.columns)||[]).length+1}`)&&set_data(t,e)},d(r){r&&detach(t)}}}function create_if_block_1$H(o){let e,t;return e=new FormButton({props:{type:"button",value:"Save"}}),e.$on("click",o[8]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$19(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Remove"}}),e.$on("click",o[9]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$e(o){let e,t,n,r,a,s,l;e=new FormSubmit({props:{value:o[0]?"Save":"Save and next"}}),e.$on("click",o[7]);let u=!o[0]&&create_if_block_1$H(o);r=new FormStyledButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal);let d=o[0]&&create_if_block$19(o);return{c(){create_component(e.$$.fragment),t=space(),u&&u.c(),n=space(),create_component(r.$$.fragment),a=space(),d&&d.c(),s=empty()},m(f,m){mount_component(e,f,m),insert(f,t,m),u&&u.m(f,m),insert(f,n,m),mount_component(r,f,m),insert(f,a,m),d&&d.m(f,m),insert(f,s,m),l=!0},p(f,m){const h={};m&1&&(h.value=f[0]?"Save":"Save and next"),e.$set(h),f[0]?u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()):u?(u.p(f,m),m&1&&transition_in(u,1)):(u=create_if_block_1$H(f),u.c(),transition_in(u,1),u.m(n.parentNode,n)),f[0]?d?(d.p(f,m),m&1&&transition_in(d,1)):(d=create_if_block$19(f),d.c(),transition_in(d,1),d.m(s.parentNode,s)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros())},i(f){l||(transition_in(e.$$.fragment,f),transition_in(u),transition_in(r.$$.fragment,f),transition_in(d),l=!0)},o(f){transition_out(e.$$.fragment,f),transition_out(u),transition_out(r.$$.fragment,f),transition_out(d),l=!1},d(f){f&&(detach(t),detach(n),detach(a),detach(s)),destroy_component(e,f),u&&u.d(f),destroy_component(r,f),d&&d.d(f)}}}function create_default_slot$11(o){let e,t;const n=[o[6]];let r={$$slots:{footer:[create_footer_slot$e],header:[create_header_slot$f],default:[create_default_slot_1$z]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&64?get_spread_update(n,[get_spread_object(a[6])]):{};s&1087&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2G(o){let e,t;return e=new FormProvider({props:{initialValues:lib.fillEditorColumnInfo(o[0]||{},o[2]),$$slots:{default:[create_default_slot$11]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&5&&(a.initialValues=lib.fillEditorColumnInfo(n[0]||{},n[2])),r&1151&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2E(o,e,t){const n=["columnInfo","setTableInfo","tableInfo","onAddNext","driver","addDataCommand"];let r=compute_rest_props(e,n),{columnInfo:a}=e,{setTableInfo:s=null}=e,{tableInfo:l=null}=e,{onAddNext:u}=e,{driver:d=null}=e,{addDataCommand:f=!1}=e;const m=g=>{closeCurrentModal(),a?s(b=>lib.editorModifyColumn(b,g.detail,f)):(s(b=>lib.editorAddColumn(b,g.detail,f)),u&&u())},h=g=>{closeCurrentModal(),s(b=>lib.editorAddColumn(b,g.detail,f))},p=()=>{closeCurrentModal(),s(g=>lib.editorDeleteColumn(g,a,f))};return o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(6,r=compute_rest_props(e,n)),"columnInfo"in g&&t(0,a=g.columnInfo),"setTableInfo"in g&&t(1,s=g.setTableInfo),"tableInfo"in g&&t(2,l=g.tableInfo),"onAddNext"in g&&t(3,u=g.onAddNext),"driver"in g&&t(4,d=g.driver),"addDataCommand"in g&&t(5,f=g.addDataCommand)},[a,s,l,u,d,f,r,m,h,p]}class ColumnEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2E,create_fragment$2G,safe_not_equal,{columnInfo:0,setTableInfo:1,tableInfo:2,onAddNext:3,driver:4,addDataCommand:5})}}const ColumnManagerRow_svelte_svelte_type_style_lang="";function create_else_block$v(o){let e,t,n,r;return{c(){e=element("input"),attr(e,"type","checkbox"),e.checked=t=o[0].isChecked},m(a,s){insert(a,e,s),n||(r=[listen(e,"click",click_handler_2$1),listen(e,"mousedown",mousedown_handler_1$1),listen(e,"change",o[20])],n=!0)},p(a,s){s&1&&t!==(t=a[0].isChecked)&&(e.checked=t)},i:noop$1,o:noop$1,d(a){a&&detach(e),n=!1,run_all(r)}}}function create_if_block_1$G(o){let e,t;return e=new FontIcon({props:{icon:"img column"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$18(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b;return n=new FontIcon({props:{icon:"icon edit"}}),s=new FontIcon({props:{icon:"icon delete"}}),d=new FontIcon({props:{icon:"icon arrow-up"}}),h=new FontIcon({props:{icon:"icon arrow-down"}}),{c(){e=element("div"),t=element("span"),create_component(n.$$.fragment),r=space(),a=element("span"),create_component(s.$$.fragment),l=space(),u=element("span"),create_component(d.$$.fragment),f=space(),m=element("span"),create_component(h.$$.fragment),attr(t,"class","icon svelte-1jp8z8u"),attr(a,"class","icon svelte-1jp8z8u"),attr(u,"class","icon svelte-1jp8z8u"),attr(m,"class","icon svelte-1jp8z8u"),attr(e,"class","nowrap")},m(v,y){insert(v,e,y),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),mount_component(s,a,null),append(e,l),append(e,u),mount_component(d,u,null),append(e,f),append(e,m),mount_component(h,m,null),p=!0,g||(b=[listen(t,"click",o[12]),listen(a,"click",o[21]),listen(u,"click",o[22]),listen(m,"click",o[23])],g=!0)},p:noop$1,i(v){p||(transition_in(n.$$.fragment,v),transition_in(s.$$.fragment,v),transition_in(d.$$.fragment,v),transition_in(h.$$.fragment,v),p=!0)},o(v){transition_out(n.$$.fragment,v),transition_out(s.$$.fragment,v),transition_out(d.$$.fragment,v),transition_out(h.$$.fragment,v),p=!1},d(v){v&&detach(e),destroy_component(n),destroy_component(s),destroy_component(d),destroy_component(h),g=!1,run_all(b)}}}function create_fragment$2F(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g;r=new FontIcon({props:{icon:o[0].isExpandable?plusExpandIcon(o[1].isExpandedColumn(o[0].uniqueName)):"icon invisible-box"}}),r.$on("click",o[19]);const b=[create_if_block_1$G,create_else_block$v],v=[];function y(k,T){return k[2]?0:1}l=y(o),u=v[l]=b[l](o);const C=[o[0],{showDataType:!0},{conid:o[4]},{database:o[5]}];let E={};for(let k=0;k<C.length;k+=1)E=assign(E,C[k]);f=new ColumnLabel({props:E});let A=o[10]&&!o[6]&&create_if_block$18(o);return{c(){e=element("div"),t=element("div"),n=element("span"),create_component(r.$$.fragment),s=space(),u.c(),d=space(),create_component(f.$$.fragment),m=space(),A&&A.c(),attr(n,"class","expandColumnIcon"),attr(n,"style",a=`margin-right: ${5+(o[0].uniquePath.length-1)*10}px`),attr(e,"class","row svelte-1jp8z8u"),toggle_class(e,"isSelected",o[3])},m(k,T){insert(k,e,T),append(e,t),append(t,n),mount_component(r,n,null),append(t,s),v[l].m(t,null),append(t,d),mount_component(f,t,null),append(e,m),A&&A.m(e,null),h=!0,p||(g=[listen(e,"click",o[24]),listen(e,"click",o[15]),listen(e,"mousedown",o[16]),listen(e,"mousemove",o[17]),listen(e,"mouseup",o[18])],p=!0)},p(k,[T]){const $={};T&3&&($.icon=k[0].isExpandable?plusExpandIcon(k[1].isExpandedColumn(k[0].uniqueName)):"icon invisible-box"),r.$set($),(!h||T&1&&a!==(a=`margin-right: ${5+(k[0].uniquePath.length-1)*10}px`))&&attr(n,"style",a);let S=l;l=y(k),l===S?v[l].p(k,T):(group_outros(),transition_out(v[S],1,1,()=>{v[S]=null}),check_outros(),u=v[l],u?u.p(k,T):(u=v[l]=b[l](k),u.c()),transition_in(u,1),u.m(t,d));const I=T&49?get_spread_update(C,[T&1&&get_spread_object(k[0]),C[1],T&16&&{conid:k[4]},T&32&&{database:k[5]}]):{};f.$set(I),k[10]&&!k[6]?A?(A.p(k,T),T&1088&&transition_in(A,1)):(A=create_if_block$18(k),A.c(),transition_in(A,1),A.m(e,null)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),(!h||T&8)&&toggle_class(e,"isSelected",k[3])},i(k){h||(transition_in(r.$$.fragment,k),transition_in(u),transition_in(f.$$.fragment,k),transition_in(A),h=!0)},o(k){transition_out(r.$$.fragment,k),transition_out(u),transition_out(f.$$.fragment,k),transition_out(A),h=!1},d(k){k&&detach(e),destroy_component(r),v[l].d(),destroy_component(f),A&&A.d(),p=!1,run_all(g)}}}function exchange(o,e,t){const n=(e+o.length)%o.length,r=(t+o.length)%o.length,a=[...o];return[a[n],a[r]]=[a[r],a[n]],a}const click_handler_2$1=o=>{o.stopPropagation()},mousedown_handler_1$1=o=>{o.stopPropagation()};function instance$2D(o,e,t){let n,{column:r}=e,{display:a}=e,{isJsonView:s=!1}=e,{isSelected:l=!1}=e,{conid:u}=e,{database:d}=e,{isDynamicStructure:f}=e,{tableInfo:m}=e,{setTableInfo:h}=e,{columnInfo:p=null}=e,{columnIndex:g=-1}=e,{allowChangeChangeSetStructure:b=!1}=e;function v(){showModal(ColumnEditorModal,{columnInfo:p,tableInfo:m,setTableInfo:h,addDataCommand:n})}const y=createEventDispatcher();function C(M){bubble.call(this,o,M)}function E(M){bubble.call(this,o,M)}function A(M){bubble.call(this,o,M)}function k(M){bubble.call(this,o,M)}const T=()=>a.toggleExpandedColumn(r.uniqueName),$=()=>{const M=!r.isChecked;a.setColumnVisibility(r.uniquePath,M),y("setvisibility",M)},S=()=>h(M=>lib.editorDeleteColumn(M,p,n)),I=()=>h(M=>({...M,columns:exchange(M.columns,g,g-1)})),R=()=>h(M=>({...M,columns:exchange(M.columns,g,g+1)})),N=M=>{M.target.closest(".expandColumnIcon")||(s?a.showFilter(r.uniqueName):a.focusColumns([r.uniqueName]))};return o.$$set=M=>{"column"in M&&t(0,r=M.column),"display"in M&&t(1,a=M.display),"isJsonView"in M&&t(2,s=M.isJsonView),"isSelected"in M&&t(3,l=M.isSelected),"conid"in M&&t(4,u=M.conid),"database"in M&&t(5,d=M.database),"isDynamicStructure"in M&&t(6,f=M.isDynamicStructure),"tableInfo"in M&&t(14,m=M.tableInfo),"setTableInfo"in M&&t(7,h=M.setTableInfo),"columnInfo"in M&&t(8,p=M.columnInfo),"columnIndex"in M&&t(9,g=M.columnIndex),"allowChangeChangeSetStructure"in M&&t(10,b=M.allowChangeChangeSetStructure)},o.$$.update=()=>{o.$$.dirty&1024&&t(11,n=b)},[r,a,s,l,u,d,f,h,p,g,b,n,v,y,m,C,E,A,k,T,$,S,I,R,N]}class ColumnManagerRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$2D,create_fragment$2F,safe_not_equal,{column:0,display:1,isJsonView:2,isSelected:3,conid:4,database:5,isDynamicStructure:6,tableInfo:14,setTableInfo:7,columnInfo:8,columnIndex:9,allowChangeChangeSetStructure:10})}}const ColumnManagerRow$1=Object.freeze(Object.defineProperty({__proto__:null,default:ColumnManagerRow},Symbol.toStringTag,{value:"Module"})),ColumnManager_svelte_svelte_type_style_lang="";function get_each_context$p(o,e,t){const n=o.slice();n[40]=e[t];const r=n[16].indexOf(n[40]);return n[41]=r,n}function create_if_block_2$r(o){let e,t,n;return t=new SelectField({props:{isNative:!0,class:"colmode",value:o[3]?"variable":"fixed",options:[{label:"Fixed columns (like SQL)",value:"fixed"},{label:"Variable columns (like MongoDB)",value:"variable"}]}}),t.$on("change",o[22]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","selectwrap svelte-1mcb02n")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a[0]&8&&(s.value=r[3]?"variable":"fixed"),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_1$F(o){let e,t;return e=new InlineButton({props:{$$slots:{default:[create_default_slot_5$8]},$$scope:{ctx:o}}}),e.$on("click",o[25]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_5$8(o){let e;return{c(){e=text("Add")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block$17(o){let e,t;return e=new InlineButton({props:{$$slots:{default:[create_default_slot_4$9]},$$scope:{ctx:o}}}),e.$on("click",o[19]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_4$9(o){let e;return{c(){e=text("Add")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_3$e(o){let e;return{c(){e=text("Hide")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_2$h(o){let e;return{c(){e=text("Show")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$y(o){let e,t,n,r,a,s,l,u,d,f,m,h;function p(E){o[23](E)}let g={placeholder:"Search columns"};o[9]!==void 0&&(g.value=o[9]),e=new SearchInput({props:g}),binding_callbacks.push(()=>bind(e,"value",p));function b(E){o[24](E)}let v={};o[9]!==void 0&&(v.filter=o[9]),r=new CloseSearchButton({props:v}),binding_callbacks.push(()=>bind(r,"filter",b));let y=o[3]&&!o[2]&&create_if_block_1$F(o),C=o[6]&&!o[3]&&create_if_block$17(o);return d=new InlineButton({props:{$$slots:{default:[create_default_slot_3$e]},$$scope:{ctx:o}}}),d.$on("click",o[26]),m=new InlineButton({props:{$$slots:{default:[create_default_slot_2$h]},$$scope:{ctx:o}}}),m.$on("click",o[27]),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),s=space(),y&&y.c(),l=space(),C&&C.c(),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment)},m(E,A){mount_component(e,E,A),insert(E,n,A),mount_component(r,E,A),insert(E,s,A),y&&y.m(E,A),insert(E,l,A),C&&C.m(E,A),insert(E,u,A),mount_component(d,E,A),insert(E,f,A),mount_component(m,E,A),h=!0},p(E,A){const k={};!t&&A[0]&512&&(t=!0,k.value=E[9],add_flush_callback(()=>t=!1)),e.$set(k);const T={};!a&&A[0]&512&&(a=!0,T.filter=E[9],add_flush_callback(()=>a=!1)),r.$set(T),E[3]&&!E[2]?y?(y.p(E,A),A[0]&12&&transition_in(y,1)):(y=create_if_block_1$F(E),y.c(),transition_in(y,1),y.m(l.parentNode,l)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros()),E[6]&&!E[3]?C?(C.p(E,A),A[0]&72&&transition_in(C,1)):(C=create_if_block$17(E),C.c(),transition_in(C,1),C.m(u.parentNode,u)):C&&(group_outros(),transition_out(C,1,1,()=>{C=null}),check_outros());const $={};A[1]&8192&&($.$$scope={dirty:A,ctx:E}),d.$set($);const S={};A[1]&8192&&(S.$$scope={dirty:A,ctx:E}),m.$set(S)},i(E){h||(transition_in(e.$$.fragment,E),transition_in(r.$$.fragment,E),transition_in(y),transition_in(C),transition_in(d.$$.fragment,E),transition_in(m.$$.fragment,E),h=!0)},o(E){transition_out(e.$$.fragment,E),transition_out(r.$$.fragment,E),transition_out(y),transition_out(C),transition_out(d.$$.fragment,E),transition_out(m.$$.fragment,E),h=!1},d(E){E&&(detach(n),detach(s),detach(l),detach(u),detach(f)),destroy_component(e,E),destroy_component(r,E),y&&y.d(E),C&&C.d(E),destroy_component(d,E),destroy_component(m,E)}}}function create_each_block$p(o,e){var d,f;let t,n,r;function a(){return e[29](e[40])}function s(...m){return e[30](e[40],...m)}function l(...m){return e[31](e[40],...m)}function u(...m){return e[33](e[40],...m)}return n=new ColumnManagerRow({props:{display:e[1],column:e[40],isJsonView:e[2],isDynamicStructure:e[3],conid:e[4],database:e[5],tableInfo:e[14],setTableInfo:e[15],columnInfo:(f=(d=e[14])==null?void 0:d.columns)==null?void 0:f[e[41]],columnIndex:e[41],allowChangeChangeSetStructure:e[6],isSelected:e[11].includes(e[40].uniqueName)||e[12]==e[40].uniqueName}}),n.$on("click",a),n.$on("mousemove",s),n.$on("mousedown",l),n.$on("mouseup",e[32]),n.$on("setvisibility",u),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(m,h){insert(m,t,h),mount_component(n,m,h),r=!0},p(m,h){var g,b;e=m;const p={};h[0]&2&&(p.display=e[1]),h[0]&65536&&(p.column=e[40]),h[0]&4&&(p.isJsonView=e[2]),h[0]&8&&(p.isDynamicStructure=e[3]),h[0]&16&&(p.conid=e[4]),h[0]&32&&(p.database=e[5]),h[0]&16384&&(p.tableInfo=e[14]),h[0]&32768&&(p.setTableInfo=e[15]),h[0]&81920&&(p.columnInfo=(b=(g=e[14])==null?void 0:g.columns)==null?void 0:b[e[41]]),h[0]&65536&&(p.columnIndex=e[41]),h[0]&64&&(p.allowChangeChangeSetStructure=e[6]),h[0]&71680&&(p.isSelected=e[11].includes(e[40].uniqueName)||e[12]==e[40].uniqueName),n.$set(p)},i(m){r||(transition_in(n.$$.fragment,m),r=!0)},o(m){transition_out(n.$$.fragment,m),r=!1},d(m){m&&detach(t),destroy_component(n,m)}}}function create_default_slot$10(o){let e,t,n=[],r=new Map,a,s,l,u,d=ensure_array_like(o[16]);const f=m=>m[40].uniqueName;for(let m=0;m<d.length;m+=1){let h=get_each_context$p(o,d,m),p=f(h);r.set(p,n[m]=create_each_block$p(p,h))}return{c(){e=element("input"),t=space();for(let m=0;m<n.length;m+=1)n[m].c();a=empty(),attr(e,"type","text"),attr(e,"class","focus-field svelte-1mcb02n")},m(m,h){insert(m,e,h),o[28](e),insert(m,t,h);for(let p=0;p<n.length;p+=1)n[p]&&n[p].m(m,h);insert(m,a,h),s=!0,l||(u=[listen(e,"keydown",o[17]),listen(e,"focus",focus_handler),listen(e,"copy",o[18])],l=!0)},p(m,h){h[0]&130174&&(d=ensure_array_like(m[16]),group_outros(),n=update_keyed_each(n,h,f,1,m,d,r,a.parentNode,outro_and_destroy_block,create_each_block$p,a,get_each_context$p),check_outros())},i(m){if(!s){for(let h=0;h<d.length;h+=1)transition_in(n[h]);s=!0}},o(m){for(let h=0;h<n.length;h+=1)transition_out(n[h]);s=!1},d(m){m&&(detach(e),detach(t),detach(a)),o[28](null);for(let h=0;h<n.length;h+=1)n[h].d(m);l=!1,run_all(u)}}}function create_fragment$2E(o){let e,t,n,r,a,s=o[6]&&create_if_block_2$r(o);return t=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_1$y]},$$scope:{ctx:o}}}),r=new ManagerInnerContainer({props:{width:o[0],$$slots:{default:[create_default_slot$10]},$$scope:{ctx:o}}}),{c(){s&&s.c(),e=space(),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment)},m(l,u){s&&s.m(l,u),insert(l,e,u),mount_component(t,l,u),insert(l,n,u),mount_component(r,l,u),a=!0},p(l,u){l[6]?s?(s.p(l,u),u[0]&64&&transition_in(s,1)):(s=create_if_block_2$r(l),s.c(),transition_in(s,1),s.m(e.parentNode,e)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros());const d={};u[0]&590|u[1]&8192&&(d.$$scope={dirty:u,ctx:l}),t.$set(d);const f={};u[0]&1&&(f.width=l[0]),u[0]&130174|u[1]&8192&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){a||(transition_in(s),transition_in(t.$$.fragment,l),transition_in(r.$$.fragment,l),a=!0)},o(l){transition_out(s),transition_out(t.$$.fragment,l),transition_out(r.$$.fragment,l),a=!1},d(l){l&&(detach(e),detach(n)),s&&s.d(l),destroy_component(t,l),destroy_component(r,l)}}}const focus_handler=()=>{};function instance$2C(o,e,t){let n,r,a,s;var l=this&&this.__awaiter||function(Q,X,ie,ce){function de(se){return se instanceof ie?se:new ie(function(me){me(se)})}return new(ie||(ie=Promise))(function(se,me){function ue(Oe){try{pe(ce.next(Oe))}catch(qe){me(qe)}}function he(Oe){try{pe(ce.throw(Oe))}catch(qe){me(qe)}}function pe(Oe){Oe.done?se(Oe.value):de(Oe.value).then(ue,he)}pe((ce=ce.apply(Q,X||[])).next())})},u;let{managerSize:d}=e,{display:f}=e,{isJsonView:m=!1}=e,{isDynamicStructure:h=!1}=e,{conid:p}=e,{database:g}=e,{allowChangeChangeSetStructure:b=!1}=e,{changeSetState:v=null}=e,{dispatchChangeSet:y=null}=e,C,E,A=[],k=null,T=null,$=null;function S(Q,X){const ie=n[Q].uniqueName;if(X.shiftKey){const ce=_.findIndex(n,de=>de.uniqueName==k);ce>=0&&$==null&&($=ce),t(11,A=_.range(Math.min($,Q),Math.max($,Q)+1).map(de=>n[de].uniqueName))}else t(11,A=[ie]),$=null;t(12,k=ie),m||f.focusColumns(A)}function I(Q,X){if(Q>=0&&Q<n.length){S(Q,X);return}if(n.length!=0){if(Q<0){S(0,X);return}else if(Q>=n.length){S(n.length-1,X);return}}}function R(Q,X){const ie=_.findIndex(n,ce=>ce.uniqueName==k);ie>=0&&I(Q(ie),X)}function N(Q){if(Q.keyCode==keycodes.upArrow)R(X=>X-1,Q);else if(Q.keyCode==keycodes.downArrow)R(X=>X+1,Q);else if(Q.keyCode==keycodes.home)R(()=>0,Q);else if(Q.keyCode==keycodes.end)R(()=>n.length-1,Q);else if(Q.keyCode==keycodes.pageUp)R(X=>X-10,Q);else if(Q.keyCode==keycodes.pageDown)R(X=>X+10,Q);else if(Q.keyCode==keycodes.space){let X=null;for(const ie of A){const ce=n.find(de=>de.uniqueName==ie);ce&&(X==null&&(X=!ce.isChecked),f.setColumnVisibility(ce.uniquePath,X))}}}function M(){copyTextToClipboard(A.join(`\r
`))}function F(Q){t(11,A=Q),Q.length>0&&t(12,k=Q[0])}function D(){showModal(ColumnEditorModal,{setTableInfo:a,tableInfo:r,addDataCommand:s,onAddNext:()=>l(this,void 0,void 0,function*(){yield tick(),D()})})}const x=Q=>{y({type:"set",value:{...v==null?void 0:v.value,structure:{...f==null?void 0:f.editableStructure,__isDynamicStructure:Q.detail=="variable"}}})};function B(Q){C=Q,t(9,C)}function K(Q){C=Q,t(9,C)}const U=()=>{showModal(InputTextModal,{value:"",label:"Column name",header:"Add new column",onConfirm:Q=>{f.addDynamicColumn(Q)}})},G=()=>f.hideAllColumns(),W=()=>f.showAllColumns();function q(Q){binding_callbacks[Q?"unshift":"push"](()=>{E=Q,t(10,E)})}const H=Q=>{E&&E.focus(),t(11,A=[Q.uniqueName]),t(12,k=Q.uniqueName)},z=(Q,X)=>{if(X.buttons==1&&T!=null&&T>=0){const ie=_.findIndex(n,ce=>ce.uniqueName==Q.uniqueName);ie>=0&&(t(11,A=_.range(Math.min(T,ie),Math.max(T,ie)+1).map(ce=>n[ce].uniqueName)),t(12,k=Q.uniqueName),m||f.focusColumns([k,...A]))}},Y=(Q,X)=>{t(13,T=_.findIndex(n,ie=>ie.uniqueName==Q.uniqueName)),t(11,A=[Q.uniqueName]),E&&E.focus(),t(12,k=Q.uniqueName),m||f.focusColumns(A)},V=Q=>{E&&E.focus()},J=(Q,X)=>{if(A.includes(Q.uniqueName))for(const ie of A){const ce=n.find(de=>de.uniqueName==ie);ce&&f.setColumnVisibility(ce.uniquePath,X.detail)}};return o.$$set=Q=>{"managerSize"in Q&&t(0,d=Q.managerSize),"display"in Q&&t(1,f=Q.display),"isJsonView"in Q&&t(2,m=Q.isJsonView),"isDynamicStructure"in Q&&t(3,h=Q.isDynamicStructure),"conid"in Q&&t(4,p=Q.conid),"database"in Q&&t(5,g=Q.database),"allowChangeChangeSetStructure"in Q&&t(6,b=Q.allowChangeChangeSetStructure),"changeSetState"in Q&&t(7,v=Q.changeSetState),"dispatchChangeSet"in Q&&t(8,y=Q.dispatchChangeSet)},o.$$.update=()=>{o.$$.dirty[0]&2097666&&t(16,n=(t(21,u=f==null?void 0:f.getColumns(C))===null||u===void 0?void 0:u.filter(Q=>lib.filterName(C,Q.columnName)))||[]),o.$$.dirty[0]&2&&t(14,r=f==null?void 0:f.editableStructure),o.$$.dirty[0]&386&&t(15,a=Q=>{var X;const ie=Q(f==null?void 0:f.editableStructure);let ce=[];ie.__addDataCommands&&(ce=ie.__addDataCommands,delete ie.__addDataCommands),y({type:"set",value:Object.assign(Object.assign({},v==null?void 0:v.value),{dataUpdateCommands:[...((X=v==null?void 0:v.value)===null||X===void 0?void 0:X.dataUpdateCommands)||[],...ce],structure:ie})}),tick().then(()=>f.reload())}),o.$$.dirty[0]&64&&(s=b)},[d,f,m,h,p,g,b,v,y,C,E,A,k,T,r,a,n,N,M,D,F,u,x,B,K,U,G,W,q,H,z,Y,V,J]}class ColumnManager extends SvelteComponent{constructor(e){super(),init(this,e,instance$2C,create_fragment$2E,safe_not_equal,{managerSize:0,display:1,isJsonView:2,isDynamicStructure:3,conid:4,database:5,allowChangeChangeSetStructure:6,changeSetState:7,dispatchChangeSet:8,setSelectedColumns:20},null,[-1,-1])}get setSelectedColumns(){return this.$$.ctx[20]}}const ColumnManager$1=Object.freeze(Object.defineProperty({__proto__:null,default:ColumnManager},Symbol.toStringTag,{value:"Module"})),ReferenceManager_svelte_svelte_type_style_lang="";function get_each_context$o(o,e,t){const n=o.slice();return n[15]=e[t],n}function get_each_context_1$6(o,e,t){const n=o.slice();return n[15]=e[t],n}function create_default_slot_1$x(o){let e,t,n,r,a,s;function l(m){o[8](m)}let u={placeholder:"Search references"};o[2]!==void 0&&(u.value=o[2]),e=new SearchInput({props:u}),binding_callbacks.push(()=>bind(e,"value",l));function d(m){o[9](m)}let f={};return o[2]!==void 0&&(f.filter=o[2]),r=new CloseSearchButton({props:f}),binding_callbacks.push(()=>bind(r,"filter",d)),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(m,h){mount_component(e,m,h),insert(m,n,h),mount_component(r,m,h),s=!0},p(m,h){const p={};!t&&h&4&&(t=!0,p.value=m[2],add_flush_callback(()=>t=!1)),e.$set(p);const g={};!a&&h&4&&(a=!0,g.filter=m[2],add_flush_callback(()=>a=!1)),r.$set(g)},i(m){s||(transition_in(e.$$.fragment,m),transition_in(r.$$.fragment,m),s=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(r.$$.fragment,m),s=!1},d(m){m&&detach(n),destroy_component(e,m),destroy_component(r,m)}}}function create_if_block_1$E(o){let e,t,n=o[4].length+"",r,a,s,l,u,d=ensure_array_like(o[4].filter(o[10])),f=[];for(let h=0;h<d.length;h+=1)f[h]=create_each_block_1$6(get_each_context_1$6(o,d,h));const m=h=>transition_out(f[h],1,1,()=>{f[h]=null});return{c(){e=element("div"),t=text("References tables ("),r=text(n),a=text(")"),s=space();for(let h=0;h<f.length;h+=1)f[h].c();l=empty(),attr(e,"class","bold nowrap ml-1")},m(h,p){insert(h,e,p),append(e,t),append(e,r),append(e,a),insert(h,s,p);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(h,p);insert(h,l,p),u=!0},p(h,p){if((!u||p&16)&&n!==(n=h[4].length+"")&&set_data(r,n),p&22){d=ensure_array_like(h[4].filter(h[10]));let g;for(g=0;g<d.length;g+=1){const b=get_each_context_1$6(h,d,g);f[g]?(f[g].p(b,p),transition_in(f[g],1)):(f[g]=create_each_block_1$6(b),f[g].c(),transition_in(f[g],1),f[g].m(l.parentNode,l))}for(group_outros(),g=d.length;g<f.length;g+=1)m(g);check_outros()}},i(h){if(!u){for(let p=0;p<d.length;p+=1)transition_in(f[p]);u=!0}},o(h){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)transition_out(f[p]);u=!1},d(h){h&&(detach(e),detach(s),detach(l)),destroy_each(f,h)}}}function create_each_block_1$6(o){let e,t,n,r,a=o[15].refTableName+"",s,l,u=o[15].columns.map(func_1$c).join(", ")+"",d,f,m,h,p,g;t=new FontIcon({props:{icon:"img link"}});function b(){return o[11](o[15])}return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),s=text(a),l=text(`
          (`),d=text(u),f=text(")"),m=space(),attr(r,"class","ml-1 nowrap"),attr(e,"class","link svelte-jntsgu")},m(v,y){insert(v,e,y),mount_component(t,e,null),append(e,n),append(e,r),append(r,s),append(r,l),append(r,d),append(r,f),append(e,m),h=!0,p||(g=listen(e,"click",b),p=!0)},p(v,y){o=v,(!h||y&20)&&a!==(a=o[15].refTableName+"")&&set_data(s,a),(!h||y&20)&&u!==(u=o[15].columns.map(func_1$c).join(", ")+"")&&set_data(d,u)},i(v){h||(transition_in(t.$$.fragment,v),h=!0)},o(v){transition_out(t.$$.fragment,v),h=!1},d(v){v&&detach(e),destroy_component(t),p=!1,g()}}}function create_if_block$16(o){let e,t,n=o[3].length+"",r,a,s,l,u,d=ensure_array_like(o[3].filter(o[12])),f=[];for(let h=0;h<d.length;h+=1)f[h]=create_each_block$o(get_each_context$o(o,d,h));const m=h=>transition_out(f[h],1,1,()=>{f[h]=null});return{c(){e=element("div"),t=text("Dependend tables ("),r=text(n),a=text(")"),s=space();for(let h=0;h<f.length;h+=1)f[h].c();l=empty(),attr(e,"class","bold nowrap ml-1")},m(h,p){insert(h,e,p),append(e,t),append(e,r),append(e,a),insert(h,s,p);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(h,p);insert(h,l,p),u=!0},p(h,p){if((!u||p&8)&&n!==(n=h[3].length+"")&&set_data(r,n),p&14){d=ensure_array_like(h[3].filter(h[12]));let g;for(g=0;g<d.length;g+=1){const b=get_each_context$o(h,d,g);f[g]?(f[g].p(b,p),transition_in(f[g],1)):(f[g]=create_each_block$o(b),f[g].c(),transition_in(f[g],1),f[g].m(l.parentNode,l))}for(group_outros(),g=d.length;g<f.length;g+=1)m(g);check_outros()}},i(h){if(!u){for(let p=0;p<d.length;p+=1)transition_in(f[p]);u=!0}},o(h){f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)transition_out(f[p]);u=!1},d(h){h&&(detach(e),detach(s),detach(l)),destroy_each(f,h)}}}function create_each_block$o(o){let e,t,n,r,a=o[15].pureName+"",s,l,u=o[15].columns.map(func_3$4).join(", ")+"",d,f,m,h,p,g;t=new FontIcon({props:{icon:"img reference"}});function b(){return o[13](o[15])}return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),s=text(a),l=text(`
          (`),d=text(u),f=text(")"),m=space(),attr(r,"class","ml-1 nowrap"),attr(e,"class","link svelte-jntsgu")},m(v,y){insert(v,e,y),mount_component(t,e,null),append(e,n),append(e,r),append(r,s),append(r,l),append(r,d),append(r,f),append(e,m),h=!0,p||(g=listen(e,"click",b),p=!0)},p(v,y){o=v,(!h||y&12)&&a!==(a=o[15].pureName+"")&&set_data(s,a),(!h||y&12)&&u!==(u=o[15].columns.map(func_3$4).join(", ")+"")&&set_data(d,u)},i(v){h||(transition_in(t.$$.fragment,v),h=!0)},o(v){transition_out(t.$$.fragment,v),h=!1},d(v){v&&detach(e),destroy_component(t),p=!1,g()}}}function create_default_slot$$(o){let e,t,n,r=o[4].length>0&&create_if_block_1$E(o),a=o[3].length>0&&create_if_block$16(o);return{c(){r&&r.c(),e=space(),a&&a.c(),t=empty()},m(s,l){r&&r.m(s,l),insert(s,e,l),a&&a.m(s,l),insert(s,t,l),n=!0},p(s,l){s[4].length>0?r?(r.p(s,l),l&16&&transition_in(r,1)):(r=create_if_block_1$E(s),r.c(),transition_in(r,1),r.m(e.parentNode,e)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros()),s[3].length>0?a?(a.p(s,l),l&8&&transition_in(a,1)):(a=create_if_block$16(s),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){n||(transition_in(r),transition_in(a),n=!0)},o(s){transition_out(r),transition_out(a),n=!1},d(s){s&&(detach(e),detach(t)),r&&r.d(s),a&&a.d(s)}}}function create_fragment$2D(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_1$x]},$$scope:{ctx:o}}}),n=new ManagerInnerContainer({props:{width:o[0],$$slots:{default:[create_default_slot$$]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,[s]){const l={};s&1048580&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&1&&(u.width=a[0]),s&1048606&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}const func_1$c=o=>o.columnName,func_3$4=o=>o.columnName;function instance$2B(o,e,t){let n,r;var a,s;let{managerSize:l}=e,{display:u}=e,{onReferenceClick:d=y=>{}}=e;createEventDispatcher();let f;function m(y){f=y,t(2,f)}function h(y){f=y,t(2,f)}const p=y=>lib.filterName(f,y.refTableName),g=y=>d({schemaName:y.refSchemaName,pureName:y.refTableName,columns:y.columns.map(C=>({baseName:C.columnName,refName:C.refColumnName}))}),b=y=>lib.filterName(f,y.pureName),v=y=>d({schemaName:y.schemaName,pureName:y.pureName,columns:y.columns.map(C=>({baseName:C.refColumnName,refName:C.columnName}))});return o.$$set=y=>{"managerSize"in y&&t(0,l=y.managerSize),"display"in y&&t(5,u=y.display),"onReferenceClick"in y&&t(1,d=y.onReferenceClick)},o.$$.update=()=>{o.$$.dirty&96&&t(4,n=(t(6,a=u==null?void 0:u.baseTable)===null||a===void 0?void 0:a.foreignKeys)||[]),o.$$.dirty&160&&t(3,r=(t(7,s=u==null?void 0:u.baseTable)===null||s===void 0?void 0:s.dependencies)||[])},[l,d,f,r,n,u,a,s,m,h,p,g,b,v]}class ReferenceManager extends SvelteComponent{constructor(e){super(),init(this,e,instance$2B,create_fragment$2D,safe_not_equal,{managerSize:0,display:5,onReferenceClick:1})}}const ReferenceManager$1=Object.freeze(Object.defineProperty({__proto__:null,default:ReferenceManager},Symbol.toStringTag,{value:"Module"})),DataGrid_svelte_svelte_type_style_lang="";function create_default_slot_4$8(o){let e,t;const n=[o[25],{managerSize:o[12]},{isJsonView:o[15]},{isDynamicStructure:o[10]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ColumnManager({props:r}),o[40](e),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&33592320?get_spread_update(n,[s[0]&33554432&&get_spread_object(a[25]),s[0]&4096&&{managerSize:a[12]},s[0]&32768&&{isJsonView:a[15]},s[0]&1024&&{isDynamicStructure:a[10]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){o[40](null),destroy_component(e,a)}}}function create_default_slot_3$d(o){var a;let e,t;const n=[o[25],{managerSize:o[12]},{isDynamicStructure:o[10]},{useEvalFilters:o[5]},{isFormView:o[16]},{hasMultiColumnFilter:o[11]},{driver:(a=o[4])==null?void 0:a.driver}];let r={};for(let s=0;s<n.length;s+=1)r=assign(r,n[s]);return e=new FormViewFilters({props:r}),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),t=!0},p(s,l){var d;const u=l[0]&33627184?get_spread_update(n,[l[0]&33554432&&get_spread_object(s[25]),l[0]&4096&&{managerSize:s[12]},l[0]&1024&&{isDynamicStructure:s[10]},l[0]&32&&{useEvalFilters:s[5]},l[0]&65536&&{isFormView:s[16]},l[0]&2048&&{hasMultiColumnFilter:s[11]},l[0]&16&&{driver:(d=s[4])==null?void 0:d.driver}]):{};e.$set(u)},i(s){t||(transition_in(e.$$.fragment,s),t=!0)},o(s){transition_out(e.$$.fragment,s),t=!1},d(s){destroy_component(e,s)}}}function create_default_slot_2$g(o){let e,t;const n=[o[25],{managerSize:o[12]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ReferenceManager({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&33558528?get_spread_update(n,[s[0]&33554432&&get_spread_object(a[25]),s[0]&4096&&{managerSize:a[12]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot_1$w(o){let e,t;const n=[o[25],{managerSize:o[12]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new MacroManager({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&33558528?get_spread_update(n,[s[0]&33554432&&get_spread_object(a[25]),s[0]&4096&&{managerSize:a[12]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot$_(o){var d,f,m;let e,t,n,r,a,s,l,u;return e=new WidgetColumnBarItem({props:{title:"Columns",name:"columns",height:"45%",skip:o[16],$$slots:{default:[create_default_slot_4$8]},$$scope:{ctx:o}}}),n=new WidgetColumnBarItem({props:{title:"Filters",name:"filters",height:o[7]&&((d=o[4])!=null&&d.hasReferences)&&!o[16]?"15%":"30%",skip:!((f=o[4])!=null&&f.filterable),collapsed:o[6],$$slots:{default:[create_default_slot_3$d]},$$scope:{ctx:o}}}),a=new WidgetColumnBarItem({props:{title:"References",name:"references",height:"30%",collapsed:o[6],skip:!(o[7]&&((m=o[4])!=null&&m.hasReferences)),$$slots:{default:[create_default_slot_2$g]},$$scope:{ctx:o}}}),l=new WidgetColumnBarItem({props:{title:"Macros",name:"macros",skip:!o[8],collapsed:!o[9],$$slots:{default:[create_default_slot_1$w]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(h,p){mount_component(e,h,p),insert(h,t,p),mount_component(n,h,p),insert(h,r,p),mount_component(a,h,p),insert(h,s,p),mount_component(l,h,p),u=!0},p(h,p){var C,E,A;const g={};p[0]&65536&&(g.skip=h[16]),p[0]&33608704|p[1]&2048&&(g.$$scope={dirty:p,ctx:h}),e.$set(g);const b={};p[0]&65680&&(b.height=h[7]&&((C=h[4])!=null&&C.hasReferences)&&!h[16]?"15%":"30%"),p[0]&16&&(b.skip=!((E=h[4])!=null&&E.filterable)),p[0]&64&&(b.collapsed=h[6]),p[0]&33627184|p[1]&2048&&(b.$$scope={dirty:p,ctx:h}),n.$set(b);const v={};p[0]&64&&(v.collapsed=h[6]),p[0]&144&&(v.skip=!(h[7]&&((A=h[4])!=null&&A.hasReferences))),p[0]&33558528|p[1]&2048&&(v.$$scope={dirty:p,ctx:h}),a.$set(v);const y={};p[0]&256&&(y.skip=!h[8]),p[0]&512&&(y.collapsed=!h[9]),p[0]&33558528|p[1]&2048&&(y.$$scope={dirty:p,ctx:h}),l.$set(y)},i(h){u||(transition_in(e.$$.fragment,h),transition_in(n.$$.fragment,h),transition_in(a.$$.fragment,h),transition_in(l.$$.fragment,h),u=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(n.$$.fragment,h),transition_out(a.$$.fragment,h),transition_out(l.$$.fragment,h),u=!1},d(h){h&&(detach(t),detach(r),detach(s)),destroy_component(e,h),destroy_component(n,h),destroy_component(a,h),destroy_component(l,h)}}}function create__1_slot_1$5(o){let e,t,n;return t=new WidgetColumnBar({props:{$$slots:{default:[create_default_slot$_]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","left svelte-xxvqmu"),attr(e,"slot","1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a[0]&33677296|a[1]&2048&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_else_block$u(o){let e,t,n,r,a;const s=[o[25],{collapsedLeftColumnStore:o[22]},{formViewAvailable:!!o[2]},{macroValues:extractMacroValuesForMacro(o[18],o[17])},{macroPreview:o[17]},{onChangeSelectedColumns:o[37]}];function l(m){o[38](m)}function u(m){o[39](m)}var d=o[1];function f(m){let h={};for(let p=0;p<s.length;p+=1)h=assign(h,s[p]);return m[0]!==void 0&&(h.loadedRows=m[0]),m[13]!==void 0&&(h.selectedCellsPublished=m[13]),{props:h}}return d&&(e=construct_svelte_component(d,f(o)),binding_callbacks.push(()=>bind(e,"loadedRows",l)),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",u))),{c(){e&&create_component(e.$$.fragment),r=empty()},m(m,h){e&&mount_component(e,m,h),insert(m,r,h),a=!0},p(m,h){const p=h[0]&38158340?get_spread_update(s,[h[0]&33554432&&get_spread_object(m[25]),h[0]&4194304&&{collapsedLeftColumnStore:m[22]},h[0]&4&&{formViewAvailable:!!m[2]},h[0]&393216&&{macroValues:extractMacroValuesForMacro(m[18],m[17])},h[0]&131072&&{macroPreview:m[17]},h[0]&16384&&{onChangeSelectedColumns:m[37]}]):{};if(!t&&h[0]&1&&(t=!0,p.loadedRows=m[0],add_flush_callback(()=>t=!1)),!n&&h[0]&8192&&(n=!0,p.selectedCellsPublished=m[13],add_flush_callback(()=>n=!1)),h[0]&2&&d!==(d=m[1])){if(e){group_outros();const g=e;transition_out(g.$$.fragment,1,0,()=>{destroy_component(g,1)}),check_outros()}d?(e=construct_svelte_component(d,f(m)),binding_callbacks.push(()=>bind(e,"loadedRows",l)),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",u)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,r.parentNode,r)):e=null}else d&&e.$set(p)},i(m){a||(e&&transition_in(e.$$.fragment,m),a=!0)},o(m){e&&transition_out(e.$$.fragment,m),a=!1},d(m){m&&detach(r),e&&destroy_component(e,m)}}}function create_if_block_2$q(o){let e,t,n,r;const a=[o[25]];function s(d){o[36](d)}var l=o[3];function u(d){let f={};for(let m=0;m<a.length;m+=1)f=assign(f,a[m]);return d[0]!==void 0&&(f.loadedRows=d[0]),{props:f}}return l&&(e=construct_svelte_component(l,u(o)),binding_callbacks.push(()=>bind(e,"loadedRows",s))),{c(){e&&create_component(e.$$.fragment),n=empty()},m(d,f){e&&mount_component(e,d,f),insert(d,n,f),r=!0},p(d,f){const m=f[0]&33554432?get_spread_update(a,[get_spread_object(d[25])]):{};if(!t&&f[0]&1&&(t=!0,m.loadedRows=d[0],add_flush_callback(()=>t=!1)),f[0]&8&&l!==(l=d[3])){if(e){group_outros();const h=e;transition_out(h.$$.fragment,1,0,()=>{destroy_component(h,1)}),check_outros()}l?(e=construct_svelte_component(l,u(d)),binding_callbacks.push(()=>bind(e,"loadedRows",s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,n.parentNode,n)):e=null}else l&&e.$set(m)},i(d){r||(e&&transition_in(e.$$.fragment,d),r=!0)},o(d){e&&transition_out(e.$$.fragment,d),r=!1},d(d){d&&detach(n),e&&destroy_component(e,d)}}}function create_if_block_1$D(o){let e,t,n;const r=[o[25]];var a=o[2];function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s())),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u[0]&33554432?get_spread_update(r,[get_spread_object(l[25])]):{};if(u[0]&4&&a!==(a=l[2])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s()),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create__1_slot$l(o){let e,t,n,r;const a=[create_if_block_1$D,create_if_block_2$q,create_else_block$u],s=[];function l(u,d){return u[16]?0:u[15]?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_if_block$15(o){let e,t;return e=new MacroDetail({props:{onExecute:o[23]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot_1$4(o){let e,t,n=o[17]&&create_if_block$15(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[17]?n?(n.p(r,a),a[0]&131072&&transition_in(n,1)):(n=create_if_block$15(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create__2_slot$k(o){let e,t;return e=new VerticalSplitter({props:{initialValue:"70%",isSplitter:!!o[17]&&!o[16]&&o[8],$$slots:{2:[create__2_slot_1$4],1:[create__1_slot$l]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&196864&&(a.isSplitter=!!n[17]&&!n[16]&&n[8]),r[0]&34070543|r[1]&2048&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2C(o){let e,t,n;function r(s){o[41](s)}let a={initialValue:o[24](),hideFirst:o[19],$$slots:{2:[create__2_slot$k],1:[create__1_slot_1$5]},$$scope:{ctx:o}};return o[12]!==void 0&&(a.size=o[12]),e=new HorizontalSplitter({props:a}),binding_callbacks.push(()=>bind(e,"size",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};l[0]&524288&&(u.hideFirst=s[19]),l[0]&34078719|l[1]&2048&&(u.$$scope={dirty:l,ctx:s}),!t&&l[0]&4096&&(t=!0,u.size=s[12],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}const getCurrentEditor$s=()=>getActiveComponent("DataGrid");registerCommand({id:"dataGrid.switchToForm",category:"Data grid",name:"Switch to form",icon:"icon form",keyText:"F4",testEnabled:()=>{var o;return(o=getCurrentEditor$s())===null||o===void 0?void 0:o.switchViewEnabled("form")},onClick:()=>getCurrentEditor$s().switchToView("form")});registerCommand({id:"dataGrid.switchToJson",category:"Data grid",name:"Switch to JSON",icon:"icon json",keyText:"F4",testEnabled:()=>{var o;return(o=getCurrentEditor$s())===null||o===void 0?void 0:o.switchViewEnabled("json")},onClick:()=>getCurrentEditor$s().switchToView("json")});registerCommand({id:"dataGrid.switchToTable",category:"Data grid",name:"Switch to table",icon:"icon table",keyText:"F4",testEnabled:()=>{var o;return(o=getCurrentEditor$s())===null||o===void 0?void 0:o.switchViewEnabled("table")},onClick:()=>getCurrentEditor$s().switchToView("table")});registerCommand({id:"dataGrid.toggleLeftPanel",category:"Data grid",name:"Toggle left panel",keyText:"CtrlOrCommand+L",testEnabled:()=>getCurrentEditor$s()!=null,onClick:()=>getCurrentEditor$s().toggleLeftPanel()});function extractMacroValuesForMacro(o,e){return e?Object.assign(Object.assign({},_.fromPairs((e.args||[]).filter(t=>t.default!=null).map(t=>[t.name,t.default]))),_.mapKeys(o,(t,n)=>n.replace(/^.*#/,""))):{}}function instance$2A(o,e,t){let n,r,a,s,l,{config:u}=e,{setConfig:d}=e,{gridCoreComponent:f}=e,{formViewComponent:m=null}=e,{jsonViewComponent:h=null}=e,{display:p}=e,{changeSetState:g}=e,{dispatchChangeSet:b}=e,{useEvalFilters:v=!1}=e,{isDetailView:y=!1}=e,{showReferences:C=!1}=e,{showMacros:E=!1}=e,{expandMacros:A=!1}=e,{isDynamicStructure:k=!1}=e,{macroCondition:T}=e,{onRunMacro:$}=e,{hasMultiColumnFilter:S=!1}=e,{loadedRows:I}=e;const R=createActivator("DataGrid",!1);let N=()=>[],M;const F=writable(null);component_subscribe(o,F,X=>t(17,a=X)),setContext("selectedMacro",F);const D=writable({});component_subscribe(o,D,X=>t(18,s=X)),setContext("macroValues",D);let x;const B=getContext("collapsedLeftColumnStore")||writable(getLocalStorage("dataGrid_collapsedLeftColumn",!1));component_subscribe(o,B,X=>t(19,l=X));const K=()=>{$(a,extractMacroValuesForMacro(s,a),N()),set_store_value(F,a=null,a)};function U(X){if(X=="form")return!!m&&!n;if(X=="table")return!!(n||r);if(X=="json")return!!h&&!r}function G(X){var ie;X=="form"&&p.switchToFormView((ie=N()[0])===null||ie===void 0?void 0:ie.row),X=="table"&&d(ce=>Object.assign(Object.assign({},ce),{isFormView:!1,isJsonView:!1,formViewKey:null})),X=="json"&&p.switchToJsonView()}function W(){B.update(X=>!X)}registerMenu({command:"dataGrid.switchToForm",tag:"switch",hideDisabled:!0},{command:"dataGrid.switchToTable",tag:"switch",hideDisabled:!0},{command:"dataGrid.switchToJson",tag:"switch",hideDisabled:!0},{command:"dataGrid.toggleLeftPanel",tag:"switch"});function q(){const X=getLocalStorage("dataGridManagerWidth");return _.isNumber(X)&&X>30&&X<500?`${X}px`:"300px"}function H(X){I=X,t(0,I)}const z=X=>{M&&M.setSelectedColumns(X)};function Y(X){I=X,t(0,I)}function V(X){N=X,t(13,N)}function J(X){binding_callbacks[X?"unshift":"push"](()=>{M=X,t(14,M)})}function Q(X){x=X,t(12,x)}return o.$$set=X=>{t(25,e=assign(assign({},e),exclude_internal_props(X))),"config"in X&&t(26,u=X.config),"setConfig"in X&&t(27,d=X.setConfig),"gridCoreComponent"in X&&t(1,f=X.gridCoreComponent),"formViewComponent"in X&&t(2,m=X.formViewComponent),"jsonViewComponent"in X&&t(3,h=X.jsonViewComponent),"display"in X&&t(4,p=X.display),"changeSetState"in X&&t(28,g=X.changeSetState),"dispatchChangeSet"in X&&t(29,b=X.dispatchChangeSet),"useEvalFilters"in X&&t(5,v=X.useEvalFilters),"isDetailView"in X&&t(6,y=X.isDetailView),"showReferences"in X&&t(7,C=X.showReferences),"showMacros"in X&&t(8,E=X.showMacros),"expandMacros"in X&&t(9,A=X.expandMacros),"isDynamicStructure"in X&&t(10,k=X.isDynamicStructure),"macroCondition"in X&&t(30,T=X.macroCondition),"onRunMacro"in X&&t(31,$=X.onRunMacro),"hasMultiColumnFilter"in X&&t(11,S=X.hasMultiColumnFilter),"loadedRows"in X&&t(0,I=X.loadedRows)},o.$$.update=()=>{o.$$.dirty[0]&67108864&&t(16,n=!!(u!=null&&u.isFormView)),o.$$.dirty[0]&67108864&&t(15,r=!!(u!=null&&u.isJsonView)),o.$$.dirty[0]&4096&&x&&setLocalStorage("dataGridManagerWidth",x)},e=exclude_internal_props(e),[I,f,m,h,p,v,y,C,E,A,k,S,x,N,M,r,n,a,s,l,F,D,B,K,q,e,u,d,g,b,T,$,R,U,G,W,H,z,Y,V,J,Q]}class DataGrid extends SvelteComponent{constructor(e){super(),init(this,e,instance$2A,create_fragment$2C,safe_not_equal,{config:26,setConfig:27,gridCoreComponent:1,formViewComponent:2,jsonViewComponent:3,display:4,changeSetState:28,dispatchChangeSet:29,useEvalFilters:5,isDetailView:6,showReferences:7,showMacros:8,expandMacros:9,isDynamicStructure:10,macroCondition:30,onRunMacro:31,hasMultiColumnFilter:11,loadedRows:0,activator:32,switchViewEnabled:33,switchToView:34,toggleLeftPanel:35},null,[-1,-1])}get activator(){return this.$$.ctx[32]}get switchViewEnabled(){return this.$$.ctx[33]}get switchToView(){return this.$$.ctx[34]}get toggleLeftPanel(){return this.$$.ctx[35]}}const DataGrid$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataGrid},Symbol.toStringTag,{value:"Module"})),ReferenceHeader_svelte_svelte_type_style_lang="";function create_default_slot$Z(o){let e;return{c(){e=text("Close")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$2B(o){let e,t,n,r,a,s=o[0].pureName+"",l,u,d=o[0].columns.map(func$d).join(", ")+"",f,m,h=o[0].columns.map(func_1$b).join(", ")+"",p,g,b,v,y;return n=new FontIcon({props:{icon:"img reference"}}),v=new ToolbarButton({props:{icon:"icon close",$$slots:{default:[create_default_slot$Z]},$$scope:{ctx:o}}}),v.$on("click",o[2]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),l=text(s),u=text(" ["),f=text(d),m=text(`] = master [
      `),p=text(h),g=text("]"),b=space(),create_component(v.$$.fragment),attr(a,"class","ml-2"),attr(t,"class","header svelte-dowx9k"),attr(e,"class","container svelte-dowx9k")},m(C,E){insert(C,e,E),append(e,t),mount_component(n,t,null),append(t,r),append(t,a),append(a,l),append(a,u),append(a,f),append(a,m),append(a,p),append(a,g),append(e,b),mount_component(v,e,null),y=!0},p(C,[E]){(!y||E&1)&&s!==(s=C[0].pureName+"")&&set_data(l,s),(!y||E&1)&&d!==(d=C[0].columns.map(func$d).join(", ")+"")&&set_data(f,d),(!y||E&1)&&h!==(h=C[0].columns.map(func_1$b).join(", ")+"")&&set_data(p,h);const A={};E&8&&(A.$$scope={dirty:E,ctx:C}),v.$set(A)},i(C){y||(transition_in(n.$$.fragment,C),transition_in(v.$$.fragment,C),y=!0)},o(C){transition_out(n.$$.fragment,C),transition_out(v.$$.fragment,C),y=!1},d(C){C&&detach(e),destroy_component(n),destroy_component(v)}}}const func$d=o=>o.refName,func_1$b=o=>o.baseName;function instance$2z(o,e,t){const n=createEventDispatcher();let{reference:r}=e;const a=()=>n("close");return o.$$set=s=>{"reference"in s&&t(0,r=s.reference)},[r,n,a]}class ReferenceHeader extends SvelteComponent{constructor(e){super(),init(this,e,instance$2z,create_fragment$2B,safe_not_equal,{reference:0})}}const ReferenceHeader$1=Object.freeze(Object.defineProperty({__proto__:null,default:ReferenceHeader},Symbol.toStringTag,{value:"Module"})),ToolStripButton_svelte_svelte_type_style_lang="";function create_fragment$2A(o){let e,t,n,r,a,s,l,u;r=new FontIcon({props:{icon:o[1]}});const d=o[5].default,f=create_slot(d,o,o[4],null);return{c(){e=element("div"),t=element("div"),n=element("span"),create_component(r.$$.fragment),a=space(),f&&f.c(),attr(n,"class","icon svelte-1ftx9ax"),toggle_class(n,"disabled",o[0]),attr(t,"class","inner svelte-1ftx9ax"),toggle_class(t,"disabled",o[0]),attr(e,"class","button svelte-1ftx9ax"),attr(e,"title",o[2]),toggle_class(e,"disabled",o[0])},m(m,h){insert(m,e,h),append(e,t),append(t,n),mount_component(r,n,null),append(t,a),f&&f.m(t,null),s=!0,l||(u=listen(t,"click",o[3]),l=!0)},p(m,[h]){const p={};h&2&&(p.icon=m[1]),r.$set(p),(!s||h&1)&&toggle_class(n,"disabled",m[0]),f&&f.p&&(!s||h&16)&&update_slot_base(f,d,m,m[4],s?get_slot_changes(d,m[4],h,null):get_all_dirty_from_scope(m[4]),null),(!s||h&1)&&toggle_class(t,"disabled",m[0]),(!s||h&4)&&attr(e,"title",m[2]),(!s||h&1)&&toggle_class(e,"disabled",m[0])},i(m){s||(transition_in(r.$$.fragment,m),transition_in(f,m),s=!0)},o(m){transition_out(r.$$.fragment,m),transition_out(f,m),s=!1},d(m){m&&detach(e),destroy_component(r),f&&f.d(m),l=!1,u()}}}function instance$2y(o,e,t){let{$$slots:n={},$$scope:r}=e,{disabled:a=!1}=e,{icon:s=null}=e,{title:l=null}=e;const u=createEventDispatcher();function d(f){a||u("click",{target:f.target})}return o.$$set=f=>{"disabled"in f&&t(0,a=f.disabled),"icon"in f&&t(1,s=f.icon),"title"in f&&t(2,l=f.title),"$$scope"in f&&t(4,r=f.$$scope)},[a,s,l,d,r,n]}class ToolStripButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2y,create_fragment$2A,safe_not_equal,{disabled:0,icon:1,title:2})}}function create_if_block$14(o){let e,t,n;const r=[{title:getCommandTitle(o[3])},{icon:o[3].icon},{disabled:!o[3].enabled},o[4]];var a=o[0];function s(l){let u={$$slots:{default:[create_default_slot$Y]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o)),e.$on("click",function(){is_function(o[3].onClick)&&o[3].onClick.apply(this,arguments)})),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){o=l;const d=u&24?get_spread_update(r,[u&8&&{title:getCommandTitle(o[3])},u&8&&{icon:o[3].icon},u&8&&{disabled:!o[3].enabled},u&16&&get_spread_object(o[4])]):{};if(u&140&&(d.$$scope={dirty:u,ctx:o}),u&1&&a!==(a=o[0])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(o)),e.$on("click",function(){is_function(o[3].onClick)&&o[3].onClick.apply(this,arguments)}),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_default_slot$Y(o){let e=(o[2]||o[3].toolbarName||o[3].name)+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&12&&e!==(e=(n[2]||n[3].toolbarName||n[3].name)+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_fragment$2z(o){let e,t,n=o[3]&&(!o[1]||o[3].enabled)&&create_if_block$14(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[3]&&(!r[1]||r[3].enabled)?n?(n.p(r,a),a&10&&transition_in(n,1)):(n=create_if_block$14(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function getCommandTitle(o){let e=o.text;return(o.keyText||o.keyTextFromGroup)&&(e+=` (${formatKeyText(o.keyText||o.keyTextFromGroup)})`),e}function instance$2x(o,e,t){let n;const r=["command","component","hideDisabled","buttonLabel"];let a=compute_rest_props(e,r),s;component_subscribe(o,commandsCustomized,m=>t(6,s=m));let{command:l}=e,{component:u=ToolStripButton}=e,{hideDisabled:d=!1}=e,{buttonLabel:f=null}=e;return o.$$set=m=>{e=assign(assign({},e),exclude_internal_props(m)),t(4,a=compute_rest_props(e,r)),"command"in m&&t(5,l=m.command),"component"in m&&t(0,u=m.component),"hideDisabled"in m&&t(1,d=m.hideDisabled),"buttonLabel"in m&&t(2,f=m.buttonLabel)},o.$$.update=()=>{o.$$.dirty&96&&t(3,n=Object.values(s).find(m=>m.id==l))},[u,d,f,n,a,l,s]}class ToolStripCommandButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2x,create_fragment$2z,safe_not_equal,{command:5,component:0,hideDisabled:1,buttonLabel:2})}}function create_default_slot$X(o){let e,t,n,r;return n=new FontIcon({props:{icon:"icon chevron-down"}}),{c(){e=text(o[1]),t=space(),create_component(n.$$.fragment)},m(a,s){insert(a,e,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){(!r||s&2)&&set_data(e,a[1])},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&(detach(e),detach(t)),destroy_component(n,a)}}}function create_fragment$2y(o){let e,t,n;var r=o[3];function a(s){return{props:{title:s[0],icon:s[2],$$slots:{default:[create_default_slot$X]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o)),e.$on("click",o[4])),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,[l]){const u={};if(l&1&&(u.title=s[0]),l&4&&(u.icon=s[2]),l&66&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3])){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),e.$on("click",s[4]),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function instance$2w(o,e,t){let{menu:n}=e,{title:r=void 0}=e,{label:a}=e,{icon:s}=e,{component:l=ToolStripButton}=e;function u(d){const f=d.detail.target.getBoundingClientRect(),m=f.left,h=f.bottom;currentDropDownMenu.set({left:m,top:h,items:n})}return o.$$set=d=>{"menu"in d&&t(5,n=d.menu),"title"in d&&t(0,r=d.title),"label"in d&&t(1,a=d.label),"icon"in d&&t(2,s=d.icon),"component"in d&&t(3,l=d.component)},[r,a,s,l,u,n]}class ToolStripDropDownButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2w,create_fragment$2y,safe_not_equal,{menu:5,title:0,label:1,icon:2,component:3})}}function create_else_block$t(o){let e,t;return e=new ToolStripCommandButton({props:{command:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.command=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$13(o){let e,t;return e=new ToolStripDropDownButton({props:{menu:o[3],label:o[2],icon:"icon export"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.label=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2x(o){let e,t,n,r;const a=[create_if_block$13,create_else_block$t],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function createQuickExportHandlerRef(){const o=createRef(null);return setContext("quickExportHandlerRef",o),o}function registerQuickExportHandler(o){const e=getContext("quickExportHandlerRef");e&&e.set(o)}function instance$2v(o,e,t){let{quickExportHandlerRef:n=null}=e,{command:r="sqlDataGrid.export"}=e,{label:a="Export"}=e;function s(){return[n!=null&&n.value?createQuickExportMenuItems(n==null?void 0:n.value,{command:r}):{command:r}]}return o.$$set=l=>{"quickExportHandlerRef"in l&&t(0,n=l.quickExportHandlerRef),"command"in l&&t(1,r=l.command),"label"in l&&t(2,a=l.label)},[n,r,a,s]}class ToolStripExportButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2v,create_fragment$2x,safe_not_equal,{quickExportHandlerRef:0,command:1,label:2})}}function getRowFromItem(o,e){return e.document?{...e.document,...e.fields}:{...o,...e.fields}}class ChangeSetGrider extends Grider{constructor(e,t,n,r,a=null,s={},l=[],u=!1){super(),this.sourceRows=e,this.changeSetState=t,this.dispatchChangeSet=n,this.display=r,this.macro=a,this.macroArgs=s,this.selectedCells=l,this.useRowIndexInsteaOfCondition=u,this._errors=[],this.changeSet=t&&t.value,this.insertedRows=lib$3.getChangeSetInsertedRows(this.changeSet,r==null?void 0:r.baseTableOrSimilar),this.setChangeSet=d=>n({type:"set",value:d}),this.rowCacheIndexes=new Set,this.rowDataCache={},this.rowStatusCache={},this.rowDefinitionsCache={},this.batchChangeSet=null,this.compiledMacroFunc=lib$3.compileMacroFunction(a,this._errors)}get errors(){return this._errors}getRowSource(e){return e<this.sourceRows.length?this.sourceRows[e]:null}getInsertedRowIndex(e){return e>=this.sourceRows.length?e-this.sourceRows.length:null}requireRowCache(e){var f,m,h;if(this.rowCacheIndexes.has(e))return;const t=this.getRowSource(e),n=this.getInsertedRowIndex(e),r=(f=this.display)==null?void 0:f.getChangeSetRow(t,n,this.useRowIndexInsteaOfCondition&&e<this.sourceRows.length?e:null,this.useRowIndexInsteaOfCondition),[a,s]=lib$3.findExistingChangeSetItem(this.changeSet,r);let l=s?getRowFromItem(t,s):this.compiledMacroFunc?{...t}:t,u="regular";s&&a=="updates"&&(u="updated"),a=="deletes"&&(u="deleted"),n!=null&&(u="inserted");const d={status:u,modifiedFields:s&&s.fields?new Set(Object.keys(s.fields)):null};if(this.compiledMacroFunc){if(((m=this.macro)==null?void 0:m.type)=="transformValue")for(const p of this.selectedCells){if(p.row!=e)continue;const g=lib$3.runMacroOnValue(this.compiledMacroFunc,this.macroArgs,l[p.column],e,l,p.column,this._errors);l[p.column]=g}((h=this.macro)==null?void 0:h.type)=="transformRow"&&this.selectedCells.find(p=>p.row==e)&&(l=lib$3.runMacroOnRow(this.compiledMacroFunc,this.macroArgs,e,l,_.uniq(this.selectedCells.map(p=>p.column)),this._errors))}this.rowDataCache[e]=l,this.rowStatusCache[e]=d,this.rowDefinitionsCache[e]=r,this.rowCacheIndexes.add(e)}get editable(){return this.display.editable}get canInsert(){return this.useRowIndexInsteaOfCondition||!!this.display.baseTableOrCollection}getRowData(e){return this.requireRowCache(e),this.rowDataCache[e]}getRowStatus(e){return this.requireRowCache(e),this.rowStatusCache[e]}get rowCount(){return this.sourceRows.length+this.insertedRows.length}applyModification(e){this.batchChangeSet?this.batchChangeSet=e(this.batchChangeSet):this.setChangeSet(e(this.changeSet))}setCellValue(e,t,n){const r=this.getRowSource(e),a=this.display.getChangeSetField(r,t,this.getInsertedRowIndex(e),this.useRowIndexInsteaOfCondition&&e<this.sourceRows.length?e:null,this.useRowIndexInsteaOfCondition);this.applyModification(s=>lib$3.setChangeSetValue(s,a,n))}setRowData(e,t){const n=this.getRowSource(e),r=this.display.getChangeSetRow(n,this.getInsertedRowIndex(e),this.useRowIndexInsteaOfCondition&&e<this.sourceRows.length?e:null);this.applyModification(a=>lib$3.setChangeSetRowData(a,r,t))}deleteRow(e){this.requireRowCache(e),this.applyModification(t=>lib$3.deleteChangeSetRows(t,this.rowDefinitionsCache[e]))}get rowCountInUpdate(){if(this.batchChangeSet){const e=lib$3.getChangeSetInsertedRows(this.batchChangeSet,this.display.baseTableOrSimilar);return this.sourceRows.length+e.length}else return this.rowCount}insertRow(){const e=this.rowCountInUpdate;return this.applyModification(t=>lib$3.changeSetInsertNewRow(t,this.display.baseTableOrSimilar)),e}insertDocuments(e){const t=this.rowCountInUpdate;return this.applyModification(n=>lib$3.changeSetInsertDocuments(n,e,this.display.baseTableOrSimilar)),t}beginUpdate(){this.batchChangeSet=this.changeSet}endUpdate(){this.setChangeSet(this.batchChangeSet),this.batchChangeSet=null}revertRowChanges(e){this.requireRowCache(e),this.applyModification(t=>lib$3.revertChangeSetRowChanges(t,this.rowDefinitionsCache[e]))}revertAllChanges(){this.applyModification(e=>lib$3.createChangeSet())}undo(){this.dispatchChangeSet({type:"undo"})}redo(){this.dispatchChangeSet({type:"redo"})}get canUndo(){var e;return(e=this.changeSetState)==null?void 0:e.canUndo}get canRedo(){var e;return(e=this.changeSetState)==null?void 0:e.canRedo}get containsChanges(){return lib$3.changeSetContainsChanges(this.changeSet)}get disableLoadNextPage(){return this.insertedRows.length>0}}function create_fragment$2w(o){let e,t,n;const r=[o[11],{onLoadNextData:o[10]},{errorMessage:o[8]},{isLoading:o[5]},{allRowCount:o[3]||o[7]},{isLoadedAll:o[6]},{loadedTime:o[4]},{grider:o[1]},{display:o[2]}];function a(l){o[21](l)}let s={};for(let l=0;l<r.length;l+=1)s=assign(s,r[l]);return o[0]!==void 0&&(s.selectedCellsPublished=o[0]),e=new DataGridCore({props:s}),o[20](e),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",a)),{c(){create_component(e.$$.fragment)},m(l,u){mount_component(e,l,u),n=!0},p(l,[u]){const d=u&3582?get_spread_update(r,[u&2048&&get_spread_object(l[11]),u&1024&&{onLoadNextData:l[10]},u&256&&{errorMessage:l[8]},u&32&&{isLoading:l[5]},u&136&&{allRowCount:l[3]||l[7]},u&64&&{isLoadedAll:l[6]},u&16&&{loadedTime:l[4]},u&2&&{grider:l[1]},u&4&&{display:l[2]}]):{};!t&&u&1&&(t=!0,d.selectedCellsPublished=l[0],add_flush_callback(()=>t=!1)),e.$set(d)},i(l){n||(transition_in(e.$$.fragment,l),n=!0)},o(l){transition_out(e.$$.fragment,l),n=!1},d(l){o[20](null),destroy_component(e,l)}}}function instance$2u(o,e,t){var n=this&&this.__awaiter||function(D,x,B,K){function U(G){return G instanceof B?G:new B(function(W){W(G)})}return new(B||(B=Promise))(function(G,W){function q(Y){try{z(K.next(Y))}catch(V){W(V)}}function H(Y){try{z(K.throw(Y))}catch(V){W(V)}}function z(Y){Y.done?G(Y.value):U(Y.value).then(q,H)}z((K=K.apply(D,x||[])).next())})},r;let{loadDataPage:a}=e,{dataPageAvailable:s}=e,{loadRowCount:l}=e,{grider:u}=e,{display:d}=e,{masterLoadedTime:f=void 0}=e,{selectedCellsPublished:m}=e,{rowCountLoaded:h=null}=e,{preprocessLoadedRow:p=null}=e,{loadedRows:g=[]}=e,b=!1,v=!1,y=new Date().getTime(),C=null,E=null,A;const k=createRef(!1),T=createRef(null);function $(){t(6,v=!1),A.loadNextDataIfNeeded()}const S=()=>n(void 0,void 0,void 0,function*(){const D=yield l(e);t(7,C=D)});function I(){return n(this,void 0,void 0,function*(){if(b)return;k.set(!1),t(5,b=!0);const D=new Date().getTime();T.set(D);const x=yield a(e,g.length,getIntSettingsValue("dataGrid.pageSize",100,5,1e3));T.get()===D&&(t(5,b=!1),x.errorMessage?t(8,E=x.errorMessage):(C==null&&S(),t(12,g=[...g,...p?x.map(p):x]),t(6,v=x.length===0)),k.get()&&I())})}function R(){!v&&!E&&!u.disableLoadNextPage&&s(e)&&I()}function N(){t(7,C=null),t(5,b=!1),t(12,g=[]),t(6,v=!1),t(4,y=new Date().getTime()),t(8,E=null),k.set(!1)}function M(D){binding_callbacks[D?"unshift":"push"](()=>{A=D,t(9,A)})}function F(D){m=D,t(0,m)}return o.$$set=D=>{t(11,e=assign(assign({},e),exclude_internal_props(D))),"loadDataPage"in D&&t(13,a=D.loadDataPage),"dataPageAvailable"in D&&t(14,s=D.dataPageAvailable),"loadRowCount"in D&&t(15,l=D.loadRowCount),"grider"in D&&t(1,u=D.grider),"display"in D&&t(2,d=D.display),"masterLoadedTime"in D&&t(16,f=D.masterLoadedTime),"selectedCellsPublished"in D&&t(0,m=D.selectedCellsPublished),"rowCountLoaded"in D&&t(3,h=D.rowCountLoaded),"preprocessLoadedRow"in D&&t(17,p=D.preprocessLoadedRow),"loadedRows"in D&&t(12,g=D.loadedRows)},o.$$.update=()=>{o.$$.dirty&524308&&(t(19,r=d==null?void 0:d.cache)===null||r===void 0?void 0:r.refreshTime)>y&&N(),o.$$.dirty&65556&&f&&f>y&&d&&d.reload()},e=exclude_internal_props(e),[m,u,d,h,y,b,v,C,E,A,R,e,g,a,s,l,f,p,$,r,M,F]}class LoadingDataGridCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$2u,create_fragment$2w,safe_not_equal,{loadDataPage:13,dataPageAvailable:14,loadRowCount:15,grider:1,display:2,masterLoadedTime:16,selectedCellsPublished:0,rowCountLoaded:3,preprocessLoadedRow:17,loadedRows:12,resetLoadedAll:18})}get resetLoadedAll(){return this.$$.ctx[18]}}const LoadingDataGridCore$1=Object.freeze(Object.defineProperty({__proto__:null,default:LoadingDataGridCore},Symbol.toStringTag,{value:"Module"}));function create_fragment$2v(o){let e,t,n,r;const a=[o[6],{loadDataPage:loadDataPage$1},{dataPageAvailable:dataPageAvailable$2},{loadRowCount:loadRowCount$2},{frameSelection:!!o[2]},{grider:o[5]},{display:o[1]},{onOpenQuery:o[3]}];function s(d){o[18](d)}function l(d){o[19](d)}let u={};for(let d=0;d<a.length;d+=1)u=assign(u,a[d]);return o[4]!==void 0&&(u.loadedRows=o[4]),o[0]!==void 0&&(u.selectedCellsPublished=o[0]),e=new LoadingDataGridCore({props:u}),binding_callbacks.push(()=>bind(e,"loadedRows",s)),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",l)),{c(){create_component(e.$$.fragment)},m(d,f){mount_component(e,d,f),r=!0},p(d,[f]){const m=f&110?get_spread_update(a,[f&64&&get_spread_object(d[6]),f&0&&{loadDataPage:loadDataPage$1},f&0&&{dataPageAvailable:dataPageAvailable$2},f&0&&{loadRowCount:loadRowCount$2},f&4&&{frameSelection:!!d[2]},f&32&&{grider:d[5]},f&2&&{display:d[1]},f&8&&{onOpenQuery:d[3]}]):{};!t&&f&16&&(t=!0,m.loadedRows=d[4],add_flush_callback(()=>t=!1)),!n&&f&1&&(n=!0,m.selectedCellsPublished=d[0],add_flush_callback(()=>n=!1)),e.$set(m)},i(d){r||(transition_in(e.$$.fragment,d),r=!0)},o(d){transition_out(e.$$.fragment,d),r=!1},d(d){destroy_component(e,d)}}}var __awaiter$8=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const getCurrentEditor$r=()=>getActiveComponent("SqlDataGridCore");registerCommand({id:"sqlDataGrid.openActiveChart",category:"Data grid",name:"Open active chart",testEnabled:()=>getCurrentEditor$r()!=null,onClick:()=>getCurrentEditor$r().openActiveChart()});registerCommand({id:"sqlDataGrid.openQuery",category:"Data grid",name:"Open query",testEnabled:()=>getCurrentEditor$r()!=null,onClick:()=>getCurrentEditor$r().openQuery()});registerCommand({id:"sqlDataGrid.export",category:"Data grid",name:"Export",icon:"icon export",keyText:"CtrlOrCommand+E",testEnabled:()=>getCurrentEditor$r()!=null,onClick:()=>getCurrentEditor$r().exportGrid()});function loadDataPage$1(o,e,t){return __awaiter$8(this,void 0,void 0,function*(){const{display:n,conid:r,database:a}=o,s=n.getPageQuery(e,t),l=yield apiCall("database-connections/sql-select",{conid:r,database:a,select:s});return l.errorMessage?l:l.rows})}function dataPageAvailable$2(o){const{display:e}=o;return!!e.getPageQuery(0,1)}function loadRowCount$2(o){return __awaiter$8(this,void 0,void 0,function*(){const{display:e,conid:t,database:n}=o,r=e.getCountQuery(),a=yield apiCall("database-connections/sql-select",{conid:t,database:n,select:r});return parseInt(a.rows[0].count)})}function instance$2t(o,e,t){var n=this&&this.__awaiter||function(S,I,R,N){function M(F){return F instanceof R?F:new R(function(D){D(F)})}return new(R||(R=Promise))(function(F,D){function x(U){try{K(N.next(U))}catch(G){D(G)}}function B(U){try{K(N.throw(U))}catch(G){D(G)}}function K(U){U.done?F(U.value):M(U.value).then(x,B)}K((N=N.apply(S,I||[])).next())})};let{conid:r}=e,{display:a}=e,{database:s}=e,{schemaName:l}=e,{pureName:u}=e,{config:d}=e,{changeSetState:f}=e,{dispatchChangeSet:m}=e,{macroPreview:h}=e,{macroValues:p}=e,{selectedCellsPublished:g=()=>[]}=e;const b=createActivator("SqlDataGridCore",!1);let v=[],y;function C(){return n(this,void 0,void 0,function*(){const S=yield getConnectionInfo({conid:r}),I={};I.sourceStorageType="query",I.sourceConnectionId=r,I.sourceDatabaseName=s,I.sourceQuery=S.isReadOnly?JSON.stringify(a.getExportQueryJson(),void 0,2):a.getExportQuery(),I.sourceQueryType=S.isReadOnly?"json":"native",I.sourceList=a.baseTableOrSimilar?[a.baseTableOrSimilar.pureName]:[],I[`columns_${u}`]=a.getExportColumnMap(),showModal(ImportExportModal,{initialValues:I})})}function E(){var S,I;openNewTab({title:"Query #",icon:"img sql-file",tabComponent:"QueryTab",props:{schemaName:(S=a.baseTableOrSimilar)===null||S===void 0?void 0:S.schemaName,pureName:(I=a.baseTableOrSimilar)===null||I===void 0?void 0:I.pureName,conid:r,database:s}},{editor:a.getExportQuery()})}function A(){openNewTab({title:"Chart #",icon:"img chart",tabComponent:"ChartTab",props:{conid:r,database:s}},{editor:{config:{chartType:"bar"},sql:a.getExportQuery(S=>{S.orderBy=null})}})}const k=S=>()=>n(void 0,void 0,void 0,function*(){const I=yield getConnectionInfo({conid:r});exportQuickExportFile(u||"Data",{functionName:"queryReader",props:{connection:extractShellConnection(I,s),queryType:I.isReadOnly?"json":"native",query:I.isReadOnly?a.getExportQueryJson():a.getExportQuery()}},S,a.getExportColumnMap())});registerQuickExportHandler(k),registerMenu({command:"sqlDataGrid.openActiveChart",tag:"chart"},{command:"sqlDataGrid.openQuery",tag:"export"},()=>Object.assign(Object.assign({},createQuickExportMenu(k,{command:"sqlDataGrid.export"})),{tag:"export"}));function T(S){v=S,t(4,v)}function $(S){g=S,t(0,g)}return o.$$set=S=>{t(6,e=assign(assign({},e),exclude_internal_props(S))),"conid"in S&&t(7,r=S.conid),"display"in S&&t(1,a=S.display),"database"in S&&t(8,s=S.database),"schemaName"in S&&t(9,l=S.schemaName),"pureName"in S&&t(10,u=S.pureName),"config"in S&&t(11,d=S.config),"changeSetState"in S&&t(12,f=S.changeSetState),"dispatchChangeSet"in S&&t(13,m=S.dispatchChangeSet),"macroPreview"in S&&t(2,h=S.macroPreview),"macroValues"in S&&t(14,p=S.macroValues),"selectedCellsPublished"in S&&t(0,g=S.selectedCellsPublished)},o.$$.update=()=>{o.$$.dirty&28695&&h&&t(5,y=new ChangeSetGrider(v,f,m,a,h,p,g())),o.$$.dirty&12310&&(h||t(5,y=new ChangeSetGrider(v,f,m,a)))},e=exclude_internal_props(e),[g,a,h,E,v,y,e,r,s,l,u,d,f,m,p,b,C,A,T,$]}class SqlDataGridCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$2t,create_fragment$2v,safe_not_equal,{conid:7,display:1,database:8,schemaName:9,pureName:10,config:11,changeSetState:12,dispatchChangeSet:13,macroPreview:2,macroValues:14,selectedCellsPublished:0,activator:15,exportGrid:16,openQuery:3,openActiveChart:17})}get activator(){return this.$$.ctx[15]}get exportGrid(){return this.$$.ctx[16]}get openQuery(){return this.$$.ctx[3]}get openActiveChart(){return this.$$.ctx[17]}}const SqlDataGridCore$1=Object.freeze(Object.defineProperty({__proto__:null,default:SqlDataGridCore},Symbol.toStringTag,{value:"Module"})),FormView_svelte_svelte_type_style_lang="";function get_each_context$n(o,e,t){const n=o.slice();return n[60]=e[t],n[61]=e,n[62]=t,n}function get_each_context_1$5(o,e,t){const n=o.slice();return n[63]=e[t],n[64]=e,n[65]=t,n}function create_else_block$s(o){let e,t;return e=new FontIcon({props:{icon:"icon invisible-box"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$j(o){let e,t;function n(...r){return o[44](o[63],...r)}return e=new FontIcon({props:{icon:plusExpandIcon(o[4].isExpandedColumn(o[63].uniqueName))}}),e.$on("click",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[0]&8208&&(s.icon=plusExpandIcon(o[4].isExpandedColumn(o[63].uniqueName))),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block_2$p(o){let e,t;function n(...r){return o[46](o[63],...r)}return e=new InplaceEditor({props:{fillParent:!0,width:o[20](o[65],o[62]*2+1),inplaceEditorState:o[17],dispatchInsplaceEditor:o[22],cellValue:o[14][o[63].uniqueName],onSetValue:n}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[0]&131072&&(s.inplaceEditorState=o[17]),a[0]&24576&&(s.cellValue=o[14][o[63].uniqueName]),a[0]&8200&&(s.onSetValue=n),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot$W(o){let e,t,n=o[14]&&o[17].cell&&o[65]==o[17].cell[0]&&o[62]*2+1==o[17].cell[1]&&create_if_block_2$p(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[14]&&r[17].cell&&r[65]==r[17].cell[0]&&r[62]*2+1==r[17].cell[1]?n?(n.p(r,a),a[0]&147456&&transition_in(n,1)):(n=create_if_block_2$p(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_each_block_1$5(o){let e,t,n,r,a,s,l,u,d,f,m,h=o[65],p=o[62],g,b,v,y;const C=[create_if_block_3$j,create_else_block$s],E=[];function A(M,F){return M[63].foreignKey?0:1}r=A(o),a=E[r]=C[r](o);const k=[o[63],{headerText:o[63].columnName},{showDataType:!0},{conid:o[0]},{database:o[1]}];let T={};for(let M=0;M<k.length;M+=1)T=assign(T,k[M]);f=new ColumnLabel({props:T});const $=()=>o[45](t,h,p),S=()=>o[45](null,h,p);function I(){return o[47](o[63])}function R(M){o[48](M,o[65],o[62])}let N={maxWidth:o[10]*2/3,minWidth:200,rowIndex:o[65],col:o[63],rowData:o[14],colIndex:o[62]*2+1,isSelected:o[11][0]==o[65]&&o[11][1]==o[62]*2+1,isModifiedCell:o[16].modifiedFields&&o[16].modifiedFields.has(o[63].uniqueName),allowHintField:!(o[16].modifiedFields&&o[16].modifiedFields.has(o[63].uniqueName)),onSetFormView:o[25],showSlot:!o[14]||o[17].cell&&o[65]==o[17].cell[0]&&o[62]*2+1==o[17].cell[1],isCurrentCell:o[11][0]==o[65]&&o[11][1]==o[62]*2+1,onDictionaryLookup:I,$$slots:{default:[create_default_slot$W]},$$scope:{ctx:o}};return o[12][`${o[65]},${o[62]*2+1}`]!==void 0&&(N.domCell=o[12][`${o[65]},${o[62]*2+1}`]),b=new DataGridCell({props:N}),binding_callbacks.push(()=>bind(b,"domCell",R)),{c(){e=element("tr"),t=element("td"),n=element("div"),a.c(),s=space(),l=element("span"),d=space(),create_component(f.$$.fragment),g=space(),create_component(b.$$.fragment),attr(l,"style",u=`margin-left: ${(o[63].uniquePath.length-1)*20}px`),attr(n,"class","header-cell-inner svelte-dxjwf3"),attr(t,"class","header-cell svelte-dxjwf3"),attr(t,"data-row",o[65]),attr(t,"data-col",o[62]*2),attr(t,"style",m=o[9]>1?`height: ${o[9]}px`:void 0),toggle_class(t,"columnFiltered",o[4].config.formColumnFilterText&&lib.filterName(o[4].config.formColumnFilterText,o[63].columnName)),toggle_class(t,"isSelected",o[11][0]==o[65]&&o[11][1]==o[62]*2),attr(e,"class","svelte-dxjwf3")},m(M,F){insert(M,e,F),append(e,t),append(t,n),E[r].m(n,null),append(n,s),append(n,l),append(n,d),mount_component(f,n,null),$(),append(e,g),mount_component(b,e,null),y=!0},p(M,F){o=M;let D=r;r=A(o),r===D?E[r].p(o,F):(group_outros(),transition_out(E[D],1,1,()=>{E[D]=null}),check_outros(),a=E[r],a?a.p(o,F):(a=E[r]=C[r](o),a.c()),transition_in(a,1),a.m(n,s)),(!y||F[0]&8192&&u!==(u=`margin-left: ${(o[63].uniquePath.length-1)*20}px`))&&attr(l,"style",u);const x=F[0]&8195?get_spread_update(k,[F[0]&8192&&get_spread_object(o[63]),F[0]&8192&&{headerText:o[63].columnName},k[2],F[0]&1&&{conid:o[0]},F[0]&2&&{database:o[1]}]):{};f.$set(x),(!y||F[0]&512&&m!==(m=o[9]>1?`height: ${o[9]}px`:void 0))&&attr(t,"style",m),(h!==o[65]||p!==o[62])&&(S(),h=o[65],p=o[62],$()),(!y||F[0]&8208)&&toggle_class(t,"columnFiltered",o[4].config.formColumnFilterText&&lib.filterName(o[4].config.formColumnFilterText,o[63].columnName)),(!y||F[0]&2048)&&toggle_class(t,"isSelected",o[11][0]==o[65]&&o[11][1]==o[62]*2);const B={};F[0]&1024&&(B.maxWidth=o[10]*2/3),F[0]&8192&&(B.col=o[63]),F[0]&16384&&(B.rowData=o[14]),F[0]&2048&&(B.isSelected=o[11][0]==o[65]&&o[11][1]==o[62]*2+1),F[0]&73728&&(B.isModifiedCell=o[16].modifiedFields&&o[16].modifiedFields.has(o[63].uniqueName)),F[0]&73728&&(B.allowHintField=!(o[16].modifiedFields&&o[16].modifiedFields.has(o[63].uniqueName))),F[0]&147456&&(B.showSlot=!o[14]||o[17].cell&&o[65]==o[17].cell[0]&&o[62]*2+1==o[17].cell[1]),F[0]&2048&&(B.isCurrentCell=o[11][0]==o[65]&&o[11][1]==o[62]*2+1),F[0]&8192&&(B.onDictionaryLookup=I),F[0]&155656|F[2]&16&&(B.$$scope={dirty:F,ctx:o}),!v&&F[0]&4096&&(v=!0,B.domCell=o[12][`${o[65]},${o[62]*2+1}`],add_flush_callback(()=>v=!1)),b.$set(B)},i(M){y||(transition_in(a),transition_in(f.$$.fragment,M),transition_in(b.$$.fragment,M),y=!0)},o(M){transition_out(a),transition_out(f.$$.fragment,M),transition_out(b.$$.fragment,M),y=!1},d(M){M&&detach(e),E[r].d(),destroy_component(f),S(),destroy_component(b)}}}function create_each_block$n(o){let e,t,n,r,a=ensure_array_like(o[60]),s=[];for(let u=0;u<a.length;u+=1)s[u]=create_each_block_1$5(get_each_context_1$5(o,a,u));const l=u=>transition_out(s[u],1,1,()=>{s[u]=null});return{c(){e=element("table");for(let u=0;u<s.length;u+=1)s[u].c();attr(e,"class","svelte-dxjwf3")},m(u,d){insert(u,e,d);for(let f=0;f<s.length;f+=1)s[f]&&s[f].m(e,null);t=!0,n||(r=listen(e,"mousedown",o[19]),n=!0)},p(u,d){if(d[0]&106135067){a=ensure_array_like(u[60]);let f;for(f=0;f<a.length;f+=1){const m=get_each_context_1$5(u,a,f);s[f]?(s[f].p(m,d),transition_in(s[f],1)):(s[f]=create_each_block_1$5(m),s[f].c(),transition_in(s[f],1),s[f].m(e,null))}for(group_outros(),f=a.length;f<s.length;f+=1)l(f);check_outros()}},i(u){if(!t){for(let d=0;d<a.length;d+=1)transition_in(s[d]);t=!0}},o(u){s=s.filter(Boolean);for(let d=0;d<s.length;d+=1)transition_out(s[d]);t=!1},d(u){u&&detach(e),destroy_each(s,u),n=!1,r()}}}function create_if_block_1$C(o){let e,t;return{c(){e=element("div"),t=text(o[15]),attr(e,"class","row-count-label svelte-dxjwf3")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r[0]&32768&&set_data(t,n[15])},d(n){n&&detach(e)}}}function create_if_block$12(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2u(o){let e,t,n,r,a,s,l,u,d,f,m,h=ensure_array_like(o[13]),p=[];for(let y=0;y<h.length;y+=1)p[y]=create_each_block$n(get_each_context$n(o,h,y));const g=y=>transition_out(p[y],1,1,()=>{p[y]=null});let b=o[15]&&create_if_block_1$C(o),v=o[2]&&create_if_block$12();return{c(){e=element("div"),t=element("div");for(let y=0;y<p.length;y+=1)p[y].c();n=space(),r=element("input"),s=space(),b&&b.c(),l=space(),v&&v.c(),u=empty(),attr(r,"type","text"),attr(r,"class","focus-field svelte-dxjwf3"),attr(t,"class","wrapper svelte-dxjwf3"),add_render_callback(()=>o[51].call(t)),attr(e,"class","outer svelte-dxjwf3")},m(y,C){insert(y,e,C),append(e,t);for(let E=0;E<p.length;E+=1)p[E]&&p[E].m(t,null);append(t,n),append(t,r),o[49](r),a=add_iframe_resize_listener(t,o[51].bind(t)),append(e,s),b&&b.m(e,null),insert(y,l,C),v&&v.m(y,C),insert(y,u,C),d=!0,f||(m=[listen(r,"focus",o[50]),listen(r,"keydown",o[24]),listen(r,"copy",o[5]),action_destroyer(contextMenu.call(null,t,o[23]))],f=!0)},p(y,C){if(C[0]&106659355){h=ensure_array_like(y[13]);let E;for(E=0;E<h.length;E+=1){const A=get_each_context$n(y,h,E);p[E]?(p[E].p(A,C),transition_in(p[E],1)):(p[E]=create_each_block$n(A),p[E].c(),transition_in(p[E],1),p[E].m(t,n))}for(group_outros(),E=h.length;E<p.length;E+=1)g(E);check_outros()}y[15]?b?b.p(y,C):(b=create_if_block_1$C(y),b.c(),b.m(e,null)):b&&(b.d(1),b=null),y[2]?v?C[0]&4&&transition_in(v,1):(v=create_if_block$12(),v.c(),transition_in(v,1),v.m(u.parentNode,u)):v&&(group_outros(),transition_out(v,1,1,()=>{v=null}),check_outros())},i(y){if(!d){for(let C=0;C<h.length;C+=1)transition_in(p[C]);transition_in(v),d=!0}},o(y){p=p.filter(Boolean);for(let C=0;C<p.length;C+=1)transition_out(p[C]);transition_out(v),d=!1},d(y){y&&(detach(e),detach(l),detach(u)),destroy_each(p,y),o[49](null),a(),b&&b.d(),v&&v.d(y),f=!1,run_all(m)}}}globalThis&&globalThis.__awaiter;const getCurrentDataForm=()=>getActiveComponent("FormView");registerCommand({id:"dataForm.refresh",category:"Data form",name:"Refresh",keyText:"F5 | CtrlOrCommand+R",toolbar:!0,isRelatedToTab:!0,icon:"icon reload",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().refresh()});registerCommand({id:"dataForm.copyToClipboard",category:"Data form",name:"Copy to clipboard",keyText:"CtrlOrCommand+C",disableHandleKeyText:"CtrlOrCommand+C",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().copyToClipboard()});registerCommand({id:"dataForm.revertRowChanges",category:"Data form",name:"Revert row changes",keyText:"CtrlOrCommand+U",testEnabled:()=>{var o,e;return(e=(o=getCurrentDataForm())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.containsChanges},onClick:()=>getCurrentDataForm().getGrider().revertRowChanges(0)});registerCommand({id:"dataForm.setNull",category:"Data form",name:"Set NULL",keyText:"CtrlOrCommand+0",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().setFixedValue(null)});registerCommand({id:"dataForm.undo",category:"Data form",name:"Undo",group:"undo",icon:"icon undo",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o,e;return(e=(o=getCurrentDataForm())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.canUndo},onClick:()=>getCurrentDataForm().getGrider().undo()});registerCommand({id:"dataForm.redo",category:"Data form",name:"Redo",group:"redo",icon:"icon redo",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o,e;return(e=(o=getCurrentDataForm())===null||o===void 0?void 0:o.getGrider())===null||e===void 0?void 0:e.canRedo},onClick:()=>getCurrentDataForm().getGrider().redo()});registerCommand({id:"dataForm.reconnect",category:"Data grid",name:"Reconnect",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().reconnect()});registerCommand({id:"dataForm.filterSelected",category:"Data form",name:"Filter this value",keyText:"CtrlOrCommand+Shift+F",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().filterSelectedValue()});registerCommand({id:"dataForm.addToFilter",category:"Data form",name:"Add to filter",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().addToFilter()});registerCommand({id:"dataForm.goToFirst",category:"Data form",name:"First",keyText:"CtrlOrCommand+Home",toolbar:!0,isRelatedToTab:!0,icon:"icon arrow-begin",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().navigate("begin")});registerCommand({id:"dataForm.goToPrevious",category:"Data form",name:"Previous",keyText:"CtrlOrCommand+ArrowUp",toolbar:!0,isRelatedToTab:!0,icon:"icon arrow-left",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().navigate("previous")});registerCommand({id:"dataForm.goToNext",category:"Data form",name:"Next",keyText:"CtrlOrCommand+ArrowDown",toolbar:!0,isRelatedToTab:!0,icon:"icon arrow-right",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().navigate("next")});registerCommand({id:"dataForm.goToLast",category:"Data form",name:"Last",keyText:"CtrlOrCommand+End",toolbar:!0,isRelatedToTab:!0,icon:"icon arrow-end",testEnabled:()=>getCurrentDataForm()!=null,onClick:()=>getCurrentDataForm().navigate("end")});function isDataCell(o){return o[1]%2==1}function instance$2s(o,e,t){let n,r,a,s,l,u,d,f,m;component_subscribe(o,dataGridRowHeight,re=>t(43,m=re));var h=this&&this.__awaiter||function(re,ge,Be,Ze){function Pe(Ee){return Ee instanceof Be?Ee:new Be(function(Ce){Ce(Ee)})}return new(Be||(Be=Promise))(function(Ee,Ce){function je(ut){try{wt(Ze.next(ut))}catch(Ct){Ce(Ct)}}function pt(ut){try{wt(Ze.throw(ut))}catch(Ct){Ce(Ct)}}function wt(ut){ut.done?Ee(ut.value):Pe(ut.value).then(je,pt)}wt((Ze=Ze.apply(re,ge||[])).next())})};let{conid:p}=e,{database:g}=e,{config:b}=e,{setConfig:v}=e,{focusOnVisible:y=!1}=e,{allRowCount:C}=e,{rowCountBefore:E}=e,{isLoading:A}=e,{grider:k}=e,{display:T}=e,{rowCountNotAvailable:$}=e,{onNavigate:S}=e,I=1,R=1,N=[0,0];const M=getContext("tabVisible");component_subscribe(o,M,re=>t(42,f=re));const F={};let D;function x(re){return $?`Row: ${((T.config.formViewRecordNumber||0)+1).toLocaleString()} / ???`:r==null?re!=null?`Out of bounds: ${((T.config.formViewRecordNumber||0)+1).toLocaleString()} / ${re.toLocaleString()}`:"No data":re==null||T==null?"Loading row count...":`Row: ${((T.config.formViewRecordNumber||0)+1).toLocaleString()} / ${re.toLocaleString()}`}function B(){return k}function K(re){S&&S(re)}function U(re){isDataCell(N)&&Q(N,re)}function G(){const re=J(N);if(!re)return;const ge=N[1]%2==1?extractRowCopiedValue(r,re.uniqueName):re.columnName;copyTextToClipboard(ge)}function W(){return h(this,void 0,void 0,function*(){yield apiCall("database-connections/refresh",{conid:p,database:g}),T.reload()})}function q(){return h(this,void 0,void 0,function*(){T.reload()})}function H(){const re=J(N);if(!re||!r)return;const ge=r[re.uniqueName],Be=lib$1.getFilterValueExpression(ge,re.dataType);Be&&(v(Ze=>Object.assign(Object.assign({},Ze),{formViewRecordNumber:0,filters:Object.assign(Object.assign({},Ze.filters),{[re.uniqueName]:Be}),addedColumns:Ze.addedColumns.includes(re.uniqueName)?Ze.addedColumns:[...Ze.addedColumns,re.uniqueName]})),T.reload())}function z(){const re=J(N);re&&v(ge=>Object.assign(Object.assign({},ge),{formFilterColumns:[...ge.formFilterColumns||[],re.uniqueName]}))}const Y=createActivator("FormView",!1),V=re=>{if(re.target.closest(".buttonLike")||re.target.closest(".resizeHandleControl")||re.target.closest("input")||re.target.closest(".showFormButtonMarker"))return;re.preventDefault(),D&&D.focus(),re.preventDefault();const ge=cellFromEvent(re);isDataCell(ge)&&!_.isEqual(ge,d.cell)&&_.isEqual(ge,N)?r&&(me(ge)||ce({type:"show",cell:ge,selectAll:!0})):_.isEqual(ge,d.cell)||ce({type:"close"}),t(11,N=ge)};function J(re){const ge=l[Math.floor(re[1]/2)];return ge?ge[re[0]]:void 0}function Q(re,ge){const Be=J(re);Be&&k.setCellValue(0,Be.uniqueName,ge)}const X=(re,ge)=>{const Be=F[`${re},${ge}`];return Be?Be.getBoundingClientRect().width:100},[ie,ce]=createReducer((re,ge)=>{switch(ge.type){case"show":{if(!k.editable)return{};const Be=J(ge.cell);return!Be||Be.uniquePath.length>1?re:{cell:ge.cell,text:ge.text,selectAll:ge.selectAll}}case"close":{const[Be,Ze]=N||[];return D&&D.focus(),ge.mode=="enter"&&Be&&setTimeout(()=>he(Be+1,Ze),0),{}}}return{}},{});component_subscribe(o,ie,re=>t(17,d=re)),registerMenu({command:"dataForm.refresh"},{placeTag:"switch"},{command:"dataForm.copyToClipboard"},{divider:!0},{command:"dataForm.filterSelected"},{command:"dataForm.addToFilter"},{divider:!0},{placeTag:"save"},{command:"dataForm.revertRowChanges"},{command:"dataForm.setNull"},{divider:!0},{command:"dataForm.undo"},{command:"dataForm.redo"},{divider:!0},{command:"dataForm.goToFirst"},{command:"dataForm.goToPrevious"},{command:"dataForm.goToNext"},{command:"dataForm.goToLast"});const de=getContextMenu();function se(re){if(!d.cell){if(!re.ctrlKey&&!re.metaKey&&!re.altKey&&(re.keyCode>=keycodes.a&&re.keyCode<=keycodes.z||re.keyCode>=keycodes.n0&&re.keyCode<=keycodes.n9||re.keyCode==keycodes.dash)&&(N[1]%2==0?v(ge=>Object.assign(Object.assign({},ge),{formColumnFilterText:(ge.formColumnFilterText||"")+re.key})):(re.preventDefault(),r&&ce({type:"show",text:re.key,cell:N}))),re.keyCode==keycodes.escape&&v(ge=>Object.assign(Object.assign({},ge),{formColumnFilterText:""})),re.keyCode==keycodes.numPadAdd){const ge=J(N);ge.foreignKey&&(T.toggleExpandedColumn(ge.uniqueName,!0),T.reload())}if(re.keyCode==keycodes.numPadSub){const ge=J(N);ge.foreignKey&&(T.toggleExpandedColumn(ge.uniqueName,!1),T.reload())}(re.keyCode==keycodes.f2||re.keyCode==keycodes.enter)&&r&&(me(N)||ce({type:"show",cell:N,selectAll:!0})),pe(re)}}function me(re){if(!re)return!1;const ge=J(re),Be=r[ge.uniqueName];return shouldOpenMultilineDialog(Be)?(showModal(EditCellDataModal,{value:Be,onSave:Ze=>k.setCellValue(0,ge.uniqueName,Ze)}),!0):!1}const ue=re=>{const ge=F[`${re[0]},${re[1]}`];ge&&ge.scrollIntoView()},he=(re,ge)=>{re<0&&(re=0),ge<0&&(ge=0),ge>=l.length*2&&(ge=l.length*2-1);const Be=l[Math.floor(ge/2)];Be&&re>=Be.length&&(re=Be.length-1),t(11,N=[re,ge]),ue(N)},pe=re=>{const ge=(Be,Ze,Pe,Ee)=>{let Ce=s*Math.floor(N[1]/2)+N[0];for(Ce=Be(Ce);Ze(Ce)&&!lib.filterName(T.config.formColumnFilterText,T.formColumns[Ce].columnName);)Ce=Be(Ce);if(!Ze(Ce))for(Ce=Pe;Ze(Ce)&&!lib.filterName(T.config.formColumnFilterText,T.formColumns[Ce].columnName);)Ce=Be(Ce);return Ze(Ce)||(Ce=Ee),he(Ce%T.formColumns.length,Math.floor(Ce/s)*2)};if(isCtrlOrCommandKey(re))switch(re.keyCode){case keycodes.leftArrow:return he(N[0],0);case keycodes.rightArrow:return he(N[0],l.length*2-1)}switch(re.keyCode){case keycodes.leftArrow:return he(N[0],N[1]-1);case keycodes.rightArrow:return he(N[0],N[1]+1);case keycodes.upArrow:return N[1]%2==0&&T.config.formColumnFilterText?ge(Be=>Be-1,Be=>Be>=0,T.formColumns.length-1,0):he(N[0]-1,N[1]);case keycodes.downArrow:return N[1]%2==0&&T.config.formColumnFilterText?ge(Be=>Be+1,Be=>Be<T.formColumns.length,0,T.formColumns.length-1):he(N[0]+1,N[1]);case keycodes.pageUp:return he(0,N[1]);case keycodes.pageDown:return he(s-1,N[1]);case keycodes.home:return he(0,0);case keycodes.end:return he(s-1,l.length*2-1)}};function Oe(re,ge){openReferenceForm(re,ge,p,g)}function qe(re){showModal(DictionaryLookupModal,{conid:p,database:g,driver:T==null?void 0:T.driver,pureName:re.foreignKey.refTableName,schemaName:re.foreignKey.refSchemaName,onConfirm:ge=>k.setCellValue(0,re.uniqueName,ge)})}const et=(re,ge)=>{ge.stopPropagation(),T.toggleExpandedColumn(re.uniqueName),T.reload()};function Ue(re,ge,Be){binding_callbacks[re?"unshift":"push"](()=>{F[`${ge},${Be*2}`]=re,t(12,F)})}const fe=(re,ge)=>{k.setCellValue(0,re.uniqueName,ge)},Ie=re=>qe(re);function We(re,ge,Be){o.$$.not_equal(F[`${ge},${Be*2+1}`],re)&&(F[`${ge},${Be*2+1}`]=re,t(12,F))}function $e(re){binding_callbacks[re?"unshift":"push"](()=>{D=re,t(8,D)})}const Le=()=>{Y.activate(),invalidateCommands()};function ze(){I=this.clientHeight,R=this.clientWidth,t(7,I),t(10,R)}return o.$$set=re=>{"conid"in re&&t(0,p=re.conid),"database"in re&&t(1,g=re.database),"config"in re&&t(27,b=re.config),"setConfig"in re&&t(28,v=re.setConfig),"focusOnVisible"in re&&t(29,y=re.focusOnVisible),"allRowCount"in re&&t(30,C=re.allRowCount),"rowCountBefore"in re&&t(31,E=re.rowCountBefore),"isLoading"in re&&t(2,A=re.isLoading),"grider"in re&&t(3,k=re.grider),"display"in re&&t(4,T=re.display),"rowCountNotAvailable"in re&&t(32,$=re.rowCountNotAvailable),"onNavigate"in re&&t(33,S=re.onNavigate)},o.$$.update=()=>{o.$$.dirty[1]&4096&&t(9,n=m),o.$$.dirty[0]&536871168|o.$$.dirty[1]&2048&&f&&D&&y&&D.focus(),o.$$.dirty[0]&8&&t(14,r=k==null?void 0:k.getRowData(0)),o.$$.dirty[0]&8&&t(16,a=k==null?void 0:k.getRowStatus(0)),o.$$.dirty[0]&640&&t(41,s=Math.floor((I-22)/(n+2))),o.$$.dirty[0]&16|o.$$.dirty[1]&1024&&t(13,l=_.chunk((T==null?void 0:T.formColumns)||[],s)),o.$$.dirty[0]&1073741840&&t(15,u=x(C))},[p,g,A,k,T,G,Y,I,D,n,R,N,F,l,r,u,a,d,M,V,X,ie,ce,de,se,Oe,qe,b,v,y,C,E,$,S,B,K,U,W,q,H,z,s,f,m,et,Ue,fe,Ie,We,$e,Le,ze]}class FormView extends SvelteComponent{constructor(e){super(),init(this,e,instance$2s,create_fragment$2u,safe_not_equal,{conid:0,database:1,config:27,setConfig:28,focusOnVisible:29,allRowCount:30,rowCountBefore:31,isLoading:2,grider:3,display:4,rowCountNotAvailable:32,onNavigate:33,getGrider:34,navigate:35,setFixedValue:36,copyToClipboard:5,reconnect:37,refresh:38,filterSelectedValue:39,addToFilter:40,activator:6},null,[-1,-1,-1])}get getGrider(){return this.$$.ctx[34]}get navigate(){return this.$$.ctx[35]}get setFixedValue(){return this.$$.ctx[36]}get copyToClipboard(){return this.$$.ctx[5]}get reconnect(){return this.$$.ctx[37]}get refresh(){return this.$$.ctx[38]}get filterSelectedValue(){return this.$$.ctx[39]}get addToFilter(){return this.$$.ctx[40]}get activator(){return this.$$.ctx[6]}}function create_fragment$2t(o){let e,t;const n=[o[4],{grider:o[2]},{isLoading:o[0]},{allRowCount:o[1]},{onNavigate:o[3]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormView({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&31?get_spread_update(n,[s&16&&get_spread_object(a[4]),s&4&&{grider:a[2]},s&1&&{isLoading:a[0]},s&2&&{allRowCount:a[1]},s&8&&{onNavigate:a[3]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$2r(o,e,t){let n;var r=this&&this.__awaiter||function(R,N,M,F){function D(x){return x instanceof M?x:new M(function(B){B(x)})}return new(M||(M=Promise))(function(x,B){function K(W){try{G(F.next(W))}catch(q){B(q)}}function U(W){try{G(F.throw(W))}catch(q){B(q)}}function G(W){W.done?x(W.value):D(W.value).then(K,U)}G((F=F.apply(R,N||[])).next())})},a;let{changeSetState:s}=e,{dispatchChangeSet:l}=e,{masterLoadedTime:u}=e,{conid:d}=e,{database:f}=e,{onReferenceSourceChanged:m}=e,{display:h}=e,{loadRowFunc:p}=e,{loadRowCountFunc:g}=e,b=!1,v=!1,y=null,C=!1,E=!1,A=new Date().getTime(),k=null;const T=()=>r(void 0,void 0,void 0,function*(){if(b)return;t(0,b=!0);const R=yield p(h.config.formViewRecordNumber||0);t(0,b=!1),t(16,v=!0),t(17,y=R),t(20,A=new Date().getTime())}),$=()=>r(void 0,void 0,void 0,function*(){t(18,C=!0),t(1,k=yield g()),t(19,E=!0),t(18,C=!1)}),S=R=>r(void 0,void 0,void 0,function*(){h.formViewNavigate(R,k)});function I(){t(0,b=!1),t(16,v=!1),t(18,C=!1),t(19,E=!1),t(17,y=null),t(20,A=new Date().getTime()),t(1,k=null)}return o.$$set=R=>{t(4,e=assign(assign({},e),exclude_internal_props(R))),"changeSetState"in R&&t(5,s=R.changeSetState),"dispatchChangeSet"in R&&t(6,l=R.dispatchChangeSet),"masterLoadedTime"in R&&t(7,u=R.masterLoadedTime),"conid"in R&&t(8,d=R.conid),"database"in R&&t(9,f=R.database),"onReferenceSourceChanged"in R&&t(10,m=R.onReferenceSourceChanged),"display"in R&&t(11,h=R.display),"loadRowFunc"in R&&t(12,p=R.loadRowFunc),"loadRowCountFunc"in R&&t(13,g=R.loadRowCountFunc)},o.$$.update=()=>{o.$$.dirty&1050752&&u&&u>A&&h.reload(),o.$$.dirty&1083392&&(t(15,a=h==null?void 0:h.cache)===null||a===void 0?void 0:a.refreshTime)>A&&I(),o.$$.dirty&854017&&h!=null&&h.isLoadedCorrectly&&(!v&&!b&&T(),v&&!C&&!E&&$()),o.$$.dirty&133216&&t(2,n=new ChangeSetGrider(y?[y]:[],s,l,h)),o.$$.dirty&1180672&&m&&y&&m([y],A)},e=exclude_internal_props(e),[b,k,n,S,e,s,l,u,d,f,m,h,p,g,I,a,v,y,C,E,A]}class LoadingFormView extends SvelteComponent{constructor(e){super(),init(this,e,instance$2r,create_fragment$2t,safe_not_equal,{changeSetState:5,dispatchChangeSet:6,masterLoadedTime:7,conid:8,database:9,onReferenceSourceChanged:10,display:11,loadRowFunc:12,loadRowCountFunc:13,reload:14})}get reload(){return this.$$.ctx[14]}}function create_fragment$2s(o){let e,t;const n=[o[2],{loadRowFunc:o[0]},{loadRowCountFunc:o[1]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new LoadingFormView({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&7?get_spread_update(n,[s&4&&get_spread_object(a[2]),s&1&&{loadRowFunc:a[0]},s&2&&{loadRowCountFunc:a[1]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}var __awaiter$7=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};function loadRow$1(o,e){return __awaiter$7(this,void 0,void 0,function*(){const{conid:t,database:n}=o;if(!e)return null;const r=yield apiCall("database-connections/sql-select",{conid:t,database:n,select:e});return r.errorMessage?r:r.rows[0]})}function instance$2q(o,e,t){var n=this&&this.__awaiter||function(l,u,d,f){function m(h){return h instanceof d?h:new d(function(p){p(h)})}return new(d||(d=Promise))(function(h,p){function g(y){try{v(f.next(y))}catch(C){p(C)}}function b(y){try{v(f.throw(y))}catch(C){p(C)}}function v(y){y.done?h(y.value):m(y.value).then(g,b)}v((f=f.apply(l,u||[])).next())})};let{display:r}=e;function a(){return n(this,void 0,void 0,function*(){return yield loadRow$1(e,r.getPageQuery(r.config.formViewRecordNumber||0,1))})}function s(){return n(this,void 0,void 0,function*(){const l=yield loadRow$1(e,r.getCountQuery());return l?parseInt(l.count):null})}return o.$$set=l=>{t(2,e=assign(assign({},e),exclude_internal_props(l))),"display"in l&&t(3,r=l.display)},e=exclude_internal_props(e),[a,s,e,r]}class SqlFormView extends SvelteComponent{constructor(e){super(),init(this,e,instance$2q,create_fragment$2s,safe_not_equal,{display:3})}}const TableDataGrid_svelte_svelte_type_style_lang="";function create__1_slot$k(o){let e,t;const n=[o[16],{gridCoreComponent:SqlDataGridCore},{formViewComponent:SqlFormView},{display:o[5]},{showReferences:!0},{showMacros:!0},{hasMultiColumnFilter:!0},{onRunMacro:o[15]},{macroCondition:func$c},{onReferenceSourceChanged:o[4]?o[13]:null},{multipleGridsOnTab:o[0]||!!o[4]},{allowDefineVirtualReferences:!0},{onReferenceClick:o[34]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new DataGrid({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&110641?get_spread_update(n,[s[0]&65536&&get_spread_object(a[16]),s&0&&{gridCoreComponent:SqlDataGridCore},s&0&&{formViewComponent:SqlFormView},s[0]&32&&{display:a[5]},n[4],n[5],n[6],s[0]&32768&&{onRunMacro:a[15]},n[8],s[0]&8208&&{onReferenceSourceChanged:a[4]?a[13]:null},s[0]&17&&{multipleGridsOnTab:a[0]||!!a[4]},n[11],s[0]&4112&&{onReferenceClick:a[34]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block$11(o){let e,t,n,r=`${o[4].schemaName}.${o[4].pureName}`,a;e=new ReferenceHeader({props:{reference:o[4]}}),e.$on("close",o[14]);let s=create_key_block$8(o);return{c(){create_component(e.$$.fragment),t=space(),n=element("div"),s.c(),attr(n,"class","detail svelte-1tqfmha")},m(l,u){mount_component(e,l,u),insert(l,t,u),insert(l,n,u),s.m(n,null),a=!0},p(l,u){const d={};u[0]&16&&(d.reference=l[4]),e.$set(d),u[0]&16&&safe_not_equal(r,r=`${l[4].schemaName}.${l[4].pureName}`)?(group_outros(),transition_out(s,1,1,noop$1),check_outros(),s=create_key_block$8(l),s.c(),transition_in(s,1),s.m(n,null)):s.p(l,u)},i(l){a||(transition_in(e.$$.fragment,l),transition_in(s),a=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(s),a=!1},d(l){l&&(detach(t),detach(n)),destroy_component(e,l),s.d(l)}}}function create_key_block$8(o){let e,t;const n=[o[16],{pureName:o[4].pureName},{schemaName:o[4].schemaName},{config:o[3]},{setConfig:o[12]},{cache:o[10]},{setCache:o[11].update},{masterLoadedTime:o[2]},{isDetailView:!0},{multipleGridsOnTab:!0}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new TableDataGrid({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&72732?get_spread_update(n,[s[0]&65536&&get_spread_object(a[16]),s[0]&16&&{pureName:a[4].pureName},s[0]&16&&{schemaName:a[4].schemaName},s[0]&8&&{config:a[3]},s[0]&4096&&{setConfig:a[12]},s[0]&1024&&{cache:a[10]},s[0]&2048&&{setCache:a[11].update},s[0]&4&&{masterLoadedTime:a[2]},n[8],n[9]]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__2_slot$j(o){let e,t,n=o[4]&&create_if_block$11(o);return{c(){e=element("div"),n&&n.c(),attr(e,"slot","2"),attr(e,"class","reference-container svelte-1tqfmha")},m(r,a){insert(r,e,a),n&&n.m(e,null),t=!0},p(r,a){r[4]?n?(n.p(r,a),a[0]&16&&transition_in(n,1)):(n=create_if_block$11(r),n.c(),transition_in(n,1),n.m(e,null)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d()}}}function create_fragment$2r(o){let e,t;return e=new VerticalSplitter({props:{isSplitter:!!o[4],$$slots:{2:[create__2_slot$j],1:[create__1_slot$k]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16&&(a.isSplitter=!!n[4]),r[0]&66621|r[1]&16&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$c=o=>o.type=="transformValue";function instance$2p(o,e,t){let n,r,a,s,l,u,d,f,m,h,p=noop$1,g=()=>(p(),p=subscribe(n,de=>t(28,h=de)),n),b,v=noop$1,y=()=>(v(),v=subscribe(u,de=>t(29,b=de)),u),C,E=noop$1,A=()=>(E(),E=subscribe(s,de=>t(30,C=de)),s),k,T=noop$1,$=()=>(T(),T=subscribe(a,de=>t(31,k=de)),a),S,I,R=noop$1,N=()=>(R(),R=subscribe(r,de=>t(33,I=de)),r),M;component_subscribe(o,extensions,de=>t(32,S=de)),o.$$.on_destroy.push(()=>p()),o.$$.on_destroy.push(()=>v()),o.$$.on_destroy.push(()=>E()),o.$$.on_destroy.push(()=>T()),o.$$.on_destroy.push(()=>R());let{conid:F}=e,{database:D}=e,{schemaName:x}=e,{pureName:B}=e,{changeSetState:K}=e,{dispatchChangeSet:U}=e,{config:G}=e,{setConfig:W}=e,{cache:q}=e,{setCache:H}=e,{multipleGridsOnTab:z=!1}=e,Y=0;const V=writable(lib$3.createGridCache());component_subscribe(o,V,de=>t(10,M=de));const J=(de,se=void 0)=>{_.isFunction(de)?W(me=>Object.assign(Object.assign({},me),{childConfig:de(me.childConfig)})):W(me=>Object.assign(Object.assign({},me),{childConfig:de,reference:se===void 0?me.reference:se}))},Q=(de,se)=>{if(t(2,Y=se),!f)return;const me=d&&d.isGrouped?G.filters:m.filters,ue=Object.assign(Object.assign({},me),_.fromPairs(f.columns.map(he=>[he.refName,de.map(pe=>lib$1.getFilterValueExpression(pe[he.baseName],he.dataType)).join(", ")])));stableStringify(ue)!=stableStringify(m.filters)&&(J(he=>Object.assign(Object.assign({},he),{filters:ue})),V.update(he=>Object.assign(Object.assign({},he),{refreshTime:new Date().getTime()})))},X=()=>{d.clearGrouping(),J(null,null)};function ie(de,se,me){const ue=lib$3.runMacroOnChangeSet(de,se,me,K==null?void 0:K.value,d,!1);ue&&U({type:"set",value:ue})}const ce=de=>{de&&de.referenceId&&f&&f.referenceId==de.referenceId||J(lib$3.createGridConfig(),de)};return o.$$set=de=>{t(16,e=assign(assign({},e),exclude_internal_props(de))),"conid"in de&&t(17,F=de.conid),"database"in de&&t(18,D=de.database),"schemaName"in de&&t(19,x=de.schemaName),"pureName"in de&&t(20,B=de.pureName),"changeSetState"in de&&t(21,K=de.changeSetState),"dispatchChangeSet"in de&&t(22,U=de.dispatchChangeSet),"config"in de&&t(23,G=de.config),"setConfig"in de&&t(24,W=de.setConfig),"cache"in de&&t(25,q=de.cache),"setCache"in de&&t(26,H=de.setCache),"multipleGridsOnTab"in de&&t(0,z=de.multipleGridsOnTab)},o.$$.update=()=>{o.$$.dirty[0]&131072&&g(t(1,n=useConnectionInfo({conid:F}))),o.$$.dirty[0]&393216&&N(t(9,r=useDatabaseInfo({conid:F,database:D}))),o.$$.dirty[0]&393216&&$(t(8,a=useDatabaseServerVersion({conid:F,database:D}))),o.$$.dirty[0]&1073741824|o.$$.dirty[1]&4&&t(27,l=lib.extendDatabaseInfoFromApps(I,C)),o.$$.dirty[0]&2141061122|o.$$.dirty[1]&3&&t(5,d=n&&k?new lib$3.TableGridDisplay({schemaName:x,pureName:B},lib.findEngineDriver(h,S),G,W,q,H,l,{showHintColumns:getBoolSettingsValue("dataGrid.showHintColumns",!0)},k,de=>getDictionaryDescription(de,F,D,C,b),h==null?void 0:h.isReadOnly):null),o.$$.dirty[0]&8388608&&t(4,f=G.reference),o.$$.dirty[0]&8388608&&t(3,m=G.childConfig)},A(t(7,s=useUsedApps())),y(t(6,u=useConnectionList())),e=exclude_internal_props(e),[z,n,Y,m,f,d,u,s,a,r,M,V,J,Q,X,ie,e,F,D,x,B,K,U,G,W,q,H,l,h,b,C,k,S,I,ce]}class TableDataGrid extends SvelteComponent{constructor(e){super(),init(this,e,instance$2p,create_fragment$2r,safe_not_equal,{conid:17,database:18,schemaName:19,pureName:20,changeSetState:21,dispatchChangeSet:22,config:23,setConfig:24,cache:25,setCache:26,multipleGridsOnTab:0},null,[-1,-1])}}const TableDataGrid$1=Object.freeze(Object.defineProperty({__proto__:null,default:TableDataGrid},Symbol.toStringTag,{value:"Module"}));function doLoadGridConfigFunc(o){try{const e=localStorage.getItem(`tabdata_grid_${o}`);if(e)return{...lib$3.createGridConfig(),...JSON.parse(e)}}catch(e){console.warn("Error loading grid config:",e.message)}return lib$3.createGridConfig()}function useGridConfig(o){const e=writable(doLoadGridConfigFunc(o)),t=e.subscribe(n=>localStorage.setItem(`tabdata_grid_${o}`,JSON.stringify(n)));return onDestroy(t),e}const reducer=o=>(e,t)=>{const{mergeNearActions:n}=o||{},r=t.useMerge||n&&e.lastActionTm&&new Date().getTime()-e.lastActionTm<100;switch(t.type){case"set":return{history:[...e.history.slice(0,r?e.current:e.current+1),t.value],current:r?e.current:e.current+1,value:t.value,canUndo:!0,canRedo:!1,lastActionTm:new Date().getTime()};case"compute":{const a=t.compute(e.history[e.current]);return{history:[...e.history.slice(0,r?e.current:e.current+1),a],current:r?e.current:e.current+1,value:a,canUndo:!0,canRedo:!1,lastActionTm:new Date().getTime()}}case"undo":return e.current>0?{history:e.history,current:e.current-1,value:e.history[e.current-1],canUndo:e.current>1,canRedo:!0,lastActionTm:null}:e;case"redo":return e.current<e.history.length-1?{history:e.history,current:e.current+1,value:e.history[e.current+1],canUndo:!0,canRedo:e.current<e.history.length-2,lastActionTm:null}:e;case"reset":return{history:[t.value],current:0,value:t.value,lastActionTm:null}}};function createUndoReducer(o,e=null){return createReducer(reducer(e),{history:[o],current:0,value:o})}const ToolStripContainer_svelte_svelte_type_style_lang="",get_toolstrip_slot_changes=o=>({}),get_toolstrip_slot_context=o=>({});function create_fragment$2q(o){let e,t,n,r,a;const s=o[1].default,l=create_slot(s,o,o[0],null),u=o[1].toolstrip,d=create_slot(u,o,o[0],get_toolstrip_slot_context);return{c(){e=element("div"),t=element("div"),l&&l.c(),n=space(),r=element("div"),d&&d.c(),attr(t,"class","content svelte-5r97ey"),attr(r,"class","toolstrip svelte-5r97ey"),attr(e,"class","wrapper svelte-5r97ey")},m(f,m){insert(f,e,m),append(e,t),l&&l.m(t,null),append(e,n),append(e,r),d&&d.m(r,null),a=!0},p(f,[m]){l&&l.p&&(!a||m&1)&&update_slot_base(l,s,f,f[0],a?get_slot_changes(s,f[0],m,null):get_all_dirty_from_scope(f[0]),null),d&&d.p&&(!a||m&1)&&update_slot_base(d,u,f,f[0],a?get_slot_changes(u,f[0],m,get_toolstrip_slot_changes):get_all_dirty_from_scope(f[0]),get_toolstrip_slot_context)},i(f){a||(transition_in(l,f),transition_in(d,f),a=!0)},o(f){transition_out(l,f),transition_out(d,f),a=!1},d(f){f&&detach(e),l&&l.d(f),d&&d.d(f)}}}function instance$2o(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class ToolStripContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$2o,create_fragment$2q,safe_not_equal,{})}}const ToolStripSplitButton_svelte_svelte_type_style_lang="";function create_fragment$2p(o){let e,t,n,r,a,s,l,u,d,f,m,h;a=new FontIcon({props:{icon:o[1]}});const p=o[7].default,g=create_slot(p,o,o[6],null);return d=new FontIcon({props:{icon:o[3]}}),{c(){e=element("div"),t=element("div"),n=element("div"),r=element("span"),create_component(a.$$.fragment),s=space(),g&&g.c(),l=space(),u=element("span"),create_component(d.$$.fragment),attr(r,"class","icon svelte-nuulrm"),toggle_class(r,"disabled",o[0]),attr(n,"class","main svelte-nuulrm"),toggle_class(n,"disabled",o[0]),attr(u,"class","split-icon svelte-nuulrm"),toggle_class(u,"disabled",o[0]),attr(t,"class","inner svelte-nuulrm"),toggle_class(t,"disabled",o[0]),attr(e,"class","button svelte-nuulrm"),attr(e,"title",o[2]),toggle_class(e,"disabled",o[0])},m(b,v){insert(b,e,v),append(e,t),append(t,n),append(n,r),mount_component(a,r,null),append(n,s),g&&g.m(n,null),append(t,l),append(t,u),mount_component(d,u,null),f=!0,m||(h=[listen(n,"click",o[4]),listen(u,"click",o[5])],m=!0)},p(b,[v]){const y={};v&2&&(y.icon=b[1]),a.$set(y),(!f||v&1)&&toggle_class(r,"disabled",b[0]),g&&g.p&&(!f||v&64)&&update_slot_base(g,p,b,b[6],f?get_slot_changes(p,b[6],v,null):get_all_dirty_from_scope(b[6]),null),(!f||v&1)&&toggle_class(n,"disabled",b[0]);const C={};v&8&&(C.icon=b[3]),d.$set(C),(!f||v&1)&&toggle_class(u,"disabled",b[0]),(!f||v&1)&&toggle_class(t,"disabled",b[0]),(!f||v&4)&&attr(e,"title",b[2]),(!f||v&1)&&toggle_class(e,"disabled",b[0])},i(b){f||(transition_in(a.$$.fragment,b),transition_in(g,b),transition_in(d.$$.fragment,b),f=!0)},o(b){transition_out(a.$$.fragment,b),transition_out(g,b),transition_out(d.$$.fragment,b),f=!1},d(b){b&&detach(e),destroy_component(a),g&&g.d(b),destroy_component(d),m=!1,run_all(h)}}}function instance$2n(o,e,t){let{$$slots:n={},$$scope:r}=e,{disabled:a=!1}=e,{icon:s=null}=e,{title:l=null}=e,{splitIcon:u="icon chevron-down"}=e;const d=createEventDispatcher();function f(h){a||d("click",{target:h.target})}function m(h){a||d("splitclick",{target:h.target})}return o.$$set=h=>{"disabled"in h&&t(0,a=h.disabled),"icon"in h&&t(1,s=h.icon),"title"in h&&t(2,l=h.title),"splitIcon"in h&&t(3,u=h.splitIcon),"$$scope"in h&&t(6,r=h.$$scope)},[a,s,l,u,f,m,r,n]}class ToolStripSplitButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2n,create_fragment$2p,safe_not_equal,{disabled:0,icon:1,title:2,splitIcon:3})}}function create_default_slot$V(o){let e;const t=o[7].default,n=create_slot(t,o,o[9],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&512)&&update_slot_base(n,t,r,r[9],e?get_slot_changes(t,r[9],a,null):get_all_dirty_from_scope(r[9]),null)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$2o(o){let e,t;return e=new ToolStripSplitButton({props:{title:o[0],icon:o[1],disabled:o[2],$$slots:{default:[create_default_slot$V]},$$scope:{ctx:o}}}),e.$on("splitclick",o[3]),e.$on("click",o[8]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.title=n[0]),r&2&&(a.icon=n[1]),r&4&&(a.disabled=n[2]),r&512&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2m(o,e,t){let{$$slots:n={},$$scope:r}=e,{menu:a}=e,{title:s=void 0}=e,{label:l}=e,{icon:u}=e,{component:d=ToolStripButton}=e,{disabled:f=!1}=e;function m(p){const g=p.detail.target.getBoundingClientRect(),b=g.left,v=g.bottom;currentDropDownMenu.set({left:b,top:v,items:a})}function h(p){bubble.call(this,o,p)}return o.$$set=p=>{"menu"in p&&t(4,a=p.menu),"title"in p&&t(0,s=p.title),"label"in p&&t(5,l=p.label),"icon"in p&&t(1,u=p.icon),"component"in p&&t(6,d=p.component),"disabled"in p&&t(2,f=p.disabled),"$$scope"in p&&t(9,r=p.$$scope)},[s,u,f,m,a,l,d,n,h,r]}class ToolStripSplitDropDownButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2m,create_fragment$2o,safe_not_equal,{menu:4,title:0,label:5,icon:1,component:6,disabled:2})}}function create_fragment$2n(o){let e,t;return e=new ToolStripCommandButton({props:{command:o[0][0],component:ToolStripSplitDropDownButton,menu:o[3],hideDisabled:o[1],buttonLabel:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.command=n[0][0]),r&8&&(a.menu=n[3]),r&2&&(a.hideDisabled=n[1]),r&4&&(a.buttonLabel=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2l(o,e,t){let n,{commands:r}=e,{hideDisabled:a=!1}=e,{buttonLabel:s=null}=e;return o.$$set=l=>{"commands"in l&&t(0,r=l.commands),"hideDisabled"in l&&t(1,a=l.hideDisabled),"buttonLabel"in l&&t(2,s=l.buttonLabel)},o.$$.update=()=>{o.$$.dirty&1&&t(3,n=_.compact(r).map(l=>_.isString(l)?{command:l}:l))},[r,a,s,n]}class ToolStripCommandSplitButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$2l,create_fragment$2n,safe_not_equal,{commands:0,hideDisabled:1,buttonLabel:2})}}function create_default_slot_2$f(o){let e,t;const n=[o[18],{config:o[9]},{setConfig:o[11].update},{cache:o[10]},{setCache:o[12].update},{changeSetState:o[5]},{focusOnVisible:!0},{changeSetStore:o[14]},{dispatchChangeSet:o[15]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new TableDataGrid({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&319008?get_spread_update(n,[s[0]&262144&&get_spread_object(a[18]),s[0]&512&&{config:a[9]},s[0]&2048&&{setConfig:a[11].update},s[0]&1024&&{cache:a[10]},s[0]&4096&&{setCache:a[12].update},s[0]&32&&{changeSetState:a[5]},n[6],s[0]&16384&&{changeSetStore:a[14]},s[0]&32768&&{dispatchChangeSet:a[15]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot_1$v(o){let e;return{c(){e=text("Structure")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot$U(o){let e;return{c(){e=text("Columns")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_toolstrip_slot$g(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M;return e=new ToolStripCommandSplitButton({props:{buttonLabel:o[7]?`Refresh (every ${o[6]}s)`:null,commands:["dataGrid.refresh",...createAutoRefreshMenu()],hideDisabled:!0}}),n=new ToolStripCommandSplitButton({props:{buttonLabel:o[7]?`Refresh (every ${o[6]}s)`:null,commands:["dataForm.refresh",...createAutoRefreshMenu()],hideDisabled:!0}}),a=new ToolStripCommandButton({props:{command:"dataForm.goToFirst",hideDisabled:!0}}),l=new ToolStripCommandButton({props:{command:"dataForm.goToPrevious",hideDisabled:!0}}),d=new ToolStripCommandButton({props:{command:"dataForm.goToNext",hideDisabled:!0}}),m=new ToolStripCommandButton({props:{command:"dataForm.goToLast",hideDisabled:!0}}),p=new ToolStripCommandButton({props:{command:"tableData.save"}}),b=new ToolStripCommandButton({props:{command:"dataGrid.insertNewRow",hideDisabled:!0}}),y=new ToolStripCommandButton({props:{command:"dataGrid.deleteSelectedRows",hideDisabled:!0}}),E=new ToolStripCommandButton({props:{command:"dataGrid.switchToForm",hideDisabled:!0}}),k=new ToolStripCommandButton({props:{command:"dataGrid.switchToTable",hideDisabled:!0}}),$=new ToolStripExportButton({props:{quickExportHandlerRef:o[17]}}),I=new ToolStripButton({props:{icon:"icon structure",$$slots:{default:[create_default_slot_1$v]},$$scope:{ctx:o}}}),I.$on("click",o[27]),N=new ToolStripButton({props:{icon:o[4]?"icon columns-outline":"icon columns",$$slots:{default:[create_default_slot$U]},$$scope:{ctx:o}}}),N.$on("click",o[28]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment),h=space(),create_component(p.$$.fragment),g=space(),create_component(b.$$.fragment),v=space(),create_component(y.$$.fragment),C=space(),create_component(E.$$.fragment),A=space(),create_component(k.$$.fragment),T=space(),create_component($.$$.fragment),S=space(),create_component(I.$$.fragment),R=space(),create_component(N.$$.fragment)},m(F,D){mount_component(e,F,D),insert(F,t,D),mount_component(n,F,D),insert(F,r,D),mount_component(a,F,D),insert(F,s,D),mount_component(l,F,D),insert(F,u,D),mount_component(d,F,D),insert(F,f,D),mount_component(m,F,D),insert(F,h,D),mount_component(p,F,D),insert(F,g,D),mount_component(b,F,D),insert(F,v,D),mount_component(y,F,D),insert(F,C,D),mount_component(E,F,D),insert(F,A,D),mount_component(k,F,D),insert(F,T,D),mount_component($,F,D),insert(F,S,D),mount_component(I,F,D),insert(F,R,D),mount_component(N,F,D),M=!0},p(F,D){const x={};D[0]&192&&(x.buttonLabel=F[7]?`Refresh (every ${F[6]}s)`:null),e.$set(x);const B={};D[0]&192&&(B.buttonLabel=F[7]?`Refresh (every ${F[6]}s)`:null),n.$set(B);const K={};D[1]&256&&(K.$$scope={dirty:D,ctx:F}),I.$set(K);const U={};D[0]&16&&(U.icon=F[4]?"icon columns-outline":"icon columns"),D[1]&256&&(U.$$scope={dirty:D,ctx:F}),N.$set(U)},i(F){M||(transition_in(e.$$.fragment,F),transition_in(n.$$.fragment,F),transition_in(a.$$.fragment,F),transition_in(l.$$.fragment,F),transition_in(d.$$.fragment,F),transition_in(m.$$.fragment,F),transition_in(p.$$.fragment,F),transition_in(b.$$.fragment,F),transition_in(y.$$.fragment,F),transition_in(E.$$.fragment,F),transition_in(k.$$.fragment,F),transition_in($.$$.fragment,F),transition_in(I.$$.fragment,F),transition_in(N.$$.fragment,F),M=!0)},o(F){transition_out(e.$$.fragment,F),transition_out(n.$$.fragment,F),transition_out(a.$$.fragment,F),transition_out(l.$$.fragment,F),transition_out(d.$$.fragment,F),transition_out(m.$$.fragment,F),transition_out(p.$$.fragment,F),transition_out(b.$$.fragment,F),transition_out(y.$$.fragment,F),transition_out(E.$$.fragment,F),transition_out(k.$$.fragment,F),transition_out($.$$.fragment,F),transition_out(I.$$.fragment,F),transition_out(N.$$.fragment,F),M=!1},d(F){F&&(detach(t),detach(r),detach(s),detach(u),detach(f),detach(h),detach(g),detach(v),detach(C),detach(A),detach(T),detach(S),detach(R)),destroy_component(e,F),destroy_component(n,F),destroy_component(a,F),destroy_component(l,F),destroy_component(d,F),destroy_component(m,F),destroy_component(p,F),destroy_component(b,F),destroy_component(y,F),destroy_component(E,F),destroy_component(k,F),destroy_component($,F),destroy_component(I,F),destroy_component(N,F)}}}function create_fragment$2m(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$g],default:[create_default_slot_2$f]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&263935|r[1]&256&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$q=()=>getActiveComponent("TableDataTab"),INTERVALS$1=[5,10,15,13,60];registerCommand({id:"tableData.save",group:"save",category:"Table data",name:"Save",toolbar:!0,isRelatedToTab:!0,icon:"icon save",testEnabled:()=>{var o;return(o=getCurrentEditor$q())===null||o===void 0?void 0:o.canSave()},onClick:()=>getCurrentEditor$q().save()});registerCommand({id:"tableData.setAutoRefresh.1",category:"Data grid",name:"Refresh every 1 second",isRelatedToTab:!0,testEnabled:()=>!!getCurrentEditor$q(),onClick:()=>getCurrentEditor$q().setAutoRefresh(1)});for(const o of INTERVALS$1)registerCommand({id:`tableData.setAutoRefresh.${o}`,category:"Data grid",name:`Refresh every ${o} seconds`,isRelatedToTab:!0,testEnabled:()=>!!getCurrentEditor$q(),onClick:()=>getCurrentEditor$q().setAutoRefresh(o)});registerCommand({id:"tableData.stopAutoRefresh",category:"Data grid",name:"Stop auto refresh",isRelatedToTab:!0,keyText:"CtrlOrCommand+Shift+R",testEnabled:()=>{var o;return((o=getCurrentEditor$q())===null||o===void 0?void 0:o.isAutoRefresh())===!0},onClick:()=>getCurrentEditor$q().stopAutoRefresh(null)});registerCommand({id:"tableData.startAutoRefresh",category:"Data grid",name:"Start auto refresh",isRelatedToTab:!0,keyText:"CtrlOrCommand+Shift+R",testEnabled:()=>{var o;return((o=getCurrentEditor$q())===null||o===void 0?void 0:o.isAutoRefresh())===!1},onClick:()=>getCurrentEditor$q().startAutoRefresh()});const matchingProps$a=["conid","database","schemaName","pureName"],allowAddToFavorites$6=o=>!0;function createAutoRefreshMenu(){return[{divider:!0},{command:"dataGrid.deepRefresh",hideDisabled:!0},{command:"tableData.stopAutoRefresh",hideDisabled:!0},{command:"tableData.startAutoRefresh",hideDisabled:!0},"tableData.setAutoRefresh.1",...INTERVALS$1.map(o=>({command:`tableData.setAutoRefresh.${o}`,text:`...${o} seconds`}))]}function instance$2k(o,e,t){let n,r,a,s,l,u,d=noop$1,f=()=>(d(),d=subscribe(n,Q=>t(32,u=Q)),n),m,h;component_subscribe(o,extensions,Q=>t(31,l=Q)),o.$$.on_destroy.push(()=>d());var p=this&&this.__awaiter||function(Q,X,ie,ce){function de(se){return se instanceof ie?se:new ie(function(me){me(se)})}return new(ie||(ie=Promise))(function(se,me){function ue(Oe){try{pe(ce.next(Oe))}catch(qe){me(qe)}}function he(Oe){try{pe(ce.throw(Oe))}catch(qe){me(qe)}}function pe(Oe){Oe.done?se(Oe.value):de(Oe.value).then(ue,he)}pe((ce=ce.apply(Q,X||[])).next())})};let{tabid:g}=e,{conid:b}=e,{database:v}=e,{schemaName:y}=e,{pureName:C}=e;const E=createActivator("TableDataTab",!0),A=useGridConfig(g);component_subscribe(o,A,Q=>t(9,m=Q));const k=writable(lib$3.createGridCache());component_subscribe(o,k,Q=>t(10,h=Q));const T=useDatabaseInfo({conid:b,database:v});component_subscribe(o,T,Q=>t(30,s=Q));let $=getIntSettingsValue("dataGrid.defaultAutoRefreshInterval",10,1,3600),S=!1,I=null;const{editorState:R,editorValue:N,setEditorData:M}=useEditorData({tabid:g,onInitialData:Q=>{D({type:"reset",value:Q}),invalidateCommands(),lib$3.changeSetContainsChanges(Q)&&markTabUnsaved(g)}}),[F,D]=createUndoReducer(lib$3.createChangeSet());component_subscribe(o,F,Q=>t(5,a=Q));function x(Q){return p(this,void 0,void 0,function*(){const X=yield apiCall("database-connections/run-script",{conid:b,database:v,sql:Q,useTransaction:!0}),{errorMessage:ie}=X||{};ie?showModal(ErrorMessageModal,{title:"Error when saving",message:ie}):(D({type:"reset",value:lib$3.createChangeSet()}),k.update(lib$3.reloadDataCacheFunc),showSnackbarSuccess("Saved to database"))})}function B(){const Q=lib.findEngineDriver(u,l),X=lib$3.changeSetToSql(a==null?void 0:a.value,s),ie=lib$3.getDeleteCascades(a==null?void 0:a.value,s),ce=lib$4.scriptToSql(Q,X),de=_.map(ie,({title:se,commands:me})=>({title:se,script:lib$4.scriptToSql(Q,me)}));getBoolSettingsValue("skipConfirm.tableDataSave",!1)&&!(de!=null&&de.length)?x(ce):showModal(ConfirmSqlModal,{sql:ce,onConfirm:se=>x(se),engine:Q.engine,deleteCascadesScripts:de,skipConfirmSettingKey:de!=null&&de.length?null:"skipConfirm.tableDataSave"})}function K(){return lib$3.changeSetContainsChanges(a==null?void 0:a.value)}function U(Q){t(6,$=Q),W(),invalidateCommands()}function G(){return S}function W(){H(),I=setInterval(()=>{k.update(lib$3.reloadDataCacheFunc)},$*1e3),t(7,S=!0),invalidateCommands()}function q(){H(),t(7,S=!1),invalidateCommands()}function H(){I&&(clearInterval(I),I=null)}registerMenu({command:"tableData.save",tag:"save"});const z=writable(getLocalStorage("dataGrid_collapsedLeftColumn",!1));component_subscribe(o,z,Q=>t(4,r=Q)),setContext("collapsedLeftColumnStore",z),onDestroy(()=>{H()});const Y=createQuickExportHandlerRef(),V=()=>{openNewTab({title:C,icon:"img table-structure",tabComponent:"TableStructureTab",props:{schemaName:y,pureName:C,conid:b,database:v,objectTypeField:"tables"}})},J=()=>z.update(Q=>!Q);return o.$$set=Q=>{t(18,e=assign(assign({},e),exclude_internal_props(Q))),"tabid"in Q&&t(19,g=Q.tabid),"conid"in Q&&t(0,b=Q.conid),"database"in Q&&t(1,v=Q.database),"schemaName"in Q&&t(2,y=Q.schemaName),"pureName"in Q&&t(3,C=Q.pureName)},o.$$.update=()=>{o.$$.dirty[0]&1&&f(t(8,n=useConnectionInfo({conid:b}))),o.$$.dirty[0]&524320&&(M(a.value),lib$3.changeSetContainsChanges(a==null?void 0:a.value)?markTabUnsaved(g):markTabSaved(g)),o.$$.dirty[0]&32&&invalidateCommands(),o.$$.dirty[0]&16&&setLocalStorage("dataGrid_collapsedLeftColumn",r)},e=exclude_internal_props(e),[b,v,y,C,r,a,$,S,n,m,h,A,k,T,F,D,z,Y,e,g,E,B,K,U,G,W,q,V,J]}class TableDataTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$2k,create_fragment$2m,safe_not_equal,{tabid:19,conid:0,database:1,schemaName:2,pureName:3,activator:20,save:21,canSave:22,setAutoRefresh:23,isAutoRefresh:24,startAutoRefresh:25,stopAutoRefresh:26},null,[-1,-1])}get activator(){return this.$$.ctx[20]}get save(){return this.$$.ctx[21]}get canSave(){return this.$$.ctx[22]}get setAutoRefresh(){return this.$$.ctx[23]}get isAutoRefresh(){return this.$$.ctx[24]}get startAutoRefresh(){return this.$$.ctx[25]}get stopAutoRefresh(){return this.$$.ctx[26]}}const TableDataTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$6,default:TableDataTab,matchingProps:matchingProps$a},Symbol.toStringTag,{value:"Module"}));function create_fragment$2l(o){let e,t,n,r;const a=[o[5],{loadDataPage:loadCollectionDataPage},{dataPageAvailable:dataPageAvailable$1},{loadRowCount:loadRowCount$1},{frameSelection:!!o[2]},{onOpenQuery:o[3]},{grider:o[4]}];function s(d){o[17](d)}function l(d){o[18](d)}let u={};for(let d=0;d<a.length;d+=1)u=assign(u,a[d]);return o[1]!==void 0&&(u.loadedRows=o[1]),o[0]!==void 0&&(u.selectedCellsPublished=o[0]),e=new LoadingDataGridCore({props:u}),binding_callbacks.push(()=>bind(e,"loadedRows",s)),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",l)),{c(){create_component(e.$$.fragment)},m(d,f){mount_component(e,d,f),r=!0},p(d,[f]){const m=f&60?get_spread_update(a,[f&32&&get_spread_object(d[5]),f&0&&{loadDataPage:loadCollectionDataPage},f&0&&{dataPageAvailable:dataPageAvailable$1},f&0&&{loadRowCount:loadRowCount$1},f&4&&{frameSelection:!!d[2]},f&8&&{onOpenQuery:d[3]},f&16&&{grider:d[4]}]):{};!t&&f&2&&(t=!0,m.loadedRows=d[1],add_flush_callback(()=>t=!1)),!n&&f&1&&(n=!0,m.selectedCellsPublished=d[0],add_flush_callback(()=>n=!1)),e.$set(m)},i(d){r||(transition_in(e.$$.fragment,d),r=!0)},o(d){transition_out(e.$$.fragment,d),r=!1},d(d){destroy_component(e,d)}}}var __awaiter$6=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const getCurrentEditor$p=()=>getActiveComponent("CollectionDataGridCore");registerCommand({id:"collectionDataGrid.openQuery",category:"Data grid",name:"Open query",testEnabled:()=>getCurrentEditor$p()!=null,onClick:()=>getCurrentEditor$p().openQuery()});registerCommand({id:"collectionDataGrid.export",category:"Data grid",name:"Export",keyText:"CtrlOrCommand+E",icon:"icon export",testEnabled:()=>getCurrentEditor$p()!=null,onClick:()=>getCurrentEditor$p().exportGrid()});function buildGridMongoCondition(o){var e,t;const n=(t=(e=o==null?void 0:o.display)===null||e===void 0?void 0:e.config)===null||t===void 0?void 0:t.filters,r=[];for(const a in n||{})if(n[a])try{const s=lib$1.parseFilter(n[a],"mongo"),l=_.cloneDeepWith(s,u=>{if(u.__placeholder__)return{[a]:u.__placeholder__}});r.push(l)}catch{}return r.length>0?{$and:r}:void 0}function buildMongoSort(o){var e,t;const n=(t=(e=o==null?void 0:o.display)===null||e===void 0?void 0:e.config)===null||t===void 0?void 0:t.sort;return(n==null?void 0:n.length)>0?_.zipObject(n.map(r=>r.uniqueName),n.map(r=>r.order=="DESC"?-1:1)):null}function loadCollectionDataPage(o,e,t){return __awaiter$6(this,void 0,void 0,function*(){const{conid:n,database:r}=o,a=yield apiCall("database-connections/collection-data",{conid:n,database:r,options:{pureName:o.pureName,limit:t,skip:e,condition:buildGridMongoCondition(o),sort:buildMongoSort(o)}});return a.errorMessage?a:a.rows})}function dataPageAvailable$1(o){return!0}function loadRowCount$1(o){return __awaiter$6(this,void 0,void 0,function*(){const{conid:e,database:t}=o;return(yield apiCall("database-connections/collection-data",{conid:e,database:t,options:{pureName:o.pureName,countDocuments:!0,condition:buildGridMongoCondition(o)}})).count})}function instance$2j(o,e,t){let n;var r=this&&this.__awaiter||function(I,R,N,M){function F(D){return D instanceof N?D:new N(function(x){x(D)})}return new(N||(N=Promise))(function(D,x){function B(G){try{U(M.next(G))}catch(W){x(W)}}function K(G){try{U(M.throw(G))}catch(W){x(W)}}function U(G){G.done?D(G.value):F(G.value).then(B,K)}U((M=M.apply(I,R||[])).next())})};let{conid:a}=e,{display:s}=e,{database:l}=e,{schemaName:u}=e,{pureName:d}=e,{config:f}=e,{changeSetState:m}=e,{dispatchChangeSet:h}=e,{macroPreview:p}=e,{macroValues:g}=e,{selectedCellsPublished:b}=e,{loadedRows:v=[]}=e;const y=createActivator("CollectionDataGridCore",!1);function C(){return`db.collection('${d}')
      .find(${JSON.stringify(buildGridMongoCondition(e)||{})})
      .sort(${JSON.stringify(buildMongoSort(e)||{})})`}function E(){return{collection:d,condition:buildGridMongoCondition(e)||{},sort:buildMongoSort(e)||{}}}function A(){return r(this,void 0,void 0,function*(){const I=yield getConnectionInfo({conid:a}),R={};R.sourceStorageType="query",R.sourceConnectionId=a,R.sourceDatabaseName=l,R.sourceQuery=I.isReadOnly?JSON.stringify(E(),void 0,2):C(),R.sourceQueryType=I.isReadOnly?"json":"native",R.sourceList=[d],R[`columns_${d}`]=s.getExportColumnMap(),showModal(ImportExportModal,{initialValues:R})})}function k(){openNewTab({title:"Query #",icon:"img sql-file",tabComponent:"QueryTab",props:{conid:a,database:l}},{editor:C()})}const T=I=>()=>r(void 0,void 0,void 0,function*(){const R=yield getConnectionInfo({conid:a});exportQuickExportFile(d||"Data",{functionName:"queryReader",props:{connection:extractShellConnection(R,l),queryType:R.isReadOnly?"json":"native",query:R.isReadOnly?E():C()}},I,s.getExportColumnMap())});registerQuickExportHandler(T),registerMenu({command:"collectionDataGrid.openQuery",tag:"export"},()=>Object.assign(Object.assign({},createQuickExportMenu(T,{command:"collectionDataGrid.export"})),{tag:"export"}));function $(I){v=I,t(1,v)}function S(I){b=I,t(0,b)}return o.$$set=I=>{t(5,e=assign(assign({},e),exclude_internal_props(I))),"conid"in I&&t(6,a=I.conid),"display"in I&&t(7,s=I.display),"database"in I&&t(8,l=I.database),"schemaName"in I&&t(9,u=I.schemaName),"pureName"in I&&t(10,d=I.pureName),"config"in I&&t(11,f=I.config),"changeSetState"in I&&t(12,m=I.changeSetState),"dispatchChangeSet"in I&&t(13,h=I.dispatchChangeSet),"macroPreview"in I&&t(2,p=I.macroPreview),"macroValues"in I&&t(14,g=I.macroValues),"selectedCellsPublished"in I&&t(0,b=I.selectedCellsPublished),"loadedRows"in I&&t(1,v=I.loadedRows)},o.$$.update=()=>{o.$$.dirty&28807&&t(4,n=new ChangeSetGrider(v,m,h,s,p,g,b()))},e=exclude_internal_props(e),[b,v,p,k,n,e,a,s,l,u,d,f,m,h,g,y,A,$,S]}class CollectionDataGridCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$2j,create_fragment$2l,safe_not_equal,{conid:6,display:7,database:8,schemaName:9,pureName:10,config:11,changeSetState:12,dispatchChangeSet:13,macroPreview:2,macroValues:14,selectedCellsPublished:0,loadedRows:1,activator:15,exportGrid:16,openQuery:3})}get activator(){return this.$$.ctx[15]}get exportGrid(){return this.$$.ctx[16]}get openQuery(){return this.$$.ctx[3]}}const CollectionDataGridCore$1=Object.freeze(Object.defineProperty({__proto__:null,default:CollectionDataGridCore,loadCollectionDataPage},Symbol.toStringTag,{value:"Module"})),Pager_svelte_svelte_type_style_lang="";function create_default_slot_1$u(o){let e,t;return e=new FontIcon({props:{icon:"icon arrow-left"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$T(o){let e,t;return e=new FontIcon({props:{icon:"icon arrow-right"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2k(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b;t=new InlineButton({props:{$$slots:{default:[create_default_slot_1$u]},$$scope:{ctx:o}}}),t.$on("click",o[4]);function v(A){o[5](A)}let y={type:"number"};o[0]!==void 0&&(y.value=o[0]),s=new TextField({props:y}),binding_callbacks.push(()=>bind(s,"value",v)),s.$on("blur",o[6]),s.$on("keydown",o[3]);function C(A){o[7](A)}let E={type:"number"};return o[1]!==void 0&&(E.value=o[1]),m=new TextField({props:E}),binding_callbacks.push(()=>bind(m,"value",C)),m.$on("blur",o[8]),m.$on("keydown",o[3]),g=new InlineButton({props:{$$slots:{default:[create_default_slot$T]},$$scope:{ctx:o}}}),g.$on("click",o[9]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("span"),r.textContent="Start:",a=space(),create_component(s.$$.fragment),u=space(),d=element("span"),d.textContent="Rows:",f=space(),create_component(m.$$.fragment),p=space(),create_component(g.$$.fragment),attr(r,"class","label svelte-90nftc"),attr(d,"class","label svelte-90nftc"),attr(e,"class","wrapper svelte-90nftc")},m(A,k){insert(A,e,k),mount_component(t,e,null),append(e,n),append(e,r),append(e,a),mount_component(s,e,null),append(e,u),append(e,d),append(e,f),mount_component(m,e,null),append(e,p),mount_component(g,e,null),b=!0},p(A,[k]){const T={};k&1024&&(T.$$scope={dirty:k,ctx:A}),t.$set(T);const $={};!l&&k&1&&(l=!0,$.value=A[0],add_flush_callback(()=>l=!1)),s.$set($);const S={};!h&&k&2&&(h=!0,S.value=A[1],add_flush_callback(()=>h=!1)),m.$set(S);const I={};k&1024&&(I.$$scope={dirty:k,ctx:A}),g.$set(I)},i(A){b||(transition_in(t.$$.fragment,A),transition_in(s.$$.fragment,A),transition_in(m.$$.fragment,A),transition_in(g.$$.fragment,A),b=!0)},o(A){transition_out(t.$$.fragment,A),transition_out(s.$$.fragment,A),transition_out(m.$$.fragment,A),transition_out(g.$$.fragment,A),b=!1},d(A){A&&detach(e),destroy_component(t),destroy_component(s),destroy_component(m),destroy_component(g)}}}function instance$2i(o,e,t){const n=createEventDispatcher();let{skip:r}=e,{limit:a}=e;function s(p){p.keyCode==keycodes.enter&&(p.preventDefault(),p.stopPropagation(),n("load"))}const l=()=>{t(0,r=parseInt(r)-parseInt(a)),r<0&&t(0,r=0),n("load")};function u(p){r=p,t(0,r)}const d=()=>n("load");function f(p){a=p,t(1,a)}const m=()=>n("load"),h=()=>{t(0,r=parseInt(r)+parseInt(a)),n("load")};return o.$$set=p=>{"skip"in p&&t(0,r=p.skip),"limit"in p&&t(1,a=p.limit)},[r,a,n,s,l,u,d,f,m,h]}class Pager extends SvelteComponent{constructor(e){super(),init(this,e,instance$2i,create_fragment$2k,safe_not_equal,{skip:0,limit:1})}}const CollectionJsonView_svelte_svelte_type_style_lang="";function get_each_context$m(o,e,t){const n=o.slice();return n[21]=e[t],n}function create_each_block$m(o){let e,t;return e=new CollectionJsonRow({props:{grider:o[4],rowIndex:o[21]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.grider=n[4]),r&16&&(a.rowIndex=n[21]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$10(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$2j(o){let e,t,n,r,a,s,l,u,d,f,m,h;function p(A){o[15](A)}function g(A){o[16](A)}let b={};o[2]!==void 0&&(b.skip=o[2]),o[3]!==void 0&&(b.limit=o[3]),n=new Pager({props:b}),binding_callbacks.push(()=>bind(n,"skip",p)),binding_callbacks.push(()=>bind(n,"limit",g)),n.$on("load",o[17]);let v=ensure_array_like(_.range(0,o[4].rowCount)),y=[];for(let A=0;A<v.length;A+=1)y[A]=create_each_block$m(get_each_context$m(o,v,A));const C=A=>transition_out(y[A],1,1,()=>{y[A]=null});let E=o[1]&&create_if_block$10();return{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),s=space(),l=element("div");for(let A=0;A<y.length;A+=1)y[A].c();u=space(),E&&E.c(),d=empty(),attr(t,"class","toolbar svelte-17xquyn"),attr(l,"class","json svelte-17xquyn"),attr(e,"class","wrapper svelte-17xquyn")},m(A,k){insert(A,e,k),append(e,t),mount_component(n,t,null),append(e,s),append(e,l);for(let T=0;T<y.length;T+=1)y[T]&&y[T].m(l,null);insert(A,u,k),E&&E.m(A,k),insert(A,d,k),f=!0,m||(h=action_destroyer(contextMenu.call(null,e,o[5])),m=!0)},p(A,[k]){const T={};if(!r&&k&4&&(r=!0,T.skip=A[2],add_flush_callback(()=>r=!1)),!a&&k&8&&(a=!0,T.limit=A[3],add_flush_callback(()=>a=!1)),n.$set(T),k&16){v=ensure_array_like(_.range(0,A[4].rowCount));let $;for($=0;$<v.length;$+=1){const S=get_each_context$m(A,v,$);y[$]?(y[$].p(S,k),transition_in(y[$],1)):(y[$]=create_each_block$m(S),y[$].c(),transition_in(y[$],1),y[$].m(l,null))}for(group_outros(),$=v.length;$<y.length;$+=1)C($);check_outros()}A[1]?E?k&2&&transition_in(E,1):(E=create_if_block$10(),E.c(),transition_in(E,1),E.m(d.parentNode,d)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros())},i(A){if(!f){transition_in(n.$$.fragment,A);for(let k=0;k<v.length;k+=1)transition_in(y[k]);transition_in(E),f=!0}},o(A){transition_out(n.$$.fragment,A),y=y.filter(Boolean);for(let k=0;k<y.length;k+=1)transition_out(y[k]);transition_out(E),f=!1},d(A){A&&(detach(e),detach(u),detach(d)),destroy_component(n),destroy_each(y,A),E&&E.d(A),m=!1,h()}}}globalThis&&globalThis.__awaiter;function instance$2h(o,e,t){let n;var r=this&&this.__awaiter||function($,S,I,R){function N(M){return M instanceof I?M:new I(function(F){F(M)})}return new(I||(I=Promise))(function(M,F){function D(K){try{B(R.next(K))}catch(U){F(U)}}function x(K){try{B(R.throw(K))}catch(U){F(U)}}function B(K){K.done?M(K.value):N(K.value).then(D,x)}B((R=R.apply($,S||[])).next())})};let{conid:a}=e,{database:s}=e,{cache:l}=e,{display:u}=e,{setConfig:d}=e,{changeSetState:f}=e,{dispatchChangeSet:m}=e;const h=createActivator("CollectionJsonView",!0);let p=!1,g=null,{loadedRows:b=[]}=e,v=0,y=50;function C(){return r(this,void 0,void 0,function*(){t(1,p=!0),t(6,b=yield loadCollectionDataPage(e,parseInt(v)||0,parseInt(y)||50)),t(1,p=!1),t(14,g=new Date().getTime())})}onMount(()=>{C()}),registerMenu({placeTag:"switch"});const E=getContextMenu();function A($){v=$,t(2,v)}function k($){y=$,t(3,y)}const T=()=>u.reload();return o.$$set=$=>{t(20,e=assign(assign({},e),exclude_internal_props($))),"conid"in $&&t(7,a=$.conid),"database"in $&&t(8,s=$.database),"cache"in $&&t(9,l=$.cache),"display"in $&&t(0,u=$.display),"setConfig"in $&&t(10,d=$.setConfig),"changeSetState"in $&&t(11,f=$.changeSetState),"dispatchChangeSet"in $&&t(12,m=$.dispatchChangeSet),"loadedRows"in $&&t(6,b=$.loadedRows)},o.$$.update=()=>{o.$$.dirty&16896&&(l==null?void 0:l.refreshTime)>g&&C(),o.$$.dirty&6209&&t(4,n=new ChangeSetGrider(b,f,m,u))},e=exclude_internal_props(e),[u,p,v,y,n,E,b,a,s,l,d,f,m,h,g,A,k,T]}class CollectionJsonView extends SvelteComponent{constructor(e){super(),init(this,e,instance$2h,create_fragment$2j,safe_not_equal,{conid:7,database:8,cache:9,display:0,setConfig:10,changeSetState:11,dispatchChangeSet:12,activator:13,loadedRows:6})}get activator(){return this.$$.ctx[13]}}const ConfirmNoSqlModal_svelte_svelte_type_style_lang="";function create_if_block$$(o){let e,t,n;return t=new TemplatedCheckboxField({props:{label:"Don't ask again",templateProps:{noMargin:!0},checked:o[3]}}),t.$on("change",o[7]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","mt-2")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&8&&(s.checked=r[3]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_default_slot_1$t(o){let e,t,n,r,a;t=new AceEditor({props:{mode:"javascript",readOnly:!0,value:o[0]}});let s=o[2]&&create_if_block$$(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),s&&s.c(),r=empty(),attr(e,"class","editor svelte-jgnle7")},m(l,u){insert(l,e,u),mount_component(t,e,null),insert(l,n,u),s&&s.m(l,u),insert(l,r,u),a=!0},p(l,u){const d={};u&1&&(d.value=l[0]),t.$set(d),l[2]?s?(s.p(l,u),u&4&&transition_in(s,1)):(s=create_if_block$$(l),s.c(),transition_in(s,1),s.m(r.parentNode,r)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(l){a||(transition_in(t.$$.fragment,l),transition_in(s),a=!0)},o(l){transition_out(t.$$.fragment,l),transition_out(s),a=!1},d(l){l&&(detach(e),detach(n),detach(r)),destroy_component(t),s&&s.d(l)}}}function create_header_slot$e(o){let e;return{c(){e=element("div"),e.textContent="Save changes",attr(e,"slot","header")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_footer_slot$d(o){let e,t,n,r,a,s,l;return t=new FormSubmit({props:{value:"OK"}}),t.$on("click",o[5]),r=new FormStyledButton({props:{type:"button",value:"Close"}}),r.$on("click",closeCurrentModal),s=new FormStyledButton({props:{type:"button",value:"Open script"}}),s.$on("click",o[6]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"slot","footer")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),l=!0},p:noop$1,i(u){l||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s)}}}function create_default_slot$S(o){let e,t;const n=[o[4]];let r={$$slots:{footer:[create_footer_slot$d],header:[create_header_slot$e],default:[create_default_slot_1$t]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&271&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2i(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$S]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&287&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$2g(o,e,t){const n=["script","onConfirm","skipConfirmSettingKey"];let r=compute_rest_props(e,n),{script:a}=e,{onConfirm:s}=e,{skipConfirmSettingKey:l=null}=e,u;const d=()=>{closeCurrentModal(),s()},f=()=>{newQuery({initialData:a}),closeCurrentModal()},m=h=>{t(3,u=h.detail),apiCall("config/update-settings",{[l]:h.detail})};return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(4,r=compute_rest_props(e,n)),"script"in h&&t(0,a=h.script),"onConfirm"in h&&t(1,s=h.onConfirm),"skipConfirmSettingKey"in h&&t(2,l=h.skipConfirmSettingKey)},[a,s,l,u,r,d,f,m]}class ConfirmNoSqlModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2g,create_fragment$2i,safe_not_equal,{script:0,onConfirm:1,skipConfirmSettingKey:2})}}const ConfirmNoSqlModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConfirmNoSqlModal},Symbol.toStringTag,{value:"Module"}));function create_default_slot$R(o){let e,t,n;const r=[o[14],{config:o[3]},{setConfig:o[7].update},{cache:o[2]},{setCache:o[8].update},{changeSetState:o[1]},{focusOnVisible:!0},{display:o[4]},{changeSetStore:o[9]},{dispatchChangeSet:o[10]},{gridCoreComponent:CollectionDataGridCore},{jsonViewComponent:CollectionJsonView},{isDynamicStructure:!0},{showMacros:!0},{macroCondition:func$b},{onRunMacro:o[11]}];function a(l){o[27](l)}let s={};for(let l=0;l<r.length;l+=1)s=assign(s,r[l]);return o[0]!==void 0&&(s.loadedRows=o[0]),e=new DataGrid({props:s}),binding_callbacks.push(()=>bind(e,"loadedRows",a)),{c(){create_component(e.$$.fragment)},m(l,u){mount_component(e,l,u),n=!0},p(l,u){const d=u[0]&20382?get_spread_update(r,[u[0]&16384&&get_spread_object(l[14]),u[0]&8&&{config:l[3]},u[0]&128&&{setConfig:l[7].update},u[0]&4&&{cache:l[2]},u[0]&256&&{setCache:l[8].update},u[0]&2&&{changeSetState:l[1]},r[6],u[0]&16&&{display:l[4]},u[0]&512&&{changeSetStore:l[9]},u[0]&1024&&{dispatchChangeSet:l[10]},u&0&&{gridCoreComponent:CollectionDataGridCore},u&0&&{jsonViewComponent:CollectionJsonView},r[12],r[13],r[14],u[0]&2048&&{onRunMacro:l[11]}]):{};!t&&u[0]&1&&(t=!0,d.loadedRows=l[0],add_flush_callback(()=>t=!1)),e.$set(d)},i(l){n||(transition_in(e.$$.fragment,l),n=!0)},o(l){transition_out(e.$$.fragment,l),n=!1},d(l){destroy_component(e,l)}}}function create_toolstrip_slot$f(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v;return e=new ToolStripCommandButton({props:{command:"dataGrid.refresh",hideDisabled:!0}}),n=new ToolStripCommandButton({props:{command:"dataForm.refresh",hideDisabled:!0}}),a=new ToolStripCommandButton({props:{command:"collectionTable.save"}}),l=new ToolStripCommandButton({props:{command:"dataGrid.insertNewRow",hideDisabled:!0}}),d=new ToolStripCommandButton({props:{command:"dataGrid.deleteSelectedRows",hideDisabled:!0}}),m=new ToolStripCommandButton({props:{command:"dataGrid.switchToJson",hideDisabled:!0}}),p=new ToolStripCommandButton({props:{command:"dataGrid.switchToTable",hideDisabled:!0}}),b=new ToolStripExportButton({props:{quickExportHandlerRef:o[13],command:"collectionDataGrid.export"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment),h=space(),create_component(p.$$.fragment),g=space(),create_component(b.$$.fragment)},m(y,C){mount_component(e,y,C),insert(y,t,C),mount_component(n,y,C),insert(y,r,C),mount_component(a,y,C),insert(y,s,C),mount_component(l,y,C),insert(y,u,C),mount_component(d,y,C),insert(y,f,C),mount_component(m,y,C),insert(y,h,C),mount_component(p,y,C),insert(y,g,C),mount_component(b,y,C),v=!0},p:noop$1,i(y){v||(transition_in(e.$$.fragment,y),transition_in(n.$$.fragment,y),transition_in(a.$$.fragment,y),transition_in(l.$$.fragment,y),transition_in(d.$$.fragment,y),transition_in(m.$$.fragment,y),transition_in(p.$$.fragment,y),transition_in(b.$$.fragment,y),v=!0)},o(y){transition_out(e.$$.fragment,y),transition_out(n.$$.fragment,y),transition_out(a.$$.fragment,y),transition_out(l.$$.fragment,y),transition_out(d.$$.fragment,y),transition_out(m.$$.fragment,y),transition_out(p.$$.fragment,y),transition_out(b.$$.fragment,y),v=!1},d(y){y&&(detach(t),detach(r),detach(s),detach(u),detach(f),detach(h),detach(g)),destroy_component(e,y),destroy_component(n,y),destroy_component(a,y),destroy_component(l,y),destroy_component(d,y),destroy_component(m,y),destroy_component(p,y),destroy_component(b,y)}}}function create_fragment$2h(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$f],default:[create_default_slot$R]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16415|r[1]&4&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$o=()=>getActiveComponent("CollectionDataTab"),matchingProps$9=["conid","database","schemaName","pureName"],allowAddToFavorites$5=o=>!0;registerCommand({id:"collectionTable.save",group:"save",category:"Collection data",name:"Save",toolbar:!0,isRelatedToTab:!0,icon:"icon save",testEnabled:()=>{var o;return(o=getCurrentEditor$o())===null||o===void 0?void 0:o.canSave()},onClick:()=>getCurrentEditor$o().save()});const func$b=o=>o.type=="transformValue";function instance$2f(o,e,t){let n,r,a,s,l,u,d,f=noop$1,m=()=>(f(),f=subscribe(n,z=>t(25,d=z)),n),h,p,g,b=noop$1,v=()=>(b(),b=subscribe(r,z=>t(26,g=z)),r);component_subscribe(o,extensions,z=>t(24,u=z)),o.$$.on_destroy.push(()=>f()),o.$$.on_destroy.push(()=>b());var y=this&&this.__awaiter||function(z,Y,V,J){function Q(X){return X instanceof V?X:new V(function(ie){ie(X)})}return new(V||(V=Promise))(function(X,ie){function ce(me){try{se(J.next(me))}catch(ue){ie(ue)}}function de(me){try{se(J.throw(me))}catch(ue){ie(ue)}}function se(me){me.done?X(me.value):Q(me.value).then(ce,de)}se((J=J.apply(z,Y||[])).next())})};let{tabid:C}=e,{conid:E}=e,{database:A}=e,{schemaName:k}=e,{pureName:T}=e,$;const S=createActivator("CollectionDataTab",!0),I=useGridConfig(C);component_subscribe(o,I,z=>t(3,p=z));const R=writable(lib$3.createGridCache());component_subscribe(o,R,z=>t(2,h=z));const{editorState:N,editorValue:M,setEditorData:F}=useEditorData({tabid:C,onInitialData:z=>{x({type:"reset",value:z}),invalidateCommands(),lib$3.changeSetContainsChanges(z)&&markTabUnsaved(C)}}),[D,x]=createUndoReducer(lib$3.createChangeSet());component_subscribe(o,D,z=>t(1,l=z));function B(z){return y(this,void 0,void 0,function*(){const Y=yield apiCall("database-connections/update-collection",{conid:E,database:A,changeSet:z}),{errorMessage:V}=Y||{};V?showModal(ErrorMessageModal,{title:"Error when saving",message:V}):(x({type:"reset",value:lib$3.createChangeSet()}),a==null||a.reload())})}function K(){return lib$3.changeSetContainsChanges(l==null?void 0:l.value)}function U(){const z=l==null?void 0:l.value,Y=lib.findEngineDriver(d,u),V=Y.getCollectionUpdateScript?Y.getCollectionUpdateScript(z):null;V?getBoolSettingsValue("skipConfirm.collectionDataSave",!1)?B(z):showModal(ConfirmNoSqlModal,{script:V,onConfirm:()=>B(z),engine:a.engine,skipConfirmSettingKey:"skipConfirm.collectionDataSave"}):B(z)}function G(z,Y,V){const J=lib$3.runMacroOnChangeSet(z,Y,V,l==null?void 0:l.value,a,!1);J&&x({type:"set",value:J})}registerMenu({command:"collectionTable.save",tag:"save"});const W=writable(getLocalStorage("collection_collapsedLeftColumn",!1));component_subscribe(o,W,z=>t(23,s=z)),setContext("collapsedLeftColumnStore",W);const q=createQuickExportHandlerRef();function H(z){$=z,t(0,$)}return o.$$set=z=>{t(14,e=assign(assign({},e),exclude_internal_props(z))),"tabid"in z&&t(15,C=z.tabid),"conid"in z&&t(16,E=z.conid),"database"in z&&t(17,A=z.database),"schemaName"in z&&t(18,k=z.schemaName),"pureName"in z&&t(19,T=z.pureName)},o.$$.update=()=>{o.$$.dirty[0]&32770&&(F(l.value),lib$3.changeSetContainsChanges(l==null?void 0:l.value)?markTabUnsaved(C):markTabSaved(C)),o.$$.dirty[0]&2&&invalidateCommands(),o.$$.dirty[0]&65536&&m(t(6,n=useConnectionInfo({conid:E}))),o.$$.dirty[0]&983040&&v(t(5,r=useCollectionInfo({conid:E,database:A,schemaName:k,pureName:T}))),o.$$.dirty[0]&117440527&&t(4,a=g&&d?new lib$3.CollectionGridDisplay(g,lib.findEngineDriver(d,u),p,I.update,h,R.update,$,l==null?void 0:l.value,d==null?void 0:d.isReadOnly):null),o.$$.dirty[0]&8388608&&setLocalStorage("collection_collapsedLeftColumn",s)},e=exclude_internal_props(e),[$,l,h,p,a,r,n,I,R,D,x,G,W,q,e,C,E,A,k,T,S,K,U,s,u,d,g,H]}class CollectionDataTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$2f,create_fragment$2h,safe_not_equal,{tabid:15,conid:16,database:17,schemaName:18,pureName:19,activator:20,canSave:21,save:22},null,[-1,-1])}get activator(){return this.$$.ctx[20]}get canSave(){return this.$$.ctx[21]}get save(){return this.$$.ctx[22]}}const CollectionDataTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$5,default:CollectionDataTab,matchingProps:matchingProps$9},Symbol.toStringTag,{value:"Module"}));function create_if_block$_(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$e],default:[create_default_slot$Q]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4196366&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$Q(o){let e,t;const n=[o[11],{display:o[3]},{config:o[2]},{setConfig:o[7].update},{cache:o[1]},{setCache:o[8].update},{focusOnVisible:!0},{hasMultiColumnFilter:!0},{gridCoreComponent:SqlDataGridCore},{formViewComponent:SqlFormView}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new DataGrid({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&2446?get_spread_update(n,[s&2048&&get_spread_object(a[11]),s&8&&{display:a[3]},s&4&&{config:a[2]},s&128&&{setConfig:a[7].update},s&2&&{cache:a[1]},s&256&&{setCache:a[8].update},n[6],n[7],s&0&&{gridCoreComponent:SqlDataGridCore},s&0&&{formViewComponent:SqlFormView}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_toolstrip_slot$e(o){let e,t,n,r;return e=new ToolStripCommandButton({props:{command:"dataGrid.refresh"}}),n=new ToolStripExportButton({props:{quickExportHandlerRef:o[10]}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_fragment$2g(o){let e,t,n,r=o[3]&&create_if_block$_(o);return t=new StatusBarTabItem({props:{text:"View columns",icon:o[0]?"icon columns-outline":"icon columns",clickable:!0,onClick:o[21]}}),{c(){r&&r.c(),e=space(),create_component(t.$$.fragment)},m(a,s){r&&r.m(a,s),insert(a,e,s),mount_component(t,a,s),n=!0},p(a,[s]){a[3]?r?(r.p(a,s),s&8&&transition_in(r,1)):(r=create_if_block$_(a),r.c(),transition_in(r,1),r.m(e.parentNode,e)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros());const l={};s&1&&(l.icon=a[0]?"icon columns-outline":"icon columns"),t.$set(l)},i(a){n||(transition_in(r),transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(r),transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),r&&r.d(a),destroy_component(t,a)}}}const matchingProps$8=["conid","database","schemaName","pureName"],allowAddToFavorites$4=o=>!0;function instance$2e(o,e,t){let n,r,a,s,l,u,d=noop$1,f=()=>(d(),d=subscribe(a,D=>t(17,u=D)),a),m,h,p,g,b=noop$1,v=()=>(b(),b=subscribe(n,D=>t(19,g=D)),n),y,C=noop$1,E=()=>(C(),C=subscribe(r,D=>t(20,y=D)),r);component_subscribe(o,extensions,D=>t(18,p=D)),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>b()),o.$$.on_destroy.push(()=>C());let{tabid:A}=e,{conid:k}=e,{database:T}=e,{schemaName:$}=e,{pureName:S}=e;const I=useGridConfig(A);component_subscribe(o,I,D=>t(2,h=D));const R=writable(lib$3.createGridCache());component_subscribe(o,R,D=>t(1,m=D));const N=writable(getLocalStorage("dataGrid_collapsedLeftColumn",!1));component_subscribe(o,N,D=>t(0,l=D)),setContext("collapsedLeftColumnStore",N);const M=createQuickExportHandlerRef(),F=()=>N.update(D=>!D);return o.$$set=D=>{t(11,e=assign(assign({},e),exclude_internal_props(D))),"tabid"in D&&t(12,A=D.tabid),"conid"in D&&t(13,k=D.conid),"database"in D&&t(14,T=D.database),"schemaName"in D&&t(15,$=D.schemaName),"pureName"in D&&t(16,S=D.pureName)},o.$$.update=()=>{o.$$.dirty&8192&&v(t(6,n=useConnectionInfo({conid:k}))),o.$$.dirty&122880&&E(t(5,r=useViewInfo({conid:k,database:T,schemaName:$,pureName:S}))),o.$$.dirty&24576&&f(t(4,a=useDatabaseServerVersion({conid:k,database:T}))),o.$$.dirty&1966086&&t(3,s=y&&g&&u?new lib$3.ViewGridDisplay(y,lib.findEngineDriver(g,p),h,I.update,m,R.update,u):null),o.$$.dirty&1&&setLocalStorage("dataGrid_collapsedLeftColumn",l)},e=exclude_internal_props(e),[l,m,h,s,a,r,n,I,R,N,M,e,A,k,T,$,S,u,p,g,y,F]}class ViewDataTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$2e,create_fragment$2g,safe_not_equal,{tabid:12,conid:13,database:14,schemaName:15,pureName:16})}}const ViewDataTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$4,default:ViewDataTab,matchingProps:matchingProps$8},Symbol.toStringTag,{value:"Module"}));function create_fragment$2f(o){let e,t,n,r=(o[1]||"(without name)")+"",a,s;return t=new FontIcon({props:{icon:getConstraintIcon(o[0])}}),{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a=text(r),attr(e,"class","nowrap")},m(l,u){insert(l,e,u),mount_component(t,e,null),append(e,n),append(e,a),s=!0},p(l,[u]){const d={};u&1&&(d.icon=getConstraintIcon(l[0])),t.$set(d),(!s||u&2)&&r!==(r=(l[1]||"(without name)")+"")&&set_data(a,r)},i(l){s||(transition_in(t.$$.fragment,l),s=!0)},o(l){transition_out(t.$$.fragment,l),s=!1},d(l){l&&detach(e),destroy_component(t)}}}function getConstraintIcon(o){return o=="primaryKey"?"img primary-key":o=="foreignKey"?"img foreign-key":null}function instance$2d(o,e,t){let{constraintType:n}=e,{constraintName:r}=e;return o.$$set=a=>{"constraintType"in a&&t(0,n=a.constraintType),"constraintName"in a&&t(1,r=a.constraintName)},[n,r]}class ConstraintLabel extends SvelteComponent{constructor(e){super(),init(this,e,instance$2d,create_fragment$2f,safe_not_equal,{constraintType:0,constraintName:1})}}const ObjectListControl_svelte_svelte_type_style_lang="",get_name_slot_changes=o=>({row:o&2048,col:o&4096}),get_name_slot_context=o=>({row:o[11],col:o[12]}),get__0_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__0_slot_context$1=o=>({row:o[11],col:o[12]}),get__1_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__1_slot_context$1=o=>({row:o[11],col:o[12]}),get__2_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__2_slot_context$1=o=>({row:o[11],col:o[12]}),get__3_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__3_slot_context$1=o=>({row:o[11],col:o[12]}),get__4_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__4_slot_context$1=o=>({row:o[11],col:o[12]}),get__5_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__5_slot_context$1=o=>({row:o[11],col:o[12]}),get__6_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__6_slot_context$1=o=>({row:o[11],col:o[12]}),get__7_slot_changes$1=o=>({row:o&2048,col:o&4096}),get__7_slot_context$1=o=>({row:o[11],col:o[12]});function create_if_block$Z(o){var h,p;let e,t,n,r,a,s,l,u,d=o[7]&&create_if_block_3$i(o),f=(((h=o[1])==null?void 0:h.length)||0)==0&&o[4]&&create_if_block_2$o(o),m=(((p=o[1])==null?void 0:p.length)>0||o[3])&&create_if_block_1$B(o);return{c(){e=element("div"),t=element("div"),n=element("span"),r=text(o[0]),a=space(),d&&d.c(),s=space(),f&&f.c(),l=space(),m&&m.c(),attr(n,"class","title mr-1 svelte-1um34k6"),attr(t,"class","header svelte-1um34k6"),attr(e,"class","wrapper svelte-1um34k6")},m(g,b){insert(g,e,b),append(e,t),append(t,n),append(n,r),append(t,a),d&&d.m(t,null),append(e,s),f&&f.m(e,null),append(e,l),m&&m.m(e,null),u=!0},p(g,b){var v,y;(!u||b&1)&&set_data(r,g[0]),g[7]?d?(d.p(g,b),b&128&&transition_in(d,1)):(d=create_if_block_3$i(g),d.c(),transition_in(d,1),d.m(t,null)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),(((v=g[1])==null?void 0:v.length)||0)==0&&g[4]?f?f.p(g,b):(f=create_if_block_2$o(g),f.c(),f.m(e,l)):f&&(f.d(1),f=null),((y=g[1])==null?void 0:y.length)>0||g[3]?m?(m.p(g,b),b&10&&transition_in(m,1)):(m=create_if_block_1$B(g),m.c(),transition_in(m,1),m.m(e,null)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(g){u||(transition_in(d),transition_in(m),u=!0)},o(g){transition_out(d),transition_out(m),u=!1},d(g){g&&detach(e),d&&d.d(),f&&f.d(),m&&m.d()}}}function create_if_block_3$i(o){let e,t;return e=new Link$1({props:{onClick:o[7],$$slots:{default:[create_default_slot$P]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&128&&(a.onClick=n[7]),r&1024&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$P(o){let e,t,n;return e=new FontIcon({props:{icon:"icon add"}}),{c(){create_component(e.$$.fragment),t=text(" Add new")},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},p:noop$1,i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_if_block_2$o(o){let e,t;return{c(){e=element("div"),t=text(o[4]),attr(e,"class","body svelte-1um34k6")},m(n,r){insert(n,e,r),append(e,t)},p(n,r){r&16&&set_data(t,n[4])},d(n){n&&detach(e)}}}function create_if_block_1$B(o){let e,t,n;return t=new TableControl({props:{rows:o[1]||[],columns:_.compact([!o[5]&&{fieldName:"displayName",header:"Name",slot:-1},...o[2]]),clickable:o[6],$$slots:{7:[create__7_slot$2,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],6:[create__6_slot$1,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],5:[create__5_slot$4,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],4:[create__4_slot$4,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],3:[create__3_slot$5,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],2:[create__2_slot$i,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],1:[create__1_slot$j,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],0:[create__0_slot$6,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)],"-1":[create__1_slot_1$4,({row:r,col:a})=>({11:r,12:a}),({row:r,col:a})=>(r?2048:0)|(a?4096:0)]},$$scope:{ctx:o}}}),t.$on("clickrow",o[9]),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","body svelte-1um34k6")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&2&&(s.rows=r[1]||[]),a&36&&(s.columns=_.compact([!r[5]&&{fieldName:"displayName",header:"Name",slot:-1},...r[2]])),a&64&&(s.clickable=r[6]),a&7168&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create__1_slot_1$4(o){let e;const t=o[8].name,n=create_slot(t,o,o[10],get_name_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get_name_slot_changes):get_all_dirty_from_scope(r[10]),get_name_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__0_slot$6(o){let e;const t=o[8][0],n=create_slot(t,o,o[10],get__0_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__0_slot_changes$1):get_all_dirty_from_scope(r[10]),get__0_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__1_slot$j(o){let e;const t=o[8][1],n=create_slot(t,o,o[10],get__1_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__1_slot_changes$1):get_all_dirty_from_scope(r[10]),get__1_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__2_slot$i(o){let e;const t=o[8][2],n=create_slot(t,o,o[10],get__2_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__2_slot_changes$1):get_all_dirty_from_scope(r[10]),get__2_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__3_slot$5(o){let e;const t=o[8][3],n=create_slot(t,o,o[10],get__3_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__3_slot_changes$1):get_all_dirty_from_scope(r[10]),get__3_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__4_slot$4(o){let e;const t=o[8][4],n=create_slot(t,o,o[10],get__4_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__4_slot_changes$1):get_all_dirty_from_scope(r[10]),get__4_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__5_slot$4(o){let e;const t=o[8][5],n=create_slot(t,o,o[10],get__5_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__5_slot_changes$1):get_all_dirty_from_scope(r[10]),get__5_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__6_slot$1(o){let e;const t=o[8][6],n=create_slot(t,o,o[10],get__6_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__6_slot_changes$1):get_all_dirty_from_scope(r[10]),get__6_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__7_slot$2(o){let e;const t=o[8][7],n=create_slot(t,o,o[10],get__7_slot_context$1);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&7168)&&update_slot_base(n,t,r,r[10],e?get_slot_changes(t,r[10],a,get__7_slot_changes$1):get_all_dirty_from_scope(r[10]),get__7_slot_context$1)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$2e(o){var r;let e,t,n=(((r=o[1])==null?void 0:r.length)>0||o[3]||o[4])&&create_if_block$Z(o);return{c(){n&&n.c(),e=empty()},m(a,s){n&&n.m(a,s),insert(a,e,s),t=!0},p(a,[s]){var l;((l=a[1])==null?void 0:l.length)>0||a[3]||a[4]?n?(n.p(a,s),s&26&&transition_in(n,1)):(n=create_if_block$Z(a),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(a){t||(transition_in(n),t=!0)},o(a){transition_out(n),t=!1},d(a){a&&detach(e),n&&n.d(a)}}}function instance$2c(o,e,t){let{$$slots:n={},$$scope:r}=e,{title:a}=e,{collection:s}=e,{columns:l}=e,{showIfEmpty:u=!1}=e,{emptyMessage:d=null}=e,{hideDisplayName:f=!1}=e,{clickable:m}=e,{onAddNew:h}=e;function p(g){bubble.call(this,o,g)}return o.$$set=g=>{"title"in g&&t(0,a=g.title),"collection"in g&&t(1,s=g.collection),"columns"in g&&t(2,l=g.columns),"showIfEmpty"in g&&t(3,u=g.showIfEmpty),"emptyMessage"in g&&t(4,d=g.emptyMessage),"hideDisplayName"in g&&t(5,f=g.hideDisplayName),"clickable"in g&&t(6,m=g.clickable),"onAddNew"in g&&t(7,h=g.onAddNew),"$$scope"in g&&t(10,r=g.$$scope)},[a,s,l,u,d,f,m,h,n,p,r]}class ObjectListControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$2c,create_fragment$2e,safe_not_equal,{title:0,collection:1,columns:2,showIfEmpty:3,emptyMessage:4,hideDisplayName:5,clickable:6,onAddNew:7})}}function create_name_slot$1(o){let e,t;const n=[o[8]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ConstraintLabel({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&256?get_spread_update(n,[get_spread_object(a[8])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__0_slot$5(o){var n;let e=((n=o[8])==null?void 0:n.columns.map(func_2$5).join(", "))+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&256&&e!==(e=((s=r[8])==null?void 0:s.columns.map(func_2$5).join(", "))+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create__1_slot$i(o){var n;let e=((n=o[8])==null?void 0:n.columns.map(func_1$a).join(", "))+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&256&&e!==(e=((s=r[8])==null?void 0:s.columns.map(func_1$a).join(", "))+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_default_slot$O(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__2_slot$h(o){let e,t;function n(){return o[6](o[8])}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot$O]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&264&&(s.onClick=n),a&512&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_fragment$2d(o){let e,t;return e=new ObjectListControl({props:{collection:o[0],title:o[1],onAddNew:o[4],clickable:o[2],emptyMessage:o[5],columns:[{fieldName:"baseColumns",header:"Base columns",slot:0},{fieldName:"refTableName",header:"Referenced table"},{fieldName:"refColumns",header:"Referenced columns",slot:1},{fieldName:"updateAction",header:"ON UPDATE"},{fieldName:"deleteAction",header:"ON DELETE"},o[3]?{fieldName:"actions",sortable:!0,slot:2}:null],$$slots:{2:[create__2_slot$h,({row:n})=>({8:n}),({row:n})=>n?256:0],1:[create__1_slot$i,({row:n})=>({8:n}),({row:n})=>n?256:0],0:[create__0_slot$5,({row:n})=>({8:n}),({row:n})=>n?256:0],name:[create_name_slot$1,({row:n})=>({8:n}),({row:n})=>n?256:0]},$$scope:{ctx:o}}}),e.$on("clickrow",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.collection=n[0]),r&2&&(a.title=n[1]),r&16&&(a.onAddNew=n[4]),r&4&&(a.clickable=n[2]),r&32&&(a.emptyMessage=n[5]),r&8&&(a.columns=[{fieldName:"baseColumns",header:"Base columns",slot:0},{fieldName:"refTableName",header:"Referenced table"},{fieldName:"refColumns",header:"Referenced columns",slot:1},{fieldName:"updateAction",header:"ON UPDATE"},{fieldName:"deleteAction",header:"ON DELETE"},n[3]?{fieldName:"actions",sortable:!0,slot:2}:null]),r&776&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func_1$a=o=>o.refColumnName,func_2$5=o=>o.columnName;function instance$2b(o,e,t){let{collection:n}=e,{title:r}=e,{clickable:a}=e,{onRemove:s=null}=e,{onAddNew:l=null}=e,{emptyMessage:u=null}=e;const d=m=>s(m);function f(m){bubble.call(this,o,m)}return o.$$set=m=>{"collection"in m&&t(0,n=m.collection),"title"in m&&t(1,r=m.title),"clickable"in m&&t(2,a=m.clickable),"onRemove"in m&&t(3,s=m.onRemove),"onAddNew"in m&&t(4,l=m.onAddNew),"emptyMessage"in m&&t(5,u=m.emptyMessage)},[n,r,a,s,l,u,d,f]}class ForeignKeyObjectListControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$2b,create_fragment$2d,safe_not_equal,{collection:0,title:1,clickable:2,onRemove:3,onAddNew:4,emptyMessage:5})}}const ForeignKeyEditorModal_svelte_svelte_type_style_lang="";function get_each_context$l(o,e,t){const n=o.slice();return n[27]=e[t],n[29]=t,n}function create_key_block_1$2(o){let e,t;function n(...r){return o[22](o[29],...r)}return e=new SelectField({props:{value:o[27].columnName,isNative:!0,notSelected:!0,options:o[2].columns.map(func_1$9)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&128&&(s.value=o[27].columnName),a&4&&(s.options=o[2].columns.map(func_1$9)),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_key_block$7(o){var r;let e,t;function n(...a){return o[23](o[29],...a)}return e=new SelectField({props:{value:o[27].refColumnName,isNative:!0,notSelected:!0,options:(((r=o[10])==null?void 0:r.columns)||[]).map(func_2$4)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;o=a;const l={};s&128&&(l.value=o[27].refColumnName),s&1024&&(l.options=(((u=o[10])==null?void 0:u.columns)||[]).map(func_2$4)),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_each_block$l(o){let e,t,n=o[27].columnName,r,a,s=o[27].refColumnName,l,u,d,f,m=create_key_block_1$2(o),h=create_key_block$7(o);function p(...g){return o[24](o[29],...g)}return d=new FormStyledButton({props:{value:"Delete"}}),d.$on("click",p),{c(){e=element("div"),t=element("div"),m.c(),r=space(),a=element("div"),h.c(),l=space(),u=element("div"),create_component(d.$$.fragment),attr(t,"class","col-5 mr-1"),attr(a,"class","col-5 ml-1"),attr(u,"class","col-2 button svelte-1ecnyiy"),attr(e,"class","row svelte-1ecnyiy")},m(g,b){insert(g,e,b),append(e,t),m.m(t,null),append(e,r),append(e,a),h.m(a,null),append(e,l),append(e,u),mount_component(d,u,null),f=!0},p(g,b){o=g,b&128&&safe_not_equal(n,n=o[27].columnName)?(group_outros(),transition_out(m,1,1,noop$1),check_outros(),m=create_key_block_1$2(o),m.c(),transition_in(m,1),m.m(t,null)):m.p(o,b),b&128&&safe_not_equal(s,s=o[27].refColumnName)?(group_outros(),transition_out(h,1,1,noop$1),check_outros(),h=create_key_block$7(o),h.c(),transition_in(h,1),h.m(a,null)):h.p(o,b)},i(g){f||(transition_in(m),transition_in(h),transition_in(d.$$.fragment,g),f=!0)},o(g){transition_out(m),transition_out(h),transition_out(d.$$.fragment,g),f=!1},d(g){g&&detach(e),m.d(g),h.d(g),destroy_component(d)}}}function create_default_slot_1$s(o){var Q;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F=o[2].pureName+"",D,x,B,K,U=(o[4]||"(table not set)")+"",G,W,q,H,z;s=new TextField({props:{value:o[6],focused:!0}}),s.$on("input",o[17]),h=new SelectField({props:{value:lib.fullNameToString({pureName:o[4],schemaName:o[5]}),isNative:!0,notSelected:!0,options:_.sortBy(((Q=o[3])==null?void 0:Q.tables)||[],["schemaName","pureName"]).map(o[18])}}),h.$on("change",o[19]),C=new SelectField({props:{value:o[9],isNative:!0,notSelected:!0,options:o[11]}}),C.$on("change",o[20]),S=new SelectField({props:{value:o[8],isNative:!0,notSelected:!0,options:o[11]}}),S.$on("change",o[21]);let Y=ensure_array_like(o[7]),V=[];for(let X=0;X<Y.length;X+=1)V[X]=create_each_block$l(get_each_context$l(o,Y,X));const J=X=>transition_out(V[X],1,1,()=>{V[X]=null});return H=new FormStyledButton({props:{type:"button",value:"Add column"}}),H.$on("click",o[25]),{c(){e=element("div"),t=element("div"),n=element("div"),n.textContent="Constraint name",r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),u=element("div"),d=element("div"),d.textContent="Referenced table",f=space(),m=element("div"),create_component(h.$$.fragment),p=space(),g=element("div"),b=element("div"),b.textContent="On update action",v=space(),y=element("div"),create_component(C.$$.fragment),E=space(),A=element("div"),k=element("div"),k.textContent="On delete action",T=space(),$=element("div"),create_component(S.$$.fragment),I=space(),R=element("div"),N=element("div"),M=text("Base column - "),D=text(F),x=space(),B=element("div"),K=text("Ref column - "),G=text(U),W=space();for(let X=0;X<V.length;X+=1)V[X].c();q=space(),create_component(H.$$.fragment),attr(n,"class","label col-3 svelte-1ecnyiy"),attr(a,"class","col-9"),attr(t,"class","row svelte-1ecnyiy"),attr(d,"class","label col-3 svelte-1ecnyiy"),attr(m,"class","col-9"),attr(u,"class","row svelte-1ecnyiy"),attr(b,"class","label col-3 svelte-1ecnyiy"),attr(y,"class","col-9"),attr(g,"class","row svelte-1ecnyiy"),attr(k,"class","label col-3 svelte-1ecnyiy"),attr($,"class","col-9"),attr(A,"class","row svelte-1ecnyiy"),attr(N,"class","col-5 mr-1"),attr(B,"class","col-5 ml-1"),attr(R,"class","row svelte-1ecnyiy"),attr(e,"class","largeFormMarker")},m(X,ie){insert(X,e,ie),append(e,t),append(t,n),append(t,r),append(t,a),mount_component(s,a,null),append(e,l),append(e,u),append(u,d),append(u,f),append(u,m),mount_component(h,m,null),append(e,p),append(e,g),append(g,b),append(g,v),append(g,y),mount_component(C,y,null),append(e,E),append(e,A),append(A,k),append(A,T),append(A,$),mount_component(S,$,null),append(e,I),append(e,R),append(R,N),append(N,M),append(N,D),append(R,x),append(R,B),append(B,K),append(B,G),append(e,W);for(let ce=0;ce<V.length;ce+=1)V[ce]&&V[ce].m(e,null);append(e,q),mount_component(H,e,null),z=!0},p(X,ie){var ue;const ce={};ie&64&&(ce.value=X[6]),s.$set(ce);const de={};ie&48&&(de.value=lib.fullNameToString({pureName:X[4],schemaName:X[5]})),ie&8&&(de.options=_.sortBy(((ue=X[3])==null?void 0:ue.tables)||[],["schemaName","pureName"]).map(X[18])),h.$set(de);const se={};ie&512&&(se.value=X[9]),C.$set(se);const me={};if(ie&256&&(me.value=X[8]),S.$set(me),(!z||ie&4)&&F!==(F=X[2].pureName+"")&&set_data(D,F),(!z||ie&16)&&U!==(U=(X[4]||"(table not set)")+"")&&set_data(G,U),ie&1156){Y=ensure_array_like(X[7]);let he;for(he=0;he<Y.length;he+=1){const pe=get_each_context$l(X,Y,he);V[he]?(V[he].p(pe,ie),transition_in(V[he],1)):(V[he]=create_each_block$l(pe),V[he].c(),transition_in(V[he],1),V[he].m(e,q))}for(group_outros(),he=Y.length;he<V.length;he+=1)J(he);check_outros()}},i(X){if(!z){transition_in(s.$$.fragment,X),transition_in(h.$$.fragment,X),transition_in(C.$$.fragment,X),transition_in(S.$$.fragment,X);for(let ie=0;ie<Y.length;ie+=1)transition_in(V[ie]);transition_in(H.$$.fragment,X),z=!0}},o(X){transition_out(s.$$.fragment,X),transition_out(h.$$.fragment,X),transition_out(C.$$.fragment,X),transition_out(S.$$.fragment,X),V=V.filter(Boolean);for(let ie=0;ie<V.length;ie+=1)transition_out(V[ie]);transition_out(H.$$.fragment,X),z=!1},d(X){X&&detach(e),destroy_component(s),destroy_component(h),destroy_component(C),destroy_component(S),destroy_each(V,X),destroy_component(H)}}}function create_header_slot$d(o){let e=o[0]?"Edit foreign key":"Add foreign key",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&1&&e!==(e=n[0]?"Edit foreign key":"Add foreign key")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block$Y(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Remove"}}),e.$on("click",o[16]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$c(o){let e,t,n,r,a,s;e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[15]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal);let l=o[0]&&create_if_block$Y(o);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),l&&l.c(),a=empty()},m(u,d){mount_component(e,u,d),insert(u,t,d),mount_component(n,u,d),insert(u,r,d),l&&l.m(u,d),insert(u,a,d),s=!0},p(u,d){u[0]?l?(l.p(u,d),d&1&&transition_in(l,1)):(l=create_if_block$Y(u),l.c(),transition_in(l,1),l.m(a.parentNode,a)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){s||(transition_in(e.$$.fragment,u),transition_in(n.$$.fragment,u),transition_in(l),s=!0)},o(u){transition_out(e.$$.fragment,u),transition_out(n.$$.fragment,u),transition_out(l),s=!1},d(u){u&&(detach(t),detach(r),detach(a)),destroy_component(e,u),destroy_component(n,u),l&&l.d(u)}}}function create_default_slot$N(o){let e,t;const n=[o[13]];let r={$$slots:{footer:[create_footer_slot$c],header:[create_header_slot$d],default:[create_default_slot_1$s]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8192?get_spread_update(n,[get_spread_object(a[13])]):{};s&1073743871&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2c(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$N]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1073752063&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func_1$9=o=>({label:o.columnName,value:o.columnName}),func_2$4=o=>({label:o.columnName,value:o.columnName});function instance$2a(o,e,t){let n;const r=["constraintInfo","setTableInfo","tableInfo","dbInfo"];let a=compute_rest_props(e,r);var s;let{constraintInfo:l}=e,{setTableInfo:u}=e,{tableInfo:d}=e,{dbInfo:f}=e;const h=["noAction","cascade","restrict","setNull"].map(x=>({label:_.startCase(x),value:x}));let p=l==null?void 0:l.constraintName,g=(l==null?void 0:l.columns)||[],b=l==null?void 0:l.refTableName,v=l==null?void 0:l.refSchemaName,y=l!=null&&l.deleteAction?_.camelCase(l==null?void 0:l.deleteAction):null,C=l!=null&&l.updateAction?_.camelCase(l==null?void 0:l.updateAction):null;function E(){return Object.assign(Object.assign({pairingId:uuidv1()},l),{columns:g,pureName:d.pureName,schemaName:d.schemaName,constraintName:p,constraintType:"foreignKey",refTableName:b,refSchemaName:v,deleteAction:_.startCase(y).toUpperCase(),updateAction:_.startCase(C).toUpperCase()})}const A=()=>{closeCurrentModal(),u(l?x=>lib.editorModifyConstraint(x,E()):x=>lib.editorAddConstraint(x,E()))},k=()=>{closeCurrentModal(),u(x=>lib.editorDeleteConstraint(x,l))},T=x=>t(6,p=x.target.value),$=x=>({label:lib.fullNameToLabel(x),value:lib.fullNameToString(x)}),S=x=>{if(x.detail){const B=lib.fullNameFromString(x.detail);t(4,b=B.pureName),t(5,v=B.schemaName)}},I=x=>{t(9,C=x.detail||null)},R=x=>{t(8,y=x.detail||null)},N=(x,B)=>{B.detail&&t(7,g=g.map((K,U)=>U==x?{...K,columnName:B.detail}:K))},M=(x,B)=>{B.detail&&t(7,g=g.map((K,U)=>U==x?{...K,refColumnName:B.detail}:K))},F=(x,B)=>{const K=[...g];K.splice(x,1),t(7,g=K)},D=()=>{t(7,g=[...g,{}])};return o.$$set=x=>{e=assign(assign({},e),exclude_internal_props(x)),t(13,a=compute_rest_props(e,r)),"constraintInfo"in x&&t(0,l=x.constraintInfo),"setTableInfo"in x&&t(1,u=x.setTableInfo),"tableInfo"in x&&t(2,d=x.tableInfo),"dbInfo"in x&&t(3,f=x.dbInfo)},o.$$.update=()=>{o.$$.dirty&16440&&t(10,n=t(14,s=f==null?void 0:f.tables)===null||s===void 0?void 0:s.find(x=>x.pureName==b&&x.schemaName==v))},[l,u,d,f,b,v,p,g,y,C,n,h,E,a,s,A,k,T,$,S,I,R,N,M,F,D]}class ForeignKeyEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$2a,create_fragment$2c,safe_not_equal,{constraintInfo:0,setTableInfo:1,tableInfo:2,dbInfo:3})}}const ColumnsConstraintEditorModal_svelte_svelte_type_style_lang="";function get_each_context$k(o,e,t){const n=o.slice();return n[21]=e[t],n[23]=t,n}const get_column_slot_changes=o=>({column:o&64,setColumns:o&64}),get_column_slot_context=o=>({column:o[21],setColumns:o[17],index:o[23]}),get_constraintProps_slot_changes=o=>({}),get_constraintProps_slot_context=o=>({});function create_if_block_2$n(o){let e;const t=o[12].constraintProps,n=create_slot(t,o,o[20],get_constraintProps_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&1048576)&&update_slot_base(n,t,r,r[20],e?get_slot_changes(t,r[20],a,get_constraintProps_slot_changes):get_all_dirty_from_scope(r[20]),get_constraintProps_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_key_block_1$1(o){let e,t;function n(...r){return o[16](o[23],...r)}return e=new SelectField({props:{value:o[21].columnName,isNative:!0,options:o[2].columns.map(func$a)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&64&&(s.value=o[21].columnName),a&4&&(s.options=o[2].columns.map(func$a)),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block_1$A(o){let e,t;const n=o[12].column,r=create_slot(n,o,o[20],get_column_slot_context);return{c(){e=element("div"),r&&r.c(),attr(e,"class","col-3")},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&1048640)&&update_slot_base(r,n,a,a[20],t?get_slot_changes(n,a[20],s,get_column_slot_changes):get_all_dirty_from_scope(a[20]),get_column_slot_context)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_each_block$k(o){let e,t,n,r,a=o[21].columnName,s,l,u,d,f,m,h=create_key_block_1$1(o),p=o[9].column&&create_if_block_1$A(o);function g(...b){return o[18](o[23],...b)}return f=new FormStyledButton({props:{value:"Delete"}}),f.$on("click",g),{c(){e=element("div"),t=element("div"),t.textContent=`Column ${o[23]+1}`,n=space(),r=element("div"),h.c(),l=space(),p&&p.c(),u=space(),d=element("div"),create_component(f.$$.fragment),attr(t,"class","label col-3 svelte-1ecnyiy"),attr(r,"class",s=o[9].column?"col-3":"col-6"),attr(d,"class","col-3 button svelte-1ecnyiy"),attr(e,"class","row svelte-1ecnyiy")},m(b,v){insert(b,e,v),append(e,t),append(e,n),append(e,r),h.m(r,null),append(e,l),p&&p.m(e,null),append(e,u),append(e,d),mount_component(f,d,null),m=!0},p(b,v){o=b,v&64&&safe_not_equal(a,a=o[21].columnName)?(group_outros(),transition_out(h,1,1,noop$1),check_outros(),h=create_key_block_1$1(o),h.c(),transition_in(h,1),h.m(r,null)):h.p(o,v),(!m||v&512&&s!==(s=o[9].column?"col-3":"col-6"))&&attr(r,"class",s),o[9].column?p?(p.p(o,v),v&512&&transition_in(p,1)):(p=create_if_block_1$A(o),p.c(),transition_in(p,1),p.m(e,u)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(b){m||(transition_in(h),transition_in(p),transition_in(f.$$.fragment,b),m=!0)},o(b){transition_out(h),transition_out(p),transition_out(f.$$.fragment,b),m=!1},d(b){b&&detach(e),h.d(b),p&&p.d(),destroy_component(f)}}}function create_key_block$6(o){var n,r;let e,t;return e=new SelectField({props:{placeholder:"Select column",value:"",isNative:!0,options:[{label:"Choose column",value:""},...((r=(n=o[2])==null?void 0:n.columns)==null?void 0:r.map(func_2$3))||[]]}}),e.$on("change",o[19]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s&4&&(l.options=[{label:"Choose column",value:""},...((d=(u=a[2])==null?void 0:u.columns)==null?void 0:d.map(func_2$3))||[]]),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot_1$r(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b=o[6].length,v;l=new TextField({props:{value:o[5],focused:!0}}),l.$on("input",o[15]);let y=o[9].constraintProps&&create_if_block_2$n(o),C=ensure_array_like(o[6]),E=[];for(let T=0;T<C.length;T+=1)E[T]=create_each_block$k(get_each_context$k(o,C,T));const A=T=>transition_out(E[T],1,1,()=>{E[T]=null});let k=create_key_block$6(o);return{c(){e=element("div"),t=element("div"),n=element("div"),r=text(o[4]),a=space(),s=element("div"),create_component(l.$$.fragment),u=space(),y&&y.c(),d=space();for(let T=0;T<E.length;T+=1)E[T].c();f=space(),m=element("div"),h=element("div"),h.textContent="Add new column",p=space(),g=element("div"),k.c(),attr(n,"class","label col-3 svelte-1ecnyiy"),attr(s,"class","col-9"),attr(t,"class","row svelte-1ecnyiy"),attr(h,"class","label col-3 svelte-1ecnyiy"),attr(g,"class","col-9"),attr(m,"class","row svelte-1ecnyiy"),attr(e,"class","largeFormMarker")},m(T,$){insert(T,e,$),append(e,t),append(t,n),append(n,r),append(t,a),append(t,s),mount_component(l,s,null),append(e,u),y&&y.m(e,null),append(e,d);for(let S=0;S<E.length;S+=1)E[S]&&E[S].m(e,null);append(e,f),append(e,m),append(m,h),append(m,p),append(m,g),k.m(g,null),v=!0},p(T,$){(!v||$&16)&&set_data(r,T[4]);const S={};if($&32&&(S.value=T[5]),l.$set(S),T[9].constraintProps?y?(y.p(T,$),$&512&&transition_in(y,1)):(y=create_if_block_2$n(T),y.c(),transition_in(y,1),y.m(e,d)):y&&(group_outros(),transition_out(y,1,1,()=>{y=null}),check_outros()),$&1049156){C=ensure_array_like(T[6]);let I;for(I=0;I<C.length;I+=1){const R=get_each_context$k(T,C,I);E[I]?(E[I].p(R,$),transition_in(E[I],1)):(E[I]=create_each_block$k(R),E[I].c(),transition_in(E[I],1),E[I].m(e,f))}for(group_outros(),I=C.length;I<E.length;I+=1)A(I);check_outros()}$&64&&safe_not_equal(b,b=T[6].length)?(group_outros(),transition_out(k,1,1,noop$1),check_outros(),k=create_key_block$6(T),k.c(),transition_in(k,1),k.m(g,null)):k.p(T,$)},i(T){if(!v){transition_in(l.$$.fragment,T),transition_in(y);for(let $=0;$<C.length;$+=1)transition_in(E[$]);transition_in(k),v=!0}},o(T){transition_out(l.$$.fragment,T),transition_out(y),E=E.filter(Boolean);for(let $=0;$<E.length;$+=1)transition_out(E[$]);transition_out(k),v=!1},d(T){T&&detach(e),destroy_component(l),y&&y.d(),destroy_each(E,T),k.d(T)}}}function create_header_slot$c(o){let e=o[0]?`Edit ${o[3]}`:`Add ${o[3]}`,t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&9&&e!==(e=n[0]?`Edit ${n[3]}`:`Add ${n[3]}`)&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block$X(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Remove"}}),e.$on("click",o[14]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$b(o){let e,t,n,r,a,s;e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[13]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal);let l=o[0]&&create_if_block$X(o);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),l&&l.c(),a=empty()},m(u,d){mount_component(e,u,d),insert(u,t,d),mount_component(n,u,d),insert(u,r,d),l&&l.m(u,d),insert(u,a,d),s=!0},p(u,d){u[0]?l?(l.p(u,d),d&1&&transition_in(l,1)):(l=create_if_block$X(u),l.c(),transition_in(l,1),l.m(a.parentNode,a)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){s||(transition_in(e.$$.fragment,u),transition_in(n.$$.fragment,u),transition_in(l),s=!0)},o(u){transition_out(e.$$.fragment,u),transition_out(n.$$.fragment,u),transition_out(l),s=!1},d(u){u&&(detach(t),detach(r),detach(a)),destroy_component(e,u),destroy_component(n,u),l&&l.d(u)}}}function create_default_slot$M(o){let e,t;const n=[o[8]];let r={$$slots:{footer:[create_footer_slot$b],header:[create_header_slot$c],default:[create_default_slot_1$r]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&256?get_spread_update(n,[get_spread_object(a[8])]):{};s&1049215&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$2b(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$M]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1049471&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$a=o=>({label:o.columnName,value:o.columnName}),func_2$3=o=>({label:o.columnName,value:o.columnName});function instance$29(o,e,t){const n=["constraintInfo","setTableInfo","tableInfo","constraintLabel","constraintType","constraintNameLabel","getExtractConstraintProps"];let r=compute_rest_props(e,n),{$$slots:a={},$$scope:s}=e;const l=compute_slots(a);let{constraintInfo:u}=e,{setTableInfo:d}=e,{tableInfo:f}=e,{constraintLabel:m}=e,{constraintType:h}=e,{constraintNameLabel:p="Constraint name"}=e,{getExtractConstraintProps:g}=e,b=u==null?void 0:u.constraintName,v=(u==null?void 0:u.columns)||[];function y(){return Object.assign(Object.assign(Object.assign({pairingId:uuidv1()},u),{columns:v,pureName:f.pureName,schemaName:f.schemaName,constraintName:b,constraintType:h}),g?g():{})}const C=()=>{closeCurrentModal(),d(u?I=>lib.editorModifyConstraint(I,y()):I=>lib.editorAddConstraint(I,y()))},E=()=>{closeCurrentModal(),d(I=>lib.editorDeleteConstraint(I,u))},A=I=>t(5,b=I.target.value),k=(I,R)=>{R.detail&&t(6,v=v.map((N,M)=>M==I?{columnName:R.detail}:N))},T=I=>t(6,v=I(v)),$=(I,R)=>{const N=[...v];N.splice(I,1),t(6,v=N)},S=I=>{I.detail&&t(6,v=[...v,{columnName:I.detail}])};return o.$$set=I=>{e=assign(assign({},e),exclude_internal_props(I)),t(8,r=compute_rest_props(e,n)),"constraintInfo"in I&&t(0,u=I.constraintInfo),"setTableInfo"in I&&t(1,d=I.setTableInfo),"tableInfo"in I&&t(2,f=I.tableInfo),"constraintLabel"in I&&t(3,m=I.constraintLabel),"constraintType"in I&&t(10,h=I.constraintType),"constraintNameLabel"in I&&t(4,p=I.constraintNameLabel),"getExtractConstraintProps"in I&&t(11,g=I.getExtractConstraintProps),"$$scope"in I&&t(20,s=I.$$scope)},[u,d,f,m,p,b,v,y,r,l,h,g,a,C,E,A,k,T,$,S,s]}class ColumnsConstraintEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$29,create_fragment$2b,safe_not_equal,{constraintInfo:0,setTableInfo:1,tableInfo:2,constraintLabel:3,constraintType:10,constraintNameLabel:4,getExtractConstraintProps:11})}}const IndexEditorModal_svelte_svelte_type_style_lang="";function create_column_slot(o){let e,t;function n(...r){return o[7](o[9],o[10],...r)}return e=new SelectField({props:{value:o[8].isDescending?"desc":"asc",isNative:!0,options:[{label:"ASC",value:"asc"},{label:"DESC",value:"desc"}]}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&256&&(s.value=o[8].isDescending?"desc":"asc"),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_constraintProps_slot(o){let e,t,n,r,a;return n=new CheckboxField({props:{checked:o[3]}}),n.$on("change",o[6]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=text(" Is unique index"),attr(t,"class","row svelte-10d5vjg"),attr(e,"class","largeFormMarker")},m(s,l){insert(s,e,l),append(e,t),mount_component(n,t,null),append(t,r),a=!0},p(s,l){const u={};l&8&&(u.checked=s[3]),n.$set(u)},i(s){a||(transition_in(n.$$.fragment,s),a=!0)},o(s){transition_out(n.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(n)}}}function create_fragment$2a(o){let e,t;const n=[o[5],{constraintLabel:"index"},{constraintType:"index"},{constraintNameLabel:"Index name"},{constraintInfo:o[0]},{setTableInfo:o[1]},{tableInfo:o[2]},{getExtractConstraintProps:o[4]}];let r={$$slots:{constraintProps:[create_constraintProps_slot],column:[create_column_slot,({column:a,setColumns:s,index:l})=>({8:a,9:s,10:l}),({column:a,setColumns:s,index:l})=>(a?256:0)|(s?512:0)|(l?1024:0)]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ColumnsConstraintEditorModal({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&55?get_spread_update(n,[s&32&&get_spread_object(a[5]),n[1],n[2],n[3],s&1&&{constraintInfo:a[0]},s&2&&{setTableInfo:a[1]},s&4&&{tableInfo:a[2]},s&16&&{getExtractConstraintProps:a[4]}]):{};s&3848&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$28(o,e,t){const n=["constraintInfo","setTableInfo","tableInfo"];let r=compute_rest_props(e,n),{constraintInfo:a}=e,{setTableInfo:s}=e,{tableInfo:l}=e,u=a==null?void 0:a.isUnique;function d(){return{isUnique:u}}const f=h=>t(3,u=h.target.checked),m=(h,p,g)=>{h(b=>b.map((v,y)=>y==p?{...v,isDescending:g.detail=="desc"}:v))};return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(5,r=compute_rest_props(e,n)),"constraintInfo"in h&&t(0,a=h.constraintInfo),"setTableInfo"in h&&t(1,s=h.setTableInfo),"tableInfo"in h&&t(2,l=h.tableInfo)},[a,s,l,u,d,r,f,m]}class IndexEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$28,create_fragment$2a,safe_not_equal,{constraintInfo:0,setTableInfo:1,tableInfo:2})}}function create_fragment$29(o){let e,t;const n=[o[3],{constraintLabel:"primary key"},{constraintType:"primaryKey"},{constraintInfo:o[0]},{setTableInfo:o[1]},{tableInfo:o[2]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ColumnsConstraintEditorModal({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&15?get_spread_update(n,[s&8&&get_spread_object(a[3]),n[1],n[2],s&1&&{constraintInfo:a[0]},s&2&&{setTableInfo:a[1]},s&4&&{tableInfo:a[2]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$27(o,e,t){const n=["constraintInfo","setTableInfo","tableInfo"];let r=compute_rest_props(e,n),{constraintInfo:a}=e,{setTableInfo:s}=e,{tableInfo:l}=e;return o.$$set=u=>{e=assign(assign({},e),exclude_internal_props(u)),t(3,r=compute_rest_props(e,n)),"constraintInfo"in u&&t(0,a=u.constraintInfo),"setTableInfo"in u&&t(1,s=u.setTableInfo),"tableInfo"in u&&t(2,l=u.tableInfo)},[a,s,l,r]}class PrimaryKeyEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$27,create_fragment$29,safe_not_equal,{constraintInfo:0,setTableInfo:1,tableInfo:2})}}function create_fragment$28(o){let e,t;const n=[o[3],{constraintLabel:"unique"},{constraintType:"unique"},{constraintInfo:o[0]},{setTableInfo:o[1]},{tableInfo:o[2]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ColumnsConstraintEditorModal({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&15?get_spread_update(n,[s&8&&get_spread_object(a[3]),n[1],n[2],s&1&&{constraintInfo:a[0]},s&2&&{setTableInfo:a[1]},s&4&&{tableInfo:a[2]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$26(o,e,t){const n=["constraintInfo","setTableInfo","tableInfo"];let r=compute_rest_props(e,n),{constraintInfo:a}=e,{setTableInfo:s}=e,{tableInfo:l}=e;return o.$$set=u=>{e=assign(assign({},e),exclude_internal_props(u)),t(3,r=compute_rest_props(e,n)),"constraintInfo"in u&&t(0,a=u.constraintInfo),"setTableInfo"in u&&t(1,s=u.setTableInfo),"tableInfo"in u&&t(2,l=u.tableInfo)},[a,s,l,r]}class UniqueEditorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$26,create_fragment$28,safe_not_equal,{constraintInfo:0,setTableInfo:1,tableInfo:2})}}const TableEditor_svelte_svelte_type_style_lang="";function create__0_slot_3(o){var n;let e=(n=o[29])!=null&&n.notNull?"NOT NULL":"NULL",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.notNull?"NOT NULL":"NULL")&&set_data(t,e)},d(r){r&&detach(t)}}}function create__1_slot_3$1(o){var n;let e=(n=o[29])!=null&&n.isSparse?"YES":"NO",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.isSparse?"YES":"NO")&&set_data(t,e)},d(r){r&&detach(t)}}}function create__2_slot_1$3(o){var n;let e=(n=o[29])!=null&&n.isPersisted?"YES":"NO",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.isPersisted?"YES":"NO")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_default_slot_3$c(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__3_slot$4(o){let e,t;function n(...r){return o[18](o[29],...r)}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot_3$c]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&536870914&&(s.onClick=n),a&1073741824&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__4_slot$3(o){var n;let e=(n=o[29])!=null&&n.isUnsigned?"YES":"NO",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.isUnsigned?"YES":"NO")&&set_data(t,e)},d(r){r&&detach(t)}}}function create__5_slot$3(o){var n;let e=(n=o[29])!=null&&n.isZerofill?"YES":"NO",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.isZerofill?"YES":"NO")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_name_slot_3(o){let e,t;const n=[o[29],{forceIcon:!0}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ColumnLabel({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&536870912?get_spread_update(n,[get_spread_object(a[29]),n[1]]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_name_slot_2(o){let e,t;const n=[o[29]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ConstraintLabel({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&536870912?get_spread_update(n,[get_spread_object(a[29])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__0_slot_2(o){var n;let e=((n=o[29])==null?void 0:n.columns.map(func_3$3).join(", "))+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=((s=r[29])==null?void 0:s.columns.map(func_3$3).join(", "))+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_default_slot_2$e(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__1_slot_2$1(o){let e,t;function n(...r){return o[20](o[29],...r)}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot_2$e]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&536870914&&(s.onClick=n),a&1073741824&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_name_slot_1(o){let e,t;const n=[o[29]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ConstraintLabel({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&536870912?get_spread_update(n,[get_spread_object(a[29])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__0_slot_1(o){var n;let e=((n=o[29])==null?void 0:n.columns.map(func_5).join(", "))+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=((s=r[29])==null?void 0:s.columns.map(func_5).join(", "))+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create__1_slot_1$3(o){var n;let e=(n=o[29])!=null&&n.isUnique?"YES":"NO",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=(s=r[29])!=null&&s.isUnique?"YES":"NO")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_default_slot_1$q(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__2_slot$g(o){let e,t;function n(...r){return o[22](o[29],...r)}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot_1$q]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&536870914&&(s.onClick=n),a&1073741824&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_name_slot(o){let e,t;const n=[o[29]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ConstraintLabel({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&536870912?get_spread_update(n,[get_spread_object(a[29])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__0_slot$4(o){var n;let e=((n=o[29])==null?void 0:n.columns.map(func_7).join(", "))+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&536870912&&e!==(e=((s=r[29])==null?void 0:s.columns.map(func_7).join(", "))+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_default_slot$L(o){let e;return{c(){e=text("Remove")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__1_slot$h(o){let e,t;function n(...r){return o[24](o[29],...r)}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot$L]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&536870914&&(s.onClick=n),a&1073741824&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_fragment$27(o){var g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F,D,x,B,K,U,G,W,q;let e,t,n,r,a,s,l,u,d,f,m,h,p;return t=new ObjectListControl({props:{collection:(g=o[15])==null?void 0:g.map(func_1$8),title:`Columns (${((b=o[15])==null?void 0:b.length)||0})`,emptyMessage:"No columns defined",clickable:o[4](),onAddNew:o[4]()?o[5]:null,columns:[{fieldName:"notNull",header:"Nullability",sortable:!0,slot:0},{fieldName:"dataType",header:"Data Type",sortable:!0},{fieldName:"defaultValue",header:"Default value",sortable:!0},((C=(y=(v=o[3])==null?void 0:v.dialect)==null?void 0:y.columnProperties)==null?void 0:C.isSparse)&&{fieldName:"isSparse",header:"Is Sparse",sortable:!0,slot:1},{fieldName:"computedExpression",header:"Computed Expression",sortable:!0},((k=(A=(E=o[3])==null?void 0:E.dialect)==null?void 0:A.columnProperties)==null?void 0:k.isPersisted)&&{fieldName:"isPersisted",header:"Is Persisted",sortable:!0,slot:2},((S=($=(T=o[3])==null?void 0:T.dialect)==null?void 0:$.columnProperties)==null?void 0:S.isUnsigned)&&{fieldName:"isUnsigned",header:"Unsigned",sortable:!0,slot:4},((N=(R=(I=o[3])==null?void 0:I.dialect)==null?void 0:R.columnProperties)==null?void 0:N.isZerofill)&&{fieldName:"isZerofill",header:"Zero fill",sortable:!0,slot:5},((D=(F=(M=o[3])==null?void 0:M.dialect)==null?void 0:F.columnProperties)==null?void 0:D.columnComment)&&{fieldName:"columnComment",header:"Comment",sortable:!0},o[4]()?{fieldName:"actions",sortable:!0,slot:3}:null],$$slots:{name:[create_name_slot_3,({row:H})=>({29:H}),({row:H})=>H?536870912:0],5:[create__5_slot$3,({row:H})=>({29:H}),({row:H})=>H?536870912:0],4:[create__4_slot$3,({row:H})=>({29:H}),({row:H})=>H?536870912:0],3:[create__3_slot$4,({row:H})=>({29:H}),({row:H})=>H?536870912:0],2:[create__2_slot_1$3,({row:H})=>({29:H}),({row:H})=>H?536870912:0],1:[create__1_slot_3$1,({row:H})=>({29:H}),({row:H})=>H?536870912:0],0:[create__0_slot_3,({row:H})=>({29:H}),({row:H})=>H?536870912:0]},$$scope:{ctx:o}}}),t.$on("clickrow",o[19]),r=new ObjectListControl({props:{collection:_.compact([o[14]]),title:"Primary key",emptyMessage:o[4]()?"No primary key defined":null,onAddNew:o[4]()&&!o[14]&&((x=o[15])==null?void 0:x.length)>0?o[6]:null,clickable:o[4](),columns:[{fieldName:"columns",header:"Columns",slot:0},o[4]()?{fieldName:"actions",sortable:!0,slot:1}:null],$$slots:{1:[create__1_slot_2$1,({row:H})=>({29:H}),({row:H})=>H?536870912:0],0:[create__0_slot_2,({row:H})=>({29:H}),({row:H})=>H?536870912:0],name:[create_name_slot_2,({row:H})=>({29:H}),({row:H})=>H?536870912:0]},$$scope:{ctx:o}}}),r.$on("clickrow",o[21]),s=new ObjectListControl({props:{collection:o[11],onAddNew:o[4]()&&((B=o[15])==null?void 0:B.length)>0?o[8]:null,title:`Indexes (${((K=o[11])==null?void 0:K.length)||0})`,emptyMessage:o[4]()?"No index defined":null,clickable:o[4](),columns:[{fieldName:"columns",header:"Columns",slot:0},{fieldName:"unique",header:"Unique",slot:1},o[4]()?{fieldName:"actions",sortable:!0,slot:2}:null],$$slots:{2:[create__2_slot$g,({row:H})=>({29:H}),({row:H})=>H?536870912:0],1:[create__1_slot_1$3,({row:H})=>({29:H}),({row:H})=>H?536870912:0],0:[create__0_slot_1,({row:H})=>({29:H}),({row:H})=>H?536870912:0],name:[create_name_slot_1,({row:H})=>({29:H}),({row:H})=>H?536870912:0]},$$scope:{ctx:o}}}),s.$on("clickrow",o[23]),u=new ObjectListControl({props:{collection:o[10],onAddNew:o[4]()&&((U=o[15])==null?void 0:U.length)>0?o[9]:null,title:`Unique constraints (${((G=o[10])==null?void 0:G.length)||0})`,emptyMessage:o[4]()?"No unique defined":null,clickable:o[4](),columns:[{fieldName:"columns",header:"Columns",slot:0},o[4]()?{fieldName:"actions",sortable:!0,slot:1}:null],$$slots:{1:[create__1_slot$h,({row:H})=>({29:H}),({row:H})=>H?536870912:0],0:[create__0_slot$4,({row:H})=>({29:H}),({row:H})=>H?536870912:0],name:[create_name_slot,({row:H})=>({29:H}),({row:H})=>H?536870912:0]},$$scope:{ctx:o}}}),u.$on("clickrow",o[25]),f=new ForeignKeyObjectListControl({props:{collection:o[13],onAddNew:o[4]()&&((W=o[15])==null?void 0:W.length)>0?o[7]:null,title:`Foreign keys (${((q=o[13])==null?void 0:q.length)||0})`,emptyMessage:o[4]()?"No foreign key defined":null,clickable:o[4](),onRemove:o[26]}}),f.$on("clickrow",o[27]),h=new ForeignKeyObjectListControl({props:{collection:o[12],title:"Dependencies"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),d=space(),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),attr(e,"class","wrapper svelte-u8tqy3")},m(H,z){insert(H,e,z),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),append(e,l),mount_component(u,e,null),append(e,d),mount_component(f,e,null),append(e,m),mount_component(h,e,null),p=!0},p(H,[z]){var ce,de,se,me,ue,he,pe,Oe,qe,et,Ue,fe,Ie,We,$e,Le,ze,re,ge,Be,Ze,Pe,Ee,Ce;const Y={};z&32768&&(Y.collection=(ce=H[15])==null?void 0:ce.map(func_1$8)),z&32768&&(Y.title=`Columns (${((de=H[15])==null?void 0:de.length)||0})`),z&8&&(Y.columns=[{fieldName:"notNull",header:"Nullability",sortable:!0,slot:0},{fieldName:"dataType",header:"Data Type",sortable:!0},{fieldName:"defaultValue",header:"Default value",sortable:!0},((ue=(me=(se=H[3])==null?void 0:se.dialect)==null?void 0:me.columnProperties)==null?void 0:ue.isSparse)&&{fieldName:"isSparse",header:"Is Sparse",sortable:!0,slot:1},{fieldName:"computedExpression",header:"Computed Expression",sortable:!0},((Oe=(pe=(he=H[3])==null?void 0:he.dialect)==null?void 0:pe.columnProperties)==null?void 0:Oe.isPersisted)&&{fieldName:"isPersisted",header:"Is Persisted",sortable:!0,slot:2},((Ue=(et=(qe=H[3])==null?void 0:qe.dialect)==null?void 0:et.columnProperties)==null?void 0:Ue.isUnsigned)&&{fieldName:"isUnsigned",header:"Unsigned",sortable:!0,slot:4},((We=(Ie=(fe=H[3])==null?void 0:fe.dialect)==null?void 0:Ie.columnProperties)==null?void 0:We.isZerofill)&&{fieldName:"isZerofill",header:"Zero fill",sortable:!0,slot:5},((ze=(Le=($e=H[3])==null?void 0:$e.dialect)==null?void 0:Le.columnProperties)==null?void 0:ze.columnComment)&&{fieldName:"columnComment",header:"Comment",sortable:!0},H[4]()?{fieldName:"actions",sortable:!0,slot:3}:null]),z&1610612738&&(Y.$$scope={dirty:z,ctx:H}),t.$set(Y);const V={};z&16384&&(V.collection=_.compact([H[14]])),z&49152&&(V.onAddNew=H[4]()&&!H[14]&&((re=H[15])==null?void 0:re.length)>0?H[6]:null),z&1610612738&&(V.$$scope={dirty:z,ctx:H}),r.$set(V);const J={};z&2048&&(J.collection=H[11]),z&32768&&(J.onAddNew=H[4]()&&((ge=H[15])==null?void 0:ge.length)>0?H[8]:null),z&2048&&(J.title=`Indexes (${((Be=H[11])==null?void 0:Be.length)||0})`),z&1610612738&&(J.$$scope={dirty:z,ctx:H}),s.$set(J);const Q={};z&1024&&(Q.collection=H[10]),z&32768&&(Q.onAddNew=H[4]()&&((Ze=H[15])==null?void 0:Ze.length)>0?H[9]:null),z&1024&&(Q.title=`Unique constraints (${((Pe=H[10])==null?void 0:Pe.length)||0})`),z&1610612738&&(Q.$$scope={dirty:z,ctx:H}),u.$set(Q);const X={};z&8192&&(X.collection=H[13]),z&32768&&(X.onAddNew=H[4]()&&((Ee=H[15])==null?void 0:Ee.length)>0?H[7]:null),z&8192&&(X.title=`Foreign keys (${((Ce=H[13])==null?void 0:Ce.length)||0})`),z&2&&(X.onRemove=H[26]),f.$set(X);const ie={};z&4096&&(ie.collection=H[12]),h.$set(ie)},i(H){p||(transition_in(t.$$.fragment,H),transition_in(r.$$.fragment,H),transition_in(s.$$.fragment,H),transition_in(u.$$.fragment,H),transition_in(f.$$.fragment,H),transition_in(h.$$.fragment,H),p=!0)},o(H){transition_out(t.$$.fragment,H),transition_out(r.$$.fragment,H),transition_out(s.$$.fragment,H),transition_out(u.$$.fragment,H),transition_out(f.$$.fragment,H),transition_out(h.$$.fragment,H),p=!1},d(H){H&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s),destroy_component(u),destroy_component(f),destroy_component(h)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$n=()=>getActiveComponent("TableEditor");registerCommand({id:"tableEditor.addColumn",category:"Table editor",name:"Add column",icon:"icon add-column",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$n())===null||o===void 0?void 0:o.writable()},onClick:()=>getCurrentEditor$n().addColumn()});registerCommand({id:"tableEditor.addPrimaryKey",category:"Table editor",name:"Add primary key",icon:"icon add-key",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$n())===null||o===void 0?void 0:o.allowAddPrimaryKey()},onClick:()=>getCurrentEditor$n().addPrimaryKey()});registerCommand({id:"tableEditor.addForeignKey",category:"Table editor",name:"Add foreign key",icon:"icon add-key",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$n())===null||o===void 0?void 0:o.writable()},onClick:()=>getCurrentEditor$n().addForeignKey()});registerCommand({id:"tableEditor.addIndex",category:"Table editor",name:"Add index",icon:"icon add-key",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$n())===null||o===void 0?void 0:o.writable()},onClick:()=>getCurrentEditor$n().addIndex()});registerCommand({id:"tableEditor.addUnique",category:"Table editor",name:"Add unique",icon:"icon add-key",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$n())===null||o===void 0?void 0:o.writable()},onClick:()=>getCurrentEditor$n().addUnique()});const func_1$8=(o,e)=>({...o,ordinal:e+1}),func_3$3=o=>o.columnName,func_5=o=>o.columnName,func_7=o=>o.columnName;function instance$25(o,e,t){let n,r,a,s,l,u;var d=this&&this.__awaiter||function(B,K,U,G){function W(q){return q instanceof U?q:new U(function(H){H(q)})}return new(U||(U=Promise))(function(q,H){function z(J){try{V(G.next(J))}catch(Q){H(Q)}}function Y(J){try{V(G.throw(J))}catch(Q){H(Q)}}function V(J){J.done?q(J.value):W(J.value).then(z,Y)}V((G=G.apply(B,K||[])).next())})};const f=createActivator("TableEditor",!0);let{tableInfo:m}=e,{setTableInfo:h}=e,{dbInfo:p}=e,{driver:g}=e;function b(){return!!h}function v(){showModal(ColumnEditorModal,{setTableInfo:h,tableInfo:m,driver:g,onAddNext:()=>d(this,void 0,void 0,function*(){yield tick(),v()})})}function y(){return b()&&!(m!=null&&m.primaryKey)}function C(){showModal(PrimaryKeyEditorModal,{setTableInfo:h,tableInfo:m})}function E(){showModal(ForeignKeyEditorModal,{setTableInfo:h,tableInfo:m,dbInfo:p})}function A(){showModal(IndexEditorModal,{setTableInfo:h,tableInfo:m,dbInfo:p})}function k(){showModal(UniqueEditorModal,{setTableInfo:h,tableInfo:m,dbInfo:p})}const T=(B,K)=>{K.stopPropagation(),h(U=>lib.editorDeleteColumn(U,B))},$=B=>showModal(ColumnEditorModal,{columnInfo:B.detail,tableInfo:m,setTableInfo:h,driver:g}),S=(B,K)=>{K.stopPropagation(),h(U=>lib.editorDeleteConstraint(U,B))},I=B=>showModal(PrimaryKeyEditorModal,{constraintInfo:B.detail,tableInfo:m,setTableInfo:h}),R=(B,K)=>{K.stopPropagation(),h(U=>lib.editorDeleteConstraint(U,B))},N=B=>showModal(IndexEditorModal,{constraintInfo:B.detail,tableInfo:m,setTableInfo:h}),M=(B,K)=>{K.stopPropagation(),h(U=>lib.editorDeleteConstraint(U,B))},F=B=>showModal(UniqueEditorModal,{constraintInfo:B.detail,tableInfo:m,setTableInfo:h}),D=B=>h(K=>lib.editorDeleteConstraint(K,B)),x=B=>showModal(ForeignKeyEditorModal,{constraintInfo:B.detail,tableInfo:m,setTableInfo:h,dbInfo:p});return o.$$set=B=>{"tableInfo"in B&&t(0,m=B.tableInfo),"setTableInfo"in B&&t(1,h=B.setTableInfo),"dbInfo"in B&&t(2,p=B.dbInfo),"driver"in B&&t(3,g=B.driver)},o.$$.update=()=>{o.$$.dirty&1&&t(15,n=m==null?void 0:m.columns),o.$$.dirty&1&&t(14,r=m==null?void 0:m.primaryKey),o.$$.dirty&1&&t(13,a=m==null?void 0:m.foreignKeys),o.$$.dirty&1&&t(12,s=m==null?void 0:m.dependencies),o.$$.dirty&1&&t(11,l=m==null?void 0:m.indexes),o.$$.dirty&1&&t(10,u=m==null?void 0:m.uniques),o.$$.dirty&1&&invalidateCommands()},[m,h,p,g,b,v,C,E,A,k,u,l,s,a,r,n,f,y,T,$,S,I,R,N,M,F,D,x]}class TableEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$25,create_fragment$27,safe_not_equal,{activator:16,tableInfo:0,setTableInfo:1,dbInfo:2,driver:3,writable:4,addColumn:5,allowAddPrimaryKey:17,addPrimaryKey:6,addForeignKey:7,addIndex:8,addUnique:9})}get activator(){return this.$$.ctx[16]}get writable(){return this.$$.ctx[4]}get addColumn(){return this.$$.ctx[5]}get allowAddPrimaryKey(){return this.$$.ctx[17]}get addPrimaryKey(){return this.$$.ctx[6]}get addForeignKey(){return this.$$.ctx[7]}get addIndex(){return this.$$.ctx[8]}get addUnique(){return this.$$.ctx[9]}}function create_default_slot_1$p(o){let e,t,n={tableInfo:o[8],dbInfo:o[12],driver:o[7],setTableInfo:o[4]=="tables"?o[26]:null};return e=new TableEditor({props:n}),o[27](e),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){const s={};a[0]&256&&(s.tableInfo=r[8]),a[0]&4096&&(s.dbInfo=r[12]),a[0]&128&&(s.driver=r[7]),a[0]&48&&(s.setTableInfo=r[4]=="tables"?r[26]:null),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[27](null),destroy_component(e,r)}}}function create_if_block$W(o){let e,t;return e=new ToolStripButton({props:{icon:"icon table",$$slots:{default:[create_default_slot$K]},$$scope:{ctx:o}}}),e.$on("click",o[25]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&4&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$K(o){let e;return{c(){e=text("Open data")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_toolstrip_slot$d(o){let e,t,n,r,a,s,l,u,d,f;e=new ToolStripCommandButton({props:{command:"tableStructure.save"}}),n=new ToolStripCommandButton({props:{command:"tableStructure.reset"}}),a=new ToolStripCommandButton({props:{command:"tableEditor.addColumn"}}),l=new ToolStripCommandButton({props:{command:"tableEditor.addIndex"}});let m=o[4]=="tables"&&create_if_block$W(o);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),m&&m.c(),d=empty()},m(h,p){mount_component(e,h,p),insert(h,t,p),mount_component(n,h,p),insert(h,r,p),mount_component(a,h,p),insert(h,s,p),mount_component(l,h,p),insert(h,u,p),m&&m.m(h,p),insert(h,d,p),f=!0},p(h,p){h[4]=="tables"?m?(m.p(h,p),p[0]&16&&transition_in(m,1)):(m=create_if_block$W(h),m.c(),transition_in(m,1),m.m(d.parentNode,d)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){f||(transition_in(e.$$.fragment,h),transition_in(n.$$.fragment,h),transition_in(a.$$.fragment,h),transition_in(l.$$.fragment,h),transition_in(m),f=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(n.$$.fragment,h),transition_out(a.$$.fragment,h),transition_out(l.$$.fragment,h),transition_out(m),f=!1},d(h){h&&(detach(t),detach(r),detach(s),detach(u),detach(d)),destroy_component(e,h),destroy_component(n,h),destroy_component(a,h),destroy_component(l,h),m&&m.d(h)}}}function create_fragment$26(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$d],default:[create_default_slot_1$p]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&4607|r[1]&4&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const matchingProps$7=["conid","database","schemaName","pureName"],allowAddToFavorites$3=o=>!0,getCurrentEditor$m=()=>getActiveComponent("TableStructureTab");registerCommand({id:"tableStructure.save",group:"save",category:"Table editor",name:"Save",toolbar:!0,isRelatedToTab:!0,icon:"icon save",testEnabled:()=>{var o;return(o=getCurrentEditor$m())===null||o===void 0?void 0:o.canSave()},onClick:()=>getCurrentEditor$m().save()});registerCommand({id:"tableStructure.reset",category:"Table editor",name:"Reset changes",toolbar:!0,isRelatedToTab:!0,icon:"icon close",testEnabled:()=>{var o;return(o=getCurrentEditor$m())===null||o===void 0?void 0:o.canSave()},onClick:()=>getCurrentEditor$m().reset()});function instance$24(o,e,t){let n,r,a,s,l,u,d,f=noop$1,m=()=>(f(),f=subscribe(r,J=>t(12,d=J)),r),h,p,g,b=noop$1,v=()=>(b(),b=subscribe(s,J=>t(23,g=J)),s),y,C=noop$1,E=()=>(C(),C=subscribe(n,J=>t(24,y=J)),n);component_subscribe(o,extensions,J=>t(22,p=J)),o.$$.on_destroy.push(()=>f()),o.$$.on_destroy.push(()=>b()),o.$$.on_destroy.push(()=>C());var A=this&&this.__awaiter||function(J,Q,X,ie){function ce(de){return de instanceof X?de:new X(function(se){se(de)})}return new(X||(X=Promise))(function(de,se){function me(pe){try{he(ie.next(pe))}catch(Oe){se(Oe)}}function ue(pe){try{he(ie.throw(pe))}catch(Oe){se(Oe)}}function he(pe){pe.done?de(pe.value):ce(pe.value).then(me,ue)}he((ie=ie.apply(J,Q||[])).next())})};let{tabid:k}=e,{conid:T}=e,{database:$}=e,{schemaName:S}=e,{pureName:I}=e,{objectTypeField:R="tables"}=e,N,M;const F=createActivator("TableStructureTab",!0),{editorState:D,editorValue:x,setEditorData:B,clearEditorData:K}=useEditorData({tabid:k});component_subscribe(o,x,J=>t(21,h=J));function U(){return R=="tables"&&!!h}function G(){h.base?W(null):showModal(InputTextModal,{header:"Set table name",value:M||"newTable",label:"Table name",onConfirm:J=>{t(20,M=J),B(Q=>({base:Q.base,current:Object.assign(Object.assign({},Q.current),{pureName:J})})),W(J)}})}function W(J){const{sql:Q,recreates:X}=lib.getAlterTableScript(h.base,lib.extendTableInfo(lib.fillConstraintNames(h.current,l.dialect)),{},d,d,l);showModal(ConfirmSqlModal,{sql:Q,recreates:X,onConfirm:()=>{q(Q,J)},engine:l.engine})}function q(J,Q){return A(this,void 0,void 0,function*(){const X=yield apiCall("database-connections/run-script",{conid:T,database:$,sql:J,useTransaction:!0}),{errorMessage:ie}=X||{};ie?showModal(ErrorMessageModal,{title:"Error when saving",message:ie}):(Q&&changeTab(k,ce=>Object.assign(Object.assign({},ce),{title:Q,props:Object.assign(Object.assign({},ce.props),{pureName:Q})})),yield apiCall("database-connections/sync-model",{conid:T,database:$}),showSnackbarSuccess("Saved to database"),K())})}function H(){return A(this,void 0,void 0,function*(){yield apiCall("database-connections/sync-model",{conid:T,database:$}),K()})}const z=()=>{openNewTab({title:I,icon:"img table",tabComponent:"TableDataTab",props:{schemaName:S,pureName:I,conid:T,database:$,objectTypeField:"tables"}})},Y=J=>B(Q=>Q?{base:Q.base,current:J(Q.current)}:{base:a,current:J(a)});function V(J){binding_callbacks[J?"unshift":"push"](()=>{N=J,t(6,N)})}return o.$$set=J=>{"tabid"in J&&t(15,k=J.tabid),"conid"in J&&t(0,T=J.conid),"database"in J&&t(1,$=J.database),"schemaName"in J&&t(2,S=J.schemaName),"pureName"in J&&t(3,I=J.pureName),"objectTypeField"in J&&t(4,R=J.objectTypeField)},o.$$.update=()=>{o.$$.dirty[0]&1048607&&E(t(11,n=useDbCore({conid:T,database:$,schemaName:S,pureName:M||I,objectTypeField:R}))),o.$$.dirty[0]&3&&m(t(10,r=useDatabaseInfo({conid:T,database:$}))),o.$$.dirty[0]&16777216&&t(5,a=y?lib.generateTablePairingId(y):null),o.$$.dirty[0]&1&&v(t(9,s=useConnectionInfo({conid:T}))),o.$$.dirty[0]&12582912&&t(7,l=lib.findEngineDriver(g,p)),o.$$.dirty[0]&2097184&&t(8,u=h?h.current:a)},[T,$,S,I,R,a,N,l,u,s,r,n,d,x,B,k,F,U,G,H,M,h,p,g,y,z,Y,V]}class TableStructureTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$24,create_fragment$26,safe_not_equal,{tabid:15,conid:0,database:1,schemaName:2,pureName:3,objectTypeField:4,activator:16,canSave:17,save:18,reset:19},null,[-1,-1])}get activator(){return this.$$.ctx[16]}get canSave(){return this.$$.ctx[17]}get save(){return this.$$.ctx[18]}get reset(){return this.$$.ctx[19]}}const TableStructureTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$3,default:TableStructureTab,matchingProps:matchingProps$7},Symbol.toStringTag,{value:"Module"}));var sqlFormatter$1={},Db2Formatter={exports:{}},Formatter={exports:{}},tokenTypes={exports:{}};(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t={WHITESPACE:"whitespace",WORD:"word",STRING:"string",RESERVED:"reserved",RESERVED_TOP_LEVEL:"reserved-top-level",RESERVED_TOP_LEVEL_NO_INDENT:"reserved-top-level-no-indent",RESERVED_NEWLINE:"reserved-newline",OPERATOR:"operator",OPEN_PAREN:"open-paren",CLOSE_PAREN:"close-paren",LINE_COMMENT:"line-comment",BLOCK_COMMENT:"block-comment",NUMBER:"number",PLACEHOLDER:"placeholder"};e.default=t,o.exports=e.default})(tokenTypes,tokenTypes.exports);var tokenTypesExports=tokenTypes.exports,Indentation={exports:{}};(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(u,d){if(!(u instanceof d))throw new TypeError("Cannot call a class as a function")}function n(u,d){for(var f=0;f<d.length;f++){var m=d[f];m.enumerable=m.enumerable||!1,m.configurable=!0,"value"in m&&(m.writable=!0),Object.defineProperty(u,m.key,m)}}function r(u,d,f){return d&&n(u.prototype,d),f&&n(u,f),u}var a="top-level",s="block-level",l=function(){function u(d){t(this,u),this.indent=d||"  ",this.indentTypes=[]}return r(u,[{key:"getIndent",value:function(){return this.indent.repeat(this.indentTypes.length)}},{key:"increaseTopLevel",value:function(){this.indentTypes.push(a)}},{key:"increaseBlockLevel",value:function(){this.indentTypes.push(s)}},{key:"decreaseTopLevel",value:function(){this.indentTypes.length>0&&this.indentTypes[this.indentTypes.length-1]===a&&this.indentTypes.pop()}},{key:"decreaseBlockLevel",value:function(){for(;this.indentTypes.length>0;){var f=this.indentTypes.pop();if(f!==a)break}}},{key:"resetIndentation",value:function(){this.indentTypes=[]}}]),u}();e.default=l,o.exports=e.default})(Indentation,Indentation.exports);var IndentationExports=Indentation.exports,InlineBlock={exports:{}};(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(tokenTypesExports);function n(d){return d&&d.__esModule?d:{default:d}}function r(d,f){if(!(d instanceof f))throw new TypeError("Cannot call a class as a function")}function a(d,f){for(var m=0;m<f.length;m++){var h=f[m];h.enumerable=h.enumerable||!1,h.configurable=!0,"value"in h&&(h.writable=!0),Object.defineProperty(d,h.key,h)}}function s(d,f,m){return f&&a(d.prototype,f),m&&a(d,m),d}var l=50,u=function(){function d(){r(this,d),this.level=0}return s(d,[{key:"beginIfPossible",value:function(m,h){this.level===0&&this.isInlineBlock(m,h)?this.level=1:this.level>0?this.level++:this.level=0}},{key:"end",value:function(){this.level--}},{key:"isActive",value:function(){return this.level>0}},{key:"isInlineBlock",value:function(m,h){for(var p=0,g=0,b=h;b<m.length;b++){var v=m[b];if(p+=v.value.length,p>l)return!1;if(v.type===t.default.OPEN_PAREN)g++;else if(v.type===t.default.CLOSE_PAREN&&(g--,g===0))return!0;if(this.isForbiddenToken(v))return!1}return!1}},{key:"isForbiddenToken",value:function(m){var h=m.type,p=m.value;return h===t.default.RESERVED_TOP_LEVEL||h===t.default.RESERVED_NEWLINE||h===t.default.COMMENT||h===t.default.BLOCK_COMMENT||p===";"}}]),d}();e.default=u,o.exports=e.default})(InlineBlock,InlineBlock.exports);var InlineBlockExports=InlineBlock.exports,Params={exports:{}};(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;function t(s,l){if(!(s instanceof l))throw new TypeError("Cannot call a class as a function")}function n(s,l){for(var u=0;u<l.length;u++){var d=l[u];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(s,d.key,d)}}function r(s,l,u){return l&&n(s.prototype,l),u&&n(s,u),s}var a=function(){function s(l){t(this,s),this.params=l,this.index=0}return r(s,[{key:"get",value:function(u){var d=u.key,f=u.value;return this.params?d?this.params[d]:this.params[this.index++]:f}}]),s}();e.default=a,o.exports=e.default})(Params,Params.exports);var ParamsExports=Params.exports,Tokenizer$2={exports:{}};(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=n(tokenTypesExports);function n(f){return f&&f.__esModule?f:{default:f}}function r(f,m){if(!(f instanceof m))throw new TypeError("Cannot call a class as a function")}function a(f,m){for(var h=0;h<m.length;h++){var p=m[h];p.enumerable=p.enumerable||!1,p.configurable=!0,"value"in p&&(p.writable=!0),Object.defineProperty(f,p.key,p)}}function s(f,m,h){return m&&a(f.prototype,m),h&&a(f,h),f}function l(f){return!Array.isArray(f)||f.length===0}function u(f){return f.replace(/[\$\(-\+\.\?\[-\^\{-\}]/g,"\\$&")}var d=function(){function f(m){r(this,f),this.WHITESPACE_REGEX=/^([\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+)/,this.NUMBER_REGEX=/^((\x2D[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]*)?[0-9]+(\.[0-9]+)?([Ee]\x2D?[0-9]+(\.[0-9]+)?)?|0x[0-9A-Fa-f]+|0b[01]+)\b/,this.OPERATOR_REGEX=/^(!=|<<|>>|<>|==|<=|>=|!<|!>|\|\|\/|\|\/|\|\||::|\x2D>>|\x2D>|~~\*|~~|!~~\*|!~~|~\*|!~\*|!~|@|:=|(?:[\0-\t\x0B\f\x0E-\u2027\u202A-\uD7FF\uE000-\uFFFF]|[\uD800-\uDBFF][\uDC00-\uDFFF]|[\uD800-\uDBFF](?![\uDC00-\uDFFF])|(?:[^\uD800-\uDBFF]|^)[\uDC00-\uDFFF]))/,this.BLOCK_COMMENT_REGEX=/^(\/\*(?:(?![])[\s\S])*?(?:\*\/|$))/,this.LINE_COMMENT_REGEX=this.createLineCommentRegex(m.lineCommentTypes),this.RESERVED_TOP_LEVEL_REGEX=this.createReservedWordRegex(m.reservedTopLevelWords),this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX=this.createReservedWordRegex(m.reservedTopLevelWordsNoIndent),this.RESERVED_NEWLINE_REGEX=this.createReservedWordRegex(m.reservedNewlineWords),this.RESERVED_PLAIN_REGEX=this.createReservedWordRegex(m.reservedWords),this.WORD_REGEX=this.createWordRegex(m.specialWordChars),this.STRING_REGEX=this.createStringRegex(m.stringTypes),this.OPEN_PAREN_REGEX=this.createParenRegex(m.openParens),this.CLOSE_PAREN_REGEX=this.createParenRegex(m.closeParens),this.INDEXED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(m.indexedPlaceholderTypes,"[0-9]*"),this.IDENT_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(m.namedPlaceholderTypes,"[a-zA-Z0-9._$]+"),this.STRING_NAMED_PLACEHOLDER_REGEX=this.createPlaceholderRegex(m.namedPlaceholderTypes,this.createStringPattern(m.stringTypes))}return s(f,[{key:"createLineCommentRegex",value:function(h){return new RegExp("^((?:".concat(h.map(function(p){return u(p)}).join("|"),`).*?(?:\r
|\r|
|$))`),"u")}},{key:"createReservedWordRegex",value:function(h){if(h.length===0)return new RegExp("^\b$","u");h=h.sort(function(g,b){return b.length-g.length||g.localeCompare(b)});var p=h.join("|").replace(/ /g,"\\s+");return new RegExp("^(".concat(p,")\\b"),"iu")}},{key:"createWordRegex",value:function(){var h=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return new RegExp("^([\\p{Alphabetic}\\p{Mark}\\p{Decimal_Number}\\p{Connector_Punctuation}\\p{Join_Control}".concat(h.join(""),"]+)"),"u")}},{key:"createStringRegex",value:function(h){return new RegExp("^("+this.createStringPattern(h)+")","u")}},{key:"createStringPattern",value:function(h){var p={"``":"((`[^`]*($|`))+)","{}":"((\\{[^\\}]*($|\\}))+)","[]":"((\\[[^\\]]*($|\\]))(\\][^\\]]*($|\\]))*)",'""':'(("[^"\\\\]*(?:\\\\.[^"\\\\]*)*("|$))+)',"''":"(('[^'\\\\]*(?:\\\\.[^'\\\\]*)*('|$))+)","N''":"((N'[^N'\\\\]*(?:\\\\.[^N'\\\\]*)*('|$))+)"};return h.map(function(g){return p[g]}).join("|")}},{key:"createParenRegex",value:function(h){var p=this;return new RegExp("^("+h.map(function(g){return p.escapeParen(g)}).join("|")+")","iu")}},{key:"escapeParen",value:function(h){return h.length===1?u(h):"\\b"+h+"\\b"}},{key:"createPlaceholderRegex",value:function(h,p){if(l(h))return!1;var g=h.map(u).join("|");return new RegExp("^((?:".concat(g,")(?:").concat(p,"))"),"u")}},{key:"tokenize",value:function(h){for(var p=[],g;h.length;)g=this.getNextToken(h,g),h=h.substring(g.value.length),p.push(g);return p}},{key:"getNextToken",value:function(h,p){return this.getWhitespaceToken(h)||this.getCommentToken(h)||this.getStringToken(h)||this.getOpenParenToken(h)||this.getCloseParenToken(h)||this.getPlaceholderToken(h)||this.getNumberToken(h)||this.getReservedWordToken(h,p)||this.getWordToken(h)||this.getOperatorToken(h)}},{key:"getWhitespaceToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.WHITESPACE,regex:this.WHITESPACE_REGEX})}},{key:"getCommentToken",value:function(h){return this.getLineCommentToken(h)||this.getBlockCommentToken(h)}},{key:"getLineCommentToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.LINE_COMMENT,regex:this.LINE_COMMENT_REGEX})}},{key:"getBlockCommentToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.BLOCK_COMMENT,regex:this.BLOCK_COMMENT_REGEX})}},{key:"getStringToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.STRING,regex:this.STRING_REGEX})}},{key:"getOpenParenToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.OPEN_PAREN,regex:this.OPEN_PAREN_REGEX})}},{key:"getCloseParenToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.CLOSE_PAREN,regex:this.CLOSE_PAREN_REGEX})}},{key:"getPlaceholderToken",value:function(h){return this.getIdentNamedPlaceholderToken(h)||this.getStringNamedPlaceholderToken(h)||this.getIndexedPlaceholderToken(h)}},{key:"getIdentNamedPlaceholderToken",value:function(h){return this.getPlaceholderTokenWithKey({input:h,regex:this.IDENT_NAMED_PLACEHOLDER_REGEX,parseKey:function(g){return g.slice(1)}})}},{key:"getStringNamedPlaceholderToken",value:function(h){var p=this;return this.getPlaceholderTokenWithKey({input:h,regex:this.STRING_NAMED_PLACEHOLDER_REGEX,parseKey:function(b){return p.getEscapedPlaceholderKey({key:b.slice(2,-1),quoteChar:b.slice(-1)})}})}},{key:"getIndexedPlaceholderToken",value:function(h){return this.getPlaceholderTokenWithKey({input:h,regex:this.INDEXED_PLACEHOLDER_REGEX,parseKey:function(g){return g.slice(1)}})}},{key:"getPlaceholderTokenWithKey",value:function(h){var p=h.input,g=h.regex,b=h.parseKey,v=this.getTokenOnFirstMatch({input:p,regex:g,type:t.default.PLACEHOLDER});return v&&(v.key=b(v.value)),v}},{key:"getEscapedPlaceholderKey",value:function(h){var p=h.key,g=h.quoteChar;return p.replace(new RegExp(u("\\"+g),"gu"),g)}},{key:"getNumberToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.NUMBER,regex:this.NUMBER_REGEX})}},{key:"getOperatorToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.OPERATOR,regex:this.OPERATOR_REGEX})}},{key:"getReservedWordToken",value:function(h,p){if(!(p&&p.value&&p.value==="."))return this.getTopLevelReservedToken(h)||this.getNewlineReservedToken(h)||this.getTopLevelReservedTokenNoIndent(h)||this.getPlainReservedToken(h)}},{key:"getTopLevelReservedToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.RESERVED_TOP_LEVEL,regex:this.RESERVED_TOP_LEVEL_REGEX})}},{key:"getNewlineReservedToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.RESERVED_NEWLINE,regex:this.RESERVED_NEWLINE_REGEX})}},{key:"getTopLevelReservedTokenNoIndent",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.RESERVED_TOP_LEVEL_NO_INDENT,regex:this.RESERVED_TOP_LEVEL_NO_INDENT_REGEX})}},{key:"getPlainReservedToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.RESERVED,regex:this.RESERVED_PLAIN_REGEX})}},{key:"getWordToken",value:function(h){return this.getTokenOnFirstMatch({input:h,type:t.default.WORD,regex:this.WORD_REGEX})}},{key:"getTokenOnFirstMatch",value:function(h){var p=h.input,g=h.type,b=h.regex,v=p.match(b);return v?{type:g,value:v[1]}:void 0}}]),f}();e.default=d,o.exports=e.default})(Tokenizer$2,Tokenizer$2.exports);var TokenizerExports=Tokenizer$2.exports;(function(o,e){Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var t=l(tokenTypesExports),n=l(IndentationExports),r=l(InlineBlockExports),a=l(ParamsExports),s=l(TokenizerExports);function l(g){return g&&g.__esModule?g:{default:g}}function u(g,b){if(!(g instanceof b))throw new TypeError("Cannot call a class as a function")}function d(g,b){for(var v=0;v<b.length;v++){var y=b[v];y.enumerable=y.enumerable||!1,y.configurable=!0,"value"in y&&(y.writable=!0),Object.defineProperty(g,y.key,y)}}function f(g,b,v){return b&&d(g.prototype,b),v&&d(g,v),g}function m(g,b,v){return b in g?Object.defineProperty(g,b,{value:v,enumerable:!0,configurable:!0,writable:!0}):g[b]=v,g}var h=function(b){return b.replace(/[\t ]+$/,"")},p=function(){function g(b){u(this,g),this.cfg=b||{},this.indentation=new n.default(this.cfg.indent),this.inlineBlock=new r.default,this.params=new a.default(this.cfg.params),this.previousReservedToken={},this.tokens=[],this.index=0}return f(g,[{key:"tokenOverride",value:function(){}},{key:"format",value:function(v){this.tokens=this.constructor.tokenizer.tokenize(v);var y=this.getFormattedQueryFromTokens();return y.trim()}},{key:"getFormattedQueryFromTokens",value:function(){var v=this,y="";return this.tokens.forEach(function(C,E){v.index=E,C=v.tokenOverride(C)||C,C.type===t.default.WHITESPACE||(C.type===t.default.LINE_COMMENT?y=v.formatLineComment(C,y):C.type===t.default.BLOCK_COMMENT?y=v.formatBlockComment(C,y):C.type===t.default.RESERVED_TOP_LEVEL?(y=v.formatTopLevelReservedWord(C,y),v.previousReservedToken=C):C.type===t.default.RESERVED_TOP_LEVEL_NO_INDENT?(y=v.formatTopLevelReservedWordNoIndent(C,y),v.previousReservedToken=C):C.type===t.default.RESERVED_NEWLINE?(y=v.formatNewlineReservedWord(C,y),v.previousReservedToken=C):C.type===t.default.RESERVED?(y=v.formatWithSpaces(C,y),v.previousReservedToken=C):C.type===t.default.OPEN_PAREN?y=v.formatOpeningParentheses(C,y):C.type===t.default.CLOSE_PAREN?y=v.formatClosingParentheses(C,y):C.type===t.default.PLACEHOLDER?y=v.formatPlaceholder(C,y):C.value===","?y=v.formatComma(C,y):C.value===":"?y=v.formatWithSpaceAfter(C,y):C.value==="."?y=v.formatWithoutSpaces(C,y):C.value===";"?y=v.formatQuerySeparator(C,y):y=v.formatWithSpaces(C,y))}),y}},{key:"formatLineComment",value:function(v,y){return this.addNewline(y+v.value)}},{key:"formatBlockComment",value:function(v,y){return this.addNewline(this.addNewline(y)+this.indentComment(v.value))}},{key:"indentComment",value:function(v){return v.replace(/\n[\t ]*/g,`
`+this.indentation.getIndent()+" ")}},{key:"formatTopLevelReservedWordNoIndent",value:function(v,y){return this.indentation.decreaseTopLevel(),y=this.addNewline(y)+this.equalizeWhitespace(this.formatReservedWord(v.value)),this.addNewline(y)}},{key:"formatTopLevelReservedWord",value:function(v,y){return this.indentation.decreaseTopLevel(),y=this.addNewline(y),this.indentation.increaseTopLevel(),y+=this.equalizeWhitespace(this.formatReservedWord(v.value)),this.addNewline(y)}},{key:"formatNewlineReservedWord",value:function(v,y){return this.addNewline(y)+this.equalizeWhitespace(this.formatReservedWord(v.value))+" "}},{key:"equalizeWhitespace",value:function(v){return v.replace(/[\t-\r \xA0\u1680\u2000-\u200A\u2028\u2029\u202F\u205F\u3000\uFEFF]+/g," ")}},{key:"formatOpeningParentheses",value:function(v,y){var C,E=(C={},m(C,t.default.WHITESPACE,!0),m(C,t.default.OPEN_PAREN,!0),m(C,t.default.LINE_COMMENT,!0),m(C,t.default.OPERATOR,!0),C);return E[this.previousToken().type]||(y=h(y)),y+=this.cfg.uppercase?v.value.toUpperCase():v.value,this.inlineBlock.beginIfPossible(this.tokens,this.index),this.inlineBlock.isActive()||(this.indentation.increaseBlockLevel(),y=this.addNewline(y)),y}},{key:"formatClosingParentheses",value:function(v,y){return v.value=this.cfg.uppercase?v.value.toUpperCase():v.value,this.inlineBlock.isActive()?(this.inlineBlock.end(),this.formatWithSpaceAfter(v,y)):(this.indentation.decreaseBlockLevel(),this.formatWithSpaces(v,this.addNewline(y)))}},{key:"formatPlaceholder",value:function(v,y){return y+this.params.get(v)+" "}},{key:"formatComma",value:function(v,y){return y=h(y)+v.value+" ",this.inlineBlock.isActive()||/^LIMIT$/i.test(this.previousReservedToken.value)?y:this.addNewline(y)}},{key:"formatWithSpaceAfter",value:function(v,y){return h(y)+v.value+" "}},{key:"formatWithoutSpaces",value:function(v,y){return h(y)+v.value}},{key:"formatWithSpaces",value:function(v,y){var C=v.type==="reserved"?this.formatReservedWord(v.value):v.value;return y+C+" "}},{key:"formatReservedWord",value:function(v){return this.cfg.uppercase?v.toUpperCase():v}},{key:"formatQuerySeparator",value:function(v,y){return this.indentation.resetIndentation(),h(y)+v.value+`
`.repeat(this.cfg.linesBetweenQueries||1)}},{key:"addNewline",value:function(v){return v=h(v),v.endsWith(`
`)||(v+=`
`),v+this.indentation.getIndent()}},{key:"previousToken",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1;return this.tokens[this.index-v]||{}}},{key:"tokenLookBack",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,y=Math.max(0,this.index-v),C=this.index;return this.tokens.slice(y,C).reverse()}},{key:"tokenLookAhead",value:function(){var v=arguments.length>0&&arguments[0]!==void 0?arguments[0]:5,y=this.index+1,C=this.index+v+1;return this.tokens.slice(y,C)}}]),g}();e.default=p,m(p,"tokenizer",new s.default({reservedWords:[],reservedTopLevelWords:[],reservedNewlineWords:[],reservedTopLevelWordsNoIndent:[],stringTypes:[],openParens:[],closeParens:[],indexedPlaceholderTypes:[],namedPlaceholderTypes:[],lineCommentTypes:[],specialWordChars:[]})),o.exports=e.default})(Formatter,Formatter.exports);var FormatterExports=Formatter.exports;(function(o,e){function t(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(T){return typeof T}:t=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},t(A)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(FormatterExports),r=a(TokenizerExports);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function l(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),k&&u(A,k)}function u(A,k){return u=Object.setPrototypeOf||function($,S){return $.__proto__=S,$},u(A,k)}function d(A){var k=h();return function(){var $=p(A),S;if(k){var I=p(this).constructor;S=Reflect.construct($,arguments,I)}else S=$.apply(this,arguments);return f(this,S)}}function f(A,k){return k&&(t(k)==="object"||typeof k=="function")?k:m(A)}function m(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},p(A)}function g(A,k,T){return k in A?Object.defineProperty(A,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):A[k]=T,A}var b=["ABS","ACTIVATE","ALIAS","ALL","ALLOCATE","ALLOW","ALTER","ANY","ARE","ARRAY","AS","ASC","ASENSITIVE","ASSOCIATE","ASUTIME","ASYMMETRIC","AT","ATOMIC","ATTRIBUTES","AUDIT","AUTHORIZATION","AUX","AUXILIARY","AVG","BEFORE","BEGIN","BETWEEN","BIGINT","BINARY","BLOB","BOOLEAN","BOTH","BUFFERPOOL","BY","CACHE","CALL","CALLED","CAPTURE","CARDINALITY","CASCADED","CASE","CAST","CCSID","CEIL","CEILING","CHAR","CHARACTER","CHARACTER_LENGTH","CHAR_LENGTH","CHECK","CLOB","CLONE","CLOSE","CLUSTER","COALESCE","COLLATE","COLLECT","COLLECTION","COLLID","COLUMN","COMMENT","COMMIT","CONCAT","CONDITION","CONNECT","CONNECTION","CONSTRAINT","CONTAINS","CONTINUE","CONVERT","CORR","CORRESPONDING","COUNT","COUNT_BIG","COVAR_POP","COVAR_SAMP","CREATE","CROSS","CUBE","CUME_DIST","CURRENT","CURRENT_DATE","CURRENT_DEFAULT_TRANSFORM_GROUP","CURRENT_LC_CTYPE","CURRENT_PATH","CURRENT_ROLE","CURRENT_SCHEMA","CURRENT_SERVER","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_TIMEZONE","CURRENT_TRANSFORM_GROUP_FOR_TYPE","CURRENT_USER","CURSOR","CYCLE","DATA","DATABASE","DATAPARTITIONNAME","DATAPARTITIONNUM","DATE","DAY","DAYS","DB2GENERAL","DB2GENRL","DB2SQL","DBINFO","DBPARTITIONNAME","DBPARTITIONNUM","DEALLOCATE","DEC","DECIMAL","DECLARE","DEFAULT","DEFAULTS","DEFINITION","DELETE","DENSERANK","DENSE_RANK","DEREF","DESCRIBE","DESCRIPTOR","DETERMINISTIC","DIAGNOSTICS","DISABLE","DISALLOW","DISCONNECT","DISTINCT","DO","DOCUMENT","DOUBLE","DROP","DSSIZE","DYNAMIC","EACH","EDITPROC","ELEMENT","ELSE","ELSEIF","ENABLE","ENCODING","ENCRYPTION","END","END-EXEC","ENDING","ERASE","ESCAPE","EVERY","EXCEPTION","EXCLUDING","EXCLUSIVE","EXEC","EXECUTE","EXISTS","EXIT","EXP","EXPLAIN","EXTENDED","EXTERNAL","EXTRACT","FALSE","FENCED","FETCH","FIELDPROC","FILE","FILTER","FINAL","FIRST","FLOAT","FLOOR","FOR","FOREIGN","FREE","FULL","FUNCTION","FUSION","GENERAL","GENERATED","GET","GLOBAL","GOTO","GRANT","GRAPHIC","GROUP","GROUPING","HANDLER","HASH","HASHED_VALUE","HINT","HOLD","HOUR","HOURS","IDENTITY","IF","IMMEDIATE","IN","INCLUDING","INCLUSIVE","INCREMENT","INDEX","INDICATOR","INDICATORS","INF","INFINITY","INHERIT","INNER","INOUT","INSENSITIVE","INSERT","INT","INTEGER","INTEGRITY","INTERSECTION","INTERVAL","INTO","IS","ISOBID","ISOLATION","ITERATE","JAR","JAVA","KEEP","KEY","LABEL","LANGUAGE","LARGE","LATERAL","LC_CTYPE","LEADING","LEAVE","LEFT","LIKE","LINKTYPE","LN","LOCAL","LOCALDATE","LOCALE","LOCALTIME","LOCALTIMESTAMP","LOCATOR","LOCATORS","LOCK","LOCKMAX","LOCKSIZE","LONG","LOOP","LOWER","MAINTAINED","MATCH","MATERIALIZED","MAX","MAXVALUE","MEMBER","MERGE","METHOD","MICROSECOND","MICROSECONDS","MIN","MINUTE","MINUTES","MINVALUE","MOD","MODE","MODIFIES","MODULE","MONTH","MONTHS","MULTISET","NAN","NATIONAL","NATURAL","NCHAR","NCLOB","NEW","NEW_TABLE","NEXTVAL","NO","NOCACHE","NOCYCLE","NODENAME","NODENUMBER","NOMAXVALUE","NOMINVALUE","NONE","NOORDER","NORMALIZE","NORMALIZED","NOT","NULL","NULLIF","NULLS","NUMERIC","NUMPARTS","OBID","OCTET_LENGTH","OF","OFFSET","OLD","OLD_TABLE","ON","ONLY","OPEN","OPTIMIZATION","OPTIMIZE","OPTION","ORDER","OUT","OUTER","OVER","OVERLAPS","OVERLAY","OVERRIDING","PACKAGE","PADDED","PAGESIZE","PARAMETER","PART","PARTITION","PARTITIONED","PARTITIONING","PARTITIONS","PASSWORD","PATH","PERCENTILE_CONT","PERCENTILE_DISC","PERCENT_RANK","PIECESIZE","PLAN","POSITION","POWER","PRECISION","PREPARE","PREVVAL","PRIMARY","PRIQTY","PRIVILEGES","PROCEDURE","PROGRAM","PSID","PUBLIC","QUERY","QUERYNO","RANGE","RANK","READ","READS","REAL","RECOVERY","RECURSIVE","REF","REFERENCES","REFERENCING","REFRESH","REGR_AVGX","REGR_AVGY","REGR_COUNT","REGR_INTERCEPT","REGR_R2","REGR_SLOPE","REGR_SXX","REGR_SXY","REGR_SYY","RELEASE","RENAME","REPEAT","RESET","RESIGNAL","RESTART","RESTRICT","RESULT","RESULT_SET_LOCATOR","RETURN","RETURNS","REVOKE","RIGHT","ROLE","ROLLBACK","ROLLUP","ROUND_CEILING","ROUND_DOWN","ROUND_FLOOR","ROUND_HALF_DOWN","ROUND_HALF_EVEN","ROUND_HALF_UP","ROUND_UP","ROUTINE","ROW","ROWNUMBER","ROWS","ROWSET","ROW_NUMBER","RRN","RUN","SAVEPOINT","SCHEMA","SCOPE","SCRATCHPAD","SCROLL","SEARCH","SECOND","SECONDS","SECQTY","SECURITY","SENSITIVE","SEQUENCE","SESSION","SESSION_USER","SIGNAL","SIMILAR","SIMPLE","SMALLINT","SNAN","SOME","SOURCE","SPECIFIC","SPECIFICTYPE","SQL","SQLEXCEPTION","SQLID","SQLSTATE","SQLWARNING","SQRT","STACKED","STANDARD","START","STARTING","STATEMENT","STATIC","STATMENT","STAY","STDDEV_POP","STDDEV_SAMP","STOGROUP","STORES","STYLE","SUBMULTISET","SUBSTRING","SUM","SUMMARY","SYMMETRIC","SYNONYM","SYSFUN","SYSIBM","SYSPROC","SYSTEM","SYSTEM_USER","TABLE","TABLESAMPLE","TABLESPACE","THEN","TIME","TIMESTAMP","TIMEZONE_HOUR","TIMEZONE_MINUTE","TO","TRAILING","TRANSACTION","TRANSLATE","TRANSLATION","TREAT","TRIGGER","TRIM","TRUE","TRUNCATE","TYPE","UESCAPE","UNDO","UNIQUE","UNKNOWN","UNNEST","UNTIL","UPPER","USAGE","USER","USING","VALIDPROC","VALUE","VARCHAR","VARIABLE","VARIANT","VARYING","VAR_POP","VAR_SAMP","VCAT","VERSION","VIEW","VOLATILE","VOLUMES","WHEN","WHENEVER","WHILE","WIDTH_BUCKET","WINDOW","WITH","WITHIN","WITHOUT","WLM","WRITE","XMLELEMENT","XMLEXISTS","XMLNAMESPACES","YEAR","YEARS"],v=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INTERSECT","LIMIT","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],y=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],C=["AND","CROSS JOIN","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN"],E=function(A){l(T,A);var k=d(T);function T(){return s(this,T),k.apply(this,arguments)}return T}(n.default);e.default=E,g(E,"tokenizer",new r.default({reservedWords:b,reservedTopLevelWords:v,reservedNewlineWords:C,reservedTopLevelWordsNoIndent:y,stringTypes:['""',"''","``","[]"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["#","@"]})),o.exports=e.default})(Db2Formatter,Db2Formatter.exports);var Db2FormatterExports=Db2Formatter.exports,N1qlFormatter={exports:{}};(function(o,e){function t(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(T){return typeof T}:t=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},t(A)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(FormatterExports),r=a(TokenizerExports);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function l(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),k&&u(A,k)}function u(A,k){return u=Object.setPrototypeOf||function($,S){return $.__proto__=S,$},u(A,k)}function d(A){var k=h();return function(){var $=p(A),S;if(k){var I=p(this).constructor;S=Reflect.construct($,arguments,I)}else S=$.apply(this,arguments);return f(this,S)}}function f(A,k){return k&&(t(k)==="object"||typeof k=="function")?k:m(A)}function m(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},p(A)}function g(A,k,T){return k in A?Object.defineProperty(A,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):A[k]=T,A}var b=["ALL","ALTER","ANALYZE","AND","ANY","ARRAY","AS","ASC","BEGIN","BETWEEN","BINARY","BOOLEAN","BREAK","BUCKET","BUILD","BY","CALL","CASE","CAST","CLUSTER","COLLATE","COLLECTION","COMMIT","CONNECT","CONTINUE","CORRELATE","COVER","CREATE","DATABASE","DATASET","DATASTORE","DECLARE","DECREMENT","DELETE","DERIVED","DESC","DESCRIBE","DISTINCT","DO","DROP","EACH","ELEMENT","ELSE","END","EVERY","EXCEPT","EXCLUDE","EXECUTE","EXISTS","EXPLAIN","FALSE","FETCH","FIRST","FLATTEN","FOR","FORCE","FROM","FUNCTION","GRANT","GROUP","GSI","HAVING","IF","IGNORE","ILIKE","IN","INCLUDE","INCREMENT","INDEX","INFER","INLINE","INNER","INSERT","INTERSECT","INTO","IS","JOIN","KEY","KEYS","KEYSPACE","KNOWN","LAST","LEFT","LET","LETTING","LIKE","LIMIT","LSM","MAP","MAPPING","MATCHED","MATERIALIZED","MERGE","MISSING","NAMESPACE","NEST","NOT","NULL","NUMBER","OBJECT","OFFSET","ON","OPTION","OR","ORDER","OUTER","OVER","PARSE","PARTITION","PASSWORD","PATH","POOL","PREPARE","PRIMARY","PRIVATE","PRIVILEGE","PROCEDURE","PUBLIC","RAW","REALM","REDUCE","RENAME","RETURN","RETURNING","REVOKE","RIGHT","ROLE","ROLLBACK","SATISFIES","SCHEMA","SELECT","SELF","SEMI","SET","SHOW","SOME","START","STATISTICS","STRING","SYSTEM","THEN","TO","TRANSACTION","TRIGGER","TRUE","TRUNCATE","UNDER","UNION","UNIQUE","UNKNOWN","UNNEST","UNSET","UPDATE","UPSERT","USE","USER","USING","VALIDATE","VALUE","VALUED","VALUES","VIA","VIEW","WHEN","WHERE","WHILE","WITH","WITHIN","WORK","XOR"],v=["DELETE FROM","EXCEPT ALL","EXCEPT","EXPLAIN DELETE FROM","EXPLAIN UPDATE","EXPLAIN UPSERT","FROM","GROUP BY","HAVING","INFER","INSERT INTO","LET","LIMIT","MERGE","NEST","ORDER BY","PREPARE","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNNEST","UPDATE","UPSERT","USE KEYS","VALUES","WHERE"],y=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],C=["AND","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","XOR"],E=function(A){l(T,A);var k=d(T);function T(){return s(this,T),k.apply(this,arguments)}return T}(n.default);e.default=E,g(E,"tokenizer",new r.default({reservedWords:b,reservedTopLevelWords:v,reservedNewlineWords:C,reservedTopLevelWordsNoIndent:y,stringTypes:['""',"''","``"],openParens:["(","[","{"],closeParens:[")","]","}"],namedPlaceholderTypes:["$"],lineCommentTypes:["#","--"]})),o.exports=e.default})(N1qlFormatter,N1qlFormatter.exports);var N1qlFormatterExports=N1qlFormatter.exports,PlSqlFormatter={exports:{}};(function(o,e){function t($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(I){return typeof I}:t=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(FormatterExports),r=s(TokenizerExports),a=s(tokenTypesExports);function s($){return $&&$.__esModule?$:{default:$}}function l($,S){if(!($ instanceof S))throw new TypeError("Cannot call a class as a function")}function u($,S){for(var I=0;I<S.length;I++){var R=S[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty($,R.key,R)}}function d($,S,I){return S&&u($.prototype,S),I&&u($,I),$}function f($,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(S&&S.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),S&&m($,S)}function m($,S){return m=Object.setPrototypeOf||function(R,N){return R.__proto__=N,R},m($,S)}function h($){var S=b();return function(){var R=v($),N;if(S){var M=v(this).constructor;N=Reflect.construct(R,arguments,M)}else N=R.apply(this,arguments);return p(this,N)}}function p($,S){return S&&(t(S)==="object"||typeof S=="function")?S:g($)}function g($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},v($)}function y($,S,I){return S in $?Object.defineProperty($,S,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[S]=I,$}var C=["A","ACCESSIBLE","AGENT","AGGREGATE","ALL","ALTER","ANY","ARRAY","AS","ASC","AT","ATTRIBUTE","AUTHID","AVG","BETWEEN","BFILE_BASE","BINARY_INTEGER","BINARY","BLOB_BASE","BLOCK","BODY","BOOLEAN","BOTH","BOUND","BREADTH","BULK","BY","BYTE","C","CALL","CALLING","CASCADE","CASE","CHAR_BASE","CHAR","CHARACTER","CHARSET","CHARSETFORM","CHARSETID","CHECK","CLOB_BASE","CLONE","CLOSE","CLUSTER","CLUSTERS","COALESCE","COLAUTH","COLLECT","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPILED","COMPRESS","CONNECT","CONSTANT","CONSTRUCTOR","CONTEXT","CONTINUE","CONVERT","COUNT","CRASH","CREATE","CREDENTIAL","CURRENT","CURRVAL","CURSOR","CUSTOMDATUM","DANGLING","DATA","DATE_BASE","DATE","DAY","DECIMAL","DEFAULT","DEFINE","DELETE","DEPTH","DESC","DETERMINISTIC","DIRECTORY","DISTINCT","DO","DOUBLE","DROP","DURATION","ELEMENT","ELSIF","EMPTY","END","ESCAPE","EXCEPTIONS","EXCLUSIVE","EXECUTE","EXISTS","EXIT","EXTENDS","EXTERNAL","EXTRACT","FALSE","FETCH","FINAL","FIRST","FIXED","FLOAT","FOR","FORALL","FORCE","FROM","FUNCTION","GENERAL","GOTO","GRANT","GROUP","HASH","HEAP","HIDDEN","HOUR","IDENTIFIED","IF","IMMEDIATE","IN","INCLUDING","INDEX","INDEXES","INDICATOR","INDICES","INFINITE","INSTANTIABLE","INT","INTEGER","INTERFACE","INTERVAL","INTO","INVALIDATE","IS","ISOLATION","JAVA","LANGUAGE","LARGE","LEADING","LENGTH","LEVEL","LIBRARY","LIKE","LIKE2","LIKE4","LIKEC","LIMITED","LOCAL","LOCK","LONG","MAP","MAX","MAXLEN","MEMBER","MERGE","MIN","MINUTE","MLSLABEL","MOD","MODE","MONTH","MULTISET","NAME","NAN","NATIONAL","NATIVE","NATURAL","NATURALN","NCHAR","NEW","NEXTVAL","NOCOMPRESS","NOCOPY","NOT","NOWAIT","NULL","NULLIF","NUMBER_BASE","NUMBER","OBJECT","OCICOLL","OCIDATE","OCIDATETIME","OCIDURATION","OCIINTERVAL","OCILOBLOCATOR","OCINUMBER","OCIRAW","OCIREF","OCIREFCURSOR","OCIROWID","OCISTRING","OCITYPE","OF","OLD","ON","ONLY","OPAQUE","OPEN","OPERATOR","OPTION","ORACLE","ORADATA","ORDER","ORGANIZATION","ORLANY","ORLVARY","OTHERS","OUT","OVERLAPS","OVERRIDING","PACKAGE","PARALLEL_ENABLE","PARAMETER","PARAMETERS","PARENT","PARTITION","PASCAL","PCTFREE","PIPE","PIPELINED","PLS_INTEGER","PLUGGABLE","POSITIVE","POSITIVEN","PRAGMA","PRECISION","PRIOR","PRIVATE","PROCEDURE","PUBLIC","RAISE","RANGE","RAW","READ","REAL","RECORD","REF","REFERENCE","RELEASE","RELIES_ON","REM","REMAINDER","RENAME","RESOURCE","RESULT_CACHE","RESULT","RETURN","RETURNING","REVERSE","REVOKE","ROLLBACK","ROW","ROWID","ROWNUM","ROWTYPE","SAMPLE","SAVE","SAVEPOINT","SB1","SB2","SB4","SEARCH","SECOND","SEGMENT","SELF","SEPARATE","SEQUENCE","SERIALIZABLE","SHARE","SHORT","SIZE_T","SIZE","SMALLINT","SOME","SPACE","SPARSE","SQL","SQLCODE","SQLDATA","SQLERRM","SQLNAME","SQLSTATE","STANDARD","START","STATIC","STDDEV","STORED","STRING","STRUCT","STYLE","SUBMULTISET","SUBPARTITION","SUBSTITUTABLE","SUBTYPE","SUCCESSFUL","SUM","SYNONYM","SYSDATE","TABAUTH","TABLE","TDO","THE","THEN","TIME","TIMESTAMP","TIMEZONE_ABBR","TIMEZONE_HOUR","TIMEZONE_MINUTE","TIMEZONE_REGION","TO","TRAILING","TRANSACTION","TRANSACTIONAL","TRIGGER","TRUE","TRUSTED","TYPE","UB1","UB2","UB4","UID","UNDER","UNIQUE","UNPLUG","UNSIGNED","UNTRUSTED","USE","USER","USING","VALIDATE","VALIST","VALUE","VARCHAR","VARCHAR2","VARIABLE","VARIANCE","VARRAY","VARYING","VIEW","VIEWS","VOID","WHENEVER","WHILE","WITH","WORK","WRAPPED","WRITE","YEAR","ZONE"],E=["ADD","ALTER COLUMN","ALTER TABLE","BEGIN","CONNECT BY","DECLARE","DELETE FROM","DELETE","END","EXCEPT","EXCEPTION","FETCH FIRST","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","LOOP","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","START WITH","UPDATE","VALUES","WHERE"],A=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],k=["AND","CROSS APPLY","CROSS JOIN","ELSE","END","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],T=function($){f(I,$);var S=h(I);function I(){return l(this,I),S.apply(this,arguments)}return d(I,[{key:"tokenOverride",value:function(N){if(N.type===a.default.RESERVED_TOP_LEVEL&&N.value.toUpperCase()==="SET"&&this.previousReservedToken.value.toUpperCase()==="BY")return N.type=a.default.RESERVED,N}}]),I}(n.default);e.default=T,y(T,"tokenizer",new r.default({reservedWords:C,reservedTopLevelWords:E,reservedNewlineWords:k,reservedTopLevelWordsNoIndent:A,stringTypes:['""',"N''","''","``"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:[":"],lineCommentTypes:["--"],specialWordChars:["_","$","#",".","@"]})),o.exports=e.default})(PlSqlFormatter,PlSqlFormatter.exports);var PlSqlFormatterExports=PlSqlFormatter.exports,RedshiftFormatter={exports:{}};(function(o,e){function t(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(T){return typeof T}:t=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},t(A)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(FormatterExports),r=a(TokenizerExports);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function l(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),k&&u(A,k)}function u(A,k){return u=Object.setPrototypeOf||function($,S){return $.__proto__=S,$},u(A,k)}function d(A){var k=h();return function(){var $=p(A),S;if(k){var I=p(this).constructor;S=Reflect.construct($,arguments,I)}else S=$.apply(this,arguments);return f(this,S)}}function f(A,k){return k&&(t(k)==="object"||typeof k=="function")?k:m(A)}function m(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},p(A)}function g(A,k,T){return k in A?Object.defineProperty(A,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):A[k]=T,A}var b=["AES128","AES256","ALLOWOVERWRITE","ANALYSE","ARRAY","AS","ASC","AUTHORIZATION","BACKUP","BINARY","BLANKSASNULL","BOTH","BYTEDICT","BZIP2","CAST","CHECK","COLLATE","COLUMN","CONSTRAINT","CREATE","CREDENTIALS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","CURRENT_USER","CURRENT_USER_ID","DEFAULT","DEFERRABLE","DEFLATE","DEFRAG","DELTA","DELTA32K","DESC","DISABLE","DISTINCT","DO","ELSE","EMPTYASNULL","ENABLE","ENCODE","ENCRYPT","ENCRYPTION","END","EXPLICIT","FALSE","FOR","FOREIGN","FREEZE","FULL","GLOBALDICT256","GLOBALDICT64K","GRANT","GZIP","IDENTITY","IGNORE","ILIKE","INITIALLY","INTO","LEADING","LOCALTIME","LOCALTIMESTAMP","LUN","LUNS","LZO","LZOP","MINUS","MOSTLY13","MOSTLY32","MOSTLY8","NATURAL","NEW","NULLS","OFF","OFFLINE","OFFSET","OLD","ON","ONLY","OPEN","ORDER","OVERLAPS","PARALLEL","PARTITION","PERCENT","PERMISSIONS","PLACING","PRIMARY","RAW","READRATIO","RECOVER","REFERENCES","REJECTLOG","RESORT","RESTORE","SESSION_USER","SIMILAR","SYSDATE","SYSTEM","TABLE","TAG","TDES","TEXT255","TEXT32K","THEN","TIMESTAMP","TO","TOP","TRAILING","TRUE","TRUNCATECOLUMNS","UNIQUE","USER","USING","VERBOSE","WALLET","WHEN","WITH","WITHOUT","PREDICATE","COLUMNS","COMPROWS","COMPRESSION","COPY","FORMAT","DELIMITER","FIXEDWIDTH","AVRO","JSON","ENCRYPTED","BZIP2","GZIP","LZOP","PARQUET","ORC","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","NULL AS","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","MANIFEST","REGION","IAM_ROLE","MASTER_SYMMETRIC_KEY","SSH","ACCEPTANYDATE","ACCEPTINVCHARS","ACCESS_KEY_ID","SECRET_ACCESS_KEY","AVRO","BLANKSASNULL","BZIP2","COMPROWS","COMPUPDATE","CREDENTIALS","DATEFORMAT","DELIMITER","EMPTYASNULL","ENCODING","ENCRYPTED","ESCAPE","EXPLICIT_IDS","FILLRECORD","FIXEDWIDTH","FORMAT","IAM_ROLE","GZIP","IGNOREBLANKLINES","IGNOREHEADER","JSON","LZOP","MANIFEST","MASTER_SYMMETRIC_KEY","MAXERROR","NOLOAD","NULL AS","READRATIO","REGION","REMOVEQUOTES","ROUNDEC","SSH","STATUPDATE","TIMEFORMAT","SESSION_TOKEN","TRIMBLANKS","TRUNCATECOLUMNS","EXTERNAL","DATA CATALOG","HIVE METASTORE","CATALOG_ROLE","VACUUM","COPY","UNLOAD","EVEN","ALL"],v=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","DELETE FROM","EXCEPT","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","INTERSECT","TOP","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UNION ALL","UNION","UPDATE","VALUES","WHERE","VACUUM","COPY","UNLOAD","ANALYZE","ANALYSE","DISTKEY","SORTKEY","COMPOUND","INTERLEAVED","FORMAT","DELIMITER","FIXEDWIDTH","AVRO","JSON","ENCRYPTED","BZIP2","GZIP","LZOP","PARQUET","ORC","ACCEPTANYDATE","ACCEPTINVCHARS","BLANKSASNULL","DATEFORMAT","EMPTYASNULL","ENCODING","ESCAPE","EXPLICIT_IDS","FILLRECORD","IGNOREBLANKLINES","IGNOREHEADER","NULL AS","REMOVEQUOTES","ROUNDEC","TIMEFORMAT","TRIMBLANKS","TRUNCATECOLUMNS","COMPROWS","COMPUPDATE","MAXERROR","NOLOAD","STATUPDATE","MANIFEST","REGION","IAM_ROLE","MASTER_SYMMETRIC_KEY","SSH","ACCEPTANYDATE","ACCEPTINVCHARS","ACCESS_KEY_ID","SECRET_ACCESS_KEY","AVRO","BLANKSASNULL","BZIP2","COMPROWS","COMPUPDATE","CREDENTIALS","DATEFORMAT","DELIMITER","EMPTYASNULL","ENCODING","ENCRYPTED","ESCAPE","EXPLICIT_IDS","FILLRECORD","FIXEDWIDTH","FORMAT","IAM_ROLE","GZIP","IGNOREBLANKLINES","IGNOREHEADER","JSON","LZOP","MANIFEST","MASTER_SYMMETRIC_KEY","MAXERROR","NOLOAD","NULL AS","READRATIO","REGION","REMOVEQUOTES","ROUNDEC","SSH","STATUPDATE","TIMEFORMAT","SESSION_TOKEN","TRIMBLANKS","TRUNCATECOLUMNS","EXTERNAL","DATA CATALOG","HIVE METASTORE","CATALOG_ROLE"],y=[],C=["AND","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","VACUUM","COPY","UNLOAD","ANALYZE","ANALYSE","DISTKEY","SORTKEY","COMPOUND","INTERLEAVED"],E=function(A){l(T,A);var k=d(T);function T(){return s(this,T),k.apply(this,arguments)}return T}(n.default);e.default=E,g(E,"tokenizer",new r.default({reservedWords:b,reservedTopLevelWords:v,reservedNewlineWords:C,reservedTopLevelWordsNoIndent:y,stringTypes:['""',"''","``"],openParens:["("],closeParens:[")"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@","#","$"],lineCommentTypes:["--"]})),o.exports=e.default})(RedshiftFormatter,RedshiftFormatter.exports);var RedshiftFormatterExports=RedshiftFormatter.exports,SparkSqlFormatter={exports:{}};(function(o,e){function t($){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(I){return typeof I}:t=function(I){return I&&typeof Symbol=="function"&&I.constructor===Symbol&&I!==Symbol.prototype?"symbol":typeof I},t($)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=s(FormatterExports),r=s(TokenizerExports),a=s(tokenTypesExports);function s($){return $&&$.__esModule?$:{default:$}}function l($,S){if(!($ instanceof S))throw new TypeError("Cannot call a class as a function")}function u($,S){for(var I=0;I<S.length;I++){var R=S[I];R.enumerable=R.enumerable||!1,R.configurable=!0,"value"in R&&(R.writable=!0),Object.defineProperty($,R.key,R)}}function d($,S,I){return S&&u($.prototype,S),I&&u($,I),$}function f($,S){if(typeof S!="function"&&S!==null)throw new TypeError("Super expression must either be null or a function");$.prototype=Object.create(S&&S.prototype,{constructor:{value:$,writable:!0,configurable:!0}}),S&&m($,S)}function m($,S){return m=Object.setPrototypeOf||function(R,N){return R.__proto__=N,R},m($,S)}function h($){var S=b();return function(){var R=v($),N;if(S){var M=v(this).constructor;N=Reflect.construct(R,arguments,M)}else N=R.apply(this,arguments);return p(this,N)}}function p($,S){return S&&(t(S)==="object"||typeof S=="function")?S:g($)}function g($){if($===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $}function b(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function v($){return v=Object.setPrototypeOf?Object.getPrototypeOf:function(I){return I.__proto__||Object.getPrototypeOf(I)},v($)}function y($,S,I){return S in $?Object.defineProperty($,S,{value:I,enumerable:!0,configurable:!0,writable:!0}):$[S]=I,$}var C=["ALL","ALTER","ANALYSE","ANALYZE","ARRAY_ZIP","ARRAY","AS","ASC","AVG","BETWEEN","CASCADE","CASE","CAST","COALESCE","COLLECT_LIST","COLLECT_SET","COLUMN","COLUMNS","COMMENT","CONSTRAINT","CONTAINS","CONVERT","COUNT","CUME_DIST","CURRENT ROW","CURRENT_DATE","CURRENT_TIMESTAMP","DATABASE","DATABASES","DATE_ADD","DATE_SUB","DATE_TRUNC","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DAY","DAYS","DECODE","DEFAULT","DELETE","DENSE_RANK","DESC","DESCRIBE","DISTINCT","DISTINCTROW","DIV","DROP","ELSE","ENCODE","END","EXISTS","EXPLAIN","EXPLODE_OUTER","EXPLODE","FILTER","FIRST_VALUE","FIRST","FIXED","FLATTEN","FOLLOWING","FROM_UNIXTIME","FULL","GREATEST","GROUP_CONCAT","HOUR_MINUTE","HOUR_SECOND","HOUR","HOURS","IF","IFNULL","IN","INSERT","INTERVAL","INTO","IS","LAG","LAST_VALUE","LAST","LEAD","LEADING","LEAST","LEVEL","LIKE","MAX","MERGE","MIN","MINUTE_SECOND","MINUTE","MONTH","NATURAL","NOT","NOW()","NTILE","NULL","NULLIF","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPTIMIZE","OVER","PERCENT_RANK","PRECEDING","RANGE","RANK","REGEXP","RENAME","RLIKE","ROW","ROWS","SECOND","SEPARATOR","SEQUENCE","SIZE","STRING","STRUCT","SUM","TABLE","TABLES","TEMPORARY","THEN","TO_DATE","TO_JSON","TO","TRAILING","TRANSFORM","TRUE","TRUNCATE","TYPE","TYPES","UNBOUNDED","UNIQUE","UNIX_TIMESTAMP","UNLOCK","UNSIGNED","USING","VARIABLES","VIEW","WHEN","WITH","YEAR_MONTH"],E=["ADD","AFTER","ALTER COLUMN","ALTER DATABASE","ALTER SCHEMA","ALTER TABLE","CLUSTER BY","CLUSTERED BY","DELETE FROM","DISTRIBUTE BY","FROM","GROUP BY","HAVING","INSERT INTO","INSERT","LIMIT","OPTIONS","ORDER BY","PARTITION BY","PARTITIONED BY","RANGE","ROWS","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","TBLPROPERTIES","UPDATE","USING","VALUES","WHERE","WINDOW"],A=["EXCEPT ALL","EXCEPT","INTERSECT ALL","INTERSECT","UNION ALL","UNION"],k=["AND","ANTI JOIN","CREATE OR","CREATE","CROSS JOIN","ELSE","FULL OUTER JOIN","INNER JOIN","JOIN","LATERAL VIEW","LEFT ANTI JOIN","LEFT JOIN","LEFT OUTER JOIN","LEFT SEMI JOIN","NATURAL ANTI JOIN","NATURAL FULL OUTER JOIN","NATURAL INNER JOIN","NATURAL JOIN","NATURAL LEFT ANTI JOIN","NATURAL LEFT OUTER JOIN","NATURAL LEFT SEMI JOIN","NATURAL OUTER JOIN","NATURAL RIGHT OUTER JOIN","NATURAL RIGHT SEMI JOIN","NATURAL SEMI JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","RIGHT SEMI JOIN","SEMI JOIN","WHEN","XOR"],T=function($){f(I,$);var S=h(I);function I(){return l(this,I),S.apply(this,arguments)}return d(I,[{key:"tokenOverride",value:function(N){if(N.type===a.default.RESERVED_TOP_LEVEL&&N.value.toUpperCase()==="WINDOW")for(var M=this.tokenLookAhead(),F=0;F<M.length;F++){var D=M[F];return D.type===a.default.OPEN_PAREN&&(N.type=a.default.RESERVED),N}if(N.type===a.default.CLOSE_PAREN&&N.value.toUpperCase()==="END")for(var x=this.tokenLookBack(),B=0;B<x.length;B++){var K=x[B];return K.type===a.default.OPERATOR&&K.value==="."&&(N.type=a.default.WORD),N}}}]),I}(n.default);e.default=T,y(T,"tokenizer",new r.default({reservedWords:C,reservedTopLevelWords:E,reservedNewlineWords:k,reservedTopLevelWordsNoIndent:A,stringTypes:['""',"''","``","{}"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["$"],lineCommentTypes:["--"]})),o.exports=e.default})(SparkSqlFormatter,SparkSqlFormatter.exports);var SparkSqlFormatterExports=SparkSqlFormatter.exports,StandardSqlFormatter={exports:{}};(function(o,e){function t(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?t=function(T){return typeof T}:t=function(T){return T&&typeof Symbol=="function"&&T.constructor===Symbol&&T!==Symbol.prototype?"symbol":typeof T},t(A)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var n=a(FormatterExports),r=a(TokenizerExports);function a(A){return A&&A.__esModule?A:{default:A}}function s(A,k){if(!(A instanceof k))throw new TypeError("Cannot call a class as a function")}function l(A,k){if(typeof k!="function"&&k!==null)throw new TypeError("Super expression must either be null or a function");A.prototype=Object.create(k&&k.prototype,{constructor:{value:A,writable:!0,configurable:!0}}),k&&u(A,k)}function u(A,k){return u=Object.setPrototypeOf||function($,S){return $.__proto__=S,$},u(A,k)}function d(A){var k=h();return function(){var $=p(A),S;if(k){var I=p(this).constructor;S=Reflect.construct($,arguments,I)}else S=$.apply(this,arguments);return f(this,S)}}function f(A,k){return k&&(t(k)==="object"||typeof k=="function")?k:m(A)}function m(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function h(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch{return!1}}function p(A){return p=Object.setPrototypeOf?Object.getPrototypeOf:function(T){return T.__proto__||Object.getPrototypeOf(T)},p(A)}function g(A,k,T){return k in A?Object.defineProperty(A,k,{value:T,enumerable:!0,configurable:!0,writable:!0}):A[k]=T,A}var b=["ACCESSIBLE","ACTION","AGAINST","AGGREGATE","ALGORITHM","ALL","ALTER","ANALYSE","ANALYZE","AS","ASC","AUTOCOMMIT","AUTO_INCREMENT","BACKUP","BEGIN","BETWEEN","BINLOG","BOTH","CASCADE","CHANGE","CHANGED","CHARACTER SET","CHARSET","CHECK","CHECKSUM","COLLATE","COLLATION","COLUMN","COLUMNS","COMMENT","COMMIT","COMMITTED","COMPRESSED","CONCURRENT","CONSTRAINT","CONTAINS","CONVERT","CREATE","CROSS","CURRENT_TIMESTAMP","DATABASE","DATABASES","DAY","DAY_HOUR","DAY_MINUTE","DAY_SECOND","DEFAULT","DEFINER","DELAYED","DELETE","DESC","DESCRIBE","DETERMINISTIC","DISTINCT","DISTINCTROW","DIV","DO","DROP","DUMPFILE","DUPLICATE","DYNAMIC","ELSE","ENCLOSED","ENGINE","ENGINES","ENGINE_TYPE","ESCAPE","ESCAPED","EVENTS","EXEC","EXECUTE","EXISTS","EXPLAIN","EXTENDED","FAST","FETCH","FIELDS","FILE","FIRST","FIXED","FLUSH","FOR","FORCE","FOREIGN","FULL","FULLTEXT","FUNCTION","GLOBAL","GRANT","GRANTS","GROUP_CONCAT","HEAP","HIGH_PRIORITY","HOSTS","HOUR","HOUR_MINUTE","HOUR_SECOND","IDENTIFIED","IF","IFNULL","IGNORE","IN","INDEX","INDEXES","INFILE","INSERT","INSERT_ID","INSERT_METHOD","INTERVAL","INTO","INVOKER","IS","ISOLATION","KEY","KEYS","KILL","LAST_INSERT_ID","LEADING","LEVEL","LIKE","LINEAR","LINES","LOAD","LOCAL","LOCK","LOCKS","LOGS","LOW_PRIORITY","MARIA","MASTER","MASTER_CONNECT_RETRY","MASTER_HOST","MASTER_LOG_FILE","MATCH","MAX_CONNECTIONS_PER_HOUR","MAX_QUERIES_PER_HOUR","MAX_ROWS","MAX_UPDATES_PER_HOUR","MAX_USER_CONNECTIONS","MEDIUM","MERGE","MINUTE","MINUTE_SECOND","MIN_ROWS","MODE","MODIFY","MONTH","MRG_MYISAM","MYISAM","NAMES","NATURAL","NOT","NOW()","NULL","OFFSET","ON DELETE","ON UPDATE","ON","ONLY","OPEN","OPTIMIZE","OPTION","OPTIONALLY","OUTFILE","PACK_KEYS","PAGE","PARTIAL","PARTITION","PARTITIONS","PASSWORD","PRIMARY","PRIVILEGES","PROCEDURE","PROCESS","PROCESSLIST","PURGE","QUICK","RAID0","RAID_CHUNKS","RAID_CHUNKSIZE","RAID_TYPE","RANGE","READ","READ_ONLY","READ_WRITE","REFERENCES","REGEXP","RELOAD","RENAME","REPAIR","REPEATABLE","REPLACE","REPLICATION","RESET","RESTORE","RESTRICT","RETURN","RETURNS","REVOKE","RLIKE","ROLLBACK","ROW","ROWS","ROW_FORMAT","SECOND","SECURITY","SEPARATOR","SERIALIZABLE","SESSION","SHARE","SHOW","SHUTDOWN","SLAVE","SONAME","SOUNDS","SQL","SQL_AUTO_IS_NULL","SQL_BIG_RESULT","SQL_BIG_SELECTS","SQL_BIG_TABLES","SQL_BUFFER_RESULT","SQL_CACHE","SQL_CALC_FOUND_ROWS","SQL_LOG_BIN","SQL_LOG_OFF","SQL_LOG_UPDATE","SQL_LOW_PRIORITY_UPDATES","SQL_MAX_JOIN_SIZE","SQL_NO_CACHE","SQL_QUOTE_SHOW_CREATE","SQL_SAFE_UPDATES","SQL_SELECT_LIMIT","SQL_SLAVE_SKIP_COUNTER","SQL_SMALL_RESULT","SQL_WARNINGS","START","STARTING","STATUS","STOP","STORAGE","STRAIGHT_JOIN","STRING","STRIPED","SUPER","TABLE","TABLES","TEMPORARY","TERMINATED","THEN","TO","TRAILING","TRANSACTIONAL","TRUE","TRUNCATE","TYPE","TYPES","UNCOMMITTED","UNIQUE","UNLOCK","UNSIGNED","USAGE","USE","USING","VARIABLES","VIEW","WITH","WORK","WRITE","YEAR_MONTH"],v=["ADD","AFTER","ALTER COLUMN","ALTER TABLE","CASE","DELETE FROM","END","EXCEPT","FETCH FIRST","FROM","GROUP BY","GO","HAVING","INSERT INTO","INSERT","LIMIT","MODIFY","ORDER BY","SELECT","SET CURRENT SCHEMA","SET SCHEMA","SET","UPDATE","VALUES","WHERE"],y=["INTERSECT","INTERSECT ALL","MINUS","UNION","UNION ALL"],C=["AND","CROSS APPLY","CROSS JOIN","ELSE","INNER JOIN","JOIN","LEFT JOIN","LEFT OUTER JOIN","OR","OUTER APPLY","OUTER JOIN","RIGHT JOIN","RIGHT OUTER JOIN","WHEN","XOR"],E=function(A){l(T,A);var k=d(T);function T(){return s(this,T),k.apply(this,arguments)}return T}(n.default);e.default=E,g(E,"tokenizer",new r.default({reservedWords:b,reservedTopLevelWords:v,reservedNewlineWords:C,reservedTopLevelWordsNoIndent:y,stringTypes:['""',"N''","''","``","[]"],openParens:["(","CASE"],closeParens:[")","END"],indexedPlaceholderTypes:["?"],namedPlaceholderTypes:["@",":"],lineCommentTypes:["#","--"]})),o.exports=e.default})(StandardSqlFormatter,StandardSqlFormatter.exports);var StandardSqlFormatterExports=StandardSqlFormatter.exports;(function(o){Object.defineProperty(o,"__esModule",{value:!0}),o.default=o.format=o.FORMATTERS=void 0;var e=l(Db2FormatterExports),t=l(N1qlFormatterExports),n=l(PlSqlFormatterExports),r=l(RedshiftFormatterExports),a=l(SparkSqlFormatterExports),s=l(StandardSqlFormatterExports);function l(h){return h&&h.__esModule?h:{default:h}}function u(h){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?u=function(g){return typeof g}:u=function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},u(h)}var d={db2:e.default,n1ql:t.default,"pl/sql":n.default,plsql:n.default,redshift:r.default,spark:a.default,sql:s.default};o.FORMATTERS=d;var f=function(p){var g=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(typeof p!="string")throw new Error("Invalid query argument. Extected string, instead got "+u(p));var b=s.default;if(g.language!==void 0&&(b=d[g.language]),b===void 0)throw Error("Unsupported SQL dialect: ".concat(g.language));return new b(g).format(p)};o.format=f;var m={format:f,FORMATTERS:d};o.default=m})(sqlFormatter$1);const sqlFormatter=getDefaultExportFromCjs(sqlFormatter$1);async function generateTableSql(o,e,t,n=!1){const r=await getDbCore(e,e.objectTypeField||"tables"),a=await getConnectionInfo(e),l=(lib.findEngineDriver(a,o)||lib.driverBase).createDumper();return r&&t(l,r),n?sqlFormatter.format(l.s):l.s}async function applyScriptTemplate(o,e,t){if(o=="CREATE TABLE")return generateTableSql(e,t,(n,r)=>n.createTable(r));if(o=="SELECT")return generateTableSql(e,t,(n,r)=>{n.put("^select %,i ^from %f",r.columns.map(a=>a.columnName),r)},!0);if(o=="CREATE OBJECT"){const n=await getSqlObjectInfo(t);if(n)return n.requiresFormat&&n.createSql?sqlFormatter.format(n.createSql):n.createSql}if(o=="ALTER OBJECT"){const n=await getSqlObjectInfo(t);if(n){const r=n.requiresFormat&&n.createSql?sqlFormatter.format(n.createSql):n.createSql||"",a=r.trimStart().startsWith("CREATE ")?"ALTER ":"alter ";return r.replace(/^\s*create\s+/i,a)}}if(o=="EXECUTE PROCEDURE"){const n=await getSqlObjectInfo(t),r=await getConnectionInfo(t),s=(lib.findEngineDriver(r,e)||lib.driverBase).createDumper();return n&&s.put("^execute %f",n),s.s}return o=="dropCollection"?`db.collection('${t.pureName}').drop()`:o=="findCollection"?`db.collection('${t.pureName}').find()`:null}function create_fragment$25(o){let e,t;const n=[o[2],{loadRowFunc:o[0]},{loadRowCountFunc:o[1]},{rowCountNotAvailable:!0}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new LoadingFormView({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&7?get_spread_update(n,[s&4&&get_spread_object(a[2]),s&1&&{loadRowFunc:a[0]},s&2&&{loadRowCountFunc:a[1]},n[3]]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}var __awaiter$5=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};function loadRow(o,e){return __awaiter$5(this,void 0,void 0,function*(){const{jslid:t,formatterFunction:n,display:r}=o,a=yield apiCall("jsldata/get-rows",{jslid:t,offset:e,limit:1,formatterFunction:n,filters:r?r.compileJslFilters():null});return a.errorMessage?a:a[0]})}function instance$23(o,e,t){var n=this&&this.__awaiter||function(l,u,d,f){function m(h){return h instanceof d?h:new d(function(p){p(h)})}return new(d||(d=Promise))(function(h,p){function g(y){try{v(f.next(y))}catch(C){p(C)}}function b(y){try{v(f.throw(y))}catch(C){p(C)}}function v(y){y.done?h(y.value):m(y.value).then(g,b)}v((f=f.apply(l,u||[])).next())})};let{display:r}=e;function a(){return n(this,void 0,void 0,function*(){return yield loadRow(e,r.config.formViewRecordNumber||0)})}function s(){return n(this,void 0,void 0,function*(){return null})}return o.$$set=l=>{t(2,e=assign(assign({},e),exclude_internal_props(l))),"display"in l&&t(3,r=l.display)},e=exclude_internal_props(e),[a,s,e,r]}class JslFormView extends SvelteComponent{constructor(e){super(),init(this,e,instance$23,create_fragment$25,safe_not_equal,{display:3})}}function create_fragment$24(o){let e,t,n,r;const a=[o[6],{loadDataPage},{dataPageAvailable},{loadRowCount},{grider:o[4]},{rowCountLoaded:o[3]}];function s(d){o[18](d)}function l(d){o[19](d)}let u={};for(let d=0;d<a.length;d+=1)u=assign(u,a[d]);return o[1]!==void 0&&(u.loadedRows=o[1]),o[0]!==void 0&&(u.selectedCellsPublished=o[0]),e=new LoadingDataGridCore({props:u}),o[17](e),binding_callbacks.push(()=>bind(e,"loadedRows",s)),binding_callbacks.push(()=>bind(e,"selectedCellsPublished",l)),{c(){create_component(e.$$.fragment)},m(d,f){mount_component(e,d,f),r=!0},p(d,[f]){const m=f&88?get_spread_update(a,[f&64&&get_spread_object(d[6]),f&0&&{loadDataPage},f&0&&{dataPageAvailable},f&0&&{loadRowCount},f&16&&{grider:d[4]},f&8&&{rowCountLoaded:d[3]}]):{};!t&&f&2&&(t=!0,m.loadedRows=d[1],add_flush_callback(()=>t=!1)),!n&&f&1&&(n=!0,m.selectedCellsPublished=d[0],add_flush_callback(()=>n=!1)),e.$set(m)},i(d){r||(transition_in(e.$$.fragment,d),r=!0)},o(d){transition_out(e.$$.fragment,d),r=!1},d(d){o[17](null),destroy_component(e,d)}}}var __awaiter$4=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const getCurrentEditor$l=()=>getActiveComponent("JslDataGridCore");registerCommand({id:"jslTableGrid.export",category:"Data grid",name:"Export",icon:"icon export",keyText:"CtrlOrCommand+E",testEnabled:()=>getCurrentEditor$l()!=null,onClick:()=>getCurrentEditor$l().exportGrid()});function loadDataPage(o,e,t){return __awaiter$4(this,void 0,void 0,function*(){const{jslid:n,display:r,formatterFunction:a}=o;return yield apiCall("jsldata/get-rows",{jslid:n,offset:e,limit:t,formatterFunction:a,filters:r?r.compileJslFilters():null,sort:r.config.sort})})}function dataPageAvailable(o){return!0}function loadRowCount(o){return __awaiter$4(this,void 0,void 0,function*(){const{jslid:e}=o;return(yield apiCall("jsldata/get-stats",{jslid:e})).rowCount})}let formatterPlugin,formatterFunction;function instance$22(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,D=>t(16,r=D)),n);o.$$.on_destroy.push(()=>a());var l=this&&this.__awaiter||function(D,x,B,K){function U(G){return G instanceof B?G:new B(function(W){W(G)})}return new(B||(B=Promise))(function(G,W){function q(Y){try{z(K.next(Y))}catch(V){W(V)}}function H(Y){try{z(K.throw(Y))}catch(V){W(V)}}function z(Y){Y.done?G(Y.value):U(Y.value).then(q,H)}z((K=K.apply(D,x||[])).next())})};let{jslid:u}=e,{display:d}=e,{formatterFunction:f}=e,{changeSetState:m}=e,{dispatchChangeSet:h}=e,{macroPreview:p}=e,{macroValues:g}=e,{selectedCellsPublished:b=()=>[]}=e;const v=createActivator("JslDataGridCore",!1);let{loadedRows:y=[]}=e,C,E=0,A=null;const k=_.throttle(()=>C==null?void 0:C.resetLoadedAll(),500),T=D=>{D.changeIndex<E||(E=D.changeIndex,t(3,A=D.rowCount),k())};function $(D){return D?(apiOn(`jsldata-stats-${D}`,T),()=>{apiOff(`jsldata-stats-${D}`,T)}):()=>{}}let S;function I(){const D={},x=u.match(/^archive:\/\/([^/]+)\/(.*)$/);x?(D.sourceStorageType="archive",D.sourceArchiveFolder=x[1],D.sourceList=[x[2]],D[`columns_${x[2]}`]=d.getExportColumnMap()):(D.sourceStorageType="jsldata",D.sourceJslId=u,D.sourceList=["query-data"],D["columns_query-data"]=d.getExportColumnMap()),showModal(ImportExportModal,{initialValues:D})}const R=D=>()=>l(void 0,void 0,void 0,function*(){const x=u.match(/^archive:\/\/([^/]+)\/(.*)$/);x?exportQuickExportFile(x[2],{functionName:"archiveReader",props:{folderName:x[1],fileName:x[2]}},D,d.getExportColumnMap()):exportQuickExportFile("Query",{functionName:"jslDataReader",props:{jslid:u}},D,d.getExportColumnMap())});registerQuickExportHandler(R),registerMenu(()=>Object.assign(Object.assign({},createQuickExportMenu(R,{command:"jslTableGrid.export"})),{tag:"export"}));function N(D){binding_callbacks[D?"unshift":"push"](()=>{C=D,t(2,C)})}function M(D){y=D,t(1,y)}function F(D){b=D,t(0,b)}return o.$$set=D=>{t(6,e=assign(assign({},e),exclude_internal_props(D))),"jslid"in D&&t(7,u=D.jslid),"display"in D&&t(8,d=D.display),"formatterFunction"in D&&t(9,f=D.formatterFunction),"changeSetState"in D&&t(10,m=D.changeSetState),"dispatchChangeSet"in D&&t(11,h=D.dispatchChangeSet),"macroPreview"in D&&t(12,p=D.macroPreview),"macroValues"in D&&t(13,g=D.macroValues),"selectedCellsPublished"in D&&t(0,b=D.selectedCellsPublished),"loadedRows"in D&&t(1,y=D.loadedRows)},o.$$.update=()=>{o.$$.dirty&128&&s(t(5,n=useEffect(()=>$(u)))),o.$$.dirty&65536,o.$$.dirty&15619&&p&&t(4,S=new ChangeSetGrider(y,m,h,d,p,g,b(),!0)),o.$$.dirty&7426&&(p||t(4,S=new ChangeSetGrider(y,m,h,d,void 0,void 0,void 0,!0)))},e=exclude_internal_props(e),[b,y,C,A,S,n,e,u,d,f,m,h,p,g,v,I,r,N,M,F]}class JslDataGridCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$22,create_fragment$24,safe_not_equal,{jslid:7,display:8,formatterFunction:9,changeSetState:10,dispatchChangeSet:11,macroPreview:12,macroValues:13,selectedCellsPublished:0,activator:14,loadedRows:1,exportGrid:15})}get activator(){return this.$$.ctx[14]}get exportGrid(){return this.$$.ctx[15]}}const JslDataGridCore$1=Object.freeze(Object.defineProperty({__proto__:null,default:JslDataGridCore,formatterFunction,formatterPlugin},Symbol.toStringTag,{value:"Module"}));function create_key_block$5(o){var l,u,d,f;let e,t,n;const r=[o[14],{display:o[8]},{jslid:o[0]},{config:o[7]},{setConfig:o[11].update},{gridCoreComponent:JslDataGridCore},{formViewComponent:JslFormView},{isDynamicStructure:!!((l=o[6])!=null&&l.__isDynamicStructure)},{useEvalFilters:!0},{showMacros:!!o[3]},{expandMacros:!!o[3]},{onRunMacro:o[13]},{macroCondition:(u=o[6])!=null&&u.__isDynamicStructure?null:func$9},{hasMultiColumnFilter:!0},{changeSetState:o[1]},{changeSetStore:o[2]},{dispatchChangeSet:o[3]},{allowChangeChangeSetStructure:o[4]},{preprocessLoadedRow:(f=(d=o[1])==null?void 0:d.value)!=null&&f.dataUpdateCommands?o[24]:null}];function a(m){o[25](m)}let s={};for(let m=0;m<r.length;m+=1)s=assign(s,r[m]);return o[5]!==void 0&&(s.loadedRows=o[5]),e=new DataGrid({props:s}),binding_callbacks.push(()=>bind(e,"loadedRows",a)),{c(){create_component(e.$$.fragment)},m(m,h){mount_component(e,m,h),n=!0},p(m,h){var g,b,v,y;const p=h&27103?get_spread_update(r,[h&16384&&get_spread_object(m[14]),h&256&&{display:m[8]},h&1&&{jslid:m[0]},h&128&&{config:m[7]},h&2048&&{setConfig:m[11].update},h&0&&{gridCoreComponent:JslDataGridCore},h&0&&{formViewComponent:JslFormView},h&64&&{isDynamicStructure:!!((g=m[6])!=null&&g.__isDynamicStructure)},r[8],h&8&&{showMacros:!!m[3]},h&8&&{expandMacros:!!m[3]},h&8192&&{onRunMacro:m[13]},h&64&&{macroCondition:(b=m[6])!=null&&b.__isDynamicStructure?null:func$9},r[13],h&2&&{changeSetState:m[1]},h&4&&{changeSetStore:m[2]},h&8&&{dispatchChangeSet:m[3]},h&16&&{allowChangeChangeSetStructure:m[4]},h&2&&{preprocessLoadedRow:(y=(v=m[1])==null?void 0:v.value)!=null&&y.dataUpdateCommands?m[24]:null}]):{};!t&&h&32&&(t=!0,p.loadedRows=m[5],add_flush_callback(()=>t=!1)),e.$set(p)},i(m){n||(transition_in(e.$$.fragment,m),n=!0)},o(m){transition_out(e.$$.fragment,m),n=!1},d(m){destroy_component(e,m)}}}function create_fragment$23(o){let e=o[0],t,n,r=create_key_block$5(o);return{c(){r.c(),t=empty()},m(a,s){r.m(a,s),insert(a,t,s),n=!0},p(a,[s]){s&1&&safe_not_equal(e,e=a[0])?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block$5(a),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r.p(a,s)},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r.d(a)}}}const func$9=o=>o.type=="transformValue";function instance$21(o,e,t){let n,r,a,s,l;const u=["jslid","supportsReload","listenInitializeFile","changeSetState","changeSetStore","dispatchChangeSet","allowChangeChangeSetStructure","infoLoadCounter"];let d=compute_rest_props(e,u),f,m,h,p=noop$1,g=()=>(p(),p=subscribe(n,W=>t(22,h=W)),n),b,v=noop$1,y=()=>(v(),v=subscribe(r,W=>t(23,b=W)),r);o.$$.on_destroy.push(()=>p()),o.$$.on_destroy.push(()=>v());var C;let{jslid:E}=e,{supportsReload:A=!1}=e,{listenInitializeFile:k=!1}=e,{changeSetState:T=null}=e,{changeSetStore:$=null}=e,{dispatchChangeSet:S=null}=e,{allowChangeChangeSetStructure:I=!1}=e,{infoLoadCounter:R=0}=e,N,M=0;const F=writable(lib$3.createGridConfig());component_subscribe(o,F,W=>t(7,m=W));const D=writable(lib$3.createGridCache());component_subscribe(o,D,W=>t(21,f=W));function x(){t(19,M+=1)}function B(W,q,H){const z=lib$3.runMacroOnChangeSet(W,q,H,T==null?void 0:T.value,l,!0);z&&S({type:"set",value:z})}function K(W){return W&&k?(apiOn(`session-initialize-file-${W}`,x),()=>{apiOff(`session-initialize-file-${W}`,x)}):()=>{}}const U=W=>{var q;return lib.processJsonDataUpdateCommands(W,(q=T==null?void 0:T.value)==null?void 0:q.dataUpdateCommands)};function G(W){N=W,t(5,N)}return o.$$set=W=>{e=assign(assign({},e),exclude_internal_props(W)),t(14,d=compute_rest_props(e,u)),"jslid"in W&&t(0,E=W.jslid),"supportsReload"in W&&t(15,A=W.supportsReload),"listenInitializeFile"in W&&t(16,k=W.listenInitializeFile),"changeSetState"in W&&t(1,T=W.changeSetState),"changeSetStore"in W&&t(2,$=W.changeSetStore),"dispatchChangeSet"in W&&t(3,S=W.dispatchChangeSet),"allowChangeChangeSetStructure"in W&&t(4,I=W.allowChangeChangeSetStructure),"infoLoadCounter"in W&&t(17,R=W.infoLoadCounter)},o.$$.update=()=>{o.$$.dirty&655361&&g(t(10,n=useApiCall("jsldata/get-info",{jslid:E,infoCounter:M,infoLoadCounter:R},{}))),o.$$.dirty&1&&y(t(9,r=useEffect(()=>K(E)))),o.$$.dirty&8388608,o.$$.dirty&4194304&&t(20,a=lib.generateTablePairingId(h)),o.$$.dirty&1310738&&t(6,s=I&&(t(18,C=T==null?void 0:T.value)===null||C===void 0?void 0:C.structure)||a),o.$$.dirty&2130147&&t(8,l=new lib$3.JslGridDisplay(E,s,m,F.update,f,D.update,N,s==null?void 0:s.__isDynamicStructure,A,!!T))},[E,T,$,S,I,N,s,m,l,r,n,F,D,B,d,A,k,R,C,M,a,f,h,b,U,G]}class JslDataGrid extends SvelteComponent{constructor(e){super(),init(this,e,instance$21,create_fragment$23,safe_not_equal,{jslid:0,supportsReload:15,listenInitializeFile:16,changeSetState:1,changeSetStore:2,dispatchChangeSet:3,allowChangeChangeSetStructure:4,infoLoadCounter:17})}}const JslDataGrid$1=Object.freeze(Object.defineProperty({__proto__:null,default:JslDataGrid},Symbol.toStringTag,{value:"Module"})),AllResultsTab_svelte_svelte_type_style_lang="";function get_each_context$j(o,e,t){const n=o.slice();return n[1]=e[t],n}function create_each_block$j(o){let e,t,n,r;return t=new JslDataGrid({props:{jslid:o[1].jslid,multipleGridsOnTab:o[0].length>=2}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),attr(e,"class","wrapper svelte-kvh071")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},p(a,s){const l={};s&1&&(l.jslid=a[1].jslid),s&1&&(l.multipleGridsOnTab=a[0].length>=2),t.$set(l)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_fragment$22(o){let e,t,n=ensure_array_like(o[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$j(get_each_context$j(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){e=element("div");for(let s=0;s<r.length;s+=1)r[s].c();attr(e,"class","main svelte-kvh071"),toggle_class(e,"main1",o[0].length==1),toggle_class(e,"main2",o[0].length==2),toggle_class(e,"main3",o[0].length>2)},m(s,l){insert(s,e,l);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);t=!0},p(s,[l]){if(l&1){n=ensure_array_like(s[0]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$j(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$j(d),r[u].c(),transition_in(r[u],1),r[u].m(e,null))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}(!t||l&1)&&toggle_class(e,"main1",s[0].length==1),(!t||l&1)&&toggle_class(e,"main2",s[0].length==2),(!t||l&1)&&toggle_class(e,"main3",s[0].length>2)},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function instance$20(o,e,t){let{resultInfos:n=[]}=e;return o.$$set=r=>{"resultInfos"in r&&t(0,n=r.resultInfos)},[n]}class AllResultsTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$20,create_fragment$22,safe_not_equal,{resultInfos:0})}}const get__0_slot_changes=o=>({}),get__0_slot_context=o=>({slot:"0"}),get__1_slot_changes=o=>({}),get__1_slot_context=o=>({slot:"1"}),get__2_slot_changes=o=>({}),get__2_slot_context=o=>({slot:"2"}),get__3_slot_changes=o=>({}),get__3_slot_context=o=>({slot:"3"}),get__4_slot_changes=o=>({}),get__4_slot_context=o=>({slot:"4"}),get__5_slot_changes=o=>({}),get__5_slot_context=o=>({slot:"5"}),get__6_slot_changes=o=>({}),get__6_slot_context=o=>({slot:"6"}),get__7_slot_changes=o=>({}),get__7_slot_context=o=>({slot:"7"});function create__0_slot$3(o){let e;const t=o[13][0],n=create_slot(t,o,o[17],get__0_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__0_slot_changes):get_all_dirty_from_scope(r[17]),get__0_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__1_slot$g(o){let e;const t=o[13][1],n=create_slot(t,o,o[17],get__1_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__1_slot_changes):get_all_dirty_from_scope(r[17]),get__1_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__2_slot$f(o){let e;const t=o[13][2],n=create_slot(t,o,o[17],get__2_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__2_slot_changes):get_all_dirty_from_scope(r[17]),get__2_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__3_slot$3(o){let e;const t=o[13][3],n=create_slot(t,o,o[17],get__3_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__3_slot_changes):get_all_dirty_from_scope(r[17]),get__3_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__4_slot$2(o){let e;const t=o[13][4],n=create_slot(t,o,o[17],get__4_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__4_slot_changes):get_all_dirty_from_scope(r[17]),get__4_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__5_slot$2(o){let e;const t=o[13][5],n=create_slot(t,o,o[17],get__5_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__5_slot_changes):get_all_dirty_from_scope(r[17]),get__5_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__6_slot(o){let e;const t=o[13][6],n=create_slot(t,o,o[17],get__6_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__6_slot_changes):get_all_dirty_from_scope(r[17]),get__6_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create__7_slot$1(o){let e;const t=o[13][7],n=create_slot(t,o,o[17],get__7_slot_context);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,a){n&&n.p&&(!e||a&131072)&&update_slot_base(n,t,r,r[17],e?get_slot_changes(t,r[17],a,get__7_slot_changes):get_all_dirty_from_scope(r[17]),get__7_slot_context)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function create_fragment$21(o){let e,t,n={tabs:o[4],menu:o[0].length>0&&[o[2]?{text:"Every result in single tab",onClick:o[14]}:{text:"All results in one tab",onClick:o[15]}],$$slots:{7:[create__7_slot$1],6:[create__6_slot],5:[create__5_slot$2],4:[create__4_slot$2],3:[create__3_slot$3],2:[create__2_slot$f],1:[create__1_slot$g],0:[create__0_slot$3]},$$scope:{ctx:o}};return e=new TabControl({props:n}),o[16](e),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,[a]){const s={};a&16&&(s.tabs=r[4]),a&5&&(s.menu=r[0].length>0&&[r[2]?{text:"Every result in single tab",onClick:r[14]}:{text:"All results in one tab",onClick:r[15]}]),a&131072&&(s.$$scope={dirty:a,ctx:r}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[16](null),destroy_component(e,r)}}}function instance$1$(o,e,t){let n,r,a,s,l,u=noop$1,d=()=>(u(),u=subscribe(a,R=>t(12,l=R)),a);component_subscribe(o,allResultsInOneTabDefault,R=>t(11,s=R)),o.$$.on_destroy.push(()=>u());let{$$slots:f={},$$scope:m}=e;var h=this&&this.__awaiter||function(R,N,M,F){function D(x){return x instanceof M?x:new M(function(B){B(x)})}return new(M||(M=Promise))(function(x,B){function K(W){try{G(F.next(W))}catch(q){B(q)}}function U(W){try{G(F.throw(W))}catch(q){B(q)}}function G(W){W.done?x(W.value):D(W.value).then(K,U)}G((F=F.apply(R,N||[])).next())})};let{tabs:p=[]}=e,{sessionId:g}=e,{executeNumber:b}=e,{resultCount:v}=e;onMount(()=>{t(10,y=s)});let y=null,C=[],E;const A=R=>h(void 0,void 0,void 0,function*(){const{jslid:N,resultIndex:M}=R;t(0,C=[...C,{jslid:N,resultIndex:M}]),yield tick();const F=r[E.getValue()];F!=null&&F.isResult||E.setValue(_.findIndex(r,D=>D.isResult))});function k(R){return R?(apiOn(`session-recordset-${R}`,A),()=>{apiOff(`session-recordset-${R}`,A)}):()=>{}}function T(R){t(10,y=R),set_store_value(allResultsInOneTabDefault,s=R,s)}const $=()=>T(!1),S=()=>T(!0);function I(R){binding_callbacks[R?"unshift":"push"](()=>{E=R,t(1,E)})}return o.$$set=R=>{"tabs"in R&&t(7,p=R.tabs),"sessionId"in R&&t(8,g=R.sessionId),"executeNumber"in R&&t(9,b=R.executeNumber),"resultCount"in R&&t(6,v=R.resultCount),"$$scope"in R&&t(17,m=R.$$scope)},o.$$.update=()=>{o.$$.dirty&514&&b>=0&&(t(0,C=[]),E&&E.setValue(0)),o.$$.dirty&1&&t(6,v=C.length),o.$$.dirty&3072&&t(2,n=y??s),o.$$.dirty&133&&t(4,r=[...p,...n&&C.length>0?[{label:"Results",isResult:!0,component:AllResultsTab,props:{resultInfos:C}}]:C.map((R,N)=>({label:`Result ${N+1}`,isResult:!0,component:JslDataGrid,props:{jslid:R.jslid}}))]),o.$$.dirty&256&&d(t(3,a=useEffect(()=>k(g)))),o.$$.dirty&4096},[C,E,n,a,r,T,v,p,g,b,y,s,l,f,$,S,I,m]}class ResultTabs extends SvelteComponent{constructor(e){super(),init(this,e,instance$1$,create_fragment$21,safe_not_equal,{tabs:7,sessionId:8,executeNumber:9,resultCount:6})}}function create_default_slot_1$o(o){let e,t;return e=new FormTextField({props:{label:"File name",name:"name",focused:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_header_slot$b(o){let e;return{c(){e=text("Save file")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block$V(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Save to disk"}}),e.$on("click",o[11]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_footer_slot$a(o){let e,t,n,r;e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[4]);let a=o[3]&&create_if_block$V(o);return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,l){s[3]&&a.p(s,l)},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}function create_default_slot$J(o){let e,t;const n=[o[6]];let r={$$slots:{footer:[create_footer_slot$a],header:[create_header_slot$b],default:[create_default_slot_1$o]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&64?get_spread_update(n,[get_spread_object(a[6])]):{};s&8199&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$20(o){let e,t;return e=new FormProvider({props:{initialValues:{name:o[0]},$$slots:{default:[create_default_slot$J]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.initialValues={name:n[0]}),r&8263&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1_(o,e,t){const n=["data","name","folder","format","fileExtension","filePath","onSave"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(y,C,E,A){function k(T){return T instanceof E?T:new E(function($){$(T)})}return new(E||(E=Promise))(function(T,$){function S(N){try{R(A.next(N))}catch(M){$(M)}}function I(N){try{R(A.throw(N))}catch(M){$(M)}}function R(N){N.done?T(N.value):k(N.value).then(S,I)}R((A=A.apply(y,C||[])).next())})};let{data:s}=e,{name:l}=e,{folder:u}=e,{format:d}=e,{fileExtension:f}=e,{filePath:m}=e,{onSave:h=void 0}=e;const p=getElectron(),g=y=>a(void 0,void 0,void 0,function*(){const{name:C}=y.detail;yield apiCall("files/save",{folder:u,file:C,data:s,format:d}),closeCurrentModal(),h&&h(C,{savedFile:C,savedFolder:u,savedFilePath:null})}),b=y=>a(void 0,void 0,void 0,function*(){const E=window.require("path").parse(y);yield apiCall("files/save-as",{filePath:y,data:s,format:d}),closeCurrentModal(),h&&h(E.name,{savedFile:null,savedFolder:null,savedFilePath:y})}),v=async()=>{const y=await p.showSaveDialog({filters:[{name:`${f.toUpperCase()} files`,extensions:[f]},{name:"All files",extensions:["*"]}],defaultPath:m||`${l}.${f}`,properties:["showOverwriteConfirmation"]});y&&b(y)};return o.$$set=y=>{e=assign(assign({},e),exclude_internal_props(y)),t(6,r=compute_rest_props(e,n)),"data"in y&&t(7,s=y.data),"name"in y&&t(0,l=y.name),"folder"in y&&t(8,u=y.folder),"format"in y&&t(9,d=y.format),"fileExtension"in y&&t(1,f=y.fileExtension),"filePath"in y&&t(2,m=y.filePath),"onSave"in y&&t(10,h=y.onSave)},[l,f,m,p,g,b,r,s,u,d,h,v]}class SaveFileModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$1_,create_fragment$20,safe_not_equal,{data:7,name:0,folder:8,format:9,fileExtension:1,filePath:2,onSave:10})}}const SaveFileModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:SaveFileModal},Symbol.toStringTag,{value:"Module"}));async function saveTabFile(o,e,t,n,r){const a=get_store_value(openedTabs),s=o.activator.tabid,l=o.getData(),{savedFile:u,savedFilePath:d,savedFolder:f}=a.find(p=>p.tabid==s).props||{},m=async()=>{u&&await apiCall("files/save",{folder:f||t,file:u,data:l,format:n}),d&&await apiCall("files/save-as",{filePath:d,data:l,format:n}),markTabSaved(s)},h=(p,g)=>{changeTab(s,b=>({...b,title:p,unsaved:!1,props:{...b.props,savedFormat:n,...g}}))};if(e=="save-to-disk"){const g=await getElectron().showSaveDialog({filters:[{name:`${r.toUpperCase()} files`,extensions:[r]},{name:"All files",extensions:["*"]}],defaultPath:d||`file.${r}`,properties:["showOverwriteConfirmation"]});if(g){await apiCall("files/save-as",{filePath:g,data:l,format:n});const v=window.require("path").parse(g);h(v.name,{savedFile:null,savedFolder:null,savedFilePath:g})}}else(u||d)&&e=="save"?m():showModal(SaveFileModal,{data:l,folder:t,format:n,fileExtension:r,name:u||"newFile",filePath:d,onSave:h})}currentDatabase.subscribe(o=>{o&&recentDatabases.update(e=>[o,..._.compact(e).filter(n=>{var r,a;return n.name!=o.name||((r=n.connection)==null?void 0:r._id)!=((a=o.connection)==null?void 0:a._id)})].slice(0,10))});function switchDatabaseCommand(o){return{text:`${o.name} on ${getConnectionLabel(o==null?void 0:o.connection,{allowExplicitDatabase:!1})}`,onClick:()=>currentDatabase.set(o)}}registerCommand({id:"database.switch",category:"Database",name:"Change to recent",menuName:"Switch recent database",keyText:"CtrlOrCommand+D",getSubCommands:()=>getRecentDatabases().map(switchDatabaseCommand)});registerCommand({id:"database.changeState",category:"Database",name:"Change status",getSubCommands:()=>{const o=getCurrentDatabase();if(!o)return[];const{connection:e,name:t}=o,n={conid:e._id,database:t};return[{text:"Sync model (incremental)",onClick:()=>{apiCall("database-connections/sync-model",n)}},{text:"Sync model (full)",onClick:()=>{apiCall("database-connections/sync-model",{...n,isFullRefresh:!0})}},{text:"Reopen",onClick:()=>{apiCall("database-connections/refresh",n)}},{text:"Disconnect",onClick:()=>{getElectron()&&apiCall("database-connections/disconnect",n),currentDatabase.set(null)}}]}});async function openArchiveFolder(){const o=getElectron();get_store_value(extensions);const e=await o.showOpenDialog({properties:["openDirectory"]}),t=e&&e[0];if(!t)return;const n=await apiCall("archive/create-link",{linkedFolder:t});currentArchive.set(n),selectedWidget.set("archive"),visibleWidgetSideBar.set(!0),showSnackbarSuccess(`Created link ${n}`)}registerCommand({id:"theme.changeTheme",category:"Theme",name:"Change",toolbarName:"Change theme",onClick:async()=>{let o=await loadSettingsSvelte("SettingsModal");return showModal(o,{selectedTab:2})}});registerCommand({id:"toolbar.show",category:"Toolbar",name:"Show",onClick:()=>visibleToolbar.set(!0),testEnabled:()=>!getVisibleToolbar()});registerCommand({id:"toolbar.hide",category:"Toolbar",name:"Hide",onClick:()=>visibleToolbar.set(!1),testEnabled:()=>getVisibleToolbar()});registerCommand({id:"about.show",category:"About",name:"Show",toolbarName:"About",onClick:async()=>{let o=await loadModalsSvelte("AboutModal");return showModal(o)}});registerCommand({id:"toggle.sidebar",category:"Sidebar",name:"Show",toolbarName:"Toggle sidebar",keyText:"CtrlOrCommand+B",onClick:()=>visibleWidgetSideBar.update(o=>!o)});registerCommand({id:"new.connection",toolbar:!0,icon:"icon new-connection",toolbarName:"Add connection",category:"New",toolbarOrder:1,name:"Connection",testEnabled:()=>{var o;return!((o=getCurrentConfig())!=null&&o.runAsPortal)},onClick:()=>{openNewTab({title:"New Connection",icon:"img connection",tabComponent:"ConnectionTab"})}});registerCommand({id:"new.connection.folder",toolbar:!0,icon:"icon add-folder",toolbarName:"Add connection folder",category:"New",toolbarOrder:1,name:"Connection",testEnabled:()=>{var o;return!((o=getCurrentConfig())!=null&&o.runAsPortal)},onClick:()=>{showModal(InputTextModal,{value:"",label:"New connection folder name",header:"Create connection folder",onConfirm:async o=>{emptyConnectionGroupNames.update(e=>!o||e.includes(o)?e:[...e,o])}})}});registerCommand({id:"new.query",category:"New",icon:"icon file",toolbar:!0,toolbarOrder:2,name:"Query",toolbarName:"New query",keyText:"CtrlOrCommand+T",onClick:()=>newQuery()});registerCommand({id:"new.shell",category:"New",icon:"img shell",name:"JavaScript Shell",menuName:"New JavaScript shell",onClick:()=>{openNewTab({title:"Shell #",icon:"img shell",tabComponent:"ShellTab"})}});registerCommand({id:"new.queryDesign",category:"New",icon:"img query-design",name:"Query design",menuName:"New query design",onClick:()=>newQueryDesign(),testEnabled:()=>{var o,e,t;return getCurrentDatabase()&&((t=(e=lib.findEngineDriver((o=getCurrentDatabase())==null?void 0:o.connection,getExtensions()))==null?void 0:e.databaseEngineTypes)==null?void 0:t.includes("sql"))}});registerCommand({id:"new.perspective",category:"New",icon:"img perspective",name:"Perspective",menuName:"New perspective",onClick:()=>newPerspective()});registerCommand({id:"new.diagram",category:"New",icon:"img diagram",name:"ER Diagram",menuName:"New ER diagram",testEnabled:()=>{var o,e,t;return getCurrentDatabase()&&((t=(e=lib.findEngineDriver((o=getCurrentDatabase())==null?void 0:o.connection,getExtensions()))==null?void 0:e.databaseEngineTypes)==null?void 0:t.includes("sql"))},onClick:()=>newDiagram()});registerCommand({id:"new.archiveFolder",category:"New",icon:"img archive",name:"Archive folder",onClick:()=>{showModal(InputTextModal,{value:"",label:"New archive folder name",header:"Create archive folder",onConfirm:async o=>{apiCall("archive/create-folder",{folder:o})}})}});registerCommand({id:"new.application",category:"New",icon:"img app",name:"Application",onClick:()=>{showModal(InputTextModal,{value:"",label:"New application name",header:"Create application",onConfirm:async o=>{apiCall("apps/create-folder",{folder:o})}})}});registerCommand({id:"new.table",category:"New",icon:"icon table",name:"Table",toolbar:!0,toolbarName:"New table",testEnabled:()=>{var e,t;const o=lib.findEngineDriver((e=get_store_value(currentDatabase))==null?void 0:e.connection,getExtensions());return!!get_store_value(currentDatabase)&&((t=o==null?void 0:o.databaseEngineTypes)==null?void 0:t.includes("sql"))},onClick:()=>{const o=get_store_value(currentDatabase),e=_.get(o,"connection")||{},t=_.get(o,"name");openNewTab({title:"Table #",icon:"img table-structure",tabComponent:"TableStructureTab",props:{conid:e._id,database:t}},{editor:{columns:[]}},{forceNewTab:!0})}});registerCommand({id:"new.collection",category:"New",icon:"icon table",name:"Collection",toolbar:!0,toolbarName:"New collection",testEnabled:()=>{var e,t;const o=lib.findEngineDriver((e=get_store_value(currentDatabase))==null?void 0:e.connection,getExtensions());return!!get_store_value(currentDatabase)&&((t=o==null?void 0:o.databaseEngineTypes)==null?void 0:t.includes("document"))},onClick:async()=>{const o=get_store_value(currentDatabase),e=_.get(o,"connection")||{},t=_.get(o,"name"),n={conid:e._id,database:t};showModal(InputTextModal,{value:"",label:"New collection name",header:"Create collection",onConfirm:async r=>{await apiCall("database-connections/run-script",{...n,sql:`db.createCollection('${r}')`}),apiCall("database-connections/sync-model",n)}})}});registerCommand({id:"new.markdown",category:"New",icon:"img markdown",name:"Markdown page",onClick:()=>{openNewTab({title:"Page #",icon:"img markdown",tabComponent:"MarkdownEditorTab"})}});registerCommand({id:"new.modelCompare",category:"New",icon:"icon compare",name:"Compare DB",toolbar:!0,onClick:()=>{openNewTab({title:"Compare",icon:"img compare",tabComponent:"CompareModelTab"})}});registerCommand({id:"new.jsonl",category:"New",icon:"img archive",name:"JSON Lines",menuName:"New JSON lines file",onClick:()=>{openNewTab({title:"Lines #",icon:"img archive",tabComponent:"JsonLinesEditorTab"},{editor:'{"col1": "val1", "col2": "val2"}'})}});registerCommand({id:"new.sqliteDatabase",category:"New",icon:"img sqlite-database",name:"SQLite database",menuName:"New SQLite database",onClick:()=>{showModal(InputTextModal,{value:"newdb",label:"New database name",header:"Create SQLite database",onConfirm:async o=>{const t=await apiCall("connections/new-sqlite-database",{file:o});currentDatabase.set({connection:t,name:`${o}.sqlite`})}})}});registerCommand({id:"tabs.changelog",category:"Tabs",name:"Changelog",onClick:()=>{openNewTab({title:"ChangeLog",icon:"img markdown",tabComponent:"ChangelogTab",props:{}})}});registerCommand({id:"group.save",category:null,isGroupCommand:!0,name:"Save",keyText:"CtrlOrCommand+S",group:"save"});registerCommand({id:"group.saveAs",category:null,isGroupCommand:!0,name:"Save As",keyText:"CtrlOrCommand+Shift+S",group:"saveAs"});registerCommand({id:"group.undo",category:null,isGroupCommand:!0,name:"Undo",keyText:"CtrlOrCommand+Z",group:"undo"});registerCommand({id:"group.redo",category:null,isGroupCommand:!0,name:"Redo",keyText:"CtrlOrCommand+Y",group:"redo"});registerCommand({id:"file.open",category:"File",name:"Open",keyText:"CtrlOrCommand+O",testEnabled:()=>getElectron()!=null,onClick:openElectronFile});registerCommand({id:"file.openArchive",category:"File",name:"Open DB Model/Archive",testEnabled:()=>getElectron()!=null,onClick:openArchiveFolder});registerCommand({id:"folder.showLogs",category:"Folder",name:"Open logs",testEnabled:()=>getElectron()!=null,onClick:()=>electron.showItemInFolder(getCurrentConfig().logsFilePath)});registerCommand({id:"folder.showData",category:"Folder",name:"Open data folder",testEnabled:()=>getElectron()!=null,onClick:()=>electron.showItemInFolder(getCurrentConfig().connectionsFilePath)});registerCommand({id:"file.import",category:"File",name:"Import data",toolbar:!0,icon:"icon import",onClick:async()=>{let o=await loadModalsSvelte("ImportExportModal");return showModal(o,{importToCurrentTarget:!0,initialValues:{sourceStorageType:getDefaultFileFormat(get_store_value(extensions)).storageType}})}});registerCommand({id:"view.reset",category:"View",name:"Reset view",onClick:()=>{const o=["leftPanelWidth","visibleToolbar","selectedWidget","currentTheme","connectionsWidget","pinnedItemsWidget","dbObjectsWidget","favoritesWidget","savedFilesWidget","closedTabsWidget","queryHistoryWidget","archiveFoldersWidget","archiveFilesWidget","installedPluginsWidget","allPluginsWidget","currentArchive"];for(const e of o)removeLocalStorage(e);showSnackbarSuccess("Restart DbGate (or reload on web) for applying changes")}});registerCommand({id:"sql.generator",category:"SQL",name:"SQL Generator",toolbar:!0,icon:"icon sql-generator",testEnabled:()=>getCurrentDatabase()!=null,onClick:()=>{var o,e,t;return showModal(SqlGeneratorModal,{conid:(e=(o=getCurrentDatabase())==null?void 0:o.connection)==null?void 0:e._id,database:(t=getCurrentDatabase())==null?void 0:t.name})}});hasPermission("settings/change")&&(registerCommand({id:"settings.commands",category:"Settings",name:"Keyboard shortcuts",onClick:()=>{openNewTab({title:"Keyboard Shortcuts",icon:"icon keyboard",tabComponent:"CommandListTab",props:{}})}}),registerCommand({id:"settings.show",category:"Settings",name:"Change",toolbarName:"Settings",onClick:async()=>{let o=await loadSettingsSvelte("SettingsModal");return showModal(o)}}));registerCommand({id:"file.exit",category:"File",name:isMac()?"Quit":"Exit",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("quit-app")});registerCommand({id:"app.logout",category:"App",name:"Logout",testEnabled:()=>{var o;return((o=getCurrentConfig())==null?void 0:o.login)!=null},onClick:doLogout});registerCommand({id:"app.disconnect",category:"App",name:"Disconnect",testEnabled:()=>{var o;return((o=getCurrentConfig())==null?void 0:o.singleConnection)!=null},onClick:()=>{var o,e;return disconnectServerConnection((e=(o=getCurrentConfig())==null?void 0:o.singleConnection)==null?void 0:e._id)}});function registerFileCommands({idPrefix:o,category:e,getCurrentEditor:t,folder:n,format:r,fileExtension:a,save:s=!0,execute:l=!1,toggleComment:u=!1,findReplace:d=!1,undoRedo:f=!1,executeAdditionalCondition:m=null}){s&&(registerCommand({id:o+".save",group:"save",category:e,name:"Save",icon:"icon save",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>t()!=null,onClick:()=>saveTabFile(t(),"save",n,r,a)}),registerCommand({id:o+".saveAs",group:"saveAs",category:e,name:"Save As",testEnabled:()=>t()!=null,onClick:()=>saveTabFile(t(),"save-as",n,r,a)}),registerCommand({id:o+".saveToDisk",category:e,name:"Save to disk",testEnabled:()=>t()!=null&&getElectron()!=null,onClick:()=>saveTabFile(t(),"save-to-disk",n,r,a)})),l&&(registerCommand({id:o+".execute",category:e,name:"Execute",icon:"icon run",toolbar:!0,isRelatedToTab:!0,keyText:"F5 | CtrlOrCommand+Enter",testEnabled:()=>{var h;return t()!=null&&!((h=t())!=null&&h.isBusy())&&(m==null||m())},onClick:()=>t().execute()}),registerCommand({id:o+".kill",category:e,name:"Kill",icon:"icon close",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var h;return((h=t())==null?void 0:h.canKill)&&t().canKill()},onClick:()=>t().kill()})),u&&registerCommand({id:o+".toggleComment",category:e,name:"Toggle comment",keyText:"CtrlOrCommand+/",disableHandleKeyText:"CtrlOrCommand+/",testEnabled:()=>t()!=null,onClick:()=>t().toggleComment()}),d&&(registerCommand({id:o+".find",category:e,name:"Find",keyText:"CtrlOrCommand+F",testEnabled:()=>t()!=null,onClick:()=>t().find()}),registerCommand({id:o+".replace",category:e,keyText:isMac()?"Alt+Command+F":"CtrlOrCommand+H",name:"Replace",testEnabled:()=>t()!=null,onClick:()=>t().replace()})),f&&(registerCommand({id:o+".undo",category:e,name:"Undo",group:"undo",icon:"icon undo",testEnabled:()=>{var h;return(h=t())==null?void 0:h.canUndo()},onClick:()=>t().undo()}),registerCommand({id:o+".redo",category:e,group:"redo",name:"Redo",icon:"icon redo",testEnabled:()=>{var h;return(h=t())==null?void 0:h.canRedo()},onClick:()=>t().redo()}))}registerCommand({id:"app.minimize",category:"Application",name:"Minimize",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","minimize")});registerCommand({id:"app.toggleFullScreen",category:"Application",name:"Toggle full screen",keyText:"F11",testEnabled:()=>getElectron()!=null,onClick:async()=>{const e=!(await getSettings())["app.fullscreen"];apiCall("config/update-settings",{"app.fullscreen":e}),e?getElectron().send("window-action","fullscreen-on"):getElectron().send("window-action","fullscreen-off")}});registerCommand({id:"app.toggleDevTools",category:"Application",name:"Toggle Dev Tools",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","devtools")});registerCommand({id:"app.reload",category:"Application",name:"Reload",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","reload")});registerCommand({id:"app.openDocs",category:"Application",name:"Documentation",onClick:()=>openWebLink("https://dbgate.org/docs/")});registerCommand({id:"app.openWeb",category:"Application",name:"DbGate web",onClick:()=>openWebLink("https://dbgate.org")});registerCommand({id:"app.openIssue",category:"Application",name:"Report problem or feature request",onClick:()=>openWebLink("https://github.com/dbgate/dbgate/issues/new")});registerCommand({id:"app.openSponsoring",category:"Application",name:"Become sponsor",onClick:()=>openWebLink("https://opencollective.com/dbgate")});registerCommand({id:"app.zoomIn",category:"Application",name:"Zoom in",keyText:"CtrlOrCommand+=",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","zoomin")});registerCommand({id:"app.zoomOut",category:"Application",name:"Zoom out",keyText:"CtrlOrCommand+-",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","zoomout")});registerCommand({id:"app.zoomReset",category:"Application",name:"Reset zoom",testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","zoomreset")});registerCommand({id:"edit.undo",category:"Edit",name:"Undo",keyText:"CtrlOrCommand+Z",systemCommand:!0,testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","undo")});registerCommand({id:"edit.redo",category:"Edit",name:"Redo",systemCommand:!0,testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","redo")});registerCommand({id:"edit.cut",category:"Edit",name:"Cut",keyText:"CtrlOrCommand+X",systemCommand:!0,testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","cut")});registerCommand({id:"edit.copy",category:"Edit",name:"Copy",keyText:"CtrlOrCommand+C",systemCommand:!0,testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","copy")});registerCommand({id:"edit.paste",category:"Edit",name:"Paste",keyText:"CtrlOrCommand+V",systemCommand:!0,testEnabled:()=>getElectron()!=null,onClick:()=>getElectron().send("window-action","paste")});const electron=getElectron();electron&&electron.addEventListener("run-command",(o,e)=>runCommand(e));const InsertJoinModal_svelte_svelte_type_style_lang="";function create_default_slot$I(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F,D;function x(J){o[22](J)}function B(J){o[23](J)}let K={rows:o[7],focusOnCreate:!0,selectable:!0,columns:[{fieldName:"alias",header:"Alias"},{fieldName:"name",header:"Name"}]};o[2]!==void 0&&(K.selectedIndex=o[2]),o[8]!==void 0&&(K.domTable=o[8]),a=new TableControl({props:K}),binding_callbacks.push(()=>bind(a,"selectedIndex",x)),binding_callbacks.push(()=>bind(a,"domTable",B)),a.$on("keydown",o[14]);function U(J){o[24](J)}function G(J){o[25](J)}let W={rows:o[6],selectable:!0,columns:[{fieldName:"baseColumns",header:"Column from"},{fieldName:"refTable",header:"Table to"},{fieldName:"refColumns",header:"Column to"}]};o[3]!==void 0&&(W.selectedIndex=o[3]),o[9]!==void 0&&(W.domTable=o[9]),h=new TableControl({props:W}),binding_callbacks.push(()=>bind(h,"selectedIndex",U)),binding_callbacks.push(()=>bind(h,"domTable",G)),h.$on("keydown",o[15]);function q(J){o[26](J)}function H(J){o[27](J)}let z={rows:o[13].map(func$8),selectable:!0,columns:[{fieldName:"name",header:"Join type"}]};o[4]!==void 0&&(z.selectedIndex=o[4]),o[11]!==void 0&&(z.domTable=o[11]),E=new TableControl({props:z}),binding_callbacks.push(()=>bind(E,"selectedIndex",q)),binding_callbacks.push(()=>bind(E,"domTable",H)),E.$on("keydown",o[16]);function Y(J){o[28](J)}let V={value:o[5]};return o[10]!==void 0&&(V.domEditor=o[10]),I=new TextField({props:V}),binding_callbacks.push(()=>bind(I,"domEditor",Y)),I.$on("input",o[29]),I.$on("keydown",o[17]),F=new SqlEditor({props:{readOnly:!0,value:o[12],engine:o[1]}}),{c(){e=element("div"),t=element("div"),n=element("div"),n.textContent="Existing table",r=space(),create_component(a.$$.fragment),u=space(),d=element("div"),f=element("div"),f.textContent="New table",m=space(),create_component(h.$$.fragment),b=space(),v=element("div"),y=element("div"),y.textContent="Join",C=space(),create_component(E.$$.fragment),T=space(),$=element("div"),$.textContent="Alias",S=space(),create_component(I.$$.fragment),N=space(),M=element("div"),create_component(F.$$.fragment),attr(n,"class","m-1"),attr(t,"class","m-1 col-3"),attr(f,"class","m-1"),attr(d,"class","m-1 col-6"),attr(y,"class","m-1"),attr($,"class","m-1"),attr(v,"class","m-1 col-3"),attr(e,"class","flex mb-3"),attr(M,"class","sql svelte-1g1l9kr")},m(J,Q){insert(J,e,Q),append(e,t),append(t,n),append(t,r),mount_component(a,t,null),append(e,u),append(e,d),append(d,f),append(d,m),mount_component(h,d,null),append(e,b),append(e,v),append(v,y),append(v,C),mount_component(E,v,null),append(v,T),append(v,$),append(v,S),mount_component(I,v,null),insert(J,N,Q),insert(J,M,Q),mount_component(F,M,null),D=!0},p(J,Q){const X={};Q[0]&128&&(X.rows=J[7]),!s&&Q[0]&4&&(s=!0,X.selectedIndex=J[2],add_flush_callback(()=>s=!1)),!l&&Q[0]&256&&(l=!0,X.domTable=J[8],add_flush_callback(()=>l=!1)),a.$set(X);const ie={};Q[0]&64&&(ie.rows=J[6]),!p&&Q[0]&8&&(p=!0,ie.selectedIndex=J[3],add_flush_callback(()=>p=!1)),!g&&Q[0]&512&&(g=!0,ie.domTable=J[9],add_flush_callback(()=>g=!1)),h.$set(ie);const ce={};!A&&Q[0]&16&&(A=!0,ce.selectedIndex=J[4],add_flush_callback(()=>A=!1)),!k&&Q[0]&2048&&(k=!0,ce.domTable=J[11],add_flush_callback(()=>k=!1)),E.$set(ce);const de={};Q[0]&32&&(de.value=J[5]),!R&&Q[0]&1024&&(R=!0,de.domEditor=J[10],add_flush_callback(()=>R=!1)),I.$set(de);const se={};Q[0]&4096&&(se.value=J[12]),Q[0]&2&&(se.engine=J[1]),F.$set(se)},i(J){D||(transition_in(a.$$.fragment,J),transition_in(h.$$.fragment,J),transition_in(E.$$.fragment,J),transition_in(I.$$.fragment,J),transition_in(F.$$.fragment,J),D=!0)},o(J){transition_out(a.$$.fragment,J),transition_out(h.$$.fragment,J),transition_out(E.$$.fragment,J),transition_out(I.$$.fragment,J),transition_out(F.$$.fragment,J),D=!1},d(J){J&&(detach(e),detach(N),detach(M)),destroy_component(a),destroy_component(h),destroy_component(E),destroy_component(I),destroy_component(F)}}}function create_header_slot$a(o){let e;return{c(){e=text("Insert join")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$9(o){let e,t,n,r;return e=new FormStyledButton({props:{value:"OK"}}),e.$on("click",o[21]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_fragment$1$(o){let e,t;const n=[o[18]];let r={$$slots:{footer:[create_footer_slot$9],header:[create_header_slot$a],default:[create_default_slot$I]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&262144?get_spread_update(n,[get_spread_object(a[18])]):{};s[0]&8191|s[1]&2&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}const func$8=o=>({name:o});function instance$1Z(o,e,t){let n,r,a;const s=["sql","onInsert","dbinfo","engine"];let l=compute_rest_props(e,s),{sql:u}=e,{onInsert:d}=e,{dbinfo:f}=e,{engine:m}=e,h=0,p=0,g=0,b="",v=null,y=null,C=null,E=null;const A=["INNER JOIN","LEFT JOIN","RIGHT JOIN"];function k(W,q){if(!W[q])return[];const z=f.tables.find(Y=>Y.pureName==W[q].name);return z?[...z.foreignKeys.map(Y=>({baseColumns:Y.columns.map(V=>V.columnName).join(", "),refTable:Y.refTableName,refColumns:Y.columns.map(V=>V.refColumnName).join(", "),constraintName:Y.constraintName,columnMap:Y.columns})),...z.dependencies.map(Y=>({baseColumns:Y.columns.map(V=>V.refColumnName).join(", "),refTable:Y.pureName,refColumns:Y.columns.map(V=>V.columnName).join(", "),constraintName:Y.constraintName,columnMap:Y.columns.map(V=>({columnName:V.refColumnName,refColumnName:V.columnName}))}))]:[]}function T(W,q,H,z,Y,V){const J=q[z],Q=H[Y];return J&&Q?`${lib.SqlDumper.convertKeywordCase(A[W])} ${Q.refTable}${V?` ${V}`:""} ${lib.SqlDumper.convertKeywordCase("ON")} ${Q.columnMap.map(X=>`${J.name}.${X.columnName} = ${V||Q.refTable}.${X.refColumnName}`).join(lib.SqlDumper.convertKeywordCase(" AND "))}`:""}const $=W=>{(W.keyCode==keycodes.enter||W.keyCode==keycodes.rightArrow)&&y.focus()},S=W=>{W.keyCode==keycodes.leftArrow&&v.focus(),(W.keyCode==keycodes.enter||W.keyCode==keycodes.rightArrow)&&E.focus()},I=W=>{W.keyCode==keycodes.leftArrow&&y.focus(),W.keyCode==keycodes.enter&&C.focus()},R=W=>{W.keyCode==keycodes.enter&&(W.preventDefault(),closeCurrentModal(),d(a))},N=()=>{closeCurrentModal(),d(a)};function M(W){h=W,t(2,h)}function F(W){v=W,t(8,v)}function D(W){p=W,t(3,p)}function x(W){y=W,t(9,y)}function B(W){g=W,t(4,g)}function K(W){E=W,t(11,E)}function U(W){C=W,t(10,C)}const G=W=>{t(5,b=W.target.value)};return o.$$set=W=>{e=assign(assign({},e),exclude_internal_props(W)),t(18,l=compute_rest_props(e,s)),"sql"in W&&t(19,u=W.sql),"onInsert"in W&&t(0,d=W.onInsert),"dbinfo"in W&&t(20,f=W.dbinfo),"engine"in W&&t(1,m=W.engine)},o.$$.update=()=>{o.$$.dirty[0]&1572864&&t(7,n=analyseQuerySources(u,[...f.tables.map(W=>W.pureName),...f.views.map(W=>W.pureName)])),o.$$.dirty[0]&132&&t(6,r=k(n,h)),o.$$.dirty[0]&252&&t(12,a=T(g,n,r,h,p,b))},[d,m,h,p,g,b,r,n,v,y,C,E,a,A,$,S,I,R,l,u,f,N,M,F,D,x,B,K,U,G]}class InsertJoinModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$1Z,create_fragment$1$,safe_not_equal,{sql:19,onInsert:0,dbinfo:20,engine:1},null,[-1,-1])}}const InsertJoinModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:InsertJoinModal},Symbol.toStringTag,{value:"Module"}));function formatSeconds(o){if(o==null)return"";const e=_.padStart(Math.floor(o/3600).toString(),2,"0"),t=_.padStart((Math.floor(o/60)%60).toString(),2,"0"),n=_.padStart((o%60).toString(),2,"0");return`${e}:${t}:${n}`}function useTimerLabel(){let o=null,e=null;const t=getContext("tabid"),n=()=>{updateStatuBarInfoItem(t,"durationSeconds",{text:formatSeconds(o)})},r=()=>{o=0,n(),e=window.setInterval(()=>{o+=1,n()},1e3)},a=()=>{n(),e&&(window.clearInterval(e),e=null)};return onDestroy(()=>{e&&(window.clearInterval(e),e=null)}),{start:r,stop:a}}function create_fragment$1_(o){let e,t;return e=new ToolStripCommandSplitButton({props:{commands:[`${o[0]}.save`,`${o[0]}.saveAs`,o[1]&&`${o[0]}.saveToDisk`]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.commands=[`${n[0]}.save`,`${n[0]}.saveAs`,n[1]&&`${n[0]}.saveToDisk`]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1Y(o,e,t){let{idPrefix:n}=e;const r=getElectron();return o.$$set=a=>{"idPrefix"in a&&t(0,n=a.idPrefix)},[n,r]}class ToolStripSaveButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$1Y,create_fragment$1_,safe_not_equal,{idPrefix:0})}}function create_else_block$r(o){var r,a;let e,t,n={mode:((r=o[14])==null?void 0:r.editorMode)||"text",value:o[17].value||"",splitterOptions:(a=o[14])==null?void 0:a.getQuerySplitterOptions("editor"),menu:createMenu$7()};return e=new AceEditor({props:n}),o[51](e),e.$on("input",o[52]),e.$on("focus",o[53]),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),t=!0},p(s,l){var d,f;const u={};l[0]&16384&&(u.mode=((d=s[14])==null?void 0:d.editorMode)||"text"),l[0]&131072&&(u.value=s[17].value||""),l[0]&16384&&(u.splitterOptions=(f=s[14])==null?void 0:f.getQuerySplitterOptions("editor")),e.$set(u)},i(s){t||(transition_in(e.$$.fragment,s),t=!0)},o(s){transition_out(e.$$.fragment,s),t=!1},d(s){o[51](null),destroy_component(e,s)}}}function create_if_block_2$m(o){var r;let e,t,n={engine:o[7]&&o[7].engine,conid:o[1],database:o[2],splitterOptions:(r=o[14])==null?void 0:r.getQuerySplitterOptions("editor"),value:o[17].value||"",menu:createMenu$7(),onExecuteFragment:o[47],errorMessages:o[12]};return e=new SqlEditor({props:n}),o[48](e),e.$on("input",o[49]),e.$on("focus",o[50]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;const l={};s[0]&128&&(l.engine=a[7]&&a[7].engine),s[0]&2&&(l.conid=a[1]),s[0]&4&&(l.database=a[2]),s[0]&16384&&(l.splitterOptions=(u=a[14])==null?void 0:u.getQuerySplitterOptions("editor")),s[0]&131072&&(l.value=a[17].value||""),s[0]&4096&&(l.errorMessages=a[12]),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){o[48](null),destroy_component(e,a)}}}function create__1_slot$f(o){let e,t,n,r,a;const s=[create_if_block_2$m,create_else_block$r],l=[];function u(d,f){var m,h;return f[0]&16384&&(e=null),e==null&&(e=!!((h=(m=d[14])==null?void 0:m.databaseEngineTypes)!=null&&h.includes("sql"))),e?0:1}return t=u(o,[-1,-1,-1]),n=l[t]=s[t](o),{c(){n.c(),r=empty()},m(d,f){l[t].m(d,f),insert(d,r,f),a=!0},p(d,f){let m=t;t=u(d,f),t===m?l[t].p(d,f):(group_outros(),transition_out(l[m],1,1,()=>{l[m]=null}),check_outros(),n=l[t],n?n.p(d,f):(n=l[t]=s[t](d),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(d){a||(transition_in(n),a=!0)},o(d){transition_out(n),a=!1},d(d){d&&detach(r),l[t].d(d)}}}function create__0_slot$2(o){let e,t;return e=new SocketMessageView({props:{eventName:o[5]?`session-info-${o[5]}`:null,executeNumber:o[8],startLine:o[9],showProcedure:!0,showLine:!0,onChangeErrors:o[24]}}),e.$on("messageClick",o[20]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&32&&(a.eventName=n[5]?`session-info-${n[5]}`:null),r[0]&256&&(a.executeNumber=n[8]),r[0]&512&&(a.startLine=n[9]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$e(o){let e,t,n;function r(s){o[46](s)}let a={tabs:[{label:"Messages",slot:0}],sessionId:o[5],executeNumber:o[8],$$slots:{0:[create__0_slot$2]},$$scope:{ctx:o}};return o[11]!==void 0&&(a.resultCount=o[11]),e=new ResultTabs({props:a}),binding_callbacks.push(()=>bind(e,"resultCount",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};l[0]&32&&(u.sessionId=s[5]),l[0]&256&&(u.executeNumber=s[8]),l[0]&800|l[2]&1&&(u.$$scope={dirty:l,ctx:s}),!t&&l[0]&2048&&(t=!0,u.resultCount=s[11],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}function create_default_slot$H(o){let e,t;return e=new VerticalSplitter({props:{isSplitter:o[10],$$slots:{2:[create__2_slot$e],1:[create__1_slot$f]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&1024&&(a.isSplitter=n[10]),r[0]&162791|r[2]&1&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$z(o){let e,t;return e=new ToolStripExportButton({props:{command:"jslTableGrid.export",quickExportHandlerRef:o[25],label:"Export result"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot$c(o){let e,t,n,r,a,s,l,u,d,f;e=new ToolStripCommandSplitButton({props:{commands:["query.execute","query.executeCurrent"]}}),n=new ToolStripCommandButton({props:{command:"query.kill"}}),a=new ToolStripSaveButton({props:{idPrefix:"query"}}),l=new ToolStripCommandButton({props:{command:"query.formatCode"}});let m=o[11]==1&&create_if_block_1$z(o);return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),m&&m.c(),d=empty()},m(h,p){mount_component(e,h,p),insert(h,t,p),mount_component(n,h,p),insert(h,r,p),mount_component(a,h,p),insert(h,s,p),mount_component(l,h,p),insert(h,u,p),m&&m.m(h,p),insert(h,d,p),f=!0},p(h,p){h[11]==1?m?(m.p(h,p),p[0]&2048&&transition_in(m,1)):(m=create_if_block_1$z(h),m.c(),transition_in(m,1),m.m(d.parentNode,d)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros())},i(h){f||(transition_in(e.$$.fragment,h),transition_in(n.$$.fragment,h),transition_in(a.$$.fragment,h),transition_in(l.$$.fragment,h),transition_in(m),f=!0)},o(h){transition_out(e.$$.fragment,h),transition_out(n.$$.fragment,h),transition_out(a.$$.fragment,h),transition_out(l.$$.fragment,h),transition_out(m),f=!1},d(h){h&&(detach(t),detach(r),detach(s),detach(u),detach(d)),destroy_component(e,h),destroy_component(n,h),destroy_component(a,h),destroy_component(l,h),m&&m.d(h)}}}function create_if_block$U(o){let e,t;return e=new StatusBarTabItem({props:{icon:o[4]?"icon loading":"icon check",text:o[4]?"Running...":"Finished"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16&&(a.icon=n[4]?"icon loading":"icon check"),r[0]&16&&(a.text=n[4]?"Running...":"Finished"),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1Z(o){let e,t,n,r;e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$c],default:[create_default_slot$H]},$$scope:{ctx:o}}});let a=o[5]&&create_if_block$U(o);return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,l){const u={};l[0]&163815|l[2]&1&&(u.$$scope={dirty:l,ctx:s}),e.$set(u),s[5]?a?(a.p(s,l),l[0]&32&&transition_in(a,1)):(a=create_if_block$U(s),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$k=()=>getActiveComponent("QueryTab");registerCommand({id:"query.formatCode",category:"Query",name:"Format code",keyText:"Shift+Alt+F",testEnabled:()=>{var o;return(o=getCurrentEditor$k())===null||o===void 0?void 0:o.isSqlEditor()},onClick:()=>getCurrentEditor$k().formatCode()});registerCommand({id:"query.insertSqlJoin",category:"Query",name:"Insert SQL Join",keyText:"CtrlOrCommand+J",testEnabled:()=>{var o;return(o=getCurrentEditor$k())===null||o===void 0?void 0:o.isSqlEditor()},onClick:()=>getCurrentEditor$k().insertSqlJoin()});registerCommand({id:"query.toggleVisibleResultTabs",category:"Query",name:"Toggle visible result tabs",keyText:"CtrlOrCommand+Shift+R",testEnabled:()=>!!getCurrentEditor$k(),onClick:()=>getCurrentEditor$k().toggleVisibleResultTabs()});registerFileCommands({idPrefix:"query",category:"Query",getCurrentEditor:getCurrentEditor$k,folder:"sql",format:"text",fileExtension:"sql",execute:!0,toggleComment:!0,findReplace:!0,executeAdditionalCondition:()=>{var o;return(o=getCurrentEditor$k())===null||o===void 0?void 0:o.hasConnection()}});registerCommand({id:"query.executeCurrent",category:"Query",name:"Execute current",keyText:"CtrlOrCommand+Shift+Enter",testEnabled:()=>{var o,e;return getCurrentEditor$k()!=null&&!(!((o=getCurrentEditor$k())===null||o===void 0)&&o.isBusy())&&((e=getCurrentEditor$k())===null||e===void 0?void 0:e.hasConnection())},onClick:()=>getCurrentEditor$k().executeCurrent()});function createMenu$7(){return[{command:"query.execute"},{command:"query.executeCurrent"},{command:"query.kill"},{divider:!0},{command:"query.toggleComment"},{command:"query.formatCode"},{command:"query.insertSqlJoin"},{divider:!0},{command:"query.save"},{command:"query.saveAs"},{divider:!0},{command:"query.find"},{command:"query.replace"},{divider:!0},{command:"query.toggleVisibleResultTabs"}]}function instance$1X(o,e,t){let n,r,a,s,l,u=noop$1,d=()=>(u(),u=subscribe(n,Ee=>t(7,l=Ee)),n),f,m,h,p,g=noop$1,b=()=>(g(),g=subscribe(a,Ee=>t(45,p=Ee)),a);component_subscribe(o,extensions,Ee=>t(43,s=Ee)),o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>g());var v=this&&this.__awaiter||function(Ee,Ce,je,pt){function wt(ut){return ut instanceof je?ut:new je(function(Ct){Ct(ut)})}return new(je||(je=Promise))(function(ut,Ct){function xt(Ae){try{Rt(pt.next(Ae))}catch(Me){Ct(Me)}}function ht(Ae){try{Rt(pt.throw(Ae))}catch(Me){Ct(Me)}}function Rt(Ae){Ae.done?ut(Ae.value):wt(Ae.value).then(xt,ht)}Rt((pt=pt.apply(Ee,Ce||[])).next())})},y;let{tabid:C}=e,{conid:E}=e,{database:A}=e,{initialArgs:k}=e;const T=createActivator("QueryTab",!1),$=getContext("tabVisible");component_subscribe(o,$,Ee=>t(44,h=Ee));const S=useTimerLabel();let I=!1,R=0,N=0,M=!1,F=null,D,x,B,K;onMount(()=>{K=setInterval(()=>{F&&apiCall("sessions/ping",{sesid:F})},15*1e3)}),onDestroy(()=>{clearInterval(K)});function U(Ee){return Ee?(apiOn(`session-done-${Ee}`,pe),apiOn(`session-closed-${Ee}`,Oe),()=>{apiOff(`session-done-${Ee}`,pe),apiOff(`session-closed-${Ee}`,Oe)}):()=>{}}function G(){var Ee;return(Ee=r==null?void 0:r.databaseEngineTypes)===null||Ee===void 0?void 0:Ee.includes("sql")}function W(){return!!F}function q(){return I}function H(){return C}function z(){return!!E&&(!(l!=null&&l.isReadOnly)||(r==null?void 0:r.readOnlySessions))}function Y(){t(10,M=!M)}function V(Ee,Ce=0){return v(this,void 0,void 0,function*(){if(I)return;if(!Ee||!Ee.trim()){showSnackbarError("Skipped executing empty query");return}t(9,N=Ce),t(8,R++,R),t(10,M=!0);let je=F;je||(je=(yield apiCall("sessions/create",{conid:E,database:A})).sesid,t(5,F=je)),t(4,I=!0),S.start(),yield apiCall("sessions/execute-query",{sesid:je,sql:Ee}),yield apiCall("query-history/write",{data:{sql:Ee,conid:E,database:A,date:new Date().getTime()}})})}function J(){return v(this,void 0,void 0,function*(){const Ee=B.getCurrentCommandText();yield V(Ee.text,Ee.line)})}function Q(){return v(this,void 0,void 0,function*(){const Ee=B.getEditor().getSelectedText(),Ce=B.getEditor().getSelectionRange().start.row;yield V(Ee||m,Ee?Ce:0)})}function X(){return v(this,void 0,void 0,function*(){yield apiCall("sessions/kill",{sesid:F}),t(5,F=null),t(4,I=!1),S.stop()})}function ie(){return f.value||""}function ce(){B.getEditor().execCommand("togglecomment")}function de(){B.getEditor().execCommand("find")}function se(){B.getEditor().execCommand("replace")}function me(){const Ee=B.getEditor();Ee.setValue(sqlFormatter.format(Ee.getValue())),Ee.clearSelection()}function ue(){return v(this,void 0,void 0,function*(){const Ee=yield getDatabaseInfo({conid:E,database:A});showModal(InsertJoinModal,{sql:ie(),engine:l&&l.engine,dbinfo:Ee,onInsert:Ce=>{var je;const pt=B.getEditor();pt.session.insert(pt.getCursorPosition(),Ce),(je=B==null?void 0:B.getEditor())===null||je===void 0||je.focus()}})})}const he=Ee=>{B.getEditor()&&B.getEditor().gotoLine(Ee.line)},pe=()=>{t(4,I=!1),S.stop()},Oe=()=>{t(5,F=null),pe()},{editorState:qe,editorValue:et,setEditorData:Ue}=useEditorData({tabid:C,loadFromArgs:k&&k.scriptTemplate?()=>applyScriptTemplate(k.scriptTemplate,s,e):null});component_subscribe(o,qe,Ee=>t(17,f=Ee)),component_subscribe(o,et,Ee=>t(55,m=Ee));function fe(Ee){t(12,x=Ee)}const Ie=createQuickExportHandlerRef();let We=!1;function $e(Ee){D=Ee,t(11,D)}const Le=(Ee,Ce)=>V(Ee,Ce);function ze(Ee){binding_callbacks[Ee?"unshift":"push"](()=>{B=Ee,t(6,B)})}const re=Ee=>{Ue(Ee.detail),We&&markTabUnsaved(C),t(12,x=[])},ge=()=>{T.activate(),invalidateCommands(),setTimeout(()=>{t(13,We=!0)},100)};function Be(Ee){binding_callbacks[Ee?"unshift":"push"](()=>{B=Ee,t(6,B)})}const Ze=Ee=>Ue(Ee.detail),Pe=()=>{T.activate(),invalidateCommands()};return o.$$set=Ee=>{t(61,e=assign(assign({},e),exclude_internal_props(Ee))),"tabid"in Ee&&t(0,C=Ee.tabid),"conid"in Ee&&t(1,E=Ee.conid),"database"in Ee&&t(2,A=Ee.database),"initialArgs"in Ee&&t(26,k=Ee.initialArgs)},o.$$.update=()=>{o.$$.dirty[0]&2&&d(t(16,n=useConnectionInfo({conid:E}))),o.$$.dirty[0]&128|o.$$.dirty[1]&4096&&t(14,r=lib.findEngineDriver(l,s)),o.$$.dirty[0]&32&&b(t(15,a=useEffect(()=>U(F)))),o.$$.dirty[1]&16384,o.$$.dirty[0]&17&&changeTab(C,Ee=>Object.assign(Object.assign({},Ee),{busy:I})),o.$$.dirty[0]&48&&invalidateCommands(),o.$$.dirty[0]&64|o.$$.dirty[1]&10240&&h&&B&&(t(42,y=B==null?void 0:B.getEditor())===null||y===void 0||y.focus())},e=exclude_internal_props(e),[C,E,A,T,I,F,B,l,R,N,M,D,x,We,r,a,n,f,$,V,he,qe,et,Ue,fe,Ie,k,G,W,q,H,z,Y,J,Q,X,ie,ce,de,se,me,ue,y,s,h,p,$e,Le,ze,re,ge,Be,Ze,Pe]}class QueryTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1X,create_fragment$1Z,safe_not_equal,{tabid:0,conid:1,database:2,initialArgs:26,activator:3,isSqlEditor:27,canKill:28,isBusy:29,getTabId:30,hasConnection:31,toggleVisibleResultTabs:32,executeCurrent:33,execute:34,kill:35,getData:36,toggleComment:37,find:38,replace:39,formatCode:40,insertSqlJoin:41},null,[-1,-1,-1])}get activator(){return this.$$.ctx[3]}get isSqlEditor(){return this.$$.ctx[27]}get canKill(){return this.$$.ctx[28]}get isBusy(){return this.$$.ctx[29]}get getTabId(){return this.$$.ctx[30]}get hasConnection(){return this.$$.ctx[31]}get toggleVisibleResultTabs(){return this.$$.ctx[32]}get executeCurrent(){return this.$$.ctx[33]}get execute(){return this.$$.ctx[34]}get kill(){return this.$$.ctx[35]}get getData(){return this.$$.ctx[36]}get toggleComment(){return this.$$.ctx[37]}get find(){return this.$$.ctx[38]}get replace(){return this.$$.ctx[39]}get formatCode(){return this.$$.ctx[40]}get insertSqlJoin(){return this.$$.ctx[41]}}const QueryTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:QueryTab},Symbol.toStringTag,{value:"Module"})),RunnerOutputPane_svelte_svelte_type_style_lang="";function create_default_slot_1$n(o){let e;return{c(){e=text("Messages")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__1_slot$e(o){let e,t,n,r,a;return t=new WidgetTitle({props:{$$slots:{default:[create_default_slot_1$n]},$$scope:{ctx:o}}}),r=new SocketMessageView({props:{eventName:o[0]?`runner-info-${o[0]}`:null,executeNumber:o[1],showNoMessagesAlert:!0}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","container svelte-1naqcyl"),attr(e,"slot","1")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l&4&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l&1&&(d.eventName=s[0]?`runner-info-${s[0]}`:null),l&2&&(d.executeNumber=s[1]),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_default_slot$G(o){let e;return{c(){e=text("Output files")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__2_slot$d(o){let e,t,n,r,a;return t=new WidgetTitle({props:{$$slots:{default:[create_default_slot$G]},$$scope:{ctx:o}}}),r=new RunnerOutputFiles({props:{runnerId:o[0],executeNumber:o[1]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","container svelte-1naqcyl"),attr(e,"slot","2")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l&4&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l&1&&(d.runnerId=s[0]),l&2&&(d.executeNumber=s[1]),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create_fragment$1Y(o){let e,t;return e=new HorizontalSplitter({props:{$$slots:{2:[create__2_slot$d],1:[create__1_slot$e]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&7&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1W(o,e,t){let{runnerId:n}=e,{executeNumber:r}=e;return o.$$set=a=>{"runnerId"in a&&t(0,n=a.runnerId),"executeNumber"in a&&t(1,r=a.executeNumber)},[n,r]}class RunnerOutputPane extends SvelteComponent{constructor(e){super(),init(this,e,instance$1W,create_fragment$1Y,safe_not_equal,{runnerId:0,executeNumber:1})}}function create__1_slot$d(o){let e,t,n={value:o[5].value||"",menu:createMenu$6(),mode:"javascript"};return e=new AceEditor({props:n}),o[25](e),e.$on("input",o[26]),e.$on("focus",o[27]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){const s={};a[0]&32&&(s.value=r[5].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[25](null),destroy_component(e,r)}}}function create__2_slot$c(o){let e,t;return e=new RunnerOutputPane({props:{runnerId:o[1],executeNumber:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&2&&(a.runnerId=n[1]),r[0]&8&&(a.executeNumber=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$F(o){let e,t;return e=new VerticalSplitter({props:{$$slots:{2:[create__2_slot$c],1:[create__1_slot$d]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&46|r[1]&8&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot$b(o){let e,t,n,r,a,s,l,u;return e=new ToolStripCommandButton({props:{command:"shell.execute"}}),n=new ToolStripCommandButton({props:{command:"shell.kill"}}),a=new ToolStripSaveButton({props:{idPrefix:"shell"}}),l=new ToolStripCommandButton({props:{command:"shell.copyNodeScript"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p:noop$1,i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create_fragment$1X(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$b],default:[create_default_slot$F]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&46|r[1]&8&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$j=()=>getActiveComponent("ShellTab");registerFileCommands({idPrefix:"shell",category:"Shell",getCurrentEditor:getCurrentEditor$j,folder:"shell",format:"text",fileExtension:"js",execute:!0,toggleComment:!0,findReplace:!0,executeAdditionalCondition:()=>getCurrentConfig().allowShellScripting});registerCommand({id:"shell.copyNodeScript",category:"Shell",name:"Copy nodejs script",testEnabled:()=>getCurrentEditor$j()!=null,onClick:()=>getCurrentEditor$j().copyNodeScript()});registerCommand({id:"shell.openWizard",category:"Shell",name:"Open wizard",onClick:()=>getCurrentEditor$j().openWizard()});const configRegex=/\s*\/\/\s*@ImportExportConfigurator\s*\n\s*\/\/\s*(\{[^\n]+\})\n/,requireRegex=/\s*(\/\/\s*@require\s+[^\n]+)\n/g,initRegex=/([^\n]+\/\/\s*@init)/g;function createMenu$6(){return[{command:"shell.execute"},{command:"shell.kill"},{command:"shell.openWizard"},{divider:!0},{command:"shell.toggleComment"},{divider:!0},{command:"shell.save"},{command:"shell.saveAs"},{command:"shell.copyNodeScript"},{divider:!0},{command:"shell.find"},{command:"shell.replace"}]}function instance$1V(o,e,t){let n,r,a,s,l=noop$1,u=()=>(l(),l=subscribe(n,z=>t(23,s=z)),n),d;o.$$.on_destroy.push(()=>l());var f=this&&this.__awaiter||function(z,Y,V,J){function Q(X){return X instanceof V?X:new V(function(ie){ie(X)})}return new(V||(V=Promise))(function(X,ie){function ce(me){try{se(J.next(me))}catch(ue){ie(ue)}}function de(me){try{se(J.throw(me))}catch(ue){ie(ue)}}function se(me){me.done?X(me.value):Q(me.value).then(ce,de)}se((J=J.apply(z,Y||[])).next())})},m;let{tabid:h}=e;const p=getContext("tabVisible");component_subscribe(o,p,z=>t(24,d=z));const g=useTimerLabel();let b;const v=createActivator("ShellTab",!1);let y=!1,C=0,E;function A(z){return z?(apiOn(`runner-done-${z}`,k),()=>{apiOff(`runner-done-${z}`,k)}):()=>{}}function k(){t(22,y=!1),g.stop()}function T(){return a.value||""}function $(){E.getEditor().execCommand("togglecomment")}function S(){E.getEditor().execCommand("find")}function I(){E.getEditor().execCommand("replace")}function R(){return y}function N(){return f(this,void 0,void 0,function*(){const z=yield apiCall("runners/get-node-script",{script:F()});copyTextToClipboard(z)})}function M(){const z=(r||"").match(configRegex);z?showModal(ImportExportModal,{initialValues:JSON.parse(z[1])}):showSnackbarError("No wizard info found")}function F(){const z=E.getEditor().getSelectedText(),Y=r;return z?[...(Y||"").matchAll(requireRegex)].map(V=>`${V[1]}
`).join("")+[...(Y||"").matchAll(initRegex)].map(V=>`${V[1]}
`).join("")+z:Y}function D(){return f(this,void 0,void 0,function*(){if(y)return;t(3,C+=1);let z=b;const Y=yield apiCall("runners/start",{script:F()});if(Y.errorMessage){showSnackbarError(Y.errorMessage);return}z=Y.runid,t(1,b=z),t(22,y=!0),g.start()})}function x(){return y}function B(){apiCall("runners/cancel",{runid:b}),g.stop()}const{editorState:K,editorValue:U,setEditorData:G}=useEditorData({tabid:h});component_subscribe(o,K,z=>t(5,a=z)),component_subscribe(o,U,z=>t(28,r=z));function W(z){binding_callbacks[z?"unshift":"push"](()=>{E=z,t(2,E)})}const q=z=>G(z.detail),H=()=>{v.activate(),invalidateCommands()};return o.$$set=z=>{"tabid"in z&&t(10,h=z.tabid)},o.$$.update=()=>{o.$$.dirty[0]&4194304&&invalidateCommands(),o.$$.dirty[0]&18874372&&d&&E&&(t(21,m=E==null?void 0:E.getEditor())===null||m===void 0||m.focus()),o.$$.dirty[0]&4195328&&changeTab(h,z=>Object.assign(Object.assign({},z),{busy:y})),o.$$.dirty[0]&2&&u(t(4,n=useEffect(()=>A(b)))),o.$$.dirty[0]&8388608},[v,b,E,C,n,a,p,K,U,G,h,T,$,S,I,R,N,M,D,x,B,m,y,s,d,W,q,H]}class ShellTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1V,create_fragment$1X,safe_not_equal,{tabid:10,activator:0,getData:11,toggleComment:12,find:13,replace:14,isBusy:15,copyNodeScript:16,openWizard:17,execute:18,canKill:19,kill:20},null,[-1,-1])}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[11]}get toggleComment(){return this.$$.ctx[12]}get find(){return this.$$.ctx[13]}get replace(){return this.$$.ctx[14]}get isBusy(){return this.$$.ctx[15]}get copyNodeScript(){return this.$$.ctx[16]}get openWizard(){return this.$$.ctx[17]}get execute(){return this.$$.ctx[18]}get canKill(){return this.$$.ctx[19]}get kill(){return this.$$.ctx[20]}}const ShellTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ShellTab},Symbol.toStringTag,{value:"Module"}));function create_default_slot_1$m(o){let e,t,n,r;return e=new FormArchiveFolderSelect({props:{label:"Folder",name:"folder",isNative:!0}}),n=new FormTextField({props:{label:"File name",name:"file"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_header_slot$9(o){let e;return{c(){e=text("Save to archive")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$8(o){let e,t;return e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[2]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$E(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$8],header:[create_header_slot$9],default:[create_default_slot_1$m]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&128&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$1W(o){let e,t;return e=new FormProvider({props:{initialValues:{file:o[0],folder:o[1]},$$slots:{default:[create_default_slot$E]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&3&&(a.initialValues={file:n[0],folder:n[1]}),r&136&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1U(o,e,t){const n=["file","folder","onSave"];let r=compute_rest_props(e,n),a;component_subscribe(o,currentArchive,m=>t(5,a=m));var s=this&&this.__awaiter||function(m,h,p,g){function b(v){return v instanceof p?v:new p(function(y){y(v)})}return new(p||(p=Promise))(function(v,y){function C(k){try{A(g.next(k))}catch(T){y(T)}}function E(k){try{A(g.throw(k))}catch(T){y(T)}}function A(k){k.done?v(k.value):b(k.value).then(C,E)}A((g=g.apply(m,h||[])).next())})};let{file:l="new-table"}=e,{folder:u=a}=e,{onSave:d}=e;const f=m=>s(void 0,void 0,void 0,function*(){const{file:h,folder:p}=m.detail;closeCurrentModal(),d&&d(p,h)});return o.$$set=m=>{e=assign(assign({},e),exclude_internal_props(m)),t(3,r=compute_rest_props(e,n)),"file"in m&&t(0,l=m.file),"folder"in m&&t(1,u=m.folder),"onSave"in m&&t(4,d=m.onSave)},[l,u,f,r,d]}class SaveArchiveModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$1U,create_fragment$1W,safe_not_equal,{file:0,folder:1,onSave:4})}}const SaveArchiveModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:SaveArchiveModal},Symbol.toStringTag,{value:"Module"}));function create_if_block$T(o){let e,t;return e=new JslDataGrid({props:{jslid:o[2]||`archive://${o[0]}/${o[1]}`,supportsReload:!0,allowChangeChangeSetStructure:!0,changeSetState:o[3],focusOnVisible:!0,changeSetStore:o[7],dispatchChangeSet:o[8],infoLoadCounter:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&7&&(a.jslid=n[2]||`archive://${n[0]}/${n[1]}`),r&8&&(a.changeSetState=n[3]),r&16&&(a.infoLoadCounter=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$D(o){let e,t,n=(o[5]||!o[2])&&create_if_block$T(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[5]||!r[2]?n?(n.p(r,a),a&36&&transition_in(n,1)):(n=create_if_block$T(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_toolstrip_slot$a(o){let e,t,n,r,a,s,l,u;return e=new ToolStripCommandButton({props:{command:"dataGrid.refresh"}}),n=new ToolStripExportButton({props:{command:"jslTableGrid.export",quickExportHandlerRef:o[6]}}),a=new ToolStripCommandButton({props:{command:"archiveFile.save"}}),l=new ToolStripCommandButton({props:{command:"archiveFile.saveAs"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p:noop$1,i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create_fragment$1V(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$a],default:[create_default_slot$D]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&2097215&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const matchingProps$6=["archiveFile","archiveFolder","jslid"],getCurrentEditor$i=()=>getActiveComponent("ArchiveFileTab");registerCommand({id:"archiveFile.save",group:"save",category:"Archive file",name:"Save",toolbar:!0,isRelatedToTab:!0,icon:"icon save",testEnabled:()=>{var o;return(o=getCurrentEditor$i())===null||o===void 0?void 0:o.canSave()},onClick:()=>getCurrentEditor$i().save()});registerCommand({id:"archiveFile.saveAs",category:"Archive file",name:"Save as",icon:"icon save",isRelatedToTab:!0,testEnabled:()=>getCurrentEditor$i()!=null,onClick:()=>getCurrentEditor$i().saveAs()});function instance$1T(o,e,t){let n;var r=this&&this.__awaiter||function(S,I,R,N){function M(F){return F instanceof R?F:new R(function(D){D(F)})}return new(R||(R=Promise))(function(F,D){function x(U){try{K(N.next(U))}catch(G){D(G)}}function B(U){try{K(N.throw(U))}catch(G){D(G)}}function K(U){U.done?F(U.value):M(U.value).then(x,B)}K((N=N.apply(S,I||[])).next())})};const a=createActivator("ArchiveFileTab",!0);let{archiveFolder:s=void 0}=e,{archiveFile:l=void 0}=e,{jslid:u=void 0}=e,{tabid:d}=e,f=0,m=!1;const h=createQuickExportHandlerRef(),{editorState:p,editorValue:g,setEditorData:b}=useEditorData({tabid:d,onInitialData:S=>{y({type:"reset",value:S}),invalidateCommands(),lib$3.changeSetContainsChanges(S)&&markTabUnsaved(d)}}),[v,y]=createUndoReducer(lib$3.createChangeSet());component_subscribe(o,v,S=>t(3,n=S));function C(){showModal(SaveArchiveModal,{folder:s,file:l,onSave:E})}const E=(S,I)=>r(void 0,void 0,void 0,function*(){yield apiCall("archive/save-jsl-data",{folder:S,file:I,jslid:u||`archive://${s}/${l}`,changeSet:lib$3.changeSetContainsChanges(n==null?void 0:n.value)?n.value:null}),changeTab(d,R=>Object.assign(Object.assign({},R),{title:I,props:{archiveFile:I,archiveFolder:S},archiveFile:I,archiveFolder:S})),lib$3.changeSetContainsChanges(n==null?void 0:n.value)&&(yield sleep(100),A())});function A(){var S;return r(this,void 0,void 0,function*(){const I=!!(!((S=n.value)===null||S===void 0)&&S.structure);y({type:"reset",value:lib$3.createChangeSet()}),I&&t(4,f+=1),yield tick(),runCommand("dataGrid.refresh")})}function k(){return r(this,void 0,void 0,function*(){u?C():(yield apiCall("archive/modify-file",{folder:s,file:l,changeSet:n.value}),yield A())})}function T(){return u||lib$3.changeSetContainsChanges(n==null?void 0:n.value)}function $(){return r(this,void 0,void 0,function*(){if(u&&!(yield apiCall("jsldata/exists",{jslid:u}))){const S=yield localforage.getItem(`tabdata_rows_${d}`);S&&(yield apiCall("jsldata/save-rows",{jslid:u,rows:S}))}t(5,m=!0)})}return onMount(()=>{$()}),o.$$set=S=>{"archiveFolder"in S&&t(0,s=S.archiveFolder),"archiveFile"in S&&t(1,l=S.archiveFile),"jslid"in S&&t(2,u=S.jslid),"tabid"in S&&t(10,d=S.tabid)},o.$$.update=()=>{o.$$.dirty&1032&&(b(n.value),lib$3.changeSetContainsChanges(n==null?void 0:n.value)?markTabUnsaved(d):markTabSaved(d))},[s,l,u,n,f,m,h,v,y,a,d,C,k,T]}class ArchiveFileTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1T,create_fragment$1V,safe_not_equal,{activator:9,archiveFolder:0,archiveFile:1,jslid:2,tabid:10,saveAs:11,save:12,canSave:13})}get activator(){return this.$$.ctx[9]}get saveAs(){return this.$$.ctx[11]}get save(){return this.$$.ctx[12]}get canSave(){return this.$$.ctx[13]}}const ArchiveFileTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ArchiveFileTab,matchingProps:matchingProps$6},Symbol.toStringTag,{value:"Module"}));var compareVersions$1={exports:{}};(function(o,e){(function(t,n){o.exports=n()})(commonjsGlobal,function(){var t=/^v?(?:\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+)(\.(?:[x*]|\d+))?(?:-[\da-z\-]+(?:\.[\da-z\-]+)*)?(?:\+[\da-z\-]+(?:\.[\da-z\-]+)*)?)?)?$/i;function n(m,h){return m.indexOf(h)===-1?m.length:m.indexOf(h)}function r(m){var h=m.replace(/^v/,"").replace(/\+.*$/,""),p=n(h,"-"),g=h.substring(0,p).split(".");return g.push(h.substring(p+1)),g}function a(m){return isNaN(Number(m))?m:Number(m)}function s(m){if(typeof m!="string")throw new TypeError("Invalid argument expected string");if(!t.test(m))throw new Error("Invalid argument not valid semver ('"+m+"' received)")}function l(m,h){[m,h].forEach(s);for(var p=r(m),g=r(h),b=0;b<Math.max(p.length-1,g.length-1);b++){var v=parseInt(p[b]||0,10),y=parseInt(g[b]||0,10);if(v>y)return 1;if(y>v)return-1}var C=p[p.length-1],E=g[g.length-1];if(C&&E){var A=C.split(".").map(a),k=E.split(".").map(a);for(b=0;b<Math.max(A.length,k.length);b++){if(A[b]===void 0||typeof k[b]=="string"&&typeof A[b]=="number")return-1;if(k[b]===void 0||typeof A[b]=="string"&&typeof k[b]=="number"||A[b]>k[b])return 1;if(k[b]>A[b])return-1}}else if(C||E)return C?-1:1;return 0}var u=[">",">=","=","<","<="],d={">":[1],">=":[0,1],"=":[0],"<=":[-1,0],"<":[-1]};function f(m){if(typeof m!="string")throw new TypeError("Invalid operator type, expected string but got "+typeof m);if(u.indexOf(m)===-1)throw new TypeError("Invalid operator, expected one of "+u.join("|"))}return l.validate=function(m){return typeof m=="string"&&t.test(m)},l.compare=function(m,h,p){f(p);var g=l(m,h);return d[p].indexOf(g)>-1},l})})(compareVersions$1);var compareVersionsExports=compareVersions$1.exports;const compareVersions=getDefaultExportFromCjs(compareVersionsExports);function get_each_context_5(o,e,t){const n=o.slice();return n[15]=e[t],n}function get_each_context_4(o,e,t){const n=o.slice();return n[15]=e[t],n}function get_each_context_1$4(o,e,t){const n=o.slice();return n[8]=e[t],n}function get_each_context_2$1(o,e,t){const n=o.slice();return n[11]=e[t],n[13]=t,n}function get_each_context_3$1(o,e,t){const n=o.slice();return n[11]=e[t],n[13]=t,n}function get_each_context$i(o,e,t){const n=o.slice();return n[5]=e[t],n}function create_if_block_1$y(o){let e,t,n,r;const a=[create_if_block_2$l,create_if_block_3$h,create_else_block_1$5],s=[];function l(u,d){return u[0]==="table"?0:u[0]==="list"?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_if_block$S(o){let e,t,n=ensure_array_like(o[1]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$i(get_each_context$i(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&10){n=ensure_array_like(s[1]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$i(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$i(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_else_block_1$5(o){let e,t,n;const r=[o[4]];var a=o[3][o[0]];function s(l){let u={$$slots:{default:[create_default_slot_11]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&16?get_spread_update(r,[get_spread_object(l[4])]):{};if(u&1048602&&(d.$$scope={dirty:u,ctx:l}),u&9&&a!==(a=l[3][l[0]])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_if_block_3$h(o){let e,t,n,r;const a=[create_if_block_4$g,create_else_block$q],s=[];function l(u,d){return u[2]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_if_block_2$l(o){let e,t,n;var r=o[3].table;function a(s){return{props:{$$slots:{default:[create_default_slot$C]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l&1048602&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3].table)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_else_block_2(o){let e=o[4].raw+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&16&&e!==(e=n[4].raw+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_5$8(o){let e,t;return e=new Parser$1({props:{tokens:o[1],renderers:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.tokens=n[1]),r&8&&(a.renderers=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_11(o){let e,t,n,r;const a=[create_if_block_5$8,create_else_block_2],s=[];function l(u,d){return u[1]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$q(o){let e,t,n;const r=[{ordered:o[2]},o[4]];var a=o[3].list;function s(l){let u={$$slots:{default:[create_default_slot_9$1]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&20?get_spread_update(r,[u&4&&{ordered:l[2]},u&16&&get_spread_object(l[4])]):{};if(u&1048600&&(d.$$scope={dirty:u,ctx:l}),u&8&&a!==(a=l[3].list)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_if_block_4$g(o){let e,t,n;const r=[{ordered:o[2]},o[4]];var a=o[3].list;function s(l){let u={$$slots:{default:[create_default_slot_7$3]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&20?get_spread_update(r,[u&4&&{ordered:l[2]},u&16&&get_spread_object(l[4])]):{};if(u&1048600&&(d.$$scope={dirty:u,ctx:l}),u&8&&a!==(a=l[3].list)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_default_slot_10(o){let e,t,n;return e=new Parser$1({props:{tokens:o[15].tokens,renderers:o[3]}}),{c(){create_component(e.$$.fragment),t=space()},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},p(r,a){const s={};a&16&&(s.tokens=r[15].tokens),a&8&&(s.renderers=r[3]),e.$set(s)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_each_block_5(o){let e,t,n;const r=[o[15]];var a=o[3].unorderedlistitem||o[3].listitem;function s(l){let u={$$slots:{default:[create_default_slot_10]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&16?get_spread_update(r,[get_spread_object(l[15])]):{};if(u&1048600&&(d.$$scope={dirty:u,ctx:l}),u&8&&a!==(a=l[3].unorderedlistitem||l[3].listitem)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_default_slot_9$1(o){let e,t,n=ensure_array_like(o[4].items),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_5(get_each_context_5(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&24){n=ensure_array_like(s[4].items);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_5(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_5(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_default_slot_8$2(o){let e,t,n;return e=new Parser$1({props:{tokens:o[15].tokens,renderers:o[3]}}),{c(){create_component(e.$$.fragment),t=space()},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},p(r,a){const s={};a&16&&(s.tokens=r[15].tokens),a&8&&(s.renderers=r[3]),e.$set(s)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_each_block_4(o){let e,t,n;const r=[o[15]];var a=o[3].orderedlistitem||o[3].listitem;function s(l){let u={$$slots:{default:[create_default_slot_8$2]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&16?get_spread_update(r,[get_spread_object(l[15])]):{};if(u&1048600&&(d.$$scope={dirty:u,ctx:l}),u&8&&a!==(a=l[3].orderedlistitem||l[3].listitem)){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_default_slot_7$3(o){let e,t,n=ensure_array_like(o[4].items),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_4(get_each_context_4(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&24){n=ensure_array_like(s[4].items);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_4(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_4(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_default_slot_6$3(o){let e,t,n;return e=new Parser$1({props:{tokens:o[11],renderers:o[3]}}),{c(){create_component(e.$$.fragment),t=space()},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},p(r,a){const s={};a&2&&(s.tokens=r[11]),a&8&&(s.renderers=r[3]),e.$set(s)},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_each_block_3$1(o){let e,t,n;var r=o[3].tablecell;function a(s){return{props:{header:!0,align:s[4].align[s[13]]||"center",$$slots:{default:[create_default_slot_6$3]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l&16&&(u.align=s[4].align[s[13]]||"center"),l&1048586&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3].tablecell)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_default_slot_5$7(o){let e,t,n=ensure_array_like(o[1].header),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_3$1(get_each_context_3$1(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&26){n=ensure_array_like(s[1].header);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_3$1(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_3$1(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_default_slot_4$7(o){let e,t,n;var r=o[3].tablerow;function a(s){return{props:{$$slots:{default:[create_default_slot_5$7]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l&1048602&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3].tablerow)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_default_slot_3$b(o){let e,t;return e=new Parser$1({props:{tokens:o[11],renderers:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.tokens=n[11]),r&8&&(a.renderers=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_2$1(o){let e,t,n;var r=o[3].tablecell;function a(s){return{props:{header:!1,align:s[4].align[s[13]]||"center",$$slots:{default:[create_default_slot_3$b]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l&16&&(u.align=s[4].align[s[13]]||"center"),l&1048586&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3].tablecell)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_default_slot_2$d(o){let e,t,n=ensure_array_like(o[8]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_2$1(get_each_context_2$1(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=space()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&26){n=ensure_array_like(s[8]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_2$1(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_2$1(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_each_block_1$4(o){let e,t,n;var r=o[3].tablerow;function a(s){return{props:{$$slots:{default:[create_default_slot_2$d]},$$scope:{ctx:s}}}}return r&&(e=construct_svelte_component(r,a(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(s,l){e&&mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u={};if(l&1048602&&(u.$$scope={dirty:l,ctx:s}),l&8&&r!==(r=s[3].tablerow)){if(e){group_outros();const d=e;transition_out(d.$$.fragment,1,0,()=>{destroy_component(d,1)}),check_outros()}r?(e=construct_svelte_component(r,a(s)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else r&&e.$set(u)},i(s){n||(e&&transition_in(e.$$.fragment,s),n=!0)},o(s){e&&transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),e&&destroy_component(e,s)}}}function create_default_slot_1$l(o){let e,t,n=ensure_array_like(o[1].cells),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_1$4(get_each_context_1$4(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&26){n=ensure_array_like(s[1].cells);let u;for(u=0;u<n.length;u+=1){const d=get_each_context_1$4(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_1$4(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_default_slot$C(o){let e,t,n,r,a;var s=o[3].tablehead;function l(f){return{props:{$$slots:{default:[create_default_slot_4$7]},$$scope:{ctx:f}}}}s&&(e=construct_svelte_component(s,l(o)));var u=o[3].tablebody;function d(f){return{props:{$$slots:{default:[create_default_slot_1$l]},$$scope:{ctx:f}}}}return u&&(n=construct_svelte_component(u,d(o))),{c(){e&&create_component(e.$$.fragment),t=space(),n&&create_component(n.$$.fragment),r=empty()},m(f,m){e&&mount_component(e,f,m),insert(f,t,m),n&&mount_component(n,f,m),insert(f,r,m),a=!0},p(f,m){const h={};if(m&1048602&&(h.$$scope={dirty:m,ctx:f}),m&8&&s!==(s=f[3].tablehead)){if(e){group_outros();const g=e;transition_out(g.$$.fragment,1,0,()=>{destroy_component(g,1)}),check_outros()}s?(e=construct_svelte_component(s,l(f)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else s&&e.$set(h);const p={};if(m&1048602&&(p.$$scope={dirty:m,ctx:f}),m&8&&u!==(u=f[3].tablebody)){if(n){group_outros();const g=n;transition_out(g.$$.fragment,1,0,()=>{destroy_component(g,1)}),check_outros()}u?(n=construct_svelte_component(u,d(f)),create_component(n.$$.fragment),transition_in(n.$$.fragment,1),mount_component(n,r.parentNode,r)):n=null}else u&&n.$set(p)},i(f){a||(e&&transition_in(e.$$.fragment,f),n&&transition_in(n.$$.fragment,f),a=!0)},o(f){e&&transition_out(e.$$.fragment,f),n&&transition_out(n.$$.fragment,f),a=!1},d(f){f&&(detach(t),detach(r)),e&&destroy_component(e,f),n&&destroy_component(n,f)}}}function create_each_block$i(o){let e,t;const n=[o[5],{renderers:o[3]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new Parser$1({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&10?get_spread_update(n,[s&2&&get_spread_object(a[5]),s&8&&{renderers:a[3]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$1U(o){let e,t,n,r;const a=[create_if_block$S,create_if_block_1$y],s=[];function l(u,d){return u[0]?u[3][u[0]]?1:-1:0}return~(e=l(o))&&(t=s[e]=a[e](o)),{c(){t&&t.c(),n=empty()},m(u,d){~e&&s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?~e&&s[e].p(u,d):(t&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros()),~e?(t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null)},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),~e&&s[e].d(u)}}}function instance$1S(o,e,t){const n=["type","tokens","ordered","renderers"];let r=compute_rest_props(e,n),{type:a=void 0}=e,{tokens:s=void 0}=e,{ordered:l=!1}=e,{renderers:u}=e;return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(4,r=compute_rest_props(e,n)),"type"in d&&t(0,a=d.type),"tokens"in d&&t(1,s=d.tokens),"ordered"in d&&t(2,l=d.ordered),"renderers"in d&&t(3,u=d.renderers)},[a,s,l,u,r]}let Parser$1=class extends SvelteComponent{constructor(e){super(),init(this,e,instance$1S,create_fragment$1U,safe_not_equal,{type:0,tokens:1,ordered:2,renderers:3})}};var defaults$5={exports:{}};function getDefaults$1(){return{baseUrl:null,breaks:!1,extensions:null,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,walkTokens:null,xhtml:!1}}function changeDefaults$1(o){defaults$5.exports.defaults=o}defaults$5.exports={defaults:getDefaults$1(),getDefaults:getDefaults$1,changeDefaults:changeDefaults$1};const escapeTest=/[&<>"']/,escapeReplace=/[&<>"']/g,escapeTestNoEncode=/[<>"']|&(?!#?\w+;)/,escapeReplaceNoEncode=/[<>"']|&(?!#?\w+;)/g,escapeReplacements={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},getEscapeReplacement=o=>escapeReplacements[o];function escape$3(o,e){if(e){if(escapeTest.test(o))return o.replace(escapeReplace,getEscapeReplacement)}else if(escapeTestNoEncode.test(o))return o.replace(escapeReplaceNoEncode,getEscapeReplacement);return o}const unescapeTest=/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig;function unescape$1(o){return o.replace(unescapeTest,(e,t)=>(t=t.toLowerCase(),t==="colon"?":":t.charAt(0)==="#"?t.charAt(1)==="x"?String.fromCharCode(parseInt(t.substring(2),16)):String.fromCharCode(+t.substring(1)):""))}const caret=/(^|[^\[])\^/g;function edit$1(o,e){o=o.source||o,e=e||"";const t={replace:(n,r)=>(r=r.source||r,r=r.replace(caret,"$1"),o=o.replace(n,r),t),getRegex:()=>new RegExp(o,e)};return t}const nonWordAndColonTest=/[^\w:]/g,originIndependentUrl=/^$|^[a-z][a-z0-9+.-]*:|^[?#]/i;function cleanUrl$1(o,e,t){if(o){let n;try{n=decodeURIComponent(unescape$1(t)).replace(nonWordAndColonTest,"").toLowerCase()}catch{return null}if(n.indexOf("javascript:")===0||n.indexOf("vbscript:")===0||n.indexOf("data:")===0)return null}e&&!originIndependentUrl.test(t)&&(t=resolveUrl(e,t));try{t=encodeURI(t).replace(/%25/g,"%")}catch{return null}return t}const baseUrls={},justDomain=/^[^:]+:\/*[^/]*$/,protocol=/^([^:]+:)[\s\S]*$/,domain=/^([^:]+:\/*[^/]*)[\s\S]*$/;function resolveUrl(o,e){baseUrls[" "+o]||(justDomain.test(o)?baseUrls[" "+o]=o+"/":baseUrls[" "+o]=rtrim$1(o,"/",!0)),o=baseUrls[" "+o];const t=o.indexOf(":")===-1;return e.substring(0,2)==="//"?t?e:o.replace(protocol,"$1")+e:e.charAt(0)==="/"?t?e:o.replace(domain,"$1")+e:o+e}const noopTest$1={exec:function o(){}};function merge$2(o){let e=1,t,n;for(;e<arguments.length;e++){t=arguments[e];for(n in t)Object.prototype.hasOwnProperty.call(t,n)&&(o[n]=t[n])}return o}function splitCells$1(o,e){const t=o.replace(/\|/g,(a,s,l)=>{let u=!1,d=s;for(;--d>=0&&l[d]==="\\";)u=!u;return u?"|":" |"}),n=t.split(/ \|/);let r=0;if(n.length>e)n.splice(e);else for(;n.length<e;)n.push("");for(;r<n.length;r++)n[r]=n[r].trim().replace(/\\\|/g,"|");return n}function rtrim$1(o,e,t){const n=o.length;if(n===0)return"";let r=0;for(;r<n;){const a=o.charAt(n-r-1);if(a===e&&!t)r++;else if(a!==e&&t)r++;else break}return o.substr(0,n-r)}function findClosingBracket$1(o,e){if(o.indexOf(e[1])===-1)return-1;const t=o.length;let n=0,r=0;for(;r<t;r++)if(o[r]==="\\")r++;else if(o[r]===e[0])n++;else if(o[r]===e[1]&&(n--,n<0))return r;return-1}function checkSanitizeDeprecation$1(o){o&&o.sanitize&&!o.silent&&console.warn("marked(): sanitize and sanitizer parameters are deprecated since version 0.7.0, should not be used and will be removed in the future. Read more here: https://marked.js.org/#/USING_ADVANCED.md#options")}function repeatString$1(o,e){if(e<1)return"";let t="";for(;e>1;)e&1&&(t+=o),e>>=1,o+=o;return t+o}var helpers={escape:escape$3,unescape:unescape$1,edit:edit$1,cleanUrl:cleanUrl$1,resolveUrl,noopTest:noopTest$1,merge:merge$2,splitCells:splitCells$1,rtrim:rtrim$1,findClosingBracket:findClosingBracket$1,checkSanitizeDeprecation:checkSanitizeDeprecation$1,repeatString:repeatString$1};const{defaults:defaults$4}=defaults$5.exports,{rtrim,splitCells,escape:escape$2,findClosingBracket}=helpers;function outputLink(o,e,t){const n=e.href,r=e.title?escape$2(e.title):null,a=o[1].replace(/\\([\[\]])/g,"$1");return o[0].charAt(0)!=="!"?{type:"link",raw:t,href:n,title:r,text:a}:{type:"image",raw:t,href:n,title:r,text:escape$2(a)}}function indentCodeCompensation(o,e){const t=o.match(/^(\s+)(?:```)/);if(t===null)return e;const n=t[1];return e.split(`
`).map(r=>{const a=r.match(/^\s+/);if(a===null)return r;const[s]=a;return s.length>=n.length?r.slice(n.length):r}).join(`
`)}var Tokenizer_1=class{constructor(e){this.options=e||defaults$4}space(e){const t=this.rules.block.newline.exec(e);if(t)return t[0].length>1?{type:"space",raw:t[0]}:{raw:`
`}}code(e){const t=this.rules.block.code.exec(e);if(t){const n=t[0].replace(/^ {1,4}/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?n:rtrim(n,`
`)}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const n=t[0],r=indentCodeCompensation(n,t[3]||"");return{type:"code",raw:n,lang:t[2]?t[2].trim():t[2],text:r}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let n=t[2].trim();if(/#$/.test(n)){const r=rtrim(n,"#");(this.options.pedantic||!r||/ $/.test(r))&&(n=r.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:n}}}nptable(e){const t=this.rules.block.nptable.exec(e);if(t){const n={type:"table",header:splitCells(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split(`
`):[],raw:t[0]};if(n.header.length===n.align.length){let r=n.align.length,a;for(a=0;a<r;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(r=n.cells.length,a=0;a<r;a++)n.cells[a]=splitCells(n.cells[a],n.header.length);return n}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:t[0]}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){const n=t[0].replace(/^ *> ?/gm,"");return{type:"blockquote",raw:t[0],text:n}}}list(e){const t=this.rules.block.list.exec(e);if(t){let n=t[0];const r=t[2],a=r.length>1,s={type:"list",raw:n,ordered:a,start:a?+r.slice(0,-1):"",loose:!1,items:[]},l=t[0].match(this.rules.block.item);let u=!1,d,f,m,h,p,g,b,v,y,C=l.length;m=this.rules.block.listItemStart.exec(l[0]);for(let E=0;E<C;E++){if(d=l[E],n=d,this.options.pedantic||(y=d.match(new RegExp("\\n\\s*\\n {0,"+(m[0].length-1)+"}\\S")),y&&(p=d.length-y.index+l.slice(E+1).join(`
`).length,s.raw=s.raw.substring(0,s.raw.length-p),d=d.substring(0,y.index),n=d,C=E+1)),E!==C-1){if(h=this.rules.block.listItemStart.exec(l[E+1]),this.options.pedantic?h[1].length>m[1].length:h[1].length>=m[0].length||h[1].length>3){l.splice(E,2,l[E]+(!this.options.pedantic&&h[1].length<m[0].length&&!l[E].match(/\n$/)?"":`
`)+l[E+1]),E--,C--;continue}else(!this.options.pedantic||this.options.smartLists?h[2][h[2].length-1]!==r[r.length-1]:a===(h[2].length===1))&&(p=l.slice(E+1).join(`
`).length,s.raw=s.raw.substring(0,s.raw.length-p),E=C-1);m=h}f=d.length,d=d.replace(/^ *([*+-]|\d+[.)]) ?/,""),~d.indexOf(`
 `)&&(f-=d.length,d=this.options.pedantic?d.replace(/^ {1,4}/gm,""):d.replace(new RegExp("^ {1,"+f+"}","gm"),"")),d=rtrim(d,`
`),E!==C-1&&(n=n+`
`),g=u||/\n\n(?!\s*$)/.test(n),E!==C-1&&(u=n.slice(-2)===`

`,g||(g=u)),g&&(s.loose=!0),this.options.gfm&&(b=/^\[[ xX]\] /.test(d),v=void 0,b&&(v=d[1]!==" ",d=d.replace(/^\[[ xX]\] +/,""))),s.items.push({type:"list_item",raw:n,task:b,checked:v,loose:g,text:d})}return s}}html(e){const t=this.rules.block.html.exec(e);if(t)return{type:this.options.sanitize?"paragraph":"html",raw:t[0],pre:!this.options.sanitizer&&(t[1]==="pre"||t[1]==="script"||t[1]==="style"),text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(t[0]):escape$2(t[0]):t[0]}}def(e){const t=this.rules.block.def.exec(e);if(t)return t[3]&&(t[3]=t[3].substring(1,t[3].length-1)),{type:"def",tag:t[1].toLowerCase().replace(/\s+/g," "),raw:t[0],href:t[2],title:t[3]}}table(e){const t=this.rules.block.table.exec(e);if(t){const n={type:"table",header:splitCells(t[1].replace(/^ *| *\| *$/g,"")),align:t[2].replace(/^ *|\| *$/g,"").split(/ *\| */),cells:t[3]?t[3].replace(/\n$/,"").split(`
`):[]};if(n.header.length===n.align.length){n.raw=t[0];let r=n.align.length,a;for(a=0;a<r;a++)/^ *-+: *$/.test(n.align[a])?n.align[a]="right":/^ *:-+: *$/.test(n.align[a])?n.align[a]="center":/^ *:-+ *$/.test(n.align[a])?n.align[a]="left":n.align[a]=null;for(r=n.cells.length,a=0;a<r;a++)n.cells[a]=splitCells(n.cells[a].replace(/^ *\| *| *\| *$/g,""),n.header.length);return n}}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:t[2].charAt(0)==="="?1:2,text:t[1]}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t)return{type:"paragraph",raw:t[0],text:t[1].charAt(t[1].length-1)===`
`?t[1].slice(0,-1):t[1]}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0]}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:escape$2(t[1])}}tag(e,t,n){const r=this.rules.inline.tag.exec(e);if(r)return!t&&/^<a /i.test(r[0])?t=!0:t&&/^<\/a>/i.test(r[0])&&(t=!1),!n&&/^<(pre|code|kbd|script)(\s|>)/i.test(r[0])?n=!0:n&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(r[0])&&(n=!1),{type:this.options.sanitize?"text":"html",raw:r[0],inLink:t,inRawBlock:n,text:this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$2(r[0]):r[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const n=t[2].trim();if(!this.options.pedantic&&/^</.test(n)){if(!/>$/.test(n))return;const s=rtrim(n.slice(0,-1),"\\");if((n.length-s.length)%2===0)return}else{const s=findClosingBracket(t[2],"()");if(s>-1){const u=(t[0].indexOf("!")===0?5:4)+t[1].length+s;t[2]=t[2].substring(0,s),t[0]=t[0].substring(0,u).trim(),t[3]=""}}let r=t[2],a="";if(this.options.pedantic){const s=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(r);s&&(r=s[1],a=s[3])}else a=t[3]?t[3].slice(1,-1):"";return r=r.trim(),/^</.test(r)&&(this.options.pedantic&&!/>$/.test(n)?r=r.slice(1):r=r.slice(1,-1)),outputLink(t,{href:r&&r.replace(this.rules.inline._escapes,"$1"),title:a&&a.replace(this.rules.inline._escapes,"$1")},t[0])}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){let r=(n[2]||n[1]).replace(/\s+/g," ");if(r=t[r.toLowerCase()],!r||!r.href){const a=n[0].charAt(0);return{type:"text",raw:a,text:a}}return outputLink(n,r,n[0])}}emStrong(e,t,n=""){let r=this.rules.inline.emStrong.lDelim.exec(e);if(!r||r[3]&&n.match(/[\p{L}\p{N}]/u))return;const a=r[1]||r[2]||"";if(!a||a&&(n===""||this.rules.inline.punctuation.exec(n))){const s=r[0].length-1;let l,u,d=s,f=0;const m=r[0][0]==="*"?this.rules.inline.emStrong.rDelimAst:this.rules.inline.emStrong.rDelimUnd;for(m.lastIndex=0,t=t.slice(-1*e.length+s);(r=m.exec(t))!=null;)if(l=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!!l){if(u=l.length,r[3]||r[4]){d+=u;continue}else if((r[5]||r[6])&&s%3&&!((s+u)%3)){f+=u;continue}if(d-=u,!(d>0))return u=Math.min(u,u+d+f),Math.min(s,u)%2?{type:"em",raw:e.slice(0,s+r.index+u+1),text:e.slice(1,s+r.index+u)}:{type:"strong",raw:e.slice(0,s+r.index+u+1),text:e.slice(2,s+r.index+u-1)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let n=t[2].replace(/\n/g," ");const r=/[^ ]/.test(n),a=/^ /.test(n)&&/ $/.test(n);return r&&a&&(n=n.substring(1,n.length-1)),n=escape$2(n,!0),{type:"codespan",raw:t[0],text:n}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2]}}autolink(e,t){const n=this.rules.inline.autolink.exec(e);if(n){let r,a;return n[2]==="@"?(r=escape$2(this.options.mangle?t(n[1]):n[1]),a="mailto:"+r):(r=escape$2(n[1]),a=r),{type:"link",raw:n[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}url(e,t){let n;if(n=this.rules.inline.url.exec(e)){let r,a;if(n[2]==="@")r=escape$2(this.options.mangle?t(n[0]):n[0]),a="mailto:"+r;else{let s;do s=n[0],n[0]=this.rules.inline._backpedal.exec(n[0])[0];while(s!==n[0]);r=escape$2(n[0]),n[1]==="www."?a="http://"+r:a=r}return{type:"link",raw:n[0],text:r,href:a,tokens:[{type:"text",raw:r,text:r}]}}}inlineText(e,t,n){const r=this.rules.inline.text.exec(e);if(r){let a;return t?a=this.options.sanitize?this.options.sanitizer?this.options.sanitizer(r[0]):escape$2(r[0]):r[0]:a=escape$2(this.options.smartypants?n(r[0]):r[0]),{type:"text",raw:r[0],text:a}}}};const{noopTest,edit,merge:merge$1}=helpers,block$1={newline:/^(?: *(?:\n|$))+/,code:/^( {4}[^\n]+(?:\n(?: *(?:\n|$))*)?)+/,fences:/^ {0,3}(`{3,}(?=[^`\n]*\n)|~{3,})([^\n]*)\n(?:|([\s\S]*?)\n)(?: {0,3}\1[~`]* *(?:\n+|$)|$)/,hr:/^ {0,3}((?:- *){3,}|(?:_ *){3,}|(?:\* *){3,})(?:\n+|$)/,heading:/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,blockquote:/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/,list:/^( {0,3})(bull) [\s\S]+?(?:hr|def|\n{2,}(?! )(?! {0,3}bull )\n*|\s*$)/,html:"^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n *)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n *)+\\n|$))",def:/^ {0,3}\[(label)\]: *\n? *<?([^\s>]+)>?(?:(?: +\n? *| *\n *)(title))? *(?:\n+|$)/,nptable:noopTest,table:noopTest,lheading:/^([^\n]+)\n {0,3}(=+|-+) *(?:\n+|$)/,_paragraph:/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html| +\n)[^\n]+)*)/,text:/^[^\n]+/};block$1._label=/(?!\s*\])(?:\\[\[\]]|[^\[\]])+/;block$1._title=/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/;block$1.def=edit(block$1.def).replace("label",block$1._label).replace("title",block$1._title).getRegex();block$1.bullet=/(?:[*+-]|\d{1,9}[.)])/;block$1.item=/^( *)(bull) ?[^\n]*(?:\n(?! *bull ?)[^\n]*)*/;block$1.item=edit(block$1.item,"gm").replace(/bull/g,block$1.bullet).getRegex();block$1.listItemStart=edit(/^( *)(bull) */).replace("bull",block$1.bullet).getRegex();block$1.list=edit(block$1.list).replace(/bull/g,block$1.bullet).replace("hr","\\n+(?=\\1?(?:(?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$))").replace("def","\\n+(?="+block$1.def.source+")").getRegex();block$1._tag="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul";block$1._comment=/<!--(?!-?>)[\s\S]*?(?:-->|$)/;block$1.html=edit(block$1.html,"i").replace("comment",block$1._comment).replace("tag",block$1._tag).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex();block$1.paragraph=edit(block$1._paragraph).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("|lheading","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block$1._tag).getRegex();block$1.blockquote=edit(block$1.blockquote).replace("paragraph",block$1.paragraph).getRegex();block$1.normal=merge$1({},block$1);block$1.gfm=merge$1({},block$1.normal,{nptable:"^ *([^|\\n ].*\\|.*)\\n {0,3}([-:]+ *\\|[-| :]*)(?:\\n((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)",table:"^ *\\|(.+)\\n {0,3}\\|?( *[-:]+[-| :]*)(?:\\n *((?:(?!\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)"});block$1.gfm.nptable=edit(block$1.gfm.nptable).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block$1._tag).getRegex();block$1.gfm.table=edit(block$1.gfm.table).replace("hr",block$1.hr).replace("heading"," {0,3}#{1,6} ").replace("blockquote"," {0,3}>").replace("code"," {4}[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",block$1._tag).getRegex();block$1.pedantic=merge$1({},block$1.normal,{html:edit(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",block$1._comment).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:noopTest,paragraph:edit(block$1.normal._paragraph).replace("hr",block$1.hr).replace("heading",` *#{1,6} *[^
]`).replace("lheading",block$1.lheading).replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").getRegex()});const inline$1={escape:/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,autolink:/^<(scheme:[^\s\x00-\x1f<>]*|email)>/,url:noopTest,tag:"^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>",link:/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/,reflink:/^!?\[(label)\]\[(?!\s*\])((?:\\[\[\]]?|[^\[\]\\])+)\]/,nolink:/^!?\[(?!\s*\])((?:\[[^\[\]]*\]|\\[\[\]]|[^\[\]])*)\](?:\[\])?/,reflinkSearch:"reflink|nolink(?!\\()",emStrong:{lDelim:/^(?:\*+(?:([punct_])|[^\s*]))|^_+(?:([punct*])|([^\s_]))/,rDelimAst:/\_\_[^_*]*?\*[^_*]*?\_\_|[punct_](\*+)(?=[\s]|$)|[^punct*_\s](\*+)(?=[punct_\s]|$)|[punct_\s](\*+)(?=[^punct*_\s])|[\s](\*+)(?=[punct_])|[punct_](\*+)(?=[punct_])|[^punct*_\s](\*+)(?=[^punct*_\s])/,rDelimUnd:/\*\*[^_*]*?\_[^_*]*?\*\*|[punct*](\_+)(?=[\s]|$)|[^punct*_\s](\_+)(?=[punct*\s]|$)|[punct*\s](\_+)(?=[^punct*_\s])|[\s](\_+)(?=[punct*])|[punct*](\_+)(?=[punct*])/},code:/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,br:/^( {2,}|\\)\n(?!\s*$)/,del:noopTest,text:/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,punctuation:/^([\spunctuation])/};inline$1._punctuation="!\"#$%&'()+\\-.,/:;<=>?@\\[\\]`^{|}~";inline$1.punctuation=edit(inline$1.punctuation).replace(/punctuation/g,inline$1._punctuation).getRegex();inline$1.blockSkip=/\[[^\]]*?\]\([^\)]*?\)|`[^`]*?`|<[^>]*?>/g;inline$1.escapedEmSt=/\\\*|\\_/g;inline$1._comment=edit(block$1._comment).replace("(?:-->|$)","-->").getRegex();inline$1.emStrong.lDelim=edit(inline$1.emStrong.lDelim).replace(/punct/g,inline$1._punctuation).getRegex();inline$1.emStrong.rDelimAst=edit(inline$1.emStrong.rDelimAst,"g").replace(/punct/g,inline$1._punctuation).getRegex();inline$1.emStrong.rDelimUnd=edit(inline$1.emStrong.rDelimUnd,"g").replace(/punct/g,inline$1._punctuation).getRegex();inline$1._escapes=/\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/g;inline$1._scheme=/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/;inline$1._email=/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/;inline$1.autolink=edit(inline$1.autolink).replace("scheme",inline$1._scheme).replace("email",inline$1._email).getRegex();inline$1._attribute=/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/;inline$1.tag=edit(inline$1.tag).replace("comment",inline$1._comment).replace("attribute",inline$1._attribute).getRegex();inline$1._label=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/;inline$1._href=/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/;inline$1._title=/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/;inline$1.link=edit(inline$1.link).replace("label",inline$1._label).replace("href",inline$1._href).replace("title",inline$1._title).getRegex();inline$1.reflink=edit(inline$1.reflink).replace("label",inline$1._label).getRegex();inline$1.reflinkSearch=edit(inline$1.reflinkSearch,"g").replace("reflink",inline$1.reflink).replace("nolink",inline$1.nolink).getRegex();inline$1.normal=merge$1({},inline$1);inline$1.pedantic=merge$1({},inline$1.normal,{strong:{start:/^__|\*\*/,middle:/^__(?=\S)([\s\S]*?\S)__(?!_)|^\*\*(?=\S)([\s\S]*?\S)\*\*(?!\*)/,endAst:/\*\*(?!\*)/g,endUnd:/__(?!_)/g},em:{start:/^_|\*/,middle:/^()\*(?=\S)([\s\S]*?\S)\*(?!\*)|^_(?=\S)([\s\S]*?\S)_(?!_)/,endAst:/\*(?!\*)/g,endUnd:/_(?!_)/g},link:edit(/^!?\[(label)\]\((.*?)\)/).replace("label",inline$1._label).getRegex(),reflink:edit(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",inline$1._label).getRegex()});inline$1.gfm=merge$1({},inline$1.normal,{escape:edit(inline$1.escape).replace("])","~|])").getRegex(),_extended_email:/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/,url:/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,_backpedal:/(?:[^?!.,:;*_~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])([\s\S]*?[^\s~])\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/});inline$1.gfm.url=edit(inline$1.gfm.url,"i").replace("email",inline$1.gfm._extended_email).getRegex();inline$1.breaks=merge$1({},inline$1.gfm,{br:edit(inline$1.br).replace("{2,}","*").getRegex(),text:edit(inline$1.gfm.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()});var rules={block:block$1,inline:inline$1};const Tokenizer$1=Tokenizer_1,{defaults:defaults$3}=defaults$5.exports,{block,inline}=rules,{repeatString}=helpers;function smartypants(o){return o.replace(/---/g,"").replace(/--/g,"").replace(/(^|[-\u2014/(\[{"\s])'/g,"$1").replace(/'/g,"").replace(/(^|[-\u2014/(\[{\u2018\s])"/g,"$1").replace(/"/g,"").replace(/\.{3}/g,"")}function mangle(o){let e="",t,n;const r=o.length;for(t=0;t<r;t++)n=o.charCodeAt(t),Math.random()>.5&&(n="x"+n.toString(16)),e+="&#"+n+";";return e}var Lexer_1=class Wo{constructor(e){this.tokens=[],this.tokens.links=Object.create(null),this.options=e||defaults$3,this.options.tokenizer=this.options.tokenizer||new Tokenizer$1,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options;const t={block:block.normal,inline:inline.normal};this.options.pedantic?(t.block=block.pedantic,t.inline=inline.pedantic):this.options.gfm&&(t.block=block.gfm,this.options.breaks?t.inline=inline.breaks:t.inline=inline.gfm),this.tokenizer.rules=t}static get rules(){return{block,inline}}static lex(e,t){return new Wo(t).lex(e)}static lexInline(e,t){return new Wo(t).inlineTokens(e)}lex(e){return e=e.replace(/\r\n|\r/g,`
`).replace(/\t/g,"    "),this.blockTokens(e,this.tokens,!0),this.inline(this.tokens),this.tokens}blockTokens(e,t=[],n=!0){this.options.pedantic&&(e=e.replace(/^ +$/gm,""));let r,a,s,l,u,d;for(;e;)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some(f=>(r=f.call(this,e,t))?(e=e.substring(r.raw.length),t.push(r),!0):!1))){if(r=this.tokenizer.space(e)){e=e.substring(r.raw.length),r.type&&t.push(r);continue}if(r=this.tokenizer.code(e)){e=e.substring(r.raw.length),l=t[t.length-1],l&&l.type==="paragraph"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text):t.push(r);continue}if(r=this.tokenizer.fences(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.heading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.nptable(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.hr(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.blockquote(e)){e=e.substring(r.raw.length),r.tokens=this.blockTokens(r.text,[],n),t.push(r);continue}if(r=this.tokenizer.list(e)){for(e=e.substring(r.raw.length),s=r.items.length,a=0;a<s;a++)r.items[a].tokens=this.blockTokens(r.items[a].text,[],!1);t.push(r);continue}if(r=this.tokenizer.html(e)){e=e.substring(r.raw.length),t.push(r);continue}if(n&&(r=this.tokenizer.def(e))){e=e.substring(r.raw.length),this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title});continue}if(r=this.tokenizer.table(e)){e=e.substring(r.raw.length),t.push(r);continue}if(r=this.tokenizer.lheading(e)){e=e.substring(r.raw.length),t.push(r);continue}if(u=e,this.options.extensions&&this.options.extensions.startBlock){let f=1/0;const m=e.slice(1);let h;this.options.extensions.startBlock.forEach(function(p){h=p.call(this,m),typeof h=="number"&&h>=0&&(f=Math.min(f,h))}),f<1/0&&f>=0&&(u=e.substring(0,f+1))}if(n&&(r=this.tokenizer.paragraph(u))){l=t[t.length-1],d&&l.type==="paragraph"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text):t.push(r),d=u.length!==e.length,e=e.substring(r.raw.length);continue}if(r=this.tokenizer.text(e)){e=e.substring(r.raw.length),l=t[t.length-1],l&&l.type==="text"?(l.raw+=`
`+r.raw,l.text+=`
`+r.text):t.push(r);continue}if(e){const f="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(f);break}else throw new Error(f)}}return t}inline(e){let t,n,r,a,s,l;const u=e.length;for(t=0;t<u;t++)switch(l=e[t],l.type){case"paragraph":case"text":case"heading":{l.tokens=[],this.inlineTokens(l.text,l.tokens);break}case"table":{for(l.tokens={header:[],cells:[]},a=l.header.length,n=0;n<a;n++)l.tokens.header[n]=[],this.inlineTokens(l.header[n],l.tokens.header[n]);for(a=l.cells.length,n=0;n<a;n++)for(s=l.cells[n],l.tokens.cells[n]=[],r=0;r<s.length;r++)l.tokens.cells[n][r]=[],this.inlineTokens(s[r],l.tokens.cells[n][r]);break}case"blockquote":{this.inline(l.tokens);break}case"list":{for(a=l.items.length,n=0;n<a;n++)this.inline(l.items[n].tokens);break}}return e}inlineTokens(e,t=[],n=!1,r=!1){let a,s,l,u=e,d,f,m;if(this.tokens.links){const h=Object.keys(this.tokens.links);if(h.length>0)for(;(d=this.tokenizer.rules.inline.reflinkSearch.exec(u))!=null;)h.includes(d[0].slice(d[0].lastIndexOf("[")+1,-1))&&(u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(d=this.tokenizer.rules.inline.blockSkip.exec(u))!=null;)u=u.slice(0,d.index)+"["+repeatString("a",d[0].length-2)+"]"+u.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);for(;(d=this.tokenizer.rules.inline.escapedEmSt.exec(u))!=null;)u=u.slice(0,d.index)+"++"+u.slice(this.tokenizer.rules.inline.escapedEmSt.lastIndex);for(;e;)if(f||(m=""),f=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some(h=>(a=h.call(this,e,t))?(e=e.substring(a.raw.length),t.push(a),!0):!1))){if(a=this.tokenizer.escape(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.tag(e,n,r)){e=e.substring(a.raw.length),n=a.inLink,r=a.inRawBlock,s=t[t.length-1],s&&a.type==="text"&&s.type==="text"?(s.raw+=a.raw,s.text+=a.text):t.push(a);continue}if(a=this.tokenizer.link(e)){e=e.substring(a.raw.length),a.type==="link"&&(a.tokens=this.inlineTokens(a.text,[],!0,r)),t.push(a);continue}if(a=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(a.raw.length),s=t[t.length-1],a.type==="link"?(a.tokens=this.inlineTokens(a.text,[],!0,r),t.push(a)):s&&a.type==="text"&&s.type==="text"?(s.raw+=a.raw,s.text+=a.text):t.push(a);continue}if(a=this.tokenizer.emStrong(e,u,m)){e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],n,r),t.push(a);continue}if(a=this.tokenizer.codespan(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.br(e)){e=e.substring(a.raw.length),t.push(a);continue}if(a=this.tokenizer.del(e)){e=e.substring(a.raw.length),a.tokens=this.inlineTokens(a.text,[],n,r),t.push(a);continue}if(a=this.tokenizer.autolink(e,mangle)){e=e.substring(a.raw.length),t.push(a);continue}if(!n&&(a=this.tokenizer.url(e,mangle))){e=e.substring(a.raw.length),t.push(a);continue}if(l=e,this.options.extensions&&this.options.extensions.startInline){let h=1/0;const p=e.slice(1);let g;this.options.extensions.startInline.forEach(function(b){g=b.call(this,p),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(l=e.substring(0,h+1))}if(a=this.tokenizer.inlineText(l,r,smartypants)){e=e.substring(a.raw.length),a.raw.slice(-1)!=="_"&&(m=a.raw.slice(-1)),f=!0,s=t[t.length-1],s&&s.type==="text"?(s.raw+=a.raw,s.text+=a.text):t.push(a);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return t}};const{defaults:defaults$2}=defaults$5.exports,{cleanUrl,escape:escape$1}=helpers;var Renderer_1=class{constructor(e){this.options=e||defaults$2}code(e,t,n){const r=(t||"").match(/\S*/)[0];if(this.options.highlight){const a=this.options.highlight(e,r);a!=null&&a!==e&&(n=!0,e=a)}return e=e.replace(/\n$/,"")+`
`,r?'<pre><code class="'+this.options.langPrefix+escape$1(r,!0)+'">'+(n?e:escape$1(e,!0))+`</code></pre>
`:"<pre><code>"+(n?e:escape$1(e,!0))+`</code></pre>
`}blockquote(e){return`<blockquote>
`+e+`</blockquote>
`}html(e){return e}heading(e,t,n,r){return this.options.headerIds?"<h"+t+' id="'+this.options.headerPrefix+r.slug(n)+'">'+e+"</h"+t+`>
`:"<h"+t+">"+e+"</h"+t+`>
`}hr(){return this.options.xhtml?`<hr/>
`:`<hr>
`}list(e,t,n){const r=t?"ol":"ul",a=t&&n!==1?' start="'+n+'"':"";return"<"+r+a+`>
`+e+"</"+r+`>
`}listitem(e){return"<li>"+e+`</li>
`}checkbox(e){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox"'+(this.options.xhtml?" /":"")+"> "}paragraph(e){return"<p>"+e+`</p>
`}table(e,t){return t&&(t="<tbody>"+t+"</tbody>"),`<table>
<thead>
`+e+`</thead>
`+t+`</table>
`}tablerow(e){return`<tr>
`+e+`</tr>
`}tablecell(e,t){const n=t.header?"th":"td";return(t.align?"<"+n+' align="'+t.align+'">':"<"+n+">")+e+"</"+n+`>
`}strong(e){return"<strong>"+e+"</strong>"}em(e){return"<em>"+e+"</em>"}codespan(e){return"<code>"+e+"</code>"}br(){return this.options.xhtml?"<br/>":"<br>"}del(e){return"<del>"+e+"</del>"}link(e,t,n){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r='<a href="'+escape$1(e)+'"';return t&&(r+=' title="'+t+'"'),r+=">"+n+"</a>",r}image(e,t,n){if(e=cleanUrl(this.options.sanitize,this.options.baseUrl,e),e===null)return n;let r='<img src="'+e+'" alt="'+n+'"';return t&&(r+=' title="'+t+'"'),r+=this.options.xhtml?"/>":">",r}text(e){return e}},TextRenderer_1=class{strong(e){return e}em(e){return e}codespan(e){return e}del(e){return e}html(e){return e}text(e){return e}link(e,t,n){return""+n}image(e,t,n){return""+n}br(){return""}},Slugger_1=class{constructor(){this.seen={}}serialize(e){return e.toLowerCase().trim().replace(/<[!\/a-z].*?>/ig,"").replace(/[\u2000-\u206F\u2E00-\u2E7F\\'!"#$%&()*+,./:;<=>?@[\]^`{|}~]/g,"").replace(/\s/g,"-")}getNextSafeSlug(e,t){let n=e,r=0;if(this.seen.hasOwnProperty(n)){r=this.seen[e];do r++,n=e+"-"+r;while(this.seen.hasOwnProperty(n))}return t||(this.seen[e]=r,this.seen[n]=0),n}slug(e,t={}){const n=this.serialize(e);return this.getNextSafeSlug(n,t.dryrun)}};const Renderer$1=Renderer_1,TextRenderer$1=TextRenderer_1,Slugger$1=Slugger_1,{defaults:defaults$1}=defaults$5.exports,{unescape}=helpers;var Parser_1=class Uo{constructor(e){this.options=e||defaults$1,this.options.renderer=this.options.renderer||new Renderer$1,this.renderer=this.options.renderer,this.renderer.options=this.options,this.textRenderer=new TextRenderer$1,this.slugger=new Slugger$1}static parse(e,t){return new Uo(t).parse(e)}static parseInline(e,t){return new Uo(t).parseInline(e)}parse(e,t=!0){let n="",r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T;const $=e.length;for(r=0;r<$;r++){if(p=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[p.type]&&(T=this.options.extensions.renderers[p.type].call(this,p),T!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(p.type))){n+=T||"";continue}switch(p.type){case"space":continue;case"hr":{n+=this.renderer.hr();continue}case"heading":{n+=this.renderer.heading(this.parseInline(p.tokens),p.depth,unescape(this.parseInline(p.tokens,this.textRenderer)),this.slugger);continue}case"code":{n+=this.renderer.code(p.text,p.lang,p.escaped);continue}case"table":{for(m="",f="",l=p.header.length,a=0;a<l;a++)f+=this.renderer.tablecell(this.parseInline(p.tokens.header[a]),{header:!0,align:p.align[a]});for(m+=this.renderer.tablerow(f),h="",l=p.cells.length,a=0;a<l;a++){for(d=p.tokens.cells[a],f="",u=d.length,s=0;s<u;s++)f+=this.renderer.tablecell(this.parseInline(d[s]),{header:!1,align:p.align[s]});h+=this.renderer.tablerow(f)}n+=this.renderer.table(m,h);continue}case"blockquote":{h=this.parse(p.tokens),n+=this.renderer.blockquote(h);continue}case"list":{for(g=p.ordered,b=p.start,v=p.loose,l=p.items.length,h="",a=0;a<l;a++)C=p.items[a],E=C.checked,A=C.task,y="",C.task&&(k=this.renderer.checkbox(E),v?C.tokens.length>0&&C.tokens[0].type==="text"?(C.tokens[0].text=k+" "+C.tokens[0].text,C.tokens[0].tokens&&C.tokens[0].tokens.length>0&&C.tokens[0].tokens[0].type==="text"&&(C.tokens[0].tokens[0].text=k+" "+C.tokens[0].tokens[0].text)):C.tokens.unshift({type:"text",text:k}):y+=k),y+=this.parse(C.tokens,v),h+=this.renderer.listitem(y,A,E);n+=this.renderer.list(h,g,b);continue}case"html":{n+=this.renderer.html(p.text);continue}case"paragraph":{n+=this.renderer.paragraph(this.parseInline(p.tokens));continue}case"text":{for(h=p.tokens?this.parseInline(p.tokens):p.text;r+1<$&&e[r+1].type==="text";)p=e[++r],h+=`
`+(p.tokens?this.parseInline(p.tokens):p.text);n+=t?this.renderer.paragraph(h):h;continue}default:{const S='Token with "'+p.type+'" type was not found.';if(this.options.silent){console.error(S);return}else throw new Error(S)}}}return n}parseInline(e,t){t=t||this.renderer;let n="",r,a,s;const l=e.length;for(r=0;r<l;r++){if(a=e[r],this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[a.type]&&(s=this.options.extensions.renderers[a.type].call(this,a),s!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(a.type))){n+=s||"";continue}switch(a.type){case"escape":{n+=t.text(a.text);break}case"html":{n+=t.html(a.text);break}case"link":{n+=t.link(a.href,a.title,this.parseInline(a.tokens,t));break}case"image":{n+=t.image(a.href,a.title,a.text);break}case"strong":{n+=t.strong(this.parseInline(a.tokens,t));break}case"em":{n+=t.em(this.parseInline(a.tokens,t));break}case"codespan":{n+=t.codespan(a.text);break}case"br":{n+=t.br();break}case"del":{n+=t.del(this.parseInline(a.tokens,t));break}case"text":{n+=t.text(a.text);break}default:{const u='Token with "'+a.type+'" type was not found.';if(this.options.silent){console.error(u);return}else throw new Error(u)}}}return n}};const Lexer$1=Lexer_1,Parser=Parser_1,Tokenizer=Tokenizer_1,Renderer=Renderer_1,TextRenderer=TextRenderer_1,Slugger$2=Slugger_1,{merge:merge$3,checkSanitizeDeprecation,escape}=helpers,{getDefaults,changeDefaults,defaults:defaults$6}=defaults$5.exports;function marked(o,e,t){if(typeof o>"u"||o===null)throw new Error("marked(): input parameter is undefined or null");if(typeof o!="string")throw new Error("marked(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");if(typeof e=="function"&&(t=e,e=null),e=merge$3({},marked.defaults,e||{}),checkSanitizeDeprecation(e),t){const n=e.highlight;let r;try{r=Lexer$1.lex(o,e)}catch(l){return t(l)}const a=function(l){let u;if(!l)try{e.walkTokens&&marked.walkTokens(r,e.walkTokens),u=Parser.parse(r,e)}catch(d){l=d}return e.highlight=n,l?t(l):t(null,u)};if(!n||n.length<3||(delete e.highlight,!r.length))return a();let s=0;marked.walkTokens(r,function(l){l.type==="code"&&(s++,setTimeout(()=>{n(l.text,l.lang,function(u,d){if(u)return a(u);d!=null&&d!==l.text&&(l.text=d,l.escaped=!0),s--,s===0&&a()})},0))}),s===0&&a();return}try{const n=Lexer$1.lex(o,e);return e.walkTokens&&marked.walkTokens(n,e.walkTokens),Parser.parse(n,e)}catch(n){if(n.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+escape(n.message+"",!0)+"</pre>";throw n}}marked.options=marked.setOptions=function(o){return merge$3(marked.defaults,o),changeDefaults(marked.defaults),marked};marked.getDefaults=getDefaults;marked.defaults=defaults$6;marked.use=function(...o){const e=merge$3({},...o),t=marked.defaults.extensions||{renderers:{},childTokens:{}};let n;o.forEach(r=>{if(r.extensions&&(n=!0,r.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if(a.renderer){const s=t.renderers?t.renderers[a.name]:null;s?t.renderers[a.name]=function(...l){let u=a.renderer.apply(this,l);return u===!1&&(u=s.apply(this,l)),u}:t.renderers[a.name]=a.renderer}if(a.tokenizer){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");t[a.level]?t[a.level].unshift(a.tokenizer):t[a.level]=[a.tokenizer],a.start&&(a.level==="block"?t.startBlock?t.startBlock.push(a.start):t.startBlock=[a.start]:a.level==="inline"&&(t.startInline?t.startInline.push(a.start):t.startInline=[a.start]))}a.childTokens&&(t.childTokens[a.name]=a.childTokens)})),r.renderer){const a=marked.defaults.renderer||new Renderer;for(const s in r.renderer){const l=a[s];a[s]=(...u)=>{let d=r.renderer[s].apply(a,u);return d===!1&&(d=l.apply(a,u)),d}}e.renderer=a}if(r.tokenizer){const a=marked.defaults.tokenizer||new Tokenizer;for(const s in r.tokenizer){const l=a[s];a[s]=(...u)=>{let d=r.tokenizer[s].apply(a,u);return d===!1&&(d=l.apply(a,u)),d}}e.tokenizer=a}if(r.walkTokens){const a=marked.defaults.walkTokens;e.walkTokens=s=>{r.walkTokens.call(this,s),a&&a(s)}}n&&(e.extensions=t),marked.setOptions(e)})};marked.walkTokens=function(o,e){for(const t of o)switch(e(t),t.type){case"table":{for(const n of t.tokens.header)marked.walkTokens(n,e);for(const n of t.tokens.cells)for(const r of n)marked.walkTokens(r,e);break}case"list":{marked.walkTokens(t.items,e);break}default:marked.defaults.extensions&&marked.defaults.extensions.childTokens&&marked.defaults.extensions.childTokens[t.type]?marked.defaults.extensions.childTokens[t.type].forEach(function(n){marked.walkTokens(t[n],e)}):t.tokens&&marked.walkTokens(t.tokens,e)}};marked.parseInline=function(o,e){if(typeof o>"u"||o===null)throw new Error("marked.parseInline(): input parameter is undefined or null");if(typeof o!="string")throw new Error("marked.parseInline(): input parameter is of type "+Object.prototype.toString.call(o)+", string expected");e=merge$3({},marked.defaults,e||{}),checkSanitizeDeprecation(e);try{const t=Lexer$1.lexInline(o,e);return e.walkTokens&&marked.walkTokens(t,e.walkTokens),Parser.parseInline(t,e)}catch(t){if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,e.silent)return"<p>An error occurred:</p><pre>"+escape(t.message+"",!0)+"</pre>";throw t}};marked.Parser=Parser;marked.parser=Parser.parse;marked.Renderer=Renderer;marked.TextRenderer=TextRenderer;marked.Lexer=Lexer$1;marked.lexer=Lexer$1.lex;marked.Tokenizer=Tokenizer;marked.Slugger=Slugger$2;marked.parse=marked;var marked_1=marked;const key$1={};function create_else_block$p(o){let e;return{c(){e=text(o[1])},m(t,n){insert(t,e,n)},p(t,n){n&2&&set_data(e,t[1])},i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function create_if_block_5$7(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h6"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block_4$f(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h5"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block_3$g(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h4"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block_2$k(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h3"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block_1$x(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h2"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block$R(o){let e,t;const n=o[5].default,r=create_slot(n,o,o[4],null);return{c(){e=element("h1"),r&&r.c(),attr(e,"id",o[2])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&16)&&update_slot_base(r,n,a,a[4],t?get_slot_changes(n,a[4],s,null):get_all_dirty_from_scope(a[4]),null),(!t||s&4)&&attr(e,"id",a[2])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$1T(o){let e,t,n,r;const a=[create_if_block$R,create_if_block_1$x,create_if_block_2$k,create_if_block_3$g,create_if_block_4$f,create_if_block_5$7,create_else_block$p],s=[];function l(u,d){return u[0]===1?0:u[0]===2?1:u[0]===3?2:u[0]===4?3:u[0]===5?4:u[0]===6?5:6}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$1R(o,e,t){let n,{$$slots:r={},$$scope:a}=e,{depth:s}=e,{raw:l}=e,{text:u}=e;const{slug:d,getOptions:f}=getContext(key$1),m=f();return o.$$set=h=>{"depth"in h&&t(0,s=h.depth),"raw"in h&&t(1,l=h.raw),"text"in h&&t(3,u=h.text),"$$scope"in h&&t(4,a=h.$$scope)},o.$$.update=()=>{o.$$.dirty&8&&t(2,n=m.headerIds?m.headerPrefix+d(u):void 0)},[s,l,n,u,a,r]}class Heading extends SvelteComponent{constructor(e){super(),init(this,e,instance$1R,create_fragment$1T,safe_not_equal,{depth:0,raw:1,text:3})}}function create_fragment$1S(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("p"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1Q(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Paragraph extends SvelteComponent{constructor(e){super(),init(this,e,instance$1Q,create_fragment$1S,safe_not_equal,{})}}function create_fragment$1R(o){let e;const t=o[3].default,n=create_slot(t,o,o[2],null);return{c(){n&&n.c()},m(r,a){n&&n.m(r,a),e=!0},p(r,[a]){n&&n.p&&(!e||a&4)&&update_slot_base(n,t,r,r[2],e?get_slot_changes(t,r[2],a,null):get_all_dirty_from_scope(r[2]),null)},i(r){e||(transition_in(n,r),e=!0)},o(r){transition_out(n,r),e=!1},d(r){n&&n.d(r)}}}function instance$1P(o,e,t){let{$$slots:n={},$$scope:r}=e,{text:a}=e,{raw:s}=e;return o.$$set=l=>{"text"in l&&t(0,a=l.text),"raw"in l&&t(1,s=l.raw),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class Text extends SvelteComponent{constructor(e){super(),init(this,e,instance$1P,create_fragment$1R,safe_not_equal,{text:0,raw:1})}}function create_fragment$1Q(o){let e,t;return{c(){e=element("img"),src_url_equal(e.src,t=o[0])||attr(e,"src",t),attr(e,"title",o[1]),attr(e,"alt",o[2])},m(n,r){insert(n,e,r)},p(n,[r]){r&1&&!src_url_equal(e.src,t=n[0])&&attr(e,"src",t),r&2&&attr(e,"title",n[1]),r&4&&attr(e,"alt",n[2])},i:noop$1,o:noop$1,d(n){n&&detach(e)}}}function instance$1O(o,e,t){let{href:n=""}=e,{title:r=void 0}=e,{text:a=""}=e;return o.$$set=s=>{"href"in s&&t(0,n=s.href),"title"in s&&t(1,r=s.title),"text"in s&&t(2,a=s.text)},[n,r,a]}class Image extends SvelteComponent{constructor(e){super(),init(this,e,instance$1O,create_fragment$1Q,safe_not_equal,{href:0,title:1,text:2})}}function create_fragment$1P(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);return{c(){e=element("a"),r&&r.c(),attr(e,"href",o[0]),attr(e,"title",o[1])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&4)&&update_slot_base(r,n,a,a[2],t?get_slot_changes(n,a[2],s,null):get_all_dirty_from_scope(a[2]),null),(!t||s&1)&&attr(e,"href",a[0]),(!t||s&2)&&attr(e,"title",a[1])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1N(o,e,t){let{$$slots:n={},$$scope:r}=e,{href:a=""}=e,{title:s=void 0}=e;return o.$$set=l=>{"href"in l&&t(0,a=l.href),"title"in l&&t(1,s=l.title),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class Link extends SvelteComponent{constructor(e){super(),init(this,e,instance$1N,create_fragment$1P,safe_not_equal,{href:0,title:1})}}function create_fragment$1O(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("em"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1M(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Em extends SvelteComponent{constructor(e){super(),init(this,e,instance$1M,create_fragment$1O,safe_not_equal,{})}}function create_fragment$1N(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("del"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1L(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Del extends SvelteComponent{constructor(e){super(),init(this,e,instance$1L,create_fragment$1N,safe_not_equal,{})}}function create_fragment$1M(o){let e,t=o[0].replace(/`/g,"")+"",n;return{c(){e=element("code"),n=text(t)},m(r,a){insert(r,e,a),append(e,n)},p(r,[a]){a&1&&t!==(t=r[0].replace(/`/g,"")+"")&&set_data(n,t)},i:noop$1,o:noop$1,d(r){r&&detach(e)}}}function instance$1K(o,e,t){let{raw:n}=e;return o.$$set=r=>{"raw"in r&&t(0,n=r.raw)},[n]}class Codespan extends SvelteComponent{constructor(e){super(),init(this,e,instance$1K,create_fragment$1M,safe_not_equal,{raw:0})}}function create_fragment$1L(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("strong"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1J(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Strong extends SvelteComponent{constructor(e){super(),init(this,e,instance$1J,create_fragment$1L,safe_not_equal,{})}}function create_fragment$1K(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("table"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1I(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Table extends SvelteComponent{constructor(e){super(),init(this,e,instance$1I,create_fragment$1K,safe_not_equal,{})}}function create_fragment$1J(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("thead"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1H(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class TableHead extends SvelteComponent{constructor(e){super(),init(this,e,instance$1H,create_fragment$1J,safe_not_equal,{})}}function create_fragment$1I(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("tbody"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1G(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class TableBody extends SvelteComponent{constructor(e){super(),init(this,e,instance$1G,create_fragment$1I,safe_not_equal,{})}}function create_fragment$1H(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("tr"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1F(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class TableRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$1F,create_fragment$1H,safe_not_equal,{})}}function create_else_block$o(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);return{c(){e=element("td"),r&&r.c(),attr(e,"align",o[1])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&4)&&update_slot_base(r,n,a,a[2],t?get_slot_changes(n,a[2],s,null):get_all_dirty_from_scope(a[2]),null),(!t||s&2)&&attr(e,"align",a[1])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block$Q(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);return{c(){e=element("th"),r&&r.c(),attr(e,"align",o[1])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&4)&&update_slot_base(r,n,a,a[2],t?get_slot_changes(n,a[2],s,null):get_all_dirty_from_scope(a[2]),null),(!t||s&2)&&attr(e,"align",a[1])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$1G(o){let e,t,n,r;const a=[create_if_block$Q,create_else_block$o],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$1E(o,e,t){let{$$slots:n={},$$scope:r}=e,{header:a}=e,{align:s}=e;return o.$$set=l=>{"header"in l&&t(0,a=l.header),"align"in l&&t(1,s=l.align),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class TableCell extends SvelteComponent{constructor(e){super(),init(this,e,instance$1E,create_fragment$1G,safe_not_equal,{header:0,align:1})}}function create_else_block$n(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);return{c(){e=element("ul"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&4)&&update_slot_base(r,n,a,a[2],t?get_slot_changes(n,a[2],s,null):get_all_dirty_from_scope(a[2]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_if_block$P(o){let e,t;const n=o[3].default,r=create_slot(n,o,o[2],null);return{c(){e=element("ol"),r&&r.c(),attr(e,"start",o[1])},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,s){r&&r.p&&(!t||s&4)&&update_slot_base(r,n,a,a[2],t?get_slot_changes(n,a[2],s,null):get_all_dirty_from_scope(a[2]),null),(!t||s&2)&&attr(e,"start",a[1])},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function create_fragment$1F(o){let e,t,n,r;const a=[create_if_block$P,create_else_block$n],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$1D(o,e,t){let{$$slots:n={},$$scope:r}=e,{ordered:a}=e,{start:s}=e;return o.$$set=l=>{"ordered"in l&&t(0,a=l.ordered),"start"in l&&t(1,s=l.start),"$$scope"in l&&t(2,r=l.$$scope)},[a,s,r,n]}class List extends SvelteComponent{constructor(e){super(),init(this,e,instance$1D,create_fragment$1F,safe_not_equal,{ordered:0,start:1})}}function create_fragment$1E(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("li"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1C(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class ListItem extends SvelteComponent{constructor(e){super(),init(this,e,instance$1C,create_fragment$1E,safe_not_equal,{})}}function create_fragment$1D(o){let e;return{c(){e=element("hr")},m(t,n){insert(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}class Hr extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$1D,safe_not_equal,{})}}function create_fragment$1C(o){let e,t;return{c(){e=new HtmlTag(!1),t=empty(),e.a=t},m(n,r){e.m(o[0],n,r),insert(n,t,r)},p(n,[r]){r&1&&e.p(n[0])},i:noop$1,o:noop$1,d(n){n&&(detach(t),e.d())}}}function instance$1B(o,e,t){let{text:n}=e;return o.$$set=r=>{"text"in r&&t(0,n=r.text)},[n]}class Html extends SvelteComponent{constructor(e){super(),init(this,e,instance$1B,create_fragment$1C,safe_not_equal,{text:0})}}function create_fragment$1B(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("blockquote"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(e,null),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1A(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Blockquote extends SvelteComponent{constructor(e){super(),init(this,e,instance$1A,create_fragment$1B,safe_not_equal,{})}}function create_fragment$1A(o){let e,t,n;return{c(){e=element("pre"),t=element("code"),n=text(o[1]),attr(e,"class",o[0])},m(r,a){insert(r,e,a),append(e,t),append(t,n)},p(r,[a]){a&2&&set_data(n,r[1]),a&1&&attr(e,"class",r[0])},i:noop$1,o:noop$1,d(r){r&&detach(e)}}}function instance$1z(o,e,t){let{lang:n}=e,{text:r}=e;return o.$$set=a=>{"lang"in a&&t(0,n=a.lang),"text"in a&&t(1,r=a.text)},[n,r]}class Code extends SvelteComponent{constructor(e){super(),init(this,e,instance$1z,create_fragment$1A,safe_not_equal,{lang:0,text:1})}}function create_fragment$1z(o){let e,t;const n=o[1].default,r=create_slot(n,o,o[0],null);return{c(){e=element("br"),r&&r.c()},m(a,s){insert(a,e,s),r&&r.m(a,s),t=!0},p(a,[s]){r&&r.p&&(!t||s&1)&&update_slot_base(r,n,a,a[0],t?get_slot_changes(n,a[0],s,null):get_all_dirty_from_scope(a[0]),null)},i(a){t||(transition_in(r,a),t=!0)},o(a){transition_out(r,a),t=!1},d(a){a&&detach(e),r&&r.d(a)}}}function instance$1y(o,e,t){let{$$slots:n={},$$scope:r}=e;return o.$$set=a=>{"$$scope"in a&&t(0,r=a.$$scope)},[r,n]}class Br extends SvelteComponent{constructor(e){super(),init(this,e,instance$1y,create_fragment$1z,safe_not_equal,{})}}const defaultRenderers={heading:Heading,paragraph:Paragraph,text:Text,image:Image,link:Link,em:Em,strong:Strong,codespan:Codespan,del:Del,table:Table,tablehead:TableHead,tablebody:TableBody,tablerow:TableRow,tablecell:TableCell,list:List,orderedlistitem:null,unorderedlistitem:null,listitem:ListItem,hr:Hr,html:Html,blockquote:Blockquote,code:Code,br:Br},defaultOptions={baseUrl:null,breaks:!1,gfm:!0,headerIds:!0,headerPrefix:"",highlight:null,langPrefix:"language-",mangle:!0,pedantic:!1,renderer:null,sanitize:!1,sanitizer:null,silent:!1,smartLists:!1,smartypants:!1,tokenizer:null,xhtml:!1},Lexer=marked_1.Lexer,Slugger=marked_1.Slugger;function create_fragment$1y(o){let e,t;return e=new Parser$1({props:{tokens:o[0],renderers:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.tokens=n[0]),r&2&&(a.renderers=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1x(o,e,t){let n,r,a,{source:s=""}=e,{renderers:l={}}=e,{options:u={}}=e,{isInline:d=!1}=e;const f=createEventDispatcher();let m,h,p;return setContext(key$1,{slug:g=>n?n.slug(g):"",getOptions:()=>r}),onMount(()=>{t(7,p=!0)}),o.$$set=g=>{"source"in g&&t(2,s=g.source),"renderers"in g&&t(3,l=g.renderers),"options"in g&&t(4,u=g.options),"isInline"in g&&t(5,d=g.isInline)},o.$$.update=()=>{o.$$.dirty&4&&(n=s?new Slugger:void 0),o.$$.dirty&16&&t(8,r={...defaultOptions,...u}),o.$$.dirty&357&&(t(6,h=new Lexer(r)),t(0,m=d?h.inlineTokens(s):h.lex(s)),f("parsed",{tokens:m})),o.$$.dirty&8&&t(1,a={...defaultRenderers,...l}),o.$$.dirty&129&&p&&f("parsed",{tokens:m})},[m,a,s,l,u,d,h,p,r]}class SvelteMarkdown extends SvelteComponent{constructor(e){super(),init(this,e,instance$1x,create_fragment$1y,safe_not_equal,{source:2,renderers:3,options:4,isInline:5})}}function create_fragment$1x(o){let e,t;return e=new SvelteMarkdown({props:{source:o[0],renderers:{link:Link$1}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.source=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1w(o,e,t){let{source:n}=e;return o.$$set=r=>{"source"in r&&t(0,n=r.source)},[n]}class Markdown extends SvelteComponent{constructor(e){super(),init(this,e,instance$1w,create_fragment$1x,safe_not_equal,{source:0})}}function extractPluginIcon(o){const{links:e}=o||{},{repository:t}=e||{},n=e&&e.homepage||o.homepage,r=t||n||o.homepage;if(o.description){const a=o.description.match(/\!\[icon\]\(([^)]+)\)/,"");if(a)return a[1]}return r=="https://dbgate.org"||r=="https://github.com/dbgate/dbgate"?`https://github.com/dbgate/dbgate/raw/master/plugins/${o.name}/icon.svg`:"unknown.svg"}function extractPluginAuthor(o){return _.isPlainObject(o.author)&&o.author.name?o.author.name:o.author?o.author:_.isPlainObject(o.publisher)&&o.publisher.username?o.publisher.username:o.maintainers&&_.isPlainObject(o.maintainers[0])&&o.maintainers[0].username?o.maintainers[0].username:"(Unknown author)"}function extractPluginDescription(o){var e;return!o.description||((e=o.description)==null?void 0:e.indexOf("[!["))>=0?"(No description)":o.description.replace(/\!\[icon\]\([^)]+\)/,"").trim()}const PluginTab_svelte_svelte_type_style_lang="";function create_if_block$O(o){let e,t,n,r,a,s,l,u,d,f,m,h=extractPluginAuthor(o[2])+"",p,g,b,v,y,C=(o[1]?o[1].version:o[2].version)+"",E,A,k,T,$,S,I;const R=[create_if_block_1$w,create_else_block$m],N=[];function M(F,D){return F[5]?0:1}return k=M(o),T=N[k]=R[k](o),S=new Markdown({props:{source:o[3]}}),{c(){e=element("div"),t=element("div"),n=element("img"),a=space(),s=element("div"),l=element("div"),u=text(o[0]),d=space(),f=element("div"),m=element("span"),p=text(h),g=space(),b=element("span"),b.textContent="|",v=space(),y=element("span"),E=text(C),A=space(),T.c(),$=space(),create_component(S.$$.fragment),src_url_equal(n.src,r=extractPluginIcon(o[2]))||attr(n,"src",r),attr(n,"class","icon svelte-16npcmz"),attr(l,"class","title svelte-16npcmz"),attr(m,"class","bold"),attr(f,"class","mt-1"),attr(s,"class","ml-2"),attr(t,"class","header svelte-16npcmz"),attr(e,"class","white-page svelte-16npcmz")},m(F,D){insert(F,e,D),append(e,t),append(t,n),append(t,a),append(t,s),append(s,l),append(l,u),append(s,d),append(s,f),append(f,m),append(m,p),append(f,g),append(f,b),append(f,v),append(f,y),append(y,E),append(s,A),N[k].m(s,null),append(e,$),mount_component(S,e,null),I=!0},p(F,D){(!I||D&4&&!src_url_equal(n.src,r=extractPluginIcon(F[2])))&&attr(n,"src",r),(!I||D&1)&&set_data(u,F[0]),(!I||D&4)&&h!==(h=extractPluginAuthor(F[2])+"")&&set_data(p,h),(!I||D&6)&&C!==(C=(F[1]?F[1].version:F[2].version)+"")&&set_data(E,C);let x=k;k=M(F),k===x?N[k].p(F,D):(group_outros(),transition_out(N[x],1,1,()=>{N[x]=null}),check_outros(),T=N[k],T?T.p(F,D):(T=N[k]=R[k](F),T.c()),transition_in(T,1),T.m(s,null));const B={};D&8&&(B.source=F[3]),S.$set(B)},i(F){I||(transition_in(T),transition_in(S.$$.fragment,F),I=!0)},o(F){transition_out(T),transition_out(S.$$.fragment,F),I=!1},d(F){F&&detach(e),N[k].d(),destroy_component(S)}}}function create_else_block$m(o){let e,t=hasPermission("plugins/install")&&!o[1],n,r=hasPermission("plugins/install")&&o[1],a,s=hasPermission("plugins/install")&&o[1]&&o[4]&&compareVersions(o[4].version,o[1].version)>0,l,u=t&&create_if_block_4$e(o),d=r&&create_if_block_3$f(o),f=s&&create_if_block_2$j(o);return{c(){e=element("div"),u&&u.c(),n=space(),d&&d.c(),a=space(),f&&f.c(),attr(e,"class","mt-1")},m(m,h){insert(m,e,h),u&&u.m(e,null),append(e,n),d&&d.m(e,null),append(e,a),f&&f.m(e,null),l=!0},p(m,h){h&2&&(t=hasPermission("plugins/install")&&!m[1]),t?u?(u.p(m,h),h&2&&transition_in(u,1)):(u=create_if_block_4$e(m),u.c(),transition_in(u,1),u.m(e,n)):u&&(group_outros(),transition_out(u,1,1,()=>{u=null}),check_outros()),h&2&&(r=hasPermission("plugins/install")&&m[1]),r?d?(d.p(m,h),h&2&&transition_in(d,1)):(d=create_if_block_3$f(m),d.c(),transition_in(d,1),d.m(e,a)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),h&18&&(s=hasPermission("plugins/install")&&m[1]&&m[4]&&compareVersions(m[4].version,m[1].version)>0),s?f?(f.p(m,h),h&18&&transition_in(f,1)):(f=create_if_block_2$j(m),f.c(),transition_in(f,1),f.m(e,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(m){l||(transition_in(u),transition_in(d),transition_in(f),l=!0)},o(m){transition_out(u),transition_out(d),transition_out(f),l=!1},d(m){m&&detach(e),u&&u.d(),d&&d.d(),f&&f.d()}}}function create_if_block_1$w(o){let e;return{c(){e=element("div"),e.textContent="Plugin is part of DbGate installation",attr(e,"class","mt-2")},m(t,n){insert(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function create_if_block_4$e(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Install"}}),e.$on("click",o[8]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$f(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Uninstall"}}),e.$on("click",o[9]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$j(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Upgrade"}}),e.$on("click",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1w(o){let e,t,n=o[2]&&create_if_block$O(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[2]?n?(n.p(r,a),a&4&&transition_in(n,1)):(n=create_if_block$O(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}globalThis&&globalThis.__awaiter;const matchingProps$5=["packageName"];function instance$1v(o,e,t){let n,r,a,s,l,u,d,f,m=noop$1,h=()=>(m(),m=subscribe(n,k=>t(11,f=k)),n),p,g=noop$1,b=()=>(g(),g=subscribe(r,k=>t(12,p=k)),r);o.$$.on_destroy.push(()=>m()),o.$$.on_destroy.push(()=>g());var v=this&&this.__awaiter||function(k,T,$,S){function I(R){return R instanceof $?R:new $(function(N){N(R)})}return new($||($=Promise))(function(R,N){function M(x){try{D(S.next(x))}catch(B){N(B)}}function F(x){try{D(S.throw(x))}catch(B){N(B)}}function D(x){x.done?R(x.value):I(x.value).then(M,F)}D((S=S.apply(k,T||[])).next())})};let{packageName:y}=e;const C=()=>v(void 0,void 0,void 0,function*(){apiCall("plugins/install",{packageName:y})}),E=()=>v(void 0,void 0,void 0,function*(){apiCall("plugins/uninstall",{packageName:y})}),A=()=>v(void 0,void 0,void 0,function*(){apiCall("plugins/upgrade",{packageName:y})});return o.$$set=k=>{"packageName"in k&&t(0,y=k.packageName)},o.$$.update=()=>{o.$$.dirty&1&&b(t(6,r=useApiCall("plugins/info",{packageName:y},null))),o.$$.dirty&4096&&t(3,a=p==null?void 0:p.readme),o.$$.dirty&4096&&t(2,s=p==null?void 0:p.manifest),o.$$.dirty&4096&&t(5,l=p==null?void 0:p.isPackaged),o.$$.dirty&2049&&t(1,u=f==null?void 0:f.find(k=>k.name==y)),o.$$.dirty&6&&s==null&&u&&(t(2,s=u),t(3,a=u.readme)),o.$$.dirty&4&&t(4,d=s)},h(t(7,n=useInstalledPlugins())),[y,u,s,a,d,l,r,n,C,E,A,f,p]}class PluginTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1v,create_fragment$1w,safe_not_equal,{packageName:0})}}const PluginTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:PluginTab,matchingProps:matchingProps$5},Symbol.toStringTag,{value:"Module"}));async function loadChartStructure(o,e,t,n){const a=await apiCall("database-connections/sql-select",{conid:e,database:t,select:{commandType:"select",selectAll:!0,topRecords:1,from:{subQueryString:n,alias:"subq"}}});if(a.errorMessage)throw new Error(a.errorMessage);return a.columns.map(s=>s.columnName)}async function loadChartData(o,e,t,n,r){const a=extractDataColumns(r),{labelColumn:s,truncateFrom:l,truncateLimit:u,showRelativeValues:d}=r;if(!s||!a||a.length==0)return null;const f={commandType:"select",columns:[{exprType:"column",source:{alias:"subq"},columnName:s,alias:s},...a.map(b=>({exprType:"call",func:"SUM",args:[{exprType:"column",columnName:b,source:{alias:"subq"}}],alias:b}))],topRecords:u||100,from:{subQueryString:n,alias:"subq"},groupBy:[{exprType:"column",source:{alias:"subq"},columnName:s}],orderBy:[{exprType:"column",source:{alias:"subq"},columnName:s,direction:l=="end"?"DESC":"ASC"}]},m=await apiCall("database-connections/sql-select",{conid:e,database:t,select:f});let{rows:h,columns:p,errorMessage:g}=m;if(g)throw new Error(g);if(l=="end"&&h&&(h=_.reverse([...h])),d){const b=a.map(v=>_.max(h.map(y=>y[v])));for(const[v,y]of _.zip(a,b))y&&_.isNumber(y)&&y>0&&(h=h.map(C=>({...C,[v]:C[v]/y*100})))}return console.log("Loaded chart data",{columns:p,rows:h}),{columns:p,rows:h}}function extractDataColumns(o){const e=[];for(const t in o)t.startsWith("dataColumn_")&&o[t]&&e.push(t.substring(11));return e}function extractDataColumnColors(o,e){const t={};for(const n of e){const r=o[`dataColumnColor_${n}`];r&&(t[n]=r)}return t}function extractDataColumnLabels(o,e){const t={};for(const n of e){const r=o[`dataColumnLabel_${n}`];r&&(t[n]=r)}return t}var randomColor={exports:{}};(function(o,e){(function(t,n){{var r=n();o&&o.exports&&(e=o.exports=r),e.randomColor=r}})(commonjsGlobal,function(){var t=null,n={};y();var r=[],a=function($){if($=$||{},$.seed!==void 0&&$.seed!==null&&$.seed===parseInt($.seed,10))t=$.seed;else if(typeof $.seed=="string")t=k($.seed);else{if($.seed!==void 0&&$.seed!==null)throw new TypeError("The seed value must be an integer or string");t=null}var S,I,R;if($.count!==null&&$.count!==void 0){for(var N=$.count,M=[],F=0;F<$.count;F++)r.push(!1);for($.count=null;N>M.length;){var D=a($);t!==null&&($.seed=t),M.push(D)}return $.count=N,M}return S=s($),I=l(S,$),R=u(S,I,$),d([S,I,R],$)};function s($){if(r.length>0){var S=T($.hue),I=g(S),R=(S[1]-S[0])/r.length,N=parseInt((I-S[0])/R);r[N]===!0?N=(N+2)%r.length:r[N]=!0;var M=(S[0]+N*R)%359,F=(S[0]+(N+1)*R)%359;return S=[M,F],I=g(S),I<0&&(I=360+I),I}else{var S=m($.hue);return I=g(S),I<0&&(I=360+I),I}}function l($,S){if(S.hue==="monochrome")return 0;if(S.luminosity==="random")return g([0,100]);var I=h($),R=I[0],N=I[1];switch(S.luminosity){case"bright":R=55;break;case"dark":R=N-10;break;case"light":N=55;break}return g([R,N])}function u($,S,I){var R=f($,S),N=100;switch(I.luminosity){case"dark":N=R+20;break;case"light":R=(N+R)/2;break;case"random":R=0,N=100;break}return g([R,N])}function d($,S){switch(S.format){case"hsvArray":return $;case"hslArray":return A($);case"hsl":var I=A($);return"hsl("+I[0]+", "+I[1]+"%, "+I[2]+"%)";case"hsla":var R=A($),F=S.alpha||Math.random();return"hsla("+R[0]+", "+R[1]+"%, "+R[2]+"%, "+F+")";case"rgbArray":return C($);case"rgb":var N=C($);return"rgb("+N.join(", ")+")";case"rgba":var M=C($),F=S.alpha||Math.random();return"rgba("+M.join(", ")+", "+F+")";default:return b($)}}function f($,S){for(var I=p($).lowerBounds,R=0;R<I.length-1;R++){var N=I[R][0],M=I[R][1],F=I[R+1][0],D=I[R+1][1];if(S>=N&&S<=F){var x=(D-M)/(F-N),B=M-x*N;return x*S+B}}return 0}function m($){if(typeof parseInt($)=="number"){var S=parseInt($);if(S<360&&S>0)return[S,S]}if(typeof $=="string"){if(n[$]){var I=n[$];if(I.hueRange)return I.hueRange}else if($.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var R=E($)[0];return[R,R]}}return[0,360]}function h($){return p($).saturationRange}function p($){$>=334&&$<=360&&($-=360);for(var S in n){var I=n[S];if(I.hueRange&&$>=I.hueRange[0]&&$<=I.hueRange[1])return n[S]}return"Color not found"}function g($){if(t===null){var S=.618033988749895,I=Math.random();return I+=S,I%=1,Math.floor($[0]+I*($[1]+1-$[0]))}else{var R=$[1]||1,N=$[0]||0;t=(t*9301+49297)%233280;var M=t/233280;return Math.floor(N+M*(R-N))}}function b($){var S=C($);function I(N){var M=N.toString(16);return M.length==1?"0"+M:M}var R="#"+I(S[0])+I(S[1])+I(S[2]);return R}function v($,S,I){var R=I[0][0],N=I[I.length-1][0],M=I[I.length-1][1],F=I[0][1];n[$]={hueRange:S,lowerBounds:I,saturationRange:[R,N],brightnessRange:[M,F]}}function y(){v("monochrome",null,[[0,0],[100,0]]),v("red",[-26,18],[[20,100],[30,92],[40,89],[50,85],[60,78],[70,70],[80,60],[90,55],[100,50]]),v("orange",[18,46],[[20,100],[30,93],[40,88],[50,86],[60,85],[70,70],[100,70]]),v("yellow",[46,62],[[25,100],[40,94],[50,89],[60,86],[70,84],[80,82],[90,80],[100,75]]),v("green",[62,178],[[30,100],[40,90],[50,85],[60,81],[70,74],[80,64],[90,50],[100,40]]),v("blue",[178,257],[[20,100],[30,86],[40,80],[50,74],[60,60],[70,52],[80,44],[90,39],[100,35]]),v("purple",[257,282],[[20,100],[30,87],[40,79],[50,70],[60,65],[70,59],[80,52],[90,45],[100,42]]),v("pink",[282,334],[[20,100],[30,90],[40,86],[60,84],[80,80],[90,75],[100,73]])}function C($){var S=$[0];S===0&&(S=1),S===360&&(S=359),S=S/360;var I=$[1]/100,R=$[2]/100,N=Math.floor(S*6),M=S*6-N,F=R*(1-I),D=R*(1-M*I),x=R*(1-(1-M)*I),B=256,K=256,U=256;switch(N){case 0:B=R,K=x,U=F;break;case 1:B=D,K=R,U=F;break;case 2:B=F,K=R,U=x;break;case 3:B=F,K=D,U=R;break;case 4:B=x,K=F,U=R;break;case 5:B=R,K=F,U=D;break}var G=[Math.floor(B*255),Math.floor(K*255),Math.floor(U*255)];return G}function E($){$=$.replace(/^#/,""),$=$.length===3?$.replace(/(.)/g,"$1$1"):$;var S=parseInt($.substr(0,2),16)/255,I=parseInt($.substr(2,2),16)/255,R=parseInt($.substr(4,2),16)/255,N=Math.max(S,I,R),M=N-Math.min(S,I,R),F=N?M/N:0;switch(N){case S:return[60*((I-R)/M%6)||0,F,N];case I:return[60*((R-S)/M+2)||0,F,N];case R:return[60*((S-I)/M+4)||0,F,N]}}function A($){var S=$[0],I=$[1]/100,R=$[2]/100,N=(2-I)*R;return[S,Math.round(I*R/(N<1?N:2-N)*1e4)/100,N/2*100]}function k($){for(var S=0,I=0;I!==$.length&&!(S>=Number.MAX_SAFE_INTEGER);I++)S+=$.charCodeAt(I);return S}function T($){if(isNaN($)){if(typeof $=="string"){if(n[$]){var I=n[$];if(I.hueRange)return I.hueRange}else if($.match(/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i)){var R=E($)[0];return p(R).hueRange}}}else{var S=parseInt($);if(S<360&&S>0)return p($).hueRange}return[0,360]}return a})})(randomColor,randomColor.exports);var randomColorExports=randomColor.exports;const randomcolor=getDefaultExportFromCjs(randomColorExports);var hammer={exports:{}};/*! Hammer.JS - v2.0.7 - 2016-04-22
 * http://hammerjs.github.io/
 *
 * Copyright (c) 2016 Jorik Tangelder;
 * Licensed under the MIT license */(function(o){(function(e,t,n,r){var a=["","webkit","Moz","MS","ms","o"],s=t.createElement("div"),l="function",u=Math.round,d=Math.abs,f=Date.now;function m(ee,ae,_e){return setTimeout(E(ee,_e),ae)}function h(ee,ae,_e){return Array.isArray(ee)?(p(ee,_e[ae],_e),!0):!1}function p(ee,ae,_e){var Re;if(ee)if(ee.forEach)ee.forEach(ae,_e);else if(ee.length!==r)for(Re=0;Re<ee.length;)ae.call(_e,ee[Re],Re,ee),Re++;else for(Re in ee)ee.hasOwnProperty(Re)&&ae.call(_e,ee[Re],Re,ee)}function g(ee,ae,_e){var Re="DEPRECATED METHOD: "+ae+`
`+_e+` AT 
`;return function(){var Ge=new Error("get-stack-trace"),it=Ge&&Ge.stack?Ge.stack.replace(/^[^\(]+?[\n$]/gm,"").replace(/^\s+at\s+/gm,"").replace(/^Object.<anonymous>\s*\(/gm,"{anonymous}()@"):"Unknown Stack Trace",yt=e.console&&(e.console.warn||e.console.log);return yt&&yt.call(e.console,Re,it),ee.apply(this,arguments)}}var b;typeof Object.assign!="function"?b=function(ae){if(ae===r||ae===null)throw new TypeError("Cannot convert undefined or null to object");for(var _e=Object(ae),Re=1;Re<arguments.length;Re++){var Ge=arguments[Re];if(Ge!==r&&Ge!==null)for(var it in Ge)Ge.hasOwnProperty(it)&&(_e[it]=Ge[it])}return _e}:b=Object.assign;var v=g(function(ae,_e,Re){for(var Ge=Object.keys(_e),it=0;it<Ge.length;)(!Re||Re&&ae[Ge[it]]===r)&&(ae[Ge[it]]=_e[Ge[it]]),it++;return ae},"extend","Use `assign`."),y=g(function(ae,_e){return v(ae,_e,!0)},"merge","Use `assign`.");function C(ee,ae,_e){var Re=ae.prototype,Ge;Ge=ee.prototype=Object.create(Re),Ge.constructor=ee,Ge._super=Re,_e&&b(Ge,_e)}function E(ee,ae){return function(){return ee.apply(ae,arguments)}}function A(ee,ae){return typeof ee==l?ee.apply(ae&&ae[0]||r,ae):ee}function k(ee,ae){return ee===r?ae:ee}function T(ee,ae,_e){p(R(ae),function(Re){ee.addEventListener(Re,_e,!1)})}function $(ee,ae,_e){p(R(ae),function(Re){ee.removeEventListener(Re,_e,!1)})}function S(ee,ae){for(;ee;){if(ee==ae)return!0;ee=ee.parentNode}return!1}function I(ee,ae){return ee.indexOf(ae)>-1}function R(ee){return ee.trim().split(/\s+/g)}function N(ee,ae,_e){if(ee.indexOf&&!_e)return ee.indexOf(ae);for(var Re=0;Re<ee.length;){if(_e&&ee[Re][_e]==ae||!_e&&ee[Re]===ae)return Re;Re++}return-1}function M(ee){return Array.prototype.slice.call(ee,0)}function F(ee,ae,_e){for(var Re=[],Ge=[],it=0;it<ee.length;){var yt=ae?ee[it][ae]:ee[it];N(Ge,yt)<0&&Re.push(ee[it]),Ge[it]=yt,it++}return _e&&(ae?Re=Re.sort(function(Pt,Ft){return Pt[ae]>Ft[ae]}):Re=Re.sort()),Re}function D(ee,ae){for(var _e,Re,Ge=ae[0].toUpperCase()+ae.slice(1),it=0;it<a.length;){if(_e=a[it],Re=_e?_e+Ge:ae,Re in ee)return Re;it++}return r}var x=1;function B(){return x++}function K(ee){var ae=ee.ownerDocument||ee;return ae.defaultView||ae.parentWindow||e}var U=/mobile|tablet|ip(ad|hone|od)|android/i,G="ontouchstart"in e,W=D(e,"PointerEvent")!==r,q=G&&U.test(navigator.userAgent),H="touch",z="pen",Y="mouse",V="kinect",J=25,Q=1,X=2,ie=4,ce=8,de=1,se=2,me=4,ue=8,he=16,pe=se|me,Oe=ue|he,qe=pe|Oe,et=["x","y"],Ue=["clientX","clientY"];function fe(ee,ae){var _e=this;this.manager=ee,this.callback=ae,this.element=ee.element,this.target=ee.options.inputTarget,this.domHandler=function(Re){A(ee.options.enable,[ee])&&_e.handler(Re)},this.init()}fe.prototype={handler:function(){},init:function(){this.evEl&&T(this.element,this.evEl,this.domHandler),this.evTarget&&T(this.target,this.evTarget,this.domHandler),this.evWin&&T(K(this.element),this.evWin,this.domHandler)},destroy:function(){this.evEl&&$(this.element,this.evEl,this.domHandler),this.evTarget&&$(this.target,this.evTarget,this.domHandler),this.evWin&&$(K(this.element),this.evWin,this.domHandler)}};function Ie(ee){var ae,_e=ee.options.inputClass;return _e?ae=_e:W?ae=Me:q?ae=Lt:G?ae=lt:ae=Ct,new ae(ee,We)}function We(ee,ae,_e){var Re=_e.pointers.length,Ge=_e.changedPointers.length,it=ae&Q&&Re-Ge===0,yt=ae&(ie|ce)&&Re-Ge===0;_e.isFirst=!!it,_e.isFinal=!!yt,it&&(ee.session={}),_e.eventType=ae,$e(ee,_e),ee.emit("hammer.input",_e),ee.recognize(_e),ee.session.prevInput=_e}function $e(ee,ae){var _e=ee.session,Re=ae.pointers,Ge=Re.length;_e.firstInput||(_e.firstInput=re(ae)),Ge>1&&!_e.firstMultiple?_e.firstMultiple=re(ae):Ge===1&&(_e.firstMultiple=!1);var it=_e.firstInput,yt=_e.firstMultiple,It=yt?yt.center:it.center,Pt=ae.center=ge(Re);ae.timeStamp=f(),ae.deltaTime=ae.timeStamp-it.timeStamp,ae.angle=Ee(It,Pt),ae.distance=Pe(It,Pt),Le(_e,ae),ae.offsetDirection=Ze(ae.deltaX,ae.deltaY);var Ft=Be(ae.deltaTime,ae.deltaX,ae.deltaY);ae.overallVelocityX=Ft.x,ae.overallVelocityY=Ft.y,ae.overallVelocity=d(Ft.x)>d(Ft.y)?Ft.x:Ft.y,ae.scale=yt?je(yt.pointers,Re):1,ae.rotation=yt?Ce(yt.pointers,Re):0,ae.maxPointers=_e.prevInput?ae.pointers.length>_e.prevInput.maxPointers?ae.pointers.length:_e.prevInput.maxPointers:ae.pointers.length,ze(_e,ae);var Ht=ee.element;S(ae.srcEvent.target,Ht)&&(Ht=ae.srcEvent.target),ae.target=Ht}function Le(ee,ae){var _e=ae.center,Re=ee.offsetDelta||{},Ge=ee.prevDelta||{},it=ee.prevInput||{};(ae.eventType===Q||it.eventType===ie)&&(Ge=ee.prevDelta={x:it.deltaX||0,y:it.deltaY||0},Re=ee.offsetDelta={x:_e.x,y:_e.y}),ae.deltaX=Ge.x+(_e.x-Re.x),ae.deltaY=Ge.y+(_e.y-Re.y)}function ze(ee,ae){var _e=ee.lastInterval||ae,Re=ae.timeStamp-_e.timeStamp,Ge,it,yt,It;if(ae.eventType!=ce&&(Re>J||_e.velocity===r)){var Pt=ae.deltaX-_e.deltaX,Ft=ae.deltaY-_e.deltaY,Ht=Be(Re,Pt,Ft);it=Ht.x,yt=Ht.y,Ge=d(Ht.x)>d(Ht.y)?Ht.x:Ht.y,It=Ze(Pt,Ft),ee.lastInterval=ae}else Ge=_e.velocity,it=_e.velocityX,yt=_e.velocityY,It=_e.direction;ae.velocity=Ge,ae.velocityX=it,ae.velocityY=yt,ae.direction=It}function re(ee){for(var ae=[],_e=0;_e<ee.pointers.length;)ae[_e]={clientX:u(ee.pointers[_e].clientX),clientY:u(ee.pointers[_e].clientY)},_e++;return{timeStamp:f(),pointers:ae,center:ge(ae),deltaX:ee.deltaX,deltaY:ee.deltaY}}function ge(ee){var ae=ee.length;if(ae===1)return{x:u(ee[0].clientX),y:u(ee[0].clientY)};for(var _e=0,Re=0,Ge=0;Ge<ae;)_e+=ee[Ge].clientX,Re+=ee[Ge].clientY,Ge++;return{x:u(_e/ae),y:u(Re/ae)}}function Be(ee,ae,_e){return{x:ae/ee||0,y:_e/ee||0}}function Ze(ee,ae){return ee===ae?de:d(ee)>=d(ae)?ee<0?se:me:ae<0?ue:he}function Pe(ee,ae,_e){_e||(_e=et);var Re=ae[_e[0]]-ee[_e[0]],Ge=ae[_e[1]]-ee[_e[1]];return Math.sqrt(Re*Re+Ge*Ge)}function Ee(ee,ae,_e){_e||(_e=et);var Re=ae[_e[0]]-ee[_e[0]],Ge=ae[_e[1]]-ee[_e[1]];return Math.atan2(Ge,Re)*180/Math.PI}function Ce(ee,ae){return Ee(ae[1],ae[0],Ue)+Ee(ee[1],ee[0],Ue)}function je(ee,ae){return Pe(ae[0],ae[1],Ue)/Pe(ee[0],ee[1],Ue)}var pt={mousedown:Q,mousemove:X,mouseup:ie},wt="mousedown",ut="mousemove mouseup";function Ct(){this.evEl=wt,this.evWin=ut,this.pressed=!1,fe.apply(this,arguments)}C(Ct,fe,{handler:function(ae){var _e=pt[ae.type];_e&Q&&ae.button===0&&(this.pressed=!0),_e&X&&ae.which!==1&&(_e=ie),this.pressed&&(_e&ie&&(this.pressed=!1),this.callback(this.manager,_e,{pointers:[ae],changedPointers:[ae],pointerType:Y,srcEvent:ae}))}});var xt={pointerdown:Q,pointermove:X,pointerup:ie,pointercancel:ce,pointerout:ce},ht={2:H,3:z,4:Y,5:V},Rt="pointerdown",Ae="pointermove pointerup pointercancel";e.MSPointerEvent&&!e.PointerEvent&&(Rt="MSPointerDown",Ae="MSPointerMove MSPointerUp MSPointerCancel");function Me(){this.evEl=Rt,this.evWin=Ae,fe.apply(this,arguments),this.store=this.manager.session.pointerEvents=[]}C(Me,fe,{handler:function(ae){var _e=this.store,Re=!1,Ge=ae.type.toLowerCase().replace("ms",""),it=xt[Ge],yt=ht[ae.pointerType]||ae.pointerType,It=yt==H,Pt=N(_e,ae.pointerId,"pointerId");it&Q&&(ae.button===0||It)?Pt<0&&(_e.push(ae),Pt=_e.length-1):it&(ie|ce)&&(Re=!0),!(Pt<0)&&(_e[Pt]=ae,this.callback(this.manager,it,{pointers:_e,changedPointers:[ae],pointerType:yt,srcEvent:ae}),Re&&_e.splice(Pt,1))}});var xe={touchstart:Q,touchmove:X,touchend:ie,touchcancel:ce},Qe="touchstart",rt="touchstart touchmove touchend touchcancel";function ot(){this.evTarget=Qe,this.evWin=rt,this.started=!1,fe.apply(this,arguments)}C(ot,fe,{handler:function(ae){var _e=xe[ae.type];if(_e===Q&&(this.started=!0),!!this.started){var Re=ft.call(this,ae,_e);_e&(ie|ce)&&Re[0].length-Re[1].length===0&&(this.started=!1),this.callback(this.manager,_e,{pointers:Re[0],changedPointers:Re[1],pointerType:H,srcEvent:ae})}}});function ft(ee,ae){var _e=M(ee.touches),Re=M(ee.changedTouches);return ae&(ie|ce)&&(_e=F(_e.concat(Re),"identifier",!0)),[_e,Re]}var kt={touchstart:Q,touchmove:X,touchend:ie,touchcancel:ce},$t="touchstart touchmove touchend touchcancel";function Lt(){this.evTarget=$t,this.targetIds={},fe.apply(this,arguments)}C(Lt,fe,{handler:function(ae){var _e=kt[ae.type],Re=Ut.call(this,ae,_e);Re&&this.callback(this.manager,_e,{pointers:Re[0],changedPointers:Re[1],pointerType:H,srcEvent:ae})}});function Ut(ee,ae){var _e=M(ee.touches),Re=this.targetIds;if(ae&(Q|X)&&_e.length===1)return Re[_e[0].identifier]=!0,[_e,_e];var Ge,it,yt=M(ee.changedTouches),It=[],Pt=this.target;if(it=_e.filter(function(Ft){return S(Ft.target,Pt)}),ae===Q)for(Ge=0;Ge<it.length;)Re[it[Ge].identifier]=!0,Ge++;for(Ge=0;Ge<yt.length;)Re[yt[Ge].identifier]&&It.push(yt[Ge]),ae&(ie|ce)&&delete Re[yt[Ge].identifier],Ge++;if(It.length)return[F(it.concat(It),"identifier",!0),It]}var rn=2500,zt=25;function lt(){fe.apply(this,arguments);var ee=E(this.handler,this);this.touch=new Lt(this.manager,ee),this.mouse=new Ct(this.manager,ee),this.primaryTouch=null,this.lastTouches=[]}C(lt,fe,{handler:function(ae,_e,Re){var Ge=Re.pointerType==H,it=Re.pointerType==Y;if(!(it&&Re.sourceCapabilities&&Re.sourceCapabilities.firesTouchEvents)){if(Ge)Cn.call(this,_e,Re);else if(it&&wn.call(this,Re))return;this.callback(ae,_e,Re)}},destroy:function(){this.touch.destroy(),this.mouse.destroy()}});function Cn(ee,ae){ee&Q?(this.primaryTouch=ae.changedPointers[0].identifier,an.call(this,ae)):ee&(ie|ce)&&an.call(this,ae)}function an(ee){var ae=ee.changedPointers[0];if(ae.identifier===this.primaryTouch){var _e={x:ae.clientX,y:ae.clientY};this.lastTouches.push(_e);var Re=this.lastTouches,Ge=function(){var it=Re.indexOf(_e);it>-1&&Re.splice(it,1)};setTimeout(Ge,rn)}}function wn(ee){for(var ae=ee.srcEvent.clientX,_e=ee.srcEvent.clientY,Re=0;Re<this.lastTouches.length;Re++){var Ge=this.lastTouches[Re],it=Math.abs(ae-Ge.x),yt=Math.abs(_e-Ge.y);if(it<=zt&&yt<=zt)return!0}return!1}var vn=D(s.style,"touchAction"),_n=vn!==r,sn="compute",Yt="auto",nn="manipulation",Zt="none",ln="pan-x",cn="pan-y",hn=ve();function un(ee,ae){this.manager=ee,this.set(ae)}un.prototype={set:function(ee){ee==sn&&(ee=this.compute()),_n&&this.manager.element.style&&hn[ee]&&(this.manager.element.style[vn]=ee),this.actions=ee.toLowerCase().trim()},update:function(){this.set(this.manager.options.touchAction)},compute:function(){var ee=[];return p(this.manager.recognizers,function(ae){A(ae.options.enable,[ae])&&(ee=ee.concat(ae.getTouchAction()))}),En(ee.join(" "))},preventDefaults:function(ee){var ae=ee.srcEvent,_e=ee.offsetDirection;if(this.manager.session.prevented){ae.preventDefault();return}var Re=this.actions,Ge=I(Re,Zt)&&!hn[Zt],it=I(Re,cn)&&!hn[cn],yt=I(Re,ln)&&!hn[ln];if(Ge){var It=ee.pointers.length===1,Pt=ee.distance<2,Ft=ee.deltaTime<250;if(It&&Pt&&Ft)return}if(!(yt&&it)&&(Ge||it&&_e&pe||yt&&_e&Oe))return this.preventSrc(ae)},preventSrc:function(ee){this.manager.session.prevented=!0,ee.preventDefault()}};function En(ee){if(I(ee,Zt))return Zt;var ae=I(ee,ln),_e=I(ee,cn);return ae&&_e?Zt:ae||_e?ae?ln:cn:I(ee,nn)?nn:Yt}function ve(){if(!_n)return!1;var ee={},ae=e.CSS&&e.CSS.supports;return["auto","manipulation","pan-y","pan-x","pan-x pan-y","none"].forEach(function(_e){ee[_e]=ae?e.CSS.supports("touch-action",_e):!0}),ee}var ct=1,bt=2,At=4,Wt=8,Ot=Wt,Xt=16,jt=32;function Jt(ee){this.options=b({},this.defaults,ee||{}),this.id=B(),this.manager=null,this.options.enable=k(this.options.enable,!0),this.state=ct,this.simultaneous={},this.requireFail=[]}Jt.prototype={defaults:{},set:function(ee){return b(this.options,ee),this.manager&&this.manager.touchAction.update(),this},recognizeWith:function(ee){if(h(ee,"recognizeWith",this))return this;var ae=this.simultaneous;return ee=St(ee,this),ae[ee.id]||(ae[ee.id]=ee,ee.recognizeWith(this)),this},dropRecognizeWith:function(ee){return h(ee,"dropRecognizeWith",this)?this:(ee=St(ee,this),delete this.simultaneous[ee.id],this)},requireFailure:function(ee){if(h(ee,"requireFailure",this))return this;var ae=this.requireFail;return ee=St(ee,this),N(ae,ee)===-1&&(ae.push(ee),ee.requireFailure(this)),this},dropRequireFailure:function(ee){if(h(ee,"dropRequireFailure",this))return this;ee=St(ee,this);var ae=N(this.requireFail,ee);return ae>-1&&this.requireFail.splice(ae,1),this},hasRequireFailures:function(){return this.requireFail.length>0},canRecognizeWith:function(ee){return!!this.simultaneous[ee.id]},emit:function(ee){var ae=this,_e=this.state;function Re(Ge){ae.manager.emit(Ge,ee)}_e<Wt&&Re(ae.options.event+yn(_e)),Re(ae.options.event),ee.additionalEvent&&Re(ee.additionalEvent),_e>=Wt&&Re(ae.options.event+yn(_e))},tryEmit:function(ee){if(this.canEmit())return this.emit(ee);this.state=jt},canEmit:function(){for(var ee=0;ee<this.requireFail.length;){if(!(this.requireFail[ee].state&(jt|ct)))return!1;ee++}return!0},recognize:function(ee){var ae=b({},ee);if(!A(this.options.enable,[this,ae])){this.reset(),this.state=jt;return}this.state&(Ot|Xt|jt)&&(this.state=ct),this.state=this.process(ae),this.state&(bt|At|Wt|Xt)&&this.tryEmit(ae)},process:function(ee){},getTouchAction:function(){},reset:function(){}};function yn(ee){return ee&Xt?"cancel":ee&Wt?"end":ee&At?"move":ee&bt?"start":""}function pn(ee){return ee==he?"down":ee==ue?"up":ee==se?"left":ee==me?"right":""}function St(ee,ae){var _e=ae.manager;return _e?_e.get(ee):ee}function ne(){Jt.apply(this,arguments)}C(ne,Jt,{defaults:{pointers:1},attrTest:function(ee){var ae=this.options.pointers;return ae===0||ee.pointers.length===ae},process:function(ee){var ae=this.state,_e=ee.eventType,Re=ae&(bt|At),Ge=this.attrTest(ee);return Re&&(_e&ce||!Ge)?ae|Xt:Re||Ge?_e&ie?ae|Wt:ae&bt?ae|At:bt:jt}});function ye(){ne.apply(this,arguments),this.pX=null,this.pY=null}C(ye,ne,{defaults:{event:"pan",threshold:10,pointers:1,direction:qe},getTouchAction:function(){var ee=this.options.direction,ae=[];return ee&pe&&ae.push(cn),ee&Oe&&ae.push(ln),ae},directionTest:function(ee){var ae=this.options,_e=!0,Re=ee.distance,Ge=ee.direction,it=ee.deltaX,yt=ee.deltaY;return Ge&ae.direction||(ae.direction&pe?(Ge=it===0?de:it<0?se:me,_e=it!=this.pX,Re=Math.abs(ee.deltaX)):(Ge=yt===0?de:yt<0?ue:he,_e=yt!=this.pY,Re=Math.abs(ee.deltaY))),ee.direction=Ge,_e&&Re>ae.threshold&&Ge&ae.direction},attrTest:function(ee){return ne.prototype.attrTest.call(this,ee)&&(this.state&bt||!(this.state&bt)&&this.directionTest(ee))},emit:function(ee){this.pX=ee.deltaX,this.pY=ee.deltaY;var ae=pn(ee.direction);ae&&(ee.additionalEvent=this.options.event+ae),this._super.emit.call(this,ee)}});function le(){ne.apply(this,arguments)}C(le,ne,{defaults:{event:"pinch",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(ee){return this._super.attrTest.call(this,ee)&&(Math.abs(ee.scale-1)>this.options.threshold||this.state&bt)},emit:function(ee){if(ee.scale!==1){var ae=ee.scale<1?"in":"out";ee.additionalEvent=this.options.event+ae}this._super.emit.call(this,ee)}});function we(){Jt.apply(this,arguments),this._timer=null,this._input=null}C(we,Jt,{defaults:{event:"press",pointers:1,time:251,threshold:9},getTouchAction:function(){return[Yt]},process:function(ee){var ae=this.options,_e=ee.pointers.length===ae.pointers,Re=ee.distance<ae.threshold,Ge=ee.deltaTime>ae.time;if(this._input=ee,!Re||!_e||ee.eventType&(ie|ce)&&!Ge)this.reset();else if(ee.eventType&Q)this.reset(),this._timer=m(function(){this.state=Ot,this.tryEmit()},ae.time,this);else if(ee.eventType&ie)return Ot;return jt},reset:function(){clearTimeout(this._timer)},emit:function(ee){this.state===Ot&&(ee&&ee.eventType&ie?this.manager.emit(this.options.event+"up",ee):(this._input.timeStamp=f(),this.manager.emit(this.options.event,this._input)))}});function Se(){ne.apply(this,arguments)}C(Se,ne,{defaults:{event:"rotate",threshold:0,pointers:2},getTouchAction:function(){return[Zt]},attrTest:function(ee){return this._super.attrTest.call(this,ee)&&(Math.abs(ee.rotation)>this.options.threshold||this.state&bt)}});function be(){ne.apply(this,arguments)}C(be,ne,{defaults:{event:"swipe",threshold:10,velocity:.3,direction:pe|Oe,pointers:1},getTouchAction:function(){return ye.prototype.getTouchAction.call(this)},attrTest:function(ee){var ae=this.options.direction,_e;return ae&(pe|Oe)?_e=ee.overallVelocity:ae&pe?_e=ee.overallVelocityX:ae&Oe&&(_e=ee.overallVelocityY),this._super.attrTest.call(this,ee)&&ae&ee.offsetDirection&&ee.distance>this.options.threshold&&ee.maxPointers==this.options.pointers&&d(_e)>this.options.velocity&&ee.eventType&ie},emit:function(ee){var ae=pn(ee.offsetDirection);ae&&this.manager.emit(this.options.event+ae,ee),this.manager.emit(this.options.event,ee)}});function Fe(){Jt.apply(this,arguments),this.pTime=!1,this.pCenter=!1,this._timer=null,this._input=null,this.count=0}C(Fe,Jt,{defaults:{event:"tap",pointers:1,taps:1,interval:300,time:250,threshold:9,posThreshold:10},getTouchAction:function(){return[nn]},process:function(ee){var ae=this.options,_e=ee.pointers.length===ae.pointers,Re=ee.distance<ae.threshold,Ge=ee.deltaTime<ae.time;if(this.reset(),ee.eventType&Q&&this.count===0)return this.failTimeout();if(Re&&Ge&&_e){if(ee.eventType!=ie)return this.failTimeout();var it=this.pTime?ee.timeStamp-this.pTime<ae.interval:!0,yt=!this.pCenter||Pe(this.pCenter,ee.center)<ae.posThreshold;this.pTime=ee.timeStamp,this.pCenter=ee.center,!yt||!it?this.count=1:this.count+=1,this._input=ee;var It=this.count%ae.taps;if(It===0)return this.hasRequireFailures()?(this._timer=m(function(){this.state=Ot,this.tryEmit()},ae.interval,this),bt):Ot}return jt},failTimeout:function(){return this._timer=m(function(){this.state=jt},this.options.interval,this),jt},reset:function(){clearTimeout(this._timer)},emit:function(){this.state==Ot&&(this._input.tapCount=this.count,this.manager.emit(this.options.event,this._input))}});function Ve(ee,ae){return ae=ae||{},ae.recognizers=k(ae.recognizers,Ve.defaults.preset),new tt(ee,ae)}Ve.VERSION="2.0.7",Ve.defaults={domEvents:!1,touchAction:sn,enable:!0,inputTarget:null,inputClass:null,preset:[[Se,{enable:!1}],[le,{enable:!1},["rotate"]],[be,{direction:pe}],[ye,{direction:pe},["swipe"]],[Fe],[Fe,{event:"doubletap",taps:2},["tap"]],[we]],cssProps:{userSelect:"none",touchSelect:"none",touchCallout:"none",contentZooming:"none",userDrag:"none",tapHighlightColor:"rgba(0,0,0,0)"}};var Xe=1,Ye=2;function tt(ee,ae){this.options=b({},Ve.defaults,ae||{}),this.options.inputTarget=this.options.inputTarget||ee,this.handlers={},this.session={},this.recognizers=[],this.oldCssProps={},this.element=ee,this.input=Ie(this),this.touchAction=new un(this,this.options.touchAction),at(this,!0),p(this.options.recognizers,function(_e){var Re=this.add(new _e[0](_e[1]));_e[2]&&Re.recognizeWith(_e[2]),_e[3]&&Re.requireFailure(_e[3])},this)}tt.prototype={set:function(ee){return b(this.options,ee),ee.touchAction&&this.touchAction.update(),ee.inputTarget&&(this.input.destroy(),this.input.target=ee.inputTarget,this.input.init()),this},stop:function(ee){this.session.stopped=ee?Ye:Xe},recognize:function(ee){var ae=this.session;if(!ae.stopped){this.touchAction.preventDefaults(ee);var _e,Re=this.recognizers,Ge=ae.curRecognizer;(!Ge||Ge&&Ge.state&Ot)&&(Ge=ae.curRecognizer=null);for(var it=0;it<Re.length;)_e=Re[it],ae.stopped!==Ye&&(!Ge||_e==Ge||_e.canRecognizeWith(Ge))?_e.recognize(ee):_e.reset(),!Ge&&_e.state&(bt|At|Wt)&&(Ge=ae.curRecognizer=_e),it++}},get:function(ee){if(ee instanceof Jt)return ee;for(var ae=this.recognizers,_e=0;_e<ae.length;_e++)if(ae[_e].options.event==ee)return ae[_e];return null},add:function(ee){if(h(ee,"add",this))return this;var ae=this.get(ee.options.event);return ae&&this.remove(ae),this.recognizers.push(ee),ee.manager=this,this.touchAction.update(),ee},remove:function(ee){if(h(ee,"remove",this))return this;if(ee=this.get(ee),ee){var ae=this.recognizers,_e=N(ae,ee);_e!==-1&&(ae.splice(_e,1),this.touchAction.update())}return this},on:function(ee,ae){if(ee!==r&&ae!==r){var _e=this.handlers;return p(R(ee),function(Re){_e[Re]=_e[Re]||[],_e[Re].push(ae)}),this}},off:function(ee,ae){if(ee!==r){var _e=this.handlers;return p(R(ee),function(Re){ae?_e[Re]&&_e[Re].splice(N(_e[Re],ae),1):delete _e[Re]}),this}},emit:function(ee,ae){this.options.domEvents&&mt(ee,ae);var _e=this.handlers[ee]&&this.handlers[ee].slice();if(!(!_e||!_e.length)){ae.type=ee,ae.preventDefault=function(){ae.srcEvent.preventDefault()};for(var Re=0;Re<_e.length;)_e[Re](ae),Re++}},destroy:function(){this.element&&at(this,!1),this.handlers={},this.session={},this.input.destroy(),this.element=null}};function at(ee,ae){var _e=ee.element;if(_e.style){var Re;p(ee.options.cssProps,function(Ge,it){Re=D(_e.style,it),ae?(ee.oldCssProps[Re]=_e.style[Re],_e.style[Re]=Ge):_e.style[Re]=ee.oldCssProps[Re]||""}),ae||(ee.oldCssProps={})}}function mt(ee,ae){var _e=t.createEvent("Event");_e.initEvent(ee,!0,!0),_e.gesture=ae,ae.target.dispatchEvent(_e)}b(Ve,{INPUT_START:Q,INPUT_MOVE:X,INPUT_END:ie,INPUT_CANCEL:ce,STATE_POSSIBLE:ct,STATE_BEGAN:bt,STATE_CHANGED:At,STATE_ENDED:Wt,STATE_RECOGNIZED:Ot,STATE_CANCELLED:Xt,STATE_FAILED:jt,DIRECTION_NONE:de,DIRECTION_LEFT:se,DIRECTION_RIGHT:me,DIRECTION_UP:ue,DIRECTION_DOWN:he,DIRECTION_HORIZONTAL:pe,DIRECTION_VERTICAL:Oe,DIRECTION_ALL:qe,Manager:tt,Input:fe,TouchAction:un,TouchInput:Lt,MouseInput:Ct,PointerEventInput:Me,TouchMouseInput:lt,SingleTouchInput:ot,Recognizer:Jt,AttrRecognizer:ne,Tap:Fe,Pan:ye,Swipe:be,Pinch:le,Rotate:Se,Press:we,on:T,off:$,each:p,merge:y,extend:v,assign:b,inherit:C,bindFn:E,prefixed:D});var _t=typeof e<"u"?e:typeof self<"u"?self:{};_t.Hammer=Ve,typeof r=="function"&&r.amd?r(function(){return Ve}):o.exports?o.exports=Ve:e[n]=Ve})(window,document,"Hammer")})(hammer);var hammerExports=hammer.exports;const Hammer=getDefaultExportFromCjs(hammerExports);/*!
 * Chart.js v3.8.2
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */const requestAnimFrame=function(){return typeof window>"u"?function(o){return o()}:window.requestAnimationFrame}();function throttled(o,e,t){const n=t||(s=>Array.prototype.slice.call(s));let r=!1,a=[];return function(...s){a=n(s),r||(r=!0,requestAnimFrame.call(window,()=>{r=!1,o.apply(e,a)}))}}function debounce$1(o,e){let t;return function(...n){return e?(clearTimeout(t),t=setTimeout(o,e,n)):o.apply(this,n),e}}const _toLeftRightCenter=o=>o==="start"?"left":o==="end"?"right":"center",_alignStartEnd=(o,e,t)=>o==="start"?e:o==="end"?t:(e+t)/2,_textX=(o,e,t,n)=>o===(n?"left":"right")?t:o==="center"?(e+t)/2:e;function noop(){}const uid=function(){let o=0;return function(){return o++}}();function isNullOrUndef(o){return o===null||typeof o>"u"}function isArray(o){if(Array.isArray&&Array.isArray(o))return!0;const e=Object.prototype.toString.call(o);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function isObject(o){return o!==null&&Object.prototype.toString.call(o)==="[object Object]"}const isNumberFinite=o=>(typeof o=="number"||o instanceof Number)&&isFinite(+o);function finiteOrDefault(o,e){return isNumberFinite(o)?o:e}function valueOrDefault(o,e){return typeof o>"u"?e:o}const toPercentage=(o,e)=>typeof o=="string"&&o.endsWith("%")?parseFloat(o)/100:o/e,toDimension=(o,e)=>typeof o=="string"&&o.endsWith("%")?parseFloat(o)/100*e:+o;function callback(o,e,t){if(o&&typeof o.call=="function")return o.apply(t,e)}function each(o,e,t,n){let r,a,s;if(isArray(o))if(a=o.length,n)for(r=a-1;r>=0;r--)e.call(t,o[r],r);else for(r=0;r<a;r++)e.call(t,o[r],r);else if(isObject(o))for(s=Object.keys(o),a=s.length,r=0;r<a;r++)e.call(t,o[s[r]],s[r])}function _elementsEqual(o,e){let t,n,r,a;if(!o||!e||o.length!==e.length)return!1;for(t=0,n=o.length;t<n;++t)if(r=o[t],a=e[t],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function clone$1(o){if(isArray(o))return o.map(clone$1);if(isObject(o)){const e=Object.create(null),t=Object.keys(o),n=t.length;let r=0;for(;r<n;++r)e[t[r]]=clone$1(o[t[r]]);return e}return o}function isValidKey(o){return["__proto__","prototype","constructor"].indexOf(o)===-1}function _merger(o,e,t,n){if(!isValidKey(o))return;const r=e[o],a=t[o];isObject(r)&&isObject(a)?merge(r,a,n):e[o]=clone$1(a)}function merge(o,e,t){const n=isArray(e)?e:[e],r=n.length;if(!isObject(o))return o;t=t||{};const a=t.merger||_merger;for(let s=0;s<r;++s){if(e=n[s],!isObject(e))continue;const l=Object.keys(e);for(let u=0,d=l.length;u<d;++u)a(l[u],o,e,t)}return o}function mergeIf(o,e){return merge(o,e,{merger:_mergerIf})}function _mergerIf(o,e,t){if(!isValidKey(o))return;const n=e[o],r=t[o];isObject(n)&&isObject(r)?mergeIf(n,r):Object.prototype.hasOwnProperty.call(e,o)||(e[o]=clone$1(r))}const emptyString="",dot=".";function indexOfDotOrLength(o,e){const t=o.indexOf(dot,e);return t===-1?o.length:t}function resolveObjectKey(o,e){if(e===emptyString)return o;let t=0,n=indexOfDotOrLength(e,t);for(;o&&n>t;)o=o[e.slice(t,n)],t=n+1,n=indexOfDotOrLength(e,t);return o}function _capitalize(o){return o.charAt(0).toUpperCase()+o.slice(1)}const defined=o=>typeof o<"u",isFunction=o=>typeof o=="function",setsEqual=(o,e)=>{if(o.size!==e.size)return!1;for(const t of o)if(!e.has(t))return!1;return!0};function _isClickEvent(o){return o.type==="mouseup"||o.type==="click"||o.type==="contextmenu"}const PI=Math.PI,TAU=2*PI,PITAU=TAU+PI,INFINITY=Number.POSITIVE_INFINITY,RAD_PER_DEG=PI/180,HALF_PI=PI/2,QUARTER_PI=PI/4,TWO_THIRDS_PI=PI*2/3,log10=Math.log10,sign=Math.sign;function niceNum(o){const e=Math.round(o);o=almostEquals(o,e,o/1e3)?e:o;const t=Math.pow(10,Math.floor(log10(o))),n=o/t;return(n<=1?1:n<=2?2:n<=5?5:10)*t}function _factorize(o){const e=[],t=Math.sqrt(o);let n;for(n=1;n<t;n++)o%n===0&&(e.push(n),e.push(o/n));return t===(t|0)&&e.push(t),e.sort((r,a)=>r-a).pop(),e}function isNumber(o){return!isNaN(parseFloat(o))&&isFinite(o)}function almostEquals(o,e,t){return Math.abs(o-e)<t}function almostWhole(o,e){const t=Math.round(o);return t-e<=o&&t+e>=o}function _setMinAndMaxByKey(o,e,t){let n,r,a;for(n=0,r=o.length;n<r;n++)a=o[n][t],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function toRadians(o){return o*(PI/180)}function toDegrees(o){return o*(180/PI)}function _decimalPlaces(o){if(!isNumberFinite(o))return;let e=1,t=0;for(;Math.round(o*e)/e!==o;)e*=10,t++;return t}function getAngleFromPoint(o,e){const t=e.x-o.x,n=e.y-o.y,r=Math.sqrt(t*t+n*n);let a=Math.atan2(n,t);return a<-.5*PI&&(a+=TAU),{angle:a,distance:r}}function distanceBetweenPoints(o,e){return Math.sqrt(Math.pow(e.x-o.x,2)+Math.pow(e.y-o.y,2))}function _angleDiff(o,e){return(o-e+PITAU)%TAU-PI}function _normalizeAngle(o){return(o%TAU+TAU)%TAU}function _angleBetween(o,e,t,n){const r=_normalizeAngle(o),a=_normalizeAngle(e),s=_normalizeAngle(t),l=_normalizeAngle(a-r),u=_normalizeAngle(s-r),d=_normalizeAngle(r-a),f=_normalizeAngle(r-s);return r===a||r===s||n&&a===s||l>u&&d<f}function _limitValue(o,e,t){return Math.max(e,Math.min(t,o))}function _int16Range(o){return _limitValue(o,-32768,32767)}function _isBetween(o,e,t,n=1e-6){return o>=Math.min(e,t)-n&&o<=Math.max(e,t)+n}const atEdge=o=>o===0||o===1,elasticIn=(o,e,t)=>-(Math.pow(2,10*(o-=1))*Math.sin((o-e)*TAU/t)),elasticOut=(o,e,t)=>Math.pow(2,-10*o)*Math.sin((o-e)*TAU/t)+1,effects={linear:o=>o,easeInQuad:o=>o*o,easeOutQuad:o=>-o*(o-2),easeInOutQuad:o=>(o/=.5)<1?.5*o*o:-.5*(--o*(o-2)-1),easeInCubic:o=>o*o*o,easeOutCubic:o=>(o-=1)*o*o+1,easeInOutCubic:o=>(o/=.5)<1?.5*o*o*o:.5*((o-=2)*o*o+2),easeInQuart:o=>o*o*o*o,easeOutQuart:o=>-((o-=1)*o*o*o-1),easeInOutQuart:o=>(o/=.5)<1?.5*o*o*o*o:-.5*((o-=2)*o*o*o-2),easeInQuint:o=>o*o*o*o*o,easeOutQuint:o=>(o-=1)*o*o*o*o+1,easeInOutQuint:o=>(o/=.5)<1?.5*o*o*o*o*o:.5*((o-=2)*o*o*o*o+2),easeInSine:o=>-Math.cos(o*HALF_PI)+1,easeOutSine:o=>Math.sin(o*HALF_PI),easeInOutSine:o=>-.5*(Math.cos(PI*o)-1),easeInExpo:o=>o===0?0:Math.pow(2,10*(o-1)),easeOutExpo:o=>o===1?1:-Math.pow(2,-10*o)+1,easeInOutExpo:o=>atEdge(o)?o:o<.5?.5*Math.pow(2,10*(o*2-1)):.5*(-Math.pow(2,-10*(o*2-1))+2),easeInCirc:o=>o>=1?o:-(Math.sqrt(1-o*o)-1),easeOutCirc:o=>Math.sqrt(1-(o-=1)*o),easeInOutCirc:o=>(o/=.5)<1?-.5*(Math.sqrt(1-o*o)-1):.5*(Math.sqrt(1-(o-=2)*o)+1),easeInElastic:o=>atEdge(o)?o:elasticIn(o,.075,.3),easeOutElastic:o=>atEdge(o)?o:elasticOut(o,.075,.3),easeInOutElastic(o){return atEdge(o)?o:o<.5?.5*elasticIn(o*2,.1125,.45):.5+.5*elasticOut(o*2-1,.1125,.45)},easeInBack(o){return o*o*((1.70158+1)*o-1.70158)},easeOutBack(o){return(o-=1)*o*((1.70158+1)*o+1.70158)+1},easeInOutBack(o){let e=1.70158;return(o/=.5)<1?.5*(o*o*(((e*=1.525)+1)*o-e)):.5*((o-=2)*o*(((e*=1.525)+1)*o+e)+2)},easeInBounce:o=>1-effects.easeOutBounce(1-o),easeOutBounce(o){return o<1/2.75?7.5625*o*o:o<2/2.75?7.5625*(o-=1.5/2.75)*o+.75:o<2.5/2.75?7.5625*(o-=2.25/2.75)*o+.9375:7.5625*(o-=2.625/2.75)*o+.984375},easeInOutBounce:o=>o<.5?effects.easeInBounce(o*2)*.5:effects.easeOutBounce(o*2-1)*.5+.5};/*!
 * @kurkle/color v0.2.1
 * https://github.com/kurkle/color#readme
 * (c) 2022 Jukka Kurkela
 * Released under the MIT License
 */function round(o){return o+.5|0}const lim=(o,e,t)=>Math.max(Math.min(o,t),e);function p2b(o){return lim(round(o*2.55),0,255)}function n2b(o){return lim(round(o*255),0,255)}function b2n(o){return lim(round(o/2.55)/100,0,1)}function n2p(o){return lim(round(o*100),0,100)}const map$1={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},hex=[..."0123456789ABCDEF"],h1=o=>hex[o&15],h2=o=>hex[(o&240)>>4]+hex[o&15],eq=o=>(o&240)>>4===(o&15),isShort=o=>eq(o.r)&&eq(o.g)&&eq(o.b)&&eq(o.a);function hexParse(o){var e=o.length,t;return o[0]==="#"&&(e===4||e===5?t={r:255&map$1[o[1]]*17,g:255&map$1[o[2]]*17,b:255&map$1[o[3]]*17,a:e===5?map$1[o[4]]*17:255}:(e===7||e===9)&&(t={r:map$1[o[1]]<<4|map$1[o[2]],g:map$1[o[3]]<<4|map$1[o[4]],b:map$1[o[5]]<<4|map$1[o[6]],a:e===9?map$1[o[7]]<<4|map$1[o[8]]:255})),t}const alpha=(o,e)=>o<255?e(o):"";function hexString(o){var e=isShort(o)?h1:h2;return o?"#"+e(o.r)+e(o.g)+e(o.b)+alpha(o.a,e):void 0}const HUE_RE=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function hsl2rgbn(o,e,t){const n=e*Math.min(t,1-t),r=(a,s=(a+o/30)%12)=>t-n*Math.max(Math.min(s-3,9-s,1),-1);return[r(0),r(8),r(4)]}function hsv2rgbn(o,e,t){const n=(r,a=(r+o/60)%6)=>t-t*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function hwb2rgbn(o,e,t){const n=hsl2rgbn(o,1,.5);let r;for(e+t>1&&(r=1/(e+t),e*=r,t*=r),r=0;r<3;r++)n[r]*=1-e-t,n[r]+=e;return n}function hueValue(o,e,t,n,r){return o===r?(e-t)/n+(e<t?6:0):e===r?(t-o)/n+2:(o-e)/n+4}function rgb2hsl(o){const t=o.r/255,n=o.g/255,r=o.b/255,a=Math.max(t,n,r),s=Math.min(t,n,r),l=(a+s)/2;let u,d,f;return a!==s&&(f=a-s,d=l>.5?f/(2-a-s):f/(a+s),u=hueValue(t,n,r,f,a),u=u*60+.5),[u|0,d||0,l]}function calln(o,e,t,n){return(Array.isArray(e)?o(e[0],e[1],e[2]):o(e,t,n)).map(n2b)}function hsl2rgb(o,e,t){return calln(hsl2rgbn,o,e,t)}function hwb2rgb(o,e,t){return calln(hwb2rgbn,o,e,t)}function hsv2rgb(o,e,t){return calln(hsv2rgbn,o,e,t)}function hue(o){return(o%360+360)%360}function hueParse(o){const e=HUE_RE.exec(o);let t=255,n;if(!e)return;e[5]!==n&&(t=e[6]?p2b(+e[5]):n2b(+e[5]));const r=hue(+e[2]),a=+e[3]/100,s=+e[4]/100;return e[1]==="hwb"?n=hwb2rgb(r,a,s):e[1]==="hsv"?n=hsv2rgb(r,a,s):n=hsl2rgb(r,a,s),{r:n[0],g:n[1],b:n[2],a:t}}function rotate(o,e){var t=rgb2hsl(o);t[0]=hue(t[0]+e),t=hsl2rgb(t),o.r=t[0],o.g=t[1],o.b=t[2]}function hslString(o){if(!o)return;const e=rgb2hsl(o),t=e[0],n=n2p(e[1]),r=n2p(e[2]);return o.a<255?`hsla(${t}, ${n}%, ${r}%, ${b2n(o.a)})`:`hsl(${t}, ${n}%, ${r}%)`}const map$2={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},names$1={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function unpack(){const o={},e=Object.keys(names$1),t=Object.keys(map$2);let n,r,a,s,l;for(n=0;n<e.length;n++){for(s=l=e[n],r=0;r<t.length;r++)a=t[r],l=l.replace(a,map$2[a]);a=parseInt(names$1[s],16),o[l]=[a>>16&255,a>>8&255,a&255]}return o}let names$2;function nameParse(o){names$2||(names$2=unpack(),names$2.transparent=[0,0,0,0]);const e=names$2[o.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const RGB_RE=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function rgbParse(o){const e=RGB_RE.exec(o);let t=255,n,r,a;if(e){if(e[7]!==n){const s=+e[7];t=e[8]?p2b(s):lim(s*255,0,255)}return n=+e[1],r=+e[3],a=+e[5],n=255&(e[2]?p2b(n):lim(n,0,255)),r=255&(e[4]?p2b(r):lim(r,0,255)),a=255&(e[6]?p2b(a):lim(a,0,255)),{r:n,g:r,b:a,a:t}}}function rgbString(o){return o&&(o.a<255?`rgba(${o.r}, ${o.g}, ${o.b}, ${b2n(o.a)})`:`rgb(${o.r}, ${o.g}, ${o.b})`)}const to=o=>o<=.0031308?o*12.92:Math.pow(o,1/2.4)*1.055-.055,from=o=>o<=.04045?o/12.92:Math.pow((o+.055)/1.055,2.4);function interpolate$1(o,e,t){const n=from(b2n(o.r)),r=from(b2n(o.g)),a=from(b2n(o.b));return{r:n2b(to(n+t*(from(b2n(e.r))-n))),g:n2b(to(r+t*(from(b2n(e.g))-r))),b:n2b(to(a+t*(from(b2n(e.b))-a))),a:o.a+t*(e.a-o.a)}}function modHSL(o,e,t){if(o){let n=rgb2hsl(o);n[e]=Math.max(0,Math.min(n[e]+n[e]*t,e===0?360:1)),n=hsl2rgb(n),o.r=n[0],o.g=n[1],o.b=n[2]}}function clone(o,e){return o&&Object.assign(e||{},o)}function fromObject(o){var e={r:0,g:0,b:0,a:255};return Array.isArray(o)?o.length>=3&&(e={r:o[0],g:o[1],b:o[2],a:255},o.length>3&&(e.a=n2b(o[3]))):(e=clone(o,{r:0,g:0,b:0,a:1}),e.a=n2b(e.a)),e}function functionParse(o){return o.charAt(0)==="r"?rgbParse(o):hueParse(o)}class Color{constructor(e){if(e instanceof Color)return e;const t=typeof e;let n;t==="object"?n=fromObject(e):t==="string"&&(n=hexParse(e)||nameParse(e)||functionParse(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=clone(this._rgb);return e&&(e.a=b2n(e.a)),e}set rgb(e){this._rgb=fromObject(e)}rgbString(){return this._valid?rgbString(this._rgb):void 0}hexString(){return this._valid?hexString(this._rgb):void 0}hslString(){return this._valid?hslString(this._rgb):void 0}mix(e,t){if(e){const n=this.rgb,r=e.rgb;let a;const s=t===a?.5:t,l=2*s-1,u=n.a-r.a,d=((l*u===-1?l:(l+u)/(1+l*u))+1)/2;a=1-d,n.r=255&d*n.r+a*r.r+.5,n.g=255&d*n.g+a*r.g+.5,n.b=255&d*n.b+a*r.b+.5,n.a=s*n.a+(1-s)*r.a,this.rgb=n}return this}interpolate(e,t){return e&&(this._rgb=interpolate$1(this._rgb,e._rgb,t)),this}clone(){return new Color(this.rgb)}alpha(e){return this._rgb.a=n2b(e),this}clearer(e){const t=this._rgb;return t.a*=1-e,this}greyscale(){const e=this._rgb,t=round(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=t,this}opaquer(e){const t=this._rgb;return t.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return modHSL(this._rgb,2,e),this}darken(e){return modHSL(this._rgb,2,-e),this}saturate(e){return modHSL(this._rgb,1,e),this}desaturate(e){return modHSL(this._rgb,1,-e),this}rotate(e){return rotate(this._rgb,e),this}}function index_esm(o){return new Color(o)}function isPatternOrGradient(o){if(o&&typeof o=="object"){const e=o.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function color(o){return isPatternOrGradient(o)?o:index_esm(o)}function getHoverColor(o){return isPatternOrGradient(o)?o:index_esm(o).saturate(.5).darken(.1).hexString()}const overrides=Object.create(null),descriptors=Object.create(null);function getScope$1(o,e){if(!e)return o;const t=e.split(".");for(let n=0,r=t.length;n<r;++n){const a=t[n];o=o[a]||(o[a]=Object.create(null))}return o}function set(o,e,t){return typeof e=="string"?merge(getScope$1(o,e),t):merge(getScope$1(o,""),e)}class Defaults{constructor(e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,n)=>getHoverColor(n.backgroundColor),this.hoverBorderColor=(t,n)=>getHoverColor(n.borderColor),this.hoverColor=(t,n)=>getHoverColor(n.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e)}set(e,t){return set(this,e,t)}get(e){return getScope$1(this,e)}describe(e,t){return set(descriptors,e,t)}override(e,t){return set(overrides,e,t)}route(e,t,n,r){const a=getScope$1(this,e),s=getScope$1(this,n),l="_"+t;Object.defineProperties(a,{[l]:{value:a[t],writable:!0},[t]:{enumerable:!0,get(){const u=this[l],d=s[r];return isObject(u)?Object.assign({},d,u):valueOrDefault(u,d)},set(u){this[l]=u}}})}}var defaults=new Defaults({_scriptable:o=>!o.startsWith("on"),_indexable:o=>o!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}});function toFontString(o){return!o||isNullOrUndef(o.size)||isNullOrUndef(o.family)?null:(o.style?o.style+" ":"")+(o.weight?o.weight+" ":"")+o.size+"px "+o.family}function _measureText(o,e,t,n,r){let a=e[r];return a||(a=e[r]=o.measureText(r).width,t.push(r)),a>n&&(n=a),n}function _longestText(o,e,t,n){n=n||{};let r=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},a=n.garbageCollect=[],n.font=e),o.save(),o.font=e;let s=0;const l=t.length;let u,d,f,m,h;for(u=0;u<l;u++)if(m=t[u],m!=null&&isArray(m)!==!0)s=_measureText(o,r,a,s,m);else if(isArray(m))for(d=0,f=m.length;d<f;d++)h=m[d],h!=null&&!isArray(h)&&(s=_measureText(o,r,a,s,h));o.restore();const p=a.length/2;if(p>t.length){for(u=0;u<p;u++)delete r[a[u]];a.splice(0,p)}return s}function _alignPixel(o,e,t){const n=o.currentDevicePixelRatio,r=t!==0?Math.max(t/2,.5):0;return Math.round((e-r)*n)/n+r}function clearCanvas(o,e){e=e||o.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,o.width,o.height),e.restore()}function drawPoint(o,e,t,n){drawPointLegend(o,e,t,n,null)}function drawPointLegend(o,e,t,n,r){let a,s,l,u,d,f;const m=e.pointStyle,h=e.rotation,p=e.radius;let g=(h||0)*RAD_PER_DEG;if(m&&typeof m=="object"&&(a=m.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){o.save(),o.translate(t,n),o.rotate(g),o.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),o.restore();return}if(!(isNaN(p)||p<=0)){switch(o.beginPath(),m){default:r?o.ellipse(t,n,r/2,p,0,0,TAU):o.arc(t,n,p,0,TAU),o.closePath();break;case"triangle":o.moveTo(t+Math.sin(g)*p,n-Math.cos(g)*p),g+=TWO_THIRDS_PI,o.lineTo(t+Math.sin(g)*p,n-Math.cos(g)*p),g+=TWO_THIRDS_PI,o.lineTo(t+Math.sin(g)*p,n-Math.cos(g)*p),o.closePath();break;case"rectRounded":d=p*.516,u=p-d,s=Math.cos(g+QUARTER_PI)*u,l=Math.sin(g+QUARTER_PI)*u,o.arc(t-s,n-l,d,g-PI,g-HALF_PI),o.arc(t+l,n-s,d,g-HALF_PI,g),o.arc(t+s,n+l,d,g,g+HALF_PI),o.arc(t-l,n+s,d,g+HALF_PI,g+PI),o.closePath();break;case"rect":if(!h){u=Math.SQRT1_2*p,f=r?r/2:u,o.rect(t-f,n-u,2*f,2*u);break}g+=QUARTER_PI;case"rectRot":s=Math.cos(g)*p,l=Math.sin(g)*p,o.moveTo(t-s,n-l),o.lineTo(t+l,n-s),o.lineTo(t+s,n+l),o.lineTo(t-l,n+s),o.closePath();break;case"crossRot":g+=QUARTER_PI;case"cross":s=Math.cos(g)*p,l=Math.sin(g)*p,o.moveTo(t-s,n-l),o.lineTo(t+s,n+l),o.moveTo(t+l,n-s),o.lineTo(t-l,n+s);break;case"star":s=Math.cos(g)*p,l=Math.sin(g)*p,o.moveTo(t-s,n-l),o.lineTo(t+s,n+l),o.moveTo(t+l,n-s),o.lineTo(t-l,n+s),g+=QUARTER_PI,s=Math.cos(g)*p,l=Math.sin(g)*p,o.moveTo(t-s,n-l),o.lineTo(t+s,n+l),o.moveTo(t+l,n-s),o.lineTo(t-l,n+s);break;case"line":s=r?r/2:Math.cos(g)*p,l=Math.sin(g)*p,o.moveTo(t-s,n-l),o.lineTo(t+s,n+l);break;case"dash":o.moveTo(t,n),o.lineTo(t+Math.cos(g)*p,n+Math.sin(g)*p);break}o.fill(),e.borderWidth>0&&o.stroke()}}function _isPointInArea(o,e,t){return t=t||.5,!e||o&&o.x>e.left-t&&o.x<e.right+t&&o.y>e.top-t&&o.y<e.bottom+t}function clipArea(o,e){o.save(),o.beginPath(),o.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),o.clip()}function unclipArea(o){o.restore()}function _steppedLineTo(o,e,t,n,r){if(!e)return o.lineTo(t.x,t.y);if(r==="middle"){const a=(e.x+t.x)/2;o.lineTo(a,e.y),o.lineTo(a,t.y)}else r==="after"!=!!n?o.lineTo(e.x,t.y):o.lineTo(t.x,e.y);o.lineTo(t.x,t.y)}function _bezierCurveTo(o,e,t,n){if(!e)return o.lineTo(t.x,t.y);o.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?t.cp2x:t.cp1x,n?t.cp2y:t.cp1y,t.x,t.y)}function renderText(o,e,t,n,r,a={}){const s=isArray(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let u,d;for(o.save(),o.font=r.string,setRenderOpts(o,a),u=0;u<s.length;++u)d=s[u],l&&(a.strokeColor&&(o.strokeStyle=a.strokeColor),isNullOrUndef(a.strokeWidth)||(o.lineWidth=a.strokeWidth),o.strokeText(d,t,n,a.maxWidth)),o.fillText(d,t,n,a.maxWidth),decorateText(o,t,n,d,a),n+=r.lineHeight;o.restore()}function setRenderOpts(o,e){e.translation&&o.translate(e.translation[0],e.translation[1]),isNullOrUndef(e.rotation)||o.rotate(e.rotation),e.color&&(o.fillStyle=e.color),e.textAlign&&(o.textAlign=e.textAlign),e.textBaseline&&(o.textBaseline=e.textBaseline)}function decorateText(o,e,t,n,r){if(r.strikethrough||r.underline){const a=o.measureText(n),s=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,u=t-a.actualBoundingBoxAscent,d=t+a.actualBoundingBoxDescent,f=r.strikethrough?(u+d)/2:d;o.strokeStyle=o.fillStyle,o.beginPath(),o.lineWidth=r.decorationWidth||2,o.moveTo(s,f),o.lineTo(l,f),o.stroke()}}function addRoundedRectPath(o,e){const{x:t,y:n,w:r,h:a,radius:s}=e;o.arc(t+s.topLeft,n+s.topLeft,s.topLeft,-HALF_PI,PI,!0),o.lineTo(t,n+a-s.bottomLeft),o.arc(t+s.bottomLeft,n+a-s.bottomLeft,s.bottomLeft,PI,HALF_PI,!0),o.lineTo(t+r-s.bottomRight,n+a),o.arc(t+r-s.bottomRight,n+a-s.bottomRight,s.bottomRight,HALF_PI,0,!0),o.lineTo(t+r,n+s.topRight),o.arc(t+r-s.topRight,n+s.topRight,s.topRight,0,-HALF_PI,!0),o.lineTo(t+s.topLeft,n)}const LINE_HEIGHT=new RegExp(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/),FONT_STYLE=new RegExp(/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/);function toLineHeight(o,e){const t=(""+o).match(LINE_HEIGHT);if(!t||t[1]==="normal")return e*1.2;switch(o=+t[2],t[3]){case"px":return o;case"%":o/=100;break}return e*o}const numberOrZero=o=>+o||0;function _readValueToProps(o,e){const t={},n=isObject(e),r=n?Object.keys(e):e,a=isObject(o)?n?s=>valueOrDefault(o[s],o[e[s]]):s=>o[s]:()=>o;for(const s of r)t[s]=numberOrZero(a(s));return t}function toTRBL(o){return _readValueToProps(o,{top:"y",right:"x",bottom:"y",left:"x"})}function toTRBLCorners(o){return _readValueToProps(o,["topLeft","topRight","bottomLeft","bottomRight"])}function toPadding(o){const e=toTRBL(o);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function toFont(o,e){o=o||{},e=e||defaults.font;let t=valueOrDefault(o.size,e.size);typeof t=="string"&&(t=parseInt(t,10));let n=valueOrDefault(o.style,e.style);n&&!(""+n).match(FONT_STYLE)&&(console.warn('Invalid font style specified: "'+n+'"'),n="");const r={family:valueOrDefault(o.family,e.family),lineHeight:toLineHeight(valueOrDefault(o.lineHeight,e.lineHeight),t),size:t,style:n,weight:valueOrDefault(o.weight,e.weight),string:""};return r.string=toFontString(r),r}function resolve(o,e,t,n){let r=!0,a,s,l;for(a=0,s=o.length;a<s;++a)if(l=o[a],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),r=!1),t!==void 0&&isArray(l)&&(l=l[t%l.length],r=!1),l!==void 0))return n&&!r&&(n.cacheable=!1),l}function _addGrace(o,e,t){const{min:n,max:r}=o,a=toDimension(e,(r-n)/2),s=(l,u)=>t&&l===0?0:l+u;return{min:s(n,-Math.abs(a)),max:s(r,a)}}function createContext(o,e){return Object.assign(Object.create(o),e)}function _lookup(o,e,t){t=t||(s=>o[s]<e);let n=o.length-1,r=0,a;for(;n-r>1;)a=r+n>>1,t(a)?r=a:n=a;return{lo:r,hi:n}}const _lookupByKey=(o,e,t)=>_lookup(o,t,n=>o[n][e]<t),_rlookupByKey=(o,e,t)=>_lookup(o,t,n=>o[n][e]>=t);function _filterBetween(o,e,t){let n=0,r=o.length;for(;n<r&&o[n]<e;)n++;for(;r>n&&o[r-1]>t;)r--;return n>0||r<o.length?o.slice(n,r):o}const arrayEvents=["push","pop","shift","splice","unshift"];function listenArrayEvents(o,e){if(o._chartjs){o._chartjs.listeners.push(e);return}Object.defineProperty(o,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),arrayEvents.forEach(t=>{const n="_onData"+_capitalize(t),r=o[t];Object.defineProperty(o,t,{configurable:!0,enumerable:!1,value(...a){const s=r.apply(this,a);return o._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...a)}),s}})})}function unlistenArrayEvents(o,e){const t=o._chartjs;if(!t)return;const n=t.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(arrayEvents.forEach(a=>{delete o[a]}),delete o._chartjs)}function _arrayUnique(o){const e=new Set;let t,n;for(t=0,n=o.length;t<n;++t)e.add(o[t]);return e.size===n?o:Array.from(e)}function _createResolver(o,e=[""],t=o,n,r=()=>o[0]){defined(n)||(n=_resolve("_fallback",o));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:o,_rootScopes:t,_fallback:n,_getTarget:r,override:s=>_createResolver([s,...o],e,t,n)};return new Proxy(a,{deleteProperty(s,l){return delete s[l],delete s._keys,delete o[0][l],!0},get(s,l){return _cached(s,l,()=>_resolveWithPrefixes(l,e,o,s))},getOwnPropertyDescriptor(s,l){return Reflect.getOwnPropertyDescriptor(s._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(o[0])},has(s,l){return getKeysFromAllScopes(s).includes(l)},ownKeys(s){return getKeysFromAllScopes(s)},set(s,l,u){const d=s._storage||(s._storage=r());return s[l]=d[l]=u,delete s._keys,!0}})}function _attachContext(o,e,t,n){const r={_cacheable:!1,_proxy:o,_context:e,_subProxy:t,_stack:new Set,_descriptors:_descriptors(o,n),setContext:a=>_attachContext(o,a,t,n),override:a=>_attachContext(o.override(a),e,t,n)};return new Proxy(r,{deleteProperty(a,s){return delete a[s],delete o[s],!0},get(a,s,l){return _cached(a,s,()=>_resolveWithContext(a,s,l))},getOwnPropertyDescriptor(a,s){return a._descriptors.allKeys?Reflect.has(o,s)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(o,s)},getPrototypeOf(){return Reflect.getPrototypeOf(o)},has(a,s){return Reflect.has(o,s)},ownKeys(){return Reflect.ownKeys(o)},set(a,s,l){return o[s]=l,delete a[s],!0}})}function _descriptors(o,e={scriptable:!0,indexable:!0}){const{_scriptable:t=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=o;return{allKeys:r,scriptable:t,indexable:n,isScriptable:isFunction(t)?t:()=>t,isIndexable:isFunction(n)?n:()=>n}}const readKey=(o,e)=>o?o+_capitalize(e):e,needsSubResolver=(o,e)=>isObject(e)&&o!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function _cached(o,e,t){if(Object.prototype.hasOwnProperty.call(o,e))return o[e];const n=t();return o[e]=n,n}function _resolveWithContext(o,e,t){const{_proxy:n,_context:r,_subProxy:a,_descriptors:s}=o;let l=n[e];return isFunction(l)&&s.isScriptable(e)&&(l=_resolveScriptable(e,l,o,t)),isArray(l)&&l.length&&(l=_resolveArray(e,l,o,s.isIndexable)),needsSubResolver(e,l)&&(l=_attachContext(l,r,a&&a[e],s)),l}function _resolveScriptable(o,e,t,n){const{_proxy:r,_context:a,_subProxy:s,_stack:l}=t;if(l.has(o))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+o);return l.add(o),e=e(a,s||n),l.delete(o),needsSubResolver(o,e)&&(e=createSubResolver(r._scopes,r,o,e)),e}function _resolveArray(o,e,t,n){const{_proxy:r,_context:a,_subProxy:s,_descriptors:l}=t;if(defined(a.index)&&n(o))e=e[a.index%e.length];else if(isObject(e[0])){const u=e,d=r._scopes.filter(f=>f!==u);e=[];for(const f of u){const m=createSubResolver(d,r,o,f);e.push(_attachContext(m,a,s&&s[o],l))}}return e}function resolveFallback(o,e,t){return isFunction(o)?o(e,t):o}const getScope=(o,e)=>o===!0?e:typeof o=="string"?resolveObjectKey(e,o):void 0;function addScopes(o,e,t,n,r){for(const a of e){const s=getScope(t,a);if(s){o.add(s);const l=resolveFallback(s._fallback,t,r);if(defined(l)&&l!==t&&l!==n)return l}else if(s===!1&&defined(n)&&t!==n)return null}return!1}function createSubResolver(o,e,t,n){const r=e._rootScopes,a=resolveFallback(e._fallback,t,n),s=[...o,...r],l=new Set;l.add(n);let u=addScopesFromKey(l,s,t,a||t,n);return u===null||defined(a)&&a!==t&&(u=addScopesFromKey(l,s,a,u,n),u===null)?!1:_createResolver(Array.from(l),[""],r,a,()=>subGetTarget(e,t,n))}function addScopesFromKey(o,e,t,n,r){for(;t;)t=addScopes(o,e,t,n,r);return t}function subGetTarget(o,e,t){const n=o._getTarget();e in n||(n[e]={});const r=n[e];return isArray(r)&&isObject(t)?t:r}function _resolveWithPrefixes(o,e,t,n){let r;for(const a of e)if(r=_resolve(readKey(a,o),t),defined(r))return needsSubResolver(o,r)?createSubResolver(t,n,o,r):r}function _resolve(o,e){for(const t of e){if(!t)continue;const n=t[o];if(defined(n))return n}}function getKeysFromAllScopes(o){let e=o._keys;return e||(e=o._keys=resolveKeysFromAllScopes(o._scopes)),e}function resolveKeysFromAllScopes(o){const e=new Set;for(const t of o)for(const n of Object.keys(t).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}function _parseObjectDataRadialScale(o,e,t,n){const{iScale:r}=o,{key:a="r"}=this._parsing,s=new Array(n);let l,u,d,f;for(l=0,u=n;l<u;++l)d=l+t,f=e[d],s[l]={r:r.parse(resolveObjectKey(f,a),d)};return s}const EPSILON=Number.EPSILON||1e-14,getPoint=(o,e)=>e<o.length&&!o[e].skip&&o[e],getValueAxis=o=>o==="x"?"y":"x";function splineCurve(o,e,t,n){const r=o.skip?e:o,a=e,s=t.skip?e:t,l=distanceBetweenPoints(a,r),u=distanceBetweenPoints(s,a);let d=l/(l+u),f=u/(l+u);d=isNaN(d)?0:d,f=isNaN(f)?0:f;const m=n*d,h=n*f;return{previous:{x:a.x-m*(s.x-r.x),y:a.y-m*(s.y-r.y)},next:{x:a.x+h*(s.x-r.x),y:a.y+h*(s.y-r.y)}}}function monotoneAdjust(o,e,t){const n=o.length;let r,a,s,l,u,d=getPoint(o,0);for(let f=0;f<n-1;++f)if(u=d,d=getPoint(o,f+1),!(!u||!d)){if(almostEquals(e[f],0,EPSILON)){t[f]=t[f+1]=0;continue}r=t[f]/e[f],a=t[f+1]/e[f],l=Math.pow(r,2)+Math.pow(a,2),!(l<=9)&&(s=3/Math.sqrt(l),t[f]=r*s*e[f],t[f+1]=a*s*e[f])}}function monotoneCompute(o,e,t="x"){const n=getValueAxis(t),r=o.length;let a,s,l,u=getPoint(o,0);for(let d=0;d<r;++d){if(s=l,l=u,u=getPoint(o,d+1),!l)continue;const f=l[t],m=l[n];s&&(a=(f-s[t])/3,l[`cp1${t}`]=f-a,l[`cp1${n}`]=m-a*e[d]),u&&(a=(u[t]-f)/3,l[`cp2${t}`]=f+a,l[`cp2${n}`]=m+a*e[d])}}function splineCurveMonotone(o,e="x"){const t=getValueAxis(e),n=o.length,r=Array(n).fill(0),a=Array(n);let s,l,u,d=getPoint(o,0);for(s=0;s<n;++s)if(l=u,u=d,d=getPoint(o,s+1),!!u){if(d){const f=d[e]-u[e];r[s]=f!==0?(d[t]-u[t])/f:0}a[s]=l?d?sign(r[s-1])!==sign(r[s])?0:(r[s-1]+r[s])/2:r[s-1]:r[s]}monotoneAdjust(o,r,a),monotoneCompute(o,a,e)}function capControlPoint(o,e,t){return Math.max(Math.min(o,t),e)}function capBezierPoints(o,e){let t,n,r,a,s,l=_isPointInArea(o[0],e);for(t=0,n=o.length;t<n;++t)s=a,a=l,l=t<n-1&&_isPointInArea(o[t+1],e),a&&(r=o[t],s&&(r.cp1x=capControlPoint(r.cp1x,e.left,e.right),r.cp1y=capControlPoint(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=capControlPoint(r.cp2x,e.left,e.right),r.cp2y=capControlPoint(r.cp2y,e.top,e.bottom)))}function _updateBezierControlPoints(o,e,t,n,r){let a,s,l,u;if(e.spanGaps&&(o=o.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")splineCurveMonotone(o,r);else{let d=n?o[o.length-1]:o[0];for(a=0,s=o.length;a<s;++a)l=o[a],u=splineCurve(d,l,o[Math.min(a+1,s-(n?0:1))%s],e.tension),l.cp1x=u.previous.x,l.cp1y=u.previous.y,l.cp2x=u.next.x,l.cp2y=u.next.y,d=l}e.capBezierPoints&&capBezierPoints(o,t)}function _isDomSupported(){return typeof window<"u"&&typeof document<"u"}function _getParentNode(o){let e=o.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function parseMaxStyle(o,e,t){let n;return typeof o=="string"?(n=parseInt(o,10),o.indexOf("%")!==-1&&(n=n/100*e.parentNode[t])):n=o,n}const getComputedStyle$1=o=>window.getComputedStyle(o,null);function getStyle(o,e){return getComputedStyle$1(o).getPropertyValue(e)}const positions=["top","right","bottom","left"];function getPositionedStyle(o,e,t){const n={};t=t?"-"+t:"";for(let r=0;r<4;r++){const a=positions[r];n[a]=parseFloat(o[e+"-"+a+t])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const useOffsetPos=(o,e,t)=>(o>0||e>0)&&(!t||!t.shadowRoot);function getCanvasPosition(o,e){const t=o.touches,n=t&&t.length?t[0]:o,{offsetX:r,offsetY:a}=n;let s=!1,l,u;if(useOffsetPos(r,a,o.target))l=r,u=a;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,u=n.clientY-d.top,s=!0}return{x:l,y:u,box:s}}function getRelativePosition(o,e){if("native"in o)return o;const{canvas:t,currentDevicePixelRatio:n}=e,r=getComputedStyle$1(t),a=r.boxSizing==="border-box",s=getPositionedStyle(r,"padding"),l=getPositionedStyle(r,"border","width"),{x:u,y:d,box:f}=getCanvasPosition(o,t),m=s.left+(f&&l.left),h=s.top+(f&&l.top);let{width:p,height:g}=e;return a&&(p-=s.width+l.width,g-=s.height+l.height),{x:Math.round((u-m)/p*t.width/n),y:Math.round((d-h)/g*t.height/n)}}function getContainerSize(o,e,t){let n,r;if(e===void 0||t===void 0){const a=_getParentNode(o);if(!a)e=o.clientWidth,t=o.clientHeight;else{const s=a.getBoundingClientRect(),l=getComputedStyle$1(a),u=getPositionedStyle(l,"border","width"),d=getPositionedStyle(l,"padding");e=s.width-d.width-u.width,t=s.height-d.height-u.height,n=parseMaxStyle(l.maxWidth,a,"clientWidth"),r=parseMaxStyle(l.maxHeight,a,"clientHeight")}}return{width:e,height:t,maxWidth:n||INFINITY,maxHeight:r||INFINITY}}const round1=o=>Math.round(o*10)/10;function getMaximumSize(o,e,t,n){const r=getComputedStyle$1(o),a=getPositionedStyle(r,"margin"),s=parseMaxStyle(r.maxWidth,o,"clientWidth")||INFINITY,l=parseMaxStyle(r.maxHeight,o,"clientHeight")||INFINITY,u=getContainerSize(o,e,t);let{width:d,height:f}=u;if(r.boxSizing==="content-box"){const m=getPositionedStyle(r,"border","width"),h=getPositionedStyle(r,"padding");d-=h.width+m.width,f-=h.height+m.height}return d=Math.max(0,d-a.width),f=Math.max(0,n?Math.floor(d/n):f-a.height),d=round1(Math.min(d,s,u.maxWidth)),f=round1(Math.min(f,l,u.maxHeight)),d&&!f&&(f=round1(d/2)),{width:d,height:f}}function retinaScale(o,e,t){const n=e||1,r=Math.floor(o.height*n),a=Math.floor(o.width*n);o.height=r/n,o.width=a/n;const s=o.canvas;return s.style&&(t||!s.style.height&&!s.style.width)&&(s.style.height=`${o.height}px`,s.style.width=`${o.width}px`),o.currentDevicePixelRatio!==n||s.height!==r||s.width!==a?(o.currentDevicePixelRatio=n,s.height=r,s.width=a,o.ctx.setTransform(n,0,0,n,0,0),!0):!1}const supportsEventListenerOptions=function(){let o=!1;try{const e={get passive(){return o=!0,!1}};window.addEventListener("test",null,e),window.removeEventListener("test",null,e)}catch{}return o}();function readUsedSize(o,e){const t=getStyle(o,e),n=t&&t.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function _pointInLine(o,e,t,n){return{x:o.x+t*(e.x-o.x),y:o.y+t*(e.y-o.y)}}function _steppedInterpolation(o,e,t,n){return{x:o.x+t*(e.x-o.x),y:n==="middle"?t<.5?o.y:e.y:n==="after"?t<1?o.y:e.y:t>0?e.y:o.y}}function _bezierInterpolation(o,e,t,n){const r={x:o.cp2x,y:o.cp2y},a={x:e.cp1x,y:e.cp1y},s=_pointInLine(o,r,t),l=_pointInLine(r,a,t),u=_pointInLine(a,e,t),d=_pointInLine(s,l,t),f=_pointInLine(l,u,t);return _pointInLine(d,f,t)}const intlCache=new Map;function getNumberFormat(o,e){e=e||{};const t=o+JSON.stringify(e);let n=intlCache.get(t);return n||(n=new Intl.NumberFormat(o,e),intlCache.set(t,n)),n}function formatNumber(o,e,t){return getNumberFormat(e,t).format(o)}const getRightToLeftAdapter=function(o,e){return{x(t){return o+o+e-t},setWidth(t){e=t},textAlign(t){return t==="center"?t:t==="right"?"left":"right"},xPlus(t,n){return t-n},leftForLtr(t,n){return t-n}}},getLeftToRightAdapter=function(){return{x(o){return o},setWidth(o){},textAlign(o){return o},xPlus(o,e){return o+e},leftForLtr(o,e){return o}}};function getRtlAdapter(o,e,t){return o?getRightToLeftAdapter(e,t):getLeftToRightAdapter()}function overrideTextDirection(o,e){let t,n;(e==="ltr"||e==="rtl")&&(t=o.canvas.style,n=[t.getPropertyValue("direction"),t.getPropertyPriority("direction")],t.setProperty("direction",e,"important"),o.prevTextDirection=n)}function restoreTextDirection(o,e){e!==void 0&&(delete o.prevTextDirection,o.canvas.style.setProperty("direction",e[0],e[1]))}function propertyFn(o){return o==="angle"?{between:_angleBetween,compare:_angleDiff,normalize:_normalizeAngle}:{between:_isBetween,compare:(e,t)=>e-t,normalize:e=>e}}function normalizeSegment({start:o,end:e,count:t,loop:n,style:r}){return{start:o%t,end:e%t,loop:n&&(e-o+1)%t===0,style:r}}function getSegment(o,e,t){const{property:n,start:r,end:a}=t,{between:s,normalize:l}=propertyFn(n),u=e.length;let{start:d,end:f,loop:m}=o,h,p;if(m){for(d+=u,f+=u,h=0,p=u;h<p&&s(l(e[d%u][n]),r,a);++h)d--,f--;d%=u,f%=u}return f<d&&(f+=u),{start:d,end:f,loop:m,style:o.style}}function _boundSegment(o,e,t){if(!t)return[o];const{property:n,start:r,end:a}=t,s=e.length,{compare:l,between:u,normalize:d}=propertyFn(n),{start:f,end:m,loop:h,style:p}=getSegment(o,e,t),g=[];let b=!1,v=null,y,C,E;const A=()=>u(r,E,y)&&l(r,E)!==0,k=()=>l(a,y)===0||u(a,E,y),T=()=>b||A(),$=()=>!b||k();for(let S=f,I=f;S<=m;++S)C=e[S%s],!C.skip&&(y=d(C[n]),y!==E&&(b=u(y,r,a),v===null&&T()&&(v=l(y,r)===0?S:I),v!==null&&$()&&(g.push(normalizeSegment({start:v,end:S,loop:h,count:s,style:p})),v=null),I=S,E=y));return v!==null&&g.push(normalizeSegment({start:v,end:m,loop:h,count:s,style:p})),g}function _boundSegments(o,e){const t=[],n=o.segments;for(let r=0;r<n.length;r++){const a=_boundSegment(n[r],o.points,e);a.length&&t.push(...a)}return t}function findStartAndEnd(o,e,t,n){let r=0,a=e-1;if(t&&!n)for(;r<e&&!o[r].skip;)r++;for(;r<e&&o[r].skip;)r++;for(r%=e,t&&(a+=r);a>r&&o[a%e].skip;)a--;return a%=e,{start:r,end:a}}function solidSegments(o,e,t,n){const r=o.length,a=[];let s=e,l=o[e],u;for(u=e+1;u<=t;++u){const d=o[u%r];d.skip||d.stop?l.skip||(n=!1,a.push({start:e%r,end:(u-1)%r,loop:n}),e=s=d.stop?u:null):(s=u,l.skip&&(e=u)),l=d}return s!==null&&a.push({start:e%r,end:s%r,loop:n}),a}function _computeSegments(o,e){const t=o.points,n=o.options.spanGaps,r=t.length;if(!r)return[];const a=!!o._loop,{start:s,end:l}=findStartAndEnd(t,r,a,n);if(n===!0)return splitByStyles(o,[{start:s,end:l,loop:a}],t,e);const u=l<s?l+r:l,d=!!o._fullLoop&&s===0&&l===r-1;return splitByStyles(o,solidSegments(t,s,u,d),t,e)}function splitByStyles(o,e,t,n){return!n||!n.setContext||!t?e:doSplitByStyles(o,e,t,n)}function doSplitByStyles(o,e,t,n){const r=o._chart.getContext(),a=readStyle(o.options),{_datasetIndex:s,options:{spanGaps:l}}=o,u=t.length,d=[];let f=a,m=e[0].start,h=m;function p(g,b,v,y){const C=l?-1:1;if(g!==b){for(g+=u;t[g%u].skip;)g-=C;for(;t[b%u].skip;)b+=C;g%u!==b%u&&(d.push({start:g%u,end:b%u,loop:v,style:y}),f=y,m=b%u)}}for(const g of e){m=l?m:g.start;let b=t[m%u],v;for(h=m+1;h<=g.end;h++){const y=t[h%u];v=readStyle(n.setContext(createContext(r,{type:"segment",p0:b,p1:y,p0DataIndex:(h-1)%u,p1DataIndex:h%u,datasetIndex:s}))),styleChanged(v,f)&&p(m,h-1,g.loop,f),b=y,f=v}m<h-1&&p(m,h-1,g.loop,f)}return d}function readStyle(o){return{backgroundColor:o.backgroundColor,borderCapStyle:o.borderCapStyle,borderDash:o.borderDash,borderDashOffset:o.borderDashOffset,borderJoinStyle:o.borderJoinStyle,borderWidth:o.borderWidth,borderColor:o.borderColor}}function styleChanged(o,e){return e&&JSON.stringify(o)!==JSON.stringify(e)}/*!
* chartjs-plugin-zoom v1.3.0
* undefined
 * (c) 2016-2022 chartjs-plugin-zoom Contributors
 * Released under the MIT License
 */const getModifierKey=o=>o&&o.enabled&&o.modifierKey,keyPressed=(o,e)=>o&&e[o+"Key"],keyNotPressed=(o,e)=>o&&!e[o+"Key"];function directionEnabled(o,e,t){return o===void 0?!0:typeof o=="string"?o.indexOf(e)!==-1:typeof o=="function"?o({chart:t}).indexOf(e)!==-1:!1}function directionsEnabled(o,e){return typeof o=="function"&&(o=o({chart:e})),typeof o=="string"?{x:o.indexOf("x")!==-1,y:o.indexOf("y")!==-1}:{x:!1,y:!1}}function debounce(o,e){let t;return function(){return clearTimeout(t),t=setTimeout(o,e),e}}function getScaleUnderPoint({x:o,y:e},t){const n=t.scales,r=Object.keys(n);for(let a=0;a<r.length;a++){const s=n[r[a]];if(e>=s.top&&e<=s.bottom&&o>=s.left&&o<=s.right)return s}return null}function getEnabledScalesByPoint(o,e,t){const{mode:n="xy",scaleMode:r,overScaleMode:a}=o||{},s=getScaleUnderPoint(e,t),l=directionsEnabled(n,t),u=directionsEnabled(r,t);if(a){const f=directionsEnabled(a,t);for(const m of["x","y"])f[m]&&(u[m]=l[m],l[m]=!1)}if(s&&u[s.axis])return[s];const d=[];return each(t.scales,function(f){l[f.axis]&&d.push(f)}),d}const chartStates=new WeakMap;function getState(o){let e=chartStates.get(o);return e||(e={originalScaleLimits:{},updatedScaleLimits:{},handlers:{},panDelta:{}},chartStates.set(o,e)),e}function removeState(o){chartStates.delete(o)}function zoomDelta(o,e,t){const n=o.max-o.min,r=n*(e-1),a=o.isHorizontal()?t.x:t.y,s=Math.max(0,Math.min(1,(o.getValueForPixel(a)-o.min)/n||0)),l=1-s;return{min:r*s,max:r*l}}function getLimit(o,e,t,n,r){let a=t[n];if(a==="original"){const s=o.originalScaleLimits[e.id][n];a=valueOrDefault(s.options,s.scale)}return valueOrDefault(a,r)}function getRange(o,e,t){const n=o.getValueForPixel(e),r=o.getValueForPixel(t);return{min:Math.min(n,r),max:Math.max(n,r)}}function updateRange(o,{min:e,max:t},n,r=!1){const a=getState(o.chart),{id:s,axis:l,options:u}=o,d=n&&(n[s]||n[l])||{},{minRange:f=0}=d,m=getLimit(a,o,d,"min",-1/0),h=getLimit(a,o,d,"max",1/0),p=Math.max(e,m),g=Math.min(t,h),b=r?Math.max(g-p,f):o.max-o.min;if(g-p!==b)if(m>g-b)e=p,t=p+b;else if(h<p+b)t=g,e=g-b;else{const v=(b-g+p)/2;e=p-v,t=g+v}else e=p,t=g;return u.min=e,u.max=t,a.updatedScaleLimits[o.id]={min:e,max:t},o.parse(e)!==o.min||o.parse(t)!==o.max}function zoomNumericalScale(o,e,t,n){const r=zoomDelta(o,e,t),a={min:o.min+r.min,max:o.max-r.max};return updateRange(o,a,n,!0)}function zoomRectNumericalScale(o,e,t,n){updateRange(o,getRange(o,e,t),n,!0)}const integerChange=o=>o===0||isNaN(o)?0:o<0?Math.min(Math.round(o),-1):Math.max(Math.round(o),1);function existCategoryFromMaxZoom(o){const t=o.getLabels().length-1;o.min>0&&(o.min-=1),o.max<t&&(o.max+=1)}function zoomCategoryScale(o,e,t,n){const r=zoomDelta(o,e,t);o.min===o.max&&e<1&&existCategoryFromMaxZoom(o);const a={min:o.min+integerChange(r.min),max:o.max-integerChange(r.max)};return updateRange(o,a,n,!0)}function scaleLength(o){return o.isHorizontal()?o.width:o.height}function panCategoryScale(o,e,t){const r=o.getLabels().length-1;let{min:a,max:s}=o;const l=Math.max(s-a,1),u=Math.round(scaleLength(o)/Math.max(l,10)),d=Math.round(Math.abs(e/u));let f;return e<-u?(s=Math.min(s+d,r),a=l===1?s:s-l,f=s===r):e>u&&(a=Math.max(0,a-d),s=l===1?a:a+l,f=a===0),updateRange(o,{min:a,max:s},t)||f}const OFFSETS={second:500,minute:30*1e3,hour:30*60*1e3,day:12*60*60*1e3,week:3.5*24*60*60*1e3,month:15*24*60*60*1e3,quarter:60*24*60*60*1e3,year:182*24*60*60*1e3};function panNumericalScale(o,e,t,n=!1){const{min:r,max:a,options:s}=o,l=s.time&&s.time.round,u=OFFSETS[l]||0,d=o.getValueForPixel(o.getPixelForValue(r+u)-e),f=o.getValueForPixel(o.getPixelForValue(a+u)-e),{min:m=-1/0,max:h=1/0}=n&&t&&t[o.axis]||{};return isNaN(d)||isNaN(f)||d<m||f>h?!0:updateRange(o,{min:d,max:f},t,n)}function panNonLinearScale(o,e,t){return panNumericalScale(o,e,t,!0)}const zoomFunctions={category:zoomCategoryScale,default:zoomNumericalScale},zoomRectFunctions={default:zoomRectNumericalScale},panFunctions={category:panCategoryScale,default:panNumericalScale,logarithmic:panNonLinearScale,timeseries:panNonLinearScale};function shouldUpdateScaleLimits(o,e,t){const{id:n,options:{min:r,max:a}}=o;if(!e[n]||!t[n])return!0;const s=t[n];return s.min!==r||s.max!==a}function removeMissingScales(o,e){each(o,(t,n)=>{e[n]||delete o[n]})}function storeOriginalScaleLimits(o,e){const{scales:t}=o,{originalScaleLimits:n,updatedScaleLimits:r}=e;return each(t,function(a){shouldUpdateScaleLimits(a,n,r)&&(n[a.id]={min:{scale:a.min,options:a.options.min},max:{scale:a.max,options:a.options.max}})}),removeMissingScales(n,t),removeMissingScales(r,t),n}function doZoom(o,e,t,n){const r=zoomFunctions[o.type]||zoomFunctions.default;callback(r,[o,e,t,n])}function doZoomRect(o,e,t,n,r){const a=zoomRectFunctions[o.type]||zoomRectFunctions.default;callback(a,[o,e,t,n,r])}function getCenter(o){const e=o.chartArea;return{x:(e.left+e.right)/2,y:(e.top+e.bottom)/2}}function zoom(o,e,t="none"){const{x:n=1,y:r=1,focalPoint:a=getCenter(o)}=typeof e=="number"?{x:e,y:e}:e,s=getState(o),{options:{limits:l,zoom:u}}=s;storeOriginalScaleLimits(o,s);const d=n!==1,f=r!==1,m=getEnabledScalesByPoint(u,a,o);each(m||o.scales,function(h){h.isHorizontal()&&d?doZoom(h,n,a,l):!h.isHorizontal()&&f&&doZoom(h,r,a,l)}),o.update(t),callback(u.onZoom,[{chart:o}])}function zoomRect(o,e,t,n="none"){const r=getState(o),{options:{limits:a,zoom:s}}=r,{mode:l="xy"}=s;storeOriginalScaleLimits(o,r);const u=directionEnabled(l,"x",o),d=directionEnabled(l,"y",o);each(o.scales,function(f){f.isHorizontal()&&u?doZoomRect(f,e.x,t.x,a):!f.isHorizontal()&&d&&doZoomRect(f,e.y,t.y,a)}),o.update(n),callback(s.onZoom,[{chart:o}])}function zoomScale(o,e,t,n="none"){storeOriginalScaleLimits(o,getState(o));const r=o.scales[e];updateRange(r,t,void 0,!0),o.update(n)}function resetZoom(o,e="default"){const t=getState(o),n=storeOriginalScaleLimits(o,t);each(o.scales,function(r){const a=r.options;n[r.id]?(a.min=n[r.id].min.options,a.max=n[r.id].max.options):(delete a.min,delete a.max)}),o.update(e),callback(t.options.zoom.onZoomComplete,[{chart:o}])}function getOriginalRange(o,e){const t=o.originalScaleLimits[e];if(!t)return;const{min:n,max:r}=t;return valueOrDefault(r.options,r.scale)-valueOrDefault(n.options,n.scale)}function getZoomLevel(o){const e=getState(o);let t=1,n=1;return each(o.scales,function(r){const a=getOriginalRange(e,r.id);if(a){const s=Math.round(a/(r.max-r.min)*100)/100;t=Math.min(t,s),n=Math.max(n,s)}}),t<1?t:n}function panScale(o,e,t,n){const{panDelta:r}=n,a=r[o.id]||0;sign(a)===sign(e)&&(e+=a);const s=panFunctions[o.type]||panFunctions.default;callback(s,[o,e,t])?r[o.id]=0:r[o.id]=e}function pan(o,e,t,n="none"){const{x:r=0,y:a=0}=typeof e=="number"?{x:e,y:e}:e,s=getState(o),{options:{pan:l,limits:u}}=s,{onPan:d}=l||{};storeOriginalScaleLimits(o,s);const f=r!==0,m=a!==0;each(t||o.scales,function(h){h.isHorizontal()&&f?panScale(h,r,u,s):!h.isHorizontal()&&m&&panScale(h,a,u,s)}),o.update(n),callback(d,[{chart:o}])}function getInitialScaleBounds(o){const e=getState(o),t={};for(const n of Object.keys(o.scales)){const{min:r,max:a}=e.originalScaleLimits[n]||{min:{},max:{}};t[n]={min:r.scale,max:a.scale}}return t}function isZoomedOrPanned(o){const e=getInitialScaleBounds(o);for(const t of Object.keys(o.scales)){const{min:n,max:r}=e[t];if(n!==void 0&&o.scales[t].min!==n||r!==void 0&&o.scales[t].max!==r)return!0}return!1}function removeHandler(o,e){const{handlers:t}=getState(o),n=t[e];n&&n.target&&(n.target.removeEventListener(e,n),delete t[e])}function addHandler(o,e,t,n){const{handlers:r,options:a}=getState(o),s=r[t];s&&s.target===e||(removeHandler(o,t),r[t]=l=>n(o,l,a),r[t].target=e,e.addEventListener(t,r[t]))}function mouseMove(o,e){const t=getState(o);t.dragStart&&(t.dragging=!0,t.dragEnd=e,o.update("none"))}function keyDown(o,e){const t=getState(o);!t.dragStart||e.key!=="Escape"||(removeHandler(o,"keydown"),t.dragging=!1,t.dragStart=t.dragEnd=null,o.update("none"))}function zoomStart(o,e,t){const{onZoomStart:n,onZoomRejected:r}=t;if(n){const{left:a,top:s}=e.target.getBoundingClientRect(),l={x:e.clientX-a,y:e.clientY-s};if(callback(n,[{chart:o,event:e,point:l}])===!1)return callback(r,[{chart:o,event:e}]),!1}}function mouseDown(o,e){const t=getState(o),{pan:n,zoom:r={}}=t.options;if(e.button!==0||keyPressed(getModifierKey(n),e)||keyNotPressed(getModifierKey(r.drag),e))return callback(r.onZoomRejected,[{chart:o,event:e}]);zoomStart(o,e,r)!==!1&&(t.dragStart=e,addHandler(o,o.canvas,"mousemove",mouseMove),addHandler(o,window.document,"keydown",keyDown))}function computeDragRect(o,e,t,n){const{left:r,top:a}=t.target.getBoundingClientRect(),s=directionEnabled(e,"x",o),l=directionEnabled(e,"y",o);let{top:u,left:d,right:f,bottom:m,width:h,height:p}=o.chartArea;s&&(d=Math.min(t.clientX,n.clientX)-r,f=Math.max(t.clientX,n.clientX)-r),l&&(u=Math.min(t.clientY,n.clientY)-a,m=Math.max(t.clientY,n.clientY)-a);const g=f-d,b=m-u;return{left:d,top:u,right:f,bottom:m,width:g,height:b,zoomX:s&&g?1+(h-g)/h:1,zoomY:l&&b?1+(p-b)/p:1}}function mouseUp(o,e){const t=getState(o);if(!t.dragStart)return;removeHandler(o,"mousemove");const{mode:n,onZoomComplete:r,drag:{threshold:a=0}}=t.options.zoom,s=computeDragRect(o,n,t.dragStart,e),l=directionEnabled(n,"x",o)?s.width:0,u=directionEnabled(n,"y",o)?s.height:0,d=Math.sqrt(l*l+u*u);if(t.dragStart=t.dragEnd=null,d<=a){t.dragging=!1,o.update("none");return}zoomRect(o,{x:s.left,y:s.top},{x:s.right,y:s.bottom},"zoom"),setTimeout(()=>t.dragging=!1,500),callback(r,[{chart:o}])}function wheelPreconditions(o,e,t){if(keyNotPressed(getModifierKey(t.wheel),e)){callback(t.onZoomRejected,[{chart:o,event:e}]);return}if(zoomStart(o,e,t)!==!1&&(e.cancelable&&e.preventDefault(),e.deltaY!==void 0))return!0}function wheel(o,e){const{handlers:{onZoomComplete:t},options:{zoom:n}}=getState(o);if(!wheelPreconditions(o,e,n))return;const r=e.target.getBoundingClientRect(),a=1+(e.deltaY>=0?-n.wheel.speed:n.wheel.speed),s={x:a,y:a,focalPoint:{x:e.clientX-r.left,y:e.clientY-r.top}};zoom(o,s),t&&t()}function addDebouncedHandler(o,e,t,n){t&&(getState(o).handlers[e]=debounce(()=>callback(t,[{chart:o}]),n))}function addListeners(o,e){const t=o.canvas,{wheel:n,drag:r,onZoomComplete:a}=e.zoom;n.enabled?(addHandler(o,t,"wheel",wheel),addDebouncedHandler(o,"onZoomComplete",a,250)):removeHandler(o,"wheel"),r.enabled?(addHandler(o,t,"mousedown",mouseDown),addHandler(o,t.ownerDocument,"mouseup",mouseUp)):(removeHandler(o,"mousedown"),removeHandler(o,"mousemove"),removeHandler(o,"mouseup"),removeHandler(o,"keydown"))}function removeListeners(o){removeHandler(o,"mousedown"),removeHandler(o,"mousemove"),removeHandler(o,"mouseup"),removeHandler(o,"wheel"),removeHandler(o,"click"),removeHandler(o,"keydown")}function createEnabler(o,e){return function(t,n){const{pan:r,zoom:a={}}=e.options;if(!r||!r.enabled)return!1;const s=n&&n.srcEvent;return s&&!e.panning&&n.pointerType==="mouse"&&(keyNotPressed(getModifierKey(r),s)||keyPressed(getModifierKey(a.drag),s))?(callback(r.onPanRejected,[{chart:o,event:n}]),!1):!0}}function pinchAxes(o,e){const t=Math.abs(o.clientX-e.clientX),n=Math.abs(o.clientY-e.clientY),r=t/n;let a,s;return r>.3&&r<1.7?a=s=!0:t>n?a=!0:s=!0,{x:a,y:s}}function handlePinch(o,e,t){if(e.scale){const{center:n,pointers:r}=t,a=1/e.scale*t.scale,s=t.target.getBoundingClientRect(),l=pinchAxes(r[0],r[1]),u=e.options.zoom.mode,d={x:l.x&&directionEnabled(u,"x",o)?a:1,y:l.y&&directionEnabled(u,"y",o)?a:1,focalPoint:{x:n.x-s.left,y:n.y-s.top}};zoom(o,d),e.scale=t.scale}}function startPinch(o,e){e.options.zoom.pinch.enabled&&(e.scale=1)}function endPinch(o,e,t){e.scale&&(handlePinch(o,e,t),e.scale=null,callback(e.options.zoom.onZoomComplete,[{chart:o}]))}function handlePan(o,e,t){const n=e.delta;n&&(e.panning=!0,pan(o,{x:t.deltaX-n.x,y:t.deltaY-n.y},e.panScales),e.delta={x:t.deltaX,y:t.deltaY})}function startPan(o,e,t){const{enabled:n,onPanStart:r,onPanRejected:a}=e.options.pan;if(!n)return;const s=t.target.getBoundingClientRect(),l={x:t.center.x-s.left,y:t.center.y-s.top};if(callback(r,[{chart:o,event:t,point:l}])===!1)return callback(a,[{chart:o,event:t}]);e.panScales=getEnabledScalesByPoint(e.options.pan,l,o),e.delta={x:0,y:0},clearTimeout(e.panEndTimeout),handlePan(o,e,t)}function endPan(o,e){e.delta=null,e.panning&&(e.panEndTimeout=setTimeout(()=>e.panning=!1,500),callback(e.options.pan.onPanComplete,[{chart:o}]))}const hammers=new WeakMap;function startHammer(o,e){const t=getState(o),n=o.canvas,{pan:r,zoom:a}=e,s=new Hammer.Manager(n);a&&a.pinch.enabled&&(s.add(new Hammer.Pinch),s.on("pinchstart",()=>startPinch(o,t)),s.on("pinch",l=>handlePinch(o,t,l)),s.on("pinchend",l=>endPinch(o,t,l))),r&&r.enabled&&(s.add(new Hammer.Pan({threshold:r.threshold,enable:createEnabler(o,t)})),s.on("panstart",l=>startPan(o,t,l)),s.on("panmove",l=>handlePan(o,t,l)),s.on("panend",()=>endPan(o,t))),hammers.set(o,s)}function stopHammer(o){const e=hammers.get(o);e&&(e.remove("pinchstart"),e.remove("pinch"),e.remove("pinchend"),e.remove("panstart"),e.remove("pan"),e.remove("panend"),e.destroy(),hammers.delete(o))}var version$1="1.3.0";function draw$1(o,e,t){const n=t.zoom.drag,{dragStart:r,dragEnd:a}=getState(o);if(n.drawTime!==e||!a)return;const{left:s,top:l,width:u,height:d}=computeDragRect(o,t.zoom.mode,r,a),f=o.ctx;f.save(),f.beginPath(),f.fillStyle=n.backgroundColor||"rgba(225,225,225,0.3)",f.fillRect(s,l,u,d),n.borderWidth>0&&(f.lineWidth=n.borderWidth,f.strokeStyle=n.borderColor||"rgba(225,225,225)",f.strokeRect(s,l,u,d)),f.restore()}var plugin={id:"zoom",version:version$1,defaults:{pan:{enabled:!1,mode:"xy",threshold:10,modifierKey:null},zoom:{wheel:{enabled:!1,speed:.1,modifierKey:null},drag:{enabled:!1,drawTime:"beforeDatasetsDraw",modifierKey:null},pinch:{enabled:!1},mode:"xy"}},start:function(o,e,t){const n=getState(o);n.options=t,Object.prototype.hasOwnProperty.call(t.zoom,"enabled")&&console.warn("The option `zoom.enabled` is no longer supported. Please use `zoom.wheel.enabled`, `zoom.drag.enabled`, or `zoom.pinch.enabled`."),(Object.prototype.hasOwnProperty.call(t.zoom,"overScaleMode")||Object.prototype.hasOwnProperty.call(t.pan,"overScaleMode"))&&console.warn("The option `overScaleMode` is deprecated. Please use `scaleMode` instead (and update `mode` as desired)."),Hammer&&startHammer(o,t),o.pan=(r,a,s)=>pan(o,r,a,s),o.zoom=(r,a)=>zoom(o,r,a),o.zoomRect=(r,a,s)=>zoomRect(o,r,a,s),o.zoomScale=(r,a,s)=>zoomScale(o,r,a,s),o.resetZoom=r=>resetZoom(o,r),o.getZoomLevel=()=>getZoomLevel(o),o.getInitialScaleBounds=()=>getInitialScaleBounds(o),o.isZoomedOrPanned=()=>isZoomedOrPanned(o)},beforeEvent(o){const e=getState(o);if(e.panning||e.dragging)return!1},beforeUpdate:function(o,e,t){const n=getState(o);n.options=t,addListeners(o,t)},beforeDatasetsDraw(o,e,t){draw$1(o,"beforeDatasetsDraw",t)},afterDatasetsDraw(o,e,t){draw$1(o,"afterDatasetsDraw",t)},beforeDraw(o,e,t){draw$1(o,"beforeDraw",t)},afterDraw(o,e,t){draw$1(o,"afterDraw",t)},stop:function(o){removeListeners(o),Hammer&&stopHammer(o),removeState(o)},panFunctions,zoomFunctions,zoomRectFunctions};/*!
 * Chart.js v3.8.2
 * https://www.chartjs.org
 * (c) 2022 Chart.js Contributors
 * Released under the MIT License
 */class Animator{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,t,n,r){const a=t.listeners[r],s=t.duration;a.forEach(l=>l({chart:e,initial:t.initial,numSteps:s,currentStep:Math.min(n-t.start,s)}))}_refresh(){this._request||(this._running=!0,this._request=requestAnimFrame.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let t=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const a=n.items;let s=a.length-1,l=!1,u;for(;s>=0;--s)u=a[s],u._active?(u._total>n.duration&&(n.duration=u._total),u.tick(e),l=!0):(a[s]=a[a.length-1],a.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),a.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),t+=a.length}),this._lastDate=e,t===0&&(this._running=!1)}_getAnims(e){const t=this._charts;let n=t.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},t.set(e,n)),n}listen(e,t,n){this._getAnims(e).listeners[t].push(n)}add(e,t){!t||!t.length||this._getAnims(e).items.push(...t)}has(e){return this._getAnims(e).items.length>0}start(e){const t=this._charts.get(e);t&&(t.running=!0,t.start=Date.now(),t.duration=t.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const t=this._charts.get(e);return!(!t||!t.running||!t.items.length)}stop(e){const t=this._charts.get(e);if(!t||!t.items.length)return;const n=t.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();t.items=[],this._notify(e,t,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var animator=new Animator;const transparent="transparent",interpolators={boolean(o,e,t){return t>.5?e:o},color(o,e,t){const n=color(o||transparent),r=n.valid&&color(e||transparent);return r&&r.valid?r.mix(n,t).hexString():e},number(o,e,t){return o+(e-o)*t}};class Animation{constructor(e,t,n,r){const a=t[n];r=resolve([e.to,r,a,e.from]);const s=resolve([e.from,a,r]);this._active=!0,this._fn=e.fn||interpolators[e.type||typeof s],this._easing=effects[e.easing]||effects.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=t,this._prop=n,this._from=s,this._to=r,this._promises=void 0}active(){return this._active}update(e,t,n){if(this._active){this._notify(!1);const r=this._target[this._prop],a=n-this._start,s=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(s,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=resolve([e.to,t,r,e.from]),this._from=resolve([e.from,r,t])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const t=e-this._start,n=this._duration,r=this._prop,a=this._from,s=this._loop,l=this._to;let u;if(this._active=a!==l&&(s||t<n),!this._active){this._target[r]=l,this._notify(!0);return}if(t<0){this._target[r]=a;return}u=t/n%2,u=s&&u>1?2-u:u,u=this._easing(Math.min(1,Math.max(0,u))),this._target[r]=this._fn(a,l,u)}wait(){const e=this._promises||(this._promises=[]);return new Promise((t,n)=>{e.push({res:t,rej:n})})}_notify(e){const t=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][t]()}}const numbers=["x","y","borderWidth","radius","tension"],colors=["color","borderColor","backgroundColor"];defaults.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0});const animationOptions=Object.keys(defaults.animation);defaults.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:o=>o!=="onProgress"&&o!=="onComplete"&&o!=="fn"});defaults.set("animations",{colors:{type:"color",properties:colors},numbers:{type:"number",properties:numbers}});defaults.describe("animations",{_fallback:"animation"});defaults.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:o=>o|0}}}});class Animations{constructor(e,t){this._chart=e,this._properties=new Map,this.configure(t)}configure(e){if(!isObject(e))return;const t=this._properties;Object.getOwnPropertyNames(e).forEach(n=>{const r=e[n];if(!isObject(r))return;const a={};for(const s of animationOptions)a[s]=r[s];(isArray(r.properties)&&r.properties||[n]).forEach(s=>{(s===n||!t.has(s))&&t.set(s,a)})})}_animateOptions(e,t){const n=t.options,r=resolveTargetOptions(e,n);if(!r)return[];const a=this._createAnimations(r,n);return n.$shared&&awaitAll(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,t){const n=this._properties,r=[],a=e.$animations||(e.$animations={}),s=Object.keys(t),l=Date.now();let u;for(u=s.length-1;u>=0;--u){const d=s[u];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,t));continue}const f=t[d];let m=a[d];const h=n.get(d);if(m)if(h&&m.active()){m.update(h,f,l);continue}else m.cancel();if(!h||!h.duration){e[d]=f;continue}a[d]=m=new Animation(h,e,d,f),r.push(m)}return r}update(e,t){if(this._properties.size===0){Object.assign(e,t);return}const n=this._createAnimations(e,t);if(n.length)return animator.add(this._chart,n),!0}}function awaitAll(o,e){const t=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const a=o[n[r]];a&&a.active()&&t.push(a.wait())}return Promise.all(t)}function resolveTargetOptions(o,e){if(!e)return;let t=o.options;if(!t){o.options=e;return}return t.$shared&&(o.options=t=Object.assign({},t,{$shared:!1,$animations:{}})),t}function scaleClip(o,e){const t=o&&o.options||{},n=t.reverse,r=t.min===void 0?e:0,a=t.max===void 0?e:0;return{start:n?a:r,end:n?r:a}}function defaultClip(o,e,t){if(t===!1)return!1;const n=scaleClip(o,t),r=scaleClip(e,t);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function toClip(o){let e,t,n,r;return isObject(o)?(e=o.top,t=o.right,n=o.bottom,r=o.left):e=t=n=r=o,{top:e,right:t,bottom:n,left:r,disabled:o===!1}}function getSortedDatasetIndices(o,e){const t=[],n=o._getSortedDatasetMetas(e);let r,a;for(r=0,a=n.length;r<a;++r)t.push(n[r].index);return t}function applyStack(o,e,t,n={}){const r=o.keys,a=n.mode==="single";let s,l,u,d;if(e!==null){for(s=0,l=r.length;s<l;++s){if(u=+r[s],u===t){if(n.all)continue;break}d=o.values[u],isNumberFinite(d)&&(a||e===0||sign(e)===sign(d))&&(e+=d)}return e}}function convertObjectDataToArray(o){const e=Object.keys(o),t=new Array(e.length);let n,r,a;for(n=0,r=e.length;n<r;++n)a=e[n],t[n]={x:a,y:o[a]};return t}function isStacked(o,e){const t=o&&o.options.stacked;return t||t===void 0&&e.stack!==void 0}function getStackKey(o,e,t){return`${o.id}.${e.id}.${t.stack||t.type}`}function getUserBounds(o){const{min:e,max:t,minDefined:n,maxDefined:r}=o.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?t:Number.POSITIVE_INFINITY}}function getOrCreateStack(o,e,t){const n=o[e]||(o[e]={});return n[t]||(n[t]={})}function getLastIndexInStack(o,e,t,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const a=o[r.index];if(t&&a>0||!t&&a<0)return r.index}return null}function updateStacks(o,e){const{chart:t,_cachedMeta:n}=o,r=t._stacks||(t._stacks={}),{iScale:a,vScale:s,index:l}=n,u=a.axis,d=s.axis,f=getStackKey(a,s,n),m=e.length;let h;for(let p=0;p<m;++p){const g=e[p],{[u]:b,[d]:v}=g,y=g._stacks||(g._stacks={});h=y[d]=getOrCreateStack(r,f,b),h[l]=v,h._top=getLastIndexInStack(h,s,!0,n.type),h._bottom=getLastIndexInStack(h,s,!1,n.type)}}function getFirstScaleId(o,e){const t=o.scales;return Object.keys(t).filter(n=>t[n].axis===e).shift()}function createDatasetContext(o,e){return createContext(o,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function createDataContext(o,e,t){return createContext(o,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:t,index:e,mode:"default",type:"data"})}function clearStacks(o,e){const t=o.controller.index,n=o.vScale&&o.vScale.axis;if(n){e=e||o._parsed;for(const r of e){const a=r._stacks;if(!a||a[n]===void 0||a[n][t]===void 0)return;delete a[n][t]}}}const isDirectUpdateMode=o=>o==="reset"||o==="none",cloneIfNotShared=(o,e)=>e?o:Object.assign({},o),createStack=(o,e,t)=>o&&!e.hidden&&e._stacked&&{keys:getSortedDatasetIndices(t,!0),values:null};class DatasetController{constructor(e,t){this.chart=e,this._ctx=e.ctx,this.index=t,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=isStacked(e.vScale,e),this.addElements()}updateIndex(e){this.index!==e&&clearStacks(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,t=this._cachedMeta,n=this.getDataset(),r=(m,h,p,g)=>m==="x"?h:m==="r"?g:p,a=t.xAxisID=valueOrDefault(n.xAxisID,getFirstScaleId(e,"x")),s=t.yAxisID=valueOrDefault(n.yAxisID,getFirstScaleId(e,"y")),l=t.rAxisID=valueOrDefault(n.rAxisID,getFirstScaleId(e,"r")),u=t.indexAxis,d=t.iAxisID=r(u,a,s,l),f=t.vAxisID=r(u,s,a,l);t.xScale=this.getScaleForId(a),t.yScale=this.getScaleForId(s),t.rScale=this.getScaleForId(l),t.iScale=this.getScaleForId(d),t.vScale=this.getScaleForId(f)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const t=this._cachedMeta;return e===t.iScale?t.vScale:t.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&unlistenArrayEvents(this._data,this),e._stacked&&clearStacks(e)}_dataCheck(){const e=this.getDataset(),t=e.data||(e.data=[]),n=this._data;if(isObject(t))this._data=convertObjectDataToArray(t);else if(n!==t){if(n){unlistenArrayEvents(n,this);const r=this._cachedMeta;clearStacks(r),r._parsed=[]}t&&Object.isExtensible(t)&&listenArrayEvents(t,this),this._syncList=[],this._data=t}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const t=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const a=t._stacked;t._stacked=isStacked(t.vScale,t),t.stack!==n.stack&&(r=!0,clearStacks(t),t.stack=n.stack),this._resyncElements(e),(r||a!==t._stacked)&&updateStacks(this,t._parsed)}configure(){const e=this.chart.config,t=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),t,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,t){const{_cachedMeta:n,_data:r}=this,{iScale:a,_stacked:s}=n,l=a.axis;let u=e===0&&t===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],f,m,h;if(this._parsing===!1)n._parsed=r,n._sorted=!0,h=r;else{isArray(r[e])?h=this.parseArrayData(n,r,e,t):isObject(r[e])?h=this.parseObjectData(n,r,e,t):h=this.parsePrimitiveData(n,r,e,t);const p=()=>m[l]===null||d&&m[l]<d[l];for(f=0;f<t;++f)n._parsed[f+e]=m=h[f],u&&(p()&&(u=!1),d=m);n._sorted=u}s&&updateStacks(this,h)}parsePrimitiveData(e,t,n,r){const{iScale:a,vScale:s}=e,l=a.axis,u=s.axis,d=a.getLabels(),f=a===s,m=new Array(r);let h,p,g;for(h=0,p=r;h<p;++h)g=h+n,m[h]={[l]:f||a.parse(d[g],g),[u]:s.parse(t[g],g)};return m}parseArrayData(e,t,n,r){const{xScale:a,yScale:s}=e,l=new Array(r);let u,d,f,m;for(u=0,d=r;u<d;++u)f=u+n,m=t[f],l[u]={x:a.parse(m[0],f),y:s.parse(m[1],f)};return l}parseObjectData(e,t,n,r){const{xScale:a,yScale:s}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,d=new Array(r);let f,m,h,p;for(f=0,m=r;f<m;++f)h=f+n,p=t[h],d[f]={x:a.parse(resolveObjectKey(p,l),h),y:s.parse(resolveObjectKey(p,u),h)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,t,n){const r=this.chart,a=this._cachedMeta,s=t[e.axis],l={keys:getSortedDatasetIndices(r,!0),values:t._stacks[e.axis]};return applyStack(l,s,a.index,{mode:n})}updateRangeFromParsed(e,t,n,r){const a=n[t.axis];let s=a===null?NaN:a;const l=r&&n._stacks[t.axis];r&&l&&(r.values=l,s=applyStack(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,s),e.max=Math.max(e.max,s)}getMinMax(e,t){const n=this._cachedMeta,r=n._parsed,a=n._sorted&&e===n.iScale,s=r.length,l=this._getOtherScale(e),u=createStack(t,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:f,max:m}=getUserBounds(l);let h,p;function g(){p=r[h];const b=p[l.axis];return!isNumberFinite(p[e.axis])||f>b||m<b}for(h=0;h<s&&!(!g()&&(this.updateRangeFromParsed(d,e,p,u),a));++h);if(a){for(h=s-1;h>=0;--h)if(!g()){this.updateRangeFromParsed(d,e,p,u);break}}return d}getAllParsedValues(e){const t=this._cachedMeta._parsed,n=[];let r,a,s;for(r=0,a=t.length;r<a;++r)s=t[r][e.axis],isNumberFinite(s)&&n.push(s);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const t=this._cachedMeta,n=t.iScale,r=t.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const t=this._cachedMeta;this.update(e||"default"),t._clip=toClip(valueOrDefault(this.options.clip,defaultClip(t.xScale,t.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,t=this.chart,n=this._cachedMeta,r=n.data||[],a=t.chartArea,s=[],l=this._drawStart||0,u=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let f;for(n.dataset&&n.dataset.draw(e,a,l,u),f=l;f<l+u;++f){const m=r[f];m.hidden||(m.active&&d?s.push(m):m.draw(e,a))}for(f=0;f<s.length;++f)s[f].draw(e,a)}getStyle(e,t){const n=t?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,t,n){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const s=this._cachedMeta.data[e];a=s.$context||(s.$context=createDataContext(this.getContext(),e,s)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=createDatasetContext(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!t,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,t){return this._resolveElementOptions(this.dataElementType.id,t,e)}_resolveElementOptions(e,t="default",n){const r=t==="active",a=this._cachedDataOpts,s=e+"-"+t,l=a[s],u=this.enableOptionSharing&&defined(n);if(l)return cloneIfNotShared(l,u);const d=this.chart.config,f=d.datasetElementScopeKeys(this._type,e),m=r?[`${e}Hover`,"hover",e,""]:[e,""],h=d.getOptionScopes(this.getDataset(),f),p=Object.keys(defaults.elements[e]),g=()=>this.getContext(n,r),b=d.resolveNamedOptions(h,p,g,m);return b.$shared&&(b.$shared=u,a[s]=Object.freeze(cloneIfNotShared(b,u))),b}_resolveAnimations(e,t,n){const r=this.chart,a=this._cachedDataOpts,s=`animation-${t}`,l=a[s];if(l)return l;let u;if(r.options.animation!==!1){const f=this.chart.config,m=f.datasetAnimationScopeKeys(this._type,t),h=f.getOptionScopes(this.getDataset(),m);u=f.createResolver(h,this.getContext(e,n,t))}const d=new Animations(r,u&&u.animations);return u&&u._cacheable&&(a[s]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,t){return!t||isDirectUpdateMode(e)||this.chart._animationsDisabled}_getSharedOptions(e,t){const n=this.resolveDataElementOptions(e,t),r=this._sharedOptions,a=this.getSharedOptions(n),s=this.includeOptions(t,a)||a!==r;return this.updateSharedOptions(a,t,n),{sharedOptions:a,includeOptions:s}}updateElement(e,t,n,r){isDirectUpdateMode(r)?Object.assign(e,n):this._resolveAnimations(t,r).update(e,n)}updateSharedOptions(e,t,n){e&&!isDirectUpdateMode(t)&&this._resolveAnimations(void 0,t).update(e,n)}_setStyle(e,t,n,r){e.active=r;const a=this.getStyle(t,r);this._resolveAnimations(t,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,t,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,t,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const t=this._data,n=this._cachedMeta.data;for(const[l,u,d]of this._syncList)this[l](u,d);this._syncList=[];const r=n.length,a=t.length,s=Math.min(a,r);s&&this.parse(0,s),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,t,n=!0){const r=this._cachedMeta,a=r.data,s=e+t;let l;const u=d=>{for(d.length+=t,l=d.length-1;l>=s;l--)d[l]=d[l-t]};for(u(a),l=e;l<s;++l)a[l]=new this.dataElementType;this._parsing&&u(r._parsed),this.parse(e,t),n&&this.updateElements(a,e,t,"reset")}updateElements(e,t,n,r){}_removeElements(e,t){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,t);n._stacked&&clearStacks(n,r)}n.data.splice(e,t)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[t,n,r]=e;this[t](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,t){t&&this._sync(["_removeElements",e,t]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}DatasetController.defaults={};DatasetController.prototype.datasetElementType=null;DatasetController.prototype.dataElementType=null;function getAllScaleValues(o,e){if(!o._cache.$bar){const t=o.getMatchingVisibleMetas(e);let n=[];for(let r=0,a=t.length;r<a;r++)n=n.concat(t[r].controller.getAllParsedValues(o));o._cache.$bar=_arrayUnique(n.sort((r,a)=>r-a))}return o._cache.$bar}function computeMinSampleSize(o){const e=o.iScale,t=getAllScaleValues(e,o.type);let n=e._length,r,a,s,l;const u=()=>{s===32767||s===-32768||(defined(l)&&(n=Math.min(n,Math.abs(s-l)||n)),l=s)};for(r=0,a=t.length;r<a;++r)s=e.getPixelForValue(t[r]),u();for(l=void 0,r=0,a=e.ticks.length;r<a;++r)s=e.getPixelForTick(r),u();return n}function computeFitCategoryTraits(o,e,t,n){const r=t.barThickness;let a,s;return isNullOrUndef(r)?(a=e.min*t.categoryPercentage,s=t.barPercentage):(a=r*n,s=1),{chunk:a/n,ratio:s,start:e.pixels[o]-a/2}}function computeFlexCategoryTraits(o,e,t,n){const r=e.pixels,a=r[o];let s=o>0?r[o-1]:null,l=o<r.length-1?r[o+1]:null;const u=t.categoryPercentage;s===null&&(s=a-(l===null?e.end-e.start:l-a)),l===null&&(l=a+a-s);const d=a-(a-Math.min(s,l))/2*u;return{chunk:Math.abs(l-s)/2*u/n,ratio:t.barPercentage,start:d}}function parseFloatBar(o,e,t,n){const r=t.parse(o[0],n),a=t.parse(o[1],n),s=Math.min(r,a),l=Math.max(r,a);let u=s,d=l;Math.abs(s)>Math.abs(l)&&(u=l,d=s),e[t.axis]=d,e._custom={barStart:u,barEnd:d,start:r,end:a,min:s,max:l}}function parseValue(o,e,t,n){return isArray(o)?parseFloatBar(o,e,t,n):e[t.axis]=t.parse(o,n),e}function parseArrayOrPrimitive(o,e,t,n){const r=o.iScale,a=o.vScale,s=r.getLabels(),l=r===a,u=[];let d,f,m,h;for(d=t,f=t+n;d<f;++d)h=e[d],m={},m[r.axis]=l||r.parse(s[d],d),u.push(parseValue(h,m,a,d));return u}function isFloatBar(o){return o&&o.barStart!==void 0&&o.barEnd!==void 0}function barSign(o,e,t){return o!==0?sign(o):(e.isHorizontal()?1:-1)*(e.min>=t?1:-1)}function borderProps(o){let e,t,n,r,a;return o.horizontal?(e=o.base>o.x,t="left",n="right"):(e=o.base<o.y,t="bottom",n="top"),e?(r="end",a="start"):(r="start",a="end"),{start:t,end:n,reverse:e,top:r,bottom:a}}function setBorderSkipped(o,e,t,n){let r=e.borderSkipped;const a={};if(!r){o.borderSkipped=a;return}const{start:s,end:l,reverse:u,top:d,bottom:f}=borderProps(o);r==="middle"&&t&&(o.enableBorderRadius=!0,(t._top||0)===n?r=d:(t._bottom||0)===n?r=f:(a[parseEdge(f,s,l,u)]=!0,r=d)),a[parseEdge(r,s,l,u)]=!0,o.borderSkipped=a}function parseEdge(o,e,t,n){return n?(o=swap(o,e,t),o=startEnd(o,t,e)):o=startEnd(o,e,t),o}function swap(o,e,t){return o===e?t:o===t?e:o}function startEnd(o,e,t){return o==="start"?e:o==="end"?t:o}function setInflateAmount(o,{inflateAmount:e},t){o.inflateAmount=e==="auto"?t===1?.33:0:e}class BarController extends DatasetController{parsePrimitiveData(e,t,n,r){return parseArrayOrPrimitive(e,t,n,r)}parseArrayData(e,t,n,r){return parseArrayOrPrimitive(e,t,n,r)}parseObjectData(e,t,n,r){const{iScale:a,vScale:s}=e,{xAxisKey:l="x",yAxisKey:u="y"}=this._parsing,d=a.axis==="x"?l:u,f=s.axis==="x"?l:u,m=[];let h,p,g,b;for(h=n,p=n+r;h<p;++h)b=t[h],g={},g[a.axis]=a.parse(resolveObjectKey(b,d),h),m.push(parseValue(resolveObjectKey(b,f),g,s,h));return m}updateRangeFromParsed(e,t,n,r){super.updateRangeFromParsed(e,t,n,r);const a=n._custom;a&&t===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const t=this._cachedMeta,{iScale:n,vScale:r}=t,a=this.getParsed(e),s=a._custom,l=isFloatBar(s)?"["+s.start+", "+s.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const t=this._cachedMeta;this.updateElements(t.data,0,t.data.length,e)}updateElements(e,t,n,r){const a=r==="reset",{index:s,_cachedMeta:{vScale:l}}=this,u=l.getBasePixel(),d=l.isHorizontal(),f=this._getRuler(),{sharedOptions:m,includeOptions:h}=this._getSharedOptions(t,r);for(let p=t;p<t+n;p++){const g=this.getParsed(p),b=a||isNullOrUndef(g[l.axis])?{base:u,head:u}:this._calculateBarValuePixels(p),v=this._calculateBarIndexPixels(p,f),y=(g._stacks||{})[l.axis],C={horizontal:d,base:b.base,enableBorderRadius:!y||isFloatBar(g._custom)||s===y._top||s===y._bottom,x:d?b.head:v.center,y:d?v.center:b.head,height:d?v.size:Math.abs(b.size),width:d?Math.abs(b.size):v.size};h&&(C.options=m||this.resolveDataElementOptions(p,e[p].active?"active":r));const E=C.options||e[p].options;setBorderSkipped(C,E,y,s),setInflateAmount(C,E,f.ratio),this.updateElement(e[p],p,C,r)}}_getStacks(e,t){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),a=n.options.stacked,s=[],l=u=>{const d=u.controller.getParsed(t),f=d&&d[u.vScale.axis];if(isNullOrUndef(f)||isNaN(f))return!0};for(const u of r)if(!(t!==void 0&&l(u))&&((a===!1||s.indexOf(u.stack)===-1||a===void 0&&u.stack===void 0)&&s.push(u.stack),u.index===e))break;return s.length||s.push(void 0),s}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,t,n){const r=this._getStacks(e,n),a=t!==void 0?r.indexOf(t):-1;return a===-1?r.length-1:a}_getRuler(){const e=this.options,t=this._cachedMeta,n=t.iScale,r=[];let a,s;for(a=0,s=t.data.length;a<s;++a)r.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const l=e.barThickness;return{min:l||computeMinSampleSize(t),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:t,_stacked:n},options:{base:r,minBarLength:a}}=this,s=r||0,l=this.getParsed(e),u=l._custom,d=isFloatBar(u);let f=l[t.axis],m=0,h=n?this.applyStack(t,l,n):f,p,g;h!==f&&(m=h-f,h=f),d&&(f=u.barStart,h=u.barEnd-u.barStart,f!==0&&sign(f)!==sign(u.barEnd)&&(m=0),m+=f);const b=!isNullOrUndef(r)&&!d?r:m;let v=t.getPixelForValue(b);if(this.chart.getDataVisibility(e)?p=t.getPixelForValue(m+h):p=v,g=p-v,Math.abs(g)<a){g=barSign(g,t,s)*a,f===s&&(v-=g/2);const y=t.getPixelForDecimal(0),C=t.getPixelForDecimal(1),E=Math.min(y,C),A=Math.max(y,C);v=Math.max(Math.min(v,A),E),p=v+g}if(v===t.getPixelForValue(s)){const y=sign(g)*t.getLineWidthForValue(s)/2;v+=y,g-=y}return{size:g,base:v,head:p,center:p+g/2}}_calculateBarIndexPixels(e,t){const n=t.scale,r=this.options,a=r.skipNull,s=valueOrDefault(r.maxBarThickness,1/0);let l,u;if(t.grouped){const d=a?this._getStackCount(e):t.stackCount,f=r.barThickness==="flex"?computeFlexCategoryTraits(e,t,r,d):computeFitCategoryTraits(e,t,r,d),m=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0);l=f.start+f.chunk*m+f.chunk/2,u=Math.min(s,f.chunk*f.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),u=Math.min(s,t.min*t.ratio);return{base:l-u/2,head:l+u/2,center:l,size:u}}draw(){const e=this._cachedMeta,t=e.vScale,n=e.data,r=n.length;let a=0;for(;a<r;++a)this.getParsed(a)[t.axis]!==null&&n[a].draw(this._ctx)}}BarController.id="bar";BarController.defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};BarController.overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};class BubbleController extends DatasetController{initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,t,n,r){const a=super.parsePrimitiveData(e,t,n,r);for(let s=0;s<a.length;s++)a[s]._custom=this.resolveDataElementOptions(s+n).radius;return a}parseArrayData(e,t,n,r){const a=super.parseArrayData(e,t,n,r);for(let s=0;s<a.length;s++){const l=t[n+s];a[s]._custom=valueOrDefault(l[2],this.resolveDataElementOptions(s+n).radius)}return a}parseObjectData(e,t,n,r){const a=super.parseObjectData(e,t,n,r);for(let s=0;s<a.length;s++){const l=t[n+s];a[s]._custom=valueOrDefault(l&&l.r&&+l.r,this.resolveDataElementOptions(s+n).radius)}return a}getMaxOverflow(){const e=this._cachedMeta.data;let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}getLabelAndValue(e){const t=this._cachedMeta,{xScale:n,yScale:r}=t,a=this.getParsed(e),s=n.getLabelForValue(a.x),l=r.getLabelForValue(a.y),u=a._custom;return{label:t.label,value:"("+s+", "+l+(u?", "+u:"")+")"}}update(e){const t=this._cachedMeta.data;this.updateElements(t,0,t.length,e)}updateElements(e,t,n,r){const a=r==="reset",{iScale:s,vScale:l}=this._cachedMeta,{sharedOptions:u,includeOptions:d}=this._getSharedOptions(t,r),f=s.axis,m=l.axis;for(let h=t;h<t+n;h++){const p=e[h],g=!a&&this.getParsed(h),b={},v=b[f]=a?s.getPixelForDecimal(.5):s.getPixelForValue(g[f]),y=b[m]=a?l.getBasePixel():l.getPixelForValue(g[m]);b.skip=isNaN(v)||isNaN(y),d&&(b.options=u||this.resolveDataElementOptions(h,p.active?"active":r),a&&(b.options.radius=0)),this.updateElement(p,h,b,r)}}resolveDataElementOptions(e,t){const n=this.getParsed(e);let r=super.resolveDataElementOptions(e,t);r.$shared&&(r=Object.assign({},r,{$shared:!1}));const a=r.radius;return t!=="active"&&(r.radius=0),r.radius+=valueOrDefault(n&&n._custom,a),r}}BubbleController.id="bubble";BubbleController.defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};BubbleController.overrides={scales:{x:{type:"linear"},y:{type:"linear"}},plugins:{tooltip:{callbacks:{title(){return""}}}}};function getRatioAndOffset(o,e,t){let n=1,r=1,a=0,s=0;if(e<TAU){const l=o,u=l+e,d=Math.cos(l),f=Math.sin(l),m=Math.cos(u),h=Math.sin(u),p=(E,A,k)=>_angleBetween(E,l,u,!0)?1:Math.max(A,A*t,k,k*t),g=(E,A,k)=>_angleBetween(E,l,u,!0)?-1:Math.min(A,A*t,k,k*t),b=p(0,d,m),v=p(HALF_PI,f,h),y=g(PI,d,m),C=g(PI+HALF_PI,f,h);n=(b-y)/2,r=(v-C)/2,a=-(b+y)/2,s=-(v+C)/2}return{ratioX:n,ratioY:r,offsetX:a,offsetY:s}}class DoughnutController extends DatasetController{constructor(e,t){super(e,t),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,t){const n=this.getDataset().data,r=this._cachedMeta;if(this._parsing===!1)r._parsed=n;else{let a=u=>+n[u];if(isObject(n[e])){const{key:u="value"}=this._parsing;a=d=>+resolveObjectKey(n[d],u)}let s,l;for(s=e,l=e+t;s<l;++s)r._parsed[s]=a(s)}}_getRotation(){return toRadians(this.options.rotation-90)}_getCircumference(){return toRadians(this.options.circumference)}_getRotationExtents(){let e=TAU,t=-TAU;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)){const r=this.chart.getDatasetMeta(n).controller,a=r._getRotation(),s=r._getCircumference();e=Math.min(e,a),t=Math.max(t,a+s)}return{rotation:e,circumference:t-e}}update(e){const t=this.chart,{chartArea:n}=t,r=this._cachedMeta,a=r.data,s=this.getMaxBorderWidth()+this.getMaxOffset(a)+this.options.spacing,l=Math.max((Math.min(n.width,n.height)-s)/2,0),u=Math.min(toPercentage(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:f,rotation:m}=this._getRotationExtents(),{ratioX:h,ratioY:p,offsetX:g,offsetY:b}=getRatioAndOffset(m,f,u),v=(n.width-s)/h,y=(n.height-s)/p,C=Math.max(Math.min(v,y)/2,0),E=toDimension(this.options.radius,C),A=Math.max(E*u,0),k=(E-A)/this._getVisibleDatasetWeightTotal();this.offsetX=g*E,this.offsetY=b*E,r.total=this.calculateTotal(),this.outerRadius=E-k*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-k*d,0),this.updateElements(a,0,a.length,e)}_circumference(e,t){const n=this.options,r=this._cachedMeta,a=this._getCircumference();return t&&n.animation.animateRotate||!this.chart.getDataVisibility(e)||r._parsed[e]===null||r.data[e].hidden?0:this.calculateCircumference(r._parsed[e]*a/TAU)}updateElements(e,t,n,r){const a=r==="reset",s=this.chart,l=s.chartArea,d=s.options.animation,f=(l.left+l.right)/2,m=(l.top+l.bottom)/2,h=a&&d.animateScale,p=h?0:this.innerRadius,g=h?0:this.outerRadius,{sharedOptions:b,includeOptions:v}=this._getSharedOptions(t,r);let y=this._getRotation(),C;for(C=0;C<t;++C)y+=this._circumference(C,a);for(C=t;C<t+n;++C){const E=this._circumference(C,a),A=e[C],k={x:f+this.offsetX,y:m+this.offsetY,startAngle:y,endAngle:y+E,circumference:E,outerRadius:g,innerRadius:p};v&&(k.options=b||this.resolveDataElementOptions(C,A.active?"active":r)),y+=E,this.updateElement(A,C,k,r)}}calculateTotal(){const e=this._cachedMeta,t=e.data;let n=0,r;for(r=0;r<t.length;r++){const a=e._parsed[r];a!==null&&!isNaN(a)&&this.chart.getDataVisibility(r)&&!t[r].hidden&&(n+=Math.abs(a))}return n}calculateCircumference(e){const t=this._cachedMeta.total;return t>0&&!isNaN(e)?TAU*(Math.abs(e)/t):0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=formatNumber(t._parsed[e],n.options.locale);return{label:r[e]||"",value:a}}getMaxBorderWidth(e){let t=0;const n=this.chart;let r,a,s,l,u;if(!e){for(r=0,a=n.data.datasets.length;r<a;++r)if(n.isDatasetVisible(r)){s=n.getDatasetMeta(r),e=s.data,l=s.controller;break}}if(!e)return 0;for(r=0,a=e.length;r<a;++r)u=l.resolveDataElementOptions(r),u.borderAlign!=="inner"&&(t=Math.max(t,u.borderWidth||0,u.hoverBorderWidth||0));return t}getMaxOffset(e){let t=0;for(let n=0,r=e.length;n<r;++n){const a=this.resolveDataElementOptions(n);t=Math.max(t,a.offset||0,a.hoverOffset||0)}return t}_getRingWeightOffset(e){let t=0;for(let n=0;n<e;++n)this.chart.isDatasetVisible(n)&&(t+=this._getRingWeight(n));return t}_getRingWeight(e){return Math.max(valueOrDefault(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}DoughnutController.id="doughnut";DoughnutController.defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};DoughnutController.descriptors={_scriptable:o=>o!=="spacing",_indexable:o=>o!=="spacing"};DoughnutController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(o){const e=o.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t}}=o.legend.options;return e.labels.map((n,r)=>{const s=o.getDatasetMeta(0).controller.getStyle(r);return{text:n,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:t,hidden:!o.getDataVisibility(r),index:r}})}return[]}},onClick(o,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}},tooltip:{callbacks:{title(){return""},label(o){let e=o.label;const t=": "+o.formattedValue;return isArray(e)?(e=e.slice(),e[0]+=t):e+=t,e}}}}};class LineController extends DatasetController{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const t=this._cachedMeta,{dataset:n,data:r=[],_dataset:a}=t,s=this.chart._animationsDisabled;let{start:l,count:u}=getStartAndCountOfVisiblePoints(t,r,s);this._drawStart=l,this._drawCount=u,scaleRangesChanged(t)&&(l=0,u=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!s,options:d},e),this.updateElements(r,l,u,e)}updateElements(e,t,n,r){const a=r==="reset",{iScale:s,vScale:l,_stacked:u,_dataset:d}=this._cachedMeta,{sharedOptions:f,includeOptions:m}=this._getSharedOptions(t,r),h=s.axis,p=l.axis,{spanGaps:g,segment:b}=this.options,v=isNumber(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||a||r==="none";let C=t>0&&this.getParsed(t-1);for(let E=t;E<t+n;++E){const A=e[E],k=this.getParsed(E),T=y?A:{},$=isNullOrUndef(k[p]),S=T[h]=s.getPixelForValue(k[h],E),I=T[p]=a||$?l.getBasePixel():l.getPixelForValue(u?this.applyStack(l,k,u):k[p],E);T.skip=isNaN(S)||isNaN(I)||$,T.stop=E>0&&Math.abs(k[h]-C[h])>v,b&&(T.parsed=k,T.raw=d.data[E]),m&&(T.options=f||this.resolveDataElementOptions(E,A.active?"active":r)),y||this.updateElement(A,E,T,r),C=k}}getMaxOverflow(){const e=this._cachedMeta,t=e.dataset,n=t.options&&t.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const a=r[0].size(this.resolveDataElementOptions(0)),s=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,s)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}LineController.id="line";LineController.defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};LineController.overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};function getStartAndCountOfVisiblePoints(o,e,t){const n=e.length;let r=0,a=n;if(o._sorted){const{iScale:s,_parsed:l}=o,u=s.axis,{min:d,max:f,minDefined:m,maxDefined:h}=s.getUserBounds();m&&(r=_limitValue(Math.min(_lookupByKey(l,s.axis,d).lo,t?n:_lookupByKey(e,u,s.getPixelForValue(d)).lo),0,n-1)),h?a=_limitValue(Math.max(_lookupByKey(l,s.axis,f).hi+1,t?0:_lookupByKey(e,u,s.getPixelForValue(f)).hi+1),r,n)-r:a=n-r}return{start:r,count:a}}function scaleRangesChanged(o){const{xScale:e,yScale:t,_scaleRanges:n}=o,r={xmin:e.min,xmax:e.max,ymin:t.min,ymax:t.max};if(!n)return o._scaleRanges=r,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==t.min||n.ymax!==t.max;return Object.assign(n,r),a}class PolarAreaController extends DatasetController{constructor(e,t){super(e,t),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){const t=this._cachedMeta,n=this.chart,r=n.data.labels||[],a=formatNumber(t._parsed[e].r,n.options.locale);return{label:r[e]||"",value:a}}parseObjectData(e,t,n,r){return _parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta.data;this._updateRadius(),this.updateElements(t,0,t.length,e)}getMinMax(){const e=this._cachedMeta,t={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((n,r)=>{const a=this.getParsed(r).r;!isNaN(a)&&this.chart.getDataVisibility(r)&&(a<t.min&&(t.min=a),a>t.max&&(t.max=a))}),t}_updateRadius(){const e=this.chart,t=e.chartArea,n=e.options,r=Math.min(t.right-t.left,t.bottom-t.top),a=Math.max(r/2,0),s=Math.max(n.cutoutPercentage?a/100*n.cutoutPercentage:1,0),l=(a-s)/e.getVisibleDatasetCount();this.outerRadius=a-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,t,n,r){const a=r==="reset",s=this.chart,u=s.options.animation,d=this._cachedMeta.rScale,f=d.xCenter,m=d.yCenter,h=d.getIndexAngle(0)-.5*PI;let p=h,g;const b=360/this.countVisibleElements();for(g=0;g<t;++g)p+=this._computeAngle(g,r,b);for(g=t;g<t+n;g++){const v=e[g];let y=p,C=p+this._computeAngle(g,r,b),E=s.getDataVisibility(g)?d.getDistanceFromCenterForValue(this.getParsed(g).r):0;p=C,a&&(u.animateScale&&(E=0),u.animateRotate&&(y=C=h));const A={x:f,y:m,innerRadius:0,outerRadius:E,startAngle:y,endAngle:C,options:this.resolveDataElementOptions(g,v.active?"active":r)};this.updateElement(v,g,A,r)}}countVisibleElements(){const e=this._cachedMeta;let t=0;return e.data.forEach((n,r)=>{!isNaN(this.getParsed(r).r)&&this.chart.getDataVisibility(r)&&t++}),t}_computeAngle(e,t,n){return this.chart.getDataVisibility(e)?toRadians(this.resolveDataElementOptions(e,t).angle||n):0}}PolarAreaController.id="polarArea";PolarAreaController.defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};PolarAreaController.overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(o){const e=o.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:t}}=o.legend.options;return e.labels.map((n,r)=>{const s=o.getDatasetMeta(0).controller.getStyle(r);return{text:n,fillStyle:s.backgroundColor,strokeStyle:s.borderColor,lineWidth:s.borderWidth,pointStyle:t,hidden:!o.getDataVisibility(r),index:r}})}return[]}},onClick(o,e,t){t.chart.toggleDataVisibility(e.index),t.chart.update()}},tooltip:{callbacks:{title(){return""},label(o){return o.chart.data.labels[o.dataIndex]+": "+o.formattedValue}}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};class PieController extends DoughnutController{}PieController.id="pie";PieController.defaults={cutout:0,rotation:0,circumference:360,radius:"100%"};class RadarController extends DatasetController{getLabelAndValue(e){const t=this._cachedMeta.vScale,n=this.getParsed(e);return{label:t.getLabels()[e],value:""+t.getLabelForValue(n[t.axis])}}parseObjectData(e,t,n,r){return _parseObjectDataRadialScale.bind(this)(e,t,n,r)}update(e){const t=this._cachedMeta,n=t.dataset,r=t.data||[],a=t.iScale.getLabels();if(n.points=r,e!=="resize"){const s=this.resolveDatasetElementOptions(e);this.options.showLine||(s.borderWidth=0);const l={_loop:!0,_fullLoop:a.length===r.length,options:s};this.updateElement(n,void 0,l,e)}this.updateElements(r,0,r.length,e)}updateElements(e,t,n,r){const a=this._cachedMeta.rScale,s=r==="reset";for(let l=t;l<t+n;l++){const u=e[l],d=this.resolveDataElementOptions(l,u.active?"active":r),f=a.getPointPositionForValue(l,this.getParsed(l).r),m=s?a.xCenter:f.x,h=s?a.yCenter:f.y,p={x:m,y:h,angle:f.angle,skip:isNaN(m)||isNaN(h),options:d};this.updateElement(u,l,p,r)}}}RadarController.id="radar";RadarController.defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};RadarController.overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};class ScatterController extends LineController{}ScatterController.id="scatter";ScatterController.defaults={showLine:!1,fill:!1};ScatterController.overrides={interaction:{mode:"point"},plugins:{tooltip:{callbacks:{title(){return""},label(o){return"("+o.label+", "+o.formattedValue+")"}}}},scales:{x:{type:"linear"},y:{type:"linear"}}};var controllers=Object.freeze({__proto__:null,BarController,BubbleController,DoughnutController,LineController,PolarAreaController,PieController,RadarController,ScatterController});function abstract(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class DateAdapter{constructor(e){this.options=e||{}}formats(){return abstract()}parse(e,t){return abstract()}format(e,t){return abstract()}add(e,t,n){return abstract()}diff(e,t,n){return abstract()}startOf(e,t,n){return abstract()}endOf(e,t){return abstract()}}DateAdapter.override=function(o){Object.assign(DateAdapter.prototype,o)};var adapters={_date:DateAdapter};function binarySearch(o,e,t,n){const{controller:r,data:a,_sorted:s}=o,l=r._cachedMeta.iScale;if(l&&e===l.axis&&e!=="r"&&s&&a.length){const u=l._reversePixels?_rlookupByKey:_lookupByKey;if(n){if(r._sharedOptions){const d=a[0],f=typeof d.getRange=="function"&&d.getRange(e);if(f){const m=u(a,e,t-f),h=u(a,e,t+f);return{lo:m.lo,hi:h.hi}}}}else return u(a,e,t)}return{lo:0,hi:a.length-1}}function evaluateInteractionItems(o,e,t,n,r){const a=o.getSortedVisibleDatasetMetas(),s=t[e];for(let l=0,u=a.length;l<u;++l){const{index:d,data:f}=a[l],{lo:m,hi:h}=binarySearch(a[l],e,s,r);for(let p=m;p<=h;++p){const g=f[p];g.skip||n(g,d,p)}}}function getDistanceMetricForAxis(o){const e=o.indexOf("x")!==-1,t=o.indexOf("y")!==-1;return function(n,r){const a=e?Math.abs(n.x-r.x):0,s=t?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(s,2))}}function getIntersectItems(o,e,t,n,r){const a=[];return!r&&!o.isPointInArea(e)||evaluateInteractionItems(o,t,e,function(l,u,d){!r&&!_isPointInArea(l,o.chartArea,0)||l.inRange(e.x,e.y,n)&&a.push({element:l,datasetIndex:u,index:d})},!0),a}function getNearestRadialItems(o,e,t,n){let r=[];function a(s,l,u){const{startAngle:d,endAngle:f}=s.getProps(["startAngle","endAngle"],n),{angle:m}=getAngleFromPoint(s,{x:e.x,y:e.y});_angleBetween(m,d,f)&&r.push({element:s,datasetIndex:l,index:u})}return evaluateInteractionItems(o,t,e,a),r}function getNearestCartesianItems(o,e,t,n,r,a){let s=[];const l=getDistanceMetricForAxis(t);let u=Number.POSITIVE_INFINITY;function d(f,m,h){const p=f.inRange(e.x,e.y,r);if(n&&!p)return;const g=f.getCenterPoint(r);if(!(!!a||o.isPointInArea(g))&&!p)return;const v=l(e,g);v<u?(s=[{element:f,datasetIndex:m,index:h}],u=v):v===u&&s.push({element:f,datasetIndex:m,index:h})}return evaluateInteractionItems(o,t,e,d),s}function getNearestItems(o,e,t,n,r,a){return!a&&!o.isPointInArea(e)?[]:t==="r"&&!n?getNearestRadialItems(o,e,t,r):getNearestCartesianItems(o,e,t,n,r,a)}function getAxisItems(o,e,t,n,r){const a=[],s=t==="x"?"inXRange":"inYRange";let l=!1;return evaluateInteractionItems(o,t,e,(u,d,f)=>{u[s](e[t],r)&&(a.push({element:u,datasetIndex:d,index:f}),l=l||u.inRange(e.x,e.y,r))}),n&&!l?[]:a}var Interaction={evaluateInteractionItems,modes:{index(o,e,t,n){const r=getRelativePosition(e,o),a=t.axis||"x",s=t.includeInvisible||!1,l=t.intersect?getIntersectItems(o,r,a,n,s):getNearestItems(o,r,a,!1,n,s),u=[];return l.length?(o.getSortedVisibleDatasetMetas().forEach(d=>{const f=l[0].index,m=d.data[f];m&&!m.skip&&u.push({element:m,datasetIndex:d.index,index:f})}),u):[]},dataset(o,e,t,n){const r=getRelativePosition(e,o),a=t.axis||"xy",s=t.includeInvisible||!1;let l=t.intersect?getIntersectItems(o,r,a,n,s):getNearestItems(o,r,a,!1,n,s);if(l.length>0){const u=l[0].datasetIndex,d=o.getDatasetMeta(u).data;l=[];for(let f=0;f<d.length;++f)l.push({element:d[f],datasetIndex:u,index:f})}return l},point(o,e,t,n){const r=getRelativePosition(e,o),a=t.axis||"xy",s=t.includeInvisible||!1;return getIntersectItems(o,r,a,n,s)},nearest(o,e,t,n){const r=getRelativePosition(e,o),a=t.axis||"xy",s=t.includeInvisible||!1;return getNearestItems(o,r,a,t.intersect,n,s)},x(o,e,t,n){const r=getRelativePosition(e,o);return getAxisItems(o,r,"x",t.intersect,n)},y(o,e,t,n){const r=getRelativePosition(e,o);return getAxisItems(o,r,"y",t.intersect,n)}}};const STATIC_POSITIONS=["left","top","right","bottom"];function filterByPosition(o,e){return o.filter(t=>t.pos===e)}function filterDynamicPositionByAxis(o,e){return o.filter(t=>STATIC_POSITIONS.indexOf(t.pos)===-1&&t.box.axis===e)}function sortByWeight(o,e){return o.sort((t,n)=>{const r=e?n:t,a=e?t:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function wrapBoxes(o){const e=[];let t,n,r,a,s,l;for(t=0,n=(o||[]).length;t<n;++t)r=o[t],{position:a,options:{stack:s,stackWeight:l=1}}=r,e.push({index:t,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:s&&a+s,stackWeight:l});return e}function buildStacks(o){const e={};for(const t of o){const{stack:n,pos:r,stackWeight:a}=t;if(!n||!STATIC_POSITIONS.includes(r))continue;const s=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});s.count++,s.weight+=a}return e}function setLayoutDims(o,e){const t=buildStacks(o),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let a,s,l;for(a=0,s=o.length;a<s;++a){l=o[a];const{fullSize:u}=l.box,d=t[l.stack],f=d&&l.stackWeight/d.weight;l.horizontal?(l.width=f?f*n:u&&e.availableWidth,l.height=r):(l.width=n,l.height=f?f*r:u&&e.availableHeight)}return t}function buildLayoutBoxes(o){const e=wrapBoxes(o),t=sortByWeight(e.filter(d=>d.box.fullSize),!0),n=sortByWeight(filterByPosition(e,"left"),!0),r=sortByWeight(filterByPosition(e,"right")),a=sortByWeight(filterByPosition(e,"top"),!0),s=sortByWeight(filterByPosition(e,"bottom")),l=filterDynamicPositionByAxis(e,"x"),u=filterDynamicPositionByAxis(e,"y");return{fullSize:t,leftAndTop:n.concat(a),rightAndBottom:r.concat(u).concat(s).concat(l),chartArea:filterByPosition(e,"chartArea"),vertical:n.concat(r).concat(u),horizontal:a.concat(s).concat(l)}}function getCombinedMax(o,e,t,n){return Math.max(o[t],e[t])+Math.max(o[n],e[n])}function updateMaxPadding(o,e){o.top=Math.max(o.top,e.top),o.left=Math.max(o.left,e.left),o.bottom=Math.max(o.bottom,e.bottom),o.right=Math.max(o.right,e.right)}function updateDims(o,e,t,n){const{pos:r,box:a}=t,s=o.maxPadding;if(!isObject(r)){t.size&&(o[r]-=t.size);const m=n[t.stack]||{size:0,count:1};m.size=Math.max(m.size,t.horizontal?a.height:a.width),t.size=m.size/m.count,o[r]+=t.size}a.getPadding&&updateMaxPadding(s,a.getPadding());const l=Math.max(0,e.outerWidth-getCombinedMax(s,o,"left","right")),u=Math.max(0,e.outerHeight-getCombinedMax(s,o,"top","bottom")),d=l!==o.w,f=u!==o.h;return o.w=l,o.h=u,t.horizontal?{same:d,other:f}:{same:f,other:d}}function handleMaxPadding(o){const e=o.maxPadding;function t(n){const r=Math.max(e[n]-o[n],0);return o[n]+=r,r}o.y+=t("top"),o.x+=t("left"),t("right"),t("bottom")}function getMargins(o,e){const t=e.maxPadding;function n(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(s=>{a[s]=Math.max(e[s],t[s])}),a}return n(o?["left","right"]:["top","bottom"])}function fitBoxes(o,e,t,n){const r=[];let a,s,l,u,d,f;for(a=0,s=o.length,d=0;a<s;++a){l=o[a],u=l.box,u.update(l.width||e.w,l.height||e.h,getMargins(l.horizontal,e));const{same:m,other:h}=updateDims(e,t,l,n);d|=m&&r.length,f=f||h,u.fullSize||r.push(l)}return d&&fitBoxes(r,e,t,n)||f}function setBoxDims(o,e,t,n,r){o.top=t,o.left=e,o.right=e+n,o.bottom=t+r,o.width=n,o.height=r}function placeBoxes(o,e,t,n){const r=t.padding;let{x:a,y:s}=e;for(const l of o){const u=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},f=l.stackWeight/d.weight||1;if(l.horizontal){const m=e.w*f,h=d.size||u.height;defined(d.start)&&(s=d.start),u.fullSize?setBoxDims(u,r.left,s,t.outerWidth-r.right-r.left,h):setBoxDims(u,e.left+d.placed,s,m,h),d.start=s,d.placed+=m,s=u.bottom}else{const m=e.h*f,h=d.size||u.width;defined(d.start)&&(a=d.start),u.fullSize?setBoxDims(u,a,r.top,h,t.outerHeight-r.bottom-r.top):setBoxDims(u,a,e.top+d.placed,h,m),d.start=a,d.placed+=m,a=u.right}}e.x=a,e.y=s}defaults.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}});var layouts={addBox(o,e){o.boxes||(o.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},o.boxes.push(e)},removeBox(o,e){const t=o.boxes?o.boxes.indexOf(e):-1;t!==-1&&o.boxes.splice(t,1)},configure(o,e,t){e.fullSize=t.fullSize,e.position=t.position,e.weight=t.weight},update(o,e,t,n){if(!o)return;const r=toPadding(o.options.layout.padding),a=Math.max(e-r.width,0),s=Math.max(t-r.height,0),l=buildLayoutBoxes(o.boxes),u=l.vertical,d=l.horizontal;each(o.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});const f=u.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,m=Object.freeze({outerWidth:e,outerHeight:t,padding:r,availableWidth:a,availableHeight:s,vBoxMaxWidth:a/2/f,hBoxMaxHeight:s/2}),h=Object.assign({},r);updateMaxPadding(h,toPadding(n));const p=Object.assign({maxPadding:h,w:a,h:s,x:r.left,y:r.top},r),g=setLayoutDims(u.concat(d),m);fitBoxes(l.fullSize,p,m,g),fitBoxes(u,p,m,g),fitBoxes(d,p,m,g)&&fitBoxes(u,p,m,g),handleMaxPadding(p),placeBoxes(l.leftAndTop,p,m,g),p.x+=p.w,p.y+=p.h,placeBoxes(l.rightAndBottom,p,m,g),o.chartArea={left:p.left,top:p.top,right:p.left+p.w,bottom:p.top+p.h,height:p.h,width:p.w},each(l.chartArea,b=>{const v=b.box;Object.assign(v,o.chartArea),v.update(p.w,p.h,{left:0,top:0,right:0,bottom:0})})}};class BasePlatform{acquireContext(e,t){}releaseContext(e){return!1}addEventListener(e,t,n){}removeEventListener(e,t,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,t,n,r){return t=Math.max(0,t||e.width),n=n||e.height,{width:t,height:Math.max(0,r?Math.floor(t/r):n)}}isAttached(e){return!0}updateConfig(e){}}class BasicPlatform extends BasePlatform{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const EXPANDO_KEY="$chartjs",EVENT_TYPES={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},isNullOrEmpty=o=>o===null||o==="";function initCanvas(o,e){const t=o.style,n=o.getAttribute("height"),r=o.getAttribute("width");if(o[EXPANDO_KEY]={initial:{height:n,width:r,style:{display:t.display,height:t.height,width:t.width}}},t.display=t.display||"block",t.boxSizing=t.boxSizing||"border-box",isNullOrEmpty(r)){const a=readUsedSize(o,"width");a!==void 0&&(o.width=a)}if(isNullOrEmpty(n))if(o.style.height==="")o.height=o.width/(e||2);else{const a=readUsedSize(o,"height");a!==void 0&&(o.height=a)}return o}const eventListenerOptions=supportsEventListenerOptions?{passive:!0}:!1;function addListener(o,e,t){o.addEventListener(e,t,eventListenerOptions)}function removeListener(o,e,t){o.canvas.removeEventListener(e,t,eventListenerOptions)}function fromNativeEvent(o,e){const t=EVENT_TYPES[o.type]||o.type,{x:n,y:r}=getRelativePosition(o,e);return{type:t,chart:e,native:o,x:n!==void 0?n:null,y:r!==void 0?r:null}}function nodeListContains(o,e){for(const t of o)if(t===e||t.contains(e))return!0}function createAttachObserver(o,e,t){const n=o.canvas,r=new MutationObserver(a=>{let s=!1;for(const l of a)s=s||nodeListContains(l.addedNodes,n),s=s&&!nodeListContains(l.removedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}function createDetachObserver(o,e,t){const n=o.canvas,r=new MutationObserver(a=>{let s=!1;for(const l of a)s=s||nodeListContains(l.removedNodes,n),s=s&&!nodeListContains(l.addedNodes,n);s&&t()});return r.observe(document,{childList:!0,subtree:!0}),r}const drpListeningCharts=new Map;let oldDevicePixelRatio=0;function onWindowResize(){const o=window.devicePixelRatio;o!==oldDevicePixelRatio&&(oldDevicePixelRatio=o,drpListeningCharts.forEach((e,t)=>{t.currentDevicePixelRatio!==o&&e()}))}function listenDevicePixelRatioChanges(o,e){drpListeningCharts.size||window.addEventListener("resize",onWindowResize),drpListeningCharts.set(o,e)}function unlistenDevicePixelRatioChanges(o){drpListeningCharts.delete(o),drpListeningCharts.size||window.removeEventListener("resize",onWindowResize)}function createResizeObserver(o,e,t){const n=o.canvas,r=n&&_getParentNode(n);if(!r)return;const a=throttled((l,u)=>{const d=r.clientWidth;t(l,u),d<r.clientWidth&&t()},window),s=new ResizeObserver(l=>{const u=l[0],d=u.contentRect.width,f=u.contentRect.height;d===0&&f===0||a(d,f)});return s.observe(r),listenDevicePixelRatioChanges(o,a),s}function releaseObserver(o,e,t){t&&t.disconnect(),e==="resize"&&unlistenDevicePixelRatioChanges(o)}function createProxyAndListen(o,e,t){const n=o.canvas,r=throttled(a=>{o.ctx!==null&&t(fromNativeEvent(a,o))},o,a=>{const s=a[0];return[s,s.offsetX,s.offsetY]});return addListener(n,e,r),r}class DomPlatform extends BasePlatform{acquireContext(e,t){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(initCanvas(e,t),n):null}releaseContext(e){const t=e.canvas;if(!t[EXPANDO_KEY])return!1;const n=t[EXPANDO_KEY].initial;["height","width"].forEach(a=>{const s=n[a];isNullOrUndef(s)?t.removeAttribute(a):t.setAttribute(a,s)});const r=n.style||{};return Object.keys(r).forEach(a=>{t.style[a]=r[a]}),t.width=t.width,delete t[EXPANDO_KEY],!0}addEventListener(e,t,n){this.removeEventListener(e,t);const r=e.$proxies||(e.$proxies={}),s={attach:createAttachObserver,detach:createDetachObserver,resize:createResizeObserver}[t]||createProxyAndListen;r[t]=s(e,t,n)}removeEventListener(e,t){const n=e.$proxies||(e.$proxies={}),r=n[t];if(!r)return;({attach:releaseObserver,detach:releaseObserver,resize:releaseObserver}[t]||removeListener)(e,t,r),n[t]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,t,n,r){return getMaximumSize(e,t,n,r)}isAttached(e){const t=_getParentNode(e);return!!(t&&t.isConnected)}}function _detectPlatform(o){return!_isDomSupported()||typeof OffscreenCanvas<"u"&&o instanceof OffscreenCanvas?BasicPlatform:DomPlatform}let Element$1=class{constructor(){this.x=void 0,this.y=void 0,this.active=!1,this.options=void 0,this.$animations=void 0}tooltipPosition(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}hasValue(){return isNumber(this.x)&&isNumber(this.y)}getProps(e,t){const n=this.$animations;if(!t||!n)return this;const r={};return e.forEach(a=>{r[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),r}};Element$1.defaults={};Element$1.defaultRoutes=void 0;const formatters={values(o){return isArray(o)?o:""+o},numeric(o,e,t){if(o===0)return"0";const n=this.chart.options.locale;let r,a=o;if(t.length>1){const d=Math.max(Math.abs(t[0].value),Math.abs(t[t.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),a=calculateDelta(o,t)}const s=log10(Math.abs(a)),l=Math.max(Math.min(-1*Math.floor(s),20),0),u={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(u,this.options.ticks.format),formatNumber(o,n,u)},logarithmic(o,e,t){if(o===0)return"0";const n=o/Math.pow(10,Math.floor(log10(o)));return n===1||n===2||n===5?formatters.numeric.call(this,o,e,t):""}};function calculateDelta(o,e){let t=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(t)>=1&&o!==Math.floor(o)&&(t=o-Math.floor(o)),t}var Ticks={formatters};defaults.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",grace:0,grid:{display:!0,lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(o,e)=>e.lineWidth,tickColor:(o,e)=>e.color,offset:!1,borderDash:[],borderDashOffset:0,borderWidth:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Ticks.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}});defaults.route("scale.ticks","color","","color");defaults.route("scale.grid","color","","borderColor");defaults.route("scale.grid","borderColor","","borderColor");defaults.route("scale.title","color","","color");defaults.describe("scale",{_fallback:!1,_scriptable:o=>!o.startsWith("before")&&!o.startsWith("after")&&o!=="callback"&&o!=="parser",_indexable:o=>o!=="borderDash"&&o!=="tickBorderDash"});defaults.describe("scales",{_fallback:"scale"});defaults.describe("scale.ticks",{_scriptable:o=>o!=="backdropPadding"&&o!=="callback",_indexable:o=>o!=="backdropPadding"});function autoSkip(o,e){const t=o.options.ticks,n=t.maxTicksLimit||determineMaxTicks(o),r=t.major.enabled?getMajorIndices(e):[],a=r.length,s=r[0],l=r[a-1],u=[];if(a>n)return skipMajors(e,u,r,a/n),u;const d=calculateSpacing(r,e,n);if(a>0){let f,m;const h=a>1?Math.round((l-s)/(a-1)):null;for(skip(e,u,d,isNullOrUndef(h)?0:s-h,s),f=0,m=a-1;f<m;f++)skip(e,u,d,r[f],r[f+1]);return skip(e,u,d,l,isNullOrUndef(h)?e.length:l+h),u}return skip(e,u,d),u}function determineMaxTicks(o){const e=o.options.offset,t=o._tickSize(),n=o._length/t+(e?0:1),r=o._maxLength/t;return Math.floor(Math.min(n,r))}function calculateSpacing(o,e,t){const n=getEvenSpacing(o),r=e.length/t;if(!n)return Math.max(r,1);const a=_factorize(n);for(let s=0,l=a.length-1;s<l;s++){const u=a[s];if(u>r)return u}return Math.max(r,1)}function getMajorIndices(o){const e=[];let t,n;for(t=0,n=o.length;t<n;t++)o[t].major&&e.push(t);return e}function skipMajors(o,e,t,n){let r=0,a=t[0],s;for(n=Math.ceil(n),s=0;s<o.length;s++)s===a&&(e.push(o[s]),r++,a=t[r*n])}function skip(o,e,t,n,r){const a=valueOrDefault(n,0),s=Math.min(valueOrDefault(r,o.length),o.length);let l=0,u,d,f;for(t=Math.ceil(t),r&&(u=r-n,t=u/Math.floor(u/t)),f=a;f<0;)l++,f=Math.round(a+l*t);for(d=Math.max(a,0);d<s;d++)d===f&&(e.push(o[d]),l++,f=Math.round(a+l*t))}function getEvenSpacing(o){const e=o.length;let t,n;if(e<2)return!1;for(n=o[0],t=1;t<e;++t)if(o[t]-o[t-1]!==n)return!1;return n}const reverseAlign=o=>o==="left"?"right":o==="right"?"left":o,offsetFromEdge=(o,e,t)=>e==="top"||e==="left"?o[e]+t:o[e]-t;function sample(o,e){const t=[],n=o.length/e,r=o.length;let a=0;for(;a<r;a+=n)t.push(o[Math.floor(a)]);return t}function getPixelForGridLine(o,e,t){const n=o.ticks.length,r=Math.min(e,n-1),a=o._startPixel,s=o._endPixel,l=1e-6;let u=o.getPixelForTick(r),d;if(!(t&&(n===1?d=Math.max(u-a,s-u):e===0?d=(o.getPixelForTick(1)-u)/2:d=(u-o.getPixelForTick(r-1))/2,u+=r<e?d:-d,u<a-l||u>s+l)))return u}function garbageCollect(o,e){each(o,t=>{const n=t.gc,r=n.length/2;let a;if(r>e){for(a=0;a<r;++a)delete t.data[n[a]];n.splice(0,r)}})}function getTickMarkLength(o){return o.drawTicks?o.tickLength:0}function getTitleHeight(o,e){if(!o.display)return 0;const t=toFont(o.font,e),n=toPadding(o.padding);return(isArray(o.text)?o.text.length:1)*t.lineHeight+n.height}function createScaleContext(o,e){return createContext(o,{scale:e,type:"scale"})}function createTickContext(o,e,t){return createContext(o,{tick:t,index:e,type:"tick"})}function titleAlign(o,e,t){let n=_toLeftRightCenter(o);return(t&&e!=="right"||!t&&e==="right")&&(n=reverseAlign(n)),n}function titleArgs(o,e,t,n){const{top:r,left:a,bottom:s,right:l,chart:u}=o,{chartArea:d,scales:f}=u;let m=0,h,p,g;const b=s-r,v=l-a;if(o.isHorizontal()){if(p=_alignStartEnd(n,a,l),isObject(t)){const y=Object.keys(t)[0],C=t[y];g=f[y].getPixelForValue(C)+b-e}else t==="center"?g=(d.bottom+d.top)/2+b-e:g=offsetFromEdge(o,t,e);h=l-a}else{if(isObject(t)){const y=Object.keys(t)[0],C=t[y];p=f[y].getPixelForValue(C)-v+e}else t==="center"?p=(d.left+d.right)/2-v+e:p=offsetFromEdge(o,t,e);g=_alignStartEnd(n,s,r),m=t==="left"?-HALF_PI:HALF_PI}return{titleX:p,titleY:g,maxWidth:h,rotation:m}}class Scale extends Element$1{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,t){return e}getUserBounds(){let{_userMin:e,_userMax:t,_suggestedMin:n,_suggestedMax:r}=this;return e=finiteOrDefault(e,Number.POSITIVE_INFINITY),t=finiteOrDefault(t,Number.NEGATIVE_INFINITY),n=finiteOrDefault(n,Number.POSITIVE_INFINITY),r=finiteOrDefault(r,Number.NEGATIVE_INFINITY),{min:finiteOrDefault(e,n),max:finiteOrDefault(t,r),minDefined:isNumberFinite(e),maxDefined:isNumberFinite(t)}}getMinMax(e){let{min:t,max:n,minDefined:r,maxDefined:a}=this.getUserBounds(),s;if(r&&a)return{min:t,max:n};const l=this.getMatchingVisibleMetas();for(let u=0,d=l.length;u<d;++u)s=l[u].controller.getMinMax(this,e),r||(t=Math.min(t,s.min)),a||(n=Math.max(n,s.max));return t=a&&t>n?n:t,n=r&&t>n?t:n,{min:finiteOrDefault(t,finiteOrDefault(n,t)),max:finiteOrDefault(n,finiteOrDefault(t,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){callback(this.options.beforeUpdate,[this])}update(e,t,n){const{beginAtZero:r,grace:a,ticks:s}=this.options,l=s.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=t,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=_addGrace(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const u=l<this.ticks.length;this._convertTicksToLabels(u?sample(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),s.display&&(s.autoSkip||s.source==="auto")&&(this.ticks=autoSkip(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),u&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,t,n;this.isHorizontal()?(t=this.left,n=this.right):(t=this.top,n=this.bottom,e=!e),this._startPixel=t,this._endPixel=n,this._reversePixels=e,this._length=n-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){callback(this.options.afterUpdate,[this])}beforeSetDimensions(){callback(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){callback(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),callback(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){callback(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const t=this.options.ticks;let n,r,a;for(n=0,r=e.length;n<r;n++)a=e[n],a.label=callback(t.callback,[a.value,n,e],this)}afterTickToLabelConversion(){callback(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){callback(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,t=e.ticks,n=this.ticks.length,r=t.minRotation||0,a=t.maxRotation;let s=r,l,u,d;if(!this._isVisible()||!t.display||r>=a||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const f=this._getLabelSizes(),m=f.widest.width,h=f.highest.height,p=_limitValue(this.chart.width-m,0,this.maxWidth);l=e.offset?this.maxWidth/n:p/(n-1),m+6>l&&(l=p/(n-(e.offset?.5:1)),u=this.maxHeight-getTickMarkLength(e.grid)-t.padding-getTitleHeight(e.title,this.chart.options.font),d=Math.sqrt(m*m+h*h),s=toDegrees(Math.min(Math.asin(_limitValue((f.highest.height+6)/l,-1,1)),Math.asin(_limitValue(u/d,-1,1))-Math.asin(_limitValue(h/d,-1,1)))),s=Math.max(r,Math.min(a,s))),this.labelRotation=s}afterCalculateLabelRotation(){callback(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){callback(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:t,options:{ticks:n,title:r,grid:a}}=this,s=this._isVisible(),l=this.isHorizontal();if(s){const u=getTitleHeight(r,t.options.font);if(l?(e.width=this.maxWidth,e.height=getTickMarkLength(a)+u):(e.height=this.maxHeight,e.width=getTickMarkLength(a)+u),n.display&&this.ticks.length){const{first:d,last:f,widest:m,highest:h}=this._getLabelSizes(),p=n.padding*2,g=toRadians(this.labelRotation),b=Math.cos(g),v=Math.sin(g);if(l){const y=n.mirror?0:v*m.width+b*h.height;e.height=Math.min(this.maxHeight,e.height+y+p)}else{const y=n.mirror?0:b*m.width+v*h.height;e.width=Math.min(this.maxWidth,e.width+y+p)}this._calculatePadding(d,f,v,b)}}this._handleMargins(),l?(this.width=this._length=t.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=t.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,t,n,r){const{ticks:{align:a,padding:s},position:l}=this.options,u=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const f=this.getPixelForTick(0)-this.left,m=this.right-this.getPixelForTick(this.ticks.length-1);let h=0,p=0;u?d?(h=r*e.width,p=n*t.height):(h=n*e.height,p=r*t.width):a==="start"?p=t.width:a==="end"?h=e.width:a!=="inner"&&(h=e.width/2,p=t.width/2),this.paddingLeft=Math.max((h-f+s)*this.width/(this.width-f),0),this.paddingRight=Math.max((p-m+s)*this.width/(this.width-m),0)}else{let f=t.height/2,m=e.height/2;a==="start"?(f=0,m=e.height):a==="end"&&(f=t.height,m=0),this.paddingTop=f+s,this.paddingBottom=m+s}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){callback(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:t}=this.options;return t==="top"||t==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let t,n;for(t=0,n=e.length;t<n;t++)isNullOrUndef(e[t].label)&&(e.splice(t,1),n--,t--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const t=this.options.ticks.sampleSize;let n=this.ticks;t<n.length&&(n=sample(n,t)),this._labelSizes=e=this._computeLabelSizes(n,n.length)}return e}_computeLabelSizes(e,t){const{ctx:n,_longestTextCache:r}=this,a=[],s=[];let l=0,u=0,d,f,m,h,p,g,b,v,y,C,E;for(d=0;d<t;++d){if(h=e[d].label,p=this._resolveTickFontOptions(d),n.font=g=p.string,b=r[g]=r[g]||{data:{},gc:[]},v=p.lineHeight,y=C=0,!isNullOrUndef(h)&&!isArray(h))y=_measureText(n,b.data,b.gc,y,h),C=v;else if(isArray(h))for(f=0,m=h.length;f<m;++f)E=h[f],!isNullOrUndef(E)&&!isArray(E)&&(y=_measureText(n,b.data,b.gc,y,E),C+=v);a.push(y),s.push(C),l=Math.max(y,l),u=Math.max(C,u)}garbageCollect(r,t);const A=a.indexOf(l),k=s.indexOf(u),T=$=>({width:a[$]||0,height:s[$]||0});return{first:T(0),last:T(t-1),widest:T(A),highest:T(k),widths:a,heights:s}}getLabelForValue(e){return e}getPixelForValue(e,t){return NaN}getValueForPixel(e){}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const t=this._startPixel+e*this._length;return _int16Range(this._alignToPixels?_alignPixel(this.chart,t,0):t)}getDecimalForPixel(e){const t=(e-this._startPixel)/this._length;return this._reversePixels?1-t:t}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:t}=this;return e<0&&t<0?t:e>0&&t>0?e:0}getContext(e){const t=this.ticks||[];if(e>=0&&e<t.length){const n=t[e];return n.$context||(n.$context=createTickContext(this.getContext(),e,n))}return this.$context||(this.$context=createScaleContext(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,t=toRadians(this.labelRotation),n=Math.abs(Math.cos(t)),r=Math.abs(Math.sin(t)),a=this._getLabelSizes(),s=e.autoSkipPadding||0,l=a?a.widest.width+s:0,u=a?a.highest.height+s:0;return this.isHorizontal()?u*n>l*r?l/n:u/r:u*r<l*n?u/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const t=this.axis,n=this.chart,r=this.options,{grid:a,position:s}=r,l=a.offset,u=this.isHorizontal(),f=this.ticks.length+(l?1:0),m=getTickMarkLength(a),h=[],p=a.setContext(this.getContext()),g=p.drawBorder?p.borderWidth:0,b=g/2,v=function(x){return _alignPixel(n,x,g)};let y,C,E,A,k,T,$,S,I,R,N,M;if(s==="top")y=v(this.bottom),T=this.bottom-m,S=y-b,R=v(e.top)+b,M=e.bottom;else if(s==="bottom")y=v(this.top),R=e.top,M=v(e.bottom)-b,T=y+b,S=this.top+m;else if(s==="left")y=v(this.right),k=this.right-m,$=y-b,I=v(e.left)+b,N=e.right;else if(s==="right")y=v(this.left),I=e.left,N=v(e.right)-b,k=y+b,$=this.left+m;else if(t==="x"){if(s==="center")y=v((e.top+e.bottom)/2+.5);else if(isObject(s)){const x=Object.keys(s)[0],B=s[x];y=v(this.chart.scales[x].getPixelForValue(B))}R=e.top,M=e.bottom,T=y+b,S=T+m}else if(t==="y"){if(s==="center")y=v((e.left+e.right)/2);else if(isObject(s)){const x=Object.keys(s)[0],B=s[x];y=v(this.chart.scales[x].getPixelForValue(B))}k=y-b,$=k-m,I=e.left,N=e.right}const F=valueOrDefault(r.ticks.maxTicksLimit,f),D=Math.max(1,Math.ceil(f/F));for(C=0;C<f;C+=D){const x=a.setContext(this.getContext(C)),B=x.lineWidth,K=x.color,U=a.borderDash||[],G=x.borderDashOffset,W=x.tickWidth,q=x.tickColor,H=x.tickBorderDash||[],z=x.tickBorderDashOffset;E=getPixelForGridLine(this,C,l),E!==void 0&&(A=_alignPixel(n,E,B),u?k=$=I=N=A:T=S=R=M=A,h.push({tx1:k,ty1:T,tx2:$,ty2:S,x1:I,y1:R,x2:N,y2:M,width:B,color:K,borderDash:U,borderDashOffset:G,tickWidth:W,tickColor:q,tickBorderDash:H,tickBorderDashOffset:z}))}return this._ticksLength=f,this._borderValue=y,h}_computeLabelItems(e){const t=this.axis,n=this.options,{position:r,ticks:a}=n,s=this.isHorizontal(),l=this.ticks,{align:u,crossAlign:d,padding:f,mirror:m}=a,h=getTickMarkLength(n.grid),p=h+f,g=m?-f:p,b=-toRadians(this.labelRotation),v=[];let y,C,E,A,k,T,$,S,I,R,N,M,F="middle";if(r==="top")T=this.bottom-g,$=this._getXAxisLabelAlignment();else if(r==="bottom")T=this.top+g,$=this._getXAxisLabelAlignment();else if(r==="left"){const x=this._getYAxisLabelAlignment(h);$=x.textAlign,k=x.x}else if(r==="right"){const x=this._getYAxisLabelAlignment(h);$=x.textAlign,k=x.x}else if(t==="x"){if(r==="center")T=(e.top+e.bottom)/2+p;else if(isObject(r)){const x=Object.keys(r)[0],B=r[x];T=this.chart.scales[x].getPixelForValue(B)+p}$=this._getXAxisLabelAlignment()}else if(t==="y"){if(r==="center")k=(e.left+e.right)/2-p;else if(isObject(r)){const x=Object.keys(r)[0],B=r[x];k=this.chart.scales[x].getPixelForValue(B)}$=this._getYAxisLabelAlignment(h).textAlign}t==="y"&&(u==="start"?F="top":u==="end"&&(F="bottom"));const D=this._getLabelSizes();for(y=0,C=l.length;y<C;++y){E=l[y],A=E.label;const x=a.setContext(this.getContext(y));S=this.getPixelForTick(y)+a.labelOffset,I=this._resolveTickFontOptions(y),R=I.lineHeight,N=isArray(A)?A.length:1;const B=N/2,K=x.color,U=x.textStrokeColor,G=x.textStrokeWidth;let W=$;s?(k=S,$==="inner"&&(y===C-1?W=this.options.reverse?"left":"right":y===0?W=this.options.reverse?"right":"left":W="center"),r==="top"?d==="near"||b!==0?M=-N*R+R/2:d==="center"?M=-D.highest.height/2-B*R+R:M=-D.highest.height+R/2:d==="near"||b!==0?M=R/2:d==="center"?M=D.highest.height/2-B*R:M=D.highest.height-N*R,m&&(M*=-1)):(T=S,M=(1-N)*R/2);let q;if(x.showLabelBackdrop){const H=toPadding(x.backdropPadding),z=D.heights[y],Y=D.widths[y];let V=T+M-H.top,J=k-H.left;switch(F){case"middle":V-=z/2;break;case"bottom":V-=z;break}switch($){case"center":J-=Y/2;break;case"right":J-=Y;break}q={left:J,top:V,width:Y+H.width,height:z+H.height,color:x.backdropColor}}v.push({rotation:b,label:A,font:I,color:K,strokeColor:U,strokeWidth:G,textOffset:M,textAlign:W,textBaseline:F,translation:[k,T],backdrop:q})}return v}_getXAxisLabelAlignment(){const{position:e,ticks:t}=this.options;if(-toRadians(this.labelRotation))return e==="top"?"left":"right";let r="center";return t.align==="start"?r="left":t.align==="end"?r="right":t.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:t,ticks:{crossAlign:n,mirror:r,padding:a}}=this.options,s=this._getLabelSizes(),l=e+a,u=s.widest.width;let d,f;return t==="left"?r?(f=this.right+a,n==="near"?d="left":n==="center"?(d="center",f+=u/2):(d="right",f+=u)):(f=this.right-l,n==="near"?d="right":n==="center"?(d="center",f-=u/2):(d="left",f=this.left)):t==="right"?r?(f=this.left+a,n==="near"?d="right":n==="center"?(d="center",f-=u/2):(d="left",f-=u)):(f=this.left+l,n==="near"?d="left":n==="center"?(d="center",f+=u/2):(d="right",f=this.right)):d="right",{textAlign:d,x:f}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,t=this.options.position;if(t==="left"||t==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(t==="top"||t==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:t},left:n,top:r,width:a,height:s}=this;t&&(e.save(),e.fillStyle=t,e.fillRect(n,r,a,s),e.restore())}getLineWidthForValue(e){const t=this.options.grid;if(!this._isVisible()||!t.display)return 0;const r=this.ticks.findIndex(a=>a.value===e);return r>=0?t.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const t=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,s;const l=(u,d,f)=>{!f.width||!f.color||(n.save(),n.lineWidth=f.width,n.strokeStyle=f.color,n.setLineDash(f.borderDash||[]),n.lineDashOffset=f.borderDashOffset,n.beginPath(),n.moveTo(u.x,u.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(t.display)for(a=0,s=r.length;a<s;++a){const u=r[a];t.drawOnChartArea&&l({x:u.x1,y:u.y1},{x:u.x2,y:u.y2},u),t.drawTicks&&l({x:u.tx1,y:u.ty1},{x:u.tx2,y:u.ty2},{color:u.tickColor,width:u.tickWidth,borderDash:u.tickBorderDash,borderDashOffset:u.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:t,options:{grid:n}}=this,r=n.setContext(this.getContext()),a=n.drawBorder?r.borderWidth:0;if(!a)return;const s=n.setContext(this.getContext(0)).lineWidth,l=this._borderValue;let u,d,f,m;this.isHorizontal()?(u=_alignPixel(e,this.left,a)-a/2,d=_alignPixel(e,this.right,s)+s/2,f=m=l):(f=_alignPixel(e,this.top,a)-a/2,m=_alignPixel(e,this.bottom,s)+s/2,u=d=l),t.save(),t.lineWidth=r.borderWidth,t.strokeStyle=r.borderColor,t.beginPath(),t.moveTo(u,f),t.lineTo(d,m),t.stroke(),t.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&clipArea(n,r);const a=this._labelItems||(this._labelItems=this._computeLabelItems(e));let s,l;for(s=0,l=a.length;s<l;++s){const u=a[s],d=u.font,f=u.label;u.backdrop&&(n.fillStyle=u.backdrop.color,n.fillRect(u.backdrop.left,u.backdrop.top,u.backdrop.width,u.backdrop.height));let m=u.textOffset;renderText(n,f,0,m,d,u)}r&&unclipArea(n)}drawTitle(){const{ctx:e,options:{position:t,title:n,reverse:r}}=this;if(!n.display)return;const a=toFont(n.font),s=toPadding(n.padding),l=n.align;let u=a.lineHeight/2;t==="bottom"||t==="center"||isObject(t)?(u+=s.bottom,isArray(n.text)&&(u+=a.lineHeight*(n.text.length-1))):u+=s.top;const{titleX:d,titleY:f,maxWidth:m,rotation:h}=titleArgs(this,u,t,l);renderText(e,n.text,0,0,a,{color:n.color,maxWidth:m,rotation:h,textAlign:titleAlign(l,t,r),textBaseline:"middle",translation:[d,f]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,t=e.ticks&&e.ticks.z||0,n=valueOrDefault(e.grid&&e.grid.z,-1);return!this._isVisible()||this.draw!==Scale.prototype.draw?[{z:t,draw:r=>{this.draw(r)}}]:[{z:n,draw:r=>{this.drawBackground(),this.drawGrid(r),this.drawTitle()}},{z:n+1,draw:()=>{this.drawBorder()}},{z:t,draw:r=>{this.drawLabels(r)}}]}getMatchingVisibleMetas(e){const t=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let a,s;for(a=0,s=t.length;a<s;++a){const l=t[a];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const t=this.options.ticks.setContext(this.getContext(e));return toFont(t.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class TypedRegistry{constructor(e,t,n){this.type=e,this.scope=t,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const t=Object.getPrototypeOf(e);let n;isIChartComponent(t)&&(n=this.register(t));const r=this.items,a=e.id,s=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,registerDefaults(e,s,n),this.override&&defaults.override(e.id,e.overrides)),s}get(e){return this.items[e]}unregister(e){const t=this.items,n=e.id,r=this.scope;n in t&&delete t[n],r&&n in defaults[r]&&(delete defaults[r][n],this.override&&delete overrides[n])}}function registerDefaults(o,e,t){const n=merge(Object.create(null),[t?defaults.get(t):{},defaults.get(e),o.defaults]);defaults.set(e,n),o.defaultRoutes&&routeDefaults(e,o.defaultRoutes),o.descriptors&&defaults.describe(e,o.descriptors)}function routeDefaults(o,e){Object.keys(e).forEach(t=>{const n=t.split("."),r=n.pop(),a=[o].concat(n).join("."),s=e[t].split("."),l=s.pop(),u=s.join(".");defaults.route(a,r,u,l)})}function isIChartComponent(o){return"id"in o&&"defaults"in o}class Registry{constructor(){this.controllers=new TypedRegistry(DatasetController,"datasets",!0),this.elements=new TypedRegistry(Element$1,"elements"),this.plugins=new TypedRegistry(Object,"plugins"),this.scales=new TypedRegistry(Scale,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,t,n){[...t].forEach(r=>{const a=n||this._getRegistryForType(r);n||a.isForType(r)||a===this.plugins&&r.id?this._exec(e,a,r):each(r,s=>{const l=n||this._getRegistryForType(s);this._exec(e,l,s)})})}_exec(e,t,n){const r=_capitalize(e);callback(n["before"+r],[],n),t[e](n),callback(n["after"+r],[],n)}_getRegistryForType(e){for(let t=0;t<this._typedRegistries.length;t++){const n=this._typedRegistries[t];if(n.isForType(e))return n}return this.plugins}_get(e,t,n){const r=t.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var registry=new Registry;class PluginService{constructor(){this._init=[]}notify(e,t,n,r){t==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=r?this._descriptors(e).filter(r):this._descriptors(e),s=this._notify(a,e,t,n);return t==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),s}_notify(e,t,n,r){r=r||{};for(const a of e){const s=a.plugin,l=s[n],u=[t,r,a.options];if(callback(l,u,s)===!1&&r.cancelable)return!1}return!0}invalidate(){isNullOrUndef(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const t=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),t}_createDescriptors(e,t){const n=e&&e.config,r=valueOrDefault(n.options&&n.options.plugins,{}),a=allPlugins(n);return r===!1&&!t?[]:createDescriptors(e,a,r,t)}_notifyStateChanges(e){const t=this._oldCache||[],n=this._cache,r=(a,s)=>a.filter(l=>!s.some(u=>l.plugin.id===u.plugin.id));this._notify(r(t,n),e,"stop"),this._notify(r(n,t),e,"start")}}function allPlugins(o){const e={},t=[],n=Object.keys(registry.plugins.items);for(let a=0;a<n.length;a++)t.push(registry.getPlugin(n[a]));const r=o.plugins||[];for(let a=0;a<r.length;a++){const s=r[a];t.indexOf(s)===-1&&(t.push(s),e[s.id]=!0)}return{plugins:t,localIds:e}}function getOpts(o,e){return!e&&o===!1?null:o===!0?{}:o}function createDescriptors(o,{plugins:e,localIds:t},n,r){const a=[],s=o.getContext();for(const l of e){const u=l.id,d=getOpts(n[u],r);d!==null&&a.push({plugin:l,options:pluginOpts(o.config,{plugin:l,local:t[u]},d,s)})}return a}function pluginOpts(o,{plugin:e,local:t},n,r){const a=o.pluginScopeKeys(e),s=o.getOptionScopes(n,a);return t&&e.defaults&&s.push(e.defaults),o.createResolver(s,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function getIndexAxis(o,e){const t=defaults.datasets[o]||{};return((e.datasets||{})[o]||{}).indexAxis||e.indexAxis||t.indexAxis||"x"}function getAxisFromDefaultScaleID(o,e){let t=o;return o==="_index_"?t=e:o==="_value_"&&(t=e==="x"?"y":"x"),t}function getDefaultScaleIDFromAxis(o,e){return o===e?"_index_":"_value_"}function axisFromPosition(o){if(o==="top"||o==="bottom")return"x";if(o==="left"||o==="right")return"y"}function determineAxis(o,e){return o==="x"||o==="y"?o:e.axis||axisFromPosition(e.position)||o.charAt(0).toLowerCase()}function mergeScaleConfig(o,e){const t=overrides[o.type]||{scales:{}},n=e.scales||{},r=getIndexAxis(o.type,e),a=Object.create(null),s=Object.create(null);return Object.keys(n).forEach(l=>{const u=n[l];if(!isObject(u))return console.error(`Invalid scale configuration for scale: ${l}`);if(u._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${l}`);const d=determineAxis(l,u),f=getDefaultScaleIDFromAxis(d,r),m=t.scales||{};a[d]=a[d]||l,s[l]=mergeIf(Object.create(null),[{axis:d},u,m[d],m[f]])}),o.data.datasets.forEach(l=>{const u=l.type||o.type,d=l.indexAxis||getIndexAxis(u,e),m=(overrides[u]||{}).scales||{};Object.keys(m).forEach(h=>{const p=getAxisFromDefaultScaleID(h,d),g=l[p+"AxisID"]||a[p]||p;s[g]=s[g]||Object.create(null),mergeIf(s[g],[{axis:p},n[g],m[h]])})}),Object.keys(s).forEach(l=>{const u=s[l];mergeIf(u,[defaults.scales[u.type],defaults.scale])}),s}function initOptions(o){const e=o.options||(o.options={});e.plugins=valueOrDefault(e.plugins,{}),e.scales=mergeScaleConfig(o,e)}function initData(o){return o=o||{},o.datasets=o.datasets||[],o.labels=o.labels||[],o}function initConfig(o){return o=o||{},o.data=initData(o.data),initOptions(o),o}const keyCache=new Map,keysCached=new Set;function cachedKeys(o,e){let t=keyCache.get(o);return t||(t=e(),keyCache.set(o,t),keysCached.add(t)),t}const addIfFound=(o,e,t)=>{const n=resolveObjectKey(e,t);n!==void 0&&o.add(n)};class Config{constructor(e){this._config=initConfig(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=initData(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),initOptions(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return cachedKeys(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,t){return cachedKeys(`${e}.transition.${t}`,()=>[[`datasets.${e}.transitions.${t}`,`transitions.${t}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,t){return cachedKeys(`${e}-${t}`,()=>[[`datasets.${e}.elements.${t}`,`datasets.${e}`,`elements.${t}`,""]])}pluginScopeKeys(e){const t=e.id,n=this.type;return cachedKeys(`${n}-plugin-${t}`,()=>[[`plugins.${t}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,t){const n=this._scopeCache;let r=n.get(e);return(!r||t)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,t,n){const{options:r,type:a}=this,s=this._cachedScopes(e,n),l=s.get(t);if(l)return l;const u=new Set;t.forEach(f=>{e&&(u.add(e),f.forEach(m=>addIfFound(u,e,m))),f.forEach(m=>addIfFound(u,r,m)),f.forEach(m=>addIfFound(u,overrides[a]||{},m)),f.forEach(m=>addIfFound(u,defaults,m)),f.forEach(m=>addIfFound(u,descriptors,m))});const d=Array.from(u);return d.length===0&&d.push(Object.create(null)),keysCached.has(t)&&s.set(t,d),d}chartOptionScopes(){const{options:e,type:t}=this;return[e,overrides[t]||{},defaults.datasets[t]||{},{type:t},defaults,descriptors]}resolveNamedOptions(e,t,n,r=[""]){const a={$shared:!0},{resolver:s,subPrefixes:l}=getResolver(this._resolverCache,e,r);let u=s;if(needContext(s,t)){a.$shared=!1,n=isFunction(n)?n():n;const d=this.createResolver(e,n,l);u=_attachContext(s,n,d)}for(const d of t)a[d]=u[d];return a}createResolver(e,t,n=[""],r){const{resolver:a}=getResolver(this._resolverCache,e,n);return isObject(t)?_attachContext(a,t,void 0,r):a}}function getResolver(o,e,t){let n=o.get(e);n||(n=new Map,o.set(e,n));const r=t.join();let a=n.get(r);return a||(a={resolver:_createResolver(e,t),subPrefixes:t.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,a)),a}const hasFunction=o=>isObject(o)&&Object.getOwnPropertyNames(o).reduce((e,t)=>e||isFunction(o[t]),!1);function needContext(o,e){const{isScriptable:t,isIndexable:n}=_descriptors(o);for(const r of e){const a=t(r),s=n(r),l=(s||a)&&o[r];if(a&&(isFunction(l)||hasFunction(l))||s&&isArray(l))return!0}return!1}var version="3.8.2";const KNOWN_POSITIONS=["top","bottom","left","right","chartArea"];function positionIsHorizontal(o,e){return o==="top"||o==="bottom"||KNOWN_POSITIONS.indexOf(o)===-1&&e==="x"}function compare2Level(o,e){return function(t,n){return t[o]===n[o]?t[e]-n[e]:t[o]-n[o]}}function onAnimationsComplete(o){const e=o.chart,t=e.options.animation;e.notifyPlugins("afterRender"),callback(t&&t.onComplete,[o],e)}function onAnimationProgress(o){const e=o.chart,t=e.options.animation;callback(t&&t.onProgress,[o],e)}function getCanvas(o){return _isDomSupported()&&typeof o=="string"?o=document.getElementById(o):o&&o.length&&(o=o[0]),o&&o.canvas&&(o=o.canvas),o}const instances={},getChart=o=>{const e=getCanvas(o);return Object.values(instances).filter(t=>t.canvas===e).pop()};function moveNumericKeys(o,e,t){const n=Object.keys(o);for(const r of n){const a=+r;if(a>=e){const s=o[r];delete o[r],(t>0||a>e)&&(o[a+t]=s)}}}function determineLastEvent(o,e,t,n){return!t||o.type==="mouseout"?null:n?e:o}class Chart{constructor(e,t){const n=this.config=new Config(t),r=getCanvas(e),a=getChart(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const s=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||_detectPlatform(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,s.aspectRatio),u=l&&l.canvas,d=u&&u.height,f=u&&u.width;if(this.id=uid(),this.ctx=l,this.canvas=u,this.width=f,this.height=d,this._options=s,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new PluginService,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=debounce$1(m=>this.update(m),s.resizeDelay||0),this._dataChanges=[],instances[this.id]=this,!l||!u){console.error("Failed to create chart: can't acquire context from the given item");return}animator.listen(this,"complete",onAnimationsComplete),animator.listen(this,"progress",onAnimationProgress),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:t},width:n,height:r,_aspectRatio:a}=this;return isNullOrUndef(e)?t&&a?a:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():retinaScale(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return clearCanvas(this.canvas,this.ctx),this}stop(){return animator.stop(this),this}resize(e,t){animator.running(this)?this._resizeBeforeDraw={width:e,height:t}:this._resize(e,t)}_resize(e,t){const n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,s=this.platform.getMaximumSize(r,e,t,a),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),u=this.width?"resize":"attach";this.width=s.width,this.height=s.height,this._aspectRatio=this.aspectRatio,retinaScale(this,l,!0)&&(this.notifyPlugins("resize",{size:s}),callback(n.onResize,[this,s],this),this.attached&&this._doResize(u)&&this.render())}ensureScalesHaveIDs(){const t=this.options.scales||{};each(t,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,t=e.scales,n=this.scales,r=Object.keys(n).reduce((s,l)=>(s[l]=!1,s),{});let a=[];t&&(a=a.concat(Object.keys(t).map(s=>{const l=t[s],u=determineAxis(s,l),d=u==="r",f=u==="x";return{options:l,dposition:d?"chartArea":f?"bottom":"left",dtype:d?"radialLinear":f?"category":"linear"}}))),each(a,s=>{const l=s.options,u=l.id,d=determineAxis(u,l),f=valueOrDefault(l.type,s.dtype);(l.position===void 0||positionIsHorizontal(l.position,d)!==positionIsHorizontal(s.dposition))&&(l.position=s.dposition),r[u]=!0;let m=null;if(u in n&&n[u].type===f)m=n[u];else{const h=registry.getScale(f);m=new h({id:u,type:f,ctx:this.ctx,chart:this}),n[m.id]=m}m.init(l,e)}),each(r,(s,l)=>{s||delete n[l]}),each(n,s=>{layouts.configure(this,s,s.options),layouts.addBox(this,s)})}_updateMetasets(){const e=this._metasets,t=this.data.datasets.length,n=e.length;if(e.sort((r,a)=>r.index-a.index),n>t){for(let r=t;r<n;++r)this._destroyDatasetMeta(r);e.splice(t,n-t)}this._sortedMetasets=e.slice(0).sort(compare2Level("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:t}}=this;e.length>t.length&&delete this._stacks,e.forEach((n,r)=>{t.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],t=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=t.length;n<r;n++){const a=t[n];let s=this.getDatasetMeta(n);const l=a.type||this.config.type;if(s.type&&s.type!==l&&(this._destroyDatasetMeta(n),s=this.getDatasetMeta(n)),s.type=l,s.indexAxis=a.indexAxis||getIndexAxis(l,this.options),s.order=a.order||0,s.index=n,s.label=""+a.label,s.visible=this.isDatasetVisible(n),s.controller)s.controller.updateIndex(n),s.controller.linkScales();else{const u=registry.getController(l),{datasetElementType:d,dataElementType:f}=defaults.datasets[l];Object.assign(u.prototype,{dataElementType:registry.getElement(f),datasetElementType:d&&registry.getElement(d)}),s.controller=new u(this,n),e.push(s.controller)}}return this._updateMetasets(),e}_resetElements(){each(this.data.datasets,(e,t)=>{this.getDatasetMeta(t).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const t=this.config;t.update();const n=this._options=t.createResolver(t.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let s=0;for(let d=0,f=this.data.datasets.length;d<f;d++){const{controller:m}=this.getDatasetMeta(d),h=!r&&a.indexOf(m)===-1;m.buildOrUpdateElements(h),s=Math.max(+m.getMaxOverflow(),s)}s=this._minPadding=n.layout.autoPadding?s:0,this._updateLayout(s),r||each(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(compare2Level("z","_idx"));const{_active:l,_lastEvent:u}=this;u?this._eventHandler(u,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){each(this.scales,e=>{layouts.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,t=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!setsEqual(t,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,t=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:a}of t){const s=n==="_removeElements"?-a:a;moveNumericKeys(e,r,s)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const t=this.data.datasets.length,n=a=>new Set(e.filter(s=>s[0]===a).map((s,l)=>l+","+s.splice(1).join(","))),r=n(0);for(let a=1;a<t;a++)if(!setsEqual(r,n(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;layouts.update(this,this.width,this.height,e);const t=this.chartArea,n=t.width<=0||t.height<=0;this._layers=[],each(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let t=0,n=this.data.datasets.length;t<n;++t)this.getDatasetMeta(t).controller.configure();for(let t=0,n=this.data.datasets.length;t<n;++t)this._updateDataset(t,isFunction(e)?e({datasetIndex:t}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,t){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:t,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(t),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(animator.has(this)?this.attached&&!animator.running(this)&&animator.start(this):(this.draw(),onAnimationsComplete({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resize(n,r),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const t=this._layers;for(e=0;e<t.length&&t[e].z<=0;++e)t[e].draw(this.chartArea);for(this._drawDatasets();e<t.length;++e)t[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const t=this._sortedMetasets,n=[];let r,a;for(r=0,a=t.length;r<a;++r){const s=t[r];(!e||s.visible)&&n.push(s)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let t=e.length-1;t>=0;--t)this._drawDataset(e[t]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const t=this.ctx,n=e._clip,r=!n.disabled,a=this.chartArea,s={meta:e,index:e.index,cancelable:!0};this.notifyPlugins("beforeDatasetDraw",s)!==!1&&(r&&clipArea(t,{left:n.left===!1?0:a.left-n.left,right:n.right===!1?this.width:a.right+n.right,top:n.top===!1?0:a.top-n.top,bottom:n.bottom===!1?this.height:a.bottom+n.bottom}),e.controller.draw(),r&&unclipArea(t),s.cancelable=!1,this.notifyPlugins("afterDatasetDraw",s))}isPointInArea(e){return _isPointInArea(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,t,n,r){const a=Interaction.modes[t];return typeof a=="function"?a(this,e,n,r):[]}getDatasetMeta(e){const t=this.data.datasets[e],n=this._metasets;let r=n.filter(a=>a&&a._dataset===t).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:t&&t.order||0,index:e,_dataset:t,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=createContext(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const t=this.data.datasets[e];if(!t)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!t.hidden}setDatasetVisibility(e,t){const n=this.getDatasetMeta(e);n.hidden=!t}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,t,n){const r=n?"show":"hide",a=this.getDatasetMeta(e),s=a.controller._resolveAnimations(void 0,r);defined(t)?(a.data[t].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),s.update(a,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,t){this._updateVisibility(e,t,!1)}show(e,t){this._updateVisibility(e,t,!0)}_destroyDatasetMeta(e){const t=this._metasets[e];t&&t.controller&&t.controller._destroy(),delete this._metasets[e]}_stop(){let e,t;for(this.stop(),animator.remove(this),e=0,t=this.data.datasets.length;e<t;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:t}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),clearCanvas(e,t),this.platform.releaseContext(t),this.canvas=null,this.ctx=null),this.notifyPlugins("destroy"),delete instances[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,t=this.platform,n=(a,s)=>{t.addEventListener(this,a,s),e[a]=s},r=(a,s,l)=>{a.offsetX=s,a.offsetY=l,this._eventHandler(a)};each(this.options.events,a=>n(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,t=this.platform,n=(u,d)=>{t.addEventListener(this,u,d),e[u]=d},r=(u,d)=>{e[u]&&(t.removeEventListener(this,u,d),delete e[u])},a=(u,d)=>{this.canvas&&this.resize(u,d)};let s;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",a),n("detach",s)};s=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),n("attach",l)},t.isAttached(this.canvas)?l():s()}unbindEvents(){each(this._listeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._listeners={},each(this._responsiveListeners,(e,t)=>{this.platform.removeEventListener(this,t,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,t,n){const r=n?"set":"remove";let a,s,l,u;for(t==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),l=0,u=e.length;l<u;++l){s=e[l];const d=s&&this.getDatasetMeta(s.datasetIndex).controller;d&&d[r+"HoverStyle"](s.element,s.datasetIndex,s.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const t=this._active||[],n=e.map(({datasetIndex:a,index:s})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[s],index:s}});!_elementsEqual(n,t)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,t))}notifyPlugins(e,t,n){return this._plugins.notify(this,e,t,n)}_updateHoverStyles(e,t,n){const r=this.options.hover,a=(u,d)=>u.filter(f=>!d.some(m=>f.datasetIndex===m.datasetIndex&&f.index===m.index)),s=a(t,e),l=n?e:a(e,t);s.length&&this.updateHoverStyle(s,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,t){const n={event:e,replay:t,cancelable:!0,inChartArea:this.isPointInArea(e)},r=s=>(s.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const a=this._handleEvent(e,t,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(a||n.changed)&&this.render(),this}_handleEvent(e,t,n){const{_active:r=[],options:a}=this,s=t,l=this._getActiveElements(e,r,n,s),u=_isClickEvent(e),d=determineLastEvent(e,this._lastEvent,n,u);n&&(this._lastEvent=null,callback(a.onHover,[e,l,this],this),u&&callback(a.onClick,[e,l,this],this));const f=!_elementsEqual(l,r);return(f||t)&&(this._active=l,this._updateHoverStyles(l,r,t)),this._lastEvent=d,f}_getActiveElements(e,t,n,r){if(e.type==="mouseout")return[];if(!n)return t;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}}const invalidatePlugins=()=>each(Chart.instances,o=>o._plugins.invalidate()),enumerable=!0;Object.defineProperties(Chart,{defaults:{enumerable,value:defaults},instances:{enumerable,value:instances},overrides:{enumerable,value:overrides},registry:{enumerable,value:registry},version:{enumerable,value:version},getChart:{enumerable,value:getChart},register:{enumerable,value:(...o)=>{registry.add(...o),invalidatePlugins()}},unregister:{enumerable,value:(...o)=>{registry.remove(...o),invalidatePlugins()}}});function clipArc(o,e,t){const{startAngle:n,pixelMargin:r,x:a,y:s,outerRadius:l,innerRadius:u}=e;let d=r/l;o.beginPath(),o.arc(a,s,l,n-d,t+d),u>r?(d=r/u,o.arc(a,s,u,t+d,n-d,!0)):o.arc(a,s,r,t+HALF_PI,n-HALF_PI),o.closePath(),o.clip()}function toRadiusCorners(o){return _readValueToProps(o,["outerStart","outerEnd","innerStart","innerEnd"])}function parseBorderRadius$1(o,e,t,n){const r=toRadiusCorners(o.options.borderRadius),a=(t-e)/2,s=Math.min(a,n*e/2),l=u=>{const d=(t-Math.min(a,u))*n/2;return _limitValue(u,0,Math.min(a,d))};return{outerStart:l(r.outerStart),outerEnd:l(r.outerEnd),innerStart:_limitValue(r.innerStart,0,s),innerEnd:_limitValue(r.innerEnd,0,s)}}function rThetaToXY(o,e,t,n){return{x:t+o*Math.cos(e),y:n+o*Math.sin(e)}}function pathArc(o,e,t,n,r){const{x:a,y:s,startAngle:l,pixelMargin:u,innerRadius:d}=e,f=Math.max(e.outerRadius+n+t-u,0),m=d>0?d+n+t+u:0;let h=0;const p=r-l;if(n){const B=d>0?d-n:0,K=f>0?f-n:0,U=(B+K)/2,G=U!==0?p*U/(U+n):p;h=(p-G)/2}const g=Math.max(.001,p*f-t/PI)/f,b=(p-g)/2,v=l+b+h,y=r-b-h,{outerStart:C,outerEnd:E,innerStart:A,innerEnd:k}=parseBorderRadius$1(e,m,f,y-v),T=f-C,$=f-E,S=v+C/T,I=y-E/$,R=m+A,N=m+k,M=v+A/R,F=y-k/N;if(o.beginPath(),o.arc(a,s,f,S,I),E>0){const B=rThetaToXY($,I,a,s);o.arc(B.x,B.y,E,I,y+HALF_PI)}const D=rThetaToXY(N,y,a,s);if(o.lineTo(D.x,D.y),k>0){const B=rThetaToXY(N,F,a,s);o.arc(B.x,B.y,k,y+HALF_PI,F+Math.PI)}if(o.arc(a,s,m,y-k/m,v+A/m,!0),A>0){const B=rThetaToXY(R,M,a,s);o.arc(B.x,B.y,A,M+Math.PI,v-HALF_PI)}const x=rThetaToXY(T,v,a,s);if(o.lineTo(x.x,x.y),C>0){const B=rThetaToXY(T,S,a,s);o.arc(B.x,B.y,C,v-HALF_PI,S)}o.closePath()}function drawArc(o,e,t,n){const{fullCircles:r,startAngle:a,circumference:s}=e;let l=e.endAngle;if(r){pathArc(o,e,t,n,a+TAU);for(let u=0;u<r;++u)o.fill();isNaN(s)||(l=a+s%TAU,s%TAU===0&&(l+=TAU))}return pathArc(o,e,t,n,l),o.fill(),l}function drawFullCircleBorders(o,e,t){const{x:n,y:r,startAngle:a,pixelMargin:s,fullCircles:l}=e,u=Math.max(e.outerRadius-s,0),d=e.innerRadius+s;let f;for(t&&clipArc(o,e,a+TAU),o.beginPath(),o.arc(n,r,d,a+TAU,a,!0),f=0;f<l;++f)o.stroke();for(o.beginPath(),o.arc(n,r,u,a,a+TAU),f=0;f<l;++f)o.stroke()}function drawBorder(o,e,t,n,r){const{options:a}=e,{borderWidth:s,borderJoinStyle:l}=a,u=a.borderAlign==="inner";s&&(u?(o.lineWidth=s*2,o.lineJoin=l||"round"):(o.lineWidth=s,o.lineJoin=l||"bevel"),e.fullCircles&&drawFullCircleBorders(o,e,u),u&&clipArc(o,e,r),pathArc(o,e,t,n,r),o.stroke())}class ArcElement extends Element$1{constructor(e){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.getProps(["x","y"],n),{angle:a,distance:s}=getAngleFromPoint(r,{x:e,y:t}),{startAngle:l,endAngle:u,innerRadius:d,outerRadius:f,circumference:m}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=this.options.spacing/2,g=valueOrDefault(m,u-l)>=TAU||_angleBetween(a,l,u),b=_isBetween(s,d+h,f+h);return g&&b}getCenterPoint(e){const{x:t,y:n,startAngle:r,endAngle:a,innerRadius:s,outerRadius:l}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius","circumference"],e),{offset:u,spacing:d}=this.options,f=(r+a)/2,m=(s+l+d+u)/2;return{x:t+Math.cos(f)*m,y:n+Math.sin(f)*m}}tooltipPosition(e){return this.getCenterPoint(e)}draw(e){const{options:t,circumference:n}=this,r=(t.offset||0)/2,a=(t.spacing||0)/2;if(this.pixelMargin=t.borderAlign==="inner"?.33:0,this.fullCircles=n>TAU?Math.floor(n/TAU):0,n===0||this.innerRadius<0||this.outerRadius<0)return;e.save();let s=0;if(r){s=r/2;const u=(this.startAngle+this.endAngle)/2;e.translate(Math.cos(u)*s,Math.sin(u)*s),this.circumference>=PI&&(s=r)}e.fillStyle=t.backgroundColor,e.strokeStyle=t.borderColor;const l=drawArc(e,this,s,a);drawBorder(e,this,s,a,l),e.restore()}}ArcElement.id="arc";ArcElement.defaults={borderAlign:"center",borderColor:"#fff",borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0};ArcElement.defaultRoutes={backgroundColor:"backgroundColor"};function setStyle(o,e,t=e){o.lineCap=valueOrDefault(t.borderCapStyle,e.borderCapStyle),o.setLineDash(valueOrDefault(t.borderDash,e.borderDash)),o.lineDashOffset=valueOrDefault(t.borderDashOffset,e.borderDashOffset),o.lineJoin=valueOrDefault(t.borderJoinStyle,e.borderJoinStyle),o.lineWidth=valueOrDefault(t.borderWidth,e.borderWidth),o.strokeStyle=valueOrDefault(t.borderColor,e.borderColor)}function lineTo(o,e,t){o.lineTo(t.x,t.y)}function getLineMethod(o){return o.stepped?_steppedLineTo:o.tension||o.cubicInterpolationMode==="monotone"?_bezierCurveTo:lineTo}function pathVars(o,e,t={}){const n=o.length,{start:r=0,end:a=n-1}=t,{start:s,end:l}=e,u=Math.max(r,s),d=Math.min(a,l),f=r<s&&a<s||r>l&&a>l;return{count:n,start:u,loop:e.loop,ilen:d<u&&!f?n+d-u:d-u}}function pathSegment(o,e,t,n){const{points:r,options:a}=e,{count:s,start:l,loop:u,ilen:d}=pathVars(r,t,n),f=getLineMethod(a);let{move:m=!0,reverse:h}=n||{},p,g,b;for(p=0;p<=d;++p)g=r[(l+(h?d-p:p))%s],!g.skip&&(m?(o.moveTo(g.x,g.y),m=!1):f(o,b,g,h,a.stepped),b=g);return u&&(g=r[(l+(h?d:0))%s],f(o,b,g,h,a.stepped)),!!u}function fastPathSegment(o,e,t,n){const r=e.points,{count:a,start:s,ilen:l}=pathVars(r,t,n),{move:u=!0,reverse:d}=n||{};let f=0,m=0,h,p,g,b,v,y;const C=A=>(s+(d?l-A:A))%a,E=()=>{b!==v&&(o.lineTo(f,v),o.lineTo(f,b),o.lineTo(f,y))};for(u&&(p=r[C(0)],o.moveTo(p.x,p.y)),h=0;h<=l;++h){if(p=r[C(h)],p.skip)continue;const A=p.x,k=p.y,T=A|0;T===g?(k<b?b=k:k>v&&(v=k),f=(m*f+A)/++m):(E(),o.lineTo(A,k),g=T,m=0,b=v=k),y=k}E()}function _getSegmentMethod(o){const e=o.options,t=e.borderDash&&e.borderDash.length;return!o._decimated&&!o._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!t?fastPathSegment:pathSegment}function _getInterpolationMethod(o){return o.stepped?_steppedInterpolation:o.tension||o.cubicInterpolationMode==="monotone"?_bezierInterpolation:_pointInLine}function strokePathWithCache(o,e,t,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,t,n)&&r.closePath()),setStyle(o,e.options),o.stroke(r)}function strokePathDirect(o,e,t,n){const{segments:r,options:a}=e,s=_getSegmentMethod(e);for(const l of r)setStyle(o,a,l.style),o.beginPath(),s(o,e,l,{start:t,end:t+n-1})&&o.closePath(),o.stroke()}const usePath2D=typeof Path2D=="function";function draw(o,e,t,n){usePath2D&&!e.options.segment?strokePathWithCache(o,e,t,n):strokePathDirect(o,e,t,n)}class LineElement extends Element$1{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,t){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;_updateBezierControlPoints(this._points,n,e,r,t),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=_computeSegments(this,this.options.segment))}first(){const e=this.segments,t=this.points;return e.length&&t[e[0].start]}last(){const e=this.segments,t=this.points,n=e.length;return n&&t[e[n-1].end]}interpolate(e,t){const n=this.options,r=e[t],a=this.points,s=_boundSegments(this,{property:t,start:r,end:r});if(!s.length)return;const l=[],u=_getInterpolationMethod(n);let d,f;for(d=0,f=s.length;d<f;++d){const{start:m,end:h}=s[d],p=a[m],g=a[h];if(p===g){l.push(p);continue}const b=Math.abs((r-p[t])/(g[t]-p[t])),v=u(p,g,b,n.stepped);v[t]=e[t],l.push(v)}return l.length===1?l[0]:l}pathSegment(e,t,n){return _getSegmentMethod(this)(e,this,t,n)}path(e,t,n){const r=this.segments,a=_getSegmentMethod(this);let s=this._loop;t=t||0,n=n||this.points.length-t;for(const l of r)s&=a(e,this,l,{start:t,end:t+n-1});return!!s}draw(e,t,n,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),draw(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}LineElement.id="line";LineElement.defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};LineElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};LineElement.descriptors={_scriptable:!0,_indexable:o=>o!=="borderDash"&&o!=="fill"};function inRange$1(o,e,t,n){const r=o.options,{[t]:a}=o.getProps([t],n);return Math.abs(e-a)<r.radius+r.hitRadius}class PointElement extends Element$1{constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,t,n){const r=this.options,{x:a,y:s}=this.getProps(["x","y"],n);return Math.pow(e-a,2)+Math.pow(t-s,2)<Math.pow(r.hitRadius+r.radius,2)}inXRange(e,t){return inRange$1(this,e,"x",t)}inYRange(e,t){return inRange$1(this,e,"y",t)}getCenterPoint(e){const{x:t,y:n}=this.getProps(["x","y"],e);return{x:t,y:n}}size(e){e=e||this.options||{};let t=e.radius||0;t=Math.max(t,t&&e.hoverRadius||0);const n=t&&e.borderWidth||0;return(t+n)*2}draw(e,t){const n=this.options;this.skip||n.radius<.1||!_isPointInArea(this,t,this.size(n)/2)||(e.strokeStyle=n.borderColor,e.lineWidth=n.borderWidth,e.fillStyle=n.backgroundColor,drawPoint(e,n,this.x,this.y))}getRange(){const e=this.options||{};return e.radius+e.hitRadius}}PointElement.id="point";PointElement.defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};PointElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};function getBarBounds(o,e){const{x:t,y:n,base:r,width:a,height:s}=o.getProps(["x","y","base","width","height"],e);let l,u,d,f,m;return o.horizontal?(m=s/2,l=Math.min(t,r),u=Math.max(t,r),d=n-m,f=n+m):(m=a/2,l=t-m,u=t+m,d=Math.min(n,r),f=Math.max(n,r)),{left:l,top:d,right:u,bottom:f}}function skipOrLimit(o,e,t,n){return o?0:_limitValue(e,t,n)}function parseBorderWidth(o,e,t){const n=o.options.borderWidth,r=o.borderSkipped,a=toTRBL(n);return{t:skipOrLimit(r.top,a.top,0,t),r:skipOrLimit(r.right,a.right,0,e),b:skipOrLimit(r.bottom,a.bottom,0,t),l:skipOrLimit(r.left,a.left,0,e)}}function parseBorderRadius(o,e,t){const{enableBorderRadius:n}=o.getProps(["enableBorderRadius"]),r=o.options.borderRadius,a=toTRBLCorners(r),s=Math.min(e,t),l=o.borderSkipped,u=n||isObject(r);return{topLeft:skipOrLimit(!u||l.top||l.left,a.topLeft,0,s),topRight:skipOrLimit(!u||l.top||l.right,a.topRight,0,s),bottomLeft:skipOrLimit(!u||l.bottom||l.left,a.bottomLeft,0,s),bottomRight:skipOrLimit(!u||l.bottom||l.right,a.bottomRight,0,s)}}function boundingRects(o){const e=getBarBounds(o),t=e.right-e.left,n=e.bottom-e.top,r=parseBorderWidth(o,t/2,n/2),a=parseBorderRadius(o,t/2,n/2);return{outer:{x:e.left,y:e.top,w:t,h:n,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:t-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function inRange(o,e,t,n){const r=e===null,a=t===null,l=o&&!(r&&a)&&getBarBounds(o,n);return l&&(r||_isBetween(e,l.left,l.right))&&(a||_isBetween(t,l.top,l.bottom))}function hasRadius(o){return o.topLeft||o.topRight||o.bottomLeft||o.bottomRight}function addNormalRectPath(o,e){o.rect(e.x,e.y,e.w,e.h)}function inflateRect(o,e,t={}){const n=o.x!==t.x?-e:0,r=o.y!==t.y?-e:0,a=(o.x+o.w!==t.x+t.w?e:0)-n,s=(o.y+o.h!==t.y+t.h?e:0)-r;return{x:o.x+n,y:o.y+r,w:o.w+a,h:o.h+s,radius:o.radius}}class BarElement extends Element$1{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:t,options:{borderColor:n,backgroundColor:r}}=this,{inner:a,outer:s}=boundingRects(this),l=hasRadius(s.radius)?addRoundedRectPath:addNormalRectPath;e.save(),(s.w!==a.w||s.h!==a.h)&&(e.beginPath(),l(e,inflateRect(s,t,a)),e.clip(),l(e,inflateRect(a,-t,s)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,inflateRect(a,t)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,t,n){return inRange(this,e,t,n)}inXRange(e,t){return inRange(this,e,null,t)}inYRange(e,t){return inRange(this,null,e,t)}getCenterPoint(e){const{x:t,y:n,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(t+r)/2:t,y:a?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}BarElement.id="bar";BarElement.defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};BarElement.defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};var elements=Object.freeze({__proto__:null,ArcElement,LineElement,PointElement,BarElement});function lttbDecimation(o,e,t,n,r){const a=r.samples||n;if(a>=t)return o.slice(e,e+t);const s=[],l=(t-2)/(a-2);let u=0;const d=e+t-1;let f=e,m,h,p,g,b;for(s[u++]=o[f],m=0;m<a-2;m++){let v=0,y=0,C;const E=Math.floor((m+1)*l)+1+e,A=Math.min(Math.floor((m+2)*l)+1,t)+e,k=A-E;for(C=E;C<A;C++)v+=o[C].x,y+=o[C].y;v/=k,y/=k;const T=Math.floor(m*l)+1+e,$=Math.min(Math.floor((m+1)*l)+1,t)+e,{x:S,y:I}=o[f];for(p=g=-1,C=T;C<$;C++)g=.5*Math.abs((S-v)*(o[C].y-I)-(S-o[C].x)*(y-I)),g>p&&(p=g,h=o[C],b=C);s[u++]=h,f=b}return s[u++]=o[d],s}function minMaxDecimation(o,e,t,n){let r=0,a=0,s,l,u,d,f,m,h,p,g,b;const v=[],y=e+t-1,C=o[e].x,A=o[y].x-C;for(s=e;s<e+t;++s){l=o[s],u=(l.x-C)/A*n,d=l.y;const k=u|0;if(k===f)d<g?(g=d,m=s):d>b&&(b=d,h=s),r=(a*r+l.x)/++a;else{const T=s-1;if(!isNullOrUndef(m)&&!isNullOrUndef(h)){const $=Math.min(m,h),S=Math.max(m,h);$!==p&&$!==T&&v.push({...o[$],x:r}),S!==p&&S!==T&&v.push({...o[S],x:r})}s>0&&T!==p&&v.push(o[T]),v.push(l),f=k,a=0,g=b=d,m=h=p=s}}return v}function cleanDecimatedDataset(o){if(o._decimated){const e=o._data;delete o._decimated,delete o._data,Object.defineProperty(o,"data",{value:e})}}function cleanDecimatedData(o){o.data.datasets.forEach(e=>{cleanDecimatedDataset(e)})}function getStartAndCountOfVisiblePointsSimplified(o,e){const t=e.length;let n=0,r;const{iScale:a}=o,{min:s,max:l,minDefined:u,maxDefined:d}=a.getUserBounds();return u&&(n=_limitValue(_lookupByKey(e,a.axis,s).lo,0,t-1)),d?r=_limitValue(_lookupByKey(e,a.axis,l).hi+1,n,t)-n:r=t-n,{start:n,count:r}}var plugin_decimation={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(o,e,t)=>{if(!t.enabled){cleanDecimatedData(o);return}const n=o.width;o.data.datasets.forEach((r,a)=>{const{_data:s,indexAxis:l}=r,u=o.getDatasetMeta(a),d=s||r.data;if(resolve([l,o.options.indexAxis])==="y"||!u.controller.supportsDecimation)return;const f=o.scales[u.xAxisID];if(f.type!=="linear"&&f.type!=="time"||o.options.parsing)return;let{start:m,count:h}=getStartAndCountOfVisiblePointsSimplified(u,d);const p=t.threshold||4*n;if(h<=p){cleanDecimatedDataset(r);return}isNullOrUndef(s)&&(r._data=d,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let g;switch(t.algorithm){case"lttb":g=lttbDecimation(d,m,h,n,t);break;case"min-max":g=minMaxDecimation(d,m,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${t.algorithm}'`)}r._decimated=g})},destroy(o){cleanDecimatedData(o)}};function _segments(o,e,t){const n=o.segments,r=o.points,a=e.points,s=[];for(const l of n){let{start:u,end:d}=l;d=_findSegmentEnd(u,d,r);const f=_getBounds(t,r[u],r[d],l.loop);if(!e.segments){s.push({source:l,target:f,start:r[u],end:r[d]});continue}const m=_boundSegments(e,f);for(const h of m){const p=_getBounds(t,a[h.start],a[h.end],h.loop),g=_boundSegment(l,r,p);for(const b of g)s.push({source:b,target:h,start:{[t]:_getEdge(f,p,"start",Math.max)},end:{[t]:_getEdge(f,p,"end",Math.min)}})}}return s}function _getBounds(o,e,t,n){if(n)return;let r=e[o],a=t[o];return o==="angle"&&(r=_normalizeAngle(r),a=_normalizeAngle(a)),{property:o,start:r,end:a}}function _pointsFromSegments(o,e){const{x:t=null,y:n=null}=o||{},r=e.points,a=[];return e.segments.forEach(({start:s,end:l})=>{l=_findSegmentEnd(s,l,r);const u=r[s],d=r[l];n!==null?(a.push({x:u.x,y:n}),a.push({x:d.x,y:n})):t!==null&&(a.push({x:t,y:u.y}),a.push({x:t,y:d.y}))}),a}function _findSegmentEnd(o,e,t){for(;e>o;e--){const n=t[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function _getEdge(o,e,t,n){return o&&e?n(o[t],e[t]):o?o[t]:e?e[t]:0}function _createBoundaryLine(o,e){let t=[],n=!1;return isArray(o)?(n=!0,t=o):t=_pointsFromSegments(o,e),t.length?new LineElement({points:t,options:{tension:0},_loop:n,_fullLoop:n}):null}function _shouldApplyFill(o){return o&&o.fill!==!1}function _resolveTarget(o,e,t){let r=o[e].fill;const a=[e];let s;if(!t)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!isNumberFinite(r))return r;if(s=o[r],!s)return!1;if(s.visible)return r;a.push(r),r=s.fill}return!1}function _decodeFill(o,e,t){const n=parseFillOption(o);if(isObject(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return isNumberFinite(r)&&Math.floor(r)===r?decodeTargetIndex(n[0],e,r,t):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function decodeTargetIndex(o,e,t,n){return(o==="-"||o==="+")&&(t=e+t),t===e||t<0||t>=n?!1:t}function _getTargetPixel(o,e){let t=null;return o==="start"?t=e.bottom:o==="end"?t=e.top:isObject(o)?t=e.getPixelForValue(o.value):e.getBasePixel&&(t=e.getBasePixel()),t}function _getTargetValue(o,e,t){let n;return o==="start"?n=t:o==="end"?n=e.options.reverse?e.min:e.max:isObject(o)?n=o.value:n=e.getBaseValue(),n}function parseFillOption(o){const e=o.options,t=e.fill;let n=valueOrDefault(t&&t.target,t);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function _buildStackLine(o){const{scale:e,index:t,line:n}=o,r=[],a=n.segments,s=n.points,l=getLinesBelow(e,t);l.push(_createBoundaryLine({x:null,y:e.bottom},n));for(let u=0;u<a.length;u++){const d=a[u];for(let f=d.start;f<=d.end;f++)addPointsBelow(r,s[f],l)}return new LineElement({points:r,options:{}})}function getLinesBelow(o,e){const t=[],n=o.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const a=n[r];if(a.index===e)break;a.hidden||t.unshift(a.dataset)}return t}function addPointsBelow(o,e,t){const n=[];for(let r=0;r<t.length;r++){const a=t[r],{first:s,last:l,point:u}=findPoint(a,e,"x");if(!(!u||s&&l)){if(s)n.unshift(u);else if(o.push(u),!l)break}}o.push(...n)}function findPoint(o,e,t){const n=o.interpolate(e,t);if(!n)return{};const r=n[t],a=o.segments,s=o.points;let l=!1,u=!1;for(let d=0;d<a.length;d++){const f=a[d],m=s[f.start][t],h=s[f.end][t];if(_isBetween(r,m,h)){l=r===m,u=r===h;break}}return{first:l,last:u,point:n}}class simpleArc{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,t,n){const{x:r,y:a,radius:s}=this;return t=t||{start:0,end:TAU},e.arc(r,a,s,t.end,t.start,!0),!n.bounds}interpolate(e){const{x:t,y:n,radius:r}=this,a=e.angle;return{x:t+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}function _getTarget(o){const{chart:e,fill:t,line:n}=o;if(isNumberFinite(t))return getLineByIndex(e,t);if(t==="stack")return _buildStackLine(o);if(t==="shape")return!0;const r=computeBoundary(o);return r instanceof simpleArc?r:_createBoundaryLine(r,n)}function getLineByIndex(o,e){const t=o.getDatasetMeta(e);return t&&o.isDatasetVisible(e)?t.dataset:null}function computeBoundary(o){return(o.scale||{}).getPointPositionForValue?computeCircularBoundary(o):computeLinearBoundary(o)}function computeLinearBoundary(o){const{scale:e={},fill:t}=o,n=_getTargetPixel(t,e);if(isNumberFinite(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function computeCircularBoundary(o){const{scale:e,fill:t}=o,n=e.options,r=e.getLabels().length,a=n.reverse?e.max:e.min,s=_getTargetValue(t,e,a),l=[];if(n.grid.circular){const u=e.getPointPositionForValue(0,a);return new simpleArc({x:u.x,y:u.y,radius:e.getDistanceFromCenterForValue(s)})}for(let u=0;u<r;++u)l.push(e.getPointPositionForValue(u,s));return l}function _drawfill(o,e,t){const n=_getTarget(e),{line:r,scale:a,axis:s}=e,l=r.options,u=l.fill,d=l.backgroundColor,{above:f=d,below:m=d}=u||{};n&&r.points.length&&(clipArea(o,t),doFill(o,{line:r,target:n,above:f,below:m,area:t,scale:a,axis:s}),unclipArea(o))}function doFill(o,e){const{line:t,target:n,above:r,below:a,area:s,scale:l}=e,u=t._loop?"angle":e.axis;o.save(),u==="x"&&a!==r&&(clipVertical(o,n,s.top),fill(o,{line:t,target:n,color:r,scale:l,property:u}),o.restore(),o.save(),clipVertical(o,n,s.bottom)),fill(o,{line:t,target:n,color:a,scale:l,property:u}),o.restore()}function clipVertical(o,e,t){const{segments:n,points:r}=e;let a=!0,s=!1;o.beginPath();for(const l of n){const{start:u,end:d}=l,f=r[u],m=r[_findSegmentEnd(u,d,r)];a?(o.moveTo(f.x,f.y),a=!1):(o.lineTo(f.x,t),o.lineTo(f.x,f.y)),s=!!e.pathSegment(o,l,{move:s}),s?o.closePath():o.lineTo(m.x,t)}o.lineTo(e.first().x,t),o.closePath(),o.clip()}function fill(o,e){const{line:t,target:n,property:r,color:a,scale:s}=e,l=_segments(t,n,r);for(const{source:u,target:d,start:f,end:m}of l){const{style:{backgroundColor:h=a}={}}=u,p=n!==!0;o.save(),o.fillStyle=h,clipBounds(o,s,p&&_getBounds(r,f,m)),o.beginPath();const g=!!t.pathSegment(o,u);let b;if(p){g?o.closePath():interpolatedLineTo(o,n,m,r);const v=!!n.pathSegment(o,d,{move:g,reverse:!0});b=g&&v,b||interpolatedLineTo(o,n,f,r)}o.closePath(),o.fill(b?"evenodd":"nonzero"),o.restore()}}function clipBounds(o,e,t){const{top:n,bottom:r}=e.chart.chartArea,{property:a,start:s,end:l}=t||{};a==="x"&&(o.beginPath(),o.rect(s,n,l-s,r-n),o.clip())}function interpolatedLineTo(o,e,t,n){const r=e.interpolate(t,n);r&&o.lineTo(r.x,r.y)}var index={id:"filler",afterDatasetsUpdate(o,e,t){const n=(o.data.datasets||[]).length,r=[];let a,s,l,u;for(s=0;s<n;++s)a=o.getDatasetMeta(s),l=a.dataset,u=null,l&&l.options&&l instanceof LineElement&&(u={visible:o.isDatasetVisible(s),index:s,fill:_decodeFill(l,s,n),chart:o,axis:a.controller.options.indexAxis,scale:a.vScale,line:l}),a.$filler=u,r.push(u);for(s=0;s<n;++s)u=r[s],!(!u||u.fill===!1)&&(u.fill=_resolveTarget(r,s,t.propagate))},beforeDraw(o,e,t){const n=t.drawTime==="beforeDraw",r=o.getSortedVisibleDatasetMetas(),a=o.chartArea;for(let s=r.length-1;s>=0;--s){const l=r[s].$filler;l&&(l.line.updateControlPoints(a,l.axis),n&&l.fill&&_drawfill(o.ctx,l,a))}},beforeDatasetsDraw(o,e,t){if(t.drawTime!=="beforeDatasetsDraw")return;const n=o.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const a=n[r].$filler;_shouldApplyFill(a)&&_drawfill(o.ctx,a,o.chartArea)}},beforeDatasetDraw(o,e,t){const n=e.meta.$filler;!_shouldApplyFill(n)||t.drawTime!=="beforeDatasetDraw"||_drawfill(o.ctx,n,o.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const getBoxSize=(o,e)=>{let{boxHeight:t=e,boxWidth:n=e}=o;return o.usePointStyle&&(t=Math.min(t,e),n=o.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:t,itemHeight:Math.max(e,t)}},itemsEqual=(o,e)=>o!==null&&e!==null&&o.datasetIndex===e.datasetIndex&&o.index===e.index;class Legend extends Element$1{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t,n){this.maxWidth=e,this.maxHeight=t,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let t=callback(e.generateLabels,[this.chart],this)||[];e.filter&&(t=t.filter(n=>e.filter(n,this.chart.data))),e.sort&&(t=t.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&t.reverse(),this.legendItems=t}fit(){const{options:e,ctx:t}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=toFont(n.font),a=r.size,s=this._computeTitleHeight(),{boxWidth:l,itemHeight:u}=getBoxSize(n,a);let d,f;t.font=r.string,this.isHorizontal()?(d=this.maxWidth,f=this._fitRows(s,a,l,u)+10):(f=this.maxHeight,d=this._fitCols(s,a,l,u)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(f,e.maxHeight||this.maxHeight)}_fitRows(e,t,n,r){const{ctx:a,maxWidth:s,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],d=this.lineWidths=[0],f=r+l;let m=e;a.textAlign="left",a.textBaseline="middle";let h=-1,p=-f;return this.legendItems.forEach((g,b)=>{const v=n+t/2+a.measureText(g.text).width;(b===0||d[d.length-1]+v+2*l>s)&&(m+=f,d[d.length-(b>0?0:1)]=0,p+=f,h++),u[b]={left:0,top:p,row:h,width:v,height:r},d[d.length-1]+=v+l}),m}_fitCols(e,t,n,r){const{ctx:a,maxHeight:s,options:{labels:{padding:l}}}=this,u=this.legendHitBoxes=[],d=this.columnSizes=[],f=s-e;let m=l,h=0,p=0,g=0,b=0;return this.legendItems.forEach((v,y)=>{const C=n+t/2+a.measureText(v.text).width;y>0&&p+r+2*l>f&&(m+=h+l,d.push({width:h,height:p}),g+=h+l,b++,h=p=0),u[y]={left:g,top:p,col:b,width:C,height:r},h=Math.max(h,C),p+=r+l}),m+=h,d.push({width:h,height:p}),m}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:t,options:{align:n,labels:{padding:r},rtl:a}}=this,s=getRtlAdapter(a,this.left,this.width);if(this.isHorizontal()){let l=0,u=_alignStartEnd(n,this.left+r,this.right-this.lineWidths[l]);for(const d of t)l!==d.row&&(l=d.row,u=_alignStartEnd(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=s.leftForLtr(s.x(u),d.width),u+=d.width+r}else{let l=0,u=_alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of t)d.col!==l&&(l=d.col,u=_alignStartEnd(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=u,d.left+=this.left+r,d.left=s.leftForLtr(s.x(d.left),d.width),u+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;clipArea(e,this),this._draw(),unclipArea(e)}}_draw(){const{options:e,columnSizes:t,lineWidths:n,ctx:r}=this,{align:a,labels:s}=e,l=defaults.color,u=getRtlAdapter(e.rtl,this.left,this.width),d=toFont(s.font),{color:f,padding:m}=s,h=d.size,p=h/2;let g;this.drawTitle(),r.textAlign=u.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:b,boxHeight:v,itemHeight:y}=getBoxSize(s,h),C=function($,S,I){if(isNaN(b)||b<=0||isNaN(v)||v<0)return;r.save();const R=valueOrDefault(I.lineWidth,1);if(r.fillStyle=valueOrDefault(I.fillStyle,l),r.lineCap=valueOrDefault(I.lineCap,"butt"),r.lineDashOffset=valueOrDefault(I.lineDashOffset,0),r.lineJoin=valueOrDefault(I.lineJoin,"miter"),r.lineWidth=R,r.strokeStyle=valueOrDefault(I.strokeStyle,l),r.setLineDash(valueOrDefault(I.lineDash,[])),s.usePointStyle){const N={radius:v*Math.SQRT2/2,pointStyle:I.pointStyle,rotation:I.rotation,borderWidth:R},M=u.xPlus($,b/2),F=S+p;drawPointLegend(r,N,M,F,b)}else{const N=S+Math.max((h-v)/2,0),M=u.leftForLtr($,b),F=toTRBLCorners(I.borderRadius);r.beginPath(),Object.values(F).some(D=>D!==0)?addRoundedRectPath(r,{x:M,y:N,w:b,h:v,radius:F}):r.rect(M,N,b,v),r.fill(),R!==0&&r.stroke()}r.restore()},E=function($,S,I){renderText(r,I.text,$,S+y/2,d,{strikethrough:I.hidden,textAlign:u.textAlign(I.textAlign)})},A=this.isHorizontal(),k=this._computeTitleHeight();A?g={x:_alignStartEnd(a,this.left+m,this.right-n[0]),y:this.top+m+k,line:0}:g={x:this.left+m,y:_alignStartEnd(a,this.top+k+m,this.bottom-t[0].height),line:0},overrideTextDirection(this.ctx,e.textDirection);const T=y+m;this.legendItems.forEach(($,S)=>{r.strokeStyle=$.fontColor||f,r.fillStyle=$.fontColor||f;const I=r.measureText($.text).width,R=u.textAlign($.textAlign||($.textAlign=s.textAlign)),N=b+p+I;let M=g.x,F=g.y;u.setWidth(this.width),A?S>0&&M+N+m>this.right&&(F=g.y+=T,g.line++,M=g.x=_alignStartEnd(a,this.left+m,this.right-n[g.line])):S>0&&F+T>this.bottom&&(M=g.x=M+t[g.line].width+m,g.line++,F=g.y=_alignStartEnd(a,this.top+k+m,this.bottom-t[g.line].height));const D=u.x(M);C(D,F,$),M=_textX(R,M+b+p,A?M+N:this.right,e.rtl),E(u.x(M),F,$),A?g.x+=N+m:g.y+=T}),restoreTextDirection(this.ctx,e.textDirection)}drawTitle(){const e=this.options,t=e.title,n=toFont(t.font),r=toPadding(t.padding);if(!t.display)return;const a=getRtlAdapter(e.rtl,this.left,this.width),s=this.ctx,l=t.position,u=n.size/2,d=r.top+u;let f,m=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),f=this.top+d,m=_alignStartEnd(e.align,m,this.right-h);else{const g=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);f=d+_alignStartEnd(e.align,this.top,this.bottom-g-e.labels.padding-this._computeTitleHeight())}const p=_alignStartEnd(l,m,m+h);s.textAlign=a.textAlign(_toLeftRightCenter(l)),s.textBaseline="middle",s.strokeStyle=t.color,s.fillStyle=t.color,s.font=n.string,renderText(s,t.text,p,f,n)}_computeTitleHeight(){const e=this.options.title,t=toFont(e.font),n=toPadding(e.padding);return e.display?t.lineHeight+n.height:0}_getLegendItemAt(e,t){let n,r,a;if(_isBetween(e,this.left,this.right)&&_isBetween(t,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(r=a[n],_isBetween(e,r.left,r.left+r.width)&&_isBetween(t,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const t=this.options;if(!isListened(e.type,t))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,a=itemsEqual(r,n);r&&!a&&callback(t.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&callback(t.onHover,[e,n,this],this)}else n&&callback(t.onClick,[e,n,this],this)}}function isListened(o,e){return!!((o==="mousemove"||o==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(o==="click"||o==="mouseup"))}var plugin_legend={id:"legend",_element:Legend,start(o,e,t){const n=o.legend=new Legend({ctx:o.ctx,options:t,chart:o});layouts.configure(o,n,t),layouts.addBox(o,n)},stop(o){layouts.removeBox(o,o.legend),delete o.legend},beforeUpdate(o,e,t){const n=o.legend;layouts.configure(o,n,t),n.options=t},afterUpdate(o){const e=o.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(o,e){e.replay||o.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(o,e,t){const n=e.datasetIndex,r=t.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:o=>o.chart.options.color,boxWidth:40,padding:10,generateLabels(o){const e=o.data.datasets,{labels:{usePointStyle:t,pointStyle:n,textAlign:r,color:a}}=o.legend.options;return o._getSortedDatasetMetas().map(s=>{const l=s.controller.getStyle(t?0:void 0),u=toPadding(l.borderWidth);return{text:e[s.index].label,fillStyle:l.backgroundColor,fontColor:a,hidden:!s.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:l.borderColor,pointStyle:n||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:0,datasetIndex:s.index}},this)}},title:{color:o=>o.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:o=>!o.startsWith("on"),labels:{_scriptable:o=>!["generateLabels","filter","sort"].includes(o)}}};class Title extends Element$1{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,t){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=t;const r=isArray(n.text)?n.text.length:1;this._padding=toPadding(n.padding);const a=r*toFont(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:t,left:n,bottom:r,right:a,options:s}=this,l=s.align;let u=0,d,f,m;return this.isHorizontal()?(f=_alignStartEnd(l,n,a),m=t+e,d=a-n):(s.position==="left"?(f=n+e,m=_alignStartEnd(l,r,t),u=PI*-.5):(f=a-e,m=_alignStartEnd(l,t,r),u=PI*.5),d=r-t),{titleX:f,titleY:m,maxWidth:d,rotation:u}}draw(){const e=this.ctx,t=this.options;if(!t.display)return;const n=toFont(t.font),a=n.lineHeight/2+this._padding.top,{titleX:s,titleY:l,maxWidth:u,rotation:d}=this._drawArgs(a);renderText(e,t.text,0,0,n,{color:t.color,maxWidth:u,rotation:d,textAlign:_toLeftRightCenter(t.align),textBaseline:"middle",translation:[s,l]})}}function createTitle(o,e){const t=new Title({ctx:o.ctx,options:e,chart:o});layouts.configure(o,t,e),layouts.addBox(o,t),o.titleBlock=t}var plugin_title={id:"title",_element:Title,start(o,e,t){createTitle(o,t)},stop(o){const e=o.titleBlock;layouts.removeBox(o,e),delete o.titleBlock},beforeUpdate(o,e,t){const n=o.titleBlock;layouts.configure(o,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const map=new WeakMap;var plugin_subtitle={id:"subtitle",start(o,e,t){const n=new Title({ctx:o.ctx,options:t,chart:o});layouts.configure(o,n,t),layouts.addBox(o,n),map.set(o,n)},stop(o){layouts.removeBox(o,map.get(o)),map.delete(o)},beforeUpdate(o,e,t){const n=map.get(o);layouts.configure(o,n,t),n.options=t},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const positioners={average(o){if(!o.length)return!1;let e,t,n=0,r=0,a=0;for(e=0,t=o.length;e<t;++e){const s=o[e].element;if(s&&s.hasValue()){const l=s.tooltipPosition();n+=l.x,r+=l.y,++a}}return{x:n/a,y:r/a}},nearest(o,e){if(!o.length)return!1;let t=e.x,n=e.y,r=Number.POSITIVE_INFINITY,a,s,l;for(a=0,s=o.length;a<s;++a){const u=o[a].element;if(u&&u.hasValue()){const d=u.getCenterPoint(),f=distanceBetweenPoints(e,d);f<r&&(r=f,l=u)}}if(l){const u=l.tooltipPosition();t=u.x,n=u.y}return{x:t,y:n}}};function pushOrConcat(o,e){return e&&(isArray(e)?Array.prototype.push.apply(o,e):o.push(e)),o}function splitNewlines(o){return(typeof o=="string"||o instanceof String)&&o.indexOf(`
`)>-1?o.split(`
`):o}function createTooltipItem(o,e){const{element:t,datasetIndex:n,index:r}=e,a=o.getDatasetMeta(n).controller,{label:s,value:l}=a.getLabelAndValue(r);return{chart:o,label:s,parsed:a.getParsed(r),raw:o.data.datasets[n].data[r],formattedValue:l,dataset:a.getDataset(),dataIndex:r,datasetIndex:n,element:t}}function getTooltipSize(o,e){const t=o.chart.ctx,{body:n,footer:r,title:a}=o,{boxWidth:s,boxHeight:l}=e,u=toFont(e.bodyFont),d=toFont(e.titleFont),f=toFont(e.footerFont),m=a.length,h=r.length,p=n.length,g=toPadding(e.padding);let b=g.height,v=0,y=n.reduce((A,k)=>A+k.before.length+k.lines.length+k.after.length,0);if(y+=o.beforeBody.length+o.afterBody.length,m&&(b+=m*d.lineHeight+(m-1)*e.titleSpacing+e.titleMarginBottom),y){const A=e.displayColors?Math.max(l,u.lineHeight):u.lineHeight;b+=p*A+(y-p)*u.lineHeight+(y-1)*e.bodySpacing}h&&(b+=e.footerMarginTop+h*f.lineHeight+(h-1)*e.footerSpacing);let C=0;const E=function(A){v=Math.max(v,t.measureText(A).width+C)};return t.save(),t.font=d.string,each(o.title,E),t.font=u.string,each(o.beforeBody.concat(o.afterBody),E),C=e.displayColors?s+2+e.boxPadding:0,each(n,A=>{each(A.before,E),each(A.lines,E),each(A.after,E)}),C=0,t.font=f.string,each(o.footer,E),t.restore(),v+=g.width,{width:v,height:b}}function determineYAlign(o,e){const{y:t,height:n}=e;return t<n/2?"top":t>o.height-n/2?"bottom":"center"}function doesNotFitWithAlign(o,e,t,n){const{x:r,width:a}=n,s=t.caretSize+t.caretPadding;if(o==="left"&&r+a+s>e.width||o==="right"&&r-a-s<0)return!0}function determineXAlign(o,e,t,n){const{x:r,width:a}=t,{width:s,chartArea:{left:l,right:u}}=o;let d="center";return n==="center"?d=r<=(l+u)/2?"left":"right":r<=a/2?d="left":r>=s-a/2&&(d="right"),doesNotFitWithAlign(d,o,e,t)&&(d="center"),d}function determineAlignment(o,e,t){const n=t.yAlign||e.yAlign||determineYAlign(o,t);return{xAlign:t.xAlign||e.xAlign||determineXAlign(o,e,t,n),yAlign:n}}function alignX(o,e){let{x:t,width:n}=o;return e==="right"?t-=n:e==="center"&&(t-=n/2),t}function alignY(o,e,t){let{y:n,height:r}=o;return e==="top"?n+=t:e==="bottom"?n-=r+t:n-=r/2,n}function getBackgroundPoint(o,e,t,n){const{caretSize:r,caretPadding:a,cornerRadius:s}=o,{xAlign:l,yAlign:u}=t,d=r+a,{topLeft:f,topRight:m,bottomLeft:h,bottomRight:p}=toTRBLCorners(s);let g=alignX(e,l);const b=alignY(e,u,d);return u==="center"?l==="left"?g+=d:l==="right"&&(g-=d):l==="left"?g-=Math.max(f,h)+r:l==="right"&&(g+=Math.max(m,p)+r),{x:_limitValue(g,0,n.width-e.width),y:_limitValue(b,0,n.height-e.height)}}function getAlignedX(o,e,t){const n=toPadding(t.padding);return e==="center"?o.x+o.width/2:e==="right"?o.x+o.width-n.right:o.x+n.left}function getBeforeAfterBodyLines(o){return pushOrConcat([],splitNewlines(o))}function createTooltipContext(o,e,t){return createContext(o,{tooltip:e,tooltipItems:t,type:"tooltip"})}function overrideCallbacks(o,e){const t=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return t?o.override(t):o}class Tooltip extends Element$1{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart||e._chart,this._chart=this.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const t=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&t.options.animation&&n.animations,a=new Animations(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=createTooltipContext(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,t){const{callbacks:n}=t,r=n.beforeTitle.apply(this,[e]),a=n.title.apply(this,[e]),s=n.afterTitle.apply(this,[e]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(s)),l}getBeforeBody(e,t){return getBeforeAfterBodyLines(t.callbacks.beforeBody.apply(this,[e]))}getBody(e,t){const{callbacks:n}=t,r=[];return each(e,a=>{const s={before:[],lines:[],after:[]},l=overrideCallbacks(n,a);pushOrConcat(s.before,splitNewlines(l.beforeLabel.call(this,a))),pushOrConcat(s.lines,l.label.call(this,a)),pushOrConcat(s.after,splitNewlines(l.afterLabel.call(this,a))),r.push(s)}),r}getAfterBody(e,t){return getBeforeAfterBodyLines(t.callbacks.afterBody.apply(this,[e]))}getFooter(e,t){const{callbacks:n}=t,r=n.beforeFooter.apply(this,[e]),a=n.footer.apply(this,[e]),s=n.afterFooter.apply(this,[e]);let l=[];return l=pushOrConcat(l,splitNewlines(r)),l=pushOrConcat(l,splitNewlines(a)),l=pushOrConcat(l,splitNewlines(s)),l}_createItems(e){const t=this._active,n=this.chart.data,r=[],a=[],s=[];let l=[],u,d;for(u=0,d=t.length;u<d;++u)l.push(createTooltipItem(this.chart,t[u]));return e.filter&&(l=l.filter((f,m,h)=>e.filter(f,m,h,n))),e.itemSort&&(l=l.sort((f,m)=>e.itemSort(f,m,n))),each(l,f=>{const m=overrideCallbacks(e.callbacks,f);r.push(m.labelColor.call(this,f)),a.push(m.labelPointStyle.call(this,f)),s.push(m.labelTextColor.call(this,f))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=s,this.dataPoints=l,l}update(e,t){const n=this.options.setContext(this.getContext()),r=this._active;let a,s=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const l=positioners[n.position].call(this,r,this._eventPosition);s=this._createItems(n),this.title=this.getTitle(s,n),this.beforeBody=this.getBeforeBody(s,n),this.body=this.getBody(s,n),this.afterBody=this.getAfterBody(s,n),this.footer=this.getFooter(s,n);const u=this._size=getTooltipSize(this,n),d=Object.assign({},l,u),f=determineAlignment(this.chart,n,d),m=getBackgroundPoint(n,d,f,this.chart);this.xAlign=f.xAlign,this.yAlign=f.yAlign,a={opacity:1,x:m.x,y:m.y,width:u.width,height:u.height,caretX:l.x,caretY:l.y}}this._tooltipItems=s,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:t})}drawCaret(e,t,n,r){const a=this.getCaretPosition(e,n,r);t.lineTo(a.x1,a.y1),t.lineTo(a.x2,a.y2),t.lineTo(a.x3,a.y3)}getCaretPosition(e,t,n){const{xAlign:r,yAlign:a}=this,{caretSize:s,cornerRadius:l}=n,{topLeft:u,topRight:d,bottomLeft:f,bottomRight:m}=toTRBLCorners(l),{x:h,y:p}=e,{width:g,height:b}=t;let v,y,C,E,A,k;return a==="center"?(A=p+b/2,r==="left"?(v=h,y=v-s,E=A+s,k=A-s):(v=h+g,y=v+s,E=A-s,k=A+s),C=v):(r==="left"?y=h+Math.max(u,f)+s:r==="right"?y=h+g-Math.max(d,m)-s:y=this.caretX,a==="top"?(E=p,A=E-s,v=y-s,C=y+s):(E=p+b,A=E+s,v=y+s,C=y-s),k=E),{x1:v,x2:y,x3:C,y1:E,y2:A,y3:k}}drawTitle(e,t,n){const r=this.title,a=r.length;let s,l,u;if(a){const d=getRtlAdapter(n.rtl,this.x,this.width);for(e.x=getAlignedX(this,n.titleAlign,n),t.textAlign=d.textAlign(n.titleAlign),t.textBaseline="middle",s=toFont(n.titleFont),l=n.titleSpacing,t.fillStyle=n.titleColor,t.font=s.string,u=0;u<a;++u)t.fillText(r[u],d.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+l,u+1===a&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,t,n,r,a){const s=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:u,boxWidth:d,boxPadding:f}=a,m=toFont(a.bodyFont),h=getAlignedX(this,"left",a),p=r.x(h),g=u<m.lineHeight?(m.lineHeight-u)/2:0,b=t.y+g;if(a.usePointStyle){const v={radius:Math.min(d,u)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},y=r.leftForLtr(p,d)+d/2,C=b+u/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,drawPoint(e,v,y,C),e.strokeStyle=s.borderColor,e.fillStyle=s.backgroundColor,drawPoint(e,v,y,C)}else{e.lineWidth=isObject(s.borderWidth)?Math.max(...Object.values(s.borderWidth)):s.borderWidth||1,e.strokeStyle=s.borderColor,e.setLineDash(s.borderDash||[]),e.lineDashOffset=s.borderDashOffset||0;const v=r.leftForLtr(p,d-f),y=r.leftForLtr(r.xPlus(p,1),d-f-2),C=toTRBLCorners(s.borderRadius);Object.values(C).some(E=>E!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,addRoundedRectPath(e,{x:v,y:b,w:d,h:u,radius:C}),e.fill(),e.stroke(),e.fillStyle=s.backgroundColor,e.beginPath(),addRoundedRectPath(e,{x:y,y:b+1,w:d-2,h:u-2,radius:C}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(v,b,d,u),e.strokeRect(v,b,d,u),e.fillStyle=s.backgroundColor,e.fillRect(y,b+1,d-2,u-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,t,n){const{body:r}=this,{bodySpacing:a,bodyAlign:s,displayColors:l,boxHeight:u,boxWidth:d,boxPadding:f}=n,m=toFont(n.bodyFont);let h=m.lineHeight,p=0;const g=getRtlAdapter(n.rtl,this.x,this.width),b=function(S){t.fillText(S,g.x(e.x+p),e.y+h/2),e.y+=h+a},v=g.textAlign(s);let y,C,E,A,k,T,$;for(t.textAlign=s,t.textBaseline="middle",t.font=m.string,e.x=getAlignedX(this,v,n),t.fillStyle=n.bodyColor,each(this.beforeBody,b),p=l&&v!=="right"?s==="center"?d/2+f:d+2+f:0,A=0,T=r.length;A<T;++A){for(y=r[A],C=this.labelTextColors[A],t.fillStyle=C,each(y.before,b),E=y.lines,l&&E.length&&(this._drawColorBox(t,e,A,g,n),h=Math.max(m.lineHeight,u)),k=0,$=E.length;k<$;++k)b(E[k]),h=m.lineHeight;each(y.after,b)}p=0,h=m.lineHeight,each(this.afterBody,b),e.y-=a}drawFooter(e,t,n){const r=this.footer,a=r.length;let s,l;if(a){const u=getRtlAdapter(n.rtl,this.x,this.width);for(e.x=getAlignedX(this,n.footerAlign,n),e.y+=n.footerMarginTop,t.textAlign=u.textAlign(n.footerAlign),t.textBaseline="middle",s=toFont(n.footerFont),t.fillStyle=n.footerColor,t.font=s.string,l=0;l<a;++l)t.fillText(r[l],u.x(e.x),e.y+s.lineHeight/2),e.y+=s.lineHeight+n.footerSpacing}}drawBackground(e,t,n,r){const{xAlign:a,yAlign:s}=this,{x:l,y:u}=e,{width:d,height:f}=n,{topLeft:m,topRight:h,bottomLeft:p,bottomRight:g}=toTRBLCorners(r.cornerRadius);t.fillStyle=r.backgroundColor,t.strokeStyle=r.borderColor,t.lineWidth=r.borderWidth,t.beginPath(),t.moveTo(l+m,u),s==="top"&&this.drawCaret(e,t,n,r),t.lineTo(l+d-h,u),t.quadraticCurveTo(l+d,u,l+d,u+h),s==="center"&&a==="right"&&this.drawCaret(e,t,n,r),t.lineTo(l+d,u+f-g),t.quadraticCurveTo(l+d,u+f,l+d-g,u+f),s==="bottom"&&this.drawCaret(e,t,n,r),t.lineTo(l+p,u+f),t.quadraticCurveTo(l,u+f,l,u+f-p),s==="center"&&a==="left"&&this.drawCaret(e,t,n,r),t.lineTo(l,u+m),t.quadraticCurveTo(l,u,l+m,u),t.closePath(),t.fill(),r.borderWidth>0&&t.stroke()}_updateAnimationTarget(e){const t=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){const s=positioners[e.position].call(this,this._active,this._eventPosition);if(!s)return;const l=this._size=getTooltipSize(this,e),u=Object.assign({},s,this._size),d=determineAlignment(t,e,u),f=getBackgroundPoint(e,u,d,t);(r._to!==f.x||a._to!==f.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=s.x,this.caretY=s.y,this._resolveAnimations().update(this,f))}}_willRender(){return!!this.opacity}draw(e){const t=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(t);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const s=toPadding(t.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;t.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,t),overrideTextDirection(e,t.textDirection),a.y+=s.top,this.drawTitle(a,e,t),this.drawBody(a,e,t),this.drawFooter(a,e,t),restoreTextDirection(e,t.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,t){const n=this._active,r=e.map(({datasetIndex:l,index:u})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[u],index:u}}),a=!_elementsEqual(n,r),s=this._positionChanged(r,t);(a||s)&&(this._active=r,this._eventPosition=t,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,t,n=!0){if(t&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],s=this._getActiveElements(e,a,t,n),l=this._positionChanged(s,e),u=t||!_elementsEqual(s,a)||l;return u&&(this._active=s,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,t))),u}_getActiveElements(e,t,n,r){const a=this.options;if(e.type==="mouseout")return[];if(!r)return t;const s=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&s.reverse(),s}_positionChanged(e,t){const{caretX:n,caretY:r,options:a}=this,s=positioners[a.position].call(this,e,t);return s!==!1&&(n!==s.x||r!==s.y)}}Tooltip.positioners=positioners;var plugin_tooltip={id:"tooltip",_element:Tooltip,positioners,afterInit(o,e,t){t&&(o.tooltip=new Tooltip({chart:o,options:t}))},beforeUpdate(o,e,t){o.tooltip&&o.tooltip.initialize(t)},reset(o,e,t){o.tooltip&&o.tooltip.initialize(t)},afterDraw(o){const e=o.tooltip;if(e&&e._willRender()){const t={tooltip:e};if(o.notifyPlugins("beforeTooltipDraw",t)===!1)return;e.draw(o.ctx),o.notifyPlugins("afterTooltipDraw",t)}},afterEvent(o,e){if(o.tooltip){const t=e.replay;o.tooltip.handleEvent(e.event,t,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(o,e)=>e.bodyFont.size,boxWidth:(o,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:{beforeTitle:noop,title(o){if(o.length>0){const e=o[0],t=e.chart.data.labels,n=t?t.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return t[e.dataIndex]}return""},afterTitle:noop,beforeBody:noop,beforeLabel:noop,label(o){if(this&&this.options&&this.options.mode==="dataset")return o.label+": "+o.formattedValue||o.formattedValue;let e=o.dataset.label||"";e&&(e+=": ");const t=o.formattedValue;return isNullOrUndef(t)||(e+=t),e},labelColor(o){const t=o.chart.getDatasetMeta(o.datasetIndex).controller.getStyle(o.dataIndex);return{borderColor:t.borderColor,backgroundColor:t.backgroundColor,borderWidth:t.borderWidth,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(o){const t=o.chart.getDatasetMeta(o.datasetIndex).controller.getStyle(o.dataIndex);return{pointStyle:t.pointStyle,rotation:t.rotation}},afterLabel:noop,afterBody:noop,beforeFooter:noop,footer:noop,afterFooter:noop}},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:o=>o!=="filter"&&o!=="itemSort"&&o!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},plugins=Object.freeze({__proto__:null,Decimation:plugin_decimation,Filler:index,Legend:plugin_legend,SubTitle:plugin_subtitle,Title:plugin_title,Tooltip:plugin_tooltip});const addIfString=(o,e,t,n)=>(typeof e=="string"?(t=o.push(e)-1,n.unshift({index:t,label:e})):isNaN(e)&&(t=null),t);function findOrAddLabel(o,e,t,n){const r=o.indexOf(e);if(r===-1)return addIfString(o,e,t,n);const a=o.lastIndexOf(e);return r!==a?t:r}const validIndex=(o,e)=>o===null?null:_limitValue(Math.round(o),0,e);class CategoryScale extends Scale{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const t=this._addedLabels;if(t.length){const n=this.getLabels();for(const{index:r,label:a}of t)n[r]===a&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,t){if(isNullOrUndef(e))return null;const n=this.getLabels();return t=isFinite(t)&&n[t]===e?t:findOrAddLabel(n,e,valueOrDefault(t,e),this._addedLabels),validIndex(t,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),t||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,t=this.max,n=this.options.offset,r=[];let a=this.getLabels();a=e===0&&t===a.length-1?a:a.slice(e,t+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let s=e;s<=t;s++)r.push({value:s});return r}getLabelForValue(e){const t=this.getLabels();return e>=0&&e<t.length?t[e]:e}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const t=this.ticks;return e<0||e>t.length-1?null:this.getPixelForValue(t[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}CategoryScale.id="category";CategoryScale.defaults={ticks:{callback:CategoryScale.prototype.getLabelForValue}};function generateTicks$1(o,e){const t=[],{bounds:r,step:a,min:s,max:l,precision:u,count:d,maxTicks:f,maxDigits:m,includeBounds:h}=o,p=a||1,g=f-1,{min:b,max:v}=e,y=!isNullOrUndef(s),C=!isNullOrUndef(l),E=!isNullOrUndef(d),A=(v-b)/(m+1);let k=niceNum((v-b)/g/p)*p,T,$,S,I;if(k<1e-14&&!y&&!C)return[{value:b},{value:v}];I=Math.ceil(v/k)-Math.floor(b/k),I>g&&(k=niceNum(I*k/g/p)*p),isNullOrUndef(u)||(T=Math.pow(10,u),k=Math.ceil(k*T)/T),r==="ticks"?($=Math.floor(b/k)*k,S=Math.ceil(v/k)*k):($=b,S=v),y&&C&&a&&almostWhole((l-s)/a,k/1e3)?(I=Math.round(Math.min((l-s)/k,f)),k=(l-s)/I,$=s,S=l):E?($=y?s:$,S=C?l:S,I=d-1,k=(S-$)/I):(I=(S-$)/k,almostEquals(I,Math.round(I),k/1e3)?I=Math.round(I):I=Math.ceil(I));const R=Math.max(_decimalPlaces(k),_decimalPlaces($));T=Math.pow(10,isNullOrUndef(u)?R:u),$=Math.round($*T)/T,S=Math.round(S*T)/T;let N=0;for(y&&(h&&$!==s?(t.push({value:s}),$<s&&N++,almostEquals(Math.round(($+N*k)*T)/T,s,relativeLabelSize(s,A,o))&&N++):$<s&&N++);N<I;++N)t.push({value:Math.round(($+N*k)*T)/T});return C&&h&&S!==l?t.length&&almostEquals(t[t.length-1].value,l,relativeLabelSize(l,A,o))?t[t.length-1].value=l:t.push({value:l}):(!C||S===l)&&t.push({value:S}),t}function relativeLabelSize(o,e,{horizontal:t,minRotation:n}){const r=toRadians(n),a=(t?Math.sin(r):Math.cos(r))||.001,s=.75*e*(""+o).length;return Math.min(e/a,s)}class LinearScaleBase extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,t){return isNullOrUndef(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:t,maxDefined:n}=this.getUserBounds();let{min:r,max:a}=this;const s=u=>r=t?r:u,l=u=>a=n?a:u;if(e){const u=sign(r),d=sign(a);u<0&&d<0?l(0):u>0&&d>0&&s(0)}if(r===a){let u=1;(a>=Number.MAX_SAFE_INTEGER||r<=Number.MIN_SAFE_INTEGER)&&(u=Math.abs(a*.05)),l(a+u),e||s(r-u)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:t,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),t=t||11),t&&(r=Math.min(t,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,t=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:t.precision,step:t.stepSize,count:t.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:t.minRotation||0,includeBounds:t.includeBounds!==!1},a=this._range||this,s=generateTicks$1(r,a);return e.bounds==="ticks"&&_setMinAndMaxByKey(s,this,"value"),e.reverse?(s.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),s}configure(){const e=this.ticks;let t=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-t)/Math.max(e.length-1,1)/2;t-=r,n+=r}this._startValue=t,this._endValue=n,this._valueRange=n-t}getLabelForValue(e){return formatNumber(e,this.chart.options.locale,this.options.ticks.format)}}class LinearScale extends LinearScaleBase{determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?e:0,this.max=isNumberFinite(t)?t:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),t=e?this.width:this.height,n=toRadians(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(t/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}LinearScale.id="linear";LinearScale.defaults={ticks:{callback:Ticks.formatters.numeric}};function isMajor(o){return o/Math.pow(10,Math.floor(log10(o)))===1}function generateTicks(o,e){const t=Math.floor(log10(e.max)),n=Math.ceil(e.max/Math.pow(10,t)),r=[];let a=finiteOrDefault(o.min,Math.pow(10,Math.floor(log10(e.min)))),s=Math.floor(log10(a)),l=Math.floor(a/Math.pow(10,s)),u=s<0?Math.pow(10,Math.abs(s)):1;do r.push({value:a,major:isMajor(a)}),++l,l===10&&(l=1,++s,u=s>=0?1:u),a=Math.round(l*Math.pow(10,s)*u)/u;while(s<t||s===t&&l<n);const d=finiteOrDefault(o.max,a);return r.push({value:d,major:isMajor(a)}),r}class LogarithmicScale extends Scale{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,t){const n=LinearScaleBase.prototype.parse.apply(this,[e,t]);if(n===0){this._zero=!0;return}return isNumberFinite(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!0);this.min=isNumberFinite(e)?Math.max(0,e):null,this.max=isNumberFinite(t)?Math.max(0,t):null,this.options.beginAtZero&&(this._zero=!0),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:t}=this.getUserBounds();let n=this.min,r=this.max;const a=u=>n=e?n:u,s=u=>r=t?r:u,l=(u,d)=>Math.pow(10,Math.floor(log10(u))+d);n===r&&(n<=0?(a(1),s(10)):(a(l(n,-1)),s(l(r,1)))),n<=0&&a(l(r,-1)),r<=0&&s(l(n,1)),this._zero&&this.min!==this._suggestedMin&&n===l(this.min,0)&&a(l(n,-1)),this.min=n,this.max=r}buildTicks(){const e=this.options,t={min:this._userMin,max:this._userMax},n=generateTicks(t,this);return e.bounds==="ticks"&&_setMinAndMaxByKey(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":formatNumber(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=log10(e),this._valueRange=log10(this.max)-log10(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(log10(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const t=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+t*this._valueRange)}}LogarithmicScale.id="logarithmic";LogarithmicScale.defaults={ticks:{callback:Ticks.formatters.logarithmic,major:{enabled:!0}}};function getTickBackdropHeight(o){const e=o.ticks;if(e.display&&o.display){const t=toPadding(e.backdropPadding);return valueOrDefault(e.font&&e.font.size,defaults.font.size)+t.height}return 0}function measureLabelSize(o,e,t){return t=isArray(t)?t:[t],{w:_longestText(o,e.string,t),h:t.length*e.lineHeight}}function determineLimits(o,e,t,n,r){return o===n||o===r?{start:e-t/2,end:e+t/2}:o<n||o>r?{start:e-t,end:e}:{start:e,end:e+t}}function fitWithPointLabels(o){const e={l:o.left+o._padding.left,r:o.right-o._padding.right,t:o.top+o._padding.top,b:o.bottom-o._padding.bottom},t=Object.assign({},e),n=[],r=[],a=o._pointLabels.length,s=o.options.pointLabels,l=s.centerPointLabels?PI/a:0;for(let u=0;u<a;u++){const d=s.setContext(o.getPointLabelContext(u));r[u]=d.padding;const f=o.getPointPosition(u,o.drawingArea+r[u],l),m=toFont(d.font),h=measureLabelSize(o.ctx,m,o._pointLabels[u]);n[u]=h;const p=_normalizeAngle(o.getIndexAngle(u)+l),g=Math.round(toDegrees(p)),b=determineLimits(g,f.x,h.w,0,180),v=determineLimits(g,f.y,h.h,90,270);updateLimits(t,e,p,b,v)}o.setCenterPoint(e.l-t.l,t.r-e.r,e.t-t.t,t.b-e.b),o._pointLabelItems=buildPointLabelItems(o,n,r)}function updateLimits(o,e,t,n,r){const a=Math.abs(Math.sin(t)),s=Math.abs(Math.cos(t));let l=0,u=0;n.start<e.l?(l=(e.l-n.start)/a,o.l=Math.min(o.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/a,o.r=Math.max(o.r,e.r+l)),r.start<e.t?(u=(e.t-r.start)/s,o.t=Math.min(o.t,e.t-u)):r.end>e.b&&(u=(r.end-e.b)/s,o.b=Math.max(o.b,e.b+u))}function buildPointLabelItems(o,e,t){const n=[],r=o._pointLabels.length,a=o.options,s=getTickBackdropHeight(a)/2,l=o.drawingArea,u=a.pointLabels.centerPointLabels?PI/r:0;for(let d=0;d<r;d++){const f=o.getPointPosition(d,l+s+t[d],u),m=Math.round(toDegrees(_normalizeAngle(f.angle+HALF_PI))),h=e[d],p=yForAngle(f.y,h.h,m),g=getTextAlignForAngle(m),b=leftForTextAlign(f.x,h.w,g);n.push({x:f.x,y:p,textAlign:g,left:b,top:p,right:b+h.w,bottom:p+h.h})}return n}function getTextAlignForAngle(o){return o===0||o===180?"center":o<180?"left":"right"}function leftForTextAlign(o,e,t){return t==="right"?o-=e:t==="center"&&(o-=e/2),o}function yForAngle(o,e,t){return t===90||t===270?o-=e/2:(t>270||t<90)&&(o-=e),o}function drawPointLabels(o,e){const{ctx:t,options:{pointLabels:n}}=o;for(let r=e-1;r>=0;r--){const a=n.setContext(o.getPointLabelContext(r)),s=toFont(a.font),{x:l,y:u,textAlign:d,left:f,top:m,right:h,bottom:p}=o._pointLabelItems[r],{backdropColor:g}=a;if(!isNullOrUndef(g)){const b=toTRBLCorners(a.borderRadius),v=toPadding(a.backdropPadding);t.fillStyle=g;const y=f-v.left,C=m-v.top,E=h-f+v.width,A=p-m+v.height;Object.values(b).some(k=>k!==0)?(t.beginPath(),addRoundedRectPath(t,{x:y,y:C,w:E,h:A,radius:b}),t.fill()):t.fillRect(y,C,E,A)}renderText(t,o._pointLabels[r],l,u+s.lineHeight/2,s,{color:a.color,textAlign:d,textBaseline:"middle"})}}function pathRadiusLine(o,e,t,n){const{ctx:r}=o;if(t)r.arc(o.xCenter,o.yCenter,e,0,TAU);else{let a=o.getPointPosition(0,e);r.moveTo(a.x,a.y);for(let s=1;s<n;s++)a=o.getPointPosition(s,e),r.lineTo(a.x,a.y)}}function drawRadiusLine(o,e,t,n){const r=o.ctx,a=e.circular,{color:s,lineWidth:l}=e;!a&&!n||!s||!l||t<0||(r.save(),r.strokeStyle=s,r.lineWidth=l,r.setLineDash(e.borderDash),r.lineDashOffset=e.borderDashOffset,r.beginPath(),pathRadiusLine(o,t,a,n),r.closePath(),r.stroke(),r.restore())}function createPointLabelContext(o,e,t){return createContext(o,{label:t,index:e,type:"pointLabel"})}class RadialLinearScale extends LinearScaleBase{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=toPadding(getTickBackdropHeight(this.options)/2),t=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+t/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(t,n)/2)}determineDataLimits(){const{min:e,max:t}=this.getMinMax(!1);this.min=isNumberFinite(e)&&!isNaN(e)?e:0,this.max=isNumberFinite(t)&&!isNaN(t)?t:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/getTickBackdropHeight(this.options))}generateTickLabels(e){LinearScaleBase.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((t,n)=>{const r=callback(this.options.pointLabels.callback,[t,n],this);return r||r===0?r:""}).filter((t,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?fitWithPointLabels(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,t,n,r){this.xCenter+=Math.floor((e-t)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,t,n,r))}getIndexAngle(e){const t=TAU/(this._pointLabels.length||1),n=this.options.startAngle||0;return _normalizeAngle(e*t+toRadians(n))}getDistanceFromCenterForValue(e){if(isNullOrUndef(e))return NaN;const t=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*t:(e-this.min)*t}getValueForDistanceFromCenter(e){if(isNullOrUndef(e))return NaN;const t=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-t:this.min+t}getPointLabelContext(e){const t=this._pointLabels||[];if(e>=0&&e<t.length){const n=t[e];return createPointLabelContext(this.getContext(),e,n)}}getPointPosition(e,t,n=0){const r=this.getIndexAngle(e)-HALF_PI+n;return{x:Math.cos(r)*t+this.xCenter,y:Math.sin(r)*t+this.yCenter,angle:r}}getPointPositionForValue(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:t,top:n,right:r,bottom:a}=this._pointLabelItems[e];return{left:t,top:n,right:r,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:t}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),pathRadiusLine(this,this.getDistanceFromCenterForValue(this._endValue),t,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,t=this.options,{angleLines:n,grid:r}=t,a=this._pointLabels.length;let s,l,u;if(t.pointLabels.display&&drawPointLabels(this,a),r.display&&this.ticks.forEach((d,f)=>{if(f!==0){l=this.getDistanceFromCenterForValue(d.value);const m=r.setContext(this.getContext(f-1));drawRadiusLine(this,m,l,a)}}),n.display){for(e.save(),s=a-1;s>=0;s--){const d=n.setContext(this.getPointLabelContext(s)),{color:f,lineWidth:m}=d;!m||!f||(e.lineWidth=m,e.strokeStyle=f,e.setLineDash(d.borderDash),e.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(t.ticks.reverse?this.min:this.max),u=this.getPointPosition(s,l),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(u.x,u.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,t=this.options,n=t.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let a,s;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,u)=>{if(u===0&&!t.reverse)return;const d=n.setContext(this.getContext(u)),f=toFont(d.font);if(a=this.getDistanceFromCenterForValue(this.ticks[u].value),d.showLabelBackdrop){e.font=f.string,s=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const m=toPadding(d.backdropPadding);e.fillRect(-s/2-m.left,-a-f.size/2-m.top,s+m.width,f.size+m.height)}renderText(e,l.label,0,-a,f,{color:d.color})}),e.restore()}drawTitle(){}}RadialLinearScale.id="radialLinear";RadialLinearScale.defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Ticks.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(o){return o},padding:5,centerPointLabels:!1}};RadialLinearScale.defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};RadialLinearScale.descriptors={angleLines:{_fallback:"grid"}};const INTERVALS={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},UNITS=Object.keys(INTERVALS);function sorter(o,e){return o-e}function parse$2(o,e){if(isNullOrUndef(e))return null;const t=o._adapter,{parser:n,round:r,isoWeekday:a}=o._parseOpts;let s=e;return typeof n=="function"&&(s=n(s)),isNumberFinite(s)||(s=typeof n=="string"?t.parse(s,n):t.parse(s)),s===null?null:(r&&(s=r==="week"&&(isNumber(a)||a===!0)?t.startOf(s,"isoWeek",a):t.startOf(s,r)),+s)}function determineUnitForAutoTicks(o,e,t,n){const r=UNITS.length;for(let a=UNITS.indexOf(o);a<r-1;++a){const s=INTERVALS[UNITS[a]],l=s.steps?s.steps:Number.MAX_SAFE_INTEGER;if(s.common&&Math.ceil((t-e)/(l*s.size))<=n)return UNITS[a]}return UNITS[r-1]}function determineUnitForFormatting(o,e,t,n,r){for(let a=UNITS.length-1;a>=UNITS.indexOf(t);a--){const s=UNITS[a];if(INTERVALS[s].common&&o._adapter.diff(r,n,s)>=e-1)return s}return UNITS[t?UNITS.indexOf(t):0]}function determineMajorUnit(o){for(let e=UNITS.indexOf(o)+1,t=UNITS.length;e<t;++e)if(INTERVALS[UNITS[e]].common)return UNITS[e]}function addTick(o,e,t){if(!t)o[e]=!0;else if(t.length){const{lo:n,hi:r}=_lookup(t,e),a=t[n]>=e?t[n]:t[r];o[a]=!0}}function setMajorTicks(o,e,t,n){const r=o._adapter,a=+r.startOf(e[0].value,n),s=e[e.length-1].value;let l,u;for(l=a;l<=s;l=+r.add(l,1,n))u=t[l],u>=0&&(e[u].major=!0);return e}function ticksFromTimestamps(o,e,t){const n=[],r={},a=e.length;let s,l;for(s=0;s<a;++s)l=e[s],r[l]=s,n.push({value:l,major:!1});return a===0||!t?n:setMajorTicks(o,n,r,t)}class TimeScale extends Scale{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,t){const n=e.time||(e.time={}),r=this._adapter=new adapters._date(e.adapters.date);mergeIf(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=t.normalized}parse(e,t){return e===void 0?null:parse$2(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,t=this._adapter,n=e.time.unit||"day";let{min:r,max:a,minDefined:s,maxDefined:l}=this.getUserBounds();function u(d){!s&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!s||!l)&&(u(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&u(this.getMinMax(!1))),r=isNumberFinite(r)&&!isNaN(r)?r:+t.startOf(Date.now(),n),a=isNumberFinite(a)&&!isNaN(a)?a:+t.endOf(Date.now(),n)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let t=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(t=e[0],n=e[e.length-1]),{min:t,max:n}}buildTicks(){const e=this.options,t=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,s=this.max,l=_filterBetween(r,a,s);return this._unit=t.unit||(n.autoSkip?determineUnitForAutoTicks(t.minUnit,this.min,this.max,this._getLabelCapacity(a)):determineUnitForFormatting(this,l.length,t.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:determineMajorUnit(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),ticksFromTimestamps(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e){let t=0,n=0,r,a;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?t=1-r:t=(this.getDecimalForValue(e[1])-r)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const s=e.length<3?.5:.25;t=_limitValue(t,0,s),n=_limitValue(n,0,s),this._offsets={start:t,end:n,factor:1/(t+1+n)}}_generate(){const e=this._adapter,t=this.min,n=this.max,r=this.options,a=r.time,s=a.unit||determineUnitForAutoTicks(a.minUnit,t,n,this._getLabelCapacity(t)),l=valueOrDefault(a.stepSize,1),u=s==="week"?a.isoWeekday:!1,d=isNumber(u)||u===!0,f={};let m=t,h,p;if(d&&(m=+e.startOf(m,"isoWeek",u)),m=+e.startOf(m,d?"day":s),e.diff(n,t,s)>1e5*l)throw new Error(t+" and "+n+" are too far apart with stepSize of "+l+" "+s);const g=r.ticks.source==="data"&&this.getDataTimestamps();for(h=m,p=0;h<n;h=+e.add(h,l,s),p++)addTick(f,h,g);return(h===n||r.bounds==="ticks"||p===1)&&addTick(f,h,g),Object.keys(f).sort((b,v)=>b-v).map(b=>+b)}getLabelForValue(e){const t=this._adapter,n=this.options.time;return n.tooltipFormat?t.format(e,n.tooltipFormat):t.format(e,n.displayFormats.datetime)}_tickFormatFunction(e,t,n,r){const a=this.options,s=a.time.displayFormats,l=this._unit,u=this._majorUnit,d=l&&s[l],f=u&&s[u],m=n[t],h=u&&f&&m&&m.major,p=this._adapter.format(e,r||(h?f:d)),g=a.ticks.callback;return g?callback(g,[p,t,n],this):p}generateTickLabels(e){let t,n,r;for(t=0,n=e.length;t<n;++t)r=e[t],r.label=this._tickFormatFunction(r.value,t,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const t=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((t.start+n)*t.factor)}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const t=this.options.ticks,n=this.ctx.measureText(e).width,r=toRadians(this.isHorizontal()?t.maxRotation:t.minRotation),a=Math.cos(r),s=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*a+l*s,h:n*s+l*a}}_getLabelCapacity(e){const t=this.options.time,n=t.displayFormats,r=n[t.unit]||n.millisecond,a=this._tickFormatFunction(e,0,ticksFromTimestamps(this,[e],this._majorUnit),r),s=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/s.w:this.height/s.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],t,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(t=0,n=r.length;t<n;++t)e=e.concat(r[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let t,n;if(e.length)return e;const r=this.getLabels();for(t=0,n=r.length;t<n;++t)e.push(parse$2(this,r[t]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return _arrayUnique(e.sort(sorter))}}TimeScale.id="time";TimeScale.defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",major:{enabled:!1}}};function interpolate(o,e,t){let n=0,r=o.length-1,a,s,l,u;t?(e>=o[n].pos&&e<=o[r].pos&&({lo:n,hi:r}=_lookupByKey(o,"pos",e)),{pos:a,time:l}=o[n],{pos:s,time:u}=o[r]):(e>=o[n].time&&e<=o[r].time&&({lo:n,hi:r}=_lookupByKey(o,"time",e)),{time:a,pos:l}=o[n],{time:s,pos:u}=o[r]);const d=s-a;return d?l+(u-l)*(e-a)/d:l}class TimeSeriesScale extends TimeScale{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),t=this._table=this.buildLookupTable(e);this._minPos=interpolate(t,this.min),this._tableRange=interpolate(t,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:t,max:n}=this,r=[],a=[];let s,l,u,d,f;for(s=0,l=e.length;s<l;++s)d=e[s],d>=t&&d<=n&&r.push(d);if(r.length<2)return[{time:t,pos:0},{time:n,pos:1}];for(s=0,l=r.length;s<l;++s)f=r[s+1],u=r[s-1],d=r[s],Math.round((f+u)/2)!==d&&a.push({time:d,pos:s/(l-1)});return a}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const t=this.getDataTimestamps(),n=this.getLabelTimestamps();return t.length&&n.length?e=this.normalize(t.concat(n)):e=t.length?t:n,e=this._cache.all=e,e}getDecimalForValue(e){return(interpolate(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const t=this._offsets,n=this.getDecimalForPixel(e)/t.factor-t.end;return interpolate(this._table,n*this._tableRange+this._minPos,!0)}}TimeSeriesScale.id="timeseries";TimeSeriesScale.defaults=TimeScale.defaults;var scales=Object.freeze({__proto__:null,CategoryScale,LinearScale,LogarithmicScale,RadialLinearScale,TimeScale,TimeSeriesScale});const registerables=[controllers,elements,plugins,scales];/*!
  * chartjs-adapter-moment v1.0.0
  * https://www.chartjs.org
  * (c) 2021 chartjs-adapter-moment Contributors
  * Released under the MIT license
  */const FORMATS={datetime:"MMM D, YYYY, h:mm:ss a",millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"};adapters._date.override(typeof hooks=="function"?{_id:"moment",formats:function(){return FORMATS},parse:function(o,e){return typeof o=="string"&&typeof e=="string"?o=hooks(o,e):o instanceof hooks||(o=hooks(o)),o.isValid()?o.valueOf():null},format:function(o,e){return hooks(o).format(e)},add:function(o,e,t){return hooks(o).add(e,t).valueOf()},diff:function(o,e,t){return hooks(o).diff(hooks(e),t)},startOf:function(o,e,t){return o=hooks(o),e==="isoWeek"?(t=Math.trunc(Math.min(Math.max(0,t),6)),o.isoWeekday(t).startOf("day").valueOf()):o.startOf(e).valueOf()},endOf:function(o,e){return hooks(o).endOf(e).valueOf()}}:{});Chart.register(...registerables);function create_fragment$1v(o){let e,t,n,r=[o[2]],a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return{c(){e=element("canvas"),set_attributes(e,a)},m(s,l){insert(s,e,l),o[9](e),t||(n=action_destroyer(contextMenu.call(null,e,o[1])),t=!0)},p(s,[l]){set_attributes(e,a=get_spread_update(r,[l&4&&s[2]]))},i:noop$1,o:noop$1,d(s){s&&detach(e),o[9](null),t=!1,n()}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$h=()=>getActiveComponent("ChartCore");registerCommand({id:"chart.export",category:"Chart",toolbarName:"Export",name:"Export chart",icon:"icon report",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$h().exportChart(),testEnabled:()=>getCurrentEditor$h()!=null});Chart.register(plugin);function instance$1u(o,e,t){const n=["data","title","type","options","activator","exportChart"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(v,y,C,E){function A(k){return k instanceof C?k:new C(function(T){T(k)})}return new(C||(C=Promise))(function(k,T){function $(R){try{I(E.next(R))}catch(N){T(N)}}function S(R){try{I(E.throw(R))}catch(N){T(N)}}function I(R){R.done?k(R.value):A(R.value).then($,S)}I((E=E.apply(v,y||[])).next())})};let{data:s}=e,{title:l}=e,{type:u="line"}=e,{options:d={}}=e;const f=createActivator("ChartCore",!0);let m=null,h;onMount(()=>{m=new Chart(h,{type:u,data:s,options:_.cloneDeep(d)})}),afterUpdate(()=>{m&&(m.data=s,m.type=u,m.options=_.cloneDeep(d),m.update())}),onDestroy(()=>{m=null});function p(){return a(this,void 0,void 0,function*(){saveFileToDisk(v=>a(this,void 0,void 0,function*(){yield apiCall("files/export-chart",{title:l,filePath:v,config:{type:u,data:s,options:d},image:h.toDataURL()})}))})}registerMenu({command:"chart.export",tag:"export"});const g=getContextMenu();function b(v){binding_callbacks[v?"unshift":"push"](()=>{h=v,t(0,h)})}return o.$$set=v=>{e=assign(assign({},e),exclude_internal_props(v)),t(2,r=compute_rest_props(e,n)),"data"in v&&t(3,s=v.data),"title"in v&&t(4,l=v.title),"type"in v&&t(5,u=v.type),"options"in v&&t(6,d=v.options)},[h,g,r,s,l,u,d,f,p,b]}class ChartCore extends SvelteComponent{constructor(e){super(),init(this,e,instance$1u,create_fragment$1v,safe_not_equal,{data:3,title:4,type:5,options:6,activator:7,exportChart:8})}get activator(){return this.$$.ctx[7]}get exportChart(){return this.$$.ctx[8]}}function bound01(o,e){isOnePointZero(o)&&(o="100%");var t=isPercentage(o);return o=e===360?o:Math.min(e,Math.max(0,parseFloat(o))),t&&(o=parseInt(String(o*e),10)/100),Math.abs(o-e)<1e-6?1:(e===360?o=(o<0?o%e+e:o%e)/parseFloat(String(e)):o=o%e/parseFloat(String(e)),o)}function clamp01(o){return Math.min(1,Math.max(0,o))}function isOnePointZero(o){return typeof o=="string"&&o.indexOf(".")!==-1&&parseFloat(o)===1}function isPercentage(o){return typeof o=="string"&&o.indexOf("%")!==-1}function boundAlpha(o){return o=parseFloat(o),(isNaN(o)||o<0||o>1)&&(o=1),o}function convertToPercentage(o){return o<=1?"".concat(Number(o)*100,"%"):o}function pad2(o){return o.length===1?"0"+o:String(o)}function rgbToRgb(o,e,t){return{r:bound01(o,255)*255,g:bound01(e,255)*255,b:bound01(t,255)*255}}function rgbToHsl(o,e,t){o=bound01(o,255),e=bound01(e,255),t=bound01(t,255);var n=Math.max(o,e,t),r=Math.min(o,e,t),a=0,s=0,l=(n+r)/2;if(n===r)s=0,a=0;else{var u=n-r;switch(s=l>.5?u/(2-n-r):u/(n+r),n){case o:a=(e-t)/u+(e<t?6:0);break;case e:a=(t-o)/u+2;break;case t:a=(o-e)/u+4;break}a/=6}return{h:a,s,l}}function hue2rgb(o,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?o+(e-o)*(6*t):t<1/2?e:t<2/3?o+(e-o)*(2/3-t)*6:o}function hslToRgb(o,e,t){var n,r,a;if(o=bound01(o,360),e=bound01(e,100),t=bound01(t,100),e===0)r=t,a=t,n=t;else{var s=t<.5?t*(1+e):t+e-t*e,l=2*t-s;n=hue2rgb(l,s,o+1/3),r=hue2rgb(l,s,o),a=hue2rgb(l,s,o-1/3)}return{r:n*255,g:r*255,b:a*255}}function rgbToHsv(o,e,t){o=bound01(o,255),e=bound01(e,255),t=bound01(t,255);var n=Math.max(o,e,t),r=Math.min(o,e,t),a=0,s=n,l=n-r,u=n===0?0:l/n;if(n===r)a=0;else{switch(n){case o:a=(e-t)/l+(e<t?6:0);break;case e:a=(t-o)/l+2;break;case t:a=(o-e)/l+4;break}a/=6}return{h:a,s:u,v:s}}function hsvToRgb(o,e,t){o=bound01(o,360)*6,e=bound01(e,100),t=bound01(t,100);var n=Math.floor(o),r=o-n,a=t*(1-e),s=t*(1-r*e),l=t*(1-(1-r)*e),u=n%6,d=[t,s,a,a,l,t][u],f=[l,t,t,s,a,a][u],m=[a,a,l,t,t,s][u];return{r:d*255,g:f*255,b:m*255}}function rgbToHex(o,e,t,n){var r=[pad2(Math.round(o).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16))];return n&&r[0].startsWith(r[0].charAt(1))&&r[1].startsWith(r[1].charAt(1))&&r[2].startsWith(r[2].charAt(1))?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function rgbaToHex(o,e,t,n,r){var a=[pad2(Math.round(o).toString(16)),pad2(Math.round(e).toString(16)),pad2(Math.round(t).toString(16)),pad2(convertDecimalToHex(n))];return r&&a[0].startsWith(a[0].charAt(1))&&a[1].startsWith(a[1].charAt(1))&&a[2].startsWith(a[2].charAt(1))&&a[3].startsWith(a[3].charAt(1))?a[0].charAt(0)+a[1].charAt(0)+a[2].charAt(0)+a[3].charAt(0):a.join("")}function convertDecimalToHex(o){return Math.round(parseFloat(o)*255).toString(16)}function convertHexToDecimal(o){return parseIntFromHex(o)/255}function parseIntFromHex(o){return parseInt(o,16)}function numberInputToObject(o){return{r:o>>16,g:(o&65280)>>8,b:o&255}}var names={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",goldenrod:"#daa520",gold:"#ffd700",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavenderblush:"#fff0f5",lavender:"#e6e6fa",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"};function inputToRGB(o){var e={r:0,g:0,b:0},t=1,n=null,r=null,a=null,s=!1,l=!1;return typeof o=="string"&&(o=stringInputToObject(o)),typeof o=="object"&&(isValidCSSUnit(o.r)&&isValidCSSUnit(o.g)&&isValidCSSUnit(o.b)?(e=rgbToRgb(o.r,o.g,o.b),s=!0,l=String(o.r).substr(-1)==="%"?"prgb":"rgb"):isValidCSSUnit(o.h)&&isValidCSSUnit(o.s)&&isValidCSSUnit(o.v)?(n=convertToPercentage(o.s),r=convertToPercentage(o.v),e=hsvToRgb(o.h,n,r),s=!0,l="hsv"):isValidCSSUnit(o.h)&&isValidCSSUnit(o.s)&&isValidCSSUnit(o.l)&&(n=convertToPercentage(o.s),a=convertToPercentage(o.l),e=hslToRgb(o.h,n,a),s=!0,l="hsl"),Object.prototype.hasOwnProperty.call(o,"a")&&(t=o.a)),t=boundAlpha(t),{ok:s,format:o.format||l,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}var CSS_INTEGER="[-\\+]?\\d+%?",CSS_NUMBER="[-\\+]?\\d*\\.\\d+%?",CSS_UNIT="(?:".concat(CSS_NUMBER,")|(?:").concat(CSS_INTEGER,")"),PERMISSIVE_MATCH3="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),PERMISSIVE_MATCH4="[\\s|\\(]+(".concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")[,|\\s]+(").concat(CSS_UNIT,")\\s*\\)?"),matchers={CSS_UNIT:new RegExp(CSS_UNIT),rgb:new RegExp("rgb"+PERMISSIVE_MATCH3),rgba:new RegExp("rgba"+PERMISSIVE_MATCH4),hsl:new RegExp("hsl"+PERMISSIVE_MATCH3),hsla:new RegExp("hsla"+PERMISSIVE_MATCH4),hsv:new RegExp("hsv"+PERMISSIVE_MATCH3),hsva:new RegExp("hsva"+PERMISSIVE_MATCH4),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function stringInputToObject(o){if(o=o.trim().toLowerCase(),o.length===0)return!1;var e=!1;if(names[o])o=names[o],e=!0;else if(o==="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t=matchers.rgb.exec(o);return t?{r:t[1],g:t[2],b:t[3]}:(t=matchers.rgba.exec(o),t?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=matchers.hsl.exec(o),t?{h:t[1],s:t[2],l:t[3]}:(t=matchers.hsla.exec(o),t?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=matchers.hsv.exec(o),t?{h:t[1],s:t[2],v:t[3]}:(t=matchers.hsva.exec(o),t?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=matchers.hex8.exec(o),t?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),a:convertHexToDecimal(t[4]),format:e?"name":"hex8"}:(t=matchers.hex6.exec(o),t?{r:parseIntFromHex(t[1]),g:parseIntFromHex(t[2]),b:parseIntFromHex(t[3]),format:e?"name":"hex"}:(t=matchers.hex4.exec(o),t?{r:parseIntFromHex(t[1]+t[1]),g:parseIntFromHex(t[2]+t[2]),b:parseIntFromHex(t[3]+t[3]),a:convertHexToDecimal(t[4]+t[4]),format:e?"name":"hex8"}:(t=matchers.hex3.exec(o),t?{r:parseIntFromHex(t[1]+t[1]),g:parseIntFromHex(t[2]+t[2]),b:parseIntFromHex(t[3]+t[3]),format:e?"name":"hex"}:!1)))))))))}function isValidCSSUnit(o){return!!matchers.CSS_UNIT.exec(String(o))}var TinyColor=function(){function o(e,t){e===void 0&&(e=""),t===void 0&&(t={});var n;if(e instanceof o)return e;typeof e=="number"&&(e=numberInputToObject(e)),this.originalInput=e;var r=inputToRGB(e);this.originalInput=e,this.r=r.r,this.g=r.g,this.b=r.b,this.a=r.a,this.roundA=Math.round(100*this.a)/100,this.format=(n=t.format)!==null&&n!==void 0?n:r.format,this.gradientType=t.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=r.ok}return o.prototype.isDark=function(){return this.getBrightness()<128},o.prototype.isLight=function(){return!this.isDark()},o.prototype.getBrightness=function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},o.prototype.getLuminance=function(){var e=this.toRgb(),t,n,r,a=e.r/255,s=e.g/255,l=e.b/255;return a<=.03928?t=a/12.92:t=Math.pow((a+.055)/1.055,2.4),s<=.03928?n=s/12.92:n=Math.pow((s+.055)/1.055,2.4),l<=.03928?r=l/12.92:r=Math.pow((l+.055)/1.055,2.4),.2126*t+.7152*n+.0722*r},o.prototype.getAlpha=function(){return this.a},o.prototype.setAlpha=function(e){return this.a=boundAlpha(e),this.roundA=Math.round(100*this.a)/100,this},o.prototype.toHsv=function(){var e=rgbToHsv(this.r,this.g,this.b);return{h:e.h*360,s:e.s,v:e.v,a:this.a}},o.prototype.toHsvString=function(){var e=rgbToHsv(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this.a===1?"hsv(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsva(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},o.prototype.toHsl=function(){var e=rgbToHsl(this.r,this.g,this.b);return{h:e.h*360,s:e.s,l:e.l,a:this.a}},o.prototype.toHslString=function(){var e=rgbToHsl(this.r,this.g,this.b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this.a===1?"hsl(".concat(t,", ").concat(n,"%, ").concat(r,"%)"):"hsla(".concat(t,", ").concat(n,"%, ").concat(r,"%, ").concat(this.roundA,")")},o.prototype.toHex=function(e){return e===void 0&&(e=!1),rgbToHex(this.r,this.g,this.b,e)},o.prototype.toHexString=function(e){return e===void 0&&(e=!1),"#"+this.toHex(e)},o.prototype.toHex8=function(e){return e===void 0&&(e=!1),rgbaToHex(this.r,this.g,this.b,this.a,e)},o.prototype.toHex8String=function(e){return e===void 0&&(e=!1),"#"+this.toHex8(e)},o.prototype.toRgb=function(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}},o.prototype.toRgbString=function(){var e=Math.round(this.r),t=Math.round(this.g),n=Math.round(this.b);return this.a===1?"rgb(".concat(e,", ").concat(t,", ").concat(n,")"):"rgba(".concat(e,", ").concat(t,", ").concat(n,", ").concat(this.roundA,")")},o.prototype.toPercentageRgb=function(){var e=function(t){return"".concat(Math.round(bound01(t,255)*100),"%")};return{r:e(this.r),g:e(this.g),b:e(this.b),a:this.a}},o.prototype.toPercentageRgbString=function(){var e=function(t){return Math.round(bound01(t,255)*100)};return this.a===1?"rgb(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%)"):"rgba(".concat(e(this.r),"%, ").concat(e(this.g),"%, ").concat(e(this.b),"%, ").concat(this.roundA,")")},o.prototype.toName=function(){if(this.a===0)return"transparent";if(this.a<1)return!1;for(var e="#"+rgbToHex(this.r,this.g,this.b,!1),t=0,n=Object.entries(names);t<n.length;t++){var r=n[t],a=r[0],s=r[1];if(e===s)return a}return!1},o.prototype.toString=function(e){var t=!!e;e=e??this.format;var n=!1,r=this.a<1&&this.a>=0,a=!t&&r&&(e.startsWith("hex")||e==="name");return a?e==="name"&&this.a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},o.prototype.toNumber=function(){return(Math.round(this.r)<<16)+(Math.round(this.g)<<8)+Math.round(this.b)},o.prototype.clone=function(){return new o(this.toString())},o.prototype.lighten=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l+=e/100,t.l=clamp01(t.l),new o(t)},o.prototype.brighten=function(e){e===void 0&&(e=10);var t=this.toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),new o(t)},o.prototype.darken=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.l-=e/100,t.l=clamp01(t.l),new o(t)},o.prototype.tint=function(e){return e===void 0&&(e=10),this.mix("white",e)},o.prototype.shade=function(e){return e===void 0&&(e=10),this.mix("black",e)},o.prototype.desaturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s-=e/100,t.s=clamp01(t.s),new o(t)},o.prototype.saturate=function(e){e===void 0&&(e=10);var t=this.toHsl();return t.s+=e/100,t.s=clamp01(t.s),new o(t)},o.prototype.greyscale=function(){return this.desaturate(100)},o.prototype.spin=function(e){var t=this.toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,new o(t)},o.prototype.mix=function(e,t){t===void 0&&(t=50);var n=this.toRgb(),r=new o(e).toRgb(),a=t/100,s={r:(r.r-n.r)*a+n.r,g:(r.g-n.g)*a+n.g,b:(r.b-n.b)*a+n.b,a:(r.a-n.a)*a+n.a};return new o(s)},o.prototype.analogous=function(e,t){e===void 0&&(e=6),t===void 0&&(t=30);var n=this.toHsl(),r=360/t,a=[this];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,a.push(new o(n));return a},o.prototype.complement=function(){var e=this.toHsl();return e.h=(e.h+180)%360,new o(e)},o.prototype.monochromatic=function(e){e===void 0&&(e=6);for(var t=this.toHsv(),n=t.h,r=t.s,a=t.v,s=[],l=1/e;e--;)s.push(new o({h:n,s:r,v:a})),a=(a+l)%1;return s},o.prototype.splitcomplement=function(){var e=this.toHsl(),t=e.h;return[this,new o({h:(t+72)%360,s:e.s,l:e.l}),new o({h:(t+216)%360,s:e.s,l:e.l})]},o.prototype.onBackground=function(e){var t=this.toRgb(),n=new o(e).toRgb();return new o({r:n.r+(t.r-n.r)*t.a,g:n.g+(t.g-n.g)*t.a,b:n.b+(t.b-n.b)*t.a})},o.prototype.triad=function(){return this.polyad(3)},o.prototype.tetrad=function(){return this.polyad(4)},o.prototype.polyad=function(e){for(var t=this.toHsl(),n=t.h,r=[this],a=360/e,s=1;s<e;s++)r.push(new o({h:(n+s*a)%360,s:t.s,l:t.l}));return r},o.prototype.equals=function(e){return this.toRgbString()===new o(e).toRgbString()},o}(),hueStep=2,saturationStep=.16,saturationStep2=.05,brightnessStep1=.05,brightnessStep2=.15,lightColorCount=5,darkColorCount=4,darkColorMap=[{index:7,opacity:.15},{index:6,opacity:.25},{index:5,opacity:.3},{index:5,opacity:.45},{index:5,opacity:.65},{index:5,opacity:.85},{index:4,opacity:.9},{index:3,opacity:.95},{index:2,opacity:.97},{index:1,opacity:.98}];function getHue(o,e,t){var n;return Math.round(o.h)>=60&&Math.round(o.h)<=240?n=t?Math.round(o.h)-hueStep*e:Math.round(o.h)+hueStep*e:n=t?Math.round(o.h)+hueStep*e:Math.round(o.h)-hueStep*e,n<0?n+=360:n>=360&&(n-=360),n}function getSaturation(o,e,t){if(o.h===0&&o.s===0)return o.s;var n;return t?n=o.s-saturationStep*e:e===darkColorCount?n=o.s+saturationStep:n=o.s+saturationStep2*e,n>1&&(n=1),t&&e===lightColorCount&&n>.1&&(n=.1),n<.06&&(n=.06),Number(n.toFixed(2))}function getValue(o,e,t){var n;return t?n=o.v+brightnessStep1*e:n=o.v-brightnessStep2*e,n>1&&(n=1),Number(n.toFixed(2))}function generate(o){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=[],n=new TinyColor(o),r=lightColorCount;r>0;r-=1){var a=n.toHsv(),s=new TinyColor({h:getHue(a,r,!0),s:getSaturation(a,r,!0),v:getValue(a,r,!0)}).toHexString();t.push(s)}t.push(n.toHexString());for(var l=1;l<=darkColorCount;l+=1){var u=n.toHsv(),d=new TinyColor({h:getHue(u,l),s:getSaturation(u,l),v:getValue(u,l)}).toHexString();t.push(d)}return e.theme==="dark"?darkColorMap.map(function(f){var m=f.index,h=f.opacity,p=new TinyColor(e.backgroundColor||"#141414").mix(t[m],h*100).toHexString();return p}):t}var presetPrimaryColors={red:"#F5222D",volcano:"#FA541C",orange:"#FA8C16",gold:"#FAAD14",yellow:"#FADB14",lime:"#A0D911",green:"#52C41A",cyan:"#13C2C2",blue:"#1890FF",geekblue:"#2F54EB",purple:"#722ED1",magenta:"#EB2F96",grey:"#666666"},presetPalettes={},presetDarkPalettes={};Object.keys(presetPrimaryColors).forEach(function(o){presetPalettes[o]=generate(presetPrimaryColors[o]),presetPalettes[o].primary=presetPalettes[o][5],presetDarkPalettes[o]=generate(presetPrimaryColors[o],{theme:"dark",backgroundColor:"#141414"}),presetDarkPalettes[o].primary=presetDarkPalettes[o][5]});const DataChart_svelte_svelte_type_style_lang="";function create_if_block$N(o){let e=`${o[0].chartType}|${o[1]}|${o[2]}`,t,n,r=create_key_block$4(o);return{c(){r.c(),t=empty()},m(a,s){r.m(a,s),insert(a,t,s),n=!0},p(a,s){s&7&&safe_not_equal(e,e=`${a[0].chartType}|${a[1]}|${a[2]}`)?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block$4(a),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r.p(a,s)},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r.d(a)}}}function create_key_block$4(o){let e,t;return e=new ChartCore({props:{width:o[1],height:o[2],data:o[3][0],type:o[0].chartType,title:o[0].chartTitle,options:{...o[3][1],plugins:o[3][2]}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.width=n[1]),r&4&&(a.height=n[2]),r&8&&(a.data=n[3][0]),r&1&&(a.type=n[0].chartType),r&1&&(a.title=n[0].chartTitle),r&8&&(a.options={...n[3][1],plugins:n[3][2]}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1u(o){let e,t,n,r=o[3]&&create_if_block$N(o);return{c(){e=element("div"),r&&r.c(),attr(e,"class","wrapper svelte-3ovaru"),add_render_callback(()=>o[10].call(e))},m(a,s){insert(a,e,s),r&&r.m(e,null),t=add_iframe_resize_listener(e,o[10].bind(e)),n=!0},p(a,[s]){a[3]?r?(r.p(a,s),s&8&&transition_in(r,1)):(r=create_if_block$N(a),r.c(),transition_in(r,1),r.m(e,null)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros())},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(e),r&&r.d(),t()}}}function getTimeAxis(o){const e=[];for(const t of o){const n=hooks(t);if(!n.isValid())return null;const r=n.toISOString();if(r<"1850-01-01T00:00:00"||r>"2150-01-01T00:00:00")return null;e.push(n)}return e}function getLabels(o,e,t){return e?t==="line"?e.map(n=>n.toDate()):e.map(n=>n.format("D. M. YYYY")):o}function getOptions(o,e){const t={scales:{}};return o&&e==="line"&&(t.scales={x:{type:"time",distribution:"linear",time:{tooltipFormat:"D. M. YYYY HH:mm",displayFormats:{millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"D.M hA",day:"D. M.",week:"D. M. YYYY",month:"MM-YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}}}}),t}function getPlugins(o){const e={};return o&&(e.title={display:!0,text:o}),e.zoom={zoom:{wheel:{enabled:!0},pinch:{enabled:!0},drag:{enabled:!0,modifierKey:"shift"},mode:"x"},pan:{enabled:!0,mode:"x"}},e}function createChartData(o,e,t,n,r,a,s,l,u,d){if(!o||!e||!t||!o.rows||t.length==0)return null;const f=(d==null?void 0:d.themeType)=="dark"?presetDarkPalettes:presetPalettes,m=randomcolor({count:_.max([o.rows.length,t.length,1]),seed:n});let h=null,p=null;const g=o.rows.map(A=>A[e]),b=getTimeAxis(g),y={labels:getLabels(g,b,r),datasets:t.map((A,k)=>{const T=u[A];if(r=="line"||r=="bar"){const $=l[A];$?(h=f[$][4]+"80",p=f[$][7]):(h=m[k]+"80",p=m[k])}else h=m;return{label:T||A,data:o.rows.map($=>$[A]),backgroundColor:h,borderColor:p,borderWidth:1,fill:s!=!1}})},C=getOptions(b,r),E=getPlugins(a);return[y,C,E]}function instance$1t(o,e,t){let n,r,a,s,l,u;component_subscribe(o,currentThemeDefinition,g=>t(9,l=g));let{data:d}=e;const{values:f}=getFormContext();component_subscribe(o,f,g=>t(0,u=g));let m,h;function p(){m=this.clientWidth,h=this.clientHeight,t(1,m),t(2,h)}return o.$$set=g=>{"data"in g&&t(5,d=g.data)},o.$$.update=()=>{o.$$.dirty&1&&t(8,n=extractDataColumns(u)),o.$$.dirty&257&&t(7,r=extractDataColumnColors(u,n)),o.$$.dirty&257&&t(6,a=extractDataColumnLabels(u,n)),o.$$.dirty&993&&t(3,s=createChartData(d,u.labelColumn,n,u.colorSeed||"5",u.chartType,u.chartTitle,u.fillLineChart,r,a,l))},[u,m,h,s,f,d,a,r,n,l,p]}class DataChart extends SvelteComponent{constructor(e){super(),init(this,e,instance$1t,create_fragment$1u,safe_not_equal,{data:5})}}const ColorSelector_svelte_svelte_type_style_lang="";function get_each_context$h(o,e,t){const n=o.slice();return n[7]=e[t],n}function create_each_block$h(o){let e,t,n,r,a,s,l;t=new FontIcon({props:{icon:o[7]==o[0]?"icon check":"icon invisible-box"}});function u(){return o[6](o[7])}return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),attr(e,"style",r=`background:${o[3](o[7],3,o[2])}`),attr(e,"class","item svelte-1vl91lb"),toggle_class(e,"disabled",o[1]),toggle_class(e,"selected",o[7]==o[0])},m(d,f){insert(d,e,f),mount_component(t,e,null),append(e,n),a=!0,s||(l=listen(e,"click",u),s=!0)},p(d,f){o=d;const m={};f&1&&(m.icon=o[7]==o[0]?"icon check":"icon invisible-box"),t.$set(m),(!a||f&4&&r!==(r=`background:${o[3](o[7],3,o[2])}`))&&attr(e,"style",r),(!a||f&2)&&toggle_class(e,"disabled",o[1]),(!a||f&1)&&toggle_class(e,"selected",o[7]==o[0])},i(d){a||(transition_in(t.$$.fragment,d),a=!0)},o(d){transition_out(t.$$.fragment,d),a=!1},d(d){d&&detach(e),destroy_component(t),s=!1,l()}}}function create_fragment$1t(o){let e,t,n,r,a,s,l;n=new FontIcon({props:{icon:o[0]?"icon palette":"icon no-color"}});let u=ensure_array_like(_.keys(presetPrimaryColors)),d=[];for(let m=0;m<u.length;m+=1)d[m]=create_each_block$h(get_each_context$h(o,u,m));const f=m=>transition_out(d[m],1,1,()=>{d[m]=null});return{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space();for(let m=0;m<d.length;m+=1)d[m].c();attr(t,"class","item svelte-1vl91lb"),toggle_class(t,"disabled",o[1]),toggle_class(t,"selected",!o[0]),attr(e,"class","container svelte-1vl91lb")},m(m,h){insert(m,e,h),append(e,t),mount_component(n,t,null),append(e,r);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(e,null);a=!0,s||(l=listen(t,"click",o[5]),s=!0)},p(m,[h]){const p={};if(h&1&&(p.icon=m[0]?"icon palette":"icon no-color"),n.$set(p),(!a||h&2)&&toggle_class(t,"disabled",m[1]),(!a||h&1)&&toggle_class(t,"selected",!m[0]),h&31){u=ensure_array_like(_.keys(presetPrimaryColors));let g;for(g=0;g<u.length;g+=1){const b=get_each_context$h(m,u,g);d[g]?(d[g].p(b,h),transition_in(d[g],1)):(d[g]=create_each_block$h(b),d[g].c(),transition_in(d[g],1),d[g].m(e,null))}for(group_outros(),g=u.length;g<d.length;g+=1)f(g);check_outros()}},i(m){if(!a){transition_in(n.$$.fragment,m);for(let h=0;h<u.length;h+=1)transition_in(d[h]);a=!0}},o(m){transition_out(n.$$.fragment,m),d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)transition_out(d[h]);a=!1},d(m){m&&detach(e),destroy_component(n),destroy_each(d,m),s=!1,l()}}}function instance$1s(o,e,t){let n;component_subscribe(o,currentThemeDefinition,f=>t(2,n=f));let{value:r}=e,{disabled:a=!1}=e;function s(f,m,h){return((h==null?void 0:h.themeType)=="dark"?presetDarkPalettes:presetPalettes)[f][m]}const l=createEventDispatcher(),u=()=>{l("change",null)},d=f=>{a||l("change",f)};return o.$$set=f=>{"value"in f&&t(0,r=f.value),"disabled"in f&&t(1,a=f.disabled)},[r,a,n,s,l,u,d]}class ColorSelector extends SvelteComponent{constructor(e){super(),init(this,e,instance$1s,create_fragment$1t,safe_not_equal,{value:0,disabled:1})}}function create_else_block$l(o){let e,t;const n=[{isNative:!0},{disabled:o[5]},o[10],{label:o[3]},{name:o[4]},{options:[{value:"",label:o[0]},..._.keys(presetPrimaryColors).map(o[12])]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormSelectField({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&1081?get_spread_update(n,[n[0],s&32&&{disabled:a[5]},s&1024&&get_spread_object(a[10]),s&8&&{label:a[3]},s&16&&{name:a[4]},s&1&&{options:[{value:"",label:a[0]},..._.keys(presetPrimaryColors).map(a[12])]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block$M(o){let e,t,n;const r=[{type:"text"},{label:o[3]},o[2]];var a=o[7];function s(l){let u={$$slots:{default:[create_default_slot$B]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,u){const d=u&12?get_spread_update(r,[r[0],u&8&&{label:l[3]},u&4&&get_spread_object(l[2])]):{};if(u&8304&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[7])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function create_default_slot$B(o){let e,t;return e=new ColorSelector({props:{value:o[6]&&o[6][o[4]],disabled:o[5]}}),e.$on("change",o[11]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&80&&(a.value=n[6]&&n[6][n[4]]),r&32&&(a.disabled=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1s(o){let e,t,n,r;const a=[create_if_block$M,create_else_block$l],s=[];function l(u,d){return u[1]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$1r(o,e,t){const n=["emptyLabel","useSelector","templateProps","label","name","disabled"];let r=compute_rest_props(e,n),a,{emptyLabel:s}=e,{useSelector:l=!1}=e,{templateProps:u={}}=e,{label:d}=e,{name:f}=e,{disabled:m=!1}=e;const{template:h}=getFormContext(),{values:p,setFieldValue:g}=getFormContext();component_subscribe(o,p,y=>t(6,a=y));const b=y=>{g(f,y.detail)},v=y=>({value:y,label:_.startCase(y)});return o.$$set=y=>{e=assign(assign({},e),exclude_internal_props(y)),t(10,r=compute_rest_props(e,n)),"emptyLabel"in y&&t(0,s=y.emptyLabel),"useSelector"in y&&t(1,l=y.useSelector),"templateProps"in y&&t(2,u=y.templateProps),"label"in y&&t(3,d=y.label),"name"in y&&t(4,f=y.name),"disabled"in y&&t(5,m=y.disabled)},[s,l,u,d,f,m,a,h,p,g,r,b,v]}class FormColorField extends SvelteComponent{constructor(e){super(),init(this,e,instance$1r,create_fragment$1s,safe_not_equal,{emptyLabel:0,useSelector:1,templateProps:2,label:3,name:4,disabled:5})}}const ChartEditor_svelte_svelte_type_style_lang="";function get_each_context$g(o,e,t){const n=o.slice();return n[18]=e[t],n}function create_if_block_4$d(o){let e,t;return e=new FormCheckboxField({props:{label:"Fill",name:"fillLineChart",defaultValue:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_5$6(o){let e,t,n,r,a,s,l,u,d,f,m,h,p;e=new FormSelectField({props:{label:"Chart type",name:"chartType",isNative:!0,options:[{value:"bar",label:"Bar"},{value:"line",label:"Line"},{value:"pie",label:"Pie"},{value:"polarArea",label:"Polar area"}]}}),n=new FormTextField({props:{label:"Chart title",name:"chartTitle"}}),a=new FormSelectField({props:{label:"Truncate from",name:"truncateFrom",isNative:!0,options:[{value:"begin",label:"Begin"},{value:"end",label:"End (most recent data for datetime)"}]}}),l=new FormTextField({props:{label:"Truncate limit",name:"truncateLimit"}}),d=new FormCheckboxField({props:{label:"Show relative values",name:"showRelativeValues"}});let g=o[3].chartType=="line"&&create_if_block_4$d();return h=new FormTextField({props:{label:"Color set",name:"colorSeed"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),g&&g.c(),m=space(),create_component(h.$$.fragment)},m(b,v){mount_component(e,b,v),insert(b,t,v),mount_component(n,b,v),insert(b,r,v),mount_component(a,b,v),insert(b,s,v),mount_component(l,b,v),insert(b,u,v),mount_component(d,b,v),insert(b,f,v),g&&g.m(b,v),insert(b,m,v),mount_component(h,b,v),p=!0},p(b,v){b[3].chartType=="line"?g?v&8&&transition_in(g,1):(g=create_if_block_4$d(),g.c(),transition_in(g,1),g.m(m.parentNode,m)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros())},i(b){p||(transition_in(e.$$.fragment,b),transition_in(n.$$.fragment,b),transition_in(a.$$.fragment,b),transition_in(l.$$.fragment,b),transition_in(d.$$.fragment,b),transition_in(g),transition_in(h.$$.fragment,b),p=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(n.$$.fragment,b),transition_out(a.$$.fragment,b),transition_out(l.$$.fragment,b),transition_out(d.$$.fragment,b),transition_out(g),transition_out(h.$$.fragment,b),p=!1},d(b){b&&(detach(t),detach(r),detach(s),detach(u),detach(f),detach(m)),destroy_component(e,b),destroy_component(n,b),destroy_component(a,b),destroy_component(l,b),destroy_component(d,b),g&&g.d(b),destroy_component(h,b)}}}function create_default_slot_4$6(o){let e,t;return e=new ManagerInnerContainer({props:{width:o[8],$$slots:{default:[create_default_slot_5$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&256&&(a.width=n[8]),r&2097160&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$e(o){let e,t;return e=new FormSelectField({props:{label:"Label column",name:"labelColumn",isNative:!0,options:o[4].map(func$7)}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.options=n[4].map(func$7)),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$i(o){let e,t,n,r;return e=new FormColorField({props:{label:"Color",name:`dataColumnColor_${o[18]}`,emptyLabel:"Random"}}),n=new FormTextField({props:{label:"Label",name:`dataColumnLabel_${o[18]}`}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&16&&(l.name=`dataColumnColor_${a[18]}`),e.$set(l);const u={};s&16&&(u.name=`dataColumnLabel_${a[18]}`),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_each_block$g(o,e){let t,n,r,a,s;n=new FormCheckboxField({props:{label:e[18],name:`dataColumn_${e[18]}`}});let l=e[2][`dataColumn_${e[18]}`]&&create_if_block_2$i(e);return{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),r=space(),l&&l.c(),a=empty(),this.first=t},m(u,d){insert(u,t,d),mount_component(n,u,d),insert(u,r,d),l&&l.m(u,d),insert(u,a,d),s=!0},p(u,d){e=u;const f={};d&16&&(f.label=e[18]),d&16&&(f.name=`dataColumn_${e[18]}`),n.$set(f),e[2][`dataColumn_${e[18]}`]?l?(l.p(e,d),d&20&&transition_in(l,1)):(l=create_if_block_2$i(e),l.c(),transition_in(l,1),l.m(a.parentNode,a)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){s||(transition_in(n.$$.fragment,u),transition_in(l),s=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(l),s=!1},d(u){u&&(detach(t),detach(r),detach(a)),destroy_component(n,u),l&&l.d(u)}}}function create_default_slot_3$a(o){let e,t=[],n=new Map,r,a,s=o[4].length>0&&create_if_block_3$e(o),l=ensure_array_like(o[4]);const u=d=>d[18];for(let d=0;d<l.length;d+=1){let f=get_each_context$g(o,l,d),m=u(f);n.set(m,t[d]=create_each_block$g(m,f))}return{c(){s&&s.c(),e=space();for(let d=0;d<t.length;d+=1)t[d].c();r=empty()},m(d,f){s&&s.m(d,f),insert(d,e,f);for(let m=0;m<t.length;m+=1)t[m]&&t[m].m(d,f);insert(d,r,f),a=!0},p(d,f){d[4].length>0?s?(s.p(d,f),f&16&&transition_in(s,1)):(s=create_if_block_3$e(d),s.c(),transition_in(s,1),s.m(e.parentNode,e)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),f&20&&(l=ensure_array_like(d[4]),group_outros(),t=update_keyed_each(t,f,u,1,d,l,n,r.parentNode,outro_and_destroy_block,create_each_block$g,r,get_each_context$g),check_outros())},i(d){if(!a){transition_in(s);for(let f=0;f<l.length;f+=1)transition_in(t[f]);a=!0}},o(d){transition_out(s);for(let f=0;f<t.length;f+=1)transition_out(t[f]);a=!1},d(d){d&&(detach(e),detach(r)),s&&s.d(d);for(let f=0;f<t.length;f+=1)t[f].d(d)}}}function create_default_slot_2$c(o){let e,t;return e=new ManagerInnerContainer({props:{width:o[8],$$slots:{default:[create_default_slot_3$a]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&256&&(a.width=n[8]),r&2097172&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$k(o){let e,t,n,r;return e=new WidgetColumnBarItem({props:{title:"Style",name:"style",height:"40%",$$slots:{default:[create_default_slot_4$6]},$$scope:{ctx:o}}}),n=new WidgetColumnBarItem({props:{title:"Data",name:"data",$$slots:{default:[create_default_slot_2$c]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&2097416&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&2097428&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create__1_slot$c(o){let e,t,n;return t=new WidgetColumnBar({props:{$$slots:{default:[create_default_slot_1$k]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","left svelte-1r4fguo"),attr(e,"slot","1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&2097436&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_else_block$k(o){let e,t;return e=new DataChart({props:{data:o[0]||o[7]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&129&&(a.data=n[0]||n[7]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$v(o){let e,t;return e=new ErrorInfo({props:{message:o[6],alignTop:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&64&&(a.message=n[6]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$L(o){let e,t;return e=new ErrorInfo({props:{message:o[5],alignTop:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&32&&(a.message=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$b(o){let e,t,n,r;const a=[create_if_block$L,create_if_block_1$v,create_else_block$k],s=[];function l(u,d){return u[5]?0:u[6]?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_default_slot$A(o){let e,t,n;function r(s){o[13](s)}let a={initialValue:"300px",$$slots:{2:[create__2_slot$b],1:[create__1_slot$c]},$$scope:{ctx:o}};return o[8]!==void 0&&(a.size=o[8]),e=new HorizontalSplitter({props:a}),binding_callbacks.push(()=>bind(e,"size",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};l&2097661&&(u.$$scope={dirty:l,ctx:s}),!t&&l&256&&(t=!0,u.size=s[8],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}function create_fragment$1r(o){let e,t;return e=new FormProviderCore({props:{values:o[1],template:FormFieldTemplateTiny,$$slots:{default:[create_default_slot$A]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&2&&(a.values=n[1]),r&2097661&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$7=o=>({value:o,label:o});function instance$1q(o,e,t){let n,r,a,s=noop$1,l=()=>(s(),s=subscribe(f,$=>t(3,a=$)),f);component_subscribe(o,extensions,$=>t(12,r=$)),o.$$.on_destroy.push(()=>s());var u=this&&this.__awaiter||function($,S,I,R){function N(M){return M instanceof I?M:new I(function(F){F(M)})}return new(I||(I=Promise))(function(M,F){function D(K){try{B(R.next(K))}catch(U){F(U)}}function x(K){try{B(R.throw(K))}catch(U){F(U)}}function B(K){K.done?M(K.value):N(K.value).then(D,x)}B((R=R.apply($,S||[])).next())})};let{data:d}=e,{configStore:f}=e;l();let{conid:m}=e,{database:h}=e,{sql:p}=e,g=[],b=null,v=null,y=null;const C=()=>u(void 0,void 0,void 0,function*(){const $=yield getConnectionInfo({conid:m});return $?lib.findEngineDriver($,r):void 0}),E=()=>u(void 0,void 0,void 0,function*(){const $=yield C();if($)try{t(5,b=null);const S=yield loadChartStructure($,m,h,p);t(4,g=S)}catch(S){console.error(S),t(5,b=S.message)}}),A=()=>u(void 0,void 0,void 0,function*(){const $=yield C();if($)try{t(6,v=null);const S=yield loadChartData($,m,h,p,n);if(!S)return;const{columns:I,rows:R}=S;t(7,y={structure:I,rows:R})}catch(S){console.error(S),t(6,v=S.message)}});let k;function T($){k=$,t(8,k)}return o.$$set=$=>{"data"in $&&t(0,d=$.data),"configStore"in $&&l(t(1,f=$.configStore)),"conid"in $&&t(9,m=$.conid),"database"in $&&t(10,h=$.database),"sql"in $&&t(11,p=$.sql)},o.$$.update=()=>{o.$$.dirty&8&&t(2,n=a),o.$$.dirty&7680&&p&&m&&h&&E(),o.$$.dirty&1&&d&&t(4,g=d.structure.columns.map($=>$.columnName)),o.$$.dirty&7684&&n.labelColumn&&p&&m&&h&&A()},[d,f,n,a,g,b,v,y,k,m,h,p,r,T]}class ChartEditor extends SvelteComponent{constructor(e){super(),init(this,e,instance$1q,create_fragment$1r,safe_not_equal,{data:0,configStore:1,conid:9,database:10,sql:11})}}function create_else_block$j(o){let e,t;return e=new ChartEditor({props:{data:o[2].value&&o[2].value.data,configStore:o[6],sql:o[2].value&&o[2].value.sql,conid:o[0],database:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.data=n[2].value&&n[2].value.data),r&4&&(a.sql=n[2].value&&n[2].value.sql),r&1&&(a.conid=n[0]),r&2&&(a.database=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$u(o){let e,t;return e=new ErrorInfo({props:{message:o[3].errorMessage}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.message=n[3].errorMessage),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$K(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading data"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1q(o){let e,t,n,r;const a=[create_if_block$K,create_if_block_1$u,create_else_block$j],s=[];function l(u,d){return u[3].isLoading?0:u[3].errorMessage?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}const getCurrentEditor$g=()=>getActiveComponent("ChartTab");registerFileCommands({idPrefix:"chart",category:"Chart",getCurrentEditor:getCurrentEditor$g,folder:"charts",format:"json",fileExtension:"chart",undoRedo:!0});function instance$1p(o,e,t){let n,r,{tabid:a}=e,{conid:s}=e,{database:l}=e;const u=createActivator("ChartTab",!0);function d(){return r.value||""}const{editorState:f,editorValue:m,setEditorData:h}=useEditorData({tabid:a,onInitialData:T=>{g({type:"reset",value:T})}});component_subscribe(o,f,T=>t(3,r=T));const[p,g]=createUndoReducer({tables:[],references:[],columns:[]});component_subscribe(o,p,T=>t(2,n=T));const b=T=>g({type:"compute",compute:$=>Object.assign(Object.assign({},$),{config:_.isFunction(T)?T($.config):T})}),v=derived(p,T=>T.value?T.value.config||{}:{}),y=Object.assign(Object.assign({},v),{update:b,set:b});function C(){return n.canUndo}function E(){g({type:"undo"})}function A(){return n.canRedo}function k(){g({type:"redo"})}return registerMenu({command:"chart.save"},{command:"chart.saveAs"},{placeTag:"export"},{divider:!0},{command:"chart.undo"},{command:"chart.redo"}),o.$$set=T=>{"tabid"in T&&t(7,a=T.tabid),"conid"in T&&t(0,s=T.conid),"database"in T&&t(1,l=T.database)},o.$$.update=()=>{o.$$.dirty&4&&h(n.value),o.$$.dirty&4&&invalidateCommands()},[s,l,n,r,f,p,y,a,u,d,C,E,A,k]}class ChartTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1p,create_fragment$1q,safe_not_equal,{tabid:7,conid:0,database:1,activator:8,getData:9,canUndo:10,undo:11,canRedo:12,redo:13})}get activator(){return this.$$.ctx[8]}get getData(){return this.$$.ctx[9]}get canUndo(){return this.$$.ctx[10]}get undo(){return this.$$.ctx[11]}get canRedo(){return this.$$.ctx[12]}get redo(){return this.$$.ctx[13]}}const ChartTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ChartTab},Symbol.toStringTag,{value:"Module"}));function create_fragment$1p(o){let e,t,n={value:o[2].value||"",menu:createMenu$5(),mode:"markdown"};return e=new AceEditor({props:n}),o[15](e),e.$on("input",o[16]),e.$on("focus",o[17]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,[a]){const s={};a&4&&(s.value=r[2].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[15](null),destroy_component(e,r)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$f=()=>getActiveComponent("MarkdownEditorTab");registerFileCommands({idPrefix:"markdown",category:"Markdown",getCurrentEditor:getCurrentEditor$f,folder:"markdown",format:"text",fileExtension:"md",toggleComment:!0,findReplace:!0});registerCommand({id:"markdown.preview",category:"Markdown",name:"Preview",icon:"icon run",toolbar:!0,isRelatedToTab:!0,keyText:"F5 | CtrlOrCommand+Enter",testEnabled:()=>getCurrentEditor$f()!=null,onClick:()=>getCurrentEditor$f().preview()});function createMenu$5(){return[{command:"markdown.preview"},{divider:!0},{command:"markdown.toggleComment"},{divider:!0},{command:"markdown.save"},{command:"markdown.saveAs"},{divider:!0},{command:"markdown.find"},{command:"markdown.replace"}]}function instance$1o(o,e,t){let n,r,a;component_subscribe(o,openedTabs,I=>t(18,n=I));var s=this&&this.__awaiter||function(I,R,N,M){function F(D){return D instanceof N?D:new N(function(x){x(D)})}return new(N||(N=Promise))(function(D,x){function B(G){try{U(M.next(G))}catch(W){x(W)}}function K(G){try{U(M.throw(G))}catch(W){x(W)}}function U(G){G.done?D(G.value):F(G.value).then(B,K)}U((M=M.apply(I,R||[])).next())})},l;let{tabid:u}=e;const d=getContext("tabVisible");component_subscribe(o,d,I=>t(14,a=I));const f=createActivator("MarkdownEditorTab",!1);let m;function h(){return r.value||""}function p(){m.getEditor().execCommand("togglecomment")}function g(){m.getEditor().execCommand("find")}function b(){m.getEditor().execCommand("replace")}function v(){return u}function y(){return s(this,void 0,void 0,function*(){yield k();const I=(n||[]).find(R=>R.props&&R.props.sourceTabId==u&&R.closedTime==null);if(I)setSelectedTab(I.tabid);else{const R=(n||[]).find(N=>N.tabid==u);openNewTab({title:R.title,icon:"img preview",tabComponent:"MarkdownPreviewTab",props:{sourceTabId:u}})}})}const{editorState:C,editorValue:E,setEditorData:A,saveToStorage:k}=useEditorData({tabid:u});component_subscribe(o,C,I=>t(2,r=I));function T(I){binding_callbacks[I?"unshift":"push"](()=>{m=I,t(1,m)})}const $=I=>A(I.detail),S=()=>{f.activate(),invalidateCommands()};return o.$$set=I=>{"tabid"in I&&t(6,u=I.tabid)},o.$$.update=()=>{o.$$.dirty&24578&&a&&m&&(t(13,l=m==null?void 0:m.getEditor())===null||l===void 0||l.focus())},[f,m,r,d,C,A,u,h,p,g,b,v,y,l,a,T,$,S]}class MarkdownEditorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1o,create_fragment$1p,safe_not_equal,{tabid:6,activator:0,getData:7,toggleComment:8,find:9,replace:10,getTabId:11,preview:12})}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[7]}get toggleComment(){return this.$$.ctx[8]}get find(){return this.$$.ctx[9]}get replace(){return this.$$.ctx[10]}get getTabId(){return this.$$.ctx[11]}get preview(){return this.$$.ctx[12]}}const MarkdownEditorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:MarkdownEditorTab},Symbol.toStringTag,{value:"Module"})),MarkdownViewTab_svelte_svelte_type_style_lang="";function create_else_block$i(o){let e,t,n;return t=new Markdown({props:{source:o[1]||""}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","svelte-skjeqm")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&2&&(s.source=r[1]||""),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block$J(o){let e,t;return e=new LoadingInfo({props:{message:"Loading markdown page"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1o(o){let e,t,n,r;const a=[create_if_block$J,create_else_block$i],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}globalThis&&globalThis.__awaiter;const allowAddToFavorites$2=o=>!0;function instance$1n(o,e,t){var n=this&&this.__awaiter||function(u,d,f,m){function h(p){return p instanceof f?p:new f(function(g){g(p)})}return new(f||(f=Promise))(function(p,g){function b(C){try{y(m.next(C))}catch(E){g(E)}}function v(C){try{y(m.throw(C))}catch(E){g(E)}}function y(C){C.done?p(C.value):h(C.value).then(b,v)}y((m=m.apply(u,d||[])).next())})};let{savedFile:r}=e,a=!1,s=null;const l=()=>n(void 0,void 0,void 0,function*(){t(0,a=!0);const u=yield apiCall("files/load",{folder:"markdown",file:r,format:"text"});t(1,s=u),t(0,a=!1)});return onMount(()=>{l()}),o.$$set=u=>{"savedFile"in u&&t(2,r=u.savedFile)},[a,s,r]}class MarkdownViewTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1n,create_fragment$1o,safe_not_equal,{savedFile:2})}}const MarkdownViewTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$2,default:MarkdownViewTab},Symbol.toStringTag,{value:"Module"})),MarkdownPreviewTab_svelte_svelte_type_style_lang="";function create_else_block$h(o){let e,t=o[0],n,r=create_key_block$3(o);return{c(){e=element("div"),r.c(),attr(e,"class","svelte-skjeqm")},m(a,s){insert(a,e,s),r.m(e,null),n=!0},p(a,s){s&1&&safe_not_equal(t,t=a[0])?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block$3(a),r.c(),transition_in(r,1),r.m(e,null)):r.p(a,s)},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(e),r.d(a)}}}function create_if_block$I(o){let e,t,n;return t=new LoadingInfo({props:{message:"Loading markdown page"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","svelte-skjeqm")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p:noop$1,i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_key_block$3(o){let e,t;return e=new Markdown({props:{source:o[0]||""}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.source=n[0]||""),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1n(o){let e,t,n,r;const a=[create_if_block$I,create_else_block$h],s=[];function l(u,d){return u[1].isLoading?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function instance$1m(o,e,t){let n,r,{sourceTabId:a}=e;const s=getContext("tabVisible");component_subscribe(o,s,f=>t(5,n=f));let l=null;const{initialLoad:u,editorState:d}=useEditorData({tabid:a,onInitialData:f=>{console.log("onInitialData",f),t(0,l=f)}});return component_subscribe(o,d,f=>t(1,r=f)),o.$$set=f=>{"sourceTabId"in f&&t(4,a=f.sourceTabId)},o.$$.update=()=>{o.$$.dirty&32&&n&&u()},[l,r,s,d,a,n]}class MarkdownPreviewTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1m,create_fragment$1n,safe_not_equal,{sourceTabId:4})}}const MarkdownPreviewTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:MarkdownPreviewTab},Symbol.toStringTag,{value:"Module"}));function create_if_block_4$c(o){let e,t;return e=new FormCheckboxField({props:{label:"Share as link",name:"shareAsLink"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$d(o){let e,t,n,r;return e=new FormCheckboxField({props:{label:"Show in toolbar",name:"showInToolbar"}}),n=new FormCheckboxField({props:{label:"Open on startup",name:"openOnStartup"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot_3$9(o){let e,t,n=!o[14].shareAsLink&&o[5]&&create_if_block_3$d();return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){!r[14].shareAsLink&&r[5]?n?a&16384&&transition_in(n,1):(n=create_if_block_3$d(),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_if_block_2$h(o){let e,t;return e=new FormSelectField({props:{label:"What to save",name:"whatToSave",options:[{label:"Link to file",value:"fileName"},{label:"Content",value:"content"}]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$b(o){let e,t,n,r,a,s,l,u,d,f,m;e=new FormTextField({props:{label:"Title",name:"title",focused:!0}}),n=new FormTextField({props:{label:"Icon",name:"icon"}}),a=new FormTextField({props:{label:"URL path",name:"urlPath"}});let h=!!o[1]&&!o[4]&&o[5]&&create_if_block_4$c();u=new FormValues({props:{$$slots:{default:[create_default_slot_3$9,({values:g})=>({14:g}),({values:g})=>g?16384:0]},$$scope:{ctx:o}}});let p=!!o[1]&&!!o[2]&&create_if_block_2$h();return{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),h&&h.c(),l=space(),create_component(u.$$.fragment),d=space(),p&&p.c(),f=empty()},m(g,b){mount_component(e,g,b),insert(g,t,b),mount_component(n,g,b),insert(g,r,b),mount_component(a,g,b),insert(g,s,b),h&&h.m(g,b),insert(g,l,b),mount_component(u,g,b),insert(g,d,b),p&&p.m(g,b),insert(g,f,b),m=!0},p(g,b){g[1]&&!g[4]&&g[5]?h?b&2&&transition_in(h,1):(h=create_if_block_4$c(),h.c(),transition_in(h,1),h.m(l.parentNode,l)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros());const v={};b&49152&&(v.$$scope={dirty:b,ctx:g}),u.$set(v),g[1]&&g[2]?p?b&6&&transition_in(p,1):(p=create_if_block_2$h(),p.c(),transition_in(p,1),p.m(f.parentNode,f)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(g){m||(transition_in(e.$$.fragment,g),transition_in(n.$$.fragment,g),transition_in(a.$$.fragment,g),transition_in(h),transition_in(u.$$.fragment,g),transition_in(p),m=!0)},o(g){transition_out(e.$$.fragment,g),transition_out(n.$$.fragment,g),transition_out(a.$$.fragment,g),transition_out(h),transition_out(u.$$.fragment,g),transition_out(p),m=!1},d(g){g&&(detach(t),detach(r),detach(s),detach(l),detach(d),detach(f)),destroy_component(e,g),destroy_component(n,g),destroy_component(a,g),h&&h.d(g),destroy_component(u,g),p&&p.d(g)}}}function create_header_slot$8(o){let e=o[0]?"Edit favorite":"Share / add to favorites",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&1&&e!==(e=n[0]?"Edit favorite":"Share / add to favorites")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_if_block_1$t(o){let e,t;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$H(o){let e,t;return e=new FormButton({props:{value:"Copy link"}}),e.$on("click",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$j(o){let e,t,n,r,a=!o[14].shareAsLink&&o[5]&&create_if_block_1$t(o),s=(o[14].shareAsLink||!o[5])&&create_if_block$H(o);return n=new FormButton({props:{value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){a&&a.c(),e=space(),s&&s.c(),t=space(),create_component(n.$$.fragment)},m(l,u){a&&a.m(l,u),insert(l,e,u),s&&s.m(l,u),insert(l,t,u),mount_component(n,l,u),r=!0},p(l,u){!l[14].shareAsLink&&l[5]?a?(a.p(l,u),u&16384&&transition_in(a,1)):(a=create_if_block_1$t(l),a.c(),transition_in(a,1),a.m(e.parentNode,e)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros()),l[14].shareAsLink||!l[5]?s?(s.p(l,u),u&16384&&transition_in(s,1)):(s=create_if_block$H(l),s.c(),transition_in(s,1),s.m(t.parentNode,t)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros())},i(l){r||(transition_in(a),transition_in(s),transition_in(n.$$.fragment,l),r=!0)},o(l){transition_out(a),transition_out(s),transition_out(n.$$.fragment,l),r=!1},d(l){l&&(detach(e),detach(t)),a&&a.d(l),s&&s.d(l),destroy_component(n,l)}}}function create_footer_slot$7(o){let e,t;return e=new FormValues({props:{$$slots:{default:[create_default_slot_1$j,({values:n})=>({14:n}),({values:n})=>n?16384:0]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&49152&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$z(o){let e,t;const n=[o[8]];let r={$$slots:{footer:[create_footer_slot$7],header:[create_header_slot$8],default:[create_default_slot_2$b]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&256?get_spread_update(n,[get_spread_object(a[8])]):{};s&32775&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$1m(o){let e,t;return e=new FormProvider({props:{initialValues:o[3],$$slots:{default:[create_default_slot$z]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&8&&(a.initialValues=n[3]),r&33031&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$1l(o,e,t){let n,r;const a=["editingData","savingTab"];let s=compute_rest_props(e,a);var l=this&&this.__awaiter||function(C,E,A,k){function T($){return $ instanceof A?$:new A(function(S){S($)})}return new(A||(A=Promise))(function($,S){function I(M){try{N(k.next(M))}catch(F){S(F)}}function R(M){try{N(k.throw(M))}catch(F){S(F)}}function N(M){M.done?$(M.value):T(M.value).then(I,R)}N((k=k.apply(C,E||[])).next())})};let{editingData:u}=e,{savingTab:d}=e;const f=getElectron(),m=["title","icon","showInToolbar","openOnStartup","urlPath"],h=hasPermission("files/favorites/write"),p=C=>l(void 0,void 0,void 0,function*(){const E={},A=!!r&&C.whatToSave!="content",k=new RegExp(`tabdata_(.*)_${d.tabid}`);for(const T of yield localforage.keys()){const $=T.match(k);$&&(A&&$[1]=="editor"||(E[$[1]]=yield localforage.getItem(T)))}for(const T in localStorage){const $=T.match(k);$&&(A&&$[1]=="editor"||(E[$[1]]=JSON.parse(localStorage.getItem(T))))}return console.log("tabdata",E,A,d.tabid),Object.assign({props:C.whatToSave=="content"&&d.props?_.omit(d.props,["savedFile","savedFormat","savedFolder"]):d.props,tabComponent:d.tabComponent,tabdata:E},_.pick(C,m))}),g=C=>l(void 0,void 0,void 0,function*(){const E=yield p(C);apiCall("files/save",{folder:"favorites",file:uuidv1(),format:"json",data:E})}),b=C=>l(void 0,void 0,void 0,function*(){const E=yield apiCall("files/load",{folder:"favorites",file:u.file,format:"json"});apiCall("files/save",{folder:"favorites",file:u.file,format:"json",data:Object.assign(Object.assign({},E),C)})}),v=C=>l(void 0,void 0,void 0,function*(){closeCurrentModal(),d&&g(C.detail),u&&b(C.detail)}),y=C=>l(void 0,void 0,void 0,function*(){const E=yield p(C.detail);copyTextToClipboard(`${document.location.origin}#tabdata=${encodeURIComponent(JSON.stringify(E))}`)});return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(8,s=compute_rest_props(e,a)),"editingData"in C&&t(0,u=C.editingData),"savingTab"in C&&t(1,d=C.savingTab)},o.$$.update=()=>{o.$$.dirty&3&&t(3,n=d?{title:d.title,icon:d.icon,urlPath:_.kebabCase(_.deburr(d.title))}:u?_.pick(u,m):{}),o.$$.dirty&2&&t(2,r=d&&d.props&&d.props.savedFile)},[u,d,r,n,f,h,v,y,s]}class FavoriteModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$1l,create_fragment$1m,safe_not_equal,{editingData:0,savingTab:1})}}const FavoriteModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:FavoriteModal},Symbol.toStringTag,{value:"Module"}));function create_fragment$1l(o){let e,t;const n=[o[2],{data:o[0]},{icon:o[0].icon||"img favorite"},{title:o[0].title},{menu:o[1]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new AppObjectCore({props:r}),e.$on("click",o[3]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&7?get_spread_update(n,[s&4&&get_spread_object(a[2]),s&1&&{data:a[0]},s&1&&{icon:a[0].icon||"img favorite"},s&1&&{title:a[0].title},s&2&&{menu:a[1]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}var __awaiter$3=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const extractKey$4=o=>o.file;function openFavorite(o){return __awaiter$3(this,void 0,void 0,function*(){const{icon:e,tabComponent:t,title:n,props:r,tabdata:a}=o;let s=a;if(r.savedFile){const l=yield apiCall("files/load",{folder:r.savedFolder,file:r.savedFile,format:r.savedFormat});s=Object.assign(Object.assign({},a),{editor:l})}openNewTab({title:n,icon:e||"img favorite",props:r,tabComponent:t},s)})}function instance$1k(o,e,t){const n=["data"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(g,b,v,y){function C(E){return E instanceof v?E:new v(function(A){A(E)})}return new(v||(v=Promise))(function(E,A){function k(S){try{$(y.next(S))}catch(I){A(I)}}function T(S){try{$(y.throw(S))}catch(I){A(I)}}function $(S){S.done?E(S.value):C(S.value).then(k,T)}$((y=y.apply(g,b||[])).next())})};let{data:s}=e;const l=getElectron(),u=()=>{showModal(FavoriteModal,{editingData:s})},d=()=>a(void 0,void 0,void 0,function*(){const g=yield apiCall("files/load",{folder:"favorites",file:s.file,format:"text"});openNewTab({icon:"icon favorite",title:s.title,tabComponent:"FavoriteEditorTab",props:{savedFile:s.file,savedFormat:"text",savedFolder:"favorites"}},{editor:JSON.stringify(JSON.parse(g),null,2)})}),f=()=>{copyTextToClipboard(`${document.location.origin}#favorite=${s.urlPath}`)},m=()=>{showModal(ConfirmModal,{message:`Really delete favorite ${s.title}?`,onConfirm:()=>{apiCall("files/delete",{file:s.file,folder:"favorites"})}})};function h(){return[{text:"Delete",onClick:m},{text:"Edit",onClick:u},{text:"Edit JSON definition",onClick:d},!l&&s.urlPath&&{text:"Copy link",onClick:f}]}const p=()=>openFavorite(s);return o.$$set=g=>{e=assign(assign({},e),exclude_internal_props(g)),t(2,r=compute_rest_props(e,n)),"data"in g&&t(0,s=g.data)},[s,h,r,p]}class FavoriteFileAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$1k,create_fragment$1l,safe_not_equal,{data:0})}}const favoriteFileAppObject=Object.freeze(Object.defineProperty({__proto__:null,default:FavoriteFileAppObject,extractKey:extractKey$4,openFavorite},Symbol.toStringTag,{value:"Module"}));function create_fragment$1k(o){let e,t,n={value:o[2].value||"",menu:createMenu$4(),mode:"json"};return e=new AceEditor({props:n}),o[16](e),e.$on("input",o[17]),e.$on("focus",o[18]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,[a]){const s={};a&4&&(s.value=r[2].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[16](null),destroy_component(e,r)}}}const getCurrentEditor$e=()=>getActiveComponent("FavoriteEditorTab");registerFileCommands({idPrefix:"favoriteJsonEditor",category:"Favorite JSON editor",getCurrentEditor:getCurrentEditor$e,folder:null,format:null,fileExtension:null,save:!1,findReplace:!0});registerCommand({id:"favoriteJsonEditor.save",group:"save",name:"Save",category:"Favorite JSON editor",testEnabled:()=>getCurrentEditor$e()!=null,onClick:()=>getCurrentEditor$e().save()});registerCommand({id:"favoriteJsonEditor.preview",name:"Preview",category:"Favorite JSON editor",keyText:"F5 | CtrlOrCommand+Enter",testEnabled:()=>getCurrentEditor$e()!=null,onClick:()=>getCurrentEditor$e().preview()});function createMenu$4(){return[{command:"favoriteJsonEditor.save"},{command:"favoriteJsonEditor.preview"},{divider:!0},{command:"favoriteJsonEditor.find"},{command:"favoriteJsonEditor.replace"}]}function instance$1j(o,e,t){let n,r;var a;let{tabid:s}=e,{savedFile:l}=e;const u=getContext("tabVisible");component_subscribe(o,u,$=>t(15,r=$));const d=createActivator("FavoriteEditorTab",!1);let f;function m(){return n.value||""}function h(){f.getEditor().execCommand("find")}function p(){f.getEditor().execCommand("replace")}function g(){return s}function b(){try{const $=JSON.parse(m());openFavorite($)}catch($){showModal(ErrorMessageModal,{message:$.message,title:"Error parsing JSON"})}}const{editorState:v,editorValue:y,setEditorData:C}=useEditorData({tabid:s});component_subscribe(o,v,$=>t(2,n=$));function E(){try{const $=JSON.parse(m());apiCall("files/save",{file:l,folder:"favorites",format:"json",data:$})}catch($){showModal(ErrorMessageModal,{message:$.message,title:"Error parsing JSON"})}}function A($){binding_callbacks[$?"unshift":"push"](()=>{f=$,t(1,f)})}const k=$=>C($.detail),T=()=>{d.activate(),invalidateCommands()};return o.$$set=$=>{"tabid"in $&&t(6,s=$.tabid),"savedFile"in $&&t(7,l=$.savedFile)},o.$$.update=()=>{o.$$.dirty&49154&&r&&f&&(t(14,a=f==null?void 0:f.getEditor())===null||a===void 0||a.focus())},[d,f,n,u,v,C,s,l,m,h,p,g,b,E,a,r,A,k,T]}class FavoriteEditorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$1j,create_fragment$1k,safe_not_equal,{tabid:6,savedFile:7,activator:0,getData:8,find:9,replace:10,getTabId:11,preview:12,save:13})}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[8]}get find(){return this.$$.ctx[9]}get replace(){return this.$$.ctx[10]}get getTabId(){return this.$$.ctx[11]}get preview(){return this.$$.ctx[12]}get save(){return this.$$.ctx[13]}}const FavoriteEditorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:FavoriteEditorTab},Symbol.toStringTag,{value:"Module"}));function moveDrag(o,e){if(!e)return;const[t,n,r]=e;let a=null,s=null,l=null,u=null;const d=h=>{if(h.button!=0)return;const p=window.getComputedStyle(o).zoom,g=o.getBoundingClientRect();l=g.left*p,u=g.top*p,a=h.clientX,s=h.clientY,document.addEventListener("mousemove",f,!0),document.addEventListener("mouseup",m,!0),t(h.clientX-l,h.clientY-u)},f=h=>{window.getComputedStyle(o).zoom,h.preventDefault();const p=h.clientX-a;a=h.clientX;const g=h.clientY-s;s=h.clientY,n(p,g,h.clientX-l,h.clientY-u)},m=h=>{window.getComputedStyle(o).zoom,h.preventDefault(),a=null,s=null,document.removeEventListener("mousemove",f,!0),document.removeEventListener("mouseup",m,!0),r(h.clientX-l,h.clientY-u)};return o.addEventListener("mousedown",d),{destroy(){o.removeEventListener("mousedown",d),(a!=null||s!=null)&&(document.removeEventListener("mousemove",f,!0),document.removeEventListener("mouseup",m,!0))}}}function create_if_block_2$g(o){let e,t,n,r;t=new FontIcon({props:{icon:"img sort-asc"}});let a=o[1]>=0&&create_if_block_3$c(o);return{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","icon")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){s[1]>=0?a?a.p(s,l):(a=create_if_block_3$c(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){r||(transition_in(t.$$.fragment,s),r=!0)},o(s){transition_out(t.$$.fragment,s),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_if_block_3$c(o){let e,t=o[1]+1+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","color-icon-green order-index")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t=r[1]+1+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_if_block$G(o){let e,t,n,r;t=new FontIcon({props:{icon:"img sort-desc"}});let a=o[1]>=0&&create_if_block_1$s(o);return{c(){e=element("span"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","icon")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){s[1]>=0?a?a.p(s,l):(a=create_if_block_1$s(s),a.c(),a.m(e,null)):a&&(a.d(1),a=null)},i(s){r||(transition_in(t.$$.fragment,s),r=!0)},o(s){transition_out(t.$$.fragment,s),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_if_block_1$s(o){let e,t=o[1]+1+"",n;return{c(){e=element("span"),n=text(t),attr(e,"class","color-icon-green order-index")},m(r,a){insert(r,e,a),append(e,n)},p(r,a){a&2&&t!==(t=r[1]+1+"")&&set_data(n,t)},d(r){r&&detach(e)}}}function create_fragment$1j(o){let e,t,n,r=o[0]=="ASC"&&create_if_block_2$g(o),a=o[0]=="DESC"&&create_if_block$G(o);return{c(){r&&r.c(),e=space(),a&&a.c(),t=empty()},m(s,l){r&&r.m(s,l),insert(s,e,l),a&&a.m(s,l),insert(s,t,l),n=!0},p(s,[l]){s[0]=="ASC"?r?(r.p(s,l),l&1&&transition_in(r,1)):(r=create_if_block_2$g(s),r.c(),transition_in(r,1),r.m(e.parentNode,e)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros()),s[0]=="DESC"?a?(a.p(s,l),l&1&&transition_in(a,1)):(a=create_if_block$G(s),a.c(),transition_in(a,1),a.m(t.parentNode,t)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){n||(transition_in(r),transition_in(a),n=!0)},o(s){transition_out(r),transition_out(a),n=!1},d(s){s&&(detach(e),detach(t)),r&&r.d(s),a&&a.d(s)}}}function instance$1i(o,e,t){let{order:n}=e,{orderIndex:r}=e;return o.$$set=a=>{"order"in a&&t(0,n=a.order),"orderIndex"in a&&t(1,r=a.orderIndex)},[n,r]}class SortOrderIcon extends SvelteComponent{constructor(e){super(),init(this,e,instance$1i,create_fragment$1j,safe_not_equal,{order:0,orderIndex:1})}}const ColumnLine_svelte_svelte_type_style_lang="";function create_if_block_11$1(o){let e,t,n,r;return t=new FontIcon({props:{icon:o[11]?plusExpandIcon(o[12]):"icon invisible-box"}}),t.$on("click",o[24]),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","expandColumnIcon"),attr(e,"style",n=`margin-right: ${5+o[13]*10}px`)},m(a,s){insert(a,e,s),mount_component(t,e,null),r=!0},p(a,s){const l={};s[0]&6144&&(l.icon=a[11]?plusExpandIcon(a[12]):"icon invisible-box"),t.$set(l),(!r||s[0]&8192&&n!==(n=`margin-right: ${5+a[13]*10}px`))&&attr(e,"style",n)},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_10$1(o){var n,r;let e,t;return e=new CheckboxField({props:{checked:(n=o[9])!=null&&n.isColumnChecked?(r=o[9])==null?void 0:r.isColumnChecked(o[3],o[1]):!!(o[2].columns||[]).find(o[25])}}),e.$on("change",o[26]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s[0]&526&&(l.checked=(u=a[9])!=null&&u.isColumnChecked?(d=a[9])==null?void 0:d.isColumnChecked(a[3],a[1]):!!(a[2].columns||[]).find(a[25])),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_9$1(o){let e,t;return e=new FontIcon({props:{icon:"img filter"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_8$1(o){let e,t;return e=new FontIcon({props:{icon:"img sort-asc"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_7$1(o){let e,t;return e=new FontIcon({props:{icon:"img sort-desc"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$4(o){let e,t;return e=new FontIcon({props:{icon:"img group"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$6(o){let e,t;const n=[o[16]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new SortOrderIcon({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&65536?get_spread_update(n,[get_spread_object(a[16])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_4$b(o){let e,t;return e=new FontIcon({props:{icon:"img filter"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$r(o){var l,u,d,f,m;let e,t,n,r,a=((u=(l=o[2])==null?void 0:l.style)==null?void 0:u.showDataType)&&((d=o[1])==null?void 0:d.dataType)&&create_if_block_3$b(o),s=((m=(f=o[2])==null?void 0:f.style)==null?void 0:m.showNullability)&&create_if_block_2$f(o);return{c(){e=element("div"),t=space(),a&&a.c(),n=space(),s&&s.c(),r=empty(),attr(e,"class","space svelte-1s00ucb")},m(h,p){insert(h,e,p),insert(h,t,p),a&&a.m(h,p),insert(h,n,p),s&&s.m(h,p),insert(h,r,p)},p(h,p){var g,b,v,y,C;(b=(g=h[2])==null?void 0:g.style)!=null&&b.showDataType&&((v=h[1])!=null&&v.dataType)?a?a.p(h,p):(a=create_if_block_3$b(h),a.c(),a.m(n.parentNode,n)):a&&(a.d(1),a=null),(C=(y=h[2])==null?void 0:y.style)!=null&&C.showNullability?s?s.p(h,p):(s=create_if_block_2$f(h),s.c(),s.m(r.parentNode,r)):s&&(s.d(1),s=null)},d(h){h&&(detach(e),detach(t),detach(n),detach(r)),a&&a.d(h),s&&s.d(h)}}}function create_if_block_3$b(o){var r;let e,t=((r=o[1])==null?void 0:r.dataType.toLowerCase())+"",n;return{c(){e=element("div"),n=text(t),attr(e,"class","ml-2")},m(a,s){insert(a,e,s),append(e,n)},p(a,s){var l;s[0]&2&&t!==(t=((l=a[1])==null?void 0:l.dataType.toLowerCase())+"")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_if_block_2$f(o){var r;let e,t=(r=o[1])!=null&&r.notNull?"NOT NULL":"NULL",n;return{c(){e=element("div"),n=text(t),attr(e,"class","ml-2")},m(a,s){insert(a,e,s),append(e,n)},p(a,s){var l;s[0]&2&&t!==(t=(l=a[1])!=null&&l.notNull?"NOT NULL":"NULL")&&set_data(n,t)},d(a){a&&detach(e)}}}function create_if_block$F(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon arrow-right"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","icon-button svelte-1s00ucb")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"mousedown",o[27]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_fragment$1i(o){var B,K,U,G,W,q,H,z,Y,V,J,Q,X,ie,ce,de;let e,t,n,r,a,s,l,u,d,f,m=((B=o[9])==null?void 0:B.isColumnFiltered)&&((K=o[9])==null?void 0:K.isColumnFiltered(o[3],o[1].columnName)),h,p,g=o[17]&&((U=o[9])==null?void 0:U.addDesignerForeignKey)&&((G=o[9])==null?void 0:G.canAddDesignerForeignKey)&&((W=o[9])==null?void 0:W.canAddDesignerForeignKey(o[3],o[1].columnName)),b,v,y,C,E,A=o[10]&&create_if_block_11$1(o),k=((q=o[9])==null?void 0:q.allowColumnOperations)&&create_if_block_10$1(o);const T=[o[1],{columnName:(H=o[9])!=null&&H.getColumnDisplayName?(z=o[9])==null?void 0:z.getColumnDisplayName(o[1]):o[1].columnName},{foreignKey:o[17]},{forceIcon:!0},{iconOverride:o[15]}];let $={};for(let se=0;se<T.length;se+=1)$=assign($,T[se]);r=new ColumnLabel({props:$});let S=((Y=o[18])==null?void 0:Y.filter)&&create_if_block_9$1(),I=((V=o[18])==null?void 0:V.sortOrder)>0&&create_if_block_8$1(),R=((J=o[18])==null?void 0:J.sortOrder)<0&&create_if_block_7$1(),N=((Q=o[18])==null?void 0:Q.isGrouped)&&create_if_block_6$4(),M=o[16]&&create_if_block_5$6(o),F=m&&create_if_block_4$b(),D=(((ie=(X=o[2])==null?void 0:X.style)==null?void 0:ie.showNullability)||((de=(ce=o[2])==null?void 0:ce.style)==null?void 0:de.showDataType))&&create_if_block_1$r(o),x=g&&create_if_block$F(o);return{c(){var se,me;e=element("div"),A&&A.c(),t=space(),k&&k.c(),n=space(),create_component(r.$$.fragment),a=space(),S&&S.c(),s=space(),I&&I.c(),l=space(),R&&R.c(),u=space(),N&&N.c(),d=space(),M&&M.c(),f=space(),F&&F.c(),h=space(),D&&D.c(),p=space(),x&&x.c(),attr(e,"class","line svelte-1s00ucb"),attr(e,"draggable",b=!!((se=o[9])!=null&&se.allowCreateRefByDrag)),toggle_class(e,"canSelectColumns",(me=o[9])==null?void 0:me.canSelectColumns),toggle_class(e,"isDragSource",o[19]&&o[19].designerId==o[3]&&o[19].columnName==o[1].columnName),toggle_class(e,"isDragTarget",o[20]&&o[20].designerId==o[3]&&o[20].columnName==o[1].columnName)},m(se,me){var ue;insert(se,e,me),A&&A.m(e,null),append(e,t),k&&k.m(e,null),append(e,n),mount_component(r,e,null),append(e,a),S&&S.m(e,null),append(e,s),I&&I.m(e,null),append(e,l),R&&R.m(e,null),append(e,u),N&&N.m(e,null),append(e,d),M&&M.m(e,null),append(e,f),F&&F.m(e,null),append(e,h),D&&D.m(e,null),append(e,p),x&&x.m(e,null),o[28](e),y=!0,C||(E=[listen(e,"dragstart",o[29]),listen(e,"dragend",o[30]),listen(e,"dragover",o[31]),listen(e,"drop",o[32]),listen(e,"mousedown",o[33]),action_destroyer(v=contextMenu.call(null,e,(ue=o[9])!=null&&ue.canSelectColumns?o[21]:"__no_menu"))],C=!0)},p(se,me){var he,pe,Oe,qe,et,Ue,fe,Ie,We,$e,Le,ze,re,ge,Be,Ze,Pe,Ee,Ce;se[10]?A?(A.p(se,me),me[0]&1024&&transition_in(A,1)):(A=create_if_block_11$1(se),A.c(),transition_in(A,1),A.m(e,t)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),(he=se[9])!=null&&he.allowColumnOperations?k?(k.p(se,me),me[0]&512&&transition_in(k,1)):(k=create_if_block_10$1(se),k.c(),transition_in(k,1),k.m(e,n)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros());const ue=me[0]&164354?get_spread_update(T,[me[0]&2&&get_spread_object(se[1]),me[0]&514&&{columnName:(pe=se[9])!=null&&pe.getColumnDisplayName?(Oe=se[9])==null?void 0:Oe.getColumnDisplayName(se[1]):se[1].columnName},me[0]&131072&&{foreignKey:se[17]},T[3],me[0]&32768&&{iconOverride:se[15]}]):{};r.$set(ue),(qe=se[18])!=null&&qe.filter?S?me[0]&262144&&transition_in(S,1):(S=create_if_block_9$1(),S.c(),transition_in(S,1),S.m(e,s)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros()),((et=se[18])==null?void 0:et.sortOrder)>0?I?me[0]&262144&&transition_in(I,1):(I=create_if_block_8$1(),I.c(),transition_in(I,1),I.m(e,l)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros()),((Ue=se[18])==null?void 0:Ue.sortOrder)<0?R?me[0]&262144&&transition_in(R,1):(R=create_if_block_7$1(),R.c(),transition_in(R,1),R.m(e,u)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros()),(fe=se[18])!=null&&fe.isGrouped?N?me[0]&262144&&transition_in(N,1):(N=create_if_block_6$4(),N.c(),transition_in(N,1),N.m(e,d)):N&&(group_outros(),transition_out(N,1,1,()=>{N=null}),check_outros()),se[16]?M?(M.p(se,me),me[0]&65536&&transition_in(M,1)):(M=create_if_block_5$6(se),M.c(),transition_in(M,1),M.m(e,f)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),me[0]&522&&(m=((Ie=se[9])==null?void 0:Ie.isColumnFiltered)&&((We=se[9])==null?void 0:We.isColumnFiltered(se[3],se[1].columnName))),m?F?me[0]&522&&transition_in(F,1):(F=create_if_block_4$b(),F.c(),transition_in(F,1),F.m(e,h)):F&&(group_outros(),transition_out(F,1,1,()=>{F=null}),check_outros()),(Le=($e=se[2])==null?void 0:$e.style)!=null&&Le.showNullability||(re=(ze=se[2])==null?void 0:ze.style)!=null&&re.showDataType?D?D.p(se,me):(D=create_if_block_1$r(se),D.c(),D.m(e,p)):D&&(D.d(1),D=null),me[0]&131594&&(g=se[17]&&((ge=se[9])==null?void 0:ge.addDesignerForeignKey)&&((Be=se[9])==null?void 0:Be.canAddDesignerForeignKey)&&((Ze=se[9])==null?void 0:Ze.canAddDesignerForeignKey(se[3],se[1].columnName))),g?x?(x.p(se,me),me[0]&131594&&transition_in(x,1)):(x=create_if_block$F(se),x.c(),transition_in(x,1),x.m(e,null)):x&&(group_outros(),transition_out(x,1,1,()=>{x=null}),check_outros()),(!y||me[0]&512&&b!==(b=!!((Pe=se[9])!=null&&Pe.allowCreateRefByDrag)))&&attr(e,"draggable",b),v&&is_function(v.update)&&me[0]&512&&v.update.call(null,(Ee=se[9])!=null&&Ee.canSelectColumns?se[21]:"__no_menu"),(!y||me[0]&512)&&toggle_class(e,"canSelectColumns",(Ce=se[9])==null?void 0:Ce.canSelectColumns),(!y||me[0]&524298)&&toggle_class(e,"isDragSource",se[19]&&se[19].designerId==se[3]&&se[19].columnName==se[1].columnName),(!y||me[0]&1048586)&&toggle_class(e,"isDragTarget",se[20]&&se[20].designerId==se[3]&&se[20].columnName==se[1].columnName)},i(se){y||(transition_in(A),transition_in(k),transition_in(r.$$.fragment,se),transition_in(S),transition_in(I),transition_in(R),transition_in(N),transition_in(M),transition_in(F),transition_in(x),y=!0)},o(se){transition_out(A),transition_out(k),transition_out(r.$$.fragment,se),transition_out(S),transition_out(I),transition_out(R),transition_out(N),transition_out(M),transition_out(F),transition_out(x),y=!1},d(se){se&&detach(e),A&&A.d(),k&&k.d(),destroy_component(r),S&&S.d(),I&&I.d(),R&&R.d(),N&&N.d(),M&&M.d(),F&&F.d(),D&&D.d(),x&&x.d(),o[28](null),C=!1,run_all(E)}}}function instance$1h(o,e,t){let n,r,a,s,l,u=noop$1,d=()=>(u(),u=subscribe(E,V=>t(19,l=V)),E),f,m=noop$1,h=()=>(m(),m=subscribe(A,V=>t(20,f=V)),A);o.$$.on_destroy.push(()=>u()),o.$$.on_destroy.push(()=>m());let{column:p}=e,{table:g}=e,{designer:b}=e,{designerId:v}=e,{onChangeColumn:y}=e,{domLine:C}=e,{sourceDragColumn$:E}=e;d();let{targetDragColumn$:A}=e;h();let{onCreateReference:k}=e,{onAddReferenceByColumn:T}=e,{onSelectColumn:$}=e,{settings:S}=e,{nestingSupported:I=null}=e,{isExpandable:R=!1}=e,{isExpanded:N=!1}=e,{expandLevel:M=0}=e,{toggleExpanded:F=null}=e;function D(){if(S!=null&&S.columnMenu)return S==null?void 0:S.columnMenu({designer:b,designerId:v,column:p,foreignKey:r});const V=Q=>{y(Object.assign(Object.assign({},p),{designerId:v}),X=>Object.assign(Object.assign({},X),{sortOrder:Q}))},J=()=>{T(v,r)};return[(S==null?void 0:S.allowColumnOperations)&&[{text:"Sort ascending",onClick:()=>V(1)},{text:"Sort descending",onClick:()=>V(-1)},{text:"Unsort",onClick:()=>V(0)}],r&&{text:"Add reference",onClick:J}]}const x=()=>{F(!N)},B=V=>V.designerId==v&&V.columnName==p.columnName&&V.isOutput,K=V=>{S!=null&&S.setColumnChecked?S==null||S.setColumnChecked(v,p,V.target.checked):V.target.checked?y({...p,designerId:v},J=>({...J,isOutput:!0})):y({...p,designerId:v},J=>({...J,isOutput:!1}))},U=()=>S==null?void 0:S.addDesignerForeignKey(v,p.columnName);function G(V){binding_callbacks[V?"unshift":"push"](()=>{C=V,t(0,C)})}const W=V=>{if(!(S!=null&&S.allowCreateRefByDrag))return;const J={...p,designerId:v};E.set(J),V.dataTransfer.setData("designer_column_drag_data",JSON.stringify(J))},q=V=>{E.set(null),A.set(null)},H=V=>{l&&(V.preventDefault(),A.set({...p,designerId:v}))},z=V=>{var J=V.dataTransfer.getData("designer_column_drag_data");V.preventDefault(),J&&(k(l,f),E.set(null),A.set(null))},Y=V=>$({...p,designerId:v});return o.$$set=V=>{"column"in V&&t(1,p=V.column),"table"in V&&t(22,g=V.table),"designer"in V&&t(2,b=V.designer),"designerId"in V&&t(3,v=V.designerId),"onChangeColumn"in V&&t(4,y=V.onChangeColumn),"domLine"in V&&t(0,C=V.domLine),"sourceDragColumn$"in V&&d(t(5,E=V.sourceDragColumn$)),"targetDragColumn$"in V&&h(t(6,A=V.targetDragColumn$)),"onCreateReference"in V&&t(7,k=V.onCreateReference),"onAddReferenceByColumn"in V&&t(23,T=V.onAddReferenceByColumn),"onSelectColumn"in V&&t(8,$=V.onSelectColumn),"settings"in V&&t(9,S=V.settings),"nestingSupported"in V&&t(10,I=V.nestingSupported),"isExpandable"in V&&t(11,R=V.isExpandable),"isExpanded"in V&&t(12,N=V.isExpanded),"expandLevel"in V&&t(13,M=V.expandLevel),"toggleExpanded"in V&&t(14,F=V.toggleExpanded)},o.$$.update=()=>{o.$$.dirty[0]&14&&t(18,n=(b.columns||[]).find(V=>V.designerId==v&&V.columnName==p.columnName)),o.$$.dirty[0]&4194306&&t(17,r=lib.findForeignKeyForColumn(g,p)),o.$$.dirty[0]&522&&t(16,a=S!=null&&S.getSortOrderProps?S==null?void 0:S.getSortOrderProps(v,p.columnName):null),o.$$.dirty[0]&522&&t(15,s=S!=null&&S.getColumnIconOverride?S==null?void 0:S.getColumnIconOverride(v,p.columnName):null)},[C,p,b,v,y,E,A,k,$,S,I,R,N,M,F,s,a,r,n,l,f,D,g,T,x,B,K,U,G,W,q,H,z,Y]}class ColumnLine extends SvelteComponent{constructor(e){super(),init(this,e,instance$1h,create_fragment$1i,safe_not_equal,{column:1,table:22,designer:2,designerId:3,onChangeColumn:4,domLine:0,sourceDragColumn$:5,targetDragColumn$:6,onCreateReference:7,onAddReferenceByColumn:23,onSelectColumn:8,settings:9,nestingSupported:10,isExpandable:11,isExpanded:12,expandLevel:13,toggleExpanded:14},null,[-1,-1])}}class DomTableRef{constructor(e,t,n,r){this.domTable=t[""],this.domWrapper=n,this.table=e,this.designerId=e.designerId,this.domRefs=t,this.settings=r}getRect(){if(!this.domWrapper||!this.domTable)return null;const e=this.domWrapper.getBoundingClientRect(),t=this.domTable.getBoundingClientRect();return{left:t.left-e.left,top:t.top-e.top,right:t.right-e.left,bottom:t.bottom-e.top}}getColumnY(e){var l,u,d;let t=this.domRefs[e];for(;t==null&&((l=this.settings)!=null&&l.getParentColumnName)&&((u=this.settings)!=null&&u.getParentColumnName(e));)e=(d=this.settings)==null?void 0:d.getParentColumnName(e),t=this.domRefs[e];const n=this.getRect();if(!t)return n.top+12;const r=t.getBoundingClientRect(),a=this.domWrapper.getBoundingClientRect();let s=(r.top+r.bottom)/2-a.top;return s<n.top&&(s=n.top),s>n.bottom&&(s=n.bottom),s}}const DesignerTable_svelte_svelte_type_style_lang="";function get_each_context$f(o,e,t){const n=o.slice();return n[66]=e[t],n[67]=e,n[68]=t,n}function create_if_block_6$3(o){var n,r;let e,t;return e=new CheckboxField({props:{checked:(n=o[12])!=null&&n.isTableChecked?(r=o[12])==null?void 0:r.isTableChecked(o[13]):!1}}),e.$on("change",o[52]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s[0]&12288&&(l.checked=(u=a[12])!=null&&u.isTableChecked?(d=a[12])==null?void 0:d.isTableChecked(a[13]):!1),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_5$5(o){let e,t;return e=new FontIcon({props:{icon:o[25]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&33554432&&(a.icon=n[25]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$a(o){let e,t;return e=new FontIcon({props:{icon:"icon database",title:o[24].database}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16777216&&(a.title=n[24].database),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$a(o){let e,t;return e=new FontIcon({props:{icon:"icon parent-filter",title:"Filter parent rows"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$e(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:"icon close"}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","close svelte-w5ultk")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",o[53]),r=!0)},p:noop$1,i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block_1$q(o){var n;let e,t;return e=new DataFilterControl({props:{filterType:"string",filter:(n=o[12])==null?void 0:n.getMutliColumnFilter(o[13]),setFilter:o[55],placeholder:"Data filter"}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a[0]&12288&&(s.filter=(l=r[12])==null?void 0:l.getMutliColumnFilter(r[13])),a[0]&12288&&(s.setFilter=r[55]),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_each_block$f(o,e){var d,f,m,h,p,g,b;let t,n,r,a;function s(...v){return e[57](e[66],...v)}function l(v){e[58](v,e[66])}let u={nestingSupported:!!((d=e[12])!=null&&d.isColumnExpandable)&&e[14].find(e[56]),isExpandable:((f=e[12])==null?void 0:f.isColumnExpandable)&&((m=e[12])==null?void 0:m.isColumnExpandable(e[66])),isExpanded:((h=e[12])==null?void 0:h.isColumnExpanded)&&((p=e[12])==null?void 0:p.isColumnExpanded(e[66])),expandLevel:(g=e[12])!=null&&g.columnExpandLevel?(b=e[12])==null?void 0:b.columnExpandLevel(e[66]):0,toggleExpanded:s,column:e[66],table:e[0],designer:e[10],designerId:e[13],onChangeColumn:e[7],onSelectColumn:e[6],sourceDragColumn$:e[8],targetDragColumn$:e[9],onCreateReference:e[4],onAddReferenceByColumn:e[5],settings:e[12]};return e[17][e[66].columnName]!==void 0&&(u.domLine=e[17][e[66].columnName]),n=new ColumnLine({props:u}),binding_callbacks.push(()=>bind(n,"domLine",l)),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(v,y){insert(v,t,y),mount_component(n,v,y),a=!0},p(v,y){var E,A,k,T,$,S,I;e=v;const C={};y[0]&20480&&(C.nestingSupported=!!((E=e[12])!=null&&E.isColumnExpandable)&&e[14].find(e[56])),y[0]&2101248&&(C.isExpandable=((A=e[12])==null?void 0:A.isColumnExpandable)&&((k=e[12])==null?void 0:k.isColumnExpandable(e[66]))),y[0]&2101248&&(C.isExpanded=((T=e[12])==null?void 0:T.isColumnExpanded)&&(($=e[12])==null?void 0:$.isColumnExpanded(e[66]))),y[0]&2101248&&(C.expandLevel=(S=e[12])!=null&&S.columnExpandLevel?(I=e[12])==null?void 0:I.columnExpandLevel(e[66]):0),y[0]&2101248&&(C.toggleExpanded=s),y[0]&2097152&&(C.column=e[66]),y[0]&1&&(C.table=e[0]),y[0]&1024&&(C.designer=e[10]),y[0]&8192&&(C.designerId=e[13]),y[0]&128&&(C.onChangeColumn=e[7]),y[0]&64&&(C.onSelectColumn=e[6]),y[0]&256&&(C.sourceDragColumn$=e[8]),y[0]&512&&(C.targetDragColumn$=e[9]),y[0]&16&&(C.onCreateReference=e[4]),y[0]&32&&(C.onAddReferenceByColumn=e[5]),y[0]&4096&&(C.settings=e[12]),!r&&y[0]&2228224&&(r=!0,C.domLine=e[17][e[66].columnName],add_flush_callback(()=>r=!1)),n.$set(C)},i(v){a||(transition_in(n.$$.fragment,v),a=!0)},o(v){transition_out(n.$$.fragment,v),a=!1},d(v){v&&detach(t),destroy_component(n,v)}}}function create_if_block$E(o){let e,t,n,r,a,s,l;return{c(){e=element("div"),t=space(),n=element("div"),r=space(),a=element("div"),s=space(),l=element("div"),attr(e,"class","selection-marker lt svelte-w5ultk"),attr(n,"class","selection-marker rt svelte-w5ultk"),attr(a,"class","selection-marker lb svelte-w5ultk"),attr(l,"class","selection-marker rb svelte-w5ultk")},m(u,d){insert(u,e,d),insert(u,t,d),insert(u,n,d),insert(u,r,d),insert(u,a,d),insert(u,s,d),insert(u,l,d)},d(u){u&&(detach(e),detach(t),detach(n),detach(r),detach(a),detach(s),detach(l))}}}function create_fragment$1h(o){var G,W,q,H,z;let e,t,n,r,a,s=(o[18]||o[27])+"",l,u,d,f,m,h,p,g,b,v,y=[],C=new Map,E,A,k,T,$,S,I,R=((G=o[12])==null?void 0:G.canCheckTables)&&create_if_block_6$3(o),N=o[25]&&create_if_block_5$5(o),M=o[24]&&create_if_block_4$a(o),F=o[23]&&create_if_block_3$a(),D=((W=o[12])==null?void 0:W.showTableCloseButton)&&create_if_block_2$e(o),x=((q=o[12])==null?void 0:q.getMutliColumnFilter)&&((H=o[12])==null?void 0:H.setMutliColumnFilter)&&create_if_block_1$q(o),B=ensure_array_like(o[21]||[]);const K=Y=>Y[66].columnName;for(let Y=0;Y<B.length;Y+=1){let V=get_each_context$f(o,B,Y),J=K(V);C.set(J,y[Y]=create_each_block$f(J,V))}let U=((z=o[0])==null?void 0:z.isSelectedTable)&&create_if_block$E();return{c(){var Y,V,J;e=element("div"),t=element("div"),n=element("div"),R&&R.c(),r=space(),N&&N.c(),a=space(),l=text(s),u=space(),M&&M.c(),d=space(),F&&F.c(),f=space(),D&&D.c(),g=space(),x&&x.c(),b=space(),v=element("div");for(let Q=0;Q<y.length;Q+=1)y[Q].c();E=space(),U&&U.c(),attr(t,"class","header svelte-w5ultk"),attr(t,"style",m=o[32](o[28],o[0])),toggle_class(t,"isGrayed",o[22]),toggle_class(t,"isTable",o[26]=="tables"),toggle_class(t,"isView",o[26]=="views"),toggle_class(t,"isCollection",o[26]=="collections"),attr(v,"class","columns svelte-w5ultk"),toggle_class(v,"scroll",(Y=o[12])==null?void 0:Y.allowScrollColumns),attr(e,"class","wrapper svelte-w5ultk"),attr(e,"style",A=`left: ${o[15]?o[15].left:o[20]}px; top:${o[15]?o[15].top:o[19]}px`),toggle_class(e,"canSelectColumns",(V=o[12])==null?void 0:V.canSelectColumns),toggle_class(e,"isSelectedTable",(J=o[0])==null?void 0:J.isSelectedTable)},m(Y,V){var J,Q,X,ie;insert(Y,e,V),append(e,t),append(t,n),R&&R.m(n,null),append(n,r),N&&N.m(n,null),append(n,a),append(n,l),append(n,u),M&&M.m(n,null),append(n,d),F&&F.m(n,null),append(t,f),D&&D.m(t,null),append(e,g),x&&x.m(e,null),append(e,b),append(e,v);for(let ce=0;ce<y.length;ce+=1)y[ce]&&y[ce].m(v,null);append(e,E),U&&U.m(e,null),o[60](e),$=!0,S||(I=[action_destroyer(h=moveDrag.call(null,t,(J=o[12])!=null&&J.canSelectColumns?[o[29],o[30],o[31]]:null)),action_destroyer(p=contextMenu.call(null,t,(Q=o[12])!=null&&Q.canSelectColumns?o[33]:"__no_menu")),listen(t,"click",function(){var ce,de;is_function((ce=o[12])!=null&&ce.onClickTableHeader?o[54]:null)&&((de=o[12])!=null&&de.onClickTableHeader?o[54]:null).apply(this,arguments)}),listen(v,"scroll",o[59]),listen(e,"mousedown",o[61]),action_destroyer(k=contextMenu.call(null,e,(X=o[12])!=null&&X.canSelectColumns?"__no_menu":o[33])),action_destroyer(T=moveDrag.call(null,e,(ie=o[12])!=null&&ie.canSelectColumns?null:[o[29],o[30],o[31]]))],S=!0)},p(Y,V){var J,Q,X,ie,ce,de,se,me,ue,he,pe,Oe;o=Y,(J=o[12])!=null&&J.canCheckTables?R?(R.p(o,V),V[0]&4096&&transition_in(R,1)):(R=create_if_block_6$3(o),R.c(),transition_in(R,1),R.m(n,r)):R&&(group_outros(),transition_out(R,1,1,()=>{R=null}),check_outros()),o[25]?N?(N.p(o,V),V[0]&33554432&&transition_in(N,1)):(N=create_if_block_5$5(o),N.c(),transition_in(N,1),N.m(n,a)):N&&(group_outros(),transition_out(N,1,1,()=>{N=null}),check_outros()),(!$||V[0]&134479872)&&s!==(s=(o[18]||o[27])+"")&&set_data(l,s),o[24]?M?(M.p(o,V),V[0]&16777216&&transition_in(M,1)):(M=create_if_block_4$a(o),M.c(),transition_in(M,1),M.m(n,d)):M&&(group_outros(),transition_out(M,1,1,()=>{M=null}),check_outros()),o[23]?F?V[0]&8388608&&transition_in(F,1):(F=create_if_block_3$a(),F.c(),transition_in(F,1),F.m(n,null)):F&&(group_outros(),transition_out(F,1,1,()=>{F=null}),check_outros()),(Q=o[12])!=null&&Q.showTableCloseButton?D?(D.p(o,V),V[0]&4096&&transition_in(D,1)):(D=create_if_block_2$e(o),D.c(),transition_in(D,1),D.m(t,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),(!$||V[0]&268435457&&m!==(m=o[32](o[28],o[0])))&&attr(t,"style",m),h&&is_function(h.update)&&V[0]&4096&&h.update.call(null,(X=o[12])!=null&&X.canSelectColumns?[o[29],o[30],o[31]]:null),p&&is_function(p.update)&&V[0]&4096&&p.update.call(null,(ie=o[12])!=null&&ie.canSelectColumns?o[33]:"__no_menu"),(!$||V[0]&4194304)&&toggle_class(t,"isGrayed",o[22]),(!$||V[0]&67108864)&&toggle_class(t,"isTable",o[26]=="tables"),(!$||V[0]&67108864)&&toggle_class(t,"isView",o[26]=="views"),(!$||V[0]&67108864)&&toggle_class(t,"isCollection",o[26]=="collections"),(ce=o[12])!=null&&ce.getMutliColumnFilter&&((de=o[12])!=null&&de.setMutliColumnFilter)?x?(x.p(o,V),V[0]&4096&&transition_in(x,1)):(x=create_if_block_1$q(o),x.c(),transition_in(x,1),x.m(e,b)):x&&(group_outros(),transition_out(x,1,1,()=>{x=null}),check_outros()),V[0]&2258929&&(B=ensure_array_like(o[21]||[]),group_outros(),y=update_keyed_each(y,V,K,1,o,B,C,v,outro_and_destroy_block,create_each_block$f,null,get_each_context$f),check_outros()),(!$||V[0]&4096)&&toggle_class(v,"scroll",(se=o[12])==null?void 0:se.allowScrollColumns),(me=o[0])!=null&&me.isSelectedTable?U||(U=create_if_block$E(),U.c(),U.m(e,null)):U&&(U.d(1),U=null),(!$||V[0]&1605632&&A!==(A=`left: ${o[15]?o[15].left:o[20]}px; top:${o[15]?o[15].top:o[19]}px`))&&attr(e,"style",A),k&&is_function(k.update)&&V[0]&4096&&k.update.call(null,(ue=o[12])!=null&&ue.canSelectColumns?"__no_menu":o[33]),T&&is_function(T.update)&&V[0]&4096&&T.update.call(null,(he=o[12])!=null&&he.canSelectColumns?null:[o[29],o[30],o[31]]),(!$||V[0]&4096)&&toggle_class(e,"canSelectColumns",(pe=o[12])==null?void 0:pe.canSelectColumns),(!$||V[0]&1)&&toggle_class(e,"isSelectedTable",(Oe=o[0])==null?void 0:Oe.isSelectedTable)},i(Y){if(!$){transition_in(R),transition_in(N),transition_in(M),transition_in(F),transition_in(D),transition_in(x);for(let V=0;V<B.length;V+=1)transition_in(y[V]);$=!0}},o(Y){transition_out(R),transition_out(N),transition_out(M),transition_out(F),transition_out(D),transition_out(x);for(let V=0;V<y.length;V+=1)transition_out(y[V]);$=!1},d(Y){Y&&detach(e),R&&R.d(),N&&N.d(),M&&M.d(),F&&F.d(),D&&D.d(),x&&x.d();for(let V=0;V<y.length;V+=1)y[V].d();U&&U.d(),o[60](null),S=!1,run_all(I)}}}function instance$1g(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b;component_subscribe(o,currentThemeDefinition,Ce=>t(28,b=Ce));let{conid:v}=e,{database:y}=e,{table:C}=e,{zoomKoef:E}=e,{onChangeTable:A}=e,{onBringToFront:k}=e,{onSelectTable:T}=e,{onRemoveTable:$}=e,{onAddAllReferences:S}=e,{onCreateReference:I}=e,{onAddReferenceByColumn:R}=e,{onSelectColumn:N}=e,{onChangeColumn:M}=e,{onChangeTableColor:F}=e,{isMultipleTableSelection:D}=e,{onMoveStart:x}=e,{onMove:B}=e,{onMoveEnd:K}=e,{sourceDragColumn$:U}=e,{targetDragColumn$:G}=e,{domCanvas:W}=e,{designer:q}=e,{onMoveReferences:H}=e,{settings:z}=e,{columnFilter:Y}=e,V=null,J;const Q={};function X(Ce,je,pt){if(!Ce)return[];const wt=[];for(const ut of Ce)if(lib.filterName(je,ut.columnName))wt.push(Object.assign(Object.assign({},ut),{expandLevel:pt})),ut.isExpanded&&wt.push(...X(ut.getChildColumns?ut.getChildColumns():null,je,pt+1));else if(ut.isExpanded){const Ct=X(ut.getChildColumns?ut.getChildColumns():null,je,pt+1);Ct.length>0&&(wt.push(Object.assign(Object.assign({},ut),{expandLevel:pt})),wt.push(...Ct))}return wt}function ie(){return C==null?void 0:C.isSelectedTable}function ce(){return s}function de(){t(15,V={left:u,top:d})}function se(Ce,je){t(15,V.left+=Ce/E,V),t(15,V.top+=je/E,V)}function me(){const Ce=V;return t(15,V=null),Ce}function ue(Ce,je,pt){var wt,ut,Ct,xt,ht,Rt,Ae,Me;if(!(z!=null&&z.customizeStyle))return!0;switch((pt==null?void 0:pt.filterColumns)||"all"){case"primaryKey":return(ut=(wt=Ce==null?void 0:Ce.primaryKey)===null||wt===void 0?void 0:wt.columns)===null||ut===void 0?void 0:ut.find(xe=>xe.columnName==(je==null?void 0:je.columnName));case"allKeys":return((xt=(Ct=Ce==null?void 0:Ce.primaryKey)===null||Ct===void 0?void 0:Ct.columns)===null||xt===void 0?void 0:xt.find(xe=>xe.columnName==(je==null?void 0:je.columnName)))||((ht=Ce==null?void 0:Ce.foreignKeys)===null||ht===void 0?void 0:ht.find(xe=>xe.columns.find(Qe=>Qe.columnName==(je==null?void 0:je.columnName))));case"keysAndNotNull":return(je==null?void 0:je.notNull)||((Ae=(Rt=Ce==null?void 0:Ce.primaryKey)===null||Rt===void 0?void 0:Rt.columns)===null||Ae===void 0?void 0:Ae.find(xe=>xe.columnName==(je==null?void 0:je.columnName)))||((Me=Ce==null?void 0:Ce.foreignKeys)===null||Me===void 0?void 0:Me.find(xe=>xe.columns.find(Qe=>Qe.columnName==(je==null?void 0:je.columnName))));case"notNull":return je==null?void 0:je.notNull}return!0}function he(){z!=null&&z.canSelectTables?x():de()}function pe(Ce,je){z!=null&&z.canSelectTables?B(Ce,je):(se(Ce,je),tick().then(H))}function Oe(){if(z!=null&&z.canSelectTables)K();else{const Ce=me();A(Object.assign(Object.assign({},C),{left:Ce.left,top:Ce.top})),tick().then(H)}}function qe(Ce,je,pt=3){if(!(je!=null&&je.tableColor))return null;const ut=((Ce==null?void 0:Ce.themeType)=="dark"?presetDarkPalettes:presetPalettes)[je==null?void 0:je.tableColor];return ut?`background: ${ut[pt]}`:null}function et(){const Ce=Object.assign({},Q);return Ce[""]=J,new DomTableRef(C,Ce,W,z)}const Ue=()=>{showModal(InputTextModal,{value:r||"",label:"New alias",header:"Set table alias",onConfirm:Ce=>{A(Object.assign(Object.assign({},C),{alias:Ce}))}})},fe=Ce=>{showModal(VirtualForeignKeyEditorModal,{schemaName:Ce.schemaName,pureName:Ce.pureName,conid:v,database:y})};function Ie(){return z!=null&&z.tableMenu?z==null?void 0:z.tableMenu({designer:q,designerId:s,onRemoveTable:$}):[{text:"Remove",onClick:()=>$({designerId:s})},{divider:!0},(z==null?void 0:z.allowTableAlias)&&!D&&[{text:"Set table alias",onClick:Ue},r&&{text:"Remove table alias",onClick:()=>A(Object.assign(Object.assign({},C),{alias:null}))}],(z==null?void 0:z.allowAddAllReferences)&&!D&&{text:"Add references",onClick:()=>S(C)},(z==null?void 0:z.allowChangeColor)&&{text:"Change color",onClick:()=>F(C)},(z==null?void 0:z.allowDefineVirtualReferences)&&!D&&{text:"Define virtual foreign key",onClick:()=>fe(C)},(z==null?void 0:z.appendTableSystemMenu)&&!D&&[{divider:!0},createDatabaseObjectMenu(Object.assign(Object.assign({},C),{conid:v,database:y}))]]}const We=Ce=>{z!=null&&z.setTableChecked&&(z==null||z.setTableChecked(s,Ce.target.checked))},$e=()=>$(C),Le=()=>z==null?void 0:z.onClickTableHeader(s),ze=Ce=>z==null?void 0:z.setMutliColumnFilter(s,Ce),re=Ce=>z==null?void 0:z.isColumnExpandable(Ce),ge=(Ce,je)=>z==null?void 0:z.toggleExpandedColumn(Ce,je);function Be(Ce,je){o.$$.not_equal(Q[je.columnName],Ce)&&(Q[je.columnName]=Ce,t(17,Q))}const Ze=()=>tick().then(H);function Pe(Ce){binding_callbacks[Ce?"unshift":"push"](()=>{J=Ce,t(16,J)})}const Ee=Ce=>{Ce.button==0&&(Ce.stopPropagation(),k(C),z!=null&&z.canSelectTables&&!(C!=null&&C.isSelectedTable)&&T(C,isCtrlOrCommandKey(Ce)))};return o.$$set=Ce=>{"conid"in Ce&&t(34,v=Ce.conid),"database"in Ce&&t(35,y=Ce.database),"table"in Ce&&t(0,C=Ce.table),"zoomKoef"in Ce&&t(36,E=Ce.zoomKoef),"onChangeTable"in Ce&&t(37,A=Ce.onChangeTable),"onBringToFront"in Ce&&t(1,k=Ce.onBringToFront),"onSelectTable"in Ce&&t(2,T=Ce.onSelectTable),"onRemoveTable"in Ce&&t(3,$=Ce.onRemoveTable),"onAddAllReferences"in Ce&&t(38,S=Ce.onAddAllReferences),"onCreateReference"in Ce&&t(4,I=Ce.onCreateReference),"onAddReferenceByColumn"in Ce&&t(5,R=Ce.onAddReferenceByColumn),"onSelectColumn"in Ce&&t(6,N=Ce.onSelectColumn),"onChangeColumn"in Ce&&t(7,M=Ce.onChangeColumn),"onChangeTableColor"in Ce&&t(39,F=Ce.onChangeTableColor),"isMultipleTableSelection"in Ce&&t(40,D=Ce.isMultipleTableSelection),"onMoveStart"in Ce&&t(41,x=Ce.onMoveStart),"onMove"in Ce&&t(42,B=Ce.onMove),"onMoveEnd"in Ce&&t(43,K=Ce.onMoveEnd),"sourceDragColumn$"in Ce&&t(8,U=Ce.sourceDragColumn$),"targetDragColumn$"in Ce&&t(9,G=Ce.targetDragColumn$),"domCanvas"in Ce&&t(44,W=Ce.domCanvas),"designer"in Ce&&t(10,q=Ce.designer),"onMoveReferences"in Ce&&t(11,H=Ce.onMoveReferences),"settings"in Ce&&t(12,z=Ce.settings),"columnFilter"in Ce&&t(45,Y=Ce.columnFilter)},o.$$.update=()=>{o.$$.dirty[0]&1&&t(27,n=C==null?void 0:C.pureName),o.$$.dirty[0]&1&&t(18,r=C==null?void 0:C.alias),o.$$.dirty[0]&1025&&t(14,a=(C==null?void 0:C.columns).filter(Ce=>ue(C,Ce,q==null?void 0:q.style))),o.$$.dirty[0]&1&&t(13,s=C==null?void 0:C.designerId),o.$$.dirty[0]&1&&t(26,l=C==null?void 0:C.objectTypeField),o.$$.dirty[0]&1&&t(20,u=C==null?void 0:C.left),o.$$.dirty[0]&1&&t(19,d=C==null?void 0:C.top),o.$$.dirty[0]&12288&&t(25,f=z!=null&&z.getMainTableIcon?z==null?void 0:z.getMainTableIcon(s):null),o.$$.dirty[0]&12288&&t(24,m=z!=null&&z.tableSpecificDb?z==null?void 0:z.tableSpecificDb(s):null),o.$$.dirty[0]&12288&&t(23,h=z!=null&&z.hasFilterParentRowsFlag?z==null?void 0:z.hasFilterParentRowsFlag(s):!1),o.$$.dirty[0]&12288&&t(22,p=z!=null&&z.isGrayedTable?z==null?void 0:z.isGrayedTable(s):!1),o.$$.dirty[0]&16384|o.$$.dirty[1]&16384&&t(21,g=X(a,Y,0))},[C,k,T,$,I,R,N,M,U,G,q,H,z,s,a,V,J,Q,r,d,u,g,p,h,m,f,l,n,b,he,pe,Oe,qe,Ie,v,y,E,A,S,F,D,x,B,K,W,Y,ie,ce,de,se,me,et,We,$e,Le,ze,re,ge,Be,Ze,Pe,Ee]}class DesignerTable extends SvelteComponent{constructor(e){super(),init(this,e,instance$1g,create_fragment$1h,safe_not_equal,{conid:34,database:35,table:0,zoomKoef:36,onChangeTable:37,onBringToFront:1,onSelectTable:2,onRemoveTable:3,onAddAllReferences:38,onCreateReference:4,onAddReferenceByColumn:5,onSelectColumn:6,onChangeColumn:7,onChangeTableColor:39,isMultipleTableSelection:40,onMoveStart:41,onMove:42,onMoveEnd:43,sourceDragColumn$:8,targetDragColumn$:9,domCanvas:44,designer:10,onMoveReferences:11,settings:12,columnFilter:45,isSelected:46,getDesignerId:47,moveStart:48,move:49,moveEnd:50,getDomTable:51},null,[-1,-1,-1])}get isSelected(){return this.$$.ctx[46]}get getDesignerId(){return this.$$.ctx[47]}get moveStart(){return this.$$.ctx[48]}get move(){return this.$$.ctx[49]}get moveEnd(){return this.$$.ctx[50]}get getDomTable(){return this.$$.ctx[51]}}class DesignerComponent{constructor(){this.subComponents=[],this.tables=[],this.nonPrimaryReferences=[]}get primaryTable(){return this.tables[0]}get nonPrimaryTables(){return this.tables.slice(1)}get nonPrimaryTablesAndReferences(){return _.zip(this.nonPrimaryTables,this.nonPrimaryReferences)}get myAndParentTables(){return[...this.parentTables,...this.tables]}get parentTables(){return this.parentComponent?this.parentComponent.myAndParentTables:[]}get thisAndSubComponentsTables(){return[...this.tables,..._.flatten(this.subComponents.map(e=>e.thisAndSubComponentsTables))]}}class DesignerComponentCreator{constructor(e){for(this.designer=e,this.components=[],this.toAdd=[...e.tables];this.toAdd.length>0;){const t=this.parseComponent(null);this.components.push(t)}}parseComponent(e){if(e==null&&(e=findPrimaryTable(this.toAdd)),!e)return null;_.remove(this.toAdd,n=>n==e);const t=new DesignerComponent;for(t.tables.push(e);;){let n=!1;for(const r of this.toAdd){const a=findConnectingReference(this.designer,t.tables,[r],referenceIsJoin);if(a){t.tables.push(r),t.nonPrimaryReferences.push(a),_.remove(this.toAdd,s=>s==r),n=!0;break}}if(!n)break}for(;;){let n=!1;for(const r of this.toAdd){const a=findConnectingReference(this.designer,t.tables,[r],referenceIsExists);if(a){const s=this.parseComponent(r);t.subComponents.push(s),s.parentComponent=t,s.parentReference=a,n=!0;break}}if(!n)break}return t}}class DesignerQueryDumper{constructor(e,t){this.designer=e,this.components=t}get topLevelTables(){return _.flatten(this.components.map(e=>e.tables))}dumpComponent(e){const t={commandType:"select",from:{name:e.primaryTable,alias:e.primaryTable.alias,relations:[]}};for(const[n,r]of e.nonPrimaryTablesAndReferences)t.from.relations.push({name:n,alias:n.alias,joinType:r.joinType,conditions:getReferenceConditions(r,this.designer)});for(const n of e.subComponents){const r=this.dumpComponent(n);r.selectAll=!0,t.where=lib$4.mergeConditions(t.where,{conditionType:n.parentReference.joinType=="WHERE NOT EXISTS"?"notExists":"exists",subQuery:r})}if(e.parentReference){t.where=lib$4.mergeConditions(t.where,{conditionType:"and",conditions:getReferenceConditions(e.parentReference,this.designer)});for(const n of this.designer.references||[])referenceIsCrossJoin(n)&&referenceIsConnecting(n,e.tables,e.myAndParentTables)&&(t.where=lib$4.mergeConditions(t.where,{conditionType:"and",conditions:getReferenceConditions(n,this.designer)}));this.addConditions(t,e.tables)}return t}buildConditionFromFilterField(e,t,n){const r=[];for(const a of this.designer.columns||[])if(a[t]){if(!a.isCustomExpression){const s=(this.designer.tables||[]).find(l=>l.designerId==a.designerId);if(!s||!e.find(l=>l.designerId==s.designerId))continue}try{const s=lib$1.parseFilter(a[t],findDesignerFilterType(a,this.designer));s&&r.push(_.cloneDeepWith(s,l=>{if(l.exprType=="placeholder")return n?n(a):this.getColumnExpression(a)}))}catch{continue}}return r.length==0?null:r.length==1?r[0]:{conditionType:"and",conditions:r}}addConditionsCore(e,t,n,r,a){const s=_.compact(n.map(l=>this.buildConditionFromFilterField(t,l,a)));if(s.length!=0){if(s.length==0){e[r]=lib$4.mergeConditions(e[r],s[0]);return}e[r]=lib$4.mergeConditions(e[r],{conditionType:"or",conditions:s})}}addConditions(e,t){var a;const n=((a=this.designer.settings)==null?void 0:a.additionalFilterCount)||0,r=["filter",..._.range(n).map(s=>`additionalFilter${s+1}`)];this.addConditionsCore(e,t,r,"where")}addGroupConditions(e,t,n){var s;const r=((s=this.designer.settings)==null?void 0:s.additionalGroupFilterCount)||0,a=["groupFilter",..._.range(r).map(l=>`additionalGroupFilter${l+1}`)];this.addConditionsCore(e,t,a,"having",l=>this.getColumnResultField(l,n))}getColumnExpression(e){const t=findQuerySource(this.designer,e.designerId),{columnName:n,isCustomExpression:r,customExpression:a}=e;return r?{exprType:"raw",sql:a}:{exprType:"column",columnName:n,source:t}}getColumnResultField(e,t){const{columnName:n}=e;let{alias:r}=e;const a=this.getColumnExpression(e);if(t&&!e.isGrouped){const s=e.aggregate==null||e.aggregate=="---"?"MAX":e.aggregate;return r||(r=`${s}(${n})`),{exprType:"call",func:s=="COUNT DISTINCT"?"COUNT":s,argsPrefix:s=="COUNT DISTINCT"?"DISTINCT":null,alias:r,args:[a]}}else return{...a,alias:r}}run(){let e=null;for(const u of this.components){const d=this.dumpComponent(u);e==null?e=d:e=mergeSelectsFromDesigner(e,d)}const t=this.topLevelTables;for(const u of this.designer.references||[])referenceIsCrossJoin(u)&&referenceIsConnecting(u,t,t)&&(e.where=lib$4.mergeConditions(e.where,{conditionType:"and",conditions:getReferenceConditions(u,this.designer)}));const n=(this.designer.columns||[]).filter(u=>t.find(d=>d.designerId==u.designerId)||u.isCustomExpression&&u.customExpression),r=!!n.find(u=>u.isGrouped||u.aggregate&&u.aggregate!="---"),a=n.filter(u=>u.isOutput);a.length==0?e.selectAll=!0:e.columns=a.map(u=>this.getColumnResultField(u,r));const s=n.filter(u=>u.isGrouped);s.length>0&&(e.groupBy=s.map(u=>this.getColumnExpression(u)));const l=_.sortBy(n.filter(u=>u.sortOrder),u=>Math.abs(u.sortOrder));return l.length>0&&(e.orderBy=l.map(u=>({...this.getColumnExpression(u),direction:u.sortOrder<0?"DESC":"ASC"}))),this.addConditions(e,t),this.addGroupConditions(e,t,r),e}}function referenceIsConnecting(o,e,t){return e.find(n=>n.designerId==o.sourceId)&&t.find(n=>n.designerId==o.targetId)||e.find(n=>n.designerId==o.targetId)&&t.find(n=>n.designerId==o.sourceId)}function referenceIsJoin(o){return["INNER JOIN","LEFT JOIN","RIGHT JOIN","FULL OUTER JOIN"].includes(o.joinType)}function referenceIsExists(o){return["WHERE EXISTS","WHERE NOT EXISTS"].includes(o.joinType)}function referenceIsCrossJoin(o){return!o.joinType||o.joinType=="CROSS JOIN"}function findConnectingReference(o,e,t,n){for(const r of o.references||[])if(n(r)&&referenceIsConnecting(r,e,t))return r;return null}function findQuerySource(o,e){const t=o.tables.find(n=>n.designerId==e);return t?{name:t,alias:t.alias}:null}function mergeSelectsFromDesigner(o,e){return{commandType:"select",from:{...o.from,relations:[...o.from.relations,{joinType:"CROSS JOIN",name:e.from.name,alias:e.from.alias},...e.from.relations]},where:lib$4.mergeConditions(o.where,e.where)}}function findPrimaryTable(o){return _.minBy(o,e=>e.top)}function getReferenceConditions(o,e){const t=e.tables.find(r=>r.designerId==o.sourceId),n=e.tables.find(r=>r.designerId==o.targetId);return o.columns.map(r=>({conditionType:"binary",operator:"=",left:{exprType:"column",columnName:r.source,source:{name:t,alias:t.alias}},right:{exprType:"column",columnName:r.target,source:{name:n,alias:n.alias}}}))}function generateDesignedQuery(o,e){var l;if(!findPrimaryTable(o.tables))return"";const n=new DesignerComponentCreator(o),a=new DesignerQueryDumper(o,n.components).run();a.distinct=!!((l=o==null?void 0:o.settings)!=null&&l.isDistinct);const s=e.createDumper();return lib$4.dumpSqlSelect(s,a),s.s}function isConnectedByReference(o,e,t,n){if(!o.references)return!1;const a=new DesignerComponentCreator({...o,references:n?o.references.filter(u=>u.designerId!=n.designerId):o.references}).components.map(u=>u.thisAndSubComponentsTables),s=a.find(u=>u.find(d=>d.designerId==e.designerId)),l=a.find(u=>u.find(d=>d.designerId==t.designerId));return s==l}function findDesignerFilterType({designerId:o,columnName:e},t){const n=(t.tables||[]).find(r=>r.designerId==o);if(n){const r=(n.columns||[]).find(a=>a.columnName==e);if(r){const{dataType:a}=r;return lib$1.getFilterType(a)}}return"string"}function cleanupDesignColumns(o){return(o||[]).filter(e=>e.isOutput||e.isGrouped||e.alias||e.aggregate&&e.aggregate!="---"||e.sortOrder||e.filter)}function sortByStart(o,e){return o[0]<e[0]?-1:o[0]>e[0]?1:0}function sortByEnd(o,e){return o[1]<e[1]?-1:o[1]>e[1]?1:0}function hasOverlap(o,e){return e[1]>o[0]&&e[0]<o[1]}function union(...o){if(!o.length)return[];o=o.sort(sortByStart);const e=[];let[t,n]=o[0];for(let r=1,a=o.length;r<a;r++){const[s,l]=o[r];n<s&&(e.push([t,n]),t=s),n<l&&(n=l)}return[...e,[t,n]]}function difference(o,e){return hasOverlap(o,e)?e[0]>o[0]&&e[1]<o[1]?[[o[0],e[0]],[e[1],o[1]]]:e[0]<=o[0]&&e[1]>=o[1]?null:e[0]>o[0]?[[o[0],e[0]]]:[[e[1],o[1]]]:[o]}function arrayDifference(o,e){const t=union(...o),n=union(...e);if(!t.length)return[];if(!n.length)return t;const r=[];for(let a=0,s=t.length;a<s;a++){let[l,u]=t[a],d=!0;for(let f=0,m=n.length;f<m;f++){const h=n[f];if(h[1]<=l)continue;if(h[0]>=u)break;const p=difference([l,u],h);if(p)[l,u]=p[p.length-1],p.length>1&&r.push(p[0]);else{d=!1;break}}d&&r.push([l,u])}return r}function intersection(...o){o.sort(sortByStart);const[e,t]=[o[o.length-1][0],o.sort(sortByEnd)[0][1]];for(let n=0,r=o.length;n<r-1;n++){const[a,s]=o[n+1];if(a>t||s<e)return null}return[e,t]}function intersectLineLine(o,e,t,n){const r=(n.y-t.y)*(e.x-o.x)-(n.x-t.x)*(e.y-o.y);if(r===0)return null;const a=((n.x-t.x)*(o.y-t.y)-(n.y-t.y)*(o.x-t.x))/r,s=((e.x-o.x)*(o.y-t.y)-(e.y-o.y)*(o.x-t.x))/r;return a<0||a>1||s<0||s>1?null:{x:o.x+a*(e.x-o.x),y:o.y+a*(e.y-o.y)}}function intersectLineBox(o,e,t){const n={x:t.left,y:t.top},r={x:t.right,y:t.top},a={x:t.left,y:t.bottom},s={x:t.right,y:t.bottom},l=[];let u;return(u=intersectLineLine(o,e,n,r))&&l.push(u),(u=intersectLineLine(o,e,r,s))&&l.push(u),(u=intersectLineLine(o,e,s,a))&&l.push(u),(u=intersectLineLine(o,e,a,n))&&l.push(u),l}function rectangleDistance(o,e){function t(b,v,y,C){let E=b-y,A=v-C;return Math.sqrt(E*E+A*A)}const n=o.left,r=o.top,a=o.right,s=o.bottom,l=e.left,u=e.top,d=e.right,f=e.bottom,m=d<n,h=a<l,p=f<r,g=s<u;return g&&m?t(n,s,d,u):m&&p?t(n,r,d,f):p&&h?t(a,r,l,f):h&&g?t(a,s,l,u):m?n-d:h?l-a:p?r-f:g?u-s:0}function rectanglesHaveIntersection(o,e){const t=intersection([o.left,o.right],[e.left,e.right]),n=intersection([o.top,o.bottom],[e.top,e.bottom]);return!!t&&!!n}class Vector2D{constructor(e,t){this.x=e,this.y=t}static random(){return new Vector2D(10*(Math.random()-.5),10*(Math.random()-.5))}add(e){return new Vector2D(this.x+e.x,this.y+e.y)}subtract(e){return new Vector2D(this.x-e.x,this.y-e.y)}multiply(e){return new Vector2D(this.x*e,this.y*e)}divide(e){return new Vector2D(this.x/e||0,this.y/e||0)}magnitude(){return Math.sqrt(this.x*this.x+this.y*this.y)}normal(e){return new Vector2D(-this.y,this.x)}normalise(){return this.divide(this.magnitude())}}function solveOverlapsInIntervalArray(o,e,t){const n=arrayDifference([[-1/0,1/0]],t),r=[];for(const a of n)if(!(a[1]-a[0]<e))if(a[1]<o)r.push(a[1]-e/2);else if(a[0]>o)r.push(a[0]+e/2);else{let l=o;l-e/2<a[0]&&(l=a[0]+e/2),l+e/2>a[1]&&(l=a[1]-e/2),r.push(l)}return _.minBy(r,a=>Math.abs(a-o))}const MIN_NODE_DISTANCE=50,SPRING_LENGTH=100,SPRINGY_STEPS=50,GRAVITY_X=.005,GRAVITY_Y=.01,REPULSION=1e3,MAX_FORCE_SIZE=100,NODE_MARGIN=30,NODE_SPACE_TREE=60,GRAVITY_EXPONENT=1.05;class GraphNode{constructor(e,t,n,r,a){this.graph=e,this.designerId=t,this.width=n,this.height=r,this.fixedPosition=a,this.neightboors=[]}initialize(){this.radius=Math.sqrt(this.width*this.width/4+this.height*this.height/4)}}class GraphEdge{constructor(e,t,n){this.graph=e,this.source=t,this.target=n}}class GraphDefinition{constructor(){this.nodes={},this.edges=[]}addNode(e,t,n,r){this.nodes[e]=new GraphNode(this,e,t,n,r)}addEdge(e,t){const n=this.nodes[e],r=this.nodes[t];n&&r&&!this.edges.find(a=>a.source==n&&a.target==r||a.target==n&&a.source==r)&&this.edges.push(new GraphEdge(this,n,r))}initialize(){for(const e of Object.values(this.nodes)){for(const t of this.edges)t.source==e&&!e.neightboors.includes(t.target)&&e.neightboors.push(t.target),t.target==e&&!e.neightboors.includes(t.source)&&e.neightboors.push(t.source);e.initialize()}}detectCentreNode(){if(_.values(this.nodes).find(t=>t.fixedPosition))return null;const e=[];for(const t of _.values(this.nodes)){let n=!0;for(const r of _.values(this.nodes))if(t!=r&&!t.neightboors.includes(r)){n=!1;break}n&&e.push(t)}return e.length==1?e[0]:null}}class LayoutNode{constructor(e,t,n){this.node=e,this.x=t,this.y=n,this.left=t-e.width/2,this.top=n-e.height/2,this.right=t+e.width/2,this.bottom=n+e.height/2,this.position=new Vector2D(t,n),this.rangeXPadded=[this.left-NODE_MARGIN,this.right+NODE_MARGIN],this.rangeYPadded=[this.top-NODE_MARGIN,this.bottom+NODE_MARGIN]}translate(e,t,n=!1){return this.node.fixedPosition&&!n?this:new LayoutNode(this.node,this.x+e,this.y+t)}distanceTo(e){return rectangleDistance(this,e)}hasPaddedIntersect(e){const t=intersection(this.rangeXPadded,e.rangeXPadded),n=intersection(this.rangeYPadded,e.rangeYPadded);return t&&t[1]-t[0]>.1&&n&&n[1]-n[0]>.1}}class ForceAlgorithmStep{constructor(e){this.layout=e,this.nodeForces={}}applyForce(e,t){t.magnitude()>MAX_FORCE_SIZE&&(t=t.normalise().multiply(MAX_FORCE_SIZE)),e.node.designerId in this.nodeForces?this.nodeForces[e.node.designerId]=this.nodeForces[e.node.designerId].add(t):this.nodeForces[e.node.designerId]=t}applyCoulombsLaw(){for(const e of _.values(this.layout.nodes))for(const t of _.values(this.layout.nodes)){if(e.node.designerId==t.node.designerId)continue;const r=e.position.subtract(t.position).normalise(),a=e.distanceTo(t)+MIN_NODE_DISTANCE;this.applyForce(e,r.multiply(.5*REPULSION/(a*a))),this.applyForce(t,r.multiply(-.5*REPULSION/(a*a)))}}applyHooksLaw(){for(const t of this.layout.edges){const n=t.target.position.subtract(t.source.position),r=SPRING_LENGTH-t.length;var e=n.normalise();this.applyForce(t.source,e.multiply(r*-.5)),this.applyForce(t.target,e.multiply(r*.5))}}applyGravity(){for(const e of _.values(this.layout.nodes))this.applyForce(e,new Vector2D(-Math.pow(Math.abs(e.position.x),GRAVITY_EXPONENT)*Math.sign(e.position.x)*GRAVITY_X,-Math.pow(Math.abs(e.position.y),GRAVITY_EXPONENT)*Math.sign(e.position.y)*GRAVITY_Y))}moveNode(e){const t=this.nodeForces[e.node.designerId];return t?e.translate(t.x,t.y):e}}class LayoutEdge{}function addNodeNeighboors(o,e,t){const n=_.sortBy(o,[r=>r.neightboors.length,r=>r.height,r=>r.designerId]);for(const r of n)t.has(r.designerId)||(t.add(r.designerId),e.push(r),addNodeNeighboors(r.neightboors,e,t));return e}class GraphLayout{constructor(e){this.graph=e,this.nodes={},this.edges=[]}static createCircle(e,t={x:0,y:0}){const n=new GraphLayout(e);if(_.isEmpty(e.nodes))return n;const r=new Set,a=[],s=e.detectCentreNode();addNodeNeighboors(_.values(e.nodes).filter(h=>h!=s&&!h.fixedPosition),a,r);const l=_.max(a.map(h=>h.radius)),d=a.length*l/(2*Math.PI)+l;let f=0;const m=2*Math.PI/a.length;for(const h of a)n.nodes[h.designerId]=new LayoutNode(h,t.x+Math.sin(f)*d,t.y+Math.cos(f)*d),f+=m;for(const h of _.values(e.nodes).filter(p=>p.fixedPosition))n.nodes[h.designerId]=new LayoutNode(h,h.fixedPosition.x,h.fixedPosition.y);return s&&(n.nodes[s.designerId]=new LayoutNode(s,t.x,t.y)),n.fillEdges(),n}static createTree(e,t){const n=new GraphLayout(e),r=e.nodes[t];if(!r)return n;const a=new LayoutNode(r,r.width/2+NODE_MARGIN,r.height/2+NODE_MARGIN);n.nodes[t]=a,n.createTreeLevel([r],a.right+NODE_SPACE_TREE);let s=_.max(_.values(n.nodes).map(u=>u.right));const l=_.values(e.nodes).filter(u=>!n.nodes[u.designerId]);for(const u of l){s+=NODE_SPACE_TREE;const d=new LayoutNode(u,s+u.width/2,NODE_MARGIN+u.height/2);n.nodes[u.designerId]=d,s+=u.width}return n}createTreeLevel(e,t){let n=NODE_MARGIN,r=0;const a=[];for(const s of e)for(const l of s.neightboors){if(l.designerId in this.nodes)continue;a.push(l);const u=new LayoutNode(l,t+l.width/2,n+l.height/2);this.nodes[l.designerId]=u,n+=l.height+NODE_MARGIN,u.right>r&&(r=u.right)}a.length>0&&this.createTreeLevel(a,r+NODE_SPACE_TREE)}fillEdges(){this.edges=this.graph.edges.map(e=>{const t=new LayoutEdge;t.edge=e;const n=this.nodes[e.source.designerId],r=this.nodes[e.target.designerId];return t.length=n.distanceTo(r),t.source=n,t.target=r,t})}changePositions(e,t=!0){const n=new GraphLayout(this.graph);return n.nodes=_.mapValues(this.nodes,e),t&&n.fillEdges(),n}fixViewBox(){const e=_.min(_.values(this.nodes).map(n=>n.left)),t=_.min(_.values(this.nodes).map(n=>n.top));return this.changePositions(n=>n.translate(-e+50,-t+50,!0))}springyStep(){const e=new ForceAlgorithmStep(this);return e.applyHooksLaw(),e.applyCoulombsLaw(),e.applyGravity(),this.changePositions(t=>e.moveNode(t))}springyAlg(){let e=this;for(let t=0;t<SPRINGY_STEPS;t++)e=e.springyStep();return e}solveOverlaps(){const e=_.sortBy(_.values(this.nodes),n=>n.position.magnitude()),t=new GraphLayout(this.graph);for(const n of e){const r=_.values(t.nodes);if(r.find(a=>a.hasPaddedIntersect(n))){const a=union(...r.filter(f=>intersection(f.rangeYPadded,n.rangeYPadded)).map(f=>f.rangeXPadded)),s=union(...r.filter(f=>intersection(f.rangeXPadded,n.rangeXPadded)).map(f=>f.rangeYPadded)),l=solveOverlapsInIntervalArray(n.x,n.node.width+NODE_MARGIN*2,a),u=solveOverlapsInIntervalArray(n.y,n.node.height+NODE_MARGIN*2,s),d=Math.abs(l-n.x)<Math.abs(u-n.y)?new LayoutNode(n.node,l,n.y):new LayoutNode(n.node,n.x,u);t.nodes[n.node.designerId]=d}else t.nodes[n.node.designerId]=n}return t.fillEdges(),t}print(){for(const e of _.values(this.nodes))console.log({designerId:e.node.designerId,left:e.left,top:e.top,right:e.right,bottom:e.bottom})}}function create_default_slot$y(o){let e,t,n,r,a;return r=new ColorSelector({props:{value:o[3]}}),r.$on("change",o[6]),{c(){e=element("div"),t=text(o[1]),n=space(),create_component(r.$$.fragment),attr(e,"class","m-2")},m(s,l){insert(s,e,l),append(e,t),insert(s,n,l),mount_component(r,s,l),a=!0},p(s,l){(!a||l&2)&&set_data(t,s[1]);const u={};l&8&&(u.value=s[3]),r.$set(u)},i(s){a||(transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(r.$$.fragment,s),a=!1},d(s){s&&(detach(e),detach(n)),destroy_component(r,s)}}}function create_header_slot$7(o){let e;return{c(){e=text(o[0])},m(t,n){insert(t,e,n)},p(t,n){n&1&&set_data(e,t[0])},d(t){t&&detach(e)}}}function create_fragment$1g(o){let e,t;const n=[o[4]];let r={$$slots:{header:[create_header_slot$7],default:[create_default_slot$y]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&143&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$1f(o,e,t){let n;const r=["color","header","text","onChange"];let a=compute_rest_props(e,r),{color:s}=e,{header:l}=e,{text:u}=e,{onChange:d}=e;const f=m=>{t(3,n=m.detail),d(n)};return o.$$set=m=>{e=assign(assign({},e),exclude_internal_props(m)),t(4,a=compute_rest_props(e,r)),"color"in m&&t(5,s=m.color),"header"in m&&t(0,l=m.header),"text"in m&&t(1,u=m.text),"onChange"in m&&t(2,d=m.onChange)},o.$$.update=()=>{o.$$.dirty&32&&t(3,n=s)},[l,u,d,n,a,s,f]}class ChooseColorModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$1f,create_fragment$1g,safe_not_equal,{color:5,header:0,text:1,onChange:2})}}const ChooseColorModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ChooseColorModal},Symbol.toStringTag,{value:"Module"})),DragColumnMemory_svelte_svelte_type_style_lang="";function create_if_block$D(o){let e,t,n,r,a;function s(d,f){return d[3]?create_if_block_1$p:create_else_block$g}let l=s(o),u=l(o);return{c(){e=element("div"),u.c(),attr(e,"class","wrapper svelte-uqb2wg"),attr(e,"draggable",t=!!o[3]),attr(e,"title",n=o[3]?"Drag this column to other column for creating JOIN":"Drag column here for creating JOIN")},m(d,f){insert(d,e,f),u.m(e,null),r||(a=[listen(e,"dragstart",o[5]),listen(e,"dragend",o[6]),listen(e,"dragover",o[7]),listen(e,"drop",o[8])],r=!0)},p(d,f){l===(l=s(d))&&u?u.p(d,f):(u.d(1),u=l(d),u&&(u.c(),u.m(e,null))),f&8&&t!==(t=!!d[3])&&attr(e,"draggable",t),f&8&&n!==(n=d[3]?"Drag this column to other column for creating JOIN":"Drag column here for creating JOIN")&&attr(e,"title",n)},d(d){d&&detach(e),u.d(),r=!1,run_all(a)}}}function create_else_block$g(o){let e;return{c(){e=text("Drag & drop column here")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_1$p(o){let e=o[3].columnName+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&8&&e!==(e=n[3].columnName+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_fragment$1f(o){var n;let e,t=((n=o[2])==null?void 0:n.allowCreateRefByDrag)&&create_if_block$D(o);return{c(){t&&t.c(),e=empty()},m(r,a){t&&t.m(r,a),insert(r,e,a)},p(r,[a]){var s;(s=r[2])!=null&&s.allowCreateRefByDrag?t?t.p(r,a):(t=create_if_block$D(r),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$1,o:noop$1,d(r){r&&detach(e),t&&t.d(r)}}}function instance$1e(o,e,t){let n,r=noop$1,a=()=>(r(),r=subscribe(s,g=>t(4,n=g)),s);o.$$.on_destroy.push(()=>r());let{sourceDragColumn$:s}=e;a();let{targetDragColumn$:l}=e,{settings:u}=e,d;const f=g=>{if(!(u!=null&&u.allowCreateRefByDrag)||!d)return;const b={...d};s.set(b),g.dataTransfer.setData("designer_column_drag_data",JSON.stringify(b))},m=g=>{s.set(null),l.set(null)},h=g=>{n&&g.preventDefault()},p=g=>{var b=g.dataTransfer.getData("designer_column_drag_data");g.preventDefault(),b&&(t(3,d=n),s.set(null),l.set(null))};return o.$$set=g=>{"sourceDragColumn$"in g&&a(t(0,s=g.sourceDragColumn$)),"targetDragColumn$"in g&&t(1,l=g.targetDragColumn$),"settings"in g&&t(2,u=g.settings)},[s,l,u,d,n,f,m,h,p]}class DragColumnMemory extends SvelteComponent{constructor(e){super(),init(this,e,instance$1e,create_fragment$1f,safe_not_equal,{sourceDragColumn$:0,targetDragColumn$:1,settings:2})}}const Designer_svelte_svelte_type_style_lang="";function get_each_context$e(o,e,t){const n=o.slice();return n[73]=e[t],n[74]=e,n[75]=t,n}function get_each_context_1$3(o,e,t){const n=o.slice();return n[76]=e[t],n[77]=e,n[78]=t,n}function create_if_block_2$d(o){let e;return{c(){e=element("div"),e.textContent="Drag & drop tables or views from left panel here",attr(e,"class","empty svelte-1tqsb1")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_each_block_1$3(o,e){let t,n,r=e[76],a,s;const l=()=>e[56](n,r),u=()=>e[56](null,r);var d=e[4];function f(m){return{props:{domTables:m[7],reference:m[76],onChangeReference:m[27],onRemoveReference:m[28],designer:m[0],settings:m[3]}}}return d&&(n=construct_svelte_component(d,f(e)),l()),{key:o,first:null,c(){t=empty(),n&&create_component(n.$$.fragment),a=empty(),this.first=t},m(m,h){insert(m,t,h),n&&mount_component(n,m,h),insert(m,a,h),s=!0},p(m,h){e=m,r!==e[76]&&(u(),r=e[76],l());const p={};if(h[0]&128&&(p.domTables=e[7]),h[0]&262144&&(p.reference=e[76]),h[0]&1&&(p.designer=e[0]),h[0]&8&&(p.settings=e[3]),h[0]&16&&d!==(d=e[4])){if(n){group_outros();const g=n;transition_out(g.$$.fragment,1,0,()=>{destroy_component(g,1)}),check_outros()}d?(n=construct_svelte_component(d,f(e)),l(),create_component(n.$$.fragment),transition_in(n.$$.fragment,1),mount_component(n,a.parentNode,a)):n=null}else d&&n.$set(p)},i(m){s||(n&&transition_in(n.$$.fragment,m),s=!0)},o(m){n&&transition_out(n.$$.fragment,m),s=!1},d(m){m&&(detach(t),detach(a)),u(),n&&destroy_component(n,m)}}}function create_each_block$e(o,e){let t,n,r=e[73],a;const s=()=>e[57](n,r),l=()=>e[57](null,r);let u={onCreateReference:e[29],onSelectColumn:e[33],onChangeColumn:e[34],onAddReferenceByColumn:e[30],onAddAllReferences:e[31],onChangeTableColor:e[32],onMoveReferences:e[42],columnFilter:e[5],table:e[73],conid:e[1],database:e[2],zoomKoef:e[15],isMultipleTableSelection:e[16],onChangeTable:e[23],onBringToFront:e[24],onSelectTable:e[25],onRemoveTable:e[26],onMoveStart:e[36],onMove:e[37],onMoveEnd:e[38],domCanvas:e[9],designer:e[0],sourceDragColumn$:e[19],targetDragColumn$:e[20],settings:e[3]};return n=new DesignerTable({props:u}),s(),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(d,f){insert(d,t,f),mount_component(n,d,f),a=!0},p(d,f){e=d,r!==e[73]&&(l(),r=e[73],s());const m={};f[0]&32&&(m.columnFilter=e[5]),f[0]&256&&(m.table=e[73]),f[0]&2&&(m.conid=e[1]),f[0]&4&&(m.database=e[2]),f[0]&32768&&(m.zoomKoef=e[15]),f[0]&65536&&(m.isMultipleTableSelection=e[16]),f[0]&512&&(m.domCanvas=e[9]),f[0]&1&&(m.designer=e[0]),f[0]&8&&(m.settings=e[3]),n.$set(m)},i(d){a||(transition_in(n.$$.fragment,d),a=!0)},o(d){transition_out(n.$$.fragment,d),a=!1},d(d){d&&detach(t),l(),destroy_component(n,d)}}}function create_if_block_1$o(o){let e,t,n;return{c(){e=svg_element("svg"),t=svg_element("polyline"),attr(t,"points",n=`
        ${o[12].x},${o[12].y}
        ${o[12].x},${o[13].y}
        ${o[13].x},${o[13].y}
        ${o[13].x},${o[12].y}
        ${o[12].x},${o[12].y}
    `),attr(t,"class","svelte-1tqsb1"),attr(e,"class","drag-rect svelte-1tqsb1")},m(r,a){insert(r,e,a),append(e,t)},p(r,a){a[0]&12288&&n!==(n=`
        ${r[12].x},${r[12].y}
        ${r[12].x},${r[13].y}
        ${r[13].x},${r[13].y}
        ${r[13].x},${r[12].y}
        ${r[12].x},${r[12].y}
    `)&&attr(t,"points",n)},d(r){r&&detach(e)}}}function create_if_block$C(o){let e,t,n,r,a,s,l,u,d,f;t=new DragColumnMemory({props:{settings:o[3],sourceDragColumn$:o[19],targetDragColumn$:o[20]}});function m(b){o[60](b)}let h={placeholder:"Filter columns"};o[5]!==void 0&&(h.value=o[5]),a=new SearchInput({props:h}),binding_callbacks.push(()=>bind(a,"value",m));function p(b){o[61](b)}let g={};return o[5]!==void 0&&(g.filter=o[5]),u=new CloseSearchButton({props:g}),binding_callbacks.push(()=>bind(u,"filter",p)),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),create_component(a.$$.fragment),l=space(),create_component(u.$$.fragment),attr(r,"class","searchbox svelte-1tqsb1"),attr(e,"class","panel svelte-1tqsb1")},m(b,v){insert(b,e,v),mount_component(t,e,null),append(e,n),append(e,r),mount_component(a,r,null),append(r,l),mount_component(u,r,null),f=!0},p(b,v){const y={};v[0]&8&&(y.settings=b[3]),t.$set(y);const C={};!s&&v[0]&32&&(s=!0,C.value=b[5],add_flush_callback(()=>s=!1)),a.$set(C);const E={};!d&&v[0]&32&&(d=!0,E.filter=b[5],add_flush_callback(()=>d=!1)),u.$set(E)},i(b){f||(transition_in(t.$$.fragment,b),transition_in(a.$$.fragment,b),transition_in(u.$$.fragment,b),f=!0)},o(b){transition_out(t.$$.fragment,b),transition_out(a.$$.fragment,b),transition_out(u.$$.fragment,b),f=!1},d(b){b&&detach(e),destroy_component(t),destroy_component(a),destroy_component(u)}}}function create_fragment$1e(o){var $,S;let e,t,n,r=[],a=new Map,s,l=[],u=new Map,d,f,m,h,p,g,b,v=!((($=o[8])==null?void 0:$.length)>0)&&create_if_block_2$d(),y=ensure_array_like(o[18]||[]);const C=I=>I[76].designerId;for(let I=0;I<y.length;I+=1){let R=get_each_context_1$3(o,y,I),N=C(R);a.set(N,r[I]=create_each_block_1$3(N,R))}let E=ensure_array_like(o[8]||[]);const A=I=>I[73].designerId;for(let I=0;I<E.length;I+=1){let R=get_each_context$e(o,E,I),N=A(R);u.set(N,l[I]=create_each_block$e(N,R))}let k=o[12]&&o[13]&&create_if_block_1$o(o),T=((S=o[8])==null?void 0:S.length)>0&&create_if_block$C(o);return{c(){var I,R,N,M,F;e=element("div"),v&&v.c(),t=space(),n=element("div");for(let D=0;D<r.length;D+=1)r[D].c();s=space();for(let D=0;D<l.length;D+=1)l[D].c();d=space(),k&&k.c(),h=space(),T&&T.c(),attr(n,"class","canvas svelte-1tqsb1"),attr(n,"style",f=`width:${o[10]}px;height:${o[11]}px;
      ${(I=o[3])!=null&&I.customizeStyle&&((N=(R=o[0])==null?void 0:R.style)!=null&&N.zoomKoef)?`zoom:${(F=(M=o[0])==null?void 0:M.style)==null?void 0:F.zoomKoef};`:""}
    `),attr(e,"class","wrapper noselect svelte-1tqsb1")},m(I,R){var N;insert(I,e,R),v&&v.m(e,null),append(e,t),append(e,n);for(let M=0;M<r.length;M+=1)r[M]&&r[M].m(n,null);append(n,s);for(let M=0;M<l.length;M+=1)l[M]&&l[M].m(n,null);append(n,d),k&&k.m(n,null),o[58](n),append(e,h),T&&T.m(e,null),p=!0,g||(b=[listen(n,"dragover",dragover_handler),listen(n,"drop",o[35]),listen(n,"mousedown",o[59]),action_destroyer(m=moveDrag.call(null,n,(N=o[3])!=null&&N.canSelectTables?[o[39],o[40],o[41]]:null)),action_destroyer(contextMenu.call(null,e,o[43]))],g=!0)},p(I,R){var N,M,F,D,x,B,K,U;((N=I[8])==null?void 0:N.length)>0?v&&(v.d(1),v=null):v||(v=create_if_block_2$d(),v.c(),v.m(e,t)),R[0]&402931865&&(y=ensure_array_like(I[18]||[]),group_outros(),r=update_keyed_each(r,R,C,1,I,y,a,n,outro_and_destroy_block,create_each_block_1$3,s,get_each_context_1$3),check_outros()),R[0]&1738113903|R[1]&2287&&(E=ensure_array_like(I[8]||[]),group_outros(),l=update_keyed_each(l,R,A,1,I,E,u,n,outro_and_destroy_block,create_each_block$e,d,get_each_context$e),check_outros()),I[12]&&I[13]?k?k.p(I,R):(k=create_if_block_1$o(I),k.c(),k.m(n,null)):k&&(k.d(1),k=null),(!p||R[0]&3081&&f!==(f=`width:${I[10]}px;height:${I[11]}px;
      ${(M=I[3])!=null&&M.customizeStyle&&((D=(F=I[0])==null?void 0:F.style)!=null&&D.zoomKoef)?`zoom:${(B=(x=I[0])==null?void 0:x.style)==null?void 0:B.zoomKoef};`:""}
    `))&&attr(n,"style",f),m&&is_function(m.update)&&R[0]&8&&m.update.call(null,(K=I[3])!=null&&K.canSelectTables?[I[39],I[40],I[41]]:null),((U=I[8])==null?void 0:U.length)>0?T?(T.p(I,R),R[0]&256&&transition_in(T,1)):(T=create_if_block$C(I),T.c(),transition_in(T,1),T.m(e,null)):T&&(group_outros(),transition_out(T,1,1,()=>{T=null}),check_outros())},i(I){if(!p){for(let R=0;R<y.length;R+=1)transition_in(r[R]);for(let R=0;R<E.length;R+=1)transition_in(l[R]);transition_in(T),p=!0}},o(I){for(let R=0;R<r.length;R+=1)transition_out(r[R]);for(let R=0;R<l.length;R+=1)transition_out(l[R]);transition_out(T),p=!1},d(I){I&&detach(e),v&&v.d();for(let R=0;R<r.length;R+=1)r[R].d();for(let R=0;R<l.length;R+=1)l[R].d();k&&k.d(),o[58](null),T&&T.d(),g=!1,run_all(b)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$d=()=>getActiveComponent("Designer");registerCommand({id:"designer.arrange",category:"Designer",icon:"icon arrange",name:"Arrange",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$d())===null||o===void 0?void 0:o.canArrange()},onClick:()=>getCurrentEditor$d().arrange()});registerCommand({id:"diagram.export",category:"Designer",toolbarName:"Export diagram",name:"Export diagram",icon:"icon report",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$d().exportDiagram(),testEnabled:()=>{var o;return(o=getCurrentEditor$d())===null||o===void 0?void 0:o.canExport()}});const dragover_handler=o=>o.preventDefault();function instance$1d(o,e,t){let n,r,a,s,l,u,d,f,m=noop$1,h=()=>(m(),m=subscribe(l,Ae=>t(54,f=Ae)),l),p;component_subscribe(o,currentThemeDefinition,Ae=>t(62,d=Ae)),o.$$.on_destroy.push(()=>m());var g=this&&this.__awaiter||function(Ae,Me,xe,Qe){function rt(ot){return ot instanceof xe?ot:new xe(function(ft){ft(ot)})}return new(xe||(xe=Promise))(function(ot,ft){function kt(Ut){try{Lt(Qe.next(Ut))}catch(rn){ft(rn)}}function $t(Ut){try{Lt(Qe.throw(Ut))}catch(rn){ft(rn)}}function Lt(Ut){Ut.done?ot(Ut.value):rt(Ut.value).then(kt,$t)}Lt((Qe=Qe.apply(Ae,Me||[])).next())})},b,v;let{value:y}=e,{onChange:C}=e,{conid:E}=e,{database:A}=e,{menu:k}=e,{settings:T}=e,{referenceComponent:$}=e;const S=createActivator("Designer",!0);let I,R=3e3,N=3e3,M=null,F=null,D;const x=writable(null),B=writable(null),K=T!=null&&T.updateFromDbInfo?useDatabaseInfo({conid:E,database:A}):null;component_subscribe(o,K,Ae=>t(55,p=Ae));const U={},G={};let W;function q(){t(7,W=_.pickBy(_.mapValues(U,Ae=>Ae==null?void 0:Ae.getDomTable())))}function H(Ae){const Me=_.min(Ae.map(Qe=>Qe.left)),xe=_.min(Ae.map(Qe=>Qe.top));if(Me<0||xe<0){const Qe=Me<0?-Me:0,rt=xe<0?-xe:0;return Ae.map(ot=>Object.assign(Object.assign({},ot),{left:ot.left+Qe,top:ot.top+rt}))}return Ae}function z(Ae="auto"){Ae=="auto"&&K&&(Ae=n),!(!(T!=null&&T.updateFromDbInfo)||!Ae)&&C(Me=>{let xe=Me.tables||[];for(const rt of Me.tables||[]){const ot=(Ae.tables||[]).find(ft=>ft.pureName==rt.pureName&&ft.schemaName==rt.schemaName);stableStringify(_.pick(ot,["columns","primaryKey","foreignKeys"]))!=stableStringify(_.pick(rt,["columns","primaryKey","foreignKeys"]))&&(xe=xe.map(ft=>ft==rt?Object.assign(Object.assign({},rt),_.pick(ot,["columns","primaryKey","foreignKeys"])):ft))}let Qe=Me==null?void 0:Me.references;if(T!=null&&T.useDatabaseReferences){Qe=[];for(const rt of xe)for(const ot of rt.foreignKeys){const ft=xe.find(kt=>kt.pureName==ot.refTableName&&kt.schemaName==ot.refSchemaName);ft&&Qe.push({designerId:uuidv1(),sourceId:rt.designerId,targetId:ft.designerId,joinType:"",columns:ot.columns.map(kt=>({source:kt.columnName,target:kt.refColumnName}))})}}return Object.assign(Object.assign({},Me),{tables:xe,references:Qe})},!0)}function Y(Ae,Me){return g(this,void 0,void 0,function*(){yield tick();const xe=_.values(Me).map(ot=>ot.getRect()),Qe=xe.length>0?_.max(xe.map(ot=>ot.right)):0,rt=xe.length>0?_.max(xe.map(ot=>ot.bottom)):0;t(10,R=Math.max(3e3,Qe+50)),t(11,N=Math.max(3e3,rt+50))})}function V(Ae,Me=void 0,xe=void 0){C(Ae,Me,xe),tick().then(Be)}const J=Ae=>{V(Me=>Object.assign(Object.assign({},Me),{tables:H((Me.tables||[]).map(xe=>xe.designerId==Ae.designerId?Ae:xe))}))},Q=Ae=>{V(Me=>Object.assign(Object.assign({},Me),{tables:[...(Me.tables||[]).filter(xe=>xe.designerId!=Ae.designerId),Ae]}),!0)},X=(Ae,Me)=>{V(xe=>Object.assign(Object.assign({},xe),{tables:(xe.tables||[]).map(Qe=>Qe.designerId==Ae.designerId?Object.assign(Object.assign({},Qe),{isSelectedTable:!0}):Object.assign(Object.assign({},Qe),{isSelectedTable:Me?Qe.isSelectedTable:!1}))}),!0)},ie=Ae=>{u&&(T!=null&&T.useDatabaseReferences)&&(T!=null&&T.canSelectTables)?(V(Me=>Object.assign(Object.assign({},Me),{tables:(Me.tables||[]).filter(xe=>!xe.isSelectedTable)})),z()):V(Me=>Object.assign(Object.assign({},Me),{tables:(Me.tables||[]).filter(xe=>xe.designerId!=Ae.designerId),references:(Me.references||[]).filter(xe=>xe.sourceId!=Ae.designerId&&xe.targetId!=Ae.designerId),columns:(Me.columns||[]).filter(xe=>xe.designerId!=Ae.designerId)}),void 0,{removeTables:!0})},ce=Ae=>{V(Me=>Object.assign(Object.assign({},Me),{references:(Me.references||[]).map(xe=>xe.designerId==Ae.designerId?Ae:xe)}))},de=Ae=>{V(Me=>Object.assign(Object.assign({},Me),{references:(Me.references||[]).filter(xe=>xe.designerId!=Ae.designerId)}))},se=(Ae,Me)=>{V(xe=>{const Qe=(xe.references||[]).find(rt=>rt.sourceId==Ae.designerId&&rt.targetId==Me.designerId||rt.sourceId==Me.designerId&&rt.targetId==Ae.designerId);return Object.assign(Object.assign({},xe),{references:Qe?xe.references.map(rt=>rt==Qe?Object.assign(Object.assign({},Qe),{columns:[...Qe.columns,Qe.sourceId==Ae.designerId?{source:Ae.columnName,target:Me.columnName}:{source:Me.columnName,target:Ae.columnName}]}):rt):[...xe.references||[],{designerId:uuidv1(),sourceId:Ae.designerId,targetId:Me.designerId,joinType:isConnectedByReference(xe,Ae,Me,null)?"CROSS JOIN":"INNER JOIN",columns:[{source:Ae.columnName,target:Me.columnName}]}]})})},me=(Ae,Me)=>g(void 0,void 0,void 0,function*(){const xe=yield getTableInfo({conid:E,database:A,pureName:Me.refTableName,schemaName:Me.refSchemaName}),Qe=`${xe.pureName}-${uuidv1()}`;V(rt=>{const ot=(rt.tables||[]).find(kt=>kt.designerId==Ae);if(!ot)return rt;const ft=et(xe,rt.tables);return ft&&!(T!=null&&T.allowTableAlias)?rt:Object.assign(Object.assign({},rt),{tables:[...rt.tables||[],Object.assign(Object.assign({},xe),{left:ot.left+300,top:ot.top+50,designerId:Qe,alias:ft})],references:T!=null&&T.allowCreateRefByDrag?[...rt.references||[],{designerId:uuidv1(),sourceId:ot.designerId,targetId:Qe,joinType:"INNER JOIN",columns:Me.columns.map(kt=>({source:kt.columnName,target:kt.refColumnName}))}]:rt.references})}),z()}),ue=(Ae,Me,xe)=>{var Qe;const rt=(Qe=Ae.tables)===null||Qe===void 0?void 0:Qe.find(ft=>ft.pureName==Me.pureName&&ft.schemaName==Me.schemaName);if(!rt)return;const ot=[];for(const ft of rt.foreignKeys||[])if(![...xe.tables,...ot].find($t=>$t.pureName==ft.refTableName&&$t.schemaName==ft.refSchemaName)){const $t=Ae.tables.find(Lt=>Lt.pureName==ft.refTableName&&Lt.schemaName==ft.refSchemaName);$t&&ot.push($t)}for(const ft of rt.dependencies||[])if(![...xe.tables,...ot].find($t=>$t.pureName==ft.pureName&&$t.schemaName==ft.schemaName)){const $t=Ae.tables.find(Lt=>Lt.pureName==ft.pureName&&Lt.schemaName==ft.schemaName);$t&&ot.push($t)}return Object.assign(Object.assign({},xe),{tables:[...xe.tables,...ot.map(ft=>Object.assign(Object.assign({},ft),{designerId:`${ft.pureName}-${uuidv1()}`,needsArrange:!0}))]})},he=Ae=>g(void 0,void 0,void 0,function*(){var Me;if(!n)return;const xe=n;if(!xe)return;V(rt=>ue(xe,Ae,rt)),z(),yield tick();const Qe=(Me=W[Ae.designerId])===null||Me===void 0?void 0:Me.getRect();Ee(!0,!1,Qe?{x:(Qe.left+Qe.right)/2,y:(Qe.top+Qe.bottom)/2}:null)}),pe=Ae=>{showModal(ChooseColorModal,{onChange:Me=>{V(xe=>Object.assign(Object.assign({},xe),{tables:((xe==null?void 0:xe.tables)||[]).map(Qe=>Qe.isSelectedTable?Object.assign(Object.assign({},Qe),{tableColor:Me}):Qe)}))}})},Oe=Ae=>g(void 0,void 0,void 0,function*(){Ae&&(V(Me=>{for(const xe of(Me==null?void 0:Me.tables)||[])xe.autoAddReferences&&(Me=ue(Ae,xe,Me));return Object.assign(Object.assign({},Me),{autoLayout:!1,tables:((Me==null?void 0:Me.tables)||[]).map(xe=>Object.assign(Object.assign({},xe),{autoAddReferences:!1}))})}),z(),yield tick(),Ee())}),qe=Ae=>{V(Me=>Object.assign(Object.assign({},Me),{columns:(Me.columns||[]).find(xe=>xe.designerId==Ae.designerId&&xe.columnName==Ae.columnName)?Me.columns:[...cleanupDesignColumns(Me.columns),_.pick(Ae,["designerId","columnName"])]}),!0)},et=(Ae,Me)=>{const xe=(Me||[]).map(rt=>rt.alias||rt.pureName);if(!xe.includes(Ae.pureName))return null;let Qe=2;for(;xe.includes(`${Ae.pureName}${Qe}`);)Qe+=1;return`${Ae.pureName}${Qe}`},Ue=(Ae,Me)=>{V(xe=>{const Qe=(xe||{}).columns||[],rt=Qe.find(ot=>ot.designerId==Ae.designerId&&ot.columnName==Ae.columnName);return rt?Object.assign(Object.assign({},xe),{columns:Qe.map(ot=>ot==rt?Me(rt):ot)}):Object.assign(Object.assign({},xe),{columns:[...cleanupDesignColumns(Qe),Me(_.pick(Ae,["designerId","columnName"]))]})})},fe=Ae=>{var Me=Ae.dataTransfer.getData("app_object_drag_data");if(Ae.preventDefault(),!Me)return;const xe=Ae.target.getBoundingClientRect();var Qe=JSON.parse(Me);const{objectTypeField:rt}=Qe;rt!="tables"&&rt!="views"&&rt!="collections"||(Qe.designerId=`${Qe.pureName}-${uuidv1()}`,Qe.left=Ae.clientX-xe.left,Qe.top=Ae.clientY-xe.top,V(ot=>{const ft=T!=null&&T.useDatabaseReferences?[]:_.compact([...(Qe.foreignKeys||[]).map($t=>{const Lt=((ot||{}).tables||[]).filter(Ut=>$t.refTableName==Ut.pureName&&$t.refSchemaName==Ut.schemaName);return Lt.length==1?Object.assign(Object.assign({},$t),{sourceId:Qe.designerId,targetId:Lt[0].designerId}):null}),..._.flatten(((ot||{}).tables||[]).map($t=>($t.foreignKeys||[]).map(Lt=>Lt.refTableName==Qe.pureName&&Lt.refSchemaName==Qe.schemaName?Object.assign(Object.assign({},Lt),{sourceId:$t.designerId,targetId:Qe.designerId}):null)))]),kt=et(Qe,ot==null?void 0:ot.tables);return kt&&!(T!=null&&T.allowTableAlias)?ot:Object.assign(Object.assign({},ot),{tables:[...(ot||{}).tables||[],Object.assign(Object.assign({},Qe),{alias:kt})],references:ft.length==1?[...(ot||{}).references||[],{designerId:`${ot==null?void 0:ot.pureName}-${uuidv1()}`,sourceId:ft[0].sourceId,targetId:ft[0].targetId,joinType:"INNER JOIN",columns:ft[0].columns.map($t=>({source:$t.columnName,target:$t.refColumnName}))}]:(ot||{}).references})}),z())};function Ie(Ae){for(const Me of _.values(U)){const xe=Me;xe!=null&&xe.isSelected()&&Ae(xe)}}const We=()=>{Ie(Ae=>Ae.moveStart())},$e=(Ae,Me)=>{Ie(xe=>xe.move(Ae,Me)),tick().then(Be)},Le=()=>{const Ae={};Ie(Me=>{Ae[Me.getDesignerId()]=Me.moveEnd()}),V(Me=>Object.assign(Object.assign({},Me),{tables:((Me==null?void 0:Me.tables)||[]).map(xe=>{const Qe=Ae[xe.designerId];return Qe?Object.assign(Object.assign({},xe),{left:Qe.left,top:Qe.top}):xe})})),tick().then(Be)},ze=(Ae,Me)=>{t(12,M={x:Ae/s,y:Me/s})},re=(Ae,Me,xe,Qe)=>{t(13,F={x:xe/s,y:Qe/s})},ge=(Ae,Me)=>{if(M&&F){const xe={left:Math.min(M.x,F.x),right:Math.max(M.x,F.x),top:Math.min(M.y,F.y),bottom:Math.max(M.y,F.y)};V(Qe=>Object.assign(Object.assign({},Qe),{tables:(Qe.tables||[]).map(rt=>{const ft=W[rt.designerId].getRect();return Object.assign(Object.assign({},rt),{isSelectedTable:rectanglesHaveIntersection(ft,xe)})})}),!0)}t(12,M=null),t(13,F=null)};function Be(){for(const Ae of Object.values(G))Ae&&Ae.recomputePosition()}function Ze(){return!!(T!=null&&T.arrangeAlg)}function Pe(){return T==null?void 0:T.canExport}function Ee(Ae=!1,Me=!0,xe={x:0,y:0}){const Qe=new GraphDefinition;for(const ot of(y==null?void 0:y.tables)||[]){const ft=W[ot.designerId];if(!ft)continue;const kt=ft.getRect();Qe.addNode(ot.designerId,kt.right-kt.left,kt.bottom-kt.top,Me||ot.needsArrange?null:{x:(kt.left+kt.right)/2,y:(kt.top+kt.bottom)/2})}for(const ot of T!=null&&T.sortAutoLayoutReferences?T==null?void 0:T.sortAutoLayoutReferences(y==null?void 0:y.references):y==null?void 0:y.references)Qe.addEdge(ot.sourceId,ot.targetId);Qe.initialize();let rt;switch(T==null?void 0:T.arrangeAlg){case"springy":rt=GraphLayout.createCircle(Qe,xe).springyAlg().solveOverlaps().fixViewBox();break;case"tree":rt=GraphLayout.createTree(Qe,y==null?void 0:y.rootDesignerId);break}rt&&V(ot=>Object.assign(Object.assign({},ot),{tables:((ot==null?void 0:ot.tables)||[]).map(ft=>{const kt=rt.nodes[ft.designerId];return kt?Object.assign(Object.assign({},ft),{needsArrange:!1,left:kt.left,top:kt.top}):Object.assign(Object.assign({},ft),{needsArrange:!1})})}),Ae,{isCalledFromArrange:!0})}function Ce(){return g(this,void 0,void 0,function*(){const Ae=["global.css","build/bundle.css"];let Me="";for(const xe of Ae){const rt=yield(yield fetch(xe)).text();Me&&(Me+=`
`),Me+=rt}d!=null&&d.themeCss&&(Me&&(Me+=`
`),Me+=d==null?void 0:d.themeCss),saveFileToDisk(xe=>g(this,void 0,void 0,function*(){yield apiCall("files/export-diagram",{filePath:xe,html:I.outerHTML,css:Me,themeType:d==null?void 0:d.themeType,themeClassName:d==null?void 0:d.themeClassName})}))})}const je=(Ae,Me)=>()=>{V(xe=>Object.assign(Object.assign({},xe),{style:Object.assign(Object.assign({},xe==null?void 0:xe.style),{[Ae]:Me})}))};function pt(){var Ae,Me,xe,Qe,rt,ot;return[k,(T==null?void 0:T.customizeStyle)&&[{divider:!0},{text:"Column properties",submenu:[{text:`Nullability: ${!((Ae=y==null?void 0:y.style)===null||Ae===void 0)&&Ae.showNullability?"YES":"NO"}`,onClick:je("showNullability",!(!((Me=y==null?void 0:y.style)===null||Me===void 0)&&Me.showNullability))},{text:`Data type: ${!((xe=y==null?void 0:y.style)===null||xe===void 0)&&xe.showDataType?"YES":"NO"}`,onClick:je("showDataType",!(!((Qe=y==null?void 0:y.style)===null||Qe===void 0)&&Qe.showDataType))}]},{text:`Columns - ${_.startCase(((rt=y==null?void 0:y.style)===null||rt===void 0?void 0:rt.filterColumns)||"all")}`,submenu:[{text:"All",onClick:je("filterColumns",null)},{text:"Primary Key",onClick:je("filterColumns","primaryKey")},{text:"All Keys",onClick:je("filterColumns","allKeys")},{text:"Not Null",onClick:je("filterColumns","notNull")},{text:"Keys And Not Null",onClick:je("filterColumns","keysAndNotNull")}]},{text:`Zoom - ${(((ot=y==null?void 0:y.style)===null||ot===void 0?void 0:ot.zoomKoef)||1)*100}%`,submenu:[{text:"10 %",onClick:je("zoomKoef",.1)},{text:"15 %",onClick:je("zoomKoef",.15)},{text:"20 %",onClick:je("zoomKoef",.2)},{text:"40 %",onClick:je("zoomKoef",.4)},{text:"60 %",onClick:je("zoomKoef",.6)},{text:"80 %",onClick:je("zoomKoef",.8)},{text:"100 %",onClick:je("zoomKoef",1)},{text:"120 %",onClick:je("zoomKoef",1.2)},{text:"140 %",onClick:je("zoomKoef",1.4)},{text:"160 %",onClick:je("zoomKoef",1.6)},{text:"180 %",onClick:je("zoomKoef",1.8)},{text:"200 %",onClick:je("zoomKoef",2)}]}]]}function wt(Ae,Me){binding_callbacks[Ae?"unshift":"push"](()=>{G[Me.designerId]=Ae,t(14,G)})}function ut(Ae,Me){binding_callbacks[Ae?"unshift":"push"](()=>{U[Me.designerId]=Ae,t(6,U)})}function Ct(Ae){binding_callbacks[Ae?"unshift":"push"](()=>{I=Ae,t(9,I)})}const xt=Ae=>{Ae.button==0&&(T!=null&&T.canSelectTables)&&V(Me=>({...Me,tables:(Me.tables||[]).map(xe=>({...xe,isSelectedTable:!1}))}),!0)};function ht(Ae){D=Ae,t(5,D)}function Rt(Ae){D=Ae,t(5,D)}return o.$$set=Ae=>{"value"in Ae&&t(0,y=Ae.value),"onChange"in Ae&&t(44,C=Ae.onChange),"conid"in Ae&&t(1,E=Ae.conid),"database"in Ae&&t(2,A=Ae.database),"menu"in Ae&&t(45,k=Ae.menu),"settings"in Ae&&t(3,T=Ae.settings),"referenceComponent"in Ae&&t(4,$=Ae.referenceComponent)},o.$$.update=()=>{o.$$.dirty[1]&25165824&&t(53,n=p?lib.extendDatabaseInfoFromApps(p,f):null),o.$$.dirty[0]&1&&t(8,r=y==null?void 0:y.tables),o.$$.dirty[0]&1&&t(18,a=y==null?void 0:y.references),o.$$.dirty[0]&9|o.$$.dirty[1]&3145728&&t(15,s=T!=null&&T.customizeStyle&&(!(t(51,b=y==null?void 0:y.style)===null||b===void 0)&&b.zoomKoef)?t(52,v=y==null?void 0:y.style)===null||v===void 0?void 0:v.zoomKoef:1),o.$$.dirty[0]&256&&t(16,u=r.filter(Ae=>Ae.isSelectedTable).length>=2),o.$$.dirty[0]&64&&q(),o.$$.dirty[1]&4194304&&n&&z(n),o.$$.dirty[0]&384&&Y(r,W),o.$$.dirty[0]&1|o.$$.dirty[1]&4194304&&n&&y!=null&&y.autoLayout&&Oe(n),o.$$.dirty[0]&32&&tick().then(()=>{Be(),q()})},h(t(17,l=useUsedApps())),[y,E,A,T,$,D,U,W,r,I,R,N,M,F,G,s,u,l,a,x,B,K,V,J,Q,X,ie,ce,de,se,me,he,pe,qe,Ue,fe,We,$e,Le,ze,re,ge,Be,pt,C,k,S,Ze,Pe,Ee,Ce,b,v,n,f,p,wt,ut,Ct,xt,ht,Rt]}class Designer extends SvelteComponent{constructor(e){super(),init(this,e,instance$1d,create_fragment$1e,safe_not_equal,{value:0,onChange:44,conid:1,database:2,menu:45,settings:3,referenceComponent:4,activator:46,canArrange:47,canExport:48,arrange:49,exportDiagram:50},null,[-1,-1,-1])}get activator(){return this.$$.ctx[46]}get canArrange(){return this.$$.ctx[47]}get canExport(){return this.$$.ctx[48]}get arrange(){return this.$$.ctx[49]}get exportDiagram(){return this.$$.ctx[50]}}const QueryDesignerReference_svelte_svelte_type_style_lang="";function get_each_context$d(o,e,t){const n=o.slice();return n[16]=e[t],n}function create_if_block$B(o){var g,b;let e,t,n,r,a,s,l=((g=o[1])!=null&&g.createReferenceText?(b=o[1])==null?void 0:b.createReferenceText(o[0]):"")+"",u,d,f,m,h=ensure_array_like(o[5]),p=[];for(let v=0;v<h.length;v+=1)p[v]=create_each_block$d(get_each_context$d(o,h,v));return{c(){e=svg_element("svg"),t=svg_element("polyline");for(let v=0;v<p.length;v+=1)p[v].c();r=space(),a=element("div"),s=element("div"),u=text(l),attr(t,"points",n=`
      ${o[2].x},${o[2].y}
      ${o[2].x+o[7]*o[4].dirsrc},${o[2].y}
      ${o[3].x+o[7]*o[4].dirdst},${o[3].y}
      ${o[3].x},${o[3].y}
  `),attr(t,"class","svelte-1k22hy3"),attr(e,"class","svelte-1k22hy3"),attr(s,"class","text svelte-1k22hy3"),attr(a,"class","wrapper svelte-1k22hy3"),attr(a,"style",d=`left: ${(o[2].x+o[7]*o[4].dirsrc+o[3].x+o[7]*o[4].dirdst)/2-16}px;
            top: ${(o[2].y+o[3].y)/2-16}px`)},m(v,y){insert(v,e,y),append(e,t);for(let C=0;C<p.length;C+=1)p[C]&&p[C].m(e,null);insert(v,r,y),insert(v,a,y),append(a,s),append(s,u),f||(m=action_destroyer(contextMenu.call(null,a,o[8])),f=!0)},p(v,y){var C,E;if(y&156&&n!==(n=`
      ${v[2].x},${v[2].y}
      ${v[2].x+v[7]*v[4].dirsrc},${v[2].y}
      ${v[3].x+v[7]*v[4].dirdst},${v[3].y}
      ${v[3].x},${v[3].y}
  `)&&attr(t,"points",n),y&124){h=ensure_array_like(v[5]);let A;for(A=0;A<h.length;A+=1){const k=get_each_context$d(v,h,A);p[A]?p[A].p(k,y):(p[A]=create_each_block$d(k),p[A].c(),p[A].m(e,null))}for(;A<p.length;A+=1)p[A].d(1);p.length=h.length}y&3&&l!==(l=((C=v[1])!=null&&C.createReferenceText?(E=v[1])==null?void 0:E.createReferenceText(v[0]):"")+"")&&set_data(u,l),y&156&&d!==(d=`left: ${(v[2].x+v[7]*v[4].dirsrc+v[3].x+v[7]*v[4].dirdst)/2-16}px;
            top: ${(v[2].y+v[3].y)/2-16}px`)&&attr(a,"style",d)},d(v){v&&(detach(e),detach(r),detach(a)),destroy_each(p,v),f=!1,m()}}}function create_each_block$d(o){let e,t,n,r;return{c(){e=svg_element("polyline"),n=svg_element("polyline"),attr(e,"points",t=`
  ${o[2].x},${o[2].y}
  ${o[2].x},${o[16][0]}
  ${o[2].x-o[6]*o[4].dirsrc},${o[16][0]}
`),attr(e,"class","svelte-1k22hy3"),attr(n,"points",r=`
  ${o[3].x},${o[3].y}
  ${o[3].x},${o[16][1]}
  ${o[3].x-o[6]*o[4].dirdst},${o[16][1]}
`),attr(n,"class","svelte-1k22hy3")},m(a,s){insert(a,e,s),insert(a,n,s)},p(a,s){s&116&&t!==(t=`
  ${a[2].x},${a[2].y}
  ${a[2].x},${a[16][0]}
  ${a[2].x-a[6]*a[4].dirsrc},${a[16][0]}
`)&&attr(e,"points",t),s&120&&r!==(r=`
  ${a[3].x},${a[3].y}
  ${a[3].x},${a[16][1]}
  ${a[3].x-a[6]*a[4].dirdst},${a[16][1]}
`)&&attr(n,"points",r)},d(a){a&&(detach(e),detach(n))}}}function create_fragment$1d(o){let e,t=o[2]&&o[3]&&o[4]&&create_if_block$B(o);return{c(){t&&t.c(),e=empty()},m(n,r){t&&t.m(n,r),insert(n,e,r)},p(n,[r]){n[2]&&n[3]&&n[4]?t?t.p(n,r):(t=create_if_block$B(n),t.c(),t.m(e.parentNode,e)):t&&(t.d(1),t=null)},i:noop$1,o:noop$1,d(n){n&&detach(e),t&&t.d(n)}}}const BUSWI=10,EXTWI=25;function instance$1c(o,e,t){let n,r;var a,s;let{reference:l}=e,{onRemoveReference:u}=e,{onChangeReference:d}=e,{designer:f}=e,{domTables:m}=e,{settings:h}=e,p=null,g=null,b,v=[];function y(){const{designerId:E,sourceId:A,targetId:k,columns:T,joinType:$}=l,S=m[A],I=m[k];if(!S||!I)return null;const R=S.getRect(),N=I.getRect();if(!R||!N)return null;const M=[];M.push({xsrc:R.left-n,dirsrc:-1,xdst:N.left-n,dirdst:-1}),M.push({xsrc:R.left-n,dirsrc:-1,xdst:N.right+n,dirdst:1}),M.push({xsrc:R.right+n,dirsrc:1,xdst:N.left-n,dirdst:-1}),M.push({xsrc:R.right+n,dirsrc:1,xdst:N.right+n,dirdst:1}),t(4,b=_.minBy(M,x=>Math.abs(x.xsrc-x.xdst)));let F=_.mean(T.map(x=>S.getColumnY(x.source))),D=_.mean(T.map(x=>I.getColumnY(x.target)));T.length==0&&(F=S.getColumnY(""),D=I.getColumnY("")),t(2,p={x:b.xsrc,y:F}),t(3,g={x:b.xdst,y:D}),t(5,v=T.map((x,B)=>{const K=S.getColumnY(x.source),U=I.getColumnY(x.target);return[K,U]}))}function C(){if(h!=null&&h.referenceMenu)return h==null?void 0:h.referenceMenu({designer:f,reference:l,onChangeReference:d,onRemoveReference:u})}return o.$$set=E=>{"reference"in E&&t(0,l=E.reference),"onRemoveReference"in E&&t(9,u=E.onRemoveReference),"onChangeReference"in E&&t(10,d=E.onChangeReference),"designer"in E&&t(11,f=E.designer),"domTables"in E&&t(12,m=E.domTables),"settings"in E&&t(1,h=E.settings)},o.$$.update=()=>{o.$$.dirty&16386&&t(6,n=(t(14,a=h==null?void 0:h.referencePaintSettings)===null||a===void 0?void 0:a.buswi)||BUSWI),o.$$.dirty&32770&&t(7,r=(t(15,s=h==null?void 0:h.referencePaintSettings)===null||s===void 0?void 0:s.extwi)||EXTWI),o.$$.dirty&4096&&y()},[l,h,p,g,b,v,n,r,C,u,d,f,m,y,a,s]}class QueryDesignerReference extends SvelteComponent{constructor(e){super(),init(this,e,instance$1c,create_fragment$1d,safe_not_equal,{reference:0,onRemoveReference:9,onChangeReference:10,designer:11,domTables:12,settings:1,recomputePosition:13})}get recomputePosition(){return this.$$.ctx[13]}}function create_fragment$1c(o){let e,t;const n=[o[0],{settings:{showTableCloseButton:!0,allowColumnOperations:!0,allowCreateRefByDrag:!0,allowTableAlias:!0,allowScrollColumns:!0,canSelectColumns:!0,referenceMenu:o[1],createReferenceText:o[2]}},{referenceComponent:QueryDesignerReference}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new Designer({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&1?get_spread_update(n,[s&1&&get_spread_object(a[0]),s&0&&{settings:{showTableCloseButton:!0,allowColumnOperations:!0,allowCreateRefByDrag:!0,allowTableAlias:!0,allowScrollColumns:!0,canSelectColumns:!0,referenceMenu:a[1],createReferenceText:a[2]}},s&0&&{referenceComponent:QueryDesignerReference}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$1b(o,e,t){const n=({designer:a,reference:s,onChangeReference:l,onRemoveReference:u})=>{const d=isConnectedByReference(a,{designerId:s==null?void 0:s.sourceId},{designerId:s==null?void 0:s.targetId},s),f=m=>{l({...s,joinType:m})};return[{text:"Remove",onClick:()=>u(s)},!d&&[{divider:!0},{onClick:()=>f("INNER JOIN"),text:"Set INNER JOIN"},{onClick:()=>f("LEFT JOIN"),text:"Set LEFT JOIN"},{onClick:()=>f("RIGHT JOIN"),text:"Set RIGHT JOIN"},{onClick:()=>f("FULL OUTER JOIN"),text:"Set FULL OUTER JOIN"},{onClick:()=>f("CROSS JOIN"),text:"Set CROSS JOIN"},{onClick:()=>f("WHERE EXISTS"),text:"Set WHERE EXISTS"},{onClick:()=>f("WHERE NOT EXISTS"),text:"Set WHERE NOT EXISTS"}]]},r=a=>_.snakeCase((a==null?void 0:a.joinType)||"CROSS JOIN").replace("_","").replace("_","");return o.$$set=a=>{t(0,e=assign(assign({},e),exclude_internal_props(a)))},e=exclude_internal_props(e),[e,n,r]}class QueryDesigner extends SvelteComponent{constructor(e){super(),init(this,e,instance$1b,create_fragment$1c,safe_not_equal,{})}}const QueryDesignColumns_svelte_svelte_type_style_lang="";function create_else_block$f(o){let e=o[25].columnName+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&33554432&&e!==(e=n[25].columnName+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_4$9(o){let e,t;function n(...r){return o[23](o[25],...r)}return e=new TextField({props:{style:"min-width:calc(100% - 9px)",value:o[25].customExpression}}),e.$on("input",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554432&&(s.value=o[25].customExpression),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__8_slot(o){let e,t,n,r;const a=[create_if_block_4$9,create_else_block$f],s=[];function l(u,d){return u[25].isCustomExpression?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create__0_slot$1(o){let e,t;function n(...r){return o[22](o[25],...r)}return e=new CheckboxField({props:{checked:o[25].isOutput}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554432&&(s.checked=o[25].isOutput),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__1_slot$b(o){let e,t;function n(...r){return o[21](o[25],...r)}return e=new TextField({props:{style:"min-width:calc(100% - 9px)",value:o[25].alias}}),e.$on("input",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554432&&(s.value=o[25].alias),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__2_slot$a(o){let e,t;function n(...r){return o[20](o[25],...r)}return e=new CheckboxField({props:{checked:o[25].isGrouped}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554432&&(s.checked=o[25].isGrouped),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block_3$9(o){let e,t;function n(...r){return o[19](o[25],...r)}return e=new SelectField({props:{isNative:!0,style:"min-width:calc(100% - 9px)",value:o[25].aggregate,options:["---","MIN","MAX","COUNT","COUNT DISTINCT","SUM","AVG"].map(func_1$7)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554432&&(s.value=o[25].aggregate),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__3_slot$2(o){let e,t,n=!o[25].isGrouped&&create_if_block_3$9(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[25].isGrouped?n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()):n?(n.p(r,a),a&33554432&&transition_in(n,1)):(n=create_if_block_3$9(r),n.c(),transition_in(n,1),n.m(e.parentNode,e))},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create__4_slot$1(o){var r;let e,t;function n(...a){return o[18](o[25],...a)}return e=new SelectField({props:{isNative:!0,style:"min-width:calc(100% - 9px)",value:(r=o[25].sortOrder)==null?void 0:r.toString(),options:[{label:"---",value:"0"},{label:"1st, ascending",value:"1"},{label:"1st, descending",value:"-1"},{label:"2nd, ascending",value:"2"},{label:"2nd, descending",value:"-2"},{label:"3rd, ascending",value:"3"},{label:"3rd, descending",value:"-3"},{label:"4th, ascending",value:"4"},{label:"4th, descending",value:"-4"},{label:"5th, ascending",value:"5"},{label:"5th, descending",value:"-5"},{label:"6th, ascending",value:"6"},{label:"6th, descending",value:"-6"},{label:"7th, ascending",value:"7"},{label:"7th, descending",value:"-7"},{label:"8th, ascending",value:"8"},{label:"8th, descending",value:"-8"},{label:"9th, ascending",value:"9"},{label:"9th, descending",value:"-9"},{label:"10th, ascending",value:"10"},{label:"10th, descending",value:"-10"}]}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;o=a;const l={};s&33554432&&(l.value=(u=o[25].sortOrder)==null?void 0:u.toString()),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create__5_slot$1(o){let e,t;function n(...r){return o[17](o[25],o[26],...r)}return e=new DataFilterControl({props:{filterType:findDesignerFilterType(o[25],o[0]),filter:o[25][o[26]],setFilter:n}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a&33554433&&(s.filterType=findDesignerFilterType(o[25],o[0])),a&100663296&&(s.filter=o[25][o[26]]),a&100663296&&(s.setFilter=n),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$a(o){let e,t;return e=new FontIcon({props:{icon:"icon delete"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$i(o){let e,t;return e=new FontIcon({props:{icon:"icon arrow-up"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$x(o){let e,t;return e=new FontIcon({props:{icon:"icon arrow-down"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__7_slot(o){let e,t,n,r,a,s,l;function u(){return o[14](o[25])}t=new InlineButton({props:{square:!0,$$slots:{default:[create_default_slot_2$a]},$$scope:{ctx:o}}}),t.$on("click",u);function d(){return o[15](o[25])}r=new InlineButton({props:{square:!0,$$slots:{default:[create_default_slot_1$i]},$$scope:{ctx:o}}}),r.$on("click",d);function f(){return o[16](o[25])}return s=new InlineButton({props:{square:!0,$$slots:{default:[create_default_slot$x]},$$scope:{ctx:o}}}),s.$on("click",f),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"class","flex")},m(m,h){insert(m,e,h),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),l=!0},p(m,h){o=m;const p={};h&134217728&&(p.$$scope={dirty:h,ctx:o}),t.$set(p);const g={};h&134217728&&(g.$$scope={dirty:h,ctx:o}),r.$set(g);const b={};h&134217728&&(b.$$scope={dirty:h,ctx:o}),s.$set(b)},i(m){l||(transition_in(t.$$.fragment,m),transition_in(r.$$.fragment,m),transition_in(s.$$.fragment,m),l=!0)},o(m){transition_out(t.$$.fragment,m),transition_out(r.$$.fragment,m),transition_out(s.$$.fragment,m),l=!1},d(m){m&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s)}}}function create_if_block_2$c(o){let e,t;return e=new FormStyledButton({props:{value:"Remove OR condition",style:"width:200px"}}),e.$on("click",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$n(o){let e,t;return e=new FormStyledButton({props:{value:"Add group OR condition",style:"width:200px"}}),e.$on("click",o[11]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$A(o){let e,t;return e=new FormStyledButton({props:{value:"Remove group OR condition",style:"width:200px"}}),e.$on("click",o[12]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$1b(o){var g,b,v,y;let e,t,n,r,a,s,l,u,d,f;t=new TableControl({props:{rows:o[1]||[],columns:[{fieldName:"columnName",slot:8,header:"Column/Expression"},{fieldName:"tableDisplayName",header:"Table",formatter:o[24]},{fieldName:"isOutput",header:"Output",slot:0},{fieldName:"alias",header:"Alias",slot:1},{fieldName:"isGrouped",header:"Group by",slot:2},{fieldName:"aggregate",header:"Aggregate",slot:3},{fieldName:"sortOrder",header:"Sort order",slot:4},{fieldName:"filter",header:"Filter",slot:5,props:{filterField:"filter"}},..._.range(((g=o[3])==null?void 0:g.additionalFilterCount)||0).map(func_3$2),o[2]&&{fieldName:"groupFilter",header:"Group filter",slot:5,props:{filterField:"groupFilter"}},..._.range(o[2]&&((b=o[3])==null?void 0:b.additionalGroupFilterCount)||0).map(func_4$1),{fieldName:"actions",header:"",slot:7}],$$slots:{7:[create__7_slot,({row:C})=>({25:C}),({row:C})=>C?33554432:0],5:[create__5_slot$1,({row:C,filterField:E})=>({25:C,26:E}),({row:C,filterField:E})=>(C?33554432:0)|(E?67108864:0)],4:[create__4_slot$1,({row:C})=>({25:C}),({row:C})=>C?33554432:0],3:[create__3_slot$2,({row:C})=>({25:C}),({row:C})=>C?33554432:0],2:[create__2_slot$a,({row:C})=>({25:C}),({row:C})=>C?33554432:0],1:[create__1_slot$b,({row:C})=>({25:C}),({row:C})=>C?33554432:0],0:[create__0_slot$1,({row:C})=>({25:C}),({row:C})=>C?33554432:0],8:[create__8_slot,({row:C})=>({25:C}),({row:C})=>C?33554432:0]},$$scope:{ctx:o}}}),r=new FormStyledButton({props:{value:"Add custom expression",style:"width:200px"}}),r.$on("click",o[8]),s=new FormStyledButton({props:{value:"Add OR condition",style:"width:200px"}}),s.$on("click",o[9]);let m=((v=o[3])==null?void 0:v.additionalFilterCount)>0&&create_if_block_2$c(o),h=o[2]&&create_if_block_1$n(o),p=o[2]&&((y=o[3])==null?void 0:y.additionalGroupFilterCount)>0&&create_if_block$A(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),m&&m.c(),u=space(),h&&h.c(),d=space(),p&&p.c(),attr(e,"class","wrapper svelte-ch62af")},m(C,E){insert(C,e,E),mount_component(t,e,null),append(e,n),mount_component(r,e,null),append(e,a),mount_component(s,e,null),append(e,l),m&&m.m(e,null),append(e,u),h&&h.m(e,null),append(e,d),p&&p.m(e,null),f=!0},p(C,[E]){var k,T,$,S;const A={};E&2&&(A.rows=C[1]||[]),E&28&&(A.columns=[{fieldName:"columnName",slot:8,header:"Column/Expression"},{fieldName:"tableDisplayName",header:"Table",formatter:C[24]},{fieldName:"isOutput",header:"Output",slot:0},{fieldName:"alias",header:"Alias",slot:1},{fieldName:"isGrouped",header:"Group by",slot:2},{fieldName:"aggregate",header:"Aggregate",slot:3},{fieldName:"sortOrder",header:"Sort order",slot:4},{fieldName:"filter",header:"Filter",slot:5,props:{filterField:"filter"}},..._.range(((k=C[3])==null?void 0:k.additionalFilterCount)||0).map(func_3$2),C[2]&&{fieldName:"groupFilter",header:"Group filter",slot:5,props:{filterField:"groupFilter"}},..._.range(C[2]&&((T=C[3])==null?void 0:T.additionalGroupFilterCount)||0).map(func_4$1),{fieldName:"actions",header:"",slot:7}]),E&234881025&&(A.$$scope={dirty:E,ctx:C}),t.$set(A),(($=C[3])==null?void 0:$.additionalFilterCount)>0?m?(m.p(C,E),E&8&&transition_in(m,1)):(m=create_if_block_2$c(C),m.c(),transition_in(m,1),m.m(e,u)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),C[2]?h?(h.p(C,E),E&4&&transition_in(h,1)):(h=create_if_block_1$n(C),h.c(),transition_in(h,1),h.m(e,d)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),C[2]&&((S=C[3])==null?void 0:S.additionalGroupFilterCount)>0?p?(p.p(C,E),E&12&&transition_in(p,1)):(p=create_if_block$A(C),p.c(),transition_in(p,1),p.m(e,null)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(C){f||(transition_in(t.$$.fragment,C),transition_in(r.$$.fragment,C),transition_in(s.$$.fragment,C),transition_in(m),transition_in(h),transition_in(p),f=!0)},o(C){transition_out(t.$$.fragment,C),transition_out(r.$$.fragment,C),transition_out(s.$$.fragment,C),transition_out(m),transition_out(h),transition_out(p),f=!1},d(C){C&&detach(e),destroy_component(t),destroy_component(r),destroy_component(s),m&&m.d(),h&&h.d(),p&&p.d()}}}function getTableDisplayName(o,e){const t=(e||[]).find(n=>n.designerId==o.designerId);return t?t.alias||t.pureName:""}const func_1$7=o=>({label:o,value:o}),func_3$2=o=>({fieldName:`additionalFilter${o+1}`,header:`OR Filter ${o+2}`,slot:5,props:{filterField:`additionalFilter${o+1}`}}),func_4$1=o=>({fieldName:`additionalGroupFilter${o+1}`,header:`OR group filter ${o+2}`,slot:5,props:{filterField:`additionalGroupFilter${o+1}`}});function instance$1a(o,e,t){let n,r,a,s,{value:l}=e,{onChange:u}=e;const d=M=>{u(F=>({...F,columns:(F.columns||[]).map(D=>D.designerId==M.designerId&&D.columnName==M.columnName?M:D)}))},f=M=>{u(F=>({...F,columns:(F.columns||[]).filter(D=>D.designerId!=M.designerId||D.columnName!=M.columnName)}))},m=(M,F)=>{u(D=>{var B;const x=_.findIndex(D.columns||[],K=>M.designerId==K.designerId&&M.columnName==K.columnName);if(x>=0&&x+F>=0&&x+F<((B=D.columns)==null?void 0:B.length)){let K=[...D.columns],U=K[x];return K[x]=K[x+F],K[x+F]=U,{...D,columns:K}}return D})},h=()=>{u(M=>({...M,columns:[...M.columns||[],{isCustomExpression:!0,isOutput:!0,designerId:uuidv1()}]}))},p=()=>{u(M=>{var F;return{...M,settings:{...M==null?void 0:M.settings,additionalFilterCount:(((F=M==null?void 0:M.settings)==null?void 0:F.additionalFilterCount)??0)+1}}})},g=()=>{u(M=>{var F;return{...M,settings:{...M==null?void 0:M.settings,additionalFilterCount:(((F=M==null?void 0:M.settings)==null?void 0:F.additionalFilterCount)??1)-1}}})},b=()=>{u(M=>{var F;return{...M,settings:{...M==null?void 0:M.settings,additionalGroupFilterCount:(((F=M==null?void 0:M.settings)==null?void 0:F.additionalGroupFilterCount)??0)+1}}})},v=()=>{u(M=>{var F;return{...M,settings:{...M==null?void 0:M.settings,additionalGroupFilterCount:(((F=M==null?void 0:M.settings)==null?void 0:F.additionalGroupFilterCount)??1)-1}}})},y=M=>f(M),C=M=>m(M,-1),E=M=>m(M,1),A=(M,F,D)=>{d({...M,[F]:D})},k=(M,F)=>{d({...M,sortOrder:parseInt(F.detail)})},T=(M,F)=>{d({...M,aggregate:F.detail})},$=(M,F)=>{F.target.checked?d({...M,isGrouped:!0}):d({...M,isGrouped:!1})},S=(M,F)=>{d({...M,alias:F.target.value})},I=(M,F)=>{F.target.checked?d({...M,isOutput:!0}):d({...M,isOutput:!1})},R=(M,F)=>{d({...M,customExpression:F.target.value})},N=M=>getTableDisplayName(M,r);return o.$$set=M=>{"value"in M&&t(0,l=M.value),"onChange"in M&&t(13,u=M.onChange)},o.$$.update=()=>{o.$$.dirty&1&&t(1,n=l==null?void 0:l.columns),o.$$.dirty&1&&t(4,r=l==null?void 0:l.tables),o.$$.dirty&1&&t(3,a=l==null?void 0:l.settings),o.$$.dirty&2&&t(2,s=!!(n||[]).find(M=>M.isGrouped))},[l,n,s,a,r,d,f,m,h,p,g,b,v,u,y,C,E,A,k,T,$,S,I,R,N]}class QueryDesignColumns extends SvelteComponent{constructor(e){super(),init(this,e,instance$1a,create_fragment$1b,safe_not_equal,{value:0,onChange:13})}}function create__1_slot$a(o){let e,t;return e=new QueryDesigner({props:{value:o[3].value||{},conid:o[0],database:o[1],engine:o[4]&&o[4].engine,onChange:o[10],menu:o[13]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&8&&(a.value=n[3].value||{}),r[0]&1&&(a.conid=n[0]),r[0]&2&&(a.database=n[1]),r[0]&16&&(a.engine=n[4]&&n[4].engine),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__0_slot(o){let e,t;return e=new SocketMessageView({props:{eventName:o[2]?`session-info-${o[2]}`:null,executeNumber:o[5],showProcedure:!0,showLine:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&4&&(a.eventName=n[2]?`session-info-${n[2]}`:null),r[0]&32&&(a.executeNumber=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$9(o){let e,t;return e=new ResultTabs({props:{tabs:[{label:"Columns",component:QueryDesignColumns,props:{value:o[3].value||{},onChange:o[10]}},{label:"SQL",component:SqlEditor,props:{engine:o[4]&&o[4].engine,readOnly:!0,value:o[7]}},o[6]&&{label:"Messages",slot:0}],sessionId:o[2],executeNumber:o[5],$$slots:{0:[create__0_slot]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&216&&(a.tabs=[{label:"Columns",component:QueryDesignColumns,props:{value:n[3].value||{},onChange:n[10]}},{label:"SQL",component:SqlEditor,props:{engine:n[4]&&n[4].engine,readOnly:!0,value:n[7]}},n[6]&&{label:"Messages",slot:0}]),r[0]&4&&(a.sessionId=n[2]),r[0]&32&&(a.executeNumber=n[5]),r[0]&36|r[1]&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$w(o){let e,t;return e=new VerticalSplitter({props:{initialValue:"70%",$$slots:{2:[create__2_slot$9],1:[create__1_slot$a]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&255|r[1]&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot$9(o){let e,t,n,r,a,s,l,u,d,f;return e=new ToolStripCommandButton({props:{command:"designer.execute"}}),n=new ToolStripCommandButton({props:{command:"designer.kill"}}),a=new ToolStripCommandButton({props:{command:"designer.openSql"}}),l=new ToolStripSaveButton({props:{idPrefix:"designer"}}),d=new ToolStripExportButton({props:{command:"jslTableGrid.export",quickExportHandlerRef:o[14],label:"Export result"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment)},m(m,h){mount_component(e,m,h),insert(m,t,h),mount_component(n,m,h),insert(m,r,h),mount_component(a,m,h),insert(m,s,h),mount_component(l,m,h),insert(m,u,h),mount_component(d,m,h),f=!0},p:noop$1,i(m){f||(transition_in(e.$$.fragment,m),transition_in(n.$$.fragment,m),transition_in(a.$$.fragment,m),transition_in(l.$$.fragment,m),transition_in(d.$$.fragment,m),f=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(n.$$.fragment,m),transition_out(a.$$.fragment,m),transition_out(l.$$.fragment,m),transition_out(d.$$.fragment,m),f=!1},d(m){m&&(detach(t),detach(r),detach(s),detach(u)),destroy_component(e,m),destroy_component(n,m),destroy_component(a,m),destroy_component(l,m),destroy_component(d,m)}}}function create_fragment$1a(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$9],default:[create_default_slot$w]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&255|r[1]&8192&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$c=()=>getActiveComponent("QueryDesignTab");registerCommand({id:"designer.openSql",category:"Designer",icon:"icon sql-file",name:"Open SQL",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>getCurrentEditor$c()!=null,onClick:()=>getCurrentEditor$c().openSql()});registerFileCommands({idPrefix:"designer",category:"Designer",getCurrentEditor:getCurrentEditor$c,folder:"query",format:"json",fileExtension:"qdesign",execute:!0,undoRedo:!0});function instance$19(o,e,t){let n,r,a,s,l,u,d=noop$1,f=()=>(d(),d=subscribe(a,he=>t(31,u=he)),a),m,h,p=noop$1,g=()=>(p(),p=subscribe(n,he=>t(4,h=he)),n);component_subscribe(o,extensions,he=>t(32,m=he)),o.$$.on_destroy.push(()=>d()),o.$$.on_destroy.push(()=>p());var b=this&&this.__awaiter||function(he,pe,Oe,qe){function et(Ue){return Ue instanceof Oe?Ue:new Oe(function(fe){fe(Ue)})}return new(Oe||(Oe=Promise))(function(Ue,fe){function Ie(Le){try{$e(qe.next(Le))}catch(ze){fe(ze)}}function We(Le){try{$e(qe.throw(Le))}catch(ze){fe(ze)}}function $e(Le){Le.done?Ue(Le.value):et(Le.value).then(Ie,We)}$e((qe=qe.apply(he,pe||[])).next())})};let{tabid:v}=e,{conid:y}=e,{database:C}=e,{initialArgs:E}=e;const A=useTimerLabel();let k=!1,T=0,$=!1,S=null,I="";const R=createActivator("QueryDesignTab",!0);function N(he){return he?(apiOn(`session-done-${he}`,V),apiOn(`session-closed-${he}`,J),()=>{apiOff(`session-done-${he}`,V),apiOff(`session-closed-${he}`,J)}):()=>{}}let M;onMount(()=>{M=setInterval(()=>{S&&apiCall("sessions/ping",{sesid:S})},15*1e3)}),onDestroy(()=>{clearInterval(M)});function F(){return!!S}function D(){return k}function x(){return v}function B(){return b(this,void 0,void 0,function*(){if(k)return;t(5,T++,T),t(6,$=!0);let he=S;he||(he=(yield apiCall("sessions/create",{conid:y,database:C})).sesid,t(2,S=he)),t(29,k=!0),A.start(),yield apiCall("sessions/execute-query",{sesid:he,sql:I})})}function K(){return b(this,void 0,void 0,function*(){yield apiCall("sessions/kill",{sesid:S}),t(2,S=null),t(29,k=!1),A.stop()})}function U(){return s.value||""}function G(){return l.canUndo}function W(){se({type:"undo"})}function q(){return l.canRedo}function H(){se({type:"redo"})}function z(){newQuery({initialData:I})}const Y=(he,pe)=>{if(!pe||!he)return;const Oe=generateDesignedQuery(he,pe);t(7,I=sqlFormatter.format(Oe))},V=()=>{t(29,k=!1),A.stop()},J=()=>{t(2,S=null),V()},Q=(he,pe)=>se({type:"compute",useMerge:pe,compute:Oe=>_.isFunction(he)?he(Oe):he}),{editorState:X,editorValue:ie,setEditorData:ce}=useEditorData({tabid:v,onInitialData:he=>{se({type:"reset",value:he})}});component_subscribe(o,X,he=>t(34,s=he));const[de,se]=createUndoReducer({tables:[],references:[],columns:[]});component_subscribe(o,de,he=>t(3,l=he));function me(){var he,pe;return[{command:"designer.execute"},{command:"designer.kill"},{command:"designer.openSql"},{divider:!0},{command:"designer.save"},{command:"designer.saveAs"},{divider:!0},{command:"designer.undo"},{command:"designer.redo"},{divider:!0},{text:`Remove duplicates: ${!((pe=(he=s.value)===null||he===void 0?void 0:he.settings)===null||pe===void 0)&&pe.isDistinct?"YES":"NO"}`,onClick:()=>{var Oe,qe,et;Q(Object.assign(Object.assign({},s.value),{settings:Object.assign(Object.assign({},(Oe=s.value)===null||Oe===void 0?void 0:Oe.settings),{isDistinct:!(!((et=(qe=s.value)===null||qe===void 0?void 0:qe.settings)===null||et===void 0)&&et.isDistinct)})}),!1)}}]}const ue=createQuickExportHandlerRef();return o.$$set=he=>{"tabid"in he&&t(15,v=he.tabid),"conid"in he&&t(0,y=he.conid),"database"in he&&t(1,C=he.database),"initialArgs"in he&&t(16,E=he.initialArgs)},o.$$.update=()=>{o.$$.dirty[0]&1&&g(t(9,n=useConnectionInfo({conid:y}))),o.$$.dirty[0]&16|o.$$.dirty[1]&2&&t(30,r=lib.findEngineDriver(h,m)),o.$$.dirty[0]&4&&f(t(8,a=useEffect(()=>N(S)))),o.$$.dirty[1]&1,o.$$.dirty[0]&536903680&&changeTab(v,he=>Object.assign(Object.assign({},he),{busy:k})),o.$$.dirty[0]&536870924&&invalidateCommands(),o.$$.dirty[0]&8&&ce(l.value),o.$$.dirty[0]&1073741832&&Y(l.value,r)},[y,C,S,l,h,T,$,I,a,n,Q,X,de,me,ue,v,E,R,F,D,x,B,K,U,G,W,q,H,z,k,r,u,m]}class QueryDesignTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$19,create_fragment$1a,safe_not_equal,{tabid:15,conid:0,database:1,initialArgs:16,activator:17,canKill:18,isBusy:19,getTabId:20,execute:21,kill:22,getData:23,canUndo:24,undo:25,canRedo:26,redo:27,openSql:28},null,[-1,-1])}get activator(){return this.$$.ctx[17]}get canKill(){return this.$$.ctx[18]}get isBusy(){return this.$$.ctx[19]}get getTabId(){return this.$$.ctx[20]}get execute(){return this.$$.ctx[21]}get kill(){return this.$$.ctx[22]}get getData(){return this.$$.ctx[23]}get canUndo(){return this.$$.ctx[24]}get undo(){return this.$$.ctx[25]}get canRedo(){return this.$$.ctx[26]}get redo(){return this.$$.ctx[27]}get openSql(){return this.$$.ctx[28]}}const QueryDesignTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:QueryDesignTab},Symbol.toStringTag,{value:"Module"}));function create_default_slot$v(o){let e,t,n,r,a,s;function l(d){o[4](d)}let u={focused:!0};return o[0]!==void 0&&(u.value=o[0]),r=new TextField({props:u}),binding_callbacks.push(()=>bind(r,"value",l)),r.$on("keydown",o[1]),{c(){e=element("div"),e.textContent="Show desired key combination and press ENTER",t=space(),n=element("div"),create_component(r.$$.fragment),attr(e,"class","mb-2"),attr(n,"class","largeFormMarker")},m(d,f){insert(d,e,f),insert(d,t,f),insert(d,n,f),mount_component(r,n,null),s=!0},p(d,f){const m={};!a&&f&1&&(a=!0,m.value=d[0],add_flush_callback(()=>a=!1)),r.$set(m)},i(d){s||(transition_in(r.$$.fragment,d),s=!0)},o(d){transition_out(r.$$.fragment,d),s=!1},d(d){d&&(detach(e),detach(t),detach(n)),destroy_component(r)}}}function create_fragment$19(o){let e,t;const n=[o[2],{simple:!0}];let r={$$slots:{default:[create_default_slot$v]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&4?get_spread_update(n,[get_spread_object(a[2]),n[1]]):{};s&33&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$18(o,e,t){const n=["onChange"];let r=compute_rest_props(e,n),{onChange:a}=e,s;function l(d){if(d.preventDefault(),d.stopPropagation(),d.keyCode==keycodes.escape){closeCurrentModal();return}if(d.keyCode==keycodes.enter&&s){a(s),closeCurrentModal();return}let f="";d.ctrlKey&&(f+="Ctrl+"),d.shiftKey&&(f+="Shift+"),d.metaKey&&(f+="Command+"),d.altKey&&(f+="Alt+"),d.key!="Control"&&d.key!="Alt"&&d.key!="Shift"&&d.key!="Meta"&&(f+=_.upperFirst(d.key)),t(0,s=f)}function u(d){s=d,t(0,s)}return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(2,r=compute_rest_props(e,n)),"onChange"in d&&t(3,a=d.onChange)},[s,l,r,a,u]}class KeyboardModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$18,create_fragment$19,safe_not_equal,{onChange:3})}}const KeyboardModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:KeyboardModal},Symbol.toStringTag,{value:"Module"})),CommandModal_svelte_svelte_type_style_lang="";function create_default_slot_1$h(o){let e,t,n,r,a,s,l,u,d;return e=new FormTextField({props:{label:"Category",name:"category",disabled:!0}}),n=new FormTextField({props:{label:"Name",name:"name",disabled:!0}}),s=new FormTextField({props:{label:"Keyboard shortcut",name:"keyText",templateProps:{noMargin:!0},focused:!0}}),u=new FormStyledButton({props:{type:"button",value:"Keyboard"}}),u.$on("click",o[3]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),attr(a,"class","row svelte-1h6n7am")},m(f,m){mount_component(e,f,m),insert(f,t,m),mount_component(n,f,m),insert(f,r,m),insert(f,a,m),mount_component(s,a,null),append(a,l),mount_component(u,a,null),d=!0},p:noop$1,i(f){d||(transition_in(e.$$.fragment,f),transition_in(n.$$.fragment,f),transition_in(s.$$.fragment,f),transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(e.$$.fragment,f),transition_out(n.$$.fragment,f),transition_out(s.$$.fragment,f),transition_out(u.$$.fragment,f),d=!1},d(f){f&&(detach(t),detach(r),detach(a)),destroy_component(e,f),destroy_component(n,f),destroy_component(s),destroy_component(u)}}}function create_header_slot$6(o){let e;return{c(){e=text("Configure commmand")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$6(o){let e,t,n,r,a,s;return e=new FormSubmit({props:{value:"OK"}}),e.$on("click",o[5]),n=new FormStyledButton({props:{type:"button",value:"Reset"}}),n.$on("click",o[6]),a=new FormStyledButton({props:{type:"button",value:"Close"}}),a.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment)},m(l,u){mount_component(e,l,u),insert(l,t,u),mount_component(n,l,u),insert(l,r,u),mount_component(a,l,u),s=!0},p:noop$1,i(l){s||(transition_in(e.$$.fragment,l),transition_in(n.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(n.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(t),detach(r)),destroy_component(e,l),destroy_component(n,l),destroy_component(a,l)}}}function create_default_slot$u(o){let e,t;const n=[o[4]];let r={$$slots:{footer:[create_footer_slot$6],header:[create_header_slot$6],default:[create_default_slot_1$h]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};s&131&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$18(o){let e,t;return e=new FormProviderCore({props:{values:o[2],$$slots:{default:[create_default_slot$u]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&147&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$17(o,e,t){const n=["command"];let r=compute_rest_props(e,n),a;component_subscribe(o,commandsSettings,m=>t(1,a=m));let{command:s}=e,l=writable(s);function u(){showModal(KeyboardModal,{onChange:m=>l.update(h=>Object.assign(Object.assign({},h),{keyText:m}))})}const d=m=>{closeCurrentModal(),apiCall("config/update-settings",{commands:{...a,[s.id]:{keyText:m.detail.keyText,customKeyboardShortcut:!0}}})},f=()=>{closeCurrentModal(),apiCall("config/update-settings",{commands:_.omit(a,[s.id])})};return o.$$set=m=>{e=assign(assign({},e),exclude_internal_props(m)),t(4,r=compute_rest_props(e,n)),"command"in m&&t(0,s=m.command)},[s,a,l,u,r,d,f]}class CommandModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$17,create_fragment$18,safe_not_equal,{command:0})}}const CommandModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:CommandModal},Symbol.toStringTag,{value:"Module"})),CommandListTab_svelte_svelte_type_style_lang="";function create_fragment$17(o){let e,t,n,r,a,s,l,u,d,f,m;function h(v){o[3](v)}let p={placeholder:"Search in commands (by category, name, shortcut or id)"};o[0]!==void 0&&(p.value=o[0]),n=new SearchInput({props:p}),binding_callbacks.push(()=>bind(n,"value",h));function g(v){o[4](v)}let b={showDisabled:!0};return o[0]!==void 0&&(b.filter=o[0]),s=new CloseSearchButton({props:b}),binding_callbacks.push(()=>bind(s,"filter",g)),f=new TableControl({props:{clickable:!0,rows:o[1].filter(o[5]),columns:[{header:"Category",fieldName:"category"},{header:"Name",fieldName:"name"},{header:"Keyboard shortcut",fieldName:"keyText",isHighlighted:func_1$6},{header:"commandId",fieldName:"id"}]}}),f.$on("clickrow",o[6]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),a=space(),create_component(s.$$.fragment),u=space(),d=element("div"),create_component(f.$$.fragment),attr(t,"class","flex"),attr(d,"class","table-wrapper svelte-1d8o0gh"),attr(e,"class","wrapper svelte-1d8o0gh")},m(v,y){insert(v,e,y),append(e,t),mount_component(n,t,null),append(t,a),mount_component(s,t,null),append(e,u),append(e,d),mount_component(f,d,null),m=!0},p(v,[y]){const C={};!r&&y&1&&(r=!0,C.value=v[0],add_flush_callback(()=>r=!1)),n.$set(C);const E={};!l&&y&1&&(l=!0,E.filter=v[0],add_flush_callback(()=>l=!1)),s.$set(E);const A={};y&3&&(A.rows=v[1].filter(v[5])),f.$set(A)},i(v){m||(transition_in(n.$$.fragment,v),transition_in(s.$$.fragment,v),transition_in(f.$$.fragment,v),m=!0)},o(v){transition_out(n.$$.fragment,v),transition_out(s.$$.fragment,v),transition_out(f.$$.fragment,v),m=!1},d(v){v&&detach(e),destroy_component(n),destroy_component(s),destroy_component(f)}}}const matchingProps$4=[],func_1$6=o=>o.customKeyboardShortcut;function instance$16(o,e,t){let n,r;component_subscribe(o,commandsCustomized,f=>t(2,r=f));let a;function s(f){a=f,t(0,a)}function l(f){a=f,t(0,a)}const u=f=>lib.filterName(a,f.category,f.name,f.keyText,f.id),d=f=>showModal(CommandModal,{command:f.detail});return o.$$.update=()=>{o.$$.dirty&4&&t(1,n=_.sortBy(_.values(r),["category","name"]))},[a,n,r,s,l,u,d]}class CommandListTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$16,create_fragment$17,safe_not_equal,{})}}const CommandListTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:CommandListTab,matchingProps:matchingProps$4},Symbol.toStringTag,{value:"Module"}));function create_fragment$16(o){let e,t,n={value:o[2].value||"",menu:createMenu$3(),mode:"yaml"};return e=new AceEditor({props:n}),o[14](e),e.$on("input",o[15]),e.$on("focus",o[16]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,[a]){const s={};a&4&&(s.value=r[2].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[14](null),destroy_component(e,r)}}}const getCurrentEditor$b=()=>getActiveComponent("YamlEditorTab");registerFileCommands({idPrefix:"yaml",category:"Yaml",getCurrentEditor:getCurrentEditor$b,folder:"yaml",format:"text",fileExtension:"yaml",toggleComment:!0,findReplace:!0});function createMenu$3(){return[{command:"yaml.toggleComment"},{divider:!0},{command:"yaml.save"},{command:"yaml.saveAs"},{divider:!0},{command:"yaml.find"},{command:"yaml.replace"}]}function instance$15(o,e,t){let n,r;var a;let{tabid:s}=e;const l=getContext("tabVisible");component_subscribe(o,l,T=>t(13,r=T));const u=createActivator("YamlEditorTab",!1);let d;function f(){return n.value||""}function m(){d.getEditor().execCommand("togglecomment")}function h(){d.getEditor().execCommand("find")}function p(){d.getEditor().execCommand("replace")}function g(){return s}const{editorState:b,editorValue:v,setEditorData:y,saveToStorage:C}=useEditorData({tabid:s});component_subscribe(o,b,T=>t(2,n=T));function E(T){binding_callbacks[T?"unshift":"push"](()=>{d=T,t(1,d)})}const A=T=>y(T.detail),k=()=>{u.activate(),invalidateCommands()};return o.$$set=T=>{"tabid"in T&&t(6,s=T.tabid)},o.$$.update=()=>{o.$$.dirty&12290&&r&&d&&(t(12,a=d==null?void 0:d.getEditor())===null||a===void 0||a.focus())},[u,d,n,l,b,y,s,f,m,h,p,g,a,r,E,A,k]}class YamlEditorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$15,create_fragment$16,safe_not_equal,{tabid:6,activator:0,getData:7,toggleComment:8,find:9,replace:10,getTabId:11})}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[7]}get toggleComment(){return this.$$.ctx[8]}get find(){return this.$$.ctx[9]}get replace(){return this.$$.ctx[10]}get getTabId(){return this.$$.ctx[11]}}const YamlEditorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:YamlEditorTab},Symbol.toStringTag,{value:"Module"}));function create_default_slot$t(o){let e,t,n={value:o[2].value||"",menu:createMenu$2(),mode:"json"};return e=new AceEditor({props:n}),o[14](e),e.$on("input",o[15]),e.$on("focus",o[16]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){const s={};a&4&&(s.value=r[2].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[14](null),destroy_component(e,r)}}}function create_toolstrip_slot$8(o){let e,t;return e=new ToolStripSaveButton({props:{idPrefix:"json"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$15(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$8],default:[create_default_slot$t]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&524294&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const getCurrentEditor$a=()=>getActiveComponent("JsonEditorTab");registerFileCommands({idPrefix:"json",category:"Json",getCurrentEditor:getCurrentEditor$a,folder:"yaml",format:"text",fileExtension:"json",toggleComment:!0,findReplace:!0});function createMenu$2(){return[{command:"json.toggleComment"},{divider:!0},{command:"json.save"},{command:"json.saveAs"},{divider:!0},{command:"json.find"},{command:"json.replace"}]}function instance$14(o,e,t){let n,r;var a;let{tabid:s}=e;const l=getContext("tabVisible");component_subscribe(o,l,T=>t(13,r=T));const u=createActivator("JsonEditorTab",!1);let d;function f(){return n.value||""}function m(){d.getEditor().execCommand("togglecomment")}function h(){d.getEditor().execCommand("find")}function p(){d.getEditor().execCommand("replace")}function g(){return s}const{editorState:b,editorValue:v,setEditorData:y,saveToStorage:C}=useEditorData({tabid:s});component_subscribe(o,b,T=>t(2,n=T));function E(T){binding_callbacks[T?"unshift":"push"](()=>{d=T,t(1,d)})}const A=T=>y(T.detail),k=()=>{u.activate(),invalidateCommands()};return o.$$set=T=>{"tabid"in T&&t(6,s=T.tabid)},o.$$.update=()=>{o.$$.dirty&12290&&r&&d&&(t(12,a=d==null?void 0:d.getEditor())===null||a===void 0||a.focus())},[u,d,n,l,b,y,s,f,m,h,p,g,a,r,E,A,k]}class JsonEditorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$14,create_fragment$15,safe_not_equal,{tabid:6,activator:0,getData:7,toggleComment:8,find:9,replace:10,getTabId:11})}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[7]}get toggleComment(){return this.$$.ctx[8]}get find(){return this.$$.ctx[9]}get replace(){return this.$$.ctx[10]}get getTabId(){return this.$$.ctx[11]}}const JsonEditorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:JsonEditorTab},Symbol.toStringTag,{value:"Module"}));function create__1_slot$9(o){let e,t,n={value:o[3].value||"",menu:createMenu$1(),mode:"json"};return e=new AceEditor({props:n}),o[21](e),e.$on("input",o[22]),e.$on("focus",o[23]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){const s={};a&8&&(s.value=r[3].value||""),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){o[21](null),destroy_component(e,r)}}}function create_if_block$z(o){let e=o[2],t,n,r=create_key_block$2(o);return{c(){r.c(),t=empty()},m(a,s){r.m(a,s),insert(a,t,s),n=!0},p(a,s){s&4&&safe_not_equal(e,e=a[2])?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block$2(a),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r.p(a,s)},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r.d(a)}}}function create_key_block$2(o){let e,t;return e=new JslDataGrid({props:{jslid:o[2],supportsReload:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.jslid=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$8(o){let e,t,n=o[2]&&create_if_block$z(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[2]?n?(n.p(r,a),a&4&&transition_in(n,1)):(n=create_if_block$z(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_default_slot$s(o){let e,t;return e=new VerticalSplitter({props:{isSplitter:o[2],$$slots:{2:[create__2_slot$8],1:[create__1_slot$9]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.isSplitter=n[2]),r&268435470&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot$7(o){let e,t,n,r,a,s;return e=new ToolStripCommandButton({props:{command:"jsonl.save"}}),n=new ToolStripCommandSplitButton({props:{commands:["jsonl.preview","jsonl.previewNewTab"]}}),a=new ToolStripCommandButton({props:{command:"jsonl.closePreview"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment)},m(l,u){mount_component(e,l,u),insert(l,t,u),mount_component(n,l,u),insert(l,r,u),mount_component(a,l,u),s=!0},p:noop$1,i(l){s||(transition_in(e.$$.fragment,l),transition_in(n.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(n.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(t),detach(r)),destroy_component(e,l),destroy_component(n,l),destroy_component(a,l)}}}function create_fragment$14(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$7],default:[create_default_slot$s]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&268435470&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$9=()=>getActiveComponent("JsonLinesEditorTab");registerFileCommands({idPrefix:"jsonl",category:"JSON Lines editor",getCurrentEditor:getCurrentEditor$9,folder:null,format:"text",fileExtension:"jsonl",save:!1,findReplace:!0});registerCommand({id:"jsonl.save",group:"save",category:"JSON Lines editor",name:"Save",toolbar:!0,isRelatedToTab:!0,icon:"icon save",testEnabled:()=>getCurrentEditor$9()!=null,onClick:()=>getCurrentEditor$9().save()});registerCommand({id:"jsonl.preview",category:"JSON Lines editor",name:"Preview",icon:"icon preview",keyText:"F5",testEnabled:()=>getCurrentEditor$9()!=null,onClick:()=>getCurrentEditor$9().preview()});registerCommand({id:"jsonl.previewNewTab",category:"JSON Lines editor",name:"Preview in new tab",icon:"icon preview",testEnabled:()=>getCurrentEditor$9()!=null,onClick:()=>getCurrentEditor$9().previewMewTab()});registerCommand({id:"jsonl.closePreview",category:"JSON Lines editor",name:"Close preview",icon:"icon close",testEnabled:()=>{var o;return(o=getCurrentEditor$9())===null||o===void 0?void 0:o.isPreview()},onClick:()=>getCurrentEditor$9().closePreview()});function createMenu$1(){return[{command:"jsonl.save"},{command:"jsonl.preview"},{divider:!0},{command:"jsonl.find"},{command:"jsonl.replace"}]}function instance$13(o,e,t){let n,r;var a=this&&this.__awaiter||function(x,B,K,U){function G(W){return W instanceof K?W:new K(function(q){q(W)})}return new(K||(K=Promise))(function(W,q){function H(V){try{Y(U.next(V))}catch(J){q(J)}}function z(V){try{Y(U.throw(V))}catch(J){q(J)}}function Y(V){V.done?W(V.value):G(V.value).then(H,z)}Y((U=U.apply(x,B||[])).next())})},s;let{tabid:l}=e,{archiveFolder:u}=e,{archiveFile:d}=e,f=null;const m=getContext("tabVisible");component_subscribe(o,m,x=>t(20,r=x));const h=createActivator("JsonLinesEditorTab",!1);let p;function g(){return n.value||""}function b(){p.getEditor().execCommand("find")}function v(){p.getEditor().execCommand("replace")}function y(){return l}function C(){return!!f}function E(){t(2,f=null)}function A(){showModal(SaveArchiveModal,{folder:u,file:d,onSave:$})}function k(){return a(this,void 0,void 0,function*(){const x=uuidv1();yield apiCall("jsldata/save-text",{jslid:x,text:n.value||""}),openNewTab({title:"Preview #",icon:"img archive",tabComponent:"ArchiveFileTab",props:{jslid:x}},void 0,{forceNewTab:!0})})}function T(){return a(this,void 0,void 0,function*(){t(2,f=uuidv1()),yield apiCall("jsldata/save-text",{jslid:f,text:n.value||""})})}const $=(x,B)=>a(void 0,void 0,void 0,function*(){yield apiCall("archive/save-text",{folder:x,file:B,text:n.value||""}),changeTab(l,K=>Object.assign(Object.assign({},K),{title:B,props:{archiveFile:B,archiveFolder:x},archiveFile:B,archiveFolder:x})),t(8,d=B),t(7,u=x)}),{editorState:S,editorValue:I,setEditorData:R,saveToStorage:N}=useEditorData({tabid:l});component_subscribe(o,S,x=>t(3,n=x));function M(x){binding_callbacks[x?"unshift":"push"](()=>{p=x,t(1,p)})}const F=x=>R(x.detail),D=()=>{h.activate(),invalidateCommands()};return o.$$set=x=>{"tabid"in x&&t(9,l=x.tabid),"archiveFolder"in x&&t(7,u=x.archiveFolder),"archiveFile"in x&&t(8,d=x.archiveFile)},o.$$.update=()=>{o.$$.dirty&1572866&&r&&p&&(t(19,s=p==null?void 0:p.getEditor())===null||s===void 0||s.focus())},[h,p,f,n,m,S,R,u,d,l,g,b,v,y,C,E,A,k,T,s,r,M,F,D]}class JsonLinesEditorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$13,create_fragment$14,safe_not_equal,{tabid:9,archiveFolder:7,archiveFile:8,activator:0,getData:10,find:11,replace:12,getTabId:13,isPreview:14,closePreview:15,save:16,previewMewTab:17,preview:18})}get activator(){return this.$$.ctx[0]}get getData(){return this.$$.ctx[10]}get find(){return this.$$.ctx[11]}get replace(){return this.$$.ctx[12]}get getTabId(){return this.$$.ctx[13]}get isPreview(){return this.$$.ctx[14]}get closePreview(){return this.$$.ctx[15]}get save(){return this.$$.ctx[16]}get previewMewTab(){return this.$$.ctx[17]}get preview(){return this.$$.ctx[18]}}const JsonLinesEditorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:JsonLinesEditorTab},Symbol.toStringTag,{value:"Module"}));function Diff(){}Diff.prototype={diff:function o(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},r=n.callback;typeof n=="function"&&(r=n,n={}),this.options=n;var a=this;function s(b){return r?(setTimeout(function(){r(void 0,b)},0),!0):b}e=this.castInput(e),t=this.castInput(t),e=this.removeEmpty(this.tokenize(e)),t=this.removeEmpty(this.tokenize(t));var l=t.length,u=e.length,d=1,f=l+u;n.maxEditLength&&(f=Math.min(f,n.maxEditLength));var m=[{newPos:-1,components:[]}],h=this.extractCommon(m[0],t,e,0);if(m[0].newPos+1>=l&&h+1>=u)return s([{value:this.join(t),count:t.length}]);function p(){for(var b=-1*d;b<=d;b+=2){var v=void 0,y=m[b-1],C=m[b+1],E=(C?C.newPos:0)-b;y&&(m[b-1]=void 0);var A=y&&y.newPos+1<l,k=C&&0<=E&&E<u;if(!A&&!k){m[b]=void 0;continue}if(!A||k&&y.newPos<C.newPos?(v=clonePath(C),a.pushComponent(v.components,void 0,!0)):(v=y,v.newPos++,a.pushComponent(v.components,!0,void 0)),E=a.extractCommon(v,t,e,b),v.newPos+1>=l&&E+1>=u)return s(buildValues(a,v.components,t,e,a.useLongestToken));m[b]=v}d++}if(r)(function b(){setTimeout(function(){if(d>f)return r();p()||b()},0)})();else for(;d<=f;){var g=p();if(g)return g}},pushComponent:function o(e,t,n){var r=e[e.length-1];r&&r.added===t&&r.removed===n?e[e.length-1]={count:r.count+1,added:t,removed:n}:e.push({count:1,added:t,removed:n})},extractCommon:function o(e,t,n,r){for(var a=t.length,s=n.length,l=e.newPos,u=l-r,d=0;l+1<a&&u+1<s&&this.equals(t[l+1],n[u+1]);)l++,u++,d++;return d&&e.components.push({count:d}),e.newPos=l,u},equals:function o(e,t){return this.options.comparator?this.options.comparator(e,t):e===t||this.options.ignoreCase&&e.toLowerCase()===t.toLowerCase()},removeEmpty:function o(e){for(var t=[],n=0;n<e.length;n++)e[n]&&t.push(e[n]);return t},castInput:function o(e){return e},tokenize:function o(e){return e.split("")},join:function o(e){return e.join("")}};function buildValues(o,e,t,n,r){for(var a=0,s=e.length,l=0,u=0;a<s;a++){var d=e[a];if(d.removed){if(d.value=o.join(n.slice(u,u+d.count)),u+=d.count,a&&e[a-1].added){var m=e[a-1];e[a-1]=e[a],e[a]=m}}else{if(!d.added&&r){var f=t.slice(l,l+d.count);f=f.map(function(p,g){var b=n[u+g];return b.length>p.length?b:p}),d.value=o.join(f)}else d.value=o.join(t.slice(l,l+d.count));l+=d.count,d.added||(u+=d.count)}}var h=e[s-1];return s>1&&typeof h.value=="string"&&(h.added||h.removed)&&o.equals("",h.value)&&(e[s-2].value+=h.value,e.pop()),e}function clonePath(o){return{newPos:o.newPos,components:o.components.slice(0)}}var characterDiff=new Diff;function diffChars(o,e,t){return characterDiff.diff(o,e,t)}var extendedWordChars=/^[A-Za-z\xC0-\u02C6\u02C8-\u02D7\u02DE-\u02FF\u1E00-\u1EFF]+$/,reWhitespace=/\S/,wordDiff=new Diff;wordDiff.equals=function(o,e){return this.options.ignoreCase&&(o=o.toLowerCase(),e=e.toLowerCase()),o===e||this.options.ignoreWhitespace&&!reWhitespace.test(o)&&!reWhitespace.test(e)};wordDiff.tokenize=function(o){for(var e=o.split(/([^\S\r\n]+|[()[\]{}'"\r\n]|\b)/),t=0;t<e.length-1;t++)!e[t+1]&&e[t+2]&&extendedWordChars.test(e[t])&&extendedWordChars.test(e[t+2])&&(e[t]+=e[t+2],e.splice(t+1,2),t--);return e};function diffWordsWithSpace(o,e,t){return wordDiff.diff(o,e,t)}var lineDiff=new Diff;lineDiff.tokenize=function(o){var e=[],t=o.split(/(\n|\r\n)/);t[t.length-1]||t.pop();for(var n=0;n<t.length;n++){var r=t[n];n%2&&!this.options.newlineIsToken?e[e.length-1]+=r:(this.options.ignoreWhitespace&&(r=r.trim()),e.push(r))}return e};function diffLines(o,e,t){return lineDiff.diff(o,e,t)}var sentenceDiff=new Diff;sentenceDiff.tokenize=function(o){return o.split(/(\S.+?[.!?])(?=\s+|$)/)};var cssDiff=new Diff;cssDiff.tokenize=function(o){return o.split(/([{}:;,]|\s+)/)};function _typeof(o){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(e){return typeof e}:_typeof=function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_typeof(o)}function _toConsumableArray(o){return _arrayWithoutHoles(o)||_iterableToArray(o)||_unsupportedIterableToArray(o)||_nonIterableSpread()}function _arrayWithoutHoles(o){if(Array.isArray(o))return _arrayLikeToArray(o)}function _iterableToArray(o){if(typeof Symbol<"u"&&Symbol.iterator in Object(o))return Array.from(o)}function _unsupportedIterableToArray(o,e){if(o){if(typeof o=="string")return _arrayLikeToArray(o,e);var t=Object.prototype.toString.call(o).slice(8,-1);if(t==="Object"&&o.constructor&&(t=o.constructor.name),t==="Map"||t==="Set")return Array.from(o);if(t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return _arrayLikeToArray(o,e)}}function _arrayLikeToArray(o,e){(e==null||e>o.length)&&(e=o.length);for(var t=0,n=new Array(e);t<e;t++)n[t]=o[t];return n}function _nonIterableSpread(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var objectPrototypeToString=Object.prototype.toString,jsonDiff=new Diff;jsonDiff.useLongestToken=!0;jsonDiff.tokenize=lineDiff.tokenize;jsonDiff.castInput=function(o){var e=this.options,t=e.undefinedReplacement,n=e.stringifyReplacer,r=n===void 0?function(a,s){return typeof s>"u"?t:s}:n;return typeof o=="string"?o:JSON.stringify(canonicalize(o,null,null,r),r,"  ")};jsonDiff.equals=function(o,e){return Diff.prototype.equals.call(jsonDiff,o.replace(/,([\r\n])/g,"$1"),e.replace(/,([\r\n])/g,"$1"))};function canonicalize(o,e,t,n,r){e=e||[],t=t||[],n&&(o=n(r,o));var a;for(a=0;a<e.length;a+=1)if(e[a]===o)return t[a];var s;if(objectPrototypeToString.call(o)==="[object Array]"){for(e.push(o),s=new Array(o.length),t.push(s),a=0;a<o.length;a+=1)s[a]=canonicalize(o[a],e,t,n,r);return e.pop(),t.pop(),s}if(o&&o.toJSON&&(o=o.toJSON()),_typeof(o)==="object"&&o!==null){e.push(o),s={},t.push(s);var l=[],u;for(u in o)o.hasOwnProperty(u)&&l.push(u);for(l.sort(),a=0;a<l.length;a+=1)u=l[a],s[u]=canonicalize(o[u],e,t,n,u);e.pop(),t.pop()}else s=o;return s}var arrayDiff=new Diff;arrayDiff.tokenize=function(o){return o.slice()};arrayDiff.join=arrayDiff.removeEmpty=function(o){return o};function structuredPatch(o,e,t,n,r,a,s){s||(s={}),typeof s.context>"u"&&(s.context=4);var l=diffLines(t,n,s);if(!l)return;l.push({value:"",lines:[]});function u(y){return y.map(function(C){return" "+C})}for(var d=[],f=0,m=0,h=[],p=1,g=1,b=function(C){var E=l[C],A=E.lines||E.value.replace(/\n$/,"").split(`
`);if(E.lines=A,E.added||E.removed){var k;if(!f){var T=l[C-1];f=p,m=g,T&&(h=s.context>0?u(T.lines.slice(-s.context)):[],f-=h.length,m-=h.length)}(k=h).push.apply(k,_toConsumableArray(A.map(function(D){return(E.added?"+":"-")+D}))),E.added?g+=A.length:p+=A.length}else{if(f)if(A.length<=s.context*2&&C<l.length-2){var $;($=h).push.apply($,_toConsumableArray(u(A)))}else{var S,I=Math.min(A.length,s.context);(S=h).push.apply(S,_toConsumableArray(u(A.slice(0,I))));var R={oldStart:f,oldLines:p-f+I,newStart:m,newLines:g-m+I,lines:h};if(C>=l.length-2&&A.length<=s.context){var N=/\n$/.test(t),M=/\n$/.test(n),F=A.length==0&&h.length>R.oldLines;!N&&F&&t.length>0&&h.splice(R.oldLines,0,"\\ No newline at end of file"),(!N&&!F||!M)&&h.push("\\ No newline at end of file")}d.push(R),f=0,m=0,h=[]}p+=A.length,g+=A.length}},v=0;v<l.length;v++)b(v);return{oldFileName:o,newFileName:e,oldHeader:r,newHeader:a,hunks:d}}function formatPatch(o){var e=[];o.oldFileName==o.newFileName&&e.push("Index: "+o.oldFileName),e.push("==================================================================="),e.push("--- "+o.oldFileName+(typeof o.oldHeader>"u"?"":"	"+o.oldHeader)),e.push("+++ "+o.newFileName+(typeof o.newHeader>"u"?"":"	"+o.newHeader));for(var t=0;t<o.hunks.length;t++){var n=o.hunks[t];n.oldLines===0&&(n.oldStart-=1),n.newLines===0&&(n.newStart-=1),e.push("@@ -"+n.oldStart+","+n.oldLines+" +"+n.newStart+","+n.newLines+" @@"),e.push.apply(e,n.lines)}return e.join(`
`)+`
`}function createTwoFilesPatch(o,e,t,n,r,a,s){return formatPatch(structuredPatch(o,e,t,n,r,a,s))}var LineType;(function(o){o.INSERT="insert",o.DELETE="delete",o.CONTEXT="context"})(LineType||(LineType={}));var OutputFormatType={LINE_BY_LINE:"line-by-line",SIDE_BY_SIDE:"side-by-side"},LineMatchingType={LINES:"lines",WORDS:"words",NONE:"none"},DiffStyleType={WORD:"word",CHAR:"char"},specials=["-","[","]","/","{","}","(",")","*","+","?",".","\\","^","$","|"],regex=RegExp("["+specials.join("\\")+"]","g");function escapeForRegExp(o){return o.replace(regex,"\\$&")}function unifyPath(o){return o&&o.replace(/\\/g,"/")}function hashCode(o){var e,t,n,r=0;for(e=0,n=o.length;e<n;e++)t=o.charCodeAt(e),r=(r<<5)-r+t,r|=0;return r}var __spreadArray=globalThis&&globalThis.__spreadArray||function(o,e,t){if(t||arguments.length===2)for(var n=0,r=e.length,a;n<r;n++)(a||!(n in e))&&(a||(a=Array.prototype.slice.call(e,0,n)),a[n]=e[n]);return o.concat(a||Array.prototype.slice.call(e))};function getExtension(o,e){var t=o.split(".");return t.length>1?t[t.length-1]:e}function startsWithAny(o,e){return e.reduce(function(t,n){return t||o.startsWith(n)},!1)}var baseDiffFilenamePrefixes=["a/","b/","i/","w/","c/","o/"];function getFilename(o,e,t){var n=t!==void 0?__spreadArray(__spreadArray([],baseDiffFilenamePrefixes,!0),[t],!1):baseDiffFilenamePrefixes,r=e?new RegExp("^".concat(escapeForRegExp(e),' "?(.+?)"?$')):new RegExp('^"?(.+?)"?$'),a=r.exec(o)||[],s=a[1],l=s===void 0?"":s,u=n.find(function(f){return l.indexOf(f)===0}),d=u?l.slice(u.length):l;return d.replace(/\s+\d{4}-\d{2}-\d{2} \d{2}:\d{2}:\d{2}(?:\.\d+)? [+-]\d{4}.*$/,"")}function getSrcFilename(o,e){return getFilename(o,"---",e)}function getDstFilename(o,e){return getFilename(o,"+++",e)}function parse$1(o,e){e===void 0&&(e={});var t=[],n=null,r=null,a=null,s=null,l=null,u=null,d=null,f="--- ",m="+++ ",h="@@",p=/^old mode (\d{6})/,g=/^new mode (\d{6})/,b=/^deleted file mode (\d{6})/,v=/^new file mode (\d{6})/,y=/^copy from "?(.+)"?/,C=/^copy to "?(.+)"?/,E=/^rename from "?(.+)"?/,A=/^rename to "?(.+)"?/,k=/^similarity index (\d+)%/,T=/^dissimilarity index (\d+)%/,$=/^index ([\da-z]+)\.\.([\da-z]+)\s*(\d{6})?/,S=/^Binary files (.*) and (.*) differ/,I=/^GIT binary patch/,R=/^index ([\da-z]+),([\da-z]+)\.\.([\da-z]+)/,N=/^mode (\d{6}),(\d{6})\.\.(\d{6})/,M=/^new file mode (\d{6})/,F=/^deleted file mode (\d{6}),(\d{6})/,D=o.replace(/\\ No newline at end of file/g,"").replace(/\r\n?/g,`
`).split(`
`);function x(){r!==null&&n!==null&&(n.blocks.push(r),r=null)}function B(){n!==null&&(!n.oldName&&u!==null&&(n.oldName=u),!n.newName&&d!==null&&(n.newName=d),n.newName&&(t.push(n),n=null)),u=null,d=null}function K(){x(),B(),n={blocks:[],deletedLines:0,addedLines:0}}function U(q){x();var H;n!==null&&((H=/^@@ -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@.*/.exec(q))?(n.isCombined=!1,a=parseInt(H[1],10),l=parseInt(H[2],10)):(H=/^@@@ -(\d+)(?:,\d+)? -(\d+)(?:,\d+)? \+(\d+)(?:,\d+)? @@@.*/.exec(q))?(n.isCombined=!0,a=parseInt(H[1],10),s=parseInt(H[2],10),l=parseInt(H[3],10)):(q.startsWith(h)&&console.error("Failed to parse lines, starting in 0!"),a=0,l=0,n.isCombined=!1)),r={lines:[],oldStartLine:a,oldStartLine2:s,newStartLine:l,header:q}}function G(q){if(!(n===null||r===null||a===null||l===null)){var H={content:q},z=n.isCombined?["+ "," +","++"]:["+"],Y=n.isCombined?["- "," -","--"]:["-"];startsWithAny(q,z)?(n.addedLines++,H.type=LineType.INSERT,H.oldNumber=void 0,H.newNumber=l++):startsWithAny(q,Y)?(n.deletedLines++,H.type=LineType.DELETE,H.oldNumber=a++,H.newNumber=void 0):(H.type=LineType.CONTEXT,H.oldNumber=a++,H.newNumber=l++),r.lines.push(H)}}function W(q,H){for(var z=H;z<D.length-3;){if(q.startsWith("diff"))return!1;if(D[z].startsWith(f)&&D[z+1].startsWith(m)&&D[z+2].startsWith(h))return!0;z++}return!1}return D.forEach(function(q,H){if(!(!q||q.startsWith("*"))){var z,Y=D[H-1],V=D[H+1],J=D[H+2];if(q.startsWith("diff")){K();var Q=/^diff --git "?([a-ciow]\/.+)"? "?([a-ciow]\/.+)"?/;if((z=Q.exec(q))&&(u=getFilename(z[1],void 0,e.dstPrefix),d=getFilename(z[2],void 0,e.srcPrefix)),n===null)throw new Error("Where is my file !!!");n.isGitDiff=!0;return}if((!n||!n.isGitDiff&&n&&q.startsWith(f)&&V.startsWith(m)&&J.startsWith(h))&&K(),!(n!=null&&n.isTooBig)){if(n&&(typeof e.diffMaxChanges=="number"&&n.addedLines+n.deletedLines>e.diffMaxChanges||typeof e.diffMaxLineLength=="number"&&q.length>e.diffMaxLineLength)){n.isTooBig=!0,n.addedLines=0,n.deletedLines=0,n.blocks=[],r=null;var X=typeof e.diffTooBigMessage=="function"?e.diffTooBigMessage(t.length):"Diff too big to be displayed";U(X);return}if(q.startsWith(f)&&V.startsWith(m)||q.startsWith(m)&&Y.startsWith(f)){if(n&&!n.oldName&&q.startsWith("--- ")&&(z=getSrcFilename(q,e.srcPrefix))){n.oldName=z,n.language=getExtension(n.oldName,n.language);return}if(n&&!n.newName&&q.startsWith("+++ ")&&(z=getDstFilename(q,e.dstPrefix))){n.newName=z,n.language=getExtension(n.newName,n.language);return}}if(n&&(q.startsWith(h)||n.isGitDiff&&n.oldName&&n.newName&&!r)){U(q);return}if(r&&(q.startsWith("+")||q.startsWith("-")||q.startsWith(" "))){G(q);return}var ie=!W(q,H);if(n===null)throw new Error("Where is my file !!!");(z=p.exec(q))?n.oldMode=z[1]:(z=g.exec(q))?n.newMode=z[1]:(z=b.exec(q))?(n.deletedFileMode=z[1],n.isDeleted=!0):(z=v.exec(q))?(n.newFileMode=z[1],n.isNew=!0):(z=y.exec(q))?(ie&&(n.oldName=z[1]),n.isCopy=!0):(z=C.exec(q))?(ie&&(n.newName=z[1]),n.isCopy=!0):(z=E.exec(q))?(ie&&(n.oldName=z[1]),n.isRename=!0):(z=A.exec(q))?(ie&&(n.newName=z[1]),n.isRename=!0):(z=S.exec(q))?(n.isBinary=!0,n.oldName=getFilename(z[1],void 0,e.srcPrefix),n.newName=getFilename(z[2],void 0,e.dstPrefix),U("Binary file")):I.test(q)?(n.isBinary=!0,U(q)):(z=k.exec(q))?n.unchangedPercentage=parseInt(z[1],10):(z=T.exec(q))?n.changedPercentage=parseInt(z[1],10):(z=$.exec(q))?(n.checksumBefore=z[1],n.checksumAfter=z[2],z[3]&&(n.mode=z[3])):(z=R.exec(q))?(n.checksumBefore=[z[2],z[3]],n.checksumAfter=z[1]):(z=N.exec(q))?(n.oldMode=[z[2],z[3]],n.newMode=z[1]):(z=M.exec(q))?(n.newFileMode=z[1],n.isNew=!0):(z=F.exec(q))&&(n.deletedFileMode=z[1],n.isDeleted=!0)}}}),x(),B(),t}function levenshtein(o,e){if(o.length===0)return e.length;if(e.length===0)return o.length;var t=[],n;for(n=0;n<=e.length;n++)t[n]=[n];var r;for(r=0;r<=o.length;r++)t[0][r]=r;for(n=1;n<=e.length;n++)for(r=1;r<=o.length;r++)e.charAt(n-1)===o.charAt(r-1)?t[n][r]=t[n-1][r-1]:t[n][r]=Math.min(t[n-1][r-1]+1,Math.min(t[n][r-1]+1,t[n-1][r]+1));return t[e.length][o.length]}function newDistanceFn(o){return function(e,t){var n=o(e).trim(),r=o(t).trim(),a=levenshtein(n,r);return a/(n.length+r.length)}}function newMatcherFn(o){function e(n,r,a){a===void 0&&(a=new Map);for(var s=1/0,l,u=0;u<n.length;++u)for(var d=0;d<r.length;++d){var f=JSON.stringify([n[u],r[d]]),m=void 0;a.has(f)&&(m=a.get(f))||(m=o(n[u],r[d]),a.set(f,m)),m<s&&(s=m,l={indexA:u,indexB:d,score:s})}return l}function t(n,r,a,s){a===void 0&&(a=0),s===void 0&&(s=new Map);var l=e(n,r,s);if(!l||n.length+r.length<3)return[[n,r]];var u=n.slice(0,l.indexA),d=r.slice(0,l.indexB),f=[n[l.indexA]],m=[r[l.indexB]],h=l.indexA+1,p=l.indexB+1,g=n.slice(h),b=r.slice(p),v=t(u,d,a+1,s),y=t(f,m,a+1,s),C=t(g,b,a+1,s),E=y;return(l.indexA>0||l.indexB>0)&&(E=v.concat(E)),(n.length>h||r.length>p)&&(E=E.concat(C)),E}return t}var __assign$4=globalThis&&globalThis.__assign||function(){return __assign$4=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},__assign$4.apply(this,arguments)},CSSLineClass={INSERTS:"d2h-ins",DELETES:"d2h-del",CONTEXT:"d2h-cntx",INFO:"d2h-info",INSERT_CHANGES:"d2h-ins d2h-change",DELETE_CHANGES:"d2h-del d2h-change"},defaultRenderConfig={matching:LineMatchingType.NONE,matchWordsThreshold:.25,maxLineLengthHighlight:1e4,diffStyle:DiffStyleType.WORD},separator="/",distance=newDistanceFn(function(o){return o.value}),matcher=newMatcherFn(distance);function isDevNullName(o){return o.indexOf("dev/null")!==-1}function removeInsElements(o){return o.replace(/(<ins[^>]*>((.|\n)*?)<\/ins>)/g,"")}function removeDelElements(o){return o.replace(/(<del[^>]*>((.|\n)*?)<\/del>)/g,"")}function toCSSClass(o){switch(o){case LineType.CONTEXT:return CSSLineClass.CONTEXT;case LineType.INSERT:return CSSLineClass.INSERTS;case LineType.DELETE:return CSSLineClass.DELETES}}function prefixLength(o){return o?2:1}function escapeForHtml(o){return o.slice(0).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;")}function deconstructLine(o,e,t){t===void 0&&(t=!0);var n=prefixLength(e);return{prefix:o.substring(0,n),content:t?escapeForHtml(o.substring(n)):o.substring(n)}}function filenameDiff(o){var e=unifyPath(o.oldName),t=unifyPath(o.newName);if(e!==t&&!isDevNullName(e)&&!isDevNullName(t)){for(var n=[],r=[],a=e.split(separator),s=t.split(separator),l=a.length,u=s.length,d=0,f=l-1,m=u-1;d<f&&d<m&&a[d]===s[d];)n.push(s[d]),d+=1;for(;f>d&&m>d&&a[f]===s[m];)r.unshift(s[m]),f-=1,m-=1;var h=n.join(separator),p=r.join(separator),g=a.slice(d,f+1).join(separator),b=s.slice(d,m+1).join(separator);return h.length&&p.length?h+separator+"{"+g+"  "+b+"}"+separator+p:h.length?h+separator+"{"+g+"  "+b+"}":p.length?"{"+g+"  "+b+"}"+separator+p:e+"  "+t}else return isDevNullName(t)?e:t}function getHtmlId(o){return"d2h-".concat(hashCode(filenameDiff(o)).toString().slice(-6))}function getFileIcon(o){var e="file-changed";return o.isRename||o.isCopy?e="file-renamed":o.isNew?e="file-added":o.isDeleted?e="file-deleted":o.newName!==o.oldName&&(e="file-renamed"),e}function diffHighlight(o,e,t,n){n===void 0&&(n={});var r=__assign$4(__assign$4({},defaultRenderConfig),n),a=r.matching,s=r.maxLineLengthHighlight,l=r.matchWordsThreshold,u=r.diffStyle,d=deconstructLine(o,t,!1),f=deconstructLine(e,t,!1);if(d.content.length>s||f.content.length>s)return{oldLine:{prefix:d.prefix,content:escapeForHtml(d.content)},newLine:{prefix:f.prefix,content:escapeForHtml(f.content)}};var m=u==="char"?diffChars(d.content,f.content):diffWordsWithSpace(d.content,f.content),h=[];if(u==="word"&&a==="words"){var p=m.filter(function(y){return y.removed}),g=m.filter(function(y){return y.added}),b=matcher(g,p);b.forEach(function(y){if(y[0].length===1&&y[1].length===1){var C=distance(y[0][0],y[1][0]);C<l&&(h.push(y[0][0]),h.push(y[1][0]))}})}var v=m.reduce(function(y,C){var E=C.added?"ins":C.removed?"del":null,A=h.indexOf(C)>-1?' class="d2h-change"':"",k=escapeForHtml(C.value);return E!==null?"".concat(y,"<").concat(E).concat(A,">").concat(k,"</").concat(E,">"):"".concat(y).concat(k)},"");return{oldLine:{prefix:d.prefix,content:removeInsElements(v)},newLine:{prefix:f.prefix,content:removeDelElements(v)}}}var baseTemplatesPath$2="file-summary",iconsBaseTemplatesPath$2="icon";function render(o,e){var t=o.map(function(n){return e.render(baseTemplatesPath$2,"line",{fileHtmlId:getHtmlId(n),oldName:n.oldName,newName:n.newName,fileName:filenameDiff(n),deletedLines:"-"+n.deletedLines,addedLines:"+"+n.addedLines},{fileIcon:e.template(iconsBaseTemplatesPath$2,getFileIcon(n))})}).join(`
`);return e.render(baseTemplatesPath$2,"wrapper",{filesNumber:o.length,files:t})}var __assign$3=globalThis&&globalThis.__assign||function(){return __assign$3=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},__assign$3.apply(this,arguments)},defaultLineByLineRendererConfig=__assign$3(__assign$3({},defaultRenderConfig),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),genericTemplatesPath$1="generic",baseTemplatesPath$1="line-by-line",iconsBaseTemplatesPath$1="icon",tagsBaseTemplatesPath$1="tag",LineByLineRenderer=function(){function o(e,t){t===void 0&&(t={}),this.hoganUtils=e,this.config=__assign$3(__assign$3({},defaultLineByLineRendererConfig),t)}return o.prototype.render=function(e){var t=this,n=e.map(function(r){var a;return r.blocks.length?a=t.generateFileHtml(r):a=t.generateEmptyDiff(),t.makeFileDiffHtml(r,a)}).join(`
`);return this.hoganUtils.render(genericTemplatesPath$1,"wrapper",{content:n})},o.prototype.makeFileDiffHtml=function(e,t){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";var n=this.hoganUtils.template(baseTemplatesPath$1,"file-diff"),r=this.hoganUtils.template(genericTemplatesPath$1,"file-path"),a=this.hoganUtils.template(iconsBaseTemplatesPath$1,"file"),s=this.hoganUtils.template(tagsBaseTemplatesPath$1,getFileIcon(e));return n.render({file:e,fileHtmlId:getHtmlId(e),diffs:t,filePath:r.render({fileDiffName:filenameDiff(e)},{fileIcon:a,fileTag:s})})},o.prototype.generateEmptyDiff=function(){return this.hoganUtils.render(genericTemplatesPath$1,"empty-diff",{contentClass:"d2h-code-line",CSSLineClass})},o.prototype.generateFileHtml=function(e){var t=this,n=newMatcherFn(newDistanceFn(function(r){return deconstructLine(r.content,e.isCombined).content}));return e.blocks.map(function(r){var a=t.hoganUtils.render(genericTemplatesPath$1,"block-header",{CSSLineClass,blockHeader:e.isTooBig?r.header:escapeForHtml(r.header),lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line"});return t.applyLineGroupping(r).forEach(function(s){var l=s[0],u=s[1],d=s[2];if(u.length&&d.length&&!l.length)t.applyRematchMatching(u,d,n).map(function(p){var g=p[0],b=p[1],v=t.processChangedLines(e.isCombined,g,b),y=v.left,C=v.right;a+=y,a+=C});else if(l.length)l.forEach(function(p){var g=deconstructLine(p.content,e.isCombined),b=g.prefix,v=g.content;a+=t.generateSingleLineHtml({type:CSSLineClass.CONTEXT,prefix:b,content:v,oldNumber:p.oldNumber,newNumber:p.newNumber})});else if(u.length||d.length){var f=t.processChangedLines(e.isCombined,u,d),m=f.left,h=f.right;a+=m,a+=h}else console.error("Unknown state reached while processing groups of lines",l,u,d)}),a}).join(`
`)},o.prototype.applyLineGroupping=function(e){for(var t=[],n=[],r=[],a=0;a<e.lines.length;a++){var s=e.lines[a];(s.type!==LineType.INSERT&&r.length||s.type===LineType.CONTEXT&&n.length>0)&&(t.push([[],n,r]),n=[],r=[]),s.type===LineType.CONTEXT?t.push([[s],[],[]]):s.type===LineType.INSERT&&n.length===0?t.push([[],[],[s]]):s.type===LineType.INSERT&&n.length>0?r.push(s):s.type===LineType.DELETE&&n.push(s)}return(n.length||r.length)&&(t.push([[],n,r]),n=[],r=[]),t},o.prototype.applyRematchMatching=function(e,t,n){var r=e.length*t.length,a=Math.max.apply(null,[0].concat(e.concat(t).map(function(l){return l.content.length}))),s=r<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words");return s?n(e,t):[[e,t]]},o.prototype.processChangedLines=function(e,t,n){for(var r={right:"",left:""},a=Math.max(t.length,n.length),s=0;s<a;s++){var l=t[s],u=n[s],d=l!==void 0&&u!==void 0?diffHighlight(l.content,u.content,e,this.config):void 0,f=l!==void 0&&l.oldNumber!==void 0?__assign$3(__assign$3({},d!==void 0?{prefix:d.oldLine.prefix,content:d.oldLine.content,type:CSSLineClass.DELETE_CHANGES}:__assign$3(__assign$3({},deconstructLine(l.content,e)),{type:toCSSClass(l.type)})),{oldNumber:l.oldNumber,newNumber:l.newNumber}):void 0,m=u!==void 0&&u.newNumber!==void 0?__assign$3(__assign$3({},d!==void 0?{prefix:d.newLine.prefix,content:d.newLine.content,type:CSSLineClass.INSERT_CHANGES}:__assign$3(__assign$3({},deconstructLine(u.content,e)),{type:toCSSClass(u.type)})),{oldNumber:u.oldNumber,newNumber:u.newNumber}):void 0,h=this.generateLineHtml(f,m),p=h.left,g=h.right;r.left+=p,r.right+=g}return r},o.prototype.generateLineHtml=function(e,t){return{left:this.generateSingleLineHtml(e),right:this.generateSingleLineHtml(t)}},o.prototype.generateSingleLineHtml=function(e){if(e===void 0)return"";var t=this.hoganUtils.render(baseTemplatesPath$1,"numbers",{oldNumber:e.oldNumber||"",newNumber:e.newNumber||""});return this.hoganUtils.render(genericTemplatesPath$1,"line",{type:e.type,lineClass:"d2h-code-linenumber",contentClass:"d2h-code-line",prefix:e.prefix===" "?"&nbsp;":e.prefix,content:e.content,lineNumber:t})},o}(),__assign$2=globalThis&&globalThis.__assign||function(){return __assign$2=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},__assign$2.apply(this,arguments)},defaultSideBySideRendererConfig=__assign$2(__assign$2({},defaultRenderConfig),{renderNothingWhenEmpty:!1,matchingMaxComparisons:2500,maxLineSizeInBlockForComparison:200}),genericTemplatesPath="generic",baseTemplatesPath="side-by-side",iconsBaseTemplatesPath="icon",tagsBaseTemplatesPath="tag",SideBySideRenderer=function(){function o(e,t){t===void 0&&(t={}),this.hoganUtils=e,this.config=__assign$2(__assign$2({},defaultSideBySideRendererConfig),t)}return o.prototype.render=function(e){var t=this,n=e.map(function(r){var a;return r.blocks.length?a=t.generateFileHtml(r):a=t.generateEmptyDiff(),t.makeFileDiffHtml(r,a)}).join(`
`);return this.hoganUtils.render(genericTemplatesPath,"wrapper",{content:n})},o.prototype.makeFileDiffHtml=function(e,t){if(this.config.renderNothingWhenEmpty&&Array.isArray(e.blocks)&&e.blocks.length===0)return"";var n=this.hoganUtils.template(baseTemplatesPath,"file-diff"),r=this.hoganUtils.template(genericTemplatesPath,"file-path"),a=this.hoganUtils.template(iconsBaseTemplatesPath,"file"),s=this.hoganUtils.template(tagsBaseTemplatesPath,getFileIcon(e));return n.render({file:e,fileHtmlId:getHtmlId(e),diffs:t,filePath:r.render({fileDiffName:filenameDiff(e)},{fileIcon:a,fileTag:s})})},o.prototype.generateEmptyDiff=function(){return{right:"",left:this.hoganUtils.render(genericTemplatesPath,"empty-diff",{contentClass:"d2h-code-side-line",CSSLineClass})}},o.prototype.generateFileHtml=function(e){var t=this,n=newMatcherFn(newDistanceFn(function(r){return deconstructLine(r.content,e.isCombined).content}));return e.blocks.map(function(r){var a={left:t.makeHeaderHtml(r.header,e),right:t.makeHeaderHtml("")};return t.applyLineGroupping(r).forEach(function(s){var l=s[0],u=s[1],d=s[2];if(u.length&&d.length&&!l.length)t.applyRematchMatching(u,d,n).map(function(p){var g=p[0],b=p[1],v=t.processChangedLines(e.isCombined,g,b),y=v.left,C=v.right;a.left+=y,a.right+=C});else if(l.length)l.forEach(function(p){var g=deconstructLine(p.content,e.isCombined),b=g.prefix,v=g.content,y=t.generateLineHtml({type:CSSLineClass.CONTEXT,prefix:b,content:v,number:p.oldNumber},{type:CSSLineClass.CONTEXT,prefix:b,content:v,number:p.newNumber}),C=y.left,E=y.right;a.left+=C,a.right+=E});else if(u.length||d.length){var f=t.processChangedLines(e.isCombined,u,d),m=f.left,h=f.right;a.left+=m,a.right+=h}else console.error("Unknown state reached while processing groups of lines",l,u,d)}),a}).reduce(function(r,a){return{left:r.left+a.left,right:r.right+a.right}},{left:"",right:""})},o.prototype.applyLineGroupping=function(e){for(var t=[],n=[],r=[],a=0;a<e.lines.length;a++){var s=e.lines[a];(s.type!==LineType.INSERT&&r.length||s.type===LineType.CONTEXT&&n.length>0)&&(t.push([[],n,r]),n=[],r=[]),s.type===LineType.CONTEXT?t.push([[s],[],[]]):s.type===LineType.INSERT&&n.length===0?t.push([[],[],[s]]):s.type===LineType.INSERT&&n.length>0?r.push(s):s.type===LineType.DELETE&&n.push(s)}return(n.length||r.length)&&(t.push([[],n,r]),n=[],r=[]),t},o.prototype.applyRematchMatching=function(e,t,n){var r=e.length*t.length,a=Math.max.apply(null,[0].concat(e.concat(t).map(function(l){return l.content.length}))),s=r<this.config.matchingMaxComparisons&&a<this.config.maxLineSizeInBlockForComparison&&(this.config.matching==="lines"||this.config.matching==="words");return s?n(e,t):[[e,t]]},o.prototype.makeHeaderHtml=function(e,t){return this.hoganUtils.render(genericTemplatesPath,"block-header",{CSSLineClass,blockHeader:t!=null&&t.isTooBig?e:escapeForHtml(e),lineClass:"d2h-code-side-linenumber",contentClass:"d2h-code-side-line"})},o.prototype.processChangedLines=function(e,t,n){for(var r={right:"",left:""},a=Math.max(t.length,n.length),s=0;s<a;s++){var l=t[s],u=n[s],d=l!==void 0&&u!==void 0?diffHighlight(l.content,u.content,e,this.config):void 0,f=l!==void 0&&l.oldNumber!==void 0?__assign$2(__assign$2({},d!==void 0?{prefix:d.oldLine.prefix,content:d.oldLine.content,type:CSSLineClass.DELETE_CHANGES}:__assign$2(__assign$2({},deconstructLine(l.content,e)),{type:toCSSClass(l.type)})),{number:l.oldNumber}):void 0,m=u!==void 0&&u.newNumber!==void 0?__assign$2(__assign$2({},d!==void 0?{prefix:d.newLine.prefix,content:d.newLine.content,type:CSSLineClass.INSERT_CHANGES}:__assign$2(__assign$2({},deconstructLine(u.content,e)),{type:toCSSClass(u.type)})),{number:u.newNumber}):void 0,h=this.generateLineHtml(f,m),p=h.left,g=h.right;r.left+=p,r.right+=g}return r},o.prototype.generateLineHtml=function(e,t){return{left:this.generateSingleHtml(e),right:this.generateSingleHtml(t)}},o.prototype.generateSingleHtml=function(e){var t="d2h-code-side-linenumber",n="d2h-code-side-line";return this.hoganUtils.render(genericTemplatesPath,"line",{type:(e==null?void 0:e.type)||"".concat(CSSLineClass.CONTEXT," d2h-emptyplaceholder"),lineClass:e!==void 0?t:"".concat(t," d2h-code-side-emptyplaceholder"),contentClass:e!==void 0?n:"".concat(n," d2h-code-side-emptyplaceholder"),prefix:(e==null?void 0:e.prefix)===" "?"&nbsp;":e==null?void 0:e.prefix,content:e==null?void 0:e.content,lineNumber:e==null?void 0:e.number})},o}(),compiler={};(function(o){(function(e){var t=/\S/,n=/\"/g,r=/\n/g,a=/\r/g,s=/\\/g,l=/\u2028/,u=/\u2029/;e.tags={"#":1,"^":2,"<":3,$:4,"/":5,"!":6,">":7,"=":8,_v:9,"{":10,"&":11,_t:12},e.scan=function(I,R){var N=I.length,M=0,F=1,D=2,x=M,B=null,K=null,U="",G=[],W=!1,q=0,H=0,z="{{",Y="}}";function V(){U.length>0&&(G.push({tag:"_t",text:new String(U)}),U="")}function J(){for(var ie=!0,ce=H;ce<G.length;ce++)if(ie=e.tags[G[ce].tag]<e.tags._v||G[ce].tag=="_t"&&G[ce].text.match(t)===null,!ie)return!1;return ie}function Q(ie,ce){if(V(),ie&&J())for(var de=H,se;de<G.length;de++)G[de].text&&((se=G[de+1])&&se.tag==">"&&(se.indent=G[de].text.toString()),G.splice(de,1));else ce||G.push({tag:`
`});W=!1,H=G.length}function X(ie,ce){var de="="+Y,se=ie.indexOf(de,ce),me=f(ie.substring(ie.indexOf("=",ce)+1,se)).split(" ");return z=me[0],Y=me[me.length-1],se+de.length-1}for(R&&(R=R.split(" "),z=R[0],Y=R[1]),q=0;q<N;q++)x==M?m(z,I,q)?(--q,V(),x=F):I.charAt(q)==`
`?Q(W):U+=I.charAt(q):x==F?(q+=z.length-1,K=e.tags[I.charAt(q+1)],B=K?I.charAt(q+1):"_v",B=="="?(q=X(I,q),x=M):(K&&q++,x=D),W=q):m(Y,I,q)?(G.push({tag:B,n:f(U),otag:z,ctag:Y,i:B=="/"?W-z.length:q+Y.length}),U="",q+=Y.length-1,x=M,B=="{"&&(Y=="}}"?q++:d(G[G.length-1]))):U+=I.charAt(q);return Q(W,!0),G};function d(S){S.n.substr(S.n.length-1)==="}"&&(S.n=S.n.substring(0,S.n.length-1))}function f(S){return S.trim?S.trim():S.replace(/^\s*|\s*$/g,"")}function m(S,I,R){if(I.charAt(R)!=S.charAt(0))return!1;for(var N=1,M=S.length;N<M;N++)if(I.charAt(R+N)!=S.charAt(N))return!1;return!0}var h={_t:!0,"\n":!0,$:!0,"/":!0};function p(S,I,R,N){var M=[],F=null,D=null,x=null;for(D=R[R.length-1];S.length>0;){if(x=S.shift(),D&&D.tag=="<"&&!(x.tag in h))throw new Error("Illegal content in < super tag.");if(e.tags[x.tag]<=e.tags.$||g(x,N))R.push(x),x.nodes=p(S,x.tag,R,N);else if(x.tag=="/"){if(R.length===0)throw new Error("Closing tag without opener: /"+x.n);if(F=R.pop(),x.n!=F.n&&!b(x.n,F.n,N))throw new Error("Nesting error: "+F.n+" vs. "+x.n);return F.end=x.i,M}else x.tag==`
`&&(x.last=S.length==0||S[0].tag==`
`);M.push(x)}if(R.length>0)throw new Error("missing closing tag: "+R.pop().n);return M}function g(S,I){for(var R=0,N=I.length;R<N;R++)if(I[R].o==S.n)return S.tag="#",!0}function b(S,I,R){for(var N=0,M=R.length;N<M;N++)if(R[N].c==S&&R[N].o==I)return!0}function v(S){var I=[];for(var R in S)I.push('"'+E(R)+'": function(c,p,t,i) {'+S[R]+"}");return"{ "+I.join(",")+" }"}function y(S){var I=[];for(var R in S.partials)I.push('"'+E(R)+'":{name:"'+E(S.partials[R].name)+'", '+y(S.partials[R])+"}");return"partials: {"+I.join(",")+"}, subs: "+v(S.subs)}e.stringify=function(S,I,R){return"{code: function (c,p,i) { "+e.wrapMain(S.code)+" },"+y(S)+"}"};var C=0;e.generate=function(S,I,R){C=0;var N={code:"",subs:{},partials:{}};return e.walk(S,N),R.asString?this.stringify(N,I,R):this.makeTemplate(N,I,R)},e.wrapMain=function(S){return'var t=this;t.b(i=i||"");'+S+"return t.fl();"},e.template=e.Template,e.makeTemplate=function(S,I,R){var N=this.makePartials(S);return N.code=new Function("c","p","i",this.wrapMain(S.code)),new this.template(N,I,this,R)},e.makePartials=function(S){var I,R={subs:{},partials:S.partials,name:S.name};for(I in R.partials)R.partials[I]=this.makePartials(R.partials[I]);for(I in S.subs)R.subs[I]=new Function("c","p","t","i",S.subs[I]);return R};function E(S){return S.replace(s,"\\\\").replace(n,'\\"').replace(r,"\\n").replace(a,"\\r").replace(l,"\\u2028").replace(u,"\\u2029")}function A(S){return~S.indexOf(".")?"d":"f"}function k(S,I){var R="<"+(I.prefix||""),N=R+S.n+C++;return I.partials[N]={name:S.n,partials:{}},I.code+='t.b(t.rp("'+E(N)+'",c,p,"'+(S.indent||"")+'"));',N}e.codegen={"#":function(S,I){I.code+="if(t.s(t."+A(S.n)+'("'+E(S.n)+'",c,p,1),c,p,0,'+S.i+","+S.end+',"'+S.otag+" "+S.ctag+'")){t.rs(c,p,function(c,p,t){',e.walk(S.nodes,I),I.code+="});c.pop();}"},"^":function(S,I){I.code+="if(!t.s(t."+A(S.n)+'("'+E(S.n)+'",c,p,1),c,p,1,0,0,"")){',e.walk(S.nodes,I),I.code+="};"},">":k,"<":function(S,I){var R={partials:{},code:"",subs:{},inPartial:!0};e.walk(S.nodes,R);var N=I.partials[k(S,I)];N.subs=R.subs,N.partials=R.partials},$:function(S,I){var R={subs:{},code:"",partials:I.partials,prefix:S.n};e.walk(S.nodes,R),I.subs[S.n]=R.code,I.inPartial||(I.code+='t.sub("'+E(S.n)+'",c,p,i);')},"\n":function(S,I){I.code+=$('"\\n"'+(S.last?"":" + i"))},_v:function(S,I){I.code+="t.b(t.v(t."+A(S.n)+'("'+E(S.n)+'",c,p,0)));'},_t:function(S,I){I.code+=$('"'+E(S.text)+'"')},"{":T,"&":T};function T(S,I){I.code+="t.b(t.t(t."+A(S.n)+'("'+E(S.n)+'",c,p,0)));'}function $(S){return"t.b("+S+");"}e.walk=function(S,I){for(var R,N=0,M=S.length;N<M;N++)R=e.codegen[S[N].tag],R&&R(S[N],I);return I},e.parse=function(S,I,R){return R=R||{},p(S,"",[],R.sectionTags||[])},e.cache={},e.cacheKey=function(S,I){return[S,!!I.asString,!!I.disableLambda,I.delimiters,!!I.modelGet].join("||")},e.compile=function(S,I){I=I||{};var R=e.cacheKey(S,I),N=this.cache[R];if(N){var M=N.partials;for(var F in M)delete M[F].instance;return N}return N=this.generate(this.parse(this.scan(S,I.delimiters),S,I),S,I),this.cache[R]=N}})(o)})(compiler);var template={};(function(o){(function(e){e.Template=function(p,g,b,v){p=p||{},this.r=p.code||this.r,this.c=b,this.options=v||{},this.text=g||"",this.partials=p.partials||{},this.subs=p.subs||{},this.buf=""},e.Template.prototype={r:function(p,g,b){return""},v:m,t:f,render:function(g,b,v){return this.ri([g],b||{},v)},ri:function(p,g,b){return this.r(p,g,b)},ep:function(p,g){var b=this.partials[p],v=g[b.name];if(b.instance&&b.base==v)return b.instance;if(typeof v=="string"){if(!this.c)throw new Error("No compiler available.");v=this.c.compile(v,this.options)}if(!v)return null;if(this.partials[p].base=v,b.subs){g.stackText||(g.stackText={});for(key in b.subs)g.stackText[key]||(g.stackText[key]=this.activeSub!==void 0&&g.stackText[this.activeSub]?g.stackText[this.activeSub]:this.text);v=n(v,b.subs,b.partials,this.stackSubs,this.stackPartials,g.stackText)}return this.partials[p].instance=v,v},rp:function(p,g,b,v){var y=this.ep(p,b);return y?y.ri(g,b,v):""},rs:function(p,g,b){var v=p[p.length-1];if(!h(v)){b(p,g,this);return}for(var y=0;y<v.length;y++)p.push(v[y]),b(p,g,this),p.pop()},s:function(p,g,b,v,y,C,E){var A;return h(p)&&p.length===0?!1:(typeof p=="function"&&(p=this.ms(p,g,b,v,y,C,E)),A=!!p,!v&&A&&g&&g.push(typeof p=="object"?p:g[g.length-1]),A)},d:function(p,g,b,v){var y,C=p.split("."),E=this.f(C[0],g,b,v),A=this.options.modelGet,k=null;if(p==="."&&h(g[g.length-2]))E=g[g.length-1];else for(var T=1;T<C.length;T++)y=t(C[T],E,A),y!==void 0?(k=E,E=y):E="";return v&&!E?!1:(!v&&typeof E=="function"&&(g.push(k),E=this.mv(E,g,b),g.pop()),E)},f:function(p,g,b,v){for(var y=!1,C=null,E=!1,A=this.options.modelGet,k=g.length-1;k>=0;k--)if(C=g[k],y=t(p,C,A),y!==void 0){E=!0;break}return E?(!v&&typeof y=="function"&&(y=this.mv(y,g,b)),y):v?!1:""},ls:function(p,g,b,v,y){var C=this.options.delimiters;return this.options.delimiters=y,this.b(this.ct(f(p.call(g,v)),g,b)),this.options.delimiters=C,!1},ct:function(p,g,b){if(this.options.disableLambda)throw new Error("Lambda features disabled.");return this.c.compile(p,this.options).render(g,b)},b:function(p){this.buf+=p},fl:function(){var p=this.buf;return this.buf="",p},ms:function(p,g,b,v,y,C,E){var A,k=g[g.length-1],T=p.call(k);return typeof T=="function"?v?!0:(A=this.activeSub&&this.subsText&&this.subsText[this.activeSub]?this.subsText[this.activeSub]:this.text,this.ls(T,k,b,A.substring(y,C),E)):T},mv:function(p,g,b){var v=g[g.length-1],y=p.call(v);return typeof y=="function"?this.ct(f(y.call(v)),v,b):y},sub:function(p,g,b,v){var y=this.subs[p];y&&(this.activeSub=p,y(g,b,this,v),this.activeSub=!1)}};function t(p,g,b){var v;return g&&typeof g=="object"&&(g[p]!==void 0?v=g[p]:b&&g.get&&typeof g.get=="function"&&(v=g.get(p))),v}function n(p,g,b,v,y,C){function E(){}E.prototype=p;function A(){}A.prototype=p.subs;var k,T=new E;T.subs=new A,T.subsText={},T.buf="",v=v||{},T.stackSubs=v,T.subsText=C;for(k in g)v[k]||(v[k]=g[k]);for(k in v)T.subs[k]=v[k];y=y||{},T.stackPartials=y;for(k in b)y[k]||(y[k]=b[k]);for(k in y)T.partials[k]=y[k];return T}var r=/&/g,a=/</g,s=/>/g,l=/\'/g,u=/\"/g,d=/[&<>\"\']/;function f(p){return String(p??"")}function m(p){return p=f(p),d.test(p)?p.replace(r,"&amp;").replace(a,"&lt;").replace(s,"&gt;").replace(l,"&#39;").replace(u,"&quot;"):p}var h=Array.isArray||function(p){return Object.prototype.toString.call(p)==="[object Array]"}})(o)})(template);var Hogan=compiler;Hogan.Template=template.Template;Hogan.template=Hogan.Template;var hogan=Hogan,defaultTemplates={};defaultTemplates["file-summary-line"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<li class="d2h-file-list-line">'),n.b(`
`+t),n.b('    <span class="d2h-file-name-wrapper">'),n.b(`
`+t),n.b(n.rp("<fileIcon0",o,e,"      ")),n.b('      <a href="#'),n.b(n.v(n.f("fileHtmlId",o,e,0))),n.b('" class="d2h-file-name">'),n.b(n.v(n.f("fileName",o,e,0))),n.b("</a>"),n.b(`
`+t),n.b('      <span class="d2h-file-stats">'),n.b(`
`+t),n.b('          <span class="d2h-lines-added">'),n.b(n.v(n.f("addedLines",o,e,0))),n.b("</span>"),n.b(`
`+t),n.b('          <span class="d2h-lines-deleted">'),n.b(n.v(n.f("deletedLines",o,e,0))),n.b("</span>"),n.b(`
`+t),n.b("      </span>"),n.b(`
`+t),n.b("    </span>"),n.b(`
`+t),n.b("</li>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}}},subs:{}});defaultTemplates["file-summary-wrapper"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<div class="d2h-file-list-wrapper">'),n.b(`
`+t),n.b('    <div class="d2h-file-list-header">'),n.b(`
`+t),n.b('        <span class="d2h-file-list-title">Files changed ('),n.b(n.v(n.f("filesNumber",o,e,0))),n.b(")</span>"),n.b(`
`+t),n.b('        <a class="d2h-file-switch d2h-hide">hide</a>'),n.b(`
`+t),n.b('        <a class="d2h-file-switch d2h-show">show</a>'),n.b(`
`+t),n.b("    </div>"),n.b(`
`+t),n.b('    <ol class="d2h-file-list">'),n.b(`
`+t),n.b("    "),n.b(n.t(n.f("files",o,e,0))),n.b(`
`+t),n.b("    </ol>"),n.b(`
`+t),n.b("</div>"),n.fl()},partials:{},subs:{}});defaultTemplates["generic-block-header"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b("<tr>"),n.b(`
`+t),n.b('    <td class="'),n.b(n.v(n.f("lineClass",o,e,0))),n.b(" "),n.b(n.v(n.d("CSSLineClass.INFO",o,e,0))),n.b('"></td>'),n.b(`
`+t),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",o,e,0))),n.b('">'),n.b(`
`+t),n.b('        <div class="'),n.b(n.v(n.f("contentClass",o,e,0))),n.b('">'),n.b(n.t(n.f("blockHeader",o,e,0))),n.b("</div>"),n.b(`
`+t),n.b("    </td>"),n.b(`
`+t),n.b("</tr>"),n.fl()},partials:{},subs:{}});defaultTemplates["generic-empty-diff"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b("<tr>"),n.b(`
`+t),n.b('    <td class="'),n.b(n.v(n.d("CSSLineClass.INFO",o,e,0))),n.b('">'),n.b(`
`+t),n.b('        <div class="'),n.b(n.v(n.f("contentClass",o,e,0))),n.b('">'),n.b(`
`+t),n.b("            File without changes"),n.b(`
`+t),n.b("        </div>"),n.b(`
`+t),n.b("    </td>"),n.b(`
`+t),n.b("</tr>"),n.fl()},partials:{},subs:{}});defaultTemplates["generic-file-path"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<span class="d2h-file-name-wrapper">'),n.b(`
`+t),n.b(n.rp("<fileIcon0",o,e,"    ")),n.b('    <span class="d2h-file-name">'),n.b(n.v(n.f("fileDiffName",o,e,0))),n.b("</span>"),n.b(`
`+t),n.b(n.rp("<fileTag1",o,e,"    ")),n.b("</span>"),n.b(`
`+t),n.b('<label class="d2h-file-collapse">'),n.b(`
`+t),n.b('    <input class="d2h-file-collapse-input" type="checkbox" name="viewed" value="viewed">'),n.b(`
`+t),n.b("    Viewed"),n.b(`
`+t),n.b("</label>"),n.fl()},partials:{"<fileIcon0":{name:"fileIcon",partials:{},subs:{}},"<fileTag1":{name:"fileTag",partials:{},subs:{}}},subs:{}});defaultTemplates["generic-line"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b("<tr>"),n.b(`
`+t),n.b('    <td class="'),n.b(n.v(n.f("lineClass",o,e,0))),n.b(" "),n.b(n.v(n.f("type",o,e,0))),n.b('">'),n.b(`
`+t),n.b("      "),n.b(n.t(n.f("lineNumber",o,e,0))),n.b(`
`+t),n.b("    </td>"),n.b(`
`+t),n.b('    <td class="'),n.b(n.v(n.f("type",o,e,0))),n.b('">'),n.b(`
`+t),n.b('        <div class="'),n.b(n.v(n.f("contentClass",o,e,0))),n.b('">'),n.b(`
`+t),n.s(n.f("prefix",o,e,1),o,e,0,162,238,"{{ }}")&&(n.rs(o,e,function(r,a,s){s.b('            <span class="d2h-code-line-prefix">'),s.b(s.t(s.f("prefix",r,a,0))),s.b("</span>"),s.b(`
`+t)}),o.pop()),n.s(n.f("prefix",o,e,1),o,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-prefix">&nbsp;</span>'),n.b(`
`+t)),n.s(n.f("content",o,e,1),o,e,0,371,445,"{{ }}")&&(n.rs(o,e,function(r,a,s){s.b('            <span class="d2h-code-line-ctn">'),s.b(s.t(s.f("content",r,a,0))),s.b("</span>"),s.b(`
`+t)}),o.pop()),n.s(n.f("content",o,e,1),o,e,1,0,0,"")||(n.b('            <span class="d2h-code-line-ctn"><br></span>'),n.b(`
`+t)),n.b("        </div>"),n.b(`
`+t),n.b("    </td>"),n.b(`
`+t),n.b("</tr>"),n.fl()},partials:{},subs:{}});defaultTemplates["generic-wrapper"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<div class="d2h-wrapper">'),n.b(`
`+t),n.b("    "),n.b(n.t(n.f("content",o,e,0))),n.b(`
`+t),n.b("</div>"),n.fl()},partials:{},subs:{}});defaultTemplates["icon-file-added"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-added" height="16" title="added" version="1.1" viewBox="0 0 14 16"'),n.b(`
`+t),n.b('     width="14">'),n.b(`
`+t),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM6 9H3V7h3V4h2v3h3v2H8v3H6V9z"></path>'),n.b(`
`+t),n.b("</svg>"),n.fl()},partials:{},subs:{}});defaultTemplates["icon-file-changed"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-changed" height="16" title="modified" version="1.1"'),n.b(`
`+t),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+t),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM4 8c0-1.66 1.34-3 3-3s3 1.34 3 3-1.34 3-3 3-3-1.34-3-3z"></path>'),n.b(`
`+t),n.b("</svg>"),n.fl()},partials:{},subs:{}});defaultTemplates["icon-file-deleted"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-deleted" height="16" title="removed" version="1.1"'),n.b(`
`+t),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+t),n.b('    <path d="M13 1H1C0.45 1 0 1.45 0 2v12c0 0.55 0.45 1 1 1h12c0.55 0 1-0.45 1-1V2c0-0.55-0.45-1-1-1z m0 13H1V2h12v12zM11 9H3V7h8v2z"></path>'),n.b(`
`+t),n.b("</svg>"),n.fl()},partials:{},subs:{}});defaultTemplates["icon-file-renamed"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<svg aria-hidden="true" class="d2h-icon d2h-moved" height="16" title="renamed" version="1.1"'),n.b(`
`+t),n.b('     viewBox="0 0 14 16" width="14">'),n.b(`
`+t),n.b('    <path d="M6 9H3V7h3V4l5 4-5 4V9z m8-7v12c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h12c0.55 0 1 0.45 1 1z m-1 0H1v12h12V2z"></path>'),n.b(`
`+t),n.b("</svg>"),n.fl()},partials:{},subs:{}});defaultTemplates["icon-file"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<svg aria-hidden="true" class="d2h-icon" height="16" version="1.1" viewBox="0 0 12 16" width="12">'),n.b(`
`+t),n.b('    <path d="M6 5H2v-1h4v1zM2 8h7v-1H2v1z m0 2h7v-1H2v1z m0 2h7v-1H2v1z m10-7.5v9.5c0 0.55-0.45 1-1 1H1c-0.55 0-1-0.45-1-1V2c0-0.55 0.45-1 1-1h7.5l3.5 3.5z m-1 0.5L8 2H1v12h10V5z"></path>'),n.b(`
`+t),n.b("</svg>"),n.fl()},partials:{},subs:{}});defaultTemplates["line-by-line-file-diff"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",o,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",o,e,0))),n.b('">'),n.b(`
`+t),n.b('    <div class="d2h-file-header">'),n.b(`
`+t),n.b("    "),n.b(n.t(n.f("filePath",o,e,0))),n.b(`
`+t),n.b("    </div>"),n.b(`
`+t),n.b('    <div class="d2h-file-diff">'),n.b(`
`+t),n.b('        <div class="d2h-code-wrapper">'),n.b(`
`+t),n.b('            <table class="d2h-diff-table">'),n.b(`
`+t),n.b('                <tbody class="d2h-diff-tbody">'),n.b(`
`+t),n.b("                "),n.b(n.t(n.f("diffs",o,e,0))),n.b(`
`+t),n.b("                </tbody>"),n.b(`
`+t),n.b("            </table>"),n.b(`
`+t),n.b("        </div>"),n.b(`
`+t),n.b("    </div>"),n.b(`
`+t),n.b("</div>"),n.fl()},partials:{},subs:{}});defaultTemplates["line-by-line-numbers"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<div class="line-num1">'),n.b(n.v(n.f("oldNumber",o,e,0))),n.b("</div>"),n.b(`
`+t),n.b('<div class="line-num2">'),n.b(n.v(n.f("newNumber",o,e,0))),n.b("</div>"),n.fl()},partials:{},subs:{}});defaultTemplates["side-by-side-file-diff"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<div id="'),n.b(n.v(n.f("fileHtmlId",o,e,0))),n.b('" class="d2h-file-wrapper" data-lang="'),n.b(n.v(n.d("file.language",o,e,0))),n.b('">'),n.b(`
`+t),n.b('    <div class="d2h-file-header">'),n.b(`
`+t),n.b("      "),n.b(n.t(n.f("filePath",o,e,0))),n.b(`
`+t),n.b("    </div>"),n.b(`
`+t),n.b('    <div class="d2h-files-diff">'),n.b(`
`+t),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+t),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+t),n.b('                <table class="d2h-diff-table">'),n.b(`
`+t),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+t),n.b("                    "),n.b(n.t(n.d("diffs.left",o,e,0))),n.b(`
`+t),n.b("                    </tbody>"),n.b(`
`+t),n.b("                </table>"),n.b(`
`+t),n.b("            </div>"),n.b(`
`+t),n.b("        </div>"),n.b(`
`+t),n.b('        <div class="d2h-file-side-diff">'),n.b(`
`+t),n.b('            <div class="d2h-code-wrapper">'),n.b(`
`+t),n.b('                <table class="d2h-diff-table">'),n.b(`
`+t),n.b('                    <tbody class="d2h-diff-tbody">'),n.b(`
`+t),n.b("                    "),n.b(n.t(n.d("diffs.right",o,e,0))),n.b(`
`+t),n.b("                    </tbody>"),n.b(`
`+t),n.b("                </table>"),n.b(`
`+t),n.b("            </div>"),n.b(`
`+t),n.b("        </div>"),n.b(`
`+t),n.b("    </div>"),n.b(`
`+t),n.b("</div>"),n.fl()},partials:{},subs:{}});defaultTemplates["tag-file-added"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<span class="d2h-tag d2h-added d2h-added-tag">ADDED</span>'),n.fl()},partials:{},subs:{}});defaultTemplates["tag-file-changed"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<span class="d2h-tag d2h-changed d2h-changed-tag">CHANGED</span>'),n.fl()},partials:{},subs:{}});defaultTemplates["tag-file-deleted"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<span class="d2h-tag d2h-deleted d2h-deleted-tag">DELETED</span>'),n.fl()},partials:{},subs:{}});defaultTemplates["tag-file-renamed"]=new hogan.Template({code:function(o,e,t){var n=this;return n.b(t=t||""),n.b('<span class="d2h-tag d2h-moved d2h-moved-tag">RENAMED</span>'),n.fl()},partials:{},subs:{}});var __assign$1=globalThis&&globalThis.__assign||function(){return __assign$1=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},__assign$1.apply(this,arguments)},HoganJsUtils=function(){function o(e){var t=e.compiledTemplates,n=t===void 0?{}:t,r=e.rawTemplates,a=r===void 0?{}:r,s=Object.entries(a).reduce(function(l,u){var d,f=u[0],m=u[1],h=hogan.compile(m,{asString:!1});return __assign$1(__assign$1({},l),(d={},d[f]=h,d))},{});this.preCompiledTemplates=__assign$1(__assign$1(__assign$1({},defaultTemplates),n),s)}return o.compile=function(e){return hogan.compile(e,{asString:!1})},o.prototype.render=function(e,t,n,r,a){var s=this.templateKey(e,t);try{var l=this.preCompiledTemplates[s];return l.render(n,r,a)}catch{throw new Error("Could not find template to render '".concat(s,"'"))}},o.prototype.template=function(e,t){return this.preCompiledTemplates[this.templateKey(e,t)]},o.prototype.templateKey=function(e,t){return"".concat(e,"-").concat(t)},o}(),__assign=globalThis&&globalThis.__assign||function(){return __assign=Object.assign||function(o){for(var e,t=1,n=arguments.length;t<n;t++){e=arguments[t];for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&(o[r]=e[r])}return o},__assign.apply(this,arguments)},defaultDiff2HtmlConfig=__assign(__assign(__assign({},defaultLineByLineRendererConfig),defaultSideBySideRendererConfig),{outputFormat:OutputFormatType.LINE_BY_LINE,drawFileList:!0});function parse(o,e){return e===void 0&&(e={}),parse$1(o,__assign(__assign({},defaultDiff2HtmlConfig),e))}function html(o,e){e===void 0&&(e={});var t=__assign(__assign({},defaultDiff2HtmlConfig),e),n=typeof o=="string"?parse$1(o,t):o,r=new HoganJsUtils(t),a=t.drawFileList?render(n,r):"",s=t.outputFormat==="side-by-side"?new SideBySideRenderer(r,t).render(n):new LineByLineRenderer(r,t).render(n);return a+s}const DiffView_svelte_svelte_type_style_lang="";function create_fragment$13(o){let e;return{c(){e=element("div"),attr(e,"class","root svelte-ym7rtz")},m(t,n){insert(t,e,n),e.innerHTML=o[0]},p(t,[n]){n&1&&(e.innerHTML=t[0])},i:noop$1,o:noop$1,d(t){t&&detach(e)}}}function instance$12(o,e,t){let n,r,a,{leftText:s}=e,{rightText:l}=e,{leftTitle:u}=e,{rightTitle:d}=e;return o.$$set=f=>{"leftText"in f&&t(1,s=f.leftText),"rightText"in f&&t(2,l=f.rightText),"leftTitle"in f&&t(3,u=f.leftTitle),"rightTitle"in f&&t(4,d=f.rightTitle)},o.$$.update=()=>{o.$$.dirty&30&&t(6,n=createTwoFilesPatch(u,d,s,l,"","")),o.$$.dirty&64&&t(5,r=parse(n)),o.$$.dirty&32&&t(0,a=html(r,{drawFileList:!1}))},[a,s,l,u,d,r,n]}class DiffView extends SvelteComponent{constructor(e){super(),init(this,e,instance$12,create_fragment$13,safe_not_equal,{leftText:1,rightText:2,leftTitle:3,rightTitle:4})}}const RowsFilterSwitcher_svelte_svelte_type_style_lang="";function create_if_block$y(o){let e,t;return e=new InlineButton({props:{$$slots:{default:[create_default_slot$r]},$$scope:{ctx:o}}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&187&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$r(o){let e,t,n,r,a,s,l,u,d,f;return e=new FontIcon({props:{icon:o[0]}}),d=new FontIcon({props:{icon:o[5]&&!o[5][o[3]]?"icon checkbox-marked":"icon checkbox-blank"}}),{c(){create_component(e.$$.fragment),t=space(),n=element("span"),r=text(o[1]),a=text(" ("),s=text(o[4]),l=text(")"),u=space(),create_component(d.$$.fragment),attr(n,"class","switch svelte-1muj49d")},m(m,h){mount_component(e,m,h),insert(m,t,h),insert(m,n,h),append(n,r),append(n,a),append(n,s),append(n,l),insert(m,u,h),mount_component(d,m,h),f=!0},p(m,h){const p={};h&1&&(p.icon=m[0]),e.$set(p),(!f||h&2)&&set_data(r,m[1]),(!f||h&16)&&set_data(s,m[4]);const g={};h&40&&(g.icon=m[5]&&!m[5][m[3]]?"icon checkbox-marked":"icon checkbox-blank"),d.$set(g)},i(m){f||(transition_in(e.$$.fragment,m),transition_in(d.$$.fragment,m),f=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(d.$$.fragment,m),f=!1},d(m){m&&(detach(t),detach(n),detach(u)),destroy_component(e,m),destroy_component(d,m)}}}function create_fragment$12(o){let e,t,n=o[4]>0&&create_if_block$y(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[4]>0?n?(n.p(r,a),a&16&&transition_in(n,1)):(n=create_if_block$y(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$11(o,e,t){let n,r=noop$1,a=()=>(r(),r=subscribe(u,h=>t(5,n=h)),u);o.$$.on_destroy.push(()=>r());let{icon:s}=e,{label:l}=e,{values:u}=e;a();let{field:d}=e,{count:f}=e;const m=()=>{set_store_value(u,n={...n,[d]:!n[d]},n)};return o.$$set=h=>{"icon"in h&&t(0,s=h.icon),"label"in h&&t(1,l=h.label),"values"in h&&a(t(2,u=h.values)),"field"in h&&t(3,d=h.field),"count"in h&&t(4,f=h.count)},[s,l,u,d,f,n,m]}class RowsFilterSwitcher extends SvelteComponent{constructor(e){super(),init(this,e,instance$11,create_fragment$12,safe_not_equal,{icon:0,label:1,values:2,field:3,count:4})}}const CompareModelTab_svelte_svelte_type_style_lang="";function get_each_context$c(o,e,t){const n=o.slice();return n[46]=e[t],n}function create_else_block$e(o){let e,t;return e=new FormDatabaseSelect({props:{conidName:"sourceConid",name:"sourceDatabase",label:"Source database",templateProps:{noMargin:!0},isNative:!0,notSelected:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$x(o){let e,t;return e=new FormSelectField({props:{name:"sourceDatabase",label:"Source DB model",templateProps:{noMargin:!0},isNative:!0,options:(o[13]||[]).map(func$6),notSelected:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&8192&&(a.options=(n[13]||[]).map(func$6)),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$8(o){let e,t,n,r;return t=new FontIcon({props:{icon:"icon arrow-right-bold"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(`
                Deploy (experimental)`),attr(e,"class","arrow svelte-lmwisg")},m(a,s){insert(a,e,s),mount_component(t,e,null),insert(a,n,s),r=!0},p:noop$1,i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&(detach(e),detach(n)),destroy_component(t)}}}function create_each_block$c(o){let e,t;function n(...r){return o[36](o[46],...r)}return e=new RowsFilterSwitcher({props:{icon:lib.DbDiffCompareDefs[o[46]].icon,label:lib.DbDiffCompareDefs[o[46]].plural,values:o[15],field:"hide_"+o[46],count:filterDiffRowsByFlag(o[5].filter(n),o[6],o[46]).length}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[0]&96&&(s.count=filterDiffRowsByFlag(o[5].filter(n),o[6],o[46]).length),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$9(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F,D;n=new FormConnectionSelect({props:{name:"sourceConid",label:"Source server",templateProps:{noMargin:!0},isNative:!0,allowChooseModel:!0,notSelected:!0}});const x=[create_if_block$x,create_else_block$e],B=[];function K(z,Y){var V;return((V=z[6])==null?void 0:V.sourceConid)=="__model"?0:1}s=K(o),l=B[s]=x[s](o),f=new InlineButton({props:{$$slots:{default:[create_default_slot_3$8]},$$scope:{ctx:o}}}),f.$on("click",o[0]),p=new FormConnectionSelect({props:{name:"targetConid",label:"Target server",templateProps:{noMargin:!0},isNative:!0,notSelected:!0}}),v=new FormDatabaseSelect({props:{conidName:"targetConid",name:"targetDatabase",label:"Target database",templateProps:{noMargin:!0},isNative:!0,notSelected:!0}});function U(z){o[35](z)}let G={placeholder:"Search tables or objects"};o[2]!==void 0&&(G.value=o[2]),E=new SearchInput({props:G}),binding_callbacks.push(()=>bind(E,"value",U)),T=new RowsFilterSwitcher({props:{icon:"img add",label:"Added",values:o[15],field:"hideAdded",count:filterDiffRowsByFlag(o[5].filter(func_1$5),o[6],"added").length}}),S=new RowsFilterSwitcher({props:{icon:"img minus",label:"Removed",values:o[15],field:"hideRemoved",count:filterDiffRowsByFlag(o[5].filter(func_2$2),o[6],"removed").length}}),R=new RowsFilterSwitcher({props:{icon:"img changed",label:"Changed",values:o[15],field:"hideChanged",count:filterDiffRowsByFlag(o[5].filter(func_3$1),o[6],"changed").length}}),M=new RowsFilterSwitcher({props:{icon:"img equal",label:"Equal",values:o[15],field:"hideEqual",count:filterDiffRowsByFlag(o[5].filter(func_4),o[6],"equal").length}});let W=ensure_array_like(_.keys(lib.DbDiffCompareDefs)),q=[];for(let z=0;z<W.length;z+=1)q[z]=create_each_block$c(get_each_context$c(o,W,z));const H=z=>transition_out(q[z],1,1,()=>{q[z]=null});return{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),l.c(),u=space(),d=element("div"),create_component(f.$$.fragment),m=space(),h=element("div"),create_component(p.$$.fragment),g=space(),b=element("div"),create_component(v.$$.fragment),y=space(),C=element("div"),create_component(E.$$.fragment),k=space(),create_component(T.$$.fragment),$=space(),create_component(S.$$.fragment),I=space(),create_component(R.$$.fragment),N=space(),create_component(M.$$.fragment),F=space();for(let z=0;z<q.length;z+=1)q[z].c();attr(t,"class","col-3"),attr(a,"class","col-3"),attr(d,"class","deployButton svelte-lmwisg"),attr(h,"class","col-3"),attr(b,"class","col-3"),attr(e,"class","topbar svelte-lmwisg"),attr(C,"class","filters svelte-lmwisg")},m(z,Y){insert(z,e,Y),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),B[s].m(a,null),append(e,u),append(e,d),mount_component(f,d,null),append(e,m),append(e,h),mount_component(p,h,null),append(e,g),append(e,b),mount_component(v,b,null),insert(z,y,Y),insert(z,C,Y),mount_component(E,C,null),append(C,k),mount_component(T,C,null),append(C,$),mount_component(S,C,null),append(C,I),mount_component(R,C,null),append(C,N),mount_component(M,C,null),append(C,F);for(let V=0;V<q.length;V+=1)q[V]&&q[V].m(C,null);D=!0},p(z,Y){let V=s;s=K(z),s===V?B[s].p(z,Y):(group_outros(),transition_out(B[V],1,1,()=>{B[V]=null}),check_outros(),l=B[s],l?l.p(z,Y):(l=B[s]=x[s](z),l.c()),transition_in(l,1),l.m(a,null));const J={};Y[1]&262144&&(J.$$scope={dirty:Y,ctx:z}),f.$set(J);const Q={};!A&&Y[0]&4&&(A=!0,Q.value=z[2],add_flush_callback(()=>A=!1)),E.$set(Q);const X={};Y[0]&96&&(X.count=filterDiffRowsByFlag(z[5].filter(func_1$5),z[6],"added").length),T.$set(X);const ie={};Y[0]&96&&(ie.count=filterDiffRowsByFlag(z[5].filter(func_2$2),z[6],"removed").length),S.$set(ie);const ce={};Y[0]&96&&(ce.count=filterDiffRowsByFlag(z[5].filter(func_3$1),z[6],"changed").length),R.$set(ce);const de={};if(Y[0]&96&&(de.count=filterDiffRowsByFlag(z[5].filter(func_4),z[6],"equal").length),M.$set(de),Y[0]&32864){W=ensure_array_like(_.keys(lib.DbDiffCompareDefs));let se;for(se=0;se<W.length;se+=1){const me=get_each_context$c(z,W,se);q[se]?(q[se].p(me,Y),transition_in(q[se],1)):(q[se]=create_each_block$c(me),q[se].c(),transition_in(q[se],1),q[se].m(C,null))}for(group_outros(),se=W.length;se<q.length;se+=1)H(se);check_outros()}},i(z){if(!D){transition_in(n.$$.fragment,z),transition_in(l),transition_in(f.$$.fragment,z),transition_in(p.$$.fragment,z),transition_in(v.$$.fragment,z),transition_in(E.$$.fragment,z),transition_in(T.$$.fragment,z),transition_in(S.$$.fragment,z),transition_in(R.$$.fragment,z),transition_in(M.$$.fragment,z);for(let Y=0;Y<W.length;Y+=1)transition_in(q[Y]);D=!0}},o(z){transition_out(n.$$.fragment,z),transition_out(l),transition_out(f.$$.fragment,z),transition_out(p.$$.fragment,z),transition_out(v.$$.fragment,z),transition_out(E.$$.fragment,z),transition_out(T.$$.fragment,z),transition_out(S.$$.fragment,z),transition_out(R.$$.fragment,z),transition_out(M.$$.fragment,z),q=q.filter(Boolean);for(let Y=0;Y<q.length;Y+=1)transition_out(q[Y]);D=!1},d(z){z&&(detach(e),detach(y),detach(C)),destroy_component(n),B[s].d(),destroy_component(f),destroy_component(p),destroy_component(v),destroy_component(E),destroy_component(T),destroy_component(S),destroy_component(R),destroy_component(M),destroy_each(q,z)}}}function create__1_slot_3(o){let e,t,n,r,a;function s(...l){return o[37](o[45],...l)}return{c(){e=element("input"),attr(e,"type","checkbox"),attr(e,"slot","1"),e.disabled=t=o[45].state=="equal",e.checked=n=!!o[6][`isChecked_${o[45].identifier}`]},m(l,u){insert(l,e,u),r||(a=listen(e,"change",s),r=!0)},p(l,u){o=l,u[1]&16384&&t!==(t=o[45].state=="equal")&&(e.disabled=t),u[0]&64|u[1]&16384&&n!==(n=!!o[6][`isChecked_${o[45].identifier}`])&&(e.checked=n)},d(l){l&&detach(e),r=!1,a()}}}function create_default_slot_1$g(o){let e,t;return e=new FontIcon({props:{icon:"icon check-all"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot_3(o){let e,t;return e=new InlineButton({props:{$$slots:{default:[create_default_slot_1$g]},$$scope:{ctx:o}}}),e.$on("click",o[14]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&262144&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__3_slot_1(o){let e,t,n=o[45].typeName+"",r,a;return e=new FontIcon({props:{icon:o[45].typeIcon}}),{c(){create_component(e.$$.fragment),t=space(),r=text(n)},m(s,l){mount_component(e,s,l),insert(s,t,l),insert(s,r,l),a=!0},p(s,l){const u={};l[1]&16384&&(u.icon=s[45].typeIcon),e.$set(u),(!a||l[1]&16384)&&n!==(n=s[45].typeName+"")&&set_data(r,n)},i(s){a||(transition_in(e.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),a=!1},d(s){s&&(detach(t),detach(r)),destroy_component(e,s)}}}function create__1_slot_2(o){let e,t,n,r,a,s,l;t=new FormProviderCore({props:{values:o[15],$$slots:{default:[create_default_slot_2$9]},$$scope:{ctx:o}}});function u(f){o[38](f)}let d={rows:o[4],selectable:!0,disableFocusOutline:!0,columns:[{fieldName:"isChecked",header:"",width:"50px",slot:1,headerSlot:2},{fieldName:"type",header:"Type",width:"100px",slot:3},{fieldName:"sourceSchemaName",header:"Schema"},{fieldName:"sourcePureName",header:"Name"},{fieldName:"state",header:"Action",width:"100px"},{fieldName:"targetSchemaName",header:"Schema"},{fieldName:"targetPureName",header:"Name"}],$$slots:{3:[create__3_slot_1,({row:f})=>({45:f}),({row:f})=>[0,f?16384:0]],2:[create__2_slot_3],1:[create__1_slot_3,({row:f})=>({45:f}),({row:f})=>[0,f?16384:0]]},$$scope:{ctx:o}};return o[1]!==void 0&&(d.selectedIndex=o[1]),a=new ScrollableTableControl({props:d}),binding_callbacks.push(()=>bind(a,"selectedIndex",u)),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),create_component(a.$$.fragment),attr(r,"class","tableWrapper svelte-lmwisg"),attr(e,"slot","1"),attr(e,"class","flexcol svelte-lmwisg")},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),append(e,r),mount_component(a,r,null),l=!0},p(f,m){const h={};m[0]&8292|m[1]&262144&&(h.$$scope={dirty:m,ctx:f}),t.$set(h);const p={};m[0]&16&&(p.rows=f[4]),m[0]&64|m[1]&278528&&(p.$$scope={dirty:m,ctx:f}),!s&&m[0]&2&&(s=!0,p.selectedIndex=f[1],add_flush_callback(()=>s=!1)),a.$set(p)},i(f){l||(transition_in(t.$$.fragment,f),transition_in(a.$$.fragment,f),l=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(a.$$.fragment,f),l=!1},d(f){f&&detach(e),destroy_component(t),destroy_component(a)}}}function create__1_slot_1$2(o){var n,r,a,s,l,u;let e,t;return e=new DiffView({props:{leftTitle:(r=(n=o[4][o[1]])==null?void 0:n.target)==null?void 0:r.pureName,rightTitle:(s=(a=o[4][o[1]])==null?void 0:a.source)==null?void 0:s.pureName,leftText:lib.getCreateObjectScript((l=o[4][o[1]])==null?void 0:l.target,o[3]),rightText:lib.getCreateObjectScript((u=o[4][o[1]])==null?void 0:u.source,o[3])}}),{c(){create_component(e.$$.fragment)},m(d,f){mount_component(e,d,f),t=!0},p(d,f){var h,p,g,b,v,y;const m={};f[0]&18&&(m.leftTitle=(p=(h=d[4][d[1]])==null?void 0:h.target)==null?void 0:p.pureName),f[0]&18&&(m.rightTitle=(b=(g=d[4][d[1]])==null?void 0:g.source)==null?void 0:b.pureName),f[0]&26&&(m.leftText=lib.getCreateObjectScript((v=d[4][d[1]])==null?void 0:v.target,d[3])),f[0]&26&&(m.rightText=lib.getCreateObjectScript((y=d[4][d[1]])==null?void 0:y.source,d[3])),e.$set(m)},i(d){t||(transition_in(e.$$.fragment,d),t=!0)},o(d){transition_out(e.$$.fragment,d),t=!1},d(d){destroy_component(e,d)}}}function create__2_slot_2(o){let e,t;return e=new SqlEditor({props:{readOnly:!0,value:o[8]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&256&&(a.value=n[8]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$8(o){let e,t;return{c(){e=element("input"),attr(e,"type","checkbox"),e.disabled=!0,attr(e,"slot","1"),e.checked=t=!!o[45].sourceNotNull},m(n,r){insert(n,e,r)},p(n,r){r[1]&16384&&t!==(t=!!n[45].sourceNotNull)&&(e.checked=t)},d(n){n&&detach(e)}}}function create__2_slot_1$2(o){let e,t;return{c(){e=element("input"),attr(e,"type","checkbox"),e.disabled=!0,attr(e,"slot","2"),e.checked=t=!!o[45].targetNotNull},m(n,r){insert(n,e,r)},p(n,r){r[1]&16384&&t!==(t=!!n[45].targetNotNull)&&(e.checked=t)},d(n){n&&detach(e)}}}function create__3_slot$1(o){let e,t;return e=new ScrollableTableControl({props:{rows:o[9],disableFocusOutline:!0,columns:[{fieldName:"sourceColumnName",header:"Name",width:"100px"},{fieldName:"sourceDataType",header:"Type"},{fieldName:"sourceNotNull",header:"Not null",slot:1},{fieldName:"state",header:"Action",width:"100px"},{fieldName:"targetColumnName",header:"Schema"},{fieldName:"targetDataType",header:"Name"},{fieldName:"targetNotNull",header:"Not null",slot:2}],$$slots:{2:[create__2_slot_1$2,({row:n})=>({45:n}),({row:n})=>[0,n?16384:0]],1:[create__1_slot$8,({row:n})=>({45:n}),({row:n})=>[0,n?16384:0]]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&512&&(a.rows=n[9]),r[1]&278528&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$7(o){let e,t;return e=new TabControl({props:{tabs:[{label:"DDL",slot:1},{label:"Synchronize script",slot:2},{label:"Columns",slot:3}],$$slots:{3:[create__3_slot$1],2:[create__2_slot_2],1:[create__1_slot_1$2]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&794|r[1]&262144&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$q(o){let e,t,n,r,a;return t=new VerticalSplitter({props:{$$slots:{2:[create__2_slot$7],1:[create__1_slot_2]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","wrapper svelte-lmwisg")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=action_destroyer(contextMenu.call(null,e,o[16])),r=!0)},p(s,l){const u={};l[0]&9086|l[1]&262144&&(u.$$scope={dirty:l,ctx:s}),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,a()}}}function create_toolstrip_slot$6(o){let e,t,n,r,a,s,l,u;return e=new ToolStripCommandButton({props:{command:"compareModels.reportDiff"}}),n=new ToolStripCommandButton({props:{command:"compareModels.swap"}}),a=new ToolStripCommandButton({props:{command:"compareModels.deploy"}}),l=new ToolStripCommandButton({props:{command:"compareModels.refresh"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p:noop$1,i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create_fragment$11(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$6],default:[create_default_slot$q]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&9086|r[1]&262144&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$8=()=>getActiveComponent("CompareModelTab");registerCommand({id:"compareModels.reportDiff",category:"Compare models",toolbarName:"Report",name:"Report diff",icon:"icon report",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$8().showReport(),testEnabled:()=>getCurrentEditor$8()!=null});registerCommand({id:"compareModels.swap",category:"Compare models",toolbarName:"Swap",name:"Swap source & target",icon:"icon swap",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$8().swap(),testEnabled:()=>getCurrentEditor$8()!=null});registerCommand({id:"compareModels.deploy",category:"Compare models",toolbarName:"Deploy",name:"Deploy",icon:"icon deploy",group:"save",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$8().deploy(),testEnabled:()=>getCurrentEditor$8()!=null});registerCommand({id:"compareModels.refresh",category:"Compare models",toolbarName:"Refresh",name:"Refresh models",icon:"icon reload",toolbar:!0,isRelatedToTab:!0,onClick:()=>getCurrentEditor$8().refreshModels(),testEnabled:()=>getCurrentEditor$8()!=null});function stateOrder(o){switch(o){case"added":return 1;case"changed":return 2;case"removed":return 3;case"equal":return 4}return 5}function getAlterObjectScript(o,e,t,n,r,a){if(!e&&!t||!a)return{sql:""};if(o=="tables")return lib.getAlterTableScript(e,t,n,r,r,a);const s=a.createDumper();return e&&s.dropSqlObject(e),t&&s.createSqlObject(t),{sql:s.s}}function filterDiffRowsByFlag(o,e,t=null){let n=o;t!="added"&&(n=n.filter(r=>!(e!=null&&e.hideAdded)||r.state!="added")),t!="removed"&&(n=n.filter(r=>!(e!=null&&e.hideRemoved)||r.state!="removed")),t!="changed"&&(n=n.filter(r=>!(e!=null&&e.hideChanged)||r.state!="changed")),t!="equal"&&(n=n.filter(r=>!(e!=null&&e.hideEqual)||r.state!="equal"));for(const r of _.keys(lib.DbDiffCompareDefs))t!=r&&e&&e[`hide_${r}`]&&(n=n.filter(a=>a.objectTypeField!=r));return n}function filterDiffRows(o,e,t){let n=o.filter(r=>lib.filterName(t,r.sourcePureName,r.targetPureName));return n=filterDiffRowsByFlag(o,e),n}const func$6=o=>({label:o.name,value:`archive:${o.name}`}),func_1$5=o=>o.state=="added",func_2$2=o=>o.state=="removed",func_3$1=o=>o.state=="changed",func_4=o=>o.state=="equal";function instance$10(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=noop$1,A=()=>(E(),E=subscribe(u,Ue=>t(32,C=Ue)),u),k,T=noop$1,$=()=>(T(),T=subscribe(a,Ue=>t(33,k=Ue)),a),S,I=noop$1,R=()=>(I(),I=subscribe(r,Ue=>t(34,S=Ue)),r),N,M=noop$1,F=()=>(M(),M=subscribe(b,Ue=>t(13,N=Ue)),b);component_subscribe(o,extensions,Ue=>t(31,y=Ue)),o.$$.on_destroy.push(()=>E()),o.$$.on_destroy.push(()=>T()),o.$$.on_destroy.push(()=>I()),o.$$.on_destroy.push(()=>M());var D=this&&this.__awaiter||function(Ue,fe,Ie,We){function $e(Le){return Le instanceof Ie?Le:new Ie(function(ze){ze(Le)})}return new(Ie||(Ie=Promise))(function(Le,ze){function re(Ze){try{Be(We.next(Ze))}catch(Pe){ze(Pe)}}function ge(Ze){try{Be(We.throw(Ze))}catch(Pe){ze(Pe)}}function Be(Ze){Ze.done?Le(Ze.value):$e(Ze.value).then(re,ge)}Be((We=We.apply(Ue,fe||[])).next())})},x,B,K,U,G;let{tabid:W}=e,q=0,H="";const z=createActivator("CompareModelTab",!0);function Y(){return D(this,void 0,void 0,function*(){saveFileToDisk(Ue=>D(this,void 0,void 0,function*(){yield apiCall("database-connections/generate-db-diff-report",{filePath:Ue,sourceConid:v==null?void 0:v.sourceConid,sourceDatabase:v==null?void 0:v.sourceDatabase,targetConid:v==null?void 0:v.targetConid,targetDatabase:v==null?void 0:v.targetDatabase})}))})}function V(){set_store_value(ue,v=Object.assign(Object.assign({},v),{sourceConid:v==null?void 0:v.targetConid,sourceDatabase:v==null?void 0:v.targetDatabase,targetConid:v==null?void 0:v.sourceConid,targetDatabase:v==null?void 0:v.sourceDatabase}),v)}function J(){h.some(fe=>v[`isChecked_${fe.identifier}`])?set_store_value(ue,v=_.omitBy(v,(fe,Ie)=>Ie.startsWith("isChecked_")),v):set_store_value(ue,v=Object.assign(Object.assign({},v),_.fromPairs(h.filter(fe=>fe.state!="equal").map(fe=>[`isChecked_${fe.identifier}`,!0]))),v)}function Q(){apiCall("database-connections/sync-model",{conid:v==null?void 0:v.targetConid,database:v==null?void 0:v.targetDatabase}),apiCall("database-connections/sync-model",{conid:v==null?void 0:v.sourceConid,database:v==null?void 0:v.sourceDatabase})}function X(Ue){return D(this,void 0,void 0,function*(){const fe=v==null?void 0:v.targetConid,Ie=v==null?void 0:v.targetDatabase,We=yield apiCall("database-connections/run-script",{conid:fe,database:Ie,sql:Ue,useTransaction:!0}),{errorMessage:$e}=We||{};$e?showModal(ErrorMessageModal,{title:"Error when saving",message:$e}):(set_store_value(ue,v=_.omitBy(v,(Le,ze)=>ze.startsWith("isChecked_")),v),yield apiCall("database-connections/sync-model",{conid:fe,database:Ie}),showSnackbarSuccess("Saved to database"))})}function ie(){const Ue=lib.DatabaseAnalyser.createEmptyStructure(),fe=lib.DatabaseAnalyser.createEmptyStructure();for(const Ie of h.filter(We=>v[`isChecked_${We.identifier}`]))Ie.source&&Ue[Ie.objectTypeField].push(Ie.source),Ie.target&&fe[Ie.objectTypeField].push(Ie.target);return lib.getAlterDatabaseScript(fe,Ue,n,l,s,d).sql}function ce(){const Ue=ie();showModal(ConfirmSqlModal,{sql:Ue,onConfirm:()=>{X(Ue)},engine:d.engine})}const{editorState:de,editorValue:se,setEditorData:me}=useEditorData({tabid:W}),ue=Object.assign(Object.assign({},se),{update:me,set:me});component_subscribe(o,ue,Ue=>t(6,v=Ue)),registerMenu({command:"compareModels.deploy"},{divider:!0},{command:"compareModels.refresh"},{command:"compareModels.swap"},{divider:!0},{command:"compareModels.reportDiff"});const he=getContextMenu();function pe(Ue){H=Ue,t(2,H)}const Oe=(Ue,fe)=>fe.objectTypeField==Ue,qe=(Ue,fe)=>{set_store_value(ue,v={...v,[`isChecked_${Ue.identifier}`]:fe.target.checked},v)};function et(Ue){q=Ue,t(1,q)}return o.$$set=Ue=>{"tabid"in Ue&&t(17,W=Ue.tabid)},o.$$.update=()=>{o.$$.dirty[0]&64&&t(29,n=(v==null?void 0:v.sourceConid)=="__model"?lib.modelCompareDbDiffOptions:{}),o.$$.dirty[0]&64&&R(t(12,r=useDatabaseInfo({conid:v==null?void 0:v.sourceConid,database:v==null?void 0:v.sourceDatabase}))),o.$$.dirty[0]&64&&$(t(11,a=useDatabaseInfo({conid:v==null?void 0:v.targetConid,database:v==null?void 0:v.targetDatabase}))),o.$$.dirty[1]&8&&t(27,s=lib.generateDbPairingId(S)),o.$$.dirty[1]&4&&t(28,l=lib.generateDbPairingId(k)),o.$$.dirty[0]&64&&A(t(10,u=useConnectionInfo({conid:v==null?void 0:v.targetConid}))),o.$$.dirty[1]&3&&t(3,d=lib.findEngineDriver(C,y)),o.$$.dirty[0]&939524096&&t(30,f=lib.matchPairedObjects(s,l,n)),o.$$.dirty[0]&1744830472&&t(5,m=_.sortBy(lib.computeDbDiffRows(s,f,n,d),Ue=>stateOrder(Ue.state))),o.$$.dirty[0]&100&&t(4,h=filterDiffRows(m,v,H)),o.$$.dirty[0]&549453850&&t(9,p=lib.computeTableDiffColumns(t(22,x=h[q])===null||x===void 0?void 0:x.source,t(23,B=h[q])===null||B===void 0?void 0:B.target,n,d)),o.$$.dirty[0]&922746906&&t(8,g=getAlterObjectScript(t(24,K=h[q])===null||K===void 0?void 0:K.objectTypeField,t(25,U=h[q])===null||U===void 0?void 0:U.target,t(26,G=h[q])===null||G===void 0?void 0:G.source,n,l,d).sql),o.$$.dirty[0]&131136&&changeTab(W,Ue=>Object.assign(Object.assign({},Ue),{title:`${(v==null?void 0:v.sourceDatabase)||"???"}=>${(v==null?void 0:v.targetDatabase)||"???"}`,props:Object.assign(Object.assign({},Ue.props),{conid:v==null?void 0:v.targetConid,database:v==null?void 0:v.targetDatabase})}))},F(t(7,b=useArchiveFolders())),[ce,q,H,d,h,m,v,b,g,p,u,a,r,N,J,ue,he,W,z,Y,V,Q,x,B,K,U,G,s,l,n,f,y,C,k,S,pe,Oe,qe,et]}class CompareModelTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$10,create_fragment$11,safe_not_equal,{tabid:17,activator:18,showReport:19,swap:20,refreshModels:21,deploy:0},null,[-1,-1])}get activator(){return this.$$.ctx[18]}get showReport(){return this.$$.ctx[19]}get swap(){return this.$$.ctx[20]}get refreshModels(){return this.$$.ctx[21]}get deploy(){return this.$$.ctx[0]}}const CompareModelTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:CompareModelTab},Symbol.toStringTag,{value:"Module"})),ChangelogTab_svelte_svelte_type_style_lang="";function create_else_block$d(o){let e,t,n;return t=new Markdown({props:{source:o[1]||""}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","svelte-skjeqm")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&2&&(s.source=r[1]||""),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block$w(o){let e,t;return e=new LoadingInfo({props:{message:"Loading changelog"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$10(o){let e,t,n,r;const a=[create_if_block$w,create_else_block$d],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}globalThis&&globalThis.__awaiter;const matchingProps$3=[];function instance$$(o,e,t){var n=this&&this.__awaiter||function(l,u,d,f){function m(h){return h instanceof d?h:new d(function(p){p(h)})}return new(d||(d=Promise))(function(h,p){function g(y){try{v(f.next(y))}catch(C){p(C)}}function b(y){try{v(f.throw(y))}catch(C){p(C)}}function v(y){y.done?h(y.value):m(y.value).then(g,b)}v((f=f.apply(l,u||[])).next())})};let r=!1,a=null;const s=()=>n(void 0,void 0,void 0,function*(){t(0,r=!0);const l=yield apiCall("config/changelog");t(1,a=l),t(0,r=!1)});return onMount(()=>{s()}),[r,a]}class ChangelogTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$$,create_fragment$10,safe_not_equal,{})}}const ChangelogTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ChangelogTab,matchingProps:matchingProps$3},Symbol.toStringTag,{value:"Module"})),DiagramDesignerReference_svelte_svelte_type_style_lang="";function create_if_block_1$m(o){let e,t;return{c(){e=svg_element("polyline"),attr(e,"points",t=`
      ${o[0].x},${o[0].y}
      ${o[1].x},${o[1].y}
  `),attr(e,"class","svelte-j16aco")},m(n,r){insert(n,e,r)},p(n,r){r&3&&t!==(t=`
      ${n[0].x},${n[0].y}
      ${n[1].x},${n[1].y}
  `)&&attr(e,"points",t)},d(n){n&&detach(e)}}}function create_if_block$v(o){let e,t,n,r;return{c(){e=svg_element("g"),t=svg_element("polygon"),attr(t,"transform",n=`rotate(${180+o[3]*180/Math.PI})`),attr(t,"points",`
      0,0
      ${arwi},${arhi/2}
      ${arwi},${-arhi/2}
  `),attr(t,"class","svelte-j16aco"),attr(e,"transform",r=`translate(${o[2].x} ${o[2].y})`)},m(a,s){insert(a,e,s),append(e,t)},p(a,s){s&8&&n!==(n=`rotate(${180+a[3]*180/Math.PI})`)&&attr(t,"transform",n),s&4&&r!==(r=`translate(${a[2].x} ${a[2].y})`)&&attr(e,"transform",r)},d(a){a&&detach(e)}}}function create_fragment$$(o){let e,t,n=o[0]&&o[1]&&create_if_block_1$m(o),r=o[2]&&create_if_block$v(o);return{c(){e=svg_element("svg"),n&&n.c(),t=empty(),r&&r.c(),attr(e,"class","svelte-j16aco")},m(a,s){insert(a,e,s),n&&n.m(e,null),append(e,t),r&&r.m(e,null)},p(a,[s]){a[0]&&a[1]?n?n.p(a,s):(n=create_if_block_1$m(a),n.c(),n.m(e,t)):n&&(n.d(1),n=null),a[2]?r?r.p(a,s):(r=create_if_block$v(a),r.c(),r.m(e,null)):r&&(r.d(1),r=null)},i:noop$1,o:noop$1,d(a){a&&detach(e),n&&n.d(),r&&r.d()}}}const arwi=12,arhi=12;function instance$_(o,e,t){let{reference:n}=e,{onRemoveReference:r}=e,{onChangeReference:a}=e,{designer:s}=e,{domTables:l}=e,{settings:u}=e,d=null,f=null,m=null,h=0;function p(){const{designerId:g,sourceId:b,targetId:v,columns:y,joinType:C}=n,E=l[b],A=l[v];if(!E||!A)return null;const k=E.getRect(),T=A.getRect();if(!k||!T)return null;t(0,d={x:(k.left+k.right)/2,y:(k.top+k.bottom)/2}),t(1,f={x:(T.left+T.right)/2,y:(T.top+T.bottom)/2}),t(2,m=intersectLineBox(d,f,T)[0]),t(3,h=Math.atan2(f.y-d.y,f.x-d.x))}return o.$$set=g=>{"reference"in g&&t(4,n=g.reference),"onRemoveReference"in g&&t(5,r=g.onRemoveReference),"onChangeReference"in g&&t(6,a=g.onChangeReference),"designer"in g&&t(7,s=g.designer),"domTables"in g&&t(8,l=g.domTables),"settings"in g&&t(9,u=g.settings)},o.$$.update=()=>{o.$$.dirty&256&&p()},[d,f,m,h,n,r,a,s,l,u,p]}class DiagramDesignerReference extends SvelteComponent{constructor(e){super(),init(this,e,instance$_,create_fragment$$,safe_not_equal,{reference:4,onRemoveReference:5,onChangeReference:6,designer:7,domTables:8,settings:9,recomputePosition:10})}get recomputePosition(){return this.$$.ctx[10]}}function create_fragment$_(o){let e,t;const n=[o[0],{settings:{updateFromDbInfo:!0,useDatabaseReferences:!0,allowAddAllReferences:!0,canExport:!0,canSelectTables:!0,allowChangeColor:!0,appendTableSystemMenu:!0,customizeStyle:!0,allowDefineVirtualReferences:!0,arrangeAlg:"springy"}},{referenceComponent:DiagramDesignerReference}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new Designer({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&1?get_spread_update(n,[s&1&&get_spread_object(a[0]),n[1],s&0&&{referenceComponent:DiagramDesignerReference}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function instance$Z(o,e,t){return o.$$set=n=>{t(0,e=assign(assign({},e),exclude_internal_props(n)))},e=exclude_internal_props(e),[e]}class DiagramDesigner extends SvelteComponent{constructor(e){super(),init(this,e,instance$Z,create_fragment$_,safe_not_equal,{})}}function create__1_slot$7(o){let e,t;return e=new DiagramDesigner({props:{value:o[2].value||{},conid:o[0],database:o[1],onChange:o[3],menu:createMenu}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.value=n[2].value||{}),r&1&&(a.conid=n[0]),r&2&&(a.database=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$p(o){let e,t;return e=new VerticalSplitter({props:{isSplitter:!1,$$slots:{1:[create__1_slot$7]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&524295&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot$5(o){let e,t,n,r,a,s,l,u,d,f;return e=new ToolStripCommandButton({props:{command:"designer.arrange"}}),n=new ToolStripSaveButton({props:{idPrefix:"diagram"}}),a=new ToolStripCommandButton({props:{command:"diagram.export"}}),l=new ToolStripCommandButton({props:{command:"diagram.undo"}}),d=new ToolStripCommandButton({props:{command:"diagram.redo"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment)},m(m,h){mount_component(e,m,h),insert(m,t,h),mount_component(n,m,h),insert(m,r,h),mount_component(a,m,h),insert(m,s,h),mount_component(l,m,h),insert(m,u,h),mount_component(d,m,h),f=!0},p:noop$1,i(m){f||(transition_in(e.$$.fragment,m),transition_in(n.$$.fragment,m),transition_in(a.$$.fragment,m),transition_in(l.$$.fragment,m),transition_in(d.$$.fragment,m),f=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(n.$$.fragment,m),transition_out(a.$$.fragment,m),transition_out(l.$$.fragment,m),transition_out(d.$$.fragment,m),f=!1},d(m){m&&(detach(t),detach(r),detach(s),detach(u)),destroy_component(e,m),destroy_component(n,m),destroy_component(a,m),destroy_component(l,m),destroy_component(d,m)}}}function create_fragment$Z(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$5],default:[create_default_slot$p]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&524295&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const getCurrentEditor$7=()=>getActiveComponent("DiagramTab");registerFileCommands({idPrefix:"diagram",category:"Diagram",getCurrentEditor:getCurrentEditor$7,folder:"diagrams",format:"json",fileExtension:"diagram",undoRedo:!0});function createMenu(){return[{command:"diagram.save"},{command:"diagram.saveAs"},{command:"designer.arrange"},{command:"diagram.export"},{divider:!0},{command:"diagram.undo"},{command:"diagram.redo"}]}function instance$Y(o,e,t){let n,r,{tabid:a}=e,{conid:s}=e,{database:l}=e,{initialArgs:u}=e;const d=createActivator("DiagramTab",!0);function f(){return a}function m(){return r.value||""}function h(){return n.canUndo}function p(){k({type:"undo"}),invalidateCommands()}function g(){return n.canRedo}function b(){k({type:"redo"}),invalidateCommands()}const v=(T,$)=>{k({type:"compute",useMerge:$,compute:S=>_.isFunction(T)?T(S):T}),invalidateCommands()},{editorState:y,editorValue:C,setEditorData:E}=useEditorData({tabid:a,onInitialData:T=>{k({type:"reset",value:T}),invalidateCommands()}});component_subscribe(o,y,T=>t(15,r=T));const[A,k]=createUndoReducer({tables:[],references:[]});return component_subscribe(o,A,T=>t(2,n=T)),o.$$set=T=>{"tabid"in T&&t(6,a=T.tabid),"conid"in T&&t(0,s=T.conid),"database"in T&&t(1,l=T.database),"initialArgs"in T&&t(7,u=T.initialArgs)},o.$$.update=()=>{o.$$.dirty&4&&E(n.value)},[s,l,n,v,y,A,a,u,d,f,m,h,p,g,b]}class DiagramTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$Y,create_fragment$Z,safe_not_equal,{tabid:6,conid:0,database:1,initialArgs:7,activator:8,getTabId:9,getData:10,canUndo:11,undo:12,canRedo:13,redo:14})}get activator(){return this.$$.ctx[8]}get getTabId(){return this.$$.ctx[9]}get getData(){return this.$$.ctx[10]}get canUndo(){return this.$$.ctx[11]}get undo(){return this.$$.ctx[12]}get canRedo(){return this.$$.ctx[13]}get redo(){return this.$$.ctx[14]}}const DiagramTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:DiagramTab},Symbol.toStringTag,{value:"Module"}));function create_fragment$Y(o){let e,t,n;function r(s){o[8](s)}let a={columns:[{fieldName:"rowNumber",header:"num",width:"60px"},...o[0].keyType.dbKeyFields.map(func$5)],rows:o[1],onLoadNext:o[3]?null:o[4],selectable:!0,singleLineRow:!0};return o[2]!==void 0&&(a.selectedIndex=o[2]),e=new ScrollableTableControl({props:a}),binding_callbacks.push(()=>bind(e,"selectedIndex",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,[l]){const u={};l&1&&(u.columns=[{fieldName:"rowNumber",header:"num",width:"60px"},...s[0].keyType.dbKeyFields.map(func$5)]),l&2&&(u.rows=s[1]),l&8&&(u.onLoadNext=s[3]?null:s[4]),!t&&l&4&&(t=!0,u.selectedIndex=s[2],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}const func$5=o=>({fieldName:o.name,header:o.name});function instance$X(o,e,t){var n=this&&this.__awaiter||function(y,C,E,A){function k(T){return T instanceof E?T:new E(function($){$(T)})}return new(E||(E=Promise))(function(T,$){function S(N){try{R(A.next(N))}catch(M){$(M)}}function I(N){try{R(A.throw(N))}catch(M){$(M)}}function R(N){N.done?T(N.value):k(N.value).then(S,I)}R((A=A.apply(y,C||[])).next())})};let{conid:r}=e,{database:a}=e,{keyInfo:s}=e,{onChangeSelected:l}=e,u=[],d=0,f=!1,m=!1,h=!1,p;const g=createRef(null);function b(){return n(this,void 0,void 0,function*(){if(!h){if(f){m=!0;return}f=!0;try{const y=yield apiCall("database-connections/load-key-table-range",{conid:r,database:a,key:s.key,cursor:d,count:10}),C=[...u];for(const E of y.items)s.keyColumn&&C.find(A=>A[s.keyColumn]==E[s.keyColumn])||C.push(Object.assign({rowNumber:C.length+1},E));t(1,u=C),d=y.cursor,t(3,h=d==0)}finally{f=!1}m&&(m=!1,yield tick(),b())}})}onMount(()=>{b()});function v(y){p=y,t(2,p)}return o.$$set=y=>{"conid"in y&&t(5,r=y.conid),"database"in y&&t(6,a=y.database),"keyInfo"in y&&t(0,s=y.keyInfo),"onChangeSelected"in y&&t(7,l=y.onChangeSelected)},o.$$.update=()=>{o.$$.dirty&134&&l&&u[p]&&g.get()!=p&&(g.set(p),l(u[p])),o.$$.dirty&1},[s,u,p,h,b,r,a,l,v]}class DbKeyTableControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$X,create_fragment$Y,safe_not_equal,{conid:5,database:6,keyInfo:0,onChangeSelected:7})}}const DbKeyTableControl$1=Object.freeze(Object.defineProperty({__proto__:null,default:DbKeyTableControl},Symbol.toStringTag,{value:"Module"})),DbKeyValueDetail_svelte_svelte_type_style_lang="";function create_if_block_1$l(o){let e,t;return e=new AceEditor({props:{readOnly:!o[2],value:o[1]&&o[1][o[0].name]}}),e.$on("input",o[5]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.readOnly=!n[2]),r&3&&(a.value=n[1]&&n[1][n[0].name]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$u(o){let e,t,n,r;return n=new JSONTree({props:{value:lib.safeJsonParse(o[1][o[0].name])||{error:"Not valid JSON"},expanded:!0}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),attr(t,"class","inner svelte-ouq9eo"),attr(e,"class","outer svelte-ouq9eo")},m(a,s){insert(a,e,s),append(e,t),mount_component(n,t,null),r=!0},p(a,s){const l={};s&3&&(l.value=lib.safeJsonParse(a[1][a[0].name])||{error:"Not valid JSON"}),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(n)}}}function create_fragment$X(o){let e,t,n=_.startCase(o[0].name)+"",r,a,s,l,u,d,f;s=new SelectField({props:{isNative:!0,value:o[3],options:[{label:"Text",value:"text"},{label:"JSON view",value:"json"}]}}),s.$on("change",o[4]);let m=o[3]=="text"&&create_if_block_1$l(o),h=o[3]=="json"&&create_if_block$u(o);return{c(){e=element("div"),t=element("div"),r=text(n),a=space(),create_component(s.$$.fragment),l=space(),u=element("div"),m&&m.c(),d=space(),h&&h.c(),attr(t,"class","colname svelte-ouq9eo"),attr(e,"class","colnamewrap svelte-ouq9eo"),attr(u,"class","colvalue svelte-ouq9eo")},m(p,g){insert(p,e,g),append(e,t),append(t,r),append(e,a),mount_component(s,e,null),insert(p,l,g),insert(p,u,g),m&&m.m(u,null),append(u,d),h&&h.m(u,null),f=!0},p(p,[g]){(!f||g&1)&&n!==(n=_.startCase(p[0].name)+"")&&set_data(r,n);const b={};g&8&&(b.value=p[3]),s.$set(b),p[3]=="text"?m?(m.p(p,g),g&8&&transition_in(m,1)):(m=create_if_block_1$l(p),m.c(),transition_in(m,1),m.m(u,d)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),p[3]=="json"?h?(h.p(p,g),g&8&&transition_in(h,1)):(h=create_if_block$u(p),h.c(),transition_in(h,1),h.m(u,null)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros())},i(p){f||(transition_in(s.$$.fragment,p),transition_in(m),transition_in(h),f=!0)},o(p){transition_out(s.$$.fragment,p),transition_out(m),transition_out(h),f=!1},d(p){p&&(detach(e),detach(l),detach(u)),destroy_component(s),m&&m.d(),h&&h.d()}}}function instance$W(o,e,t){let n="text",{column:r}=e,{item:a}=e,{onChangeItem:s=null}=e;const l=d=>{t(3,n=d.detail)},u=d=>{s&&s({...a,[r.name]:d.detail})};return o.$$set=d=>{"column"in d&&t(0,r=d.column),"item"in d&&t(1,a=d.item),"onChangeItem"in d&&t(2,s=d.onChangeItem)},[r,a,s,n,l,u]}class DbKeyValueDetail extends SvelteComponent{constructor(e){super(),init(this,e,instance$W,create_fragment$X,safe_not_equal,{column:0,item:1,onChangeItem:2})}}const DbKeyItemDetail_svelte_svelte_type_style_lang="";function get_each_context$b(o,e,t){const n=o.slice();return n[3]=e[t],n}function create_each_block$b(o){let e,t;return e=new DbKeyValueDetail({props:{item:o[1],column:o[3],onChangeItem:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.item=n[1]),r&1&&(a.column=n[3]),r&4&&(a.onChangeItem=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$W(o){let e,t,n=ensure_array_like(o[0]),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$b(get_each_context$b(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){e=element("div");for(let s=0;s<r.length;s+=1)r[s].c();attr(e,"class","props svelte-1hio2dm")},m(s,l){insert(s,e,l);for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(e,null);t=!0},p(s,[l]){if(l&7){n=ensure_array_like(s[0]);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$b(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$b(d),r[u].c(),transition_in(r[u],1),r[u].m(e,null))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function instance$V(o,e,t){let{dbKeyFields:n}=e,{item:r}=e,{onChangeItem:a=null}=e;return o.$$set=s=>{"dbKeyFields"in s&&t(0,n=s.dbKeyFields),"item"in s&&t(1,r=s.item),"onChangeItem"in s&&t(2,a=s.onChangeItem)},[n,r,a]}class DbKeyItemDetail extends SvelteComponent{constructor(e){super(),init(this,e,instance$V,create_fragment$W,safe_not_equal,{dbKeyFields:0,item:1,onChangeItem:2})}}const DbKeyAddItemModal_svelte_svelte_type_style_lang="";function create_default_slot_1$f(o){let e,t,n;return t=new DbKeyItemDetail({props:{dbKeyFields:o[0].keyType.dbKeyFields,item:o[1],onChangeItem:o[7]}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","container svelte-tt47mf")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&1&&(s.dbKeyFields=r[0].keyType.dbKeyFields),a&2&&(s.item=r[1]),a&2&&(s.onChangeItem=r[7]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_header_slot$5(o){let e;return{c(){e=text("Add item")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$5(o){let e,t,n,r;return e=new FormStyledButton({props:{value:"OK"}}),e.$on("click",o[6]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$o(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$5],header:[create_header_slot$5],default:[create_default_slot_1$f]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&515&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$V(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$o]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&523&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$U(o,e,t){const n=["keyInfo","label","onConfirm"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(p,g,b,v){function y(C){return C instanceof b?C:new b(function(E){E(C)})}return new(b||(b=Promise))(function(C,E){function A($){try{T(v.next($))}catch(S){E(S)}}function k($){try{T(v.throw($))}catch(S){E(S)}}function T($){$.done?C($.value):y($.value).then(A,k)}T((v=v.apply(p,g||[])).next())})};let{keyInfo:s}=e,{label:l}=e,{onConfirm:u}=e,d={};const f=()=>a(void 0,void 0,void 0,function*(){(yield u(d))&&closeCurrentModal()}),m=p=>f(),h=p=>{t(1,d=p)};return o.$$set=p=>{e=assign(assign({},e),exclude_internal_props(p)),t(3,r=compute_rest_props(e,n)),"keyInfo"in p&&t(0,s=p.keyInfo),"label"in p&&t(4,l=p.label),"onConfirm"in p&&t(5,u=p.onConfirm)},[s,d,f,r,l,u,m,h]}class DbKeyAddItemModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$U,create_fragment$V,safe_not_equal,{keyInfo:0,label:4,onConfirm:5})}}const DbKeyAddItemModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:DbKeyAddItemModal},Symbol.toStringTag,{value:"Module"})),DbKeyDetailTab_svelte_svelte_type_style_lang="";function create_catch_block$5(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$5(o){var M,F;let e,t,n,r,a,s=o[19].type+"",l,u,d,f,m,h,p,g,b,v,y,C,E,A,k;r=new FontIcon({props:{icon:lib.getIconForRedisType(o[19].type),padRight:!0}}),f=new TextField({props:{value:o[0],readOnly:!0}});function T(){return o[14](o[19])}h=new FormStyledButton({props:{value:`TTL:${o[19].ttl}`}}),h.$on("click",T);let $=o[19].type=="string"&&create_if_block_2$b(o),S=((M=o[19].keyType)==null?void 0:M.addMethod)&&((F=o[19].keyType)==null?void 0:F.showItemList)&&create_if_block_1$k(o);v=new FormStyledButton({props:{value:"Refresh"}}),v.$on("click",o[7]);const I=[create_if_block$t,create_else_block$c],R=[];function N(D,x){var B,K;return(B=D[19].keyType)!=null&&B.dbKeyFields&&((K=D[19].keyType)!=null&&K.showItemList)?0:1}return E=N(o),A=R[E]=I[E](o),{c(){e=element("div"),t=element("div"),n=element("div"),create_component(r.$$.fragment),a=space(),l=text(s),u=space(),d=element("div"),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),p=space(),$&&$.c(),g=space(),S&&S.c(),b=space(),create_component(v.$$.fragment),y=space(),C=element("div"),A.c(),attr(n,"class","type svelte-1awjfxf"),attr(d,"class","key-name svelte-1awjfxf"),attr(t,"class","top-panel svelte-1awjfxf"),attr(C,"class","content svelte-1awjfxf"),attr(e,"class","container svelte-1awjfxf")},m(D,x){insert(D,e,x),append(e,t),append(t,n),mount_component(r,n,null),append(n,a),append(n,l),append(t,u),append(t,d),mount_component(f,d,null),append(t,m),mount_component(h,t,null),append(t,p),$&&$.m(t,null),append(t,g),S&&S.m(t,null),append(t,b),mount_component(v,t,null),append(e,y),append(e,C),R[E].m(C,null),k=!0},p(D,x){var W,q;o=D;const B={};x&23&&(B.icon=lib.getIconForRedisType(o[19].type)),r.$set(B),(!k||x&23)&&s!==(s=o[19].type+"")&&set_data(l,s);const K={};x&1&&(K.value=o[0]),f.$set(K);const U={};x&23&&(U.value=`TTL:${o[19].ttl}`),h.$set(U),o[19].type=="string"?$?($.p(o,x),x&23&&transition_in($,1)):($=create_if_block_2$b(o),$.c(),transition_in($,1),$.m(t,g)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros()),(W=o[19].keyType)!=null&&W.addMethod&&((q=o[19].keyType)!=null&&q.showItemList)?S?(S.p(o,x),x&23&&transition_in(S,1)):(S=create_if_block_1$k(o),S.c(),transition_in(S,1),S.m(t,b)):S&&(group_outros(),transition_out(S,1,1,()=>{S=null}),check_outros());let G=E;E=N(o),E===G?R[E].p(o,x):(group_outros(),transition_out(R[G],1,1,()=>{R[G]=null}),check_outros(),A=R[E],A?A.p(o,x):(A=R[E]=I[E](o),A.c()),transition_in(A,1),A.m(C,null))},i(D){k||(transition_in(r.$$.fragment,D),transition_in(f.$$.fragment,D),transition_in(h.$$.fragment,D),transition_in($),transition_in(S),transition_in(v.$$.fragment,D),transition_in(A),k=!0)},o(D){transition_out(r.$$.fragment,D),transition_out(f.$$.fragment,D),transition_out(h.$$.fragment,D),transition_out($),transition_out(S),transition_out(v.$$.fragment,D),transition_out(A),k=!1},d(D){D&&detach(e),destroy_component(r),destroy_component(f),destroy_component(h),$&&$.d(),S&&S.d(),destroy_component(v),R[E].d()}}}function create_if_block_2$b(o){let e,t;return e=new FormStyledButton({props:{value:"Save",disabled:!o[5]}}),e.$on("click",o[8]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&32&&(a.disabled=!n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$k(o){let e,t;function n(){return o[15](o[19])}return e=new FormStyledButton({props:{value:"Add item"}}),e.$on("click",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_else_block$c(o){let e,t;return e=new AceEditor({props:{value:o[5]||o[19].value}}),e.$on("input",o[17]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&55&&(a.value=n[5]||n[19].value),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$t(o){let e,t;return e=new VerticalSplitter({props:{$$slots:{2:[create__2_slot$6],1:[create__1_slot$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1048607&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$6(o){let e,t;return e=new DbKeyTableControl({props:{conid:o[1],database:o[2],keyInfo:o[19],onChangeSelected:o[16]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.conid=n[1]),r&4&&(a.database=n[2]),r&23&&(a.keyInfo=n[19]),r&8&&(a.onChangeSelected=n[16]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$6(o){let e,t;return e=new DbKeyItemDetail({props:{dbKeyFields:o[19].keyType.dbKeyFields,item:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&23&&(a.dbKeyFields=n[19].keyType.dbKeyFields),r&8&&(a.item=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block$5(o){let e,t;return e=new LoadingInfo({props:{message:"Loading key details",wrapper:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$U(o){let e,t,n,r={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block$5,then:create_then_block$5,catch:create_catch_block$5,value:19,blocks:[,,,]};return handle_promise(t=apiCall("database-connections/load-key-info",{conid:o[1],database:o[2],key:o[0],refreshToken:o[4]}),r),{c(){e=empty(),r.block.c()},m(a,s){insert(a,e,s),r.block.m(a,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(a,[s]){o=a,r.ctx=o,s&23&&t!==(t=apiCall("database-connections/load-key-info",{conid:o[1],database:o[2],key:o[0],refreshToken:o[4]}))&&handle_promise(t,r)||update_await_block_branch(r,o,s)},i(a){n||(transition_in(r.block),n=!0)},o(a){for(let s=0;s<3;s+=1){const l=r.blocks[s];transition_out(l)}n=!1},d(a){a&&detach(e),r.block.d(a),r.token=null,r=null}}}globalThis&&globalThis.__awaiter;const matchingProps$2=["conid","database","isDefaultBrowser"],allowAddToFavorites$1=o=>!1;function getKeyText(o){const e=o.split(":");return e.length>1?e[e.length-1]:o}function instance$T(o,e,t){let n;component_subscribe(o,activeDbKeysStore,T=>t(13,n=T));var r=this&&this.__awaiter||function(T,$,S,I){function R(N){return N instanceof S?N:new S(function(M){M(N)})}return new(S||(S=Promise))(function(N,M){function F(B){try{x(I.next(B))}catch(K){M(K)}}function D(B){try{x(I.throw(B))}catch(K){M(K)}}function x(B){B.done?N(B.value):R(B.value).then(F,D)}x((I=I.apply(T,$||[])).next())})};let{tabid:a}=e,{conid:s}=e,{database:l}=e,{key:u}=e,{isDefaultBrowser:d=!1}=e;const f=createActivator("DbKeyDetailTab",!0);let m,h=0,p=null;function g(T){showModal(InputTextModal,{value:T.ttl,label:"New TTL value (-1=key never expires)",header:`Set TTL for key ${T.key}`,onConfirm:$=>r(this,void 0,void 0,function*(){const S=parseInt($);_.isNumber(S)&&(S<0?yield apiCall("database-connections/call-method",{conid:s,database:l,method:"persist",args:[T.key]}):yield apiCall("database-connections/call-method",{conid:s,database:l,method:"expire",args:[T.key,S]}),b())})})}function b(){t(5,p=null),t(4,h+=1)}function v(){return r(this,void 0,void 0,function*(){yield apiCall("database-connections/call-method",{conid:s,database:l,method:"set",args:[u,p]}),b()})}function y(T){return r(this,void 0,void 0,function*(){showModal(DbKeyAddItemModal,{keyInfo:T,onConfirm:$=>r(this,void 0,void 0,function*(){const S=yield apiCall("database-connections/call-method",{conid:s,database:l,method:T.keyType.addMethod,args:[T.key,...T.keyType.dbKeyFields.map(I=>$[I.name])]});return S.errorMessage?(showModal(ErrorMessageModal,{message:S.errorMessage}),!1):(b(),!0)})})})}const C=T=>g(T),E=T=>y(T),A=T=>{t(3,m=T)},k=T=>{t(5,p=T.detail)};return o.$$set=T=>{"tabid"in T&&t(10,a=T.tabid),"conid"in T&&t(1,s=T.conid),"database"in T&&t(2,l=T.database),"key"in T&&t(0,u=T.key),"isDefaultBrowser"in T&&t(11,d=T.isDefaultBrowser)},o.$$.update=()=>{o.$$.dirty&8198&&t(0,u=n[`${s}:${l}`]),o.$$.dirty&1025&&changeTab(a,T=>Object.assign(Object.assign({},T),{title:getKeyText(u)}))},[u,s,l,m,h,p,g,b,v,y,a,d,f,n,C,E,A,k]}class DbKeyDetailTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$T,create_fragment$U,safe_not_equal,{tabid:10,conid:1,database:2,key:0,isDefaultBrowser:11,activator:12})}get activator(){return this.$$.ctx[12]}}const DbKeyDetailTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites:allowAddToFavorites$1,default:DbKeyDetailTab,matchingProps:matchingProps$2},Symbol.toStringTag,{value:"Module"}));function create_else_block$b(o){let e,t;return e=new LoadingInfo({props:{message:"Loading data..."}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$s(o){let e,t;return e=new JslDataGrid({props:{jslid:o[0],listenInitializeFile:!0,onCustomGridRefresh:o[2],focusOnVisible:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.jslid=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$n(o){let e,t,n,r;const a=[create_if_block$s,create_else_block$b],s=[];function l(u,d){return u[0]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_toolstrip_slot$4(o){let e,t,n,r,a,s;return e=new ToolStripCommandButton({props:{command:"dataGrid.refresh"}}),n=new ToolStripCommandButton({props:{command:"queryData.stopLoading"}}),a=new ToolStripExportButton({props:{command:"jslTableGrid.export",quickExportHandlerRef:o[3]}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment)},m(l,u){mount_component(e,l,u),insert(l,t,u),mount_component(n,l,u),insert(l,r,u),mount_component(a,l,u),s=!0},p:noop$1,i(l){s||(transition_in(e.$$.fragment,l),transition_in(n.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(n.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(t),detach(r)),destroy_component(e,l),destroy_component(n,l),destroy_component(a,l)}}}function create_fragment$T(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$4],default:[create_default_slot$n]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&262145&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const matchingProps$1=["conid","database","pureName","sql"],getCurrentEditor$6=()=>getActiveComponent("QueryDataTab");registerCommand({id:"queryData.stopLoading",category:"Query data",name:"Stop loading",icon:"icon stop",testEnabled:()=>{var o;return(o=getCurrentEditor$6())===null||o===void 0?void 0:o.isLoading()},onClick:()=>getCurrentEditor$6().stopLoading()});function instance$S(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,$=>t(12,r=$)),n);o.$$.on_destroy.push(()=>a());var l=this&&this.__awaiter||function($,S,I,R){function N(M){return M instanceof I?M:new I(function(F){F(M)})}return new(I||(I=Promise))(function(M,F){function D(K){try{B(R.next(K))}catch(U){F(U)}}function x(K){try{B(R.throw(K))}catch(U){F(U)}}function B(K){K.done?M(K.value):N(K.value).then(D,x)}B((R=R.apply($,S||[])).next())})};const u=createActivator("QueryDataTab",!0);let{sql:d=void 0}=e,{pureName:f=void 0}=e,{schemaName:m=void 0}=e,{conid:h}=e,{database:p}=e,g,b=!1;function v($,S,I){return l(this,void 0,void 0,function*(){const R=yield apiCall("sessions/execute-reader",{conid:$,database:S,sql:I,appFolder:m,queryName:f});t(0,g=R.jslid),b=!0})}function y(){t(0,g=null),v(h,p,d)}const C=createQuickExportHandlerRef();function E(){b=!1,invalidateCommands()}function A(){return b}function k(){g&&(apiCall("sessions/stop-loading-reader",{jslid:g}),b=!1,invalidateCommands())}onDestroy(()=>{g&&b&&apiCall("sessions/stop-loading-reader",{jslid:g})});function T($){return $?(apiOn(`session-jslid-done-${$}`,E),()=>{apiOff(`session-initialize-file-${$}`,E)}):()=>{}}return o.$$set=$=>{"sql"in $&&t(5,d=$.sql),"pureName"in $&&t(6,f=$.pureName),"schemaName"in $&&t(7,m=$.schemaName),"conid"in $&&t(8,h=$.conid),"database"in $&&t(9,p=$.database)},o.$$.update=()=>{o.$$.dirty&800&&v(h,p,d),o.$$.dirty&1&&s(t(1,n=useEffect(()=>T(g)))),o.$$.dirty&4096},[g,n,y,C,u,d,f,m,h,p,A,k,r]}class QueryDataTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$S,create_fragment$T,safe_not_equal,{activator:4,sql:5,pureName:6,schemaName:7,conid:8,database:9,isLoading:10,stopLoading:11})}get activator(){return this.$$.ctx[4]}get isLoading(){return this.$$.ctx[10]}get stopLoading(){return this.$$.ctx[11]}}const QueryDataTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:QueryDataTab,matchingProps:matchingProps$1},Symbol.toStringTag,{value:"Module"}));function create_default_slot$m(o){let e;return{c(){e=text("Browse")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_fragment$S(o){let e,t,n,r,a;const s=[o[5],{value:o[2][o[0]]},{readOnly:!0},{disabled:o[1]}];let l={};for(let u=0;u<s.length;u+=1)l=assign(l,s[u]);return t=new TextField({props:l}),t.$on("click",o[4]),r=new InlineButton({props:{disabled:o[1],$$slots:{default:[create_default_slot$m]},$$scope:{ctx:o}}}),r.$on("click",o[4]),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","flex")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(u,[d]){const f=d&39?get_spread_update(s,[d&32&&get_spread_object(u[5]),d&5&&{value:u[2][u[0]]},s[2],d&2&&{disabled:u[1]}]):{};t.$set(f);const m={};d&2&&(m.disabled=u[1]),d&256&&(m.$$scope={dirty:d,ctx:u}),r.$set(m)},i(u){a||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),a=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),a=!1},d(u){u&&detach(e),destroy_component(t),destroy_component(r)}}}function instance$R(o,e,t){const n=["name","disabled"];let r=compute_rest_props(e,n),a;var s=this&&this.__awaiter||function(h,p,g,b){function v(y){return y instanceof g?y:new g(function(C){C(y)})}return new(g||(g=Promise))(function(y,C){function E(T){try{k(b.next(T))}catch($){C($)}}function A(T){try{k(b.throw(T))}catch($){C($)}}function k(T){T.done?y(T.value):v(T.value).then(E,A)}k((b=b.apply(h,p||[])).next())})};let{name:l}=e,{disabled:u=!1}=e;const{values:d,setFieldValue:f}=getFormContext();component_subscribe(o,d,h=>t(2,a=h));function m(){return s(this,void 0,void 0,function*(){const h=getElectron();if(!h)return;const p=yield h.showOpenDialog({defaultPath:d[l],properties:["showHiddenFiles","openFile"],filters:[{name:"All Files",extensions:["*"]}]}),g=p&&p[0];g&&f(l,g)})}return o.$$set=h=>{e=assign(assign({},e),exclude_internal_props(h)),t(5,r=compute_rest_props(e,n)),"name"in h&&t(0,l=h.name),"disabled"in h&&t(1,u=h.disabled)},[l,u,a,d,m,r]}class FormElectronFileSelectorRaw extends SvelteComponent{constructor(e){super(),init(this,e,instance$R,create_fragment$S,safe_not_equal,{name:0,disabled:1})}}function create_default_slot$l(o){let e,t;const n=[{name:o[1]},o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new FormElectronFileSelectorRaw({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&18?get_spread_update(n,[s&2&&{name:a[1]},s&16&&get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$R(o){let e,t,n;const r=[{type:"select"},{label:o[0]},o[2]];var a=o[3];function s(l){let u={$$slots:{default:[create_default_slot$l]},$$scope:{ctx:l}};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(e=construct_svelte_component(a,s(o))),{c(){e&&create_component(e.$$.fragment),t=empty()},m(l,u){e&&mount_component(e,l,u),insert(l,t,u),n=!0},p(l,[u]){const d=u&5?get_spread_update(r,[r[0],u&1&&{label:l[0]},u&4&&get_spread_object(l[2])]):{};if(u&50&&(d.$$scope={dirty:u,ctx:l}),a!==(a=l[3])){if(e){group_outros();const f=e;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(e=construct_svelte_component(a,s(l)),create_component(e.$$.fragment),transition_in(e.$$.fragment,1),mount_component(e,t.parentNode,t)):e=null}else a&&e.$set(d)},i(l){n||(e&&transition_in(e.$$.fragment,l),n=!0)},o(l){e&&transition_out(e.$$.fragment,l),n=!1},d(l){l&&detach(t),e&&destroy_component(e,l)}}}function instance$Q(o,e,t){const n=["label","name","templateProps"];let r=compute_rest_props(e,n),{label:a}=e,{name:s}=e,{templateProps:l={}}=e;const{template:u}=getFormContext();return o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(4,r=compute_rest_props(e,n)),"label"in d&&t(0,a=d.label),"name"in d&&t(1,s=d.name),"templateProps"in d&&t(2,l=d.templateProps)},[a,s,l,u,r]}class FormElectronFileSelector extends SvelteComponent{constructor(e){super(),init(this,e,instance$Q,create_fragment$R,safe_not_equal,{label:0,name:1,templateProps:2})}}function get_each_context$a(o,e,t){const n=o.slice();return n[11]=e[t],n}function create_each_block$a(o){let e,t,n,r=!1,a,s,l,u=o[11].label+"",d,f,m,h,p,g;return h=init_binding_group(o[6][0]),{c(){e=element("div"),t=element("input"),s=space(),l=element("label"),d=text(u),m=space(),attr(t,"type","radio"),t.__value=n=o[11].value,set_input_value(t,t.__value),attr(t,"id",a=o[11].id),attr(l,"for",f=o[11].id),h.p(t)},m(b,v){insert(b,e,v),append(e,t),t.checked=t.__value===o[0],append(e,s),append(e,l),append(l,d),append(e,m),p||(g=listen(t,"change",o[5]),p=!0)},p(b,v){v&2&&n!==(n=b[11].value)&&(t.__value=n,set_input_value(t,t.__value),r=!0),v&2&&a!==(a=b[11].id)&&attr(t,"id",a),(r||v&3)&&(t.checked=t.__value===b[0]),v&2&&u!==(u=b[11].label+"")&&set_data(d,u),v&2&&f!==(f=b[11].id)&&attr(l,"for",f)},d(b){b&&detach(e),h.r(),p=!1,g()}}}function create_fragment$Q(o){let e,t=ensure_array_like(o[1]),n=[];for(let r=0;r<t.length;r+=1)n[r]=create_each_block$a(get_each_context$a(o,t,r));return{c(){for(let r=0;r<n.length;r+=1)n[r].c();e=empty()},m(r,a){for(let s=0;s<n.length;s+=1)n[s]&&n[s].m(r,a);insert(r,e,a)},p(r,[a]){if(a&3){t=ensure_array_like(r[1]);let s;for(s=0;s<t.length;s+=1){const l=get_each_context$a(r,t,s);n[s]?n[s].p(l,a):(n[s]=create_each_block$a(l),n[s].c(),n[s].m(e.parentNode,e))}for(;s<n.length;s+=1)n[s].d(1);n.length=t.length}},i:noop$1,o:noop$1,d(r){r&&detach(e),destroy_each(n,r)}}}function instance$P(o,e,t){let n,r;var a,s;let{options:l=[]}=e,{name:u}=e;const{values:d,setFieldValue:f}=getFormContext();component_subscribe(o,d,g=>t(9,r=g));let m=(a=r[u])!==null&&a!==void 0?a:(s=l.find(g=>g.default))===null||s===void 0?void 0:s.value;const h=[[]];function p(){m=this.__value,t(0,m)}return o.$$set=g=>{"options"in g&&t(3,l=g.options),"name"in g&&t(4,u=g.name)},o.$$.update=()=>{o.$$.dirty&17&&f(u,m),o.$$.dirty&8&&t(1,n=l.map(g=>Object.assign(Object.assign({},g),{id:uuidv1()})))},[m,n,d,l,u,p,h]}class FormRadioGroupField extends SvelteComponent{constructor(e){super(),init(this,e,instance$P,create_fragment$Q,safe_not_equal,{options:3,name:4})}}const ConnectionDriverFields_svelte_svelte_type_style_lang="";function create_if_block_20(o){let e,t;return e=new FormElectronFileSelector({props:{label:"Database file",name:"databaseFile",disabled:o[4]||!o[12]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]||!n[12]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_19(o){let e,t,n;return t=new FormRadioGroupField({props:{disabled:o[4],name:"useDatabaseUrl",options:[{label:"Fill database connection details",value:"",default:!0},{label:"Use database URL",value:"1"}]}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","radio svelte-1toqt3y")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&16&&(s.disabled=r[4]),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_18(o){var n;let e,t;return e=new FormTextField({props:{label:"Database URL",name:"databaseUrl",placeholder:(n=o[0])==null?void 0:n.databaseUrlPlaceholder,disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&1&&(s.placeholder=(l=r[0])==null?void 0:l.databaseUrlPlaceholder),a&16&&(s.disabled=r[4]),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block_17(o){var n,r;let e,t;return e=new FormSelectField({props:{label:((n=o[0])==null?void 0:n.authTypeLabel)??"Authentication",name:"authType",isNative:!0,disabled:o[4],defaultValue:(r=o[0])==null?void 0:r.defaultAuthTypeName,options:o[3].map(func_2$1)}}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s&1&&(l.label=((u=a[0])==null?void 0:u.authTypeLabel)??"Authentication"),s&16&&(l.disabled=a[4]),s&1&&(l.defaultValue=(d=a[0])==null?void 0:d.defaultAuthTypeName),s&8&&(l.options=a[3].map(func_2$1)),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_14(o){var h;let e,t,n,r,a=(h=o[0])==null?void 0:h.showConnectionField("port",o[1]),s,l=getCurrentConfig().isDocker,u,d;n=new FormTextField({props:{label:"Server",name:"server",disabled:o[4]||o[9].includes("server"),templateProps:{noMargin:!0}}});let f=a&&create_if_block_16(o),m=l&&create_if_block_15();return{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),f&&f.c(),s=space(),m&&m.c(),u=empty(),attr(t,"class","col-9 mr-1"),attr(e,"class","row svelte-1toqt3y")},m(p,g){insert(p,e,g),append(e,t),mount_component(n,t,null),append(e,r),f&&f.m(e,null),insert(p,s,g),m&&m.m(p,g),insert(p,u,g),d=!0},p(p,g){var v;const b={};g&528&&(b.disabled=p[4]||p[9].includes("server")),n.$set(b),g&3&&(a=(v=p[0])==null?void 0:v.showConnectionField("port",p[1])),a?f?(f.p(p,g),g&3&&transition_in(f,1)):(f=create_if_block_16(p),f.c(),transition_in(f,1),f.m(e,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(p){d||(transition_in(n.$$.fragment,p),transition_in(f),transition_in(m),d=!0)},o(p){transition_out(n.$$.fragment,p),transition_out(f),transition_out(m),d=!1},d(p){p&&(detach(e),detach(s),detach(u)),destroy_component(n),f&&f.d(),m&&m.d(p)}}}function create_if_block_16(o){var r;let e,t,n;return t=new FormTextField({props:{label:"Port",name:"port",disabled:o[4]||o[9].includes("port"),templateProps:{noMargin:!0},placeholder:(r=o[0])==null?void 0:r.defaultPort}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","col-3 mr-1")},m(a,s){insert(a,e,s),mount_component(t,e,null),n=!0},p(a,s){var u;const l={};s&528&&(l.disabled=a[4]||a[9].includes("port")),s&1&&(l.placeholder=(u=a[0])==null?void 0:u.defaultPort),t.$set(l)},i(a){n||(transition_in(t.$$.fragment,a),n=!0)},o(a){transition_out(t.$$.fragment,a),n=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_15(o){let e,t,n,r;return t=new FontIcon({props:{icon:"img warn",padRight:!0}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(`
      Under docker, localhost and 127.0.0.1 will not work, use dockerhost instead`),attr(e,"class","row svelte-1toqt3y")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_if_block_13(o){var n;let e,t;return e=new FormTextField({props:{label:"Socket path",name:"socketPath",disabled:o[4]||o[9].includes("socketPath"),placeholder:(n=o[0])==null?void 0:n.defaultSocketPath}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&528&&(s.disabled=r[4]||r[9].includes("socketPath")),a&1&&(s.placeholder=(l=r[0])==null?void 0:l.defaultSocketPath),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block_10(o){let e,t,n,r=o[7]&&create_if_block_12(o),a=o[6]&&create_if_block_11(o);return{c(){e=element("div"),r&&r.c(),t=space(),a&&a.c(),attr(e,"class","row svelte-1toqt3y")},m(s,l){insert(s,e,l),r&&r.m(e,null),append(e,t),a&&a.m(e,null),n=!0},p(s,l){s[7]?r?(r.p(s,l),l&128&&transition_in(r,1)):(r=create_if_block_12(s),r.c(),transition_in(r,1),r.m(e,t)):r&&(group_outros(),transition_out(r,1,1,()=>{r=null}),check_outros()),s[6]?a?(a.p(s,l),l&64&&transition_in(a,1)):(a=create_if_block_11(s),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){n||(transition_in(r),transition_in(a),n=!0)},o(s){transition_out(r),transition_out(a),n=!1},d(s){s&&detach(e),r&&r.d(),a&&a.d()}}}function create_if_block_12(o){let e,t,n;return t=new FormTextField({props:{label:"User",name:"user",disabled:o[4]||o[9].includes("user"),templateProps:{noMargin:!0}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","col-6 mr-1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&528&&(s.disabled=r[4]||r[9].includes("user")),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_11(o){let e,t,n;return t=new FormPasswordField({props:{label:"Password",name:"password",disabled:o[4]||o[9].includes("password"),templateProps:{noMargin:!0}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","col-6 mr-1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&528&&(s.disabled=r[4]||r[9].includes("password")),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_9(o){let e,t;return e=new FormTextField({props:{label:"User",name:"user",disabled:o[4]||o[9].includes("user")}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&528&&(a.disabled=n[4]||n[9].includes("user")),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_8(o){let e,t;return e=new FormPasswordField({props:{label:"Password",name:"password",disabled:o[4]||o[9].includes("password")}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&528&&(a.disabled=n[4]||n[9].includes("password")),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_7(o){let e,t;return e=new FormSelectField({props:{label:"Password mode",isNative:!0,name:"passwordMode",defaultValue:"saveEncrypted",disabled:o[4],options:[{value:"saveEncrypted",label:"Save and encrypt"},{value:"saveRaw",label:"Save raw (UNSAFE!!)"},{value:"askPassword",label:"Don't save, ask for password"},{value:"askUser",label:"Don't save, ask for login and password"}]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$2(o){let e,t;return e=new FormTextField({props:{label:"Key separator",name:"treeKeySeparator",disabled:o[4],placeholder:":"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$4(o){let e,t;return e=new FormTextField({props:{label:"Domain (specify to use NTLM authentication)",name:"windowsDomain",disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$8(o){let e,t;return e=new FormCheckboxField({props:{label:"Is read only",name:"isReadOnly",disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$8(o){let e,t;return e=new FormCheckboxField({props:{label:"Trust server certificate",name:"trustServerCertificate",disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_2$a(o){let e,t;return e=new FormTextField({props:{label:"Default database",name:"defaultDatabase",disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$j(o){let e,t;return e=new FormCheckboxField({props:{label:`Use only database ${o[8]}`,name:"singleDatabase",disabled:o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&256&&(a.label=`Use only database ${n[8]}`),r&16&&(a.disabled=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$r(o){let e,t,n,r,a,s,l;return n=new FormTextField({props:{label:"Display name",name:"displayName",templateProps:{noMargin:!0},disabled:o[4]}}),s=new FormColorField({props:{useSelector:!0,label:"Color",name:"connectionColor",emptyLabel:"(not selected)",templateProps:{noMargin:!0},disabled:o[4]}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),attr(t,"class","col-6 mr-1"),attr(a,"class","col-6 mr-1"),attr(e,"class","row svelte-1toqt3y")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),mount_component(s,a,null),l=!0},p(u,d){const f={};d&16&&(f.disabled=u[4]),n.$set(f);const m={};d&16&&(m.disabled=u[4]),s.$set(m)},i(u){l||(transition_in(n.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n),destroy_component(s)}}}function create_fragment$P(o){var he,pe,Oe,qe,et,Ue,fe,Ie,We,$e,Le,ze;let e,t,n=(he=o[0])==null?void 0:he.showConnectionField("databaseFile",o[1]),r,a=(pe=o[0])==null?void 0:pe.showConnectionField("useDatabaseUrl",o[1]),s,l=(Oe=o[0])==null?void 0:Oe.showConnectionField("databaseUrl",o[1]),u,d=o[3]&&((qe=o[0])==null?void 0:qe.showConnectionField("authType",o[1])),f,m=(et=o[0])==null?void 0:et.showConnectionField("server",o[1]),h,p=(Ue=o[0])==null?void 0:Ue.showConnectionField("socketPath",o[1]),g,b,v,y,C=!o[9].includes("password")&&o[5],E,A=(fe=o[0])==null?void 0:fe.showConnectionField("treeKeySeparator",o[1]),k,T=(Ie=o[0])==null?void 0:Ie.showConnectionField("windowsDomain",o[1]),$,S=(We=o[0])==null?void 0:We.showConnectionField("isReadOnly",o[1]),I,R=($e=o[0])==null?void 0:$e.showConnectionField("trustServerCertificate",o[1]),N,M=(Le=o[0])==null?void 0:Le.showConnectionField("defaultDatabase",o[1]),F,D=o[8]&&((ze=o[0])==null?void 0:ze.showConnectionField("singleDatabase",o[1])),x,B,K;e=new FormSelectField({props:{label:"Connection type",name:"engine",isNative:!0,disabled:o[4],options:[{label:"(select connection type)",value:""},...o[2].drivers.filter(o[18]).map(func_1$4)]}});let U=n&&create_if_block_20(o),G=a&&create_if_block_19(o),W=l&&create_if_block_18(o),q=d&&create_if_block_17(o),H=m&&create_if_block_14(o),z=p&&create_if_block_13(o),Y=o[7]&&o[6]&&create_if_block_10(o),V=o[7]&&!o[6]&&create_if_block_9(o),J=!o[7]&&o[6]&&create_if_block_8(o),Q=C&&create_if_block_7(o),X=A&&create_if_block_6$2(o),ie=T&&create_if_block_5$4(o),ce=S&&create_if_block_4$8(o),de=R&&create_if_block_3$8(o),se=M&&create_if_block_2$a(o),me=D&&create_if_block_1$j(o),ue=o[0]&&create_if_block$r(o);return{c(){create_component(e.$$.fragment),t=space(),U&&U.c(),r=space(),G&&G.c(),s=space(),W&&W.c(),u=space(),q&&q.c(),f=space(),H&&H.c(),h=space(),z&&z.c(),g=space(),Y&&Y.c(),b=space(),V&&V.c(),v=space(),J&&J.c(),y=space(),Q&&Q.c(),E=space(),X&&X.c(),k=space(),ie&&ie.c(),$=space(),ce&&ce.c(),I=space(),de&&de.c(),N=space(),se&&se.c(),F=space(),me&&me.c(),x=space(),ue&&ue.c(),B=empty()},m(re,ge){mount_component(e,re,ge),insert(re,t,ge),U&&U.m(re,ge),insert(re,r,ge),G&&G.m(re,ge),insert(re,s,ge),W&&W.m(re,ge),insert(re,u,ge),q&&q.m(re,ge),insert(re,f,ge),H&&H.m(re,ge),insert(re,h,ge),z&&z.m(re,ge),insert(re,g,ge),Y&&Y.m(re,ge),insert(re,b,ge),V&&V.m(re,ge),insert(re,v,ge),J&&J.m(re,ge),insert(re,y,ge),Q&&Q.m(re,ge),insert(re,E,ge),X&&X.m(re,ge),insert(re,k,ge),ie&&ie.m(re,ge),insert(re,$,ge),ce&&ce.m(re,ge),insert(re,I,ge),de&&de.m(re,ge),insert(re,N,ge),se&&se.m(re,ge),insert(re,F,ge),me&&me.m(re,ge),insert(re,x,ge),ue&&ue.m(re,ge),insert(re,B,ge),K=!0},p(re,[ge]){var Ze,Pe,Ee,Ce,je,pt,wt,ut,Ct,xt,ht,Rt;const Be={};ge&16&&(Be.disabled=re[4]),ge&4&&(Be.options=[{label:"(select connection type)",value:""},...re[2].drivers.filter(re[18]).map(func_1$4)]),e.$set(Be),ge&3&&(n=(Ze=re[0])==null?void 0:Ze.showConnectionField("databaseFile",re[1])),n?U?(U.p(re,ge),ge&3&&transition_in(U,1)):(U=create_if_block_20(re),U.c(),transition_in(U,1),U.m(r.parentNode,r)):U&&(group_outros(),transition_out(U,1,1,()=>{U=null}),check_outros()),ge&3&&(a=(Pe=re[0])==null?void 0:Pe.showConnectionField("useDatabaseUrl",re[1])),a?G?(G.p(re,ge),ge&3&&transition_in(G,1)):(G=create_if_block_19(re),G.c(),transition_in(G,1),G.m(s.parentNode,s)):G&&(group_outros(),transition_out(G,1,1,()=>{G=null}),check_outros()),ge&3&&(l=(Ee=re[0])==null?void 0:Ee.showConnectionField("databaseUrl",re[1])),l?W?(W.p(re,ge),ge&3&&transition_in(W,1)):(W=create_if_block_18(re),W.c(),transition_in(W,1),W.m(u.parentNode,u)):W&&(group_outros(),transition_out(W,1,1,()=>{W=null}),check_outros()),ge&11&&(d=re[3]&&((Ce=re[0])==null?void 0:Ce.showConnectionField("authType",re[1]))),d?q?(q.p(re,ge),ge&11&&transition_in(q,1)):(q=create_if_block_17(re),q.c(),transition_in(q,1),q.m(f.parentNode,f)):q&&(group_outros(),transition_out(q,1,1,()=>{q=null}),check_outros()),ge&3&&(m=(je=re[0])==null?void 0:je.showConnectionField("server",re[1])),m?H?(H.p(re,ge),ge&3&&transition_in(H,1)):(H=create_if_block_14(re),H.c(),transition_in(H,1),H.m(h.parentNode,h)):H&&(group_outros(),transition_out(H,1,1,()=>{H=null}),check_outros()),ge&3&&(p=(pt=re[0])==null?void 0:pt.showConnectionField("socketPath",re[1])),p?z?(z.p(re,ge),ge&3&&transition_in(z,1)):(z=create_if_block_13(re),z.c(),transition_in(z,1),z.m(g.parentNode,g)):z&&(group_outros(),transition_out(z,1,1,()=>{z=null}),check_outros()),re[7]&&re[6]?Y?(Y.p(re,ge),ge&192&&transition_in(Y,1)):(Y=create_if_block_10(re),Y.c(),transition_in(Y,1),Y.m(b.parentNode,b)):Y&&(group_outros(),transition_out(Y,1,1,()=>{Y=null}),check_outros()),re[7]&&!re[6]?V?(V.p(re,ge),ge&192&&transition_in(V,1)):(V=create_if_block_9(re),V.c(),transition_in(V,1),V.m(v.parentNode,v)):V&&(group_outros(),transition_out(V,1,1,()=>{V=null}),check_outros()),!re[7]&&re[6]?J?(J.p(re,ge),ge&192&&transition_in(J,1)):(J=create_if_block_8(re),J.c(),transition_in(J,1),J.m(y.parentNode,y)):J&&(group_outros(),transition_out(J,1,1,()=>{J=null}),check_outros()),ge&544&&(C=!re[9].includes("password")&&re[5]),C?Q?(Q.p(re,ge),ge&544&&transition_in(Q,1)):(Q=create_if_block_7(re),Q.c(),transition_in(Q,1),Q.m(E.parentNode,E)):Q&&(group_outros(),transition_out(Q,1,1,()=>{Q=null}),check_outros()),ge&3&&(A=(wt=re[0])==null?void 0:wt.showConnectionField("treeKeySeparator",re[1])),A?X?(X.p(re,ge),ge&3&&transition_in(X,1)):(X=create_if_block_6$2(re),X.c(),transition_in(X,1),X.m(k.parentNode,k)):X&&(group_outros(),transition_out(X,1,1,()=>{X=null}),check_outros()),ge&3&&(T=(ut=re[0])==null?void 0:ut.showConnectionField("windowsDomain",re[1])),T?ie?(ie.p(re,ge),ge&3&&transition_in(ie,1)):(ie=create_if_block_5$4(re),ie.c(),transition_in(ie,1),ie.m($.parentNode,$)):ie&&(group_outros(),transition_out(ie,1,1,()=>{ie=null}),check_outros()),ge&3&&(S=(Ct=re[0])==null?void 0:Ct.showConnectionField("isReadOnly",re[1])),S?ce?(ce.p(re,ge),ge&3&&transition_in(ce,1)):(ce=create_if_block_4$8(re),ce.c(),transition_in(ce,1),ce.m(I.parentNode,I)):ce&&(group_outros(),transition_out(ce,1,1,()=>{ce=null}),check_outros()),ge&3&&(R=(xt=re[0])==null?void 0:xt.showConnectionField("trustServerCertificate",re[1])),R?de?(de.p(re,ge),ge&3&&transition_in(de,1)):(de=create_if_block_3$8(re),de.c(),transition_in(de,1),de.m(N.parentNode,N)):de&&(group_outros(),transition_out(de,1,1,()=>{de=null}),check_outros()),ge&3&&(M=(ht=re[0])==null?void 0:ht.showConnectionField("defaultDatabase",re[1])),M?se?(se.p(re,ge),ge&3&&transition_in(se,1)):(se=create_if_block_2$a(re),se.c(),transition_in(se,1),se.m(F.parentNode,F)):se&&(group_outros(),transition_out(se,1,1,()=>{se=null}),check_outros()),ge&259&&(D=re[8]&&((Rt=re[0])==null?void 0:Rt.showConnectionField("singleDatabase",re[1]))),D?me?(me.p(re,ge),ge&259&&transition_in(me,1)):(me=create_if_block_1$j(re),me.c(),transition_in(me,1),me.m(x.parentNode,x)):me&&(group_outros(),transition_out(me,1,1,()=>{me=null}),check_outros()),re[0]?ue?(ue.p(re,ge),ge&1&&transition_in(ue,1)):(ue=create_if_block$r(re),ue.c(),transition_in(ue,1),ue.m(B.parentNode,B)):ue&&(group_outros(),transition_out(ue,1,1,()=>{ue=null}),check_outros())},i(re){K||(transition_in(e.$$.fragment,re),transition_in(U),transition_in(G),transition_in(W),transition_in(q),transition_in(H),transition_in(z),transition_in(Y),transition_in(V),transition_in(J),transition_in(Q),transition_in(X),transition_in(ie),transition_in(ce),transition_in(de),transition_in(se),transition_in(me),transition_in(ue),K=!0)},o(re){transition_out(e.$$.fragment,re),transition_out(U),transition_out(G),transition_out(W),transition_out(q),transition_out(H),transition_out(z),transition_out(Y),transition_out(V),transition_out(J),transition_out(Q),transition_out(X),transition_out(ie),transition_out(ce),transition_out(de),transition_out(se),transition_out(me),transition_out(ue),K=!1},d(re){re&&(detach(t),detach(r),detach(s),detach(u),detach(f),detach(h),detach(g),detach(b),detach(v),detach(y),detach(E),detach(k),detach($),detach(I),detach(N),detach(F),detach(x),detach(B)),destroy_component(e,re),U&&U.d(re),G&&G.d(re),W&&W.d(re),q&&q.d(re),H&&H.d(re),z&&z.d(re),Y&&Y.d(re),V&&V.d(re),J&&J.d(re),Q&&Q.d(re),X&&X.d(re),ie&&ie.d(re),ce&&ce.d(re),de&&de.d(re),se&&se.d(re),me&&me.d(re),ue&&ue.d(re)}}}const func_1$4=o=>({value:o.engine,label:o.title}),func_2$1=o=>({value:o.name,label:o.title});function instance$O(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=noop$1,A=()=>(E(),E=subscribe(a,S=>t(3,C=S)),a);component_subscribe(o,openedSingleDatabaseConnections,S=>t(16,b=S)),component_subscribe(o,openedConnections,S=>t(17,v=S)),component_subscribe(o,extensions,S=>t(2,y=S)),o.$$.on_destroy.push(()=>E());const{values:k}=getFormContext();component_subscribe(o,k,S=>t(1,g=S));const T=getElectron(),$=S=>!S.isElectronOnly||T;return o.$$.update=()=>{o.$$.dirty&2&&t(15,n=g.authType),o.$$.dirty&2&&t(13,r=g.engine),o.$$.dirty&2&&g.useDatabaseUrl,o.$$.dirty&8192&&A(t(10,a=useAuthTypes({engine:r}))),o.$$.dirty&32776&&t(14,s=C&&C.find(S=>S.name==n)),o.$$.dirty&16384&&t(9,l=(s?s.disabledFields:null)||[]),o.$$.dirty&8196&&t(0,u=y.drivers.find(S=>S.engine==r)),o.$$.dirty&2&&t(8,d=g.defaultDatabase),o.$$.dirty&3&&t(7,f=(u==null?void 0:u.showConnectionField("user",g))&&g.passwordMode!="askUser"),o.$$.dirty&3&&t(6,m=(u==null?void 0:u.showConnectionField("password",g))&&g.passwordMode!="askPassword"&&g.passwordMode!="askUser"),o.$$.dirty&3&&t(5,h=u==null?void 0:u.showConnectionField("password",g)),o.$$.dirty&196610&&t(4,p=v.includes(g._id)||b.includes(g._id))},[u,g,y,C,p,h,m,f,d,l,a,k,T,r,s,n,b,v,$]}class ConnectionDriverFields extends SvelteComponent{constructor(e){super(),init(this,e,instance$O,create_fragment$P,safe_not_equal,{})}}const ConnectionDriverFields$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConnectionDriverFields},Symbol.toStringTag,{value:"Module"})),ConnectionSshTunnelFields_svelte_svelte_type_style_lang="";function create_if_block_4$7(o){let e,t;return e=new FormTextField({props:{label:"Login",name:"sshLogin",disabled:o[2]||!o[4]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&20&&(a.disabled=n[2]||!n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$7(o){let e,t,n,r,a,s,l;return n=new FormTextField({props:{label:"Login",name:"sshLogin",disabled:o[2]||!o[4],templateProps:{noMargin:!0}}}),s=new FormPasswordField({props:{label:"Password",name:"sshPassword",disabled:o[2]||!o[4],templateProps:{noMargin:!0}}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),attr(t,"class","col-6 mr-1"),attr(a,"class","col-6"),attr(e,"class","row svelte-10d5vjg")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),mount_component(s,a,null),l=!0},p(u,d){const f={};d&20&&(f.disabled=u[2]||!u[4]),n.$set(f);const m={};d&20&&(m.disabled=u[2]||!u[4]),s.$set(m)},i(u){l||(transition_in(n.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n),destroy_component(s)}}}function create_if_block_2$9(o){let e,t,n,r,a,s,l;return n=new FormElectronFileSelector({props:{label:"Private key file",name:"sshKeyfile",disabled:o[2]||!o[4],templateProps:{noMargin:!0}}}),s=new FormPasswordField({props:{label:"Key file passphrase",name:"sshKeyfilePassword",disabled:o[2]||!o[4],templateProps:{noMargin:!0}}}),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),attr(t,"class","col-6 mr-1"),attr(a,"class","col-6"),attr(e,"class","row svelte-10d5vjg")},m(u,d){insert(u,e,d),append(e,t),mount_component(n,t,null),append(e,r),append(e,a),mount_component(s,a,null),l=!0},p(u,d){const f={};d&20&&(f.disabled=u[2]||!u[4]),n.$set(f);const m={};d&20&&(m.disabled=u[2]||!u[4]),s.$set(m)},i(u){l||(transition_in(n.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n),destroy_component(s)}}}function create_if_block$q(o){let e,t,n,r;const a=[create_if_block_1$i,create_else_block$a],s=[];function l(u,d){return u[1]&&u[1].sshAuthSock?0:1}return t=l(o),n=s[t]=a[t](o),{c(){e=element("div"),n.c(),attr(e,"class","ml-3 mb-3")},m(u,d){insert(u,e,d),s[t].m(e,null),r=!0},p(u,d){let f=t;t=l(u),t!==f&&(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),n=s[t],n||(n=s[t]=a[t](u),n.c()),transition_in(n,1),n.m(e,null))},i(u){r||(transition_in(n),r=!0)},o(u){transition_out(n),r=!1},d(u){u&&detach(e),s[t].d()}}}function create_else_block$a(o){let e,t,n;return e=new FontIcon({props:{icon:"img error"}}),{c(){create_component(e.$$.fragment),t=text(" SSH Agent not found")},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_if_block_1$i(o){let e,t,n;return e=new FontIcon({props:{icon:"img ok"}}),{c(){create_component(e.$$.fragment),t=text(" SSH Agent found")},m(r,a){mount_component(e,r,a),insert(r,t,a),n=!0},i(r){n||(transition_in(e.$$.fragment,r),n=!0)},o(r){transition_out(e.$$.fragment,r),n=!1},d(r){r&&detach(t),destroy_component(e,r)}}}function create_fragment$O(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C;e=new FormCheckboxField({props:{label:"Use SSH tunnel",name:"useSshTunnel",disabled:o[2]}}),a=new FormTextField({props:{label:"Host",name:"sshHost",disabled:o[2]||!o[4],templateProps:{noMargin:!0}}}),u=new FormTextField({props:{label:"Port",name:"sshPort",disabled:o[2]||!o[4],templateProps:{noMargin:!0},placeholder:"22"}}),f=new FormTextField({props:{label:"Bastion host (Jump host)",name:"sshBastionHost",disabled:o[2]||!o[4]}}),h=new FormSelectField({props:{label:"SSH Authentication",name:"sshMode",isNative:!0,disabled:o[2]||!o[4],options:[{value:"userPassword",label:"Username & password"},{value:"agent",label:"SSH agent"},o[6]&&{value:"keyFile",label:"Key file"}]}});let E=o[0].sshMode!="userPassword"&&create_if_block_4$7(o),A=o[0].sshMode=="userPassword"&&create_if_block_3$7(o),k=o[0].sshMode=="keyFile"&&create_if_block_2$9(o),T=o[4]&&o[0].sshMode=="agent"&&create_if_block$q(o);return{c(){create_component(e.$$.fragment),t=space(),n=element("div"),r=element("div"),create_component(a.$$.fragment),s=space(),l=element("div"),create_component(u.$$.fragment),d=space(),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),p=space(),E&&E.c(),g=space(),A&&A.c(),b=space(),k&&k.c(),v=space(),T&&T.c(),y=empty(),attr(r,"class","col-9 mr-1"),attr(l,"class","col-3"),attr(n,"class","row svelte-10d5vjg")},m($,S){mount_component(e,$,S),insert($,t,S),insert($,n,S),append(n,r),mount_component(a,r,null),append(n,s),append(n,l),mount_component(u,l,null),insert($,d,S),mount_component(f,$,S),insert($,m,S),mount_component(h,$,S),insert($,p,S),E&&E.m($,S),insert($,g,S),A&&A.m($,S),insert($,b,S),k&&k.m($,S),insert($,v,S),T&&T.m($,S),insert($,y,S),C=!0},p($,[S]){const I={};S&4&&(I.disabled=$[2]),e.$set(I);const R={};S&20&&(R.disabled=$[2]||!$[4]),a.$set(R);const N={};S&20&&(N.disabled=$[2]||!$[4]),u.$set(N);const M={};S&20&&(M.disabled=$[2]||!$[4]),f.$set(M);const F={};S&20&&(F.disabled=$[2]||!$[4]),h.$set(F),$[0].sshMode!="userPassword"?E?(E.p($,S),S&1&&transition_in(E,1)):(E=create_if_block_4$7($),E.c(),transition_in(E,1),E.m(g.parentNode,g)):E&&(group_outros(),transition_out(E,1,1,()=>{E=null}),check_outros()),$[0].sshMode=="userPassword"?A?(A.p($,S),S&1&&transition_in(A,1)):(A=create_if_block_3$7($),A.c(),transition_in(A,1),A.m(b.parentNode,b)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),$[0].sshMode=="keyFile"?k?(k.p($,S),S&1&&transition_in(k,1)):(k=create_if_block_2$9($),k.c(),transition_in(k,1),k.m(v.parentNode,v)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),$[4]&&$[0].sshMode=="agent"?T?(T.p($,S),S&17&&transition_in(T,1)):(T=create_if_block$q($),T.c(),transition_in(T,1),T.m(y.parentNode,y)):T&&(group_outros(),transition_out(T,1,1,()=>{T=null}),check_outros())},i($){C||(transition_in(e.$$.fragment,$),transition_in(a.$$.fragment,$),transition_in(u.$$.fragment,$),transition_in(f.$$.fragment,$),transition_in(h.$$.fragment,$),transition_in(E),transition_in(A),transition_in(k),transition_in(T),C=!0)},o($){transition_out(e.$$.fragment,$),transition_out(a.$$.fragment,$),transition_out(u.$$.fragment,$),transition_out(f.$$.fragment,$),transition_out(h.$$.fragment,$),transition_out(E),transition_out(A),transition_out(k),transition_out(T),C=!1},d($){$&&(detach(t),detach(n),detach(d),detach(m),detach(p),detach(g),detach(b),detach(v),detach(y)),destroy_component(e,$),destroy_component(a),destroy_component(u),destroy_component(f,$),destroy_component(h,$),E&&E.d($),A&&A.d($),k&&k.d($),T&&T.d($)}}}function instance$N(o,e,t){let n,r,a,s,l,u,d,f=noop$1,m=()=>(f(),f=subscribe(r,b=>t(1,d=b)),r);component_subscribe(o,openedSingleDatabaseConnections,b=>t(7,l=b)),component_subscribe(o,openedConnections,b=>t(8,u=b)),o.$$.on_destroy.push(()=>f());const{values:h,setFieldValue:p}=getFormContext();component_subscribe(o,h,b=>t(0,s=b));const g=getElectron();return o.$$.update=()=>{o.$$.dirty&1&&t(4,n=s.useSshTunnel),o.$$.dirty&3&&(s.sshMode||p("sshMode","userPassword"),!s.sshKeyfile&&d&&p("sshKeyfile",d.defaultKeyfile)),o.$$.dirty&385&&t(2,a=u.includes(s._id)||l.includes(s._id))},m(t(3,r=usePlatformInfo())),[s,d,a,r,n,h,g,l,u]}class ConnectionSshTunnelFields extends SvelteComponent{constructor(e){super(),init(this,e,instance$N,create_fragment$O,safe_not_equal,{})}}const ConnectionSshTunnelFields$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConnectionSshTunnelFields},Symbol.toStringTag,{value:"Module"}));function create_fragment$N(o){let e,t,n,r,a,s,l,u,d,f,m,h;return e=new FormCheckboxField({props:{label:"Use SSL",name:"useSsl",disabled:o[0]}}),n=new FormElectronFileSelector({props:{label:"CA Cert (optional)",name:"sslCaFile",disabled:o[0]||!o[1]||!o[3]}}),a=new FormElectronFileSelector({props:{label:"Certificate (optional)",name:"sslCertFile",disabled:o[0]||!o[1]||!o[3]}}),l=new FormPasswordField({props:{label:"Certificate key file password (optional)",name:"sslCertFilePassword",disabled:o[0]||!o[1]||!o[3]}}),d=new FormElectronFileSelector({props:{label:"Key file (optional)",name:"sslKeyFile",disabled:o[0]||!o[1]||!o[3]}}),m=new FormCheckboxField({props:{label:"Reject unauthorized",name:"sslRejectUnauthorized",disabled:o[0]||!o[1]}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment)},m(p,g){mount_component(e,p,g),insert(p,t,g),mount_component(n,p,g),insert(p,r,g),mount_component(a,p,g),insert(p,s,g),mount_component(l,p,g),insert(p,u,g),mount_component(d,p,g),insert(p,f,g),mount_component(m,p,g),h=!0},p(p,[g]){const b={};g&1&&(b.disabled=p[0]),e.$set(b);const v={};g&3&&(v.disabled=p[0]||!p[1]||!p[3]),n.$set(v);const y={};g&3&&(y.disabled=p[0]||!p[1]||!p[3]),a.$set(y);const C={};g&3&&(C.disabled=p[0]||!p[1]||!p[3]),l.$set(C);const E={};g&3&&(E.disabled=p[0]||!p[1]||!p[3]),d.$set(E);const A={};g&3&&(A.disabled=p[0]||!p[1]),m.$set(A)},i(p){h||(transition_in(e.$$.fragment,p),transition_in(n.$$.fragment,p),transition_in(a.$$.fragment,p),transition_in(l.$$.fragment,p),transition_in(d.$$.fragment,p),transition_in(m.$$.fragment,p),h=!0)},o(p){transition_out(e.$$.fragment,p),transition_out(n.$$.fragment,p),transition_out(a.$$.fragment,p),transition_out(l.$$.fragment,p),transition_out(d.$$.fragment,p),transition_out(m.$$.fragment,p),h=!1},d(p){p&&(detach(t),detach(r),detach(s),detach(u),detach(f)),destroy_component(e,p),destroy_component(n,p),destroy_component(a,p),destroy_component(l,p),destroy_component(d,p),destroy_component(m,p)}}}function instance$M(o,e,t){let n,r,a,s,l;component_subscribe(o,openedSingleDatabaseConnections,m=>t(5,s=m)),component_subscribe(o,openedConnections,m=>t(6,l=m));const{values:u,setFieldValue:d}=getFormContext();component_subscribe(o,u,m=>t(4,a=m));const f=getElectron();return o.$$.update=()=>{o.$$.dirty&16&&t(1,n=a.useSsl),o.$$.dirty&112&&t(0,r=l.includes(a._id)||s.includes(a._id))},[r,n,u,f,a,s,l]}class ConnectionSslFields extends SvelteComponent{constructor(e){super(),init(this,e,instance$M,create_fragment$N,safe_not_equal,{})}}const ConnectionSslFields$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConnectionSslFields},Symbol.toStringTag,{value:"Module"}));function create_else_block$9(o){let e,t;return e=new UploadButton({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$h(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Browse"}}),e.$on("click",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$p(o){let e,t=o[0].database+"",n,r;return{c(){e=text("("),n=text(t),r=text(")")},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s)},p(a,s){s&1&&t!==(t=a[0].database+"")&&set_data(n,t)},d(a){a&&(detach(e),detach(n),detach(r))}}}function create_default_slot_1$e(o){let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y=getConnectionLabel(o[0])+"",C,E,A;const k=[create_if_block_1$h,create_else_block$9],T=[];function $(R,N){return R[5]?0:1}l=$(o),u=T[l]=k[l](o),f=new FormStyledButton({props:{value:"Web URL"}}),f.$on("click",o[6]);let S={value:"From files"};h=new FormStyledButton({props:S}),o[11](h),h.$on("click",o[8]);let I=o[0].database&&create_if_block$p(o);return{c(){e=element("div"),t=element("strong"),t.textContent="Source:",n=space(),r=text(o[1]),a=space(),s=element("div"),u.c(),d=space(),create_component(f.$$.fragment),m=space(),create_component(h.$$.fragment),p=space(),g=element("div"),b=element("strong"),b.textContent="Target:",v=space(),C=text(y),E=space(),I&&I.c(),attr(e,"class","ml-3 mr-3 mt-3"),attr(s,"class","flex ml-3 mr-3 mb-3"),attr(g,"class","m-3")},m(R,N){insert(R,e,N),append(e,t),append(e,n),append(e,r),insert(R,a,N),insert(R,s,N),T[l].m(s,null),append(s,d),mount_component(f,s,null),append(s,m),mount_component(h,s,null),insert(R,p,N),insert(R,g,N),append(g,b),append(g,v),append(g,C),append(g,E),I&&I.m(g,null),A=!0},p(R,N){(!A||N&2)&&set_data(r,R[1]),u.p(R,N);const M={};h.$set(M),(!A||N&1)&&y!==(y=getConnectionLabel(R[0])+"")&&set_data(C,y),R[0].database?I?I.p(R,N):(I=create_if_block$p(R),I.c(),I.m(g,null)):I&&(I.d(1),I=null)},i(R){A||(transition_in(u),transition_in(f.$$.fragment,R),transition_in(h.$$.fragment,R),A=!0)},o(R){transition_out(u),transition_out(f.$$.fragment,R),transition_out(h.$$.fragment,R),A=!1},d(R){R&&(detach(e),detach(a),detach(s),detach(p),detach(g)),T[l].d(),destroy_component(f),o[11](null),destroy_component(h),I&&I.d()}}}function create_header_slot$4(o){let e;return{c(){e=text("Import database dump")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$4(o){let e,t,n,r;return e=new FormSubmit({props:{value:"Run import",disabled:!o[2]}}),e.$on("click",o[10]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&4&&(l.disabled=!a[2]),e.$set(l)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$k(o){let e,t;const n=[o[9]];let r={$$slots:{footer:[create_footer_slot$4],header:[create_header_slot$4],default:[create_default_slot_1$e]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&512?get_spread_update(n,[get_spread_object(a[9])]):{};s&16399&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$M(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$k]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&16911&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$L(o,e,t){const n=["connection"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(C,E,A,k){function T($){return $ instanceof A?$:new A(function(S){S($)})}return new(A||(A=Promise))(function($,S){function I(M){try{N(k.next(M))}catch(F){S(F)}}function R(M){try{N(k.throw(M))}catch(F){S(F)}}function N(M){M.done?$(M.value):T(M.value).then(I,R)}N((k=k.apply(C,E||[])).next())})};let{connection:s}=e,l="(not selected)",u=null,d;const f=C=>a(void 0,void 0,void 0,function*(){closeCurrentModal(),importSqlDump(u,s)}),m=getElectron(),h=C=>{t(1,l=`uploaded: ${C.shortName}`),t(2,u=C.filePath)};onMount(()=>(setUploadListener(h),()=>{setUploadListener(null)}));const p=()=>{showModal(ChangeDownloadUrlModal,{onConfirm:C=>a(void 0,void 0,void 0,function*(){yield tick(),t(1,l=C),t(2,u=C)})})},g=()=>a(void 0,void 0,void 0,function*(){const E=yield getElectron().showOpenDialog({properties:["openFile"],filters:[{name:"SQL Files",extensions:["sql"]},{name:"All Files",extensions:["*"]}]});if(E&&E[0]){const A=window.require("path");t(2,u=E[0]),t(1,l=A.parse(u).name)}});function b(){return a(this,void 0,void 0,function*(){const C=d.getBoundingClientRect(),E=C.left,A=C.bottom,T=(yield apiCall("files/list",{folder:"sql"})).map(({file:$})=>({label:$,onClick:()=>a(this,void 0,void 0,function*(){t(2,u=yield apiCall("files/get-file-real-path",{folder:"sql",file:$})),u&&t(1,l=$)})}));currentDropDownMenu.set({left:E,top:A,items:T})})}const v=C=>f(C.detail);function y(C){binding_callbacks[C?"unshift":"push"](()=>{d=C,t(3,d)})}return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(9,r=compute_rest_props(e,n)),"connection"in C&&t(0,s=C.connection)},[s,l,u,d,f,m,p,g,b,r,v,y]}class ImportDatabaseDumpModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$L,create_fragment$M,safe_not_equal,{connection:0})}}const ImportDatabaseDumpModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ImportDatabaseDumpModal},Symbol.toStringTag,{value:"Module"}));function create_if_block_1$g(o){let e,t=o[0].database+"",n,r;return{c(){e=text("("),n=text(t),r=text(")")},m(a,s){insert(a,e,s),insert(a,n,s),insert(a,r,s)},p(a,s){s&1&&t!==(t=a[0].database+"")&&set_data(n,t)},d(a){a&&(detach(e),detach(n),detach(r))}}}function create_else_block$8(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Set download"}}),e.$on("click",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$o(o){let e,t;return e=new FormStyledButton({props:{type:"button",value:"Browse"}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$d(o){let e,t,n,r=getConnectionLabel(o[0])+"",a,s,l,u,d,f,m,h,p,g,b,v,y,C,E=o[0].database&&create_if_block_1$g(o);const A=[create_if_block$o,create_else_block$8],k=[];function T($,S){return $[4]?0:1}return g=T(o),b=k[g]=A[g](o),y=new FormStyledButton({props:{type:"button",value:"Files folder"}}),y.$on("click",o[5]),{c(){e=element("div"),t=element("strong"),t.textContent="Source:",n=space(),a=text(r),s=space(),E&&E.c(),l=space(),u=element("div"),d=element("strong"),d.textContent="Target:",f=space(),m=text(o[1]),h=space(),p=element("div"),b.c(),v=space(),create_component(y.$$.fragment),attr(e,"class","m-3"),attr(u,"class","ml-3 mr-3 mt-3"),attr(p,"class","flex ml-3")},m($,S){insert($,e,S),append(e,t),append(e,n),append(e,a),append(e,s),E&&E.m(e,null),insert($,l,S),insert($,u,S),append(u,d),append(u,f),append(u,m),insert($,h,S),insert($,p,S),k[g].m(p,null),append(p,v),mount_component(y,p,null),C=!0},p($,S){(!C||S&1)&&r!==(r=getConnectionLabel($[0])+"")&&set_data(a,r),$[0].database?E?E.p($,S):(E=create_if_block_1$g($),E.c(),E.m(e,null)):E&&(E.d(1),E=null),(!C||S&2)&&set_data(m,$[1]),b.p($,S)},i($){C||(transition_in(b),transition_in(y.$$.fragment,$),C=!0)},o($){transition_out(b),transition_out(y.$$.fragment,$),C=!1},d($){$&&(detach(e),detach(l),detach(u),detach(h),detach(p)),E&&E.d(),k[g].d(),destroy_component(y)}}}function create_header_slot$3(o){let e;return{c(){e=text("Export database dump")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$3(o){let e,t,n,r;return e=new FormSubmit({props:{value:"Run export",disabled:!o[2]}}),e.$on("click",o[9]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&4&&(l.disabled=!a[2]),e.$set(l)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$j(o){let e,t;const n=[o[8]];let r={$$slots:{footer:[create_footer_slot$3],header:[create_header_slot$3],default:[create_default_slot_1$d]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&256?get_spread_update(n,[get_spread_object(a[8])]):{};s&16391&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$L(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$j]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&16647&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$K(o,e,t){const n=["connection"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(C,E,A,k){function T($){return $ instanceof A?$:new A(function(S){S($)})}return new(A||(A=Promise))(function($,S){function I(M){try{N(k.next(M))}catch(F){S(F)}}function R(M){try{N(k.throw(M))}catch(F){S(F)}}function N(M){M.done?$(M.value):T(M.value).then(I,R)}N((k=k.apply(C,E||[])).next())})};let{connection:s}=e,l,u,d=null;function f(){return`${s.database}-${format(new Date,"yyyy-MM-dd-HH-mm-ss")}.sql`}onMount(()=>a(void 0,void 0,void 0,function*(){const C=f();m(C)}));const m=C=>a(void 0,void 0,void 0,function*(){const E=yield apiCall("files/get-file-real-path",{folder:"sql",file:C});E&&(t(1,l=`SQL Files folder: ${C}`),t(2,u=E),d=null)}),h=C=>a(void 0,void 0,void 0,function*(){closeCurrentModal(),exportSqlDump(u,s,s.database,d)}),p=getElectron(),g=()=>{showModal(InputTextModal,{value:f(),label:"New file name",header:"Backup/dump database",onConfirm:C=>a(void 0,void 0,void 0,function*(){yield tick(),m(C)})})},b=()=>a(void 0,void 0,void 0,function*(){const E=yield getElectron().showSaveDialog({properties:["showOverwriteConfirmation"],filters:[{name:"SQL Files",extensions:["sql"]},{name:"All Files",extensions:["*"]}]});if(E&&E[0]){const A=window.require("path");t(2,u=E[0]),t(1,l=A.parse(u).name),d=null}}),v=()=>a(void 0,void 0,void 0,function*(){const C=yield apiCall("files/generate-uploads-file",{extension:"sql"});t(2,u=C.filePath),t(1,l="Download"),d=C.fileName}),y=C=>h(C.detail);return o.$$set=C=>{e=assign(assign({},e),exclude_internal_props(C)),t(8,r=compute_rest_props(e,n)),"connection"in C&&t(0,s=C.connection)},[s,l,u,h,p,g,b,v,r,y]}class ExportDatabaseDumpModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$K,create_fragment$L,safe_not_equal,{connection:0})}}const ExportDatabaseDumpModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:ExportDatabaseDumpModal},Symbol.toStringTag,{value:"Module"})),appObjectTypes={DatabaseObjectAppObject:databaseObjectAppObject};function getConnectionColor(o,e,t,n,r=!1,a=!0){if(!e||!o)return;const s=o.find(h=>h._id==e.conid),{database:l}=e;let u=a||!l?s==null?void 0:s.connectionColor:null;const d=((s==null?void 0:s.databases)||[]).find(h=>h.name==l);if(d!=null&&d.connectionColor&&(u=d.connectionColor),!u)return;const f=t=="dark"?presetDarkPalettes:presetPalettes;if(n==null)return u;const m=f[u][n];return r?`background:${m}`:m}function useConnectionColor(o,e,t=null,n=!1,r=!0){const a=useConnectionList();return derived([a,currentThemeDefinition],([s,l])=>getConnectionColor(s,o,t??(l==null?void 0:l.themeType),e,n,r))}function useConnectionColorFactory(o,e=null,t=!1,n=!0){const r=useConnectionList();return derived([r,currentThemeDefinition],([a,s])=>(l,u=null,d=null,f=null)=>getConnectionColor(a,l,e??(s==null?void 0:s.themeType),u??o,d??t,f??n))}const TabCloseButton_svelte_svelte_type_style_lang="";function create_fragment$K(o){let e,t,n,r,a;return t=new FontIcon({props:{icon:o[0]&&!o[1]?"icon unsaved":"icon close"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","close-button tabCloseButton svelte-1y2o65v")},m(s,l){insert(s,e,l),mount_component(t,e,null),n=!0,r||(a=[listen(e,"click",o[2]),listen(e,"mouseenter",o[3]),listen(e,"mouseleave",o[4])],r=!0)},p(s,[l]){const u={};l&3&&(u.icon=s[0]&&!s[1]?"icon unsaved":"icon close"),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),destroy_component(t),r=!1,run_all(a)}}}function instance$J(o,e,t){let{unsaved:n=!1}=e,r=!1;function a(u){bubble.call(this,o,u)}const s=()=>{t(1,r=!0)},l=()=>{t(1,r=!1)};return o.$$set=u=>{"unsaved"in u&&t(0,n=u.unsaved)},[n,r,a,s,l]}class TabCloseButton extends SvelteComponent{constructor(e){super(),init(this,e,instance$J,create_fragment$K,safe_not_equal,{unsaved:0})}}function get_each_context$9(o,e,t){const n=o.slice();return n[6]=e[t],n}function create_each_block$9(o){let e,t,n,r=o[6].title+"",a,s;return t=new FontIcon({props:{icon:o[6].icon}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),a=text(r),attr(e,"class","ml-2")},m(l,u){insert(l,e,u),mount_component(t,e,null),append(e,n),append(e,a),s=!0},p(l,u){const d={};u&1&&(d.icon=l[6].icon),t.$set(d),(!s||u&1)&&r!==(r=l[6].title+"")&&set_data(a,r)},i(l){s||(transition_in(t.$$.fragment,l),s=!0)},o(l){transition_out(t.$$.fragment,l),s=!1},d(l){l&&detach(e),destroy_component(t)}}}function create_default_slot_1$c(o){let e,t,n,r,a,s,l;n=new FontIcon({props:{icon:"icon history"}});let u=ensure_array_like(o[0]),d=[];for(let m=0;m<u.length;m+=1)d[m]=create_each_block$9(get_each_context$9(o,u,m));const f=m=>transition_out(d[m],1,1,()=>{d[m]=null});return{c(){e=element("div"),t=text(`Following files are modified, really close tabs? After closing, you could reopen them in history
      `),create_component(n.$$.fragment),r=text(`
      widget`),a=space();for(let m=0;m<d.length;m+=1)d[m].c();s=empty()},m(m,h){insert(m,e,h),append(e,t),mount_component(n,e,null),append(e,r),insert(m,a,h);for(let p=0;p<d.length;p+=1)d[p]&&d[p].m(m,h);insert(m,s,h),l=!0},p(m,h){if(h&1){u=ensure_array_like(m[0]);let p;for(p=0;p<u.length;p+=1){const g=get_each_context$9(m,u,p);d[p]?(d[p].p(g,h),transition_in(d[p],1)):(d[p]=create_each_block$9(g),d[p].c(),transition_in(d[p],1),d[p].m(s.parentNode,s))}for(group_outros(),p=u.length;p<d.length;p+=1)f(p);check_outros()}},i(m){if(!l){transition_in(n.$$.fragment,m);for(let h=0;h<u.length;h+=1)transition_in(d[h]);l=!0}},o(m){transition_out(n.$$.fragment,m),d=d.filter(Boolean);for(let h=0;h<d.length;h+=1)transition_out(d[h]);l=!1},d(m){m&&(detach(e),detach(a),detach(s)),destroy_component(n),destroy_each(d,m)}}}function create_header_slot$2(o){let e;return{c(){e=text("Confirm close tabs")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$2(o){let e,t,n,r;return e=new FormSubmit({props:{value:"Close tabs"}}),e.$on("click",o[4]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",o[5]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$i(o){let e,t;const n=[o[3]];let r={$$slots:{footer:[create_footer_slot$2],header:[create_header_slot$2],default:[create_default_slot_1$c]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&8?get_spread_update(n,[get_spread_object(a[3])]):{};s&519&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$J(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$i]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&527&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$I(o,e,t){const n=["tabs","onConfirm","onCancel"];let r=compute_rest_props(e,n),{tabs:a}=e,{onConfirm:s}=e,{onCancel:l}=e;const u=()=>{closeCurrentModal(),s()},d=()=>{closeCurrentModal(),l()};return o.$$set=f=>{e=assign(assign({},e),exclude_internal_props(f)),t(3,r=compute_rest_props(e,n)),"tabs"in f&&t(0,a=f.tabs),"onConfirm"in f&&t(1,s=f.onConfirm),"onCancel"in f&&t(2,l=f.onCancel)},[a,s,l,r,u,d]}class CloseTabModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$I,create_fragment$J,safe_not_equal,{tabs:0,onConfirm:1,onCancel:2})}}const CloseTabModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:CloseTabModal},Symbol.toStringTag,{value:"Module"})),TabsPanel_svelte_svelte_type_style_lang="";function get_each_context$8(o,e,t){const n=o.slice();return n[47]=e[t],n}function get_each_context_1$2(o,e,t){const n=o.slice();return n[50]=e[t],n}function create_if_block_2$8(o){var N,M;let e,t,n,r,a=o[47].tabDbName+"",s,l,u=(M=(N=o[4])==null?void 0:N.find(E))==null?void 0:M.isReadOnly,d,f,m,h,p,g,b,v,y,C;function E(...F){return o[27](o[47],...F)}n=new FontIcon({props:{icon:getDbIcon(o[47].tabDbKey)}});let A=u&&create_if_block_4$6(),k=o[6]&&o[7].length>1&&create_if_block_3$6(o);p=new FontIcon({props:{icon:"icon close"}});function T(...F){return o[29](o[47],...F)}function $(...F){return o[30](o[47],...F)}function S(...F){return o[31](o[47],...F)}function I(...F){return o[32](o[47],...F)}function R(...F){return o[33](o[47],...F)}return{c(){var F,D;e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),s=text(a),l=space(),A&&A.c(),d=space(),f=element("div"),k&&k.c(),m=space(),h=element("div"),create_component(p.$$.fragment),attr(t,"class","db-name-inner svelte-i4b9tu"),attr(h,"class","tab-group-button tabCloseButton svelte-i4b9tu"),attr(f,"class","tab-group-buttons svelte-i4b9tu"),attr(e,"class","db-name svelte-i4b9tu"),attr(e,"style",g=o[12](o[47].tabs[0].props,(o[10]?o[47].grpid==((F=o[11])==null?void 0:F.grpid):o[47].tabDbKey==o[8])?2:3)),attr(e,"draggable",!0),toggle_class(e,"selected",o[10]?o[47].grpid==((D=o[11])==null?void 0:D.grpid):o[47].tabDbKey==o[8])},m(F,D){insert(F,e,D),append(e,t),mount_component(n,t,null),append(t,r),append(t,s),append(t,l),A&&A.m(t,null),append(e,d),append(e,f),k&&k.m(f,null),append(f,m),append(f,h),mount_component(p,h,null),v=!0,y||(C=[listen(h,"click",T),listen(e,"mouseup",$),action_destroyer(b=contextMenu.call(null,e,getDatabaseContextMenu(o[47].tabs))),listen(e,"dragstart",S),listen(e,"dragenter",I),listen(e,"drop",R),listen(e,"dragend",o[34])],y=!0)},p(F,D){var B,K,U,G;o=F;const x={};D[0]&128&&(x.icon=getDbIcon(o[47].tabDbKey)),n.$set(x),(!v||D[0]&128)&&a!==(a=o[47].tabDbName+"")&&set_data(s,a),D[0]&144&&(u=(K=(B=o[4])==null?void 0:B.find(E))==null?void 0:K.isReadOnly),u?A?D[0]&144&&transition_in(A,1):(A=create_if_block_4$6(),A.c(),transition_in(A,1),A.m(t,null)):A&&(group_outros(),transition_out(A,1,1,()=>{A=null}),check_outros()),o[6]&&o[7].length>1?k?(k.p(o,D),D[0]&192&&transition_in(k,1)):(k=create_if_block_3$6(o),k.c(),transition_in(k,1),k.m(f,m)):k&&(group_outros(),transition_out(k,1,1,()=>{k=null}),check_outros()),(!v||D[0]&7552&&g!==(g=o[12](o[47].tabs[0].props,(o[10]?o[47].grpid==((U=o[11])==null?void 0:U.grpid):o[47].tabDbKey==o[8])?2:3)))&&attr(e,"style",g),b&&is_function(b.update)&&D[0]&128&&b.update.call(null,getDatabaseContextMenu(o[47].tabs)),(!v||D[0]&3456)&&toggle_class(e,"selected",o[10]?o[47].grpid==((G=o[11])==null?void 0:G.grpid):o[47].tabDbKey==o[8])},i(F){v||(transition_in(n.$$.fragment,F),transition_in(A),transition_in(k),transition_in(p.$$.fragment,F),v=!0)},o(F){transition_out(n.$$.fragment,F),transition_out(A),transition_out(k),transition_out(p.$$.fragment,F),v=!1},d(F){F&&detach(e),destroy_component(n),A&&A.d(),k&&k.d(),destroy_component(p),y=!1,run_all(C)}}}function create_if_block_4$6(o){let e,t;return e=new FontIcon({props:{icon:"icon lock"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$6(o){let e,t,n,r,a;t=new FontIcon({props:{icon:"icon split"}});function s(...l){return o[28](o[47],...l)}return{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","tab-group-button tabCloseButton svelte-i4b9tu")},m(l,u){insert(l,e,u),mount_component(t,e,null),n=!0,r||(a=listen(e,"click",s),r=!0)},p(l,u){o=l},i(l){n||(transition_in(t.$$.fragment,l),n=!0)},o(l){transition_out(t.$$.fragment,l),n=!1},d(l){l&&detach(e),destroy_component(t),r=!1,a()}}}function create_if_block_1$f(o){let e,t;return e=new FontIcon({props:{icon:"img warn",padLeft:!0,title:"This tab is bound to different server than actual DB"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_1$2(o){var $,S,I,R;let e,t,n,r,a=o[50].title+"",s,l,u,d,f,m,h,p,g,b;t=new FontIcon({props:{icon:o[50].busy?"icon loading":o[50].icon}});let v=o[3]&&(($=o[50].props)==null?void 0:$.conid)&&((S=o[50].props)==null?void 0:S.conid)!=((R=(I=o[2])==null?void 0:I.connection)==null?void 0:R._id)&&create_if_block_1$f();function y(...N){return o[35](o[50],...N)}d=new TabCloseButton({props:{unsaved:o[50].unsaved}}),d.$on("click",y);function C(...N){return o[36](o[50],...N)}function E(...N){return o[37](o[50],...N)}function A(...N){return o[38](o[50],...N)}function k(...N){return o[39](o[50],...N)}function T(...N){return o[40](o[50],...N)}return{c(){var N,M;e=element("div"),create_component(t.$$.fragment),n=space(),r=element("span"),s=text(a),l=space(),v&&v.c(),u=space(),create_component(d.$$.fragment),f=space(),attr(r,"class","file-name svelte-i4b9tu"),attr(e,"id",m=`file-tab-item-${o[50].tabid}`),attr(e,"class","file-tab-item svelte-i4b9tu"),attr(e,"draggable",!0),toggle_class(e,"selected",o[13]||o[10]?o[50].tabid==((N=o[14])==null?void 0:N.tabid):o[50].tabid==((M=o[1])==null?void 0:M.tabid))},m(N,M){insert(N,e,M),mount_component(t,e,null),append(e,n),append(e,r),append(r,s),append(e,l),v&&v.m(e,null),append(e,u),mount_component(d,e,null),append(e,f),p=!0,g||(b=[listen(e,"click",C),listen(e,"mouseup",E),action_destroyer(h=contextMenu.call(null,e,o[18](o[50]))),listen(e,"dragstart",A),listen(e,"dragenter",k),listen(e,"drop",T),listen(e,"dragend",o[41])],g=!0)},p(N,M){var x,B,K,U,G,W;o=N;const F={};M[0]&128&&(F.icon=o[50].busy?"icon loading":o[50].icon),t.$set(F),(!p||M[0]&128)&&a!==(a=o[50].title+"")&&set_data(s,a),o[3]&&((x=o[50].props)!=null&&x.conid)&&((B=o[50].props)==null?void 0:B.conid)!=((U=(K=o[2])==null?void 0:K.connection)==null?void 0:U._id)?v?M[0]&140&&transition_in(v,1):(v=create_if_block_1$f(),v.c(),transition_in(v,1),v.m(e,u)):v&&(group_outros(),transition_out(v,1,1,()=>{v=null}),check_outros());const D={};M[0]&128&&(D.unsaved=o[50].unsaved),d.$set(D),(!p||M[0]&128&&m!==(m=`file-tab-item-${o[50].tabid}`))&&attr(e,"id",m),h&&is_function(h.update)&&M[0]&128&&h.update.call(null,o[18](o[50])),(!p||M[0]&25730)&&toggle_class(e,"selected",o[13]||o[10]?o[50].tabid==((G=o[14])==null?void 0:G.tabid):o[50].tabid==((W=o[1])==null?void 0:W.tabid))},i(N){p||(transition_in(t.$$.fragment,N),transition_in(v),transition_in(d.$$.fragment,N),p=!0)},o(N){transition_out(t.$$.fragment,N),transition_out(v),transition_out(d.$$.fragment,N),p=!1},d(N){N&&detach(e),destroy_component(t),v&&v.d(),destroy_component(d),g=!1,run_all(b)}}}function create_each_block$8(o){let e,t,n,r,a,s=!o[3]&&create_if_block_2$8(o),l=ensure_array_like(o[47].tabs),u=[];for(let f=0;f<l.length;f+=1)u[f]=create_each_block_1$2(get_each_context_1$2(o,l,f));const d=f=>transition_out(u[f],1,1,()=>{u[f]=null});return{c(){e=element("div"),s&&s.c(),t=space(),n=element("div");for(let f=0;f<u.length;f+=1)u[f].c();r=space(),attr(n,"class","db-group svelte-i4b9tu"),attr(e,"class","db-wrapper svelte-i4b9tu")},m(f,m){insert(f,e,m),s&&s.m(e,null),append(e,t),append(e,n);for(let h=0;h<u.length;h+=1)u[h]&&u[h].m(n,null);append(e,r),a=!0},p(f,m){if(f[3]?s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()):s?(s.p(f,m),m[0]&8&&transition_in(s,1)):(s=create_if_block_2$8(f),s.c(),transition_in(s,1),s.m(e,t)),m[0]&1533071){l=ensure_array_like(f[47].tabs);let h;for(h=0;h<l.length;h+=1){const p=get_each_context_1$2(f,l,h);u[h]?(u[h].p(p,m),transition_in(u[h],1)):(u[h]=create_each_block_1$2(p),u[h].c(),transition_in(u[h],1),u[h].m(n,null))}for(group_outros(),h=l.length;h<u.length;h+=1)d(h);check_outros()}},i(f){if(!a){transition_in(s);for(let m=0;m<l.length;m+=1)transition_in(u[m]);a=!0}},o(f){transition_out(s),u=u.filter(Boolean);for(let m=0;m<u.length;m+=1)transition_out(u[m]);a=!1},d(f){f&&detach(e),s&&s.d(),destroy_each(u,f)}}}function create_if_block$n(o){let e,t,n;return{c(){e=element("div"),e.innerHTML='<svg viewBox="0 0 24 24" width="16" height="16" stroke="currentColor" stroke-width="1.75" fill="none" stroke-linecap="round" stroke-linejoin="round" class="css-i6dzq1 s-QUJcZpE-kmAU" style="margin-top: 4px;"><path d="M12 3h7a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-7m0-18H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h7m0-18v18" class="s-QUJcZpE-kmAU"></path></svg>',set_style(e,"margin-right","10px"),attr(e,"class","icon-button svelte-i4b9tu"),attr(e,"title","Split window")},m(r,a){insert(r,e,a),t||(n=listen(e,"click",o[43]),t=!0)},p:noop$1,d(r){r&&detach(e),t=!1,n()}}}function create_fragment$I(o){let e,t,n,r,a,s,l,u,d,f,m=ensure_array_like(o[7]),h=[];for(let b=0;b<m.length;b+=1)h[b]=create_each_block$8(get_each_context$8(o,m,b));const p=b=>transition_out(h[b],1,1,()=>{h[b]=null});let g=o[6]&&create_if_block$n(o);return l=new FontIcon({props:{icon:"icon plus-thick"}}),{c(){e=element("div"),t=element("div");for(let b=0;b<h.length;b+=1)h[b].c();n=space(),r=element("div"),g&&g.c(),a=space(),s=element("div"),create_component(l.$$.fragment),attr(t,"class","tabs svelte-i4b9tu"),toggle_class(t,"can-split",o[6]),attr(s,"class","icon-button svelte-i4b9tu"),attr(s,"title","New query"),attr(r,"class","icons-wrapper svelte-i4b9tu"),attr(e,"class","root svelte-i4b9tu")},m(b,v){insert(b,e,v),append(e,t);for(let y=0;y<h.length;y+=1)h[y]&&h[y].m(t,null);o[42](t),append(e,n),append(e,r),g&&g.m(r,null),append(r,a),append(r,s),mount_component(l,s,null),u=!0,d||(f=[listen(t,"wheel",o[21]),listen(s,"click",o[44])],d=!0)},p(b,v){if(v[0]&2063839){m=ensure_array_like(b[7]);let y;for(y=0;y<m.length;y+=1){const C=get_each_context$8(b,m,y);h[y]?(h[y].p(C,v),transition_in(h[y],1)):(h[y]=create_each_block$8(C),h[y].c(),transition_in(h[y],1),h[y].m(t,null))}for(group_outros(),y=m.length;y<h.length;y+=1)p(y);check_outros()}(!u||v[0]&64)&&toggle_class(t,"can-split",b[6]),b[6]?g?g.p(b,v):(g=create_if_block$n(b),g.c(),g.m(r,a)):g&&(g.d(1),g=null)},i(b){if(!u){for(let v=0;v<m.length;v+=1)transition_in(h[v]);transition_in(l.$$.fragment,b),u=!0}},o(b){h=h.filter(Boolean);for(let v=0;v<h.length;v+=1)transition_out(h[v]);transition_out(l.$$.fragment,b),u=!1},d(b){b&&detach(e),destroy_each(h,b),o[42](null),g&&g.d(),destroy_component(l),d=!1,run_all(f)}}}var __awaiter$2=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const getCurrentValueMarker={};function shouldShowTab(o,e=getCurrentValueMarker,t=getCurrentValueMarker){var n,r,a,s,l;if(e==getCurrentValueMarker?getLockedDatabaseMode():e){const d=t==getCurrentValueMarker?getCurrentDatabase():t;return o.closedTime==null&&(!(!((n=o.props)===null||n===void 0)&&n.conid)||!(!((r=o.props)===null||r===void 0)&&r.database)||((a=o.props)===null||a===void 0?void 0:a.conid)==((s=d==null?void 0:d.connection)===null||s===void 0?void 0:s._id)&&((l=o.props)===null||l===void 0?void 0:l.database)==(d==null?void 0:d.name))}return o.closedTime==null}function allowCloseTabs(o){return o.length==0?Promise.resolve(!0):new Promise(e=>{showModal(CloseTabModal,{onCancel:()=>e(!1),onConfirm:()=>e(!0),tabs:o})})}const closeTabFunc=o=>e=>__awaiter$2(void 0,void 0,void 0,function*(){const t=getOpenedTabs().find(r=>r.tabid==e),n=getOpenedTabs().filter(r=>o(r,t)).filter(r=>r.unsaved).filter(r=>shouldShowTab(r));(yield allowCloseTabs(n))&&openedTabs.update(r=>{const a=r.find(u=>u.tabid==e);if(!a)return r;const s=r.map(u=>Object.assign(Object.assign({},u),{closedTime:shouldShowTab(u)&&o(u,a)?new Date().getTime():u.closedTime,selected:!1}));if(s.find(u=>u.selected&&shouldShowTab(u)))return s;const l=_.findLastIndex(s,u=>shouldShowTab(u));return s.map((u,d)=>Object.assign(Object.assign({},u),{selected:d==l}))})}),closeMultipleTabs=(o,e=!1)=>__awaiter$2(void 0,void 0,void 0,function*(){const t=getOpenedTabs().filter(n=>o(n)).filter(n=>n.unsaved).filter(n=>shouldShowTab(n));(yield allowCloseTabs(t))&&openedTabs.update(n=>{const r=e?n.filter(s=>!o(s)):n.map(s=>Object.assign(Object.assign({},s),{closedTime:shouldShowTab(s)&&o(s)?new Date().getTime():s.closedTime,selected:!1}));if(r.find(s=>s.selected&&shouldShowTab(s)))return r;const a=_.findLastIndex(r,s=>shouldShowTab(s));return r.map((s,l)=>Object.assign(Object.assign({},s),{selected:l==a}))})});function splitTab(o){openedTabs.update(e=>e.map(t=>Object.assign(Object.assign({},t),{multiTabIndex:t.selected?1-o:t.multiTabIndex})))}function splitTabGroup(o,e){openedTabs.update(t=>t.map(n=>Object.assign(Object.assign({},n),{multiTabIndex:o.find(r=>n.tabid==r.tabid)?1-e:n.multiTabIndex})))}const closeTab=closeTabFunc((o,e)=>o.tabid==e.tabid),closeAll=o=>__awaiter$2(void 0,void 0,void 0,function*(){const e=getOpenedTabs().filter(n=>n.unsaved).filter(n=>shouldShowTab(n));if(!(yield allowCloseTabs(e)))return;const t=new Date().getTime();openedTabs.update(n=>n.map(r=>Object.assign(Object.assign({},r),{closedTime:shouldShowTab(r)&&(o==null||o==(r.multiTabIndex||0))?t:r.closedTime,selected:!1,visibleSecondary:!1})))}),closeTabsWithCurrentDb=()=>{const o=getCurrentDatabase();closeMultipleTabs(e=>{var t,n,r;return((t=o==null?void 0:o.connection)===null||t===void 0?void 0:t._id)==((n=e==null?void 0:e.props)===null||n===void 0?void 0:n.conid)&&(o==null?void 0:o.name)==((r=e==null?void 0:e.props)===null||r===void 0?void 0:r.database)})},closeTabsButCurrentDb=()=>{const o=getCurrentDatabase();closeMultipleTabs(e=>{var t,n,r;return((t=o==null?void 0:o.connection)===null||t===void 0?void 0:t._id)!=((n=e==null?void 0:e.props)===null||n===void 0?void 0:n.conid)||(o==null?void 0:o.name)!=((r=e==null?void 0:e.props)===null||r===void 0?void 0:r.database)})},closeCurrentTab=()=>{closeTab(getActiveTabId())},closeWithSameDb=closeTabFunc((o,e)=>_.get(o,"props.conid")==_.get(e,"props.conid")&&_.get(o,"props.database")==_.get(e,"props.database")),closeWithOtherDb=closeTabFunc((o,e)=>_.get(o,"props.conid")!=_.get(e,"props.conid")||_.get(o,"props.database")!=_.get(e,"props.database")),closeOthersInMultiTab=o=>closeTabFunc((e,t)=>e.tabid!=t.tabid&&(e.multiTabIndex||0)==o);function getTabDbName(o,e){if(o.tabComponent=="ConnectionTab")return"Connections";if(o.props&&o.props.conid&&o.props.database)return o.props.database;if(o.props&&o.props.conid){const t=e==null?void 0:e.find(n=>n._id==o.props.conid);return t?getConnectionLabel(t,{allowExplicitDatabase:!1}):"???"}return o.props&&o.props.archiveFolder?o.props.archiveFolder:"(no DB)"}function getDbIcon(o){if(o){if(o.startsWith("database://"))return"icon database";if(o.startsWith("archive://"))return"icon archive";if(o.startsWith("server://"))return"icon server";if(o.startsWith("connections."))return"icon connection"}return"icon file"}function switchTabByOrder(o){const e=_.sortBy(getOpenedTabs().filter(a=>shouldShowTab(a)),"tabOrder");o&&e.reverse();const t=e.find(a=>a.selected);if(!t)return;const{tabOrder:n}=t,r=e.filter(a=>o?a.tabOrder<n:a.tabOrder>n)[0]||e[0];r&&setSelectedTab(r.tabid)}registerCommand({id:"tabs.nextTab",category:"Tabs",name:"Next tab",keyText:"Ctrl+Tab",testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=2,onClick:()=>switchTabByOrder(!1)});registerCommand({id:"tabs.previousTab",category:"Tabs",name:"Previous tab",keyText:"Ctrl+Shift+Tab",testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=2,onClick:()=>switchTabByOrder(!0)});registerCommand({id:"tabs.closeAll",category:"Tabs",name:"Close all tabs",testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=1,onClick:closeAll});registerCommand({id:"tabs.closeTab",category:"Tabs",name:"Close tab",keyText:isElectronAvailable()?"CtrlOrCommand+W":null,testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=1,onClick:closeCurrentTab});registerCommand({id:"tabs.closeTabsWithCurrentDb",category:"Tabs",name:"Close tabs with current DB",testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=1&&!!getCurrentDatabase(),onClick:closeTabsWithCurrentDb});registerCommand({id:"tabs.closeTabsButCurrentDb",category:"Tabs",name:"Close tabs but current DB",testEnabled:()=>getOpenedTabs().filter(o=>!o.closedTime).length>=1&&!!getCurrentDatabase(),onClick:closeTabsButCurrentDb});registerCommand({id:"tabs.addToFavorites",category:"Tabs",name:"Add current tab to favorites",testEnabled:()=>{var o,e,t,n,r;return((o=getActiveTab())===null||o===void 0?void 0:o.tabComponent)&&tabs[(e=getActiveTab())===null||e===void 0?void 0:e.tabComponent]&&tabs[(t=getActiveTab())===null||t===void 0?void 0:t.tabComponent].allowAddToFavorites&&tabs[(n=getActiveTab())===null||n===void 0?void 0:n.tabComponent].allowAddToFavorites((r=getActiveTab())===null||r===void 0?void 0:r.props)},onClick:()=>showModal(FavoriteModal,{savingTab:getActiveTab()})});function getDatabaseContextMenu(o){const{tabid:e,props:t}=o[0],{conid:n,database:r}=t||{};return[n&&r&&[{text:`Close tabs with DB ${r}`,onClick:()=>closeWithSameDb(e)},{text:`Close tabs with other DB than ${r}`,onClick:()=>closeWithOtherDb(e)}]]}function instance$H(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b=noop$1,v=()=>(b(),b=subscribe(r,pe=>t(4,g=pe)),r),y,C,E,A,k;component_subscribe(o,openedTabs,pe=>t(25,f=pe)),component_subscribe(o,currentDatabase,pe=>t(2,m=pe)),component_subscribe(o,lockedDatabaseMode,pe=>t(3,h=pe)),component_subscribe(o,activeTabId,pe=>t(26,p=pe)),component_subscribe(o,draggingDbGroup,pe=>t(10,y=pe)),component_subscribe(o,draggingDbGroupTarget,pe=>t(11,C=pe)),component_subscribe(o,draggingTab,pe=>t(13,A=pe)),component_subscribe(o,draggingTabTarget,pe=>t(14,k=pe)),o.$$.on_destroy.push(()=>b());var T=this&&this.__awaiter||function(pe,Oe,qe,et){function Ue(fe){return fe instanceof qe?fe:new qe(function(Ie){Ie(fe)})}return new(qe||(qe=Promise))(function(fe,Ie){function We(ze){try{Le(et.next(ze))}catch(re){Ie(re)}}function $e(ze){try{Le(et.throw(ze))}catch(re){Ie(re)}}function Le(ze){ze.done?fe(ze.value):Ue(ze.value).then(We,$e)}Le((et=et.apply(pe,Oe||[])).next())})};let{multiTabIndex:$}=e,{shownTab:S}=e;const I=useConnectionColorFactory(3,null,!0);component_subscribe(o,I,pe=>t(12,E=pe));const R=(pe,Oe)=>{pe.target.closest(".tabCloseButton")||setSelectedTab(Oe)},N=(pe,Oe)=>{pe.button==1&&(pe.preventDefault(),closeTab(Oe))},M=pe=>()=>{const{tabid:Oe,props:qe,tabComponent:et,appObject:Ue,appObjectData:fe}=pe,Ie=Ue?appObjectTypes[Ue]:null;return[{text:"Close",onClick:()=>closeTab(Oe)},{text:"Close all",onClick:()=>closeAll($)},{text:"Close others",onClick:()=>closeOthersInMultiTab($)(Oe)},{text:"Duplicate",onClick:()=>duplicateTab(pe)},et&&tabs[et]&&tabs[et].allowAddToFavorites&&tabs[et].allowAddToFavorites(qe)&&[{divider:!0},{text:"Add to favorites",onClick:()=>showModal(FavoriteModal,{savingTab:pe})}],{divider:!0},Ie&&Ie.createAppObjectMenu&&Ie.createTitle&&fe&&{text:Ie.createTitle(fe),submenu:Ie.createAppObjectMenu(fe)}]},F=pe=>T(void 0,void 0,void 0,function*(){const{conid:Oe,database:qe}=pe||{};if(Oe){const et=yield getConnectionInfo({conid:Oe,database:qe});if(et){set_store_value(currentDatabase,m={connection:et,name:qe},m);return}}set_store_value(currentDatabase,m=null,m)});function D(pe){return T(this,void 0,void 0,function*(){yield tick();const Oe=document.getElementById(`file-tab-item-${pe}`);Oe&&Oe.scrollIntoView({block:"nearest",inline:"nearest"})})}function x(pe,Oe,qe){if(pe.find(Le=>Oe.find(ze=>Le.tabid==ze.tabid)))return;const et=sortTabs(f.filter(Le=>Le.closedTime==null)),Ue=Oe.map(Le=>_.findIndex(et,ze=>ze.tabid==Le.tabid)),fe=_.min(Ue),Ie=_.max(Ue),We=_.findIndex(et,Le=>Le.tabid==pe[0].tabid);if(We<0||fe<0||Ie<0){console.warn("Drag tab index not found");return}const $e=fe<We?[...et.slice(0,fe),...pe,...et.slice(fe).filter(Le=>!pe.find(ze=>ze.tabid==Le.tabid))]:[...et.slice(0,Ie+1).filter(Le=>!pe.find(ze=>ze.tabid==Le.tabid)),...pe,...et.slice(Ie+1)];openedTabs.update(Le=>Le.map(ze=>{const re=_.findIndex($e,ge=>ge.tabid==ze.tabid);return re>=0?Object.assign(Object.assign({},ze),{tabOrder:re+1,multiTabIndex:pe.find(ge=>ge.tabid==ze.tabid)?qe:ze.multiTabIndex}):ze})),draggingDbGroup.set(null),draggingDbGroupTarget.set(null),draggingTab.set(null),draggingTabTarget.set(null)}let B;function K(pe){pe.shiftKey||(pe.preventDefault(),B.scrollBy({top:0,left:pe.deltaY<0?-150:150,behavior:"smooth"}))}const U=(pe,Oe)=>{var qe,et;return Oe._id==((et=(qe=pe.tabs[0])==null?void 0:qe.props)==null?void 0:et.conid)},G=(pe,Oe)=>splitTabGroup(pe.tabs,$),W=(pe,Oe)=>closeMultipleTabs(qe=>pe.tabs.find(et=>et.tabid==qe.tabid)),q=(pe,Oe)=>{Oe.button==1?closeMultipleTabs(qe=>pe.tabs.find(et=>et.tabid==qe.tabid)):F(pe.tabs[0].props)},H=(pe,Oe)=>{set_store_value(draggingDbGroup,y=pe,y)},z=(pe,Oe)=>{set_store_value(draggingDbGroupTarget,C=pe,C)},Y=(pe,Oe)=>{x(y.tabs,pe.tabs,$)},V=pe=>{set_store_value(draggingDbGroup,y=null,y),set_store_value(draggingDbGroupTarget,C=null,C)},J=(pe,Oe)=>closeTab(pe.tabid),Q=(pe,Oe)=>R(Oe,pe.tabid),X=(pe,Oe)=>N(Oe,pe.tabid),ie=async(pe,Oe)=>{set_store_value(draggingTab,A=pe,A),await tick(),setSelectedTab(pe.tabid)},ce=(pe,Oe)=>{set_store_value(draggingTabTarget,k=pe,k)},de=(pe,Oe)=>{A&&x([A],[pe],$),y&&x(y.tabs,[pe],$)},se=pe=>{set_store_value(draggingTab,A=null,A),set_store_value(draggingTabTarget,k=null,k)};function me(pe){binding_callbacks[pe?"unshift":"push"](()=>{B=pe,t(5,B)})}const ue=()=>splitTab($),he=()=>newQuery({multiTabIndex:$});return o.$$set=pe=>{"multiTabIndex"in pe&&t(0,$=pe.multiTabIndex),"shownTab"in pe&&t(1,S=pe.shownTab)},o.$$.update=()=>{o.$$.dirty[0]&13&&t(24,n=pe=>shouldShowTab(pe,h,m)&&(pe.multiTabIndex||0)==$),o.$$.dirty[0]&4&&t(8,a=m&&m.name&&m.connection?`database://${m.name}-${m.connection._id}`:m&&m.connection?`server://${m.connection._id}`:"_no"),o.$$.dirty[0]&50331664&&t(23,s=f.filter(n).map(pe=>Object.assign(Object.assign({},pe),{tabDbName:getTabDbName(pe,g),tabDbKey:getTabDbKey(pe)}))),o.$$.dirty[0]&8388608&&t(7,l=groupTabs(s)),o.$$.dirty[0]&67108864&&D(p),o.$$.dirty[0]&33554444&&t(22,u=f.filter(pe=>shouldShowTab(pe,h,m))),o.$$.dirty[0]&4194304&&t(6,d=_.uniq(u.map(pe=>pe.multiTabIndex||0)).length==1&&u.length>=2)},v(t(9,r=useConnectionList())),[$,S,m,h,g,B,d,l,a,r,y,C,E,A,k,I,R,N,M,F,x,K,u,s,n,f,p,U,G,W,q,H,z,Y,V,J,Q,X,ie,ce,de,se,me,ue,he]}class TabsPanel extends SvelteComponent{constructor(e){super(),init(this,e,instance$H,create_fragment$I,safe_not_equal,{multiTabIndex:0,shownTab:1},null,[-1,-1])}}function create_fragment$H(o){var a,s,l;let e,t;const n=[o[6],{data:o[0]},{title:o[0].name},{extInfo:o[0].extInfo},{icon:"img database"},{colorMark:((a=o[1])==null?void 0:a.connectionColorFactory)&&((s=o[1])==null?void 0:s.connectionColorFactory({conid:_.get(o[0].connection,"_id"),database:o[0].name},null,null,!1))},{isBold:_.get(o[4],"connection._id")==_.get(o[0].connection,"_id")&&_.get(o[4],"name")==o[0].name},{menu:o[5]},{showPinnedInsteadOfUnpin:(l=o[1])==null?void 0:l.showPinnedInsteadOfUnpin},{onPin:o[3]?null:o[8]},{onUnpin:o[3]?o[9]:null}];let r={};for(let u=0;u<n.length;u+=1)r=assign(r,n[u]);return e=new AppObjectCore({props:r}),e.$on("click",o[10]),e.$on("dragstart",o[11]),e.$on("dragenter",o[12]),e.$on("dragend",o[13]),e.$on("drop",o[14]),e.$on("middleclick",o[15]),{c(){create_component(e.$$.fragment)},m(u,d){mount_component(e,u,d),t=!0},p(u,[d]){var m,h,p;const f=d&123?get_spread_update(n,[d&64&&get_spread_object(u[6]),d&1&&{data:u[0]},d&1&&{title:u[0].name},d&1&&{extInfo:u[0].extInfo},n[4],d&3&&{colorMark:((m=u[1])==null?void 0:m.connectionColorFactory)&&((h=u[1])==null?void 0:h.connectionColorFactory({conid:_.get(u[0].connection,"_id"),database:u[0].name},null,null,!1))},d&17&&{isBold:_.get(u[4],"connection._id")==_.get(u[0].connection,"_id")&&_.get(u[4],"name")==u[0].name},d&32&&{menu:u[5]},d&2&&{showPinnedInsteadOfUnpin:(p=u[1])==null?void 0:p.showPinnedInsteadOfUnpin},d&9&&{onPin:u[3]?null:u[8]},d&9&&{onUnpin:u[3]?u[9]:null}]):{};e.$set(f)},i(u){t||(transition_in(e.$$.fragment,u),t=!0)},o(u){transition_out(e.$$.fragment,u),t=!1},d(u){destroy_component(e,u)}}}var __awaiter$1=globalThis&&globalThis.__awaiter||function(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})};const extractKey$3=o=>o.name;function disconnectDatabaseConnection(o,e,t=!0){var n,r,a;const s=u=>{var d,f;return((d=u.props)===null||d===void 0?void 0:d.conid)==o&&((f=u.props)===null||f===void 0?void 0:f.database)==e&&u.tabComponent!="ConnectionTab"&&u.closedTime==null};if(t){const u=getOpenedTabs().filter(s).length;if(u>0){showModal(ConfirmModal,{message:`Closing connection will close ${u} opened tabs, continue?`,onConfirm:()=>disconnectDatabaseConnection(o,e,!1)});return}}getElectron()&&apiCall("database-connections/disconnect",{conid:o,database:e}),((r=(n=getCurrentDatabase())===null||n===void 0?void 0:n.connection)===null||r===void 0?void 0:r._id)==o&&((a=getCurrentDatabase())===null||a===void 0?void 0:a.name)==e&&currentDatabase.set(null),openedSingleDatabaseConnections.update(u=>u.filter(d=>d!=o)),closeMultipleTabs(s)}function getDatabaseMenuItems(o,e,t,n,r,a){var s,l,u,d,f,m,h,p,g,b;const v=filterAppsForDatabase(o,e,r),y=()=>{const z=`${getConnectionLabel(o)}
${e}`;openNewTab({title:"Query #",icon:"img sql-file",tooltip:z,tabComponent:"QueryTab",props:{conid:o._id,database:e}})},C=()=>{const z=`${getConnectionLabel(o)}
${e}`;openNewTab({title:"Table #",tooltip:z,icon:"img table-structure",tabComponent:"TableStructureTab",props:{conid:o._id,database:e}},{editor:{columns:[]}},{forceNewTab:!0})},E=()=>{showModal(ConfirmModal,{message:`Really drop database ${e}? All opened sessions with this database will be forcefully closed.`,onConfirm:()=>apiCall("server-connections/drop-database",{conid:o._id,name:e})})},A=()=>{showModal(InputTextModal,{value:"",label:"New collection name",header:"Create collection",onConfirm:z=>__awaiter$1(this,void 0,void 0,function*(){saveScriptToDatabase({conid:o._id,database:e},`db.createCollection('${z}')`)})})},k=()=>{showModal(ImportExportModal,{initialValues:{sourceStorageType:getDefaultFileFormat(t).storageType,targetStorageType:"database",targetConnectionId:o._id,targetDatabaseName:e}})},T=()=>{showModal(ImportExportModal,{initialValues:{targetStorageType:getDefaultFileFormat(t).storageType,sourceStorageType:"database",sourceConnectionId:o._id,sourceDatabaseName:e}})},$=()=>{showModal(SqlGeneratorModal,{conid:o._id,database:e})},S=()=>{showModal(ExportDatabaseDumpModal,{connection:Object.assign(Object.assign({},o),{database:e})})},I=()=>{showModal(ImportDatabaseDumpModal,{connection:Object.assign(Object.assign({},o),{database:e})})},R=()=>__awaiter$1(this,void 0,void 0,function*(){const z=yield getDatabaseInfo({conid:o._id,database:e});openNewTab({title:"Diagram #",icon:"img diagram",tabComponent:"DiagramTab",props:{conid:o._id,database:e}},{editor:{tables:z.tables.map(Y=>Object.assign(Object.assign({},Y),{designerId:`${Y.pureName}-${uuidv1()}`})),references:[],autoLayout:!0}})}),N=()=>{disconnectDatabaseConnection(o._id,e)},M=()=>__awaiter$1(this,void 0,void 0,function*(){const z=yield apiCall("database-connections/export-model",{conid:o._id,database:e});currentArchive.set(z.archiveFolder),selectedWidget.set("archive"),visibleWidgetSideBar.set(!0),showSnackbarSuccess(`Saved to archive ${z.archiveFolder}`)}),F=()=>{openNewTab({title:"Compare",icon:"img compare",tabComponent:"CompareModelTab"},{editor:{sourceConid:_.get(n,"connection._id"),sourceDatabase:_.get(n,"name"),targetConid:_.get(o,"_id"),targetDatabase:e}})},D=()=>__awaiter$1(this,void 0,void 0,function*(){const z=yield getDatabaseInfo({conid:o._id,database:e});openJsonDocument(z,e)}),x=()=>__awaiter$1(this,void 0,void 0,function*(){const z=yield apiCall("database-connections/export-keys",{conid:o==null?void 0:o._id,database:e,options:{keyPrefix:""}});if(z.errorMessage){showSnackbarError(z.errorMessage);return}newQuery({title:"Export #",initialData:z})}),B=()=>{openNewTab({title:"Query #",icon:"img query-design",tabComponent:"QueryDesignTab",props:{conid:o._id,database:e}})},K=()=>{openNewTab({title:"Perspective #",icon:"img perspective",tabComponent:"PerspectiveTab",props:{conid:o._id,database:e}})},U=()=>{openNewTab({title:"Profiler",icon:"img profiler",tabComponent:"ProfilerTab",props:{conid:o._id,database:e}})};function G(z){return __awaiter$1(this,void 0,void 0,function*(){saveScriptToDatabase({conid:o._id,database:e},z,!1)})}const W=lib.findEngineDriver(o,getExtensions()),q=_.flatten((v||[]).map(z=>z.commands||[])),H=((s=W==null?void 0:W.databaseEngineTypes)===null||s===void 0?void 0:s.includes("sql"))||((l=W==null?void 0:W.databaseEngineTypes)===null||l===void 0?void 0:l.includes("document"));return[{onClick:y,text:"New query",isNewQuery:!0},((u=W==null?void 0:W.databaseEngineTypes)===null||u===void 0?void 0:u.includes("sql"))&&{onClick:C,text:"New table"},((d=W==null?void 0:W.databaseEngineTypes)===null||d===void 0?void 0:d.includes("document"))&&{onClick:A,text:"New collection"},((f=W==null?void 0:W.databaseEngineTypes)===null||f===void 0?void 0:f.includes("sql"))&&{onClick:B,text:"Design query"},((m=W==null?void 0:W.databaseEngineTypes)===null||m===void 0?void 0:m.includes("sql"))&&{onClick:K,text:"Design perspective query"},{divider:!0},H&&!o.isReadOnly&&{onClick:k,text:"Import wizard"},H&&{onClick:T,text:"Export wizard"},((h=W==null?void 0:W.databaseEngineTypes)===null||h===void 0?void 0:h.includes("sql"))&&{onClick:I,text:"Restore/import SQL dump"},(W==null?void 0:W.supportsDatabaseDump)&&{onClick:S,text:"Backup/export SQL dump"},H&&!o.isReadOnly&&!o.singleDatabase&&{onClick:E,text:"Drop database"},{divider:!0},((p=W==null?void 0:W.databaseEngineTypes)===null||p===void 0?void 0:p.includes("sql"))&&{onClick:R,text:"Show diagram"},((g=W==null?void 0:W.databaseEngineTypes)===null||g===void 0?void 0:g.includes("sql"))&&{onClick:$,text:"SQL Generator"},(W==null?void 0:W.supportsDatabaseProfiler)&&{onClick:U,text:"Database profiler"},H&&{onClick:D,text:"Open model as JSON"},H&&{onClick:M,text:"Export DB model - experimental"},H&&_.get(n,"connection._id")&&(_.get(n,"connection._id")!=_.get(o,"_id")||_.get(n,"connection._id")==_.get(o,"_id")&&_.get(n,"name")!=_.get(o,"name"))&&{onClick:F,text:`Compare with ${_.get(n,"name")}`},((b=W==null?void 0:W.databaseEngineTypes)===null||b===void 0?void 0:b.includes("keyvalue"))&&{onClick:x,text:"Generate script"},(a.includes(o._id)||_.get(n,"connection._id")==_.get(o,"_id")&&_.get(n,"name")==e)&&{onClick:N,text:"Disconnect"},q.length>0&&[{divider:!0},q.map(z=>({text:z.name,onClick:()=>{showModal(ConfirmSqlModal,{sql:z.sql,onConfirm:()=>G(z.sql),engine:W.engine})}}))]]}function instance$G(o,e,t){let n,r;const a=["data","passProps"];let s=compute_rest_props(e,a),l,u,d,f=noop$1,m=()=>(f(),f=subscribe(r,I=>t(17,d=I)),r),h,p;component_subscribe(o,pinnedDatabases,I=>t(7,l=I)),component_subscribe(o,openedSingleDatabaseConnections,I=>t(16,u=I)),component_subscribe(o,currentDatabase,I=>t(4,h=I)),component_subscribe(o,extensions,I=>t(18,p=I)),o.$$.on_destroy.push(()=>f()),this&&this.__awaiter;let{data:g}=e,{passProps:b}=e;function v(){return getDatabaseMenuItems(g.connection,g.name,p,h,d,u)}const y=()=>pinnedDatabases.update(I=>[...I,g]),C=()=>pinnedDatabases.update(I=>I.filter(R=>{var N,M;return(R==null?void 0:R.name)!=(g==null?void 0:g.name)||((N=R==null?void 0:R.connection)==null?void 0:N._id)!=((M=g==null?void 0:g.connection)==null?void 0:M._id)})),E=()=>set_store_value(currentDatabase,h=g,h);function A(I){bubble.call(this,o,I)}function k(I){bubble.call(this,o,I)}function T(I){bubble.call(this,o,I)}function $(I){bubble.call(this,o,I)}const S=()=>{v().find(I=>I.isNewQuery).onClick()};return o.$$set=I=>{e=assign(assign({},e),exclude_internal_props(I)),t(6,s=compute_rest_props(e,a)),"data"in I&&t(0,g=I.data),"passProps"in I&&t(1,b=I.passProps)},o.$$.update=()=>{o.$$.dirty&129&&t(3,n=!!l.find(I=>{var R,N;return(I==null?void 0:I.name)==g.name&&((R=I==null?void 0:I.connection)===null||R===void 0?void 0:R._id)==((N=g.connection)===null||N===void 0?void 0:N._id)}))},m(t(2,r=useUsedApps())),[g,b,r,n,h,v,s,l,y,C,E,A,k,T,$,S]}class DatabaseAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$G,create_fragment$H,safe_not_equal,{data:0,passProps:1})}}const databaseAppObject=Object.freeze(Object.defineProperty({__proto__:null,default:DatabaseAppObject,disconnectDatabaseConnection,extractKey:extractKey$3,getDatabaseMenuItems},Symbol.toStringTag,{value:"Module"})),ConnectionTab_svelte_svelte_type_style_lang="";function create_if_block$m(o){let e,t,n,r,a,s,l,u,d;const f=[create_if_block_4$5,create_else_block$7],m=[];function h(v,y){return v[3]?0:1}n=h(o),r=m[n]=f[n](o);let p=!o[1]&&o[2]&&o[2].msgtype=="connected"&&create_if_block_3$5(o),g=!o[1]&&o[2]&&o[2].msgtype=="error"&&create_if_block_2$7(o),b=o[1]&&create_if_block_1$e();return{c(){e=element("div"),t=element("div"),r.c(),a=space(),s=element("div"),p&&p.c(),l=space(),g&&g.c(),u=space(),b&&b.c(),attr(t,"class","buttons svelte-1patgrk"),attr(s,"class","test-result svelte-1patgrk"),attr(e,"class","flex")},m(v,y){insert(v,e,y),append(e,t),m[n].m(t,null),append(e,a),append(e,s),p&&p.m(s,null),append(s,l),g&&g.m(s,null),append(s,u),b&&b.m(s,null),d=!0},p(v,y){let C=n;n=h(v),n===C?m[n].p(v,y):(group_outros(),transition_out(m[C],1,1,()=>{m[C]=null}),check_outros(),r=m[n],r?r.p(v,y):(r=m[n]=f[n](v),r.c()),transition_in(r,1),r.m(t,null)),!v[1]&&v[2]&&v[2].msgtype=="connected"?p?(p.p(v,y),y&6&&transition_in(p,1)):(p=create_if_block_3$5(v),p.c(),transition_in(p,1),p.m(s,l)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros()),!v[1]&&v[2]&&v[2].msgtype=="error"?g?(g.p(v,y),y&6&&transition_in(g,1)):(g=create_if_block_2$7(v),g.c(),transition_in(g,1),g.m(s,u)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros()),v[1]?b?y&2&&transition_in(b,1):(b=create_if_block_1$e(),b.c(),transition_in(b,1),b.m(s,null)):b&&(group_outros(),transition_out(b,1,1,()=>{b=null}),check_outros())},i(v){d||(transition_in(r),transition_in(p),transition_in(g),transition_in(b),d=!0)},o(v){transition_out(r),transition_out(p),transition_out(g),transition_out(b),d=!1},d(v){v&&detach(e),m[n].d(),p&&p.d(),g&&g.d(),b&&b.d()}}}function create_else_block$7(o){let e,t,n,r,a,s,l;e=new FormButton({props:{value:"Connect"}}),e.$on("click",o[9]);const u=[create_if_block_5$3,create_else_block_1$4],d=[];function f(m,h){return m[1]?0:1}return n=f(o),r=d[n]=u[n](o),s=new FormButton({props:{value:"Save"}}),s.$on("click",o[8]),{c(){create_component(e.$$.fragment),t=space(),r.c(),a=space(),create_component(s.$$.fragment)},m(m,h){mount_component(e,m,h),insert(m,t,h),d[n].m(m,h),insert(m,a,h),mount_component(s,m,h),l=!0},p(m,h){let p=n;n=f(m),n===p?d[n].p(m,h):(group_outros(),transition_out(d[p],1,1,()=>{d[p]=null}),check_outros(),r=d[n],r?r.p(m,h):(r=d[n]=u[n](m),r.c()),transition_in(r,1),r.m(a.parentNode,a))},i(m){l||(transition_in(e.$$.fragment,m),transition_in(r),transition_in(s.$$.fragment,m),l=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(r),transition_out(s.$$.fragment,m),l=!1},d(m){m&&(detach(t),detach(a)),destroy_component(e,m),d[n].d(m),destroy_component(s,m)}}}function create_if_block_4$5(o){let e,t;return e=new FormButton({props:{value:"Disconnect"}}),e.$on("click",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_else_block_1$4(o){let e,t;return e=new FormButton({props:{value:"Test"}}),e.$on("click",o[6]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$3(o){let e,t;return e=new FormButton({props:{value:"Cancel test"}}),e.$on("click",o[7]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_3$5(o){let e,t,n,r,a=o[2].version+"",s,l;return n=new FontIcon({props:{icon:"img ok"}}),{c(){e=element("div"),t=text("Connected: "),create_component(n.$$.fragment),r=space(),s=text(a)},m(u,d){insert(u,e,d),append(e,t),mount_component(n,e,null),append(e,r),append(e,s),l=!0},p(u,d){(!l||d&4)&&a!==(a=u[2].version+"")&&set_data(s,a)},i(u){l||(transition_in(n.$$.fragment,u),l=!0)},o(u){transition_out(n.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(n)}}}function create_if_block_2$7(o){let e,t,n,r,a=o[2].error+"",s,l,u,d;return n=new FontIcon({props:{icon:"img error"}}),u=new Link$1({props:{onClick:o[18],$$slots:{default:[create_default_slot_1$b]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=text("Connect failed: "),create_component(n.$$.fragment),r=space(),s=text(a),l=space(),create_component(u.$$.fragment),attr(e,"class","error-result svelte-1patgrk")},m(f,m){insert(f,e,m),append(e,t),mount_component(n,e,null),append(e,r),append(e,s),append(e,l),mount_component(u,e,null),d=!0},p(f,m){(!d||m&4)&&a!==(a=f[2].error+"")&&set_data(s,a);const h={};m&4&&(h.onClick=f[18]),m&4194304&&(h.$$scope={dirty:m,ctx:f}),u.$set(h)},i(f){d||(transition_in(n.$$.fragment,f),transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),destroy_component(n),destroy_component(u)}}}function create_default_slot_1$b(o){let e;return{c(){e=text("Show detail")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_1$e(o){let e,t,n,r;return t=new FontIcon({props:{icon:"icon loading"}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(" Testing connection")},m(a,s){insert(a,e,s),mount_component(t,e,null),append(e,n),r=!0},i(a){r||(transition_in(t.$$.fragment,a),r=!0)},o(a){transition_out(t.$$.fragment,a),r=!1},d(a){a&&detach(e),destroy_component(t)}}}function create_default_slot$h(o){var s,l;let e,t,n,r;t=new TabControl({props:{isInline:!0,containerMaxWidth:"800px",flex1:!1,tabs:[{label:"General",component:ConnectionDriverFields},((s=o[4])==null?void 0:s.showConnectionTab("sshTunnel",o[0]))&&{label:"SSH Tunnel",component:ConnectionSshTunnelFields},((l=o[4])==null?void 0:l.showConnectionTab("ssl",o[0]))&&{label:"SSL",component:ConnectionSslFields}]}});let a=o[4]&&create_if_block$m(o);return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","wrapper svelte-1patgrk")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(u,d){var m,h;const f={};d&17&&(f.tabs=[{label:"General",component:ConnectionDriverFields},((m=u[4])==null?void 0:m.showConnectionTab("sshTunnel",u[0]))&&{label:"SSH Tunnel",component:ConnectionSshTunnelFields},((h=u[4])==null?void 0:h.showConnectionTab("ssl",u[0]))&&{label:"SSL",component:ConnectionSslFields}]),t.$set(f),u[4]?a?(a.p(u,d),d&16&&transition_in(a,1)):(a=create_if_block$m(u),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(u){r||(transition_in(t.$$.fragment,u),transition_in(a),r=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(a),r=!1},d(u){u&&detach(e),destroy_component(t),a&&a.d()}}}function create_fragment$G(o){let e,t;return e=new FormProviderCore({props:{template:FormFieldTemplateLarge,values:o[5],$$slots:{default:[create_default_slot$h]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4194335&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const matchingProps=["conid"];function instance$F(o,e,t){let n,r,a,s,l,u,d;component_subscribe(o,openedSingleDatabaseConnections,I=>t(15,l=I)),component_subscribe(o,openedConnections,I=>t(16,u=I)),component_subscribe(o,extensions,I=>t(17,d=I));var f=this&&this.__awaiter||function(I,R,N,M){function F(D){return D instanceof N?D:new N(function(x){x(D)})}return new(N||(N=Promise))(function(D,x){function B(G){try{U(M.next(G))}catch(W){x(W)}}function K(G){try{U(M.throw(G))}catch(W){x(W)}}function U(G){G.done?D(G.value):F(G.value).then(B,K)}U((M=M.apply(I,R||[])).next())})};let{connection:m}=e,{tabid:h}=e,{conid:p}=e,g,b;const v=writable(m||{server:getCurrentConfig().isDocker?"dockerhost":"localhost",engine:""});component_subscribe(o,v,I=>t(0,s=I));const y=createRef(0);function C(I){return f(this,void 0,void 0,function*(){t(1,g=!0),y.update(M=>M+1);const R=y.get(),N=yield apiCall("connections/test",I.detail);y.get()==R&&(t(1,g=!1),t(2,b=N))})}function E(){y.update(I=>I+1),t(1,g=!1)}function A(){const I=["databaseFile","useDatabaseUrl","databaseUrl","authType","server","port","user","password","defaultDatabase","singleDatabase","socketPath"],R=I.filter(F=>r==null?void 0:r.showConnectionField(F,s)),N=_.difference(I,R);s.defaultDatabase||N.push("singleDatabase");let M=_.omit(s,N);return r!=null&&r.beforeConnectionSave&&(M=r==null?void 0:r.beforeConnectionSave(M)),r!=null&&r.showConnectionTab("sshTunnel",s)?s.useSshTunnel||(M=_.omitBy(M,(F,D)=>D.startsWith("ssh"))):(M=_.omit(M,["useSshTunnel"]),M=_.omitBy(M,(F,D)=>D.startsWith("ssh"))),r!=null&&r.showConnectionTab("ssl",s)?s.useSsl||(M=_.omitBy(M,(F,D)=>D.startsWith("ssl"))):(M=_.omit(M,["useSsl"]),M=_.omitBy(M,(F,D)=>D.startsWith("ssl"))),M}function k(){return f(this,void 0,void 0,function*(){let I=A();I=Object.assign(Object.assign({},I),{unsaved:!1});const R=yield apiCall("connections/save",I);set_store_value(v,s=Object.assign(Object.assign({},s),{_id:R._id,unsaved:!1}),s),changeTab(h,N=>Object.assign(Object.assign({},N),{title:getConnectionLabel(R),props:Object.assign(Object.assign({},N.props),{conid:R._id})})),showSnackbarSuccess("Connection saved")})}function T(){return f(this,void 0,void 0,function*(){let I=A();I._id||(I=Object.assign(Object.assign({},I),{unsaved:!0}));const R=yield apiCall("connections/save",I);set_store_value(v,s=Object.assign(Object.assign({},s),{unsaved:I.unsaved,_id:R._id}),s),openConnection(R)})}function $(){return f(this,void 0,void 0,function*(){s.singleDatabase?disconnectDatabaseConnection(s._id,s.defaultDatabase):disconnectServerConnection(s._id)})}onMount(()=>f(void 0,void 0,void 0,function*(){p&&set_store_value(v,s=yield apiCall("connections/get",{conid:p}),s)}));const S=()=>showModal(ErrorMessageModal,{message:b.detail,showAsCode:!0,title:"Database connection error"});return o.$$set=I=>{"connection"in I&&t(11,m=I.connection),"tabid"in I&&t(12,h=I.tabid),"conid"in I&&t(13,p=I.conid)},o.$$.update=()=>{o.$$.dirty&1&&t(14,n=s.engine),o.$$.dirty&147456&&t(4,r=d.drivers.find(I=>I.engine==n)),o.$$.dirty&98305&&t(3,a=u.includes(s._id)||l.includes(s._id))},[s,g,b,a,r,v,C,E,k,T,$,m,h,p,n,l,u,d,S]}class ConnectionTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$F,create_fragment$G,safe_not_equal,{connection:11,tabid:12,conid:13})}}const ConnectionTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConnectionTab,matchingProps},Symbol.toStringTag,{value:"Module"}));function create_if_block$l(o){let e,t;return e=new MapView({props:{geoJson:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.geoJson=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$F(o){let e,t,n=o[0]&&create_if_block$l(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[0]?n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block$l(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function instance$E(o,e,t){let{tabid:n}=e,r;return useEditorData({tabid:n,onInitialData:a=>{t(0,r=a)}}),o.$$set=a=>{"tabid"in a&&t(1,n=a.tabid)},[r,n]}class MapTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$E,create_fragment$F,safe_not_equal,{tabid:1})}}const MapTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:MapTab},Symbol.toStringTag,{value:"Module"})),CustomJoinModal_svelte_svelte_type_style_lang="";function get_each_context$7(o,e,t){const n=o.slice();return n[43]=e[t],n[45]=t,n}function create_key_block_1(o){var r;let e,t;function n(...a){return o[38](o[45],...a)}return e=new SelectField({props:{value:o[43].baseColumnName,isNative:!0,notSelected:!0,options:(((r=o[12])==null?void 0:r.columns)||[]).map(func$4)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u;o=a;const l={};s[0]&256&&(l.value=o[43].baseColumnName),s[0]&4096&&(l.options=(((u=o[12])==null?void 0:u.columns)||[]).map(func$4)),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_key_block$1(o){var r,a;let e,t;function n(...s){return o[39](o[45],...s)}return e=new SelectField({props:{value:o[43].refColumnName,isNative:!0,notSelected:!0,options:(((r=o[20])==null?void 0:r.columns)||((a=o[21])==null?void 0:a.columns)||[]).map(func_1$3)}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),t=!0},p(s,l){var d,f;o=s;const u={};l[0]&256&&(u.value=o[43].refColumnName),l[0]&3145728&&(u.options=(((d=o[20])==null?void 0:d.columns)||((f=o[21])==null?void 0:f.columns)||[]).map(func_1$3)),e.$set(u)},i(s){t||(transition_in(e.$$.fragment,s),t=!0)},o(s){transition_out(e.$$.fragment,s),t=!1},d(s){destroy_component(e,s)}}}function create_each_block$7(o){let e,t,n=o[43].baseColumnName,r,a,s=o[43].refColumnName,l,u,d,f,m=create_key_block_1(o),h=create_key_block$1(o);function p(...g){return o[40](o[45],...g)}return d=new FormStyledButton({props:{value:"Delete"}}),d.$on("click",p),{c(){e=element("div"),t=element("div"),m.c(),r=space(),a=element("div"),h.c(),l=space(),u=element("div"),create_component(d.$$.fragment),attr(t,"class","col-5 mr-1"),attr(a,"class","col-5 ml-1"),attr(u,"class","col-2 button svelte-1ecnyiy"),attr(e,"class","row svelte-1ecnyiy")},m(g,b){insert(g,e,b),append(e,t),m.m(t,null),append(e,r),append(e,a),h.m(a,null),append(e,l),append(e,u),mount_component(d,u,null),f=!0},p(g,b){o=g,b[0]&256&&safe_not_equal(n,n=o[43].baseColumnName)?(group_outros(),transition_out(m,1,1,noop$1),check_outros(),m=create_key_block_1(o),m.c(),transition_in(m,1),m.m(t,null)):m.p(o,b),b[0]&256&&safe_not_equal(s,s=o[43].refColumnName)?(group_outros(),transition_out(h,1,1,noop$1),check_outros(),h=create_key_block$1(o),h.c(),transition_in(h,1),h.m(a,null)):h.p(o,b)},i(g){f||(transition_in(m),transition_in(h),transition_in(d.$$.fragment,g),f=!0)},o(g){transition_out(m),transition_out(h),transition_out(d.$$.fragment,g),f=!1},d(g){g&&detach(e),m.d(g),h.d(g),destroy_component(d)}}}function create_default_slot_1$a(o){var me;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M,F,D,x,B,K,U,G=((me=o[12])==null?void 0:me.pureName)+"",W,q,H,z,Y=(o[5]||"(table not set)")+"",V,J,Q,X,ie;s=new TextField({props:{value:o[9],options:o[11]}}),s.$on("change",o[33]),h=new SelectField({props:{value:o[4],isNative:!0,notSelected:!0,options:o[11]}}),h.$on("change",o[34]),C=new SelectField({props:{value:o[2],isNative:!0,options:o[15]}}),C.$on("change",o[35]),S=new SelectField({props:{value:o[3],isNative:!0,options:o[13]}}),S.$on("change",o[36]),D=new SelectField({props:{value:lib.fullNameToString({pureName:o[5],schemaName:o[6]}),isNative:!0,notSelected:!0,options:o[10]}}),D.$on("change",o[37]);let ce=ensure_array_like(o[8]),de=[];for(let ue=0;ue<ce.length;ue+=1)de[ue]=create_each_block$7(get_each_context$7(o,ce,ue));const se=ue=>transition_out(de[ue],1,1,()=>{de[ue]=null});return X=new FormStyledButton({props:{type:"button",value:"Add column"}}),X.$on("click",o[41]),{c(){e=element("div"),t=element("div"),n=element("div"),n.textContent="Join name",r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),u=element("div"),d=element("div"),d.textContent="Base table",f=space(),m=element("div"),create_component(h.$$.fragment),p=space(),g=element("div"),b=element("div"),b.textContent="Connection",v=space(),y=element("div"),create_component(C.$$.fragment),E=space(),A=element("div"),k=element("div"),k.textContent="Database",T=space(),$=element("div"),create_component(S.$$.fragment),I=space(),R=element("div"),N=element("div"),N.textContent="Referenced table",M=space(),F=element("div"),create_component(D.$$.fragment),x=space(),B=element("div"),K=element("div"),U=text("Base column - "),W=text(G),q=space(),H=element("div"),z=text("Ref column - "),V=text(Y),J=space();for(let ue=0;ue<de.length;ue+=1)de[ue].c();Q=space(),create_component(X.$$.fragment),attr(n,"class","label col-3 svelte-1ecnyiy"),attr(a,"class","col-9"),attr(t,"class","row svelte-1ecnyiy"),attr(d,"class","label col-3 svelte-1ecnyiy"),attr(m,"class","col-9"),attr(u,"class","row svelte-1ecnyiy"),attr(b,"class","label col-3 svelte-1ecnyiy"),attr(y,"class","col-9"),attr(g,"class","row svelte-1ecnyiy"),attr(k,"class","label col-3 svelte-1ecnyiy"),attr($,"class","col-9"),attr(A,"class","row svelte-1ecnyiy"),attr(N,"class","label col-3 svelte-1ecnyiy"),attr(F,"class","col-9"),attr(R,"class","row svelte-1ecnyiy"),attr(K,"class","col-5 mr-1"),attr(H,"class","col-5 ml-1"),attr(B,"class","row svelte-1ecnyiy"),attr(e,"class","largeFormMarker")},m(ue,he){insert(ue,e,he),append(e,t),append(t,n),append(t,r),append(t,a),mount_component(s,a,null),append(e,l),append(e,u),append(u,d),append(u,f),append(u,m),mount_component(h,m,null),append(e,p),append(e,g),append(g,b),append(g,v),append(g,y),mount_component(C,y,null),append(e,E),append(e,A),append(A,k),append(A,T),append(A,$),mount_component(S,$,null),append(e,I),append(e,R),append(R,N),append(R,M),append(R,F),mount_component(D,F,null),append(e,x),append(e,B),append(B,K),append(K,U),append(K,W),append(B,q),append(B,H),append(H,z),append(H,V),append(e,J);for(let pe=0;pe<de.length;pe+=1)de[pe]&&de[pe].m(e,null);append(e,Q),mount_component(X,e,null),ie=!0},p(ue,he){var fe;const pe={};he[0]&512&&(pe.value=ue[9]),he[0]&2048&&(pe.options=ue[11]),s.$set(pe);const Oe={};he[0]&16&&(Oe.value=ue[4]),he[0]&2048&&(Oe.options=ue[11]),h.$set(Oe);const qe={};he[0]&4&&(qe.value=ue[2]),he[0]&32768&&(qe.options=ue[15]),C.$set(qe);const et={};he[0]&8&&(et.value=ue[3]),he[0]&8192&&(et.options=ue[13]),S.$set(et);const Ue={};if(he[0]&96&&(Ue.value=lib.fullNameToString({pureName:ue[5],schemaName:ue[6]})),he[0]&1024&&(Ue.options=ue[10]),D.$set(Ue),(!ie||he[0]&4096)&&G!==(G=((fe=ue[12])==null?void 0:fe.pureName)+"")&&set_data(W,G),(!ie||he[0]&32)&&Y!==(Y=(ue[5]||"(table not set)")+"")&&set_data(V,Y),he[0]&3150080){ce=ensure_array_like(ue[8]);let Ie;for(Ie=0;Ie<ce.length;Ie+=1){const We=get_each_context$7(ue,ce,Ie);de[Ie]?(de[Ie].p(We,he),transition_in(de[Ie],1)):(de[Ie]=create_each_block$7(We),de[Ie].c(),transition_in(de[Ie],1),de[Ie].m(e,Q))}for(group_outros(),Ie=ce.length;Ie<de.length;Ie+=1)se(Ie);check_outros()}},i(ue){if(!ie){transition_in(s.$$.fragment,ue),transition_in(h.$$.fragment,ue),transition_in(C.$$.fragment,ue),transition_in(S.$$.fragment,ue),transition_in(D.$$.fragment,ue);for(let he=0;he<ce.length;he+=1)transition_in(de[he]);transition_in(X.$$.fragment,ue),ie=!0}},o(ue){transition_out(s.$$.fragment,ue),transition_out(h.$$.fragment,ue),transition_out(C.$$.fragment,ue),transition_out(S.$$.fragment,ue),transition_out(D.$$.fragment,ue),de=de.filter(Boolean);for(let he=0;he<de.length;he+=1)transition_out(de[he]);transition_out(X.$$.fragment,ue),ie=!1},d(ue){ue&&detach(e),destroy_component(s),destroy_component(h),destroy_component(C),destroy_component(S),destroy_component(D),destroy_each(de,ue),destroy_component(X)}}}function create_header_slot$1(o){let e;return{c(){e=text("Define custom join")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot$1(o){let e,t,n,r;return e=new FormSubmit({props:{value:"Save"}}),e.$on("click",o[32]),n=new FormStyledButton({props:{type:"button",value:"Close"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$g(o){let e,t;const n=[o[22]];let r={$$slots:{footer:[create_footer_slot$1],header:[create_header_slot$1],default:[create_default_slot_1$a]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&4194304?get_spread_update(n,[get_spread_object(a[22])]):{};s[0]&3194879|s[1]&32768&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$E(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$g]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&7389183|r[1]&32768&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func$4=o=>({label:o.columnName,value:o.columnName}),func_1$3=o=>({label:o.columnName,value:o.columnName});function instance$D(o,e,t){let n,r,a,s,l,u,d,f,m,h;const p=["conid","database","root","setConfig","config","editValue"];let g=compute_rest_props(e,p),b,v=noop$1,y=()=>(v(),v=subscribe(d,fe=>t(30,b=fe)),d),C,E=noop$1,A=()=>(E(),E=subscribe(l,fe=>t(31,C=fe)),l),k,T=noop$1,$=()=>(T(),T=subscribe(n,fe=>t(7,k=fe)),n),S,I=noop$1,R=()=>(I(),I=subscribe(r,fe=>t(20,S=fe)),r),N,M=noop$1,F=()=>(M(),M=subscribe(a,fe=>t(21,N=fe)),a);o.$$.on_destroy.push(()=>v()),o.$$.on_destroy.push(()=>E()),o.$$.on_destroy.push(()=>T()),o.$$.on_destroy.push(()=>I()),o.$$.on_destroy.push(()=>M());var D=this&&this.__awaiter||function(fe,Ie,We,$e){function Le(ze){return ze instanceof We?ze:new We(function(re){re(ze)})}return new(We||(We=Promise))(function(ze,re){function ge(Pe){try{Ze($e.next(Pe))}catch(Ee){re(Ee)}}function Be(Pe){try{Ze($e.throw(Pe))}catch(Ee){re(Ee)}}function Ze(Pe){Pe.done?ze(Pe.value):Le(Pe.value).then(ge,Be)}Ze(($e=$e.apply(fe,Ie||[])).next())})},x;let{conid:B}=e,{database:K}=e,{root:U}=e,{setConfig:G}=e,{config:W}=e,{editValue:q=null}=e,H=(q==null?void 0:q.conid)||null,z=(q==null?void 0:q.database)||null,Y=(q==null?void 0:q.columns)||[],V=(q==null?void 0:q.baseDesignerId)||U.designerId,J=(q==null?void 0:q.refTableName)||null,Q=(q==null?void 0:q.refSchemaName)||null,X=(q==null?void 0:q.joinName)||"",ie=[],ce=[];const de=()=>{G(fe=>{var $e;const Ie=lib$3.createPerspectiveNodeConfig({pureName:J,schemaName:Q});Ie.designerId=(q==null?void 0:q.refNodeDesignerId)||uuidv1(),Ie.conid=H,Ie.database=z,Ie.position=($e=fe.nodes.find(Le=>Le.designerId==(q==null?void 0:q.refNodeDesignerId)))==null?void 0:$e.position,Ie.alias=X;const We={designerId:(q==null?void 0:q.referenceDesignerId)||uuidv1(),sourceId:V,targetId:Ie.designerId,columns:Y.map(Le=>({source:Le.baseColumnName,target:Le.refColumnName}))};return{...fe,nodes:[...fe.nodes.filter(Le=>Le.designerId!=(q==null?void 0:q.refNodeDesignerId)),Ie],references:[...fe.references.filter(Le=>Le.designerId!=(q==null?void 0:q.referenceDesignerId)),We]}}),closeCurrentModal()},se=fe=>{t(9,X=fe.target.value)},me=fe=>{fe.detail&&t(4,V=fe.detail)},ue=fe=>{t(2,H=fe.detail)},he=fe=>{t(3,z=fe.detail)},pe=fe=>{var Ie,We,$e;if(fe.detail){const Le=lib.fullNameFromString(fe.detail);t(5,J=Le.pureName),t(6,Q=Le.schemaName);const ze=(Ie=k==null?void 0:k.tables)==null?void 0:Ie.find(re=>re.pureName==J&&re.schemaName==Q);t(8,Y=(($e=(We=ze==null?void 0:ze.primaryKey)==null?void 0:We.columns)==null?void 0:$e.map(re=>({refColumnName:re.columnName})))||[])}},Oe=(fe,Ie)=>{Ie.detail&&t(8,Y=Y.map((We,$e)=>$e==fe?{...We,baseColumnName:Ie.detail}:We))},qe=(fe,Ie)=>{Ie.detail&&t(8,Y=Y.map((We,$e)=>$e==fe?{...We,refColumnName:Ie.detail}:We))},et=(fe,Ie)=>{const We=[...Y];We.splice(fe,1),t(8,Y=We)},Ue=()=>{t(8,Y=[...Y,{baseColumnName:"",refColumnName:""}])};return o.$$set=fe=>{e=assign(assign({},e),exclude_internal_props(fe)),t(22,g=compute_rest_props(e,p)),"conid"in fe&&t(23,B=fe.conid),"database"in fe&&t(24,K=fe.database),"root"in fe&&t(25,U=fe.root),"setConfig"in fe&&t(0,G=fe.setConfig),"config"in fe&&t(26,W=fe.config),"editValue"in fe&&t(1,q=fe.editValue)},o.$$.update=()=>{o.$$.dirty[0]&25165836&&$(t(19,n=useDatabaseInfo({conid:H||B,database:z||K}))),o.$$.dirty[0]&25165932&&R(t(18,r=useTableInfo({conid:H||B,database:z||K,schemaName:Q,pureName:J}))),o.$$.dirty[0]&25165932&&F(t(17,a=useViewInfo({conid:H||B,database:z||K,schemaName:Q,pureName:J}))),o.$$.dirty[0]&128&&t(28,s=[..._.sortBy((k==null?void 0:k.tables)||[],["schemaName","pureName"]),..._.sortBy((k==null?void 0:k.views)||[],["schemaName","pureName"])]),o.$$.dirty[1]&1&&t(15,u=[{value:null,label:"The same as root"},..._.sortBy((C||[]).filter(fe=>!fe.unsaved).map(fe=>({value:fe._id,label:getConnectionLabel(fe)})),"label")]),o.$$.dirty[0]&8388612&&y(t(14,d=useDatabaseList({conid:H||B}))),o.$$.dirty[0]&1073741824&&t(13,f=[{value:null,label:"The same as root"},..._.sortBy((b||[]).map(fe=>({value:fe.name,label:fe.name})),"label")]),o.$$.dirty[0]&33554432&&t(29,m=U.getBaseTables()),o.$$.dirty[0]&671088656&&t(12,h=t(27,x=m==null?void 0:m.find(fe=>fe.node.designerId==V))===null||x===void 0?void 0:x.table),o.$$.dirty[0]&805306368&&D(void 0,void 0,void 0,function*(){yield tick(),t(11,ce=m.map(fe=>({label:lib.fullNameToLabel(fe.table),value:fe.node.designerId}))),t(10,ie=s.map(fe=>({label:lib.fullNameToLabel(fe),value:lib.fullNameToString(fe)})))})},A(t(16,l=useConnectionList())),[G,q,H,z,V,J,Q,k,Y,X,ie,ce,h,f,d,u,l,a,r,n,S,N,g,B,K,U,W,x,s,m,b,C,de,se,me,ue,he,pe,Oe,qe,et,Ue]}class CustomJoinModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$D,create_fragment$E,safe_not_equal,{conid:23,database:24,root:25,setConfig:0,config:26,editValue:1},null,[-1,-1])}}function setPerspectiveSort(o,e,t,n){return{...o,nodes:o.nodes.map(r=>r.designerId==e?{...r,sort:[{columnName:t,order:n}]}:r)}}function addToPerspectiveSort(o,e,t,n){return{...o,nodes:o.nodes.map(r=>r.designerId==e?{...r,sort:[...(r.sort||[]).filter(a=>a.columnName!=t),{columnName:t,order:n}]}:r)}}function clearPerspectiveSort(o,e){return{...o,nodes:o.nodes.map(t=>t.designerId==e?{...t,sort:[]}:t)}}function addToPerspectiveFilter(o,e,t,n=""){return{...o,nodes:o.nodes.map(r=>r.designerId==e?{...r,filters:{...r.filters,[t]:n}}:r)}}function setPerspectiveTableAlias(o,e,t){return{...o,nodes:o.nodes.map(n=>n.designerId==e?{...n,alias:t}:n)}}function getPerspectiveNodeMenu(o){var E,A,k,T;const{node:e,conid:t,database:n,root:r,config:a,setConfig:s,designerId:l}=o,u=e==null?void 0:e.customJoinConfig,d=e==null?void 0:e.filterInfo,f=((E=e==null?void 0:e.parentNode)==null?void 0:E.designerId)||"",m=e==null?void 0:e.columnName,h=(k=(A=a.nodes)==null?void 0:A.find($=>$.designerId==f))==null?void 0:k.sort,p=(T=h==null?void 0:h.find($=>$.columnName==m))==null?void 0:T.order;(h==null?void 0:h.length)>1&&_.findIndex(h,$=>$.columnName==m);const g=(h==null?void 0:h.length)>0,b=a.nodes.find($=>$.designerId==l),v=$=>{s(S=>setPerspectiveSort(S,f,m,$),!0)},y=$=>{s(S=>addToPerspectiveSort(S,f,m,$),!0)},C=()=>{s($=>clearPerspectiveSort($,f),!0)};return[(e==null?void 0:e.isSortable)&&{onClick:()=>v("ASC"),text:"Sort ascending"},(e==null?void 0:e.isSortable)&&{onClick:()=>v("DESC"),text:"Sort descending"},(e==null?void 0:e.isSortable)&&g&&!p&&{onClick:()=>y("ASC"),text:"Add to sort - ascending"},(e==null?void 0:e.isSortable)&&g&&!p&&{onClick:()=>y("DESC"),text:"Add to sort - descending"},(e==null?void 0:e.isSortable)&&p&&{onClick:()=>C(),text:"Clear sort criteria"},{divider:!0},d&&{text:"Add to filter",onClick:()=>s($=>addToPerspectiveFilter($,f,m))},u&&{text:"Remove custom join",onClick:()=>s($=>({...$,nodes:($.nodes||[]).filter(S=>S.designerId!=u.refNodeDesignerId),references:($.references||[]).filter(S=>S.designerId!=u.referenceDesignerId)}))},u&&{text:"Edit custom join",onClick:()=>showModal(CustomJoinModal,{config:a,setConfig:s,conid:t,database:n,root:r,editValue:u})},(e==null?void 0:e.supportsParentFilter)&&{text:e.isParentFilter?"Cancel filter parent rows":"Filter parent rows",onClick:()=>{s($=>({...$,nodes:$.nodes.map(S=>S.designerId==(e==null?void 0:e.designerId)?{...S,isParentFilter:!e.isParentFilter}:S)}),!0)}},b&&[{text:"Set alias",onClick:()=>{var $;showModal(InputTextModal,{value:(($=e==null?void 0:e.nodeConfig)==null?void 0:$.alias)||"",label:"New alias",header:"Set  alias",onConfirm:S=>{s(I=>setPerspectiveTableAlias(I,l,S))}})}},(b==null?void 0:b.alias)&&{text:"Remove alias",onClick:()=>s($=>setPerspectiveTableAlias($,l,null))}],b&&a.rootDesignerId!=l&&[{divider:!0},{text:"Set root",onClick:async()=>{s($=>({...$,rootDesignerId:l})),await tick(),a.isArranged&&runCommand("designer.arrange")}}]]}const PerspectiveNodeRow_svelte_svelte_type_style_lang="";function create_if_block_1$d(o){let e,t,n,r;return{c(){e=element("input"),attr(e,"type","checkbox"),e.checked=t=o[0].isSecondaryChecked},m(a,s){insert(a,e,s),n||(r=[listen(e,"click",click_handler_2),listen(e,"mousedown",mousedown_handler_1),listen(e,"change",o[10])],n=!0)},p(a,s){s&1&&t!==(t=a[0].isSecondaryChecked)&&(e.checked=t)},d(a){a&&detach(e),n=!1,run_all(r)}}}function create_if_block$k(o){let e,t;return e=new FontIcon({props:{icon:"img filter"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$D(o){let e,t,n,r,a,s,l,u,d,f,m,h,p=o[0].title+"",g,b,v,y,C=o[0].getFilter(),E,A,k;n=new FontIcon({props:{icon:o[0].isExpandable?plusExpandIcon(o[0].isExpanded):"icon invisible-box"}}),n.$on("click",o[8]);let T=o[0].secondaryCheckable&&create_if_block_1$d(o);f=new FontIcon({props:{icon:o[0].icon}}),v=new SortOrderIcon({props:{order:o[0].sortOrder,orderIndex:o[0].sortOrderIndex}});let $=C&&create_if_block$k();return{c(){var S;e=element("div"),t=element("span"),create_component(n.$$.fragment),a=space(),s=element("input"),u=space(),T&&T.c(),d=space(),create_component(f.$$.fragment),m=space(),h=element("span"),g=text(p),b=space(),create_component(v.$$.fragment),y=space(),$&&$.c(),attr(t,"class","expandColumnIcon"),attr(t,"style",r=`margin-right: ${5+(o[0].level-(((S=o[1])==null?void 0:S.level)??0))*10}px`),attr(s,"type","checkbox"),s.checked=l=o[0].isChecked,attr(e,"class","row svelte-n2q9l8")},m(S,I){insert(S,e,I),append(e,t),mount_component(n,t,null),append(e,a),append(e,s),append(e,u),T&&T.m(e,null),append(e,d),mount_component(f,e,null),append(e,m),append(e,h),append(h,g),append(e,b),mount_component(v,e,null),append(e,y),$&&$.m(e,null),E=!0,A||(k=[listen(s,"click",click_handler_1),listen(s,"mousedown",mousedown_handler),listen(s,"change",o[9]),action_destroyer(contextMenu.call(null,e,o[2]))],A=!0)},p(S,[I]){var F;const R={};I&1&&(R.icon=S[0].isExpandable?plusExpandIcon(S[0].isExpanded):"icon invisible-box"),n.$set(R),(!E||I&3&&r!==(r=`margin-right: ${5+(S[0].level-(((F=S[1])==null?void 0:F.level)??0))*10}px`))&&attr(t,"style",r),(!E||I&1&&l!==(l=S[0].isChecked))&&(s.checked=l),S[0].secondaryCheckable?T?T.p(S,I):(T=create_if_block_1$d(S),T.c(),T.m(e,d)):T&&(T.d(1),T=null);const N={};I&1&&(N.icon=S[0].icon),f.$set(N),(!E||I&1)&&p!==(p=S[0].title+"")&&set_data(g,p);const M={};I&1&&(M.order=S[0].sortOrder),I&1&&(M.orderIndex=S[0].sortOrderIndex),v.$set(M),I&1&&(C=S[0].getFilter()),C?$?I&1&&transition_in($,1):($=create_if_block$k(),$.c(),transition_in($,1),$.m(e,null)):$&&(group_outros(),transition_out($,1,1,()=>{$=null}),check_outros())},i(S){E||(transition_in(n.$$.fragment,S),transition_in(f.$$.fragment,S),transition_in(v.$$.fragment,S),transition_in($),E=!0)},o(S){transition_out(n.$$.fragment,S),transition_out(f.$$.fragment,S),transition_out(v.$$.fragment,S),transition_out($),E=!1},d(S){S&&detach(e),destroy_component(n),T&&T.d(),destroy_component(f),destroy_component(v),$&&$.d(),A=!1,run_all(k)}}}const click_handler_1=o=>{o.stopPropagation()},mousedown_handler=o=>{o.stopPropagation()},click_handler_2=o=>{o.stopPropagation()},mousedown_handler_1=o=>{o.stopPropagation()};function instance$C(o,e,t){let{conid:n}=e,{database:r}=e,{node:a}=e,{root:s}=e,{tempRoot:l}=e,{config:u}=e,{setConfig:d}=e;function f(){return getPerspectiveNodeMenu({conid:n,database:r,node:a,root:s,config:u,setConfig:d,designerId:a==null?void 0:a.designerId})}const m=()=>{a.toggleExpanded()},h=()=>{a.toggleChecked()},p=()=>{a.toggleSecondaryChecked()};return o.$$set=g=>{"conid"in g&&t(3,n=g.conid),"database"in g&&t(4,r=g.database),"node"in g&&t(0,a=g.node),"root"in g&&t(5,s=g.root),"tempRoot"in g&&t(1,l=g.tempRoot),"config"in g&&t(6,u=g.config),"setConfig"in g&&t(7,d=g.setConfig)},[a,l,f,n,r,s,u,d,m,h,p]}class PerspectiveNodeRow extends SvelteComponent{constructor(e){super(),init(this,e,instance$C,create_fragment$D,safe_not_equal,{conid:3,database:4,node:0,root:5,tempRoot:1,config:6,setConfig:7})}}function get_each_context$6(o,e,t){const n=o.slice();return n[8]=e[t],n}function create_each_block$6(o){let e,t;return e=new PerspectiveNodeRow({props:{node:o[8],config:o[2],setConfig:o[3],root:o[0],tempRoot:o[1],conid:o[4],database:o[5]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&67&&(a.node=n[8]),r&4&&(a.config=n[2]),r&8&&(a.setConfig=n[3]),r&1&&(a.root=n[0]),r&2&&(a.tempRoot=n[1]),r&16&&(a.conid=n[4]),r&32&&(a.database=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$C(o){let e,t,n=ensure_array_like(o[7](o[1]??o[0],o[6])),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$6(get_each_context$6(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,[l]){if(l&255){n=ensure_array_like(s[7](s[1]??s[0],s[6]));let u;for(u=0;u<n.length;u+=1){const d=get_each_context$6(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$6(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function instance$B(o,e,t){let{root:n}=e,{tempRoot:r}=e,{config:a}=e,{setConfig:s}=e,{conid:l}=e,{database:u}=e,{filter:d}=e;function f(m,h){const p=[];for(const g of m==null?void 0:m.childNodes)if(lib.filterName(h,g.title))p.push(g),g.isExpanded&&p.push(...f(g,h));else if(g.isExpanded){const b=f(g,h);b.length>0&&(p.push(g),p.push(...b))}return p}return o.$$set=m=>{"root"in m&&t(0,n=m.root),"tempRoot"in m&&t(1,r=m.tempRoot),"config"in m&&t(2,a=m.config),"setConfig"in m&&t(3,s=m.setConfig),"conid"in m&&t(4,l=m.conid),"database"in m&&t(5,u=m.database),"filter"in m&&t(6,d=m.filter)},[n,r,a,s,l,u,d,f]}class PerspectiveTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$B,create_fragment$C,safe_not_equal,{root:0,tempRoot:1,config:2,setConfig:3,conid:4,database:5,filter:6})}}const PerspectiveCell_svelte_svelte_type_style_lang="";function get_if_ctx(o){const e=o.slice(),t=lib.getAsImageSrc(e[0]);return e[6]=t,e}function create_if_block$j(o){let e,t,n,r,a;const s=[create_if_block_1$c,create_if_block_2$6,create_if_block_4$4,create_if_block_5$2,create_if_block_6$1,create_else_block_1$3],l=[];function u(f,m){var h;return m&1&&(e=null),f[4]=="json"?0:f[4]=="image"?1:f[4]=="text"?2:f[4]=="forceText"?3:(e==null&&(e=!!(!((h=f[0])!=null&&h.$oid)&&(_.isArray(f[0])||_.isPlainObject(f[0])))),e?4:5)}function d(f,m){return m===1?get_if_ctx(f):f}return t=u(o,-1),n=l[t]=s[t](d(o,t)),{c(){n.c(),r=empty()},m(f,m){l[t].m(f,m),insert(f,r,m),a=!0},p(f,m){let h=t;t=u(f,m),t===h?l[t].p(d(f,t),m):(group_outros(),transition_out(l[h],1,1,()=>{l[h]=null}),check_outros(),n=l[t],n?n.p(d(f,t),m):(n=l[t]=s[t](d(f,t)),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(f){a||(transition_in(n),a=!0)},o(f){transition_out(n),a=!1},d(f){f&&detach(r),l[t].d(f)}}}function create_else_block_1$3(o){let e,t;return e=new CellValue({props:{rowData:o[2],value:o[0]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.rowData=n[2]),r&1&&(a.value=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_6$1(o){let e,t;return e=new JSONTree({props:{value:o[0],slicedKeyCount:1,disableContextMenu:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.value=n[0]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_5$2(o){let e=o[5](o[0],!0)+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&1&&e!==(e=n[5](n[0],!0)+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_4$4(o){let e=o[5](o[0],!1)+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&1&&e!==(e=n[5](n[0],!1)+"")&&set_data(t,e)},i:noop$1,o:noop$1,d(n){n&&detach(t)}}}function create_if_block_2$6(o){let e;function t(a,s){return a[6]?create_if_block_3$4:create_else_block$6}let n=t(o),r=n(o);return{c(){r.c(),e=empty()},m(a,s){r.m(a,s),insert(a,e,s)},p(a,s){n===(n=t(a))&&r?r.p(a,s):(r.d(1),r=n(a),r&&(r.c(),r.m(e.parentNode,e)))},i:noop$1,o:noop$1,d(a){a&&detach(e),r.d(a)}}}function create_if_block_1$c(o){var n;let e,t;return e=new JSONTree({props:{value:lib.safeJsonParse(o[0],(n=o[0])==null?void 0:n.toString()),slicedKeyCount:1,disableContextMenu:!0}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&1&&(s.value=lib.safeJsonParse(r[0],(l=r[0])==null?void 0:l.toString())),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_else_block$6(o){let e;return{c(){e=element("span"),e.textContent="(no image)",attr(e,"class","null svelte-1tkw7jt")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_if_block_3$4(o){let e,t;return{c(){e=element("img"),src_url_equal(e.src,t=o[6])||attr(e,"src",t)},m(n,r){insert(n,e,r)},p(n,r){r&1&&!src_url_equal(e.src,t=n[6])&&attr(e,"src",t)},d(n){n&&detach(e)}}}function create_fragment$B(o){let e,t,n=o[0]!==void 0&&create_if_block$j(o);return{c(){e=element("td"),n&&n.c(),attr(e,"rowspan",o[1]),attr(e,"data-column",o[3]),attr(e,"class","svelte-1tkw7jt"),toggle_class(e,"isEmpty",o[0]===void 0)},m(r,a){insert(r,e,a),n&&n.m(e,null),t=!0},p(r,[a]){r[0]!==void 0?n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block$j(r),n.c(),transition_in(n,1),n.m(e,null)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()),(!t||a&2)&&attr(e,"rowspan",r[1]),(!t||a&8)&&attr(e,"data-column",r[3]),(!t||a&1)&&toggle_class(e,"isEmpty",r[0]===void 0)},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d()}}}function instance$A(o,e,t){let{value:n}=e,{rowSpan:r}=e,{rowData:a}=e,{columnIndex:s}=e,{displayType:l}=e;function u(d,f){return f&&(d==null?void 0:d.type)=="Buffer"&&_.isArray(d.data)?String.fromCharCode.apply(String,d.data):lib.stringifyCellValue(d)}return o.$$set=d=>{"value"in d&&t(0,n=d.value),"rowSpan"in d&&t(1,r=d.rowSpan),"rowData"in d&&t(2,a=d.rowData),"columnIndex"in d&&t(3,s=d.columnIndex),"displayType"in d&&t(4,l=d.displayType)},[n,r,a,s,l,u]}class PerspectiveCell extends SvelteComponent{constructor(e){super(),init(this,e,instance$A,create_fragment$B,safe_not_equal,{value:0,rowSpan:1,rowData:2,columnIndex:3,displayType:4})}}const PerspectiveLoadingIndicator_svelte_svelte_type_style_lang="";function create_fragment$A(o){let e;return{c(){e=element("div"),e.innerHTML='<div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div> <div class="svelte-bxata"></div>',attr(e,"class","lds-spinner svelte-bxata")},m(t,n){insert(t,e,n)},p:noop$1,i:noop$1,o:noop$1,d(t){t&&detach(e)}}}class PerspectiveLoadingIndicator extends SvelteComponent{constructor(e){super(),init(this,e,null,create_fragment$A,safe_not_equal,{})}}const PerspectiveHeaderControl_svelte_svelte_type_style_lang="";function create_if_block_2$5(o){let e,t,n,r=o[0].title+"",a,s,l,u,d,f;return l=new SortOrderIcon({props:{order:o[3],orderIndex:o[2]}}),{c(){e=element("th"),t=element("div"),n=element("div"),a=text(r),s=space(),create_component(l.$$.fragment),attr(n,"class","label svelte-uz4mu9"),attr(t,"class","wrap svelte-uz4mu9"),attr(e,"rowspan",u=o[0].rowSpan),attr(e,"class","columnHeader svelte-uz4mu9"),attr(e,"data-column",d=o[0].columnIndex)},m(m,h){insert(m,e,h),append(e,t),append(t,n),append(n,a),append(t,s),mount_component(l,t,null),f=!0},p(m,h){(!f||h&1)&&r!==(r=m[0].title+"")&&set_data(a,r);const p={};h&8&&(p.order=m[3]),h&4&&(p.orderIndex=m[2]),l.$set(p),(!f||h&1&&u!==(u=m[0].rowSpan))&&attr(e,"rowspan",u),(!f||h&1&&d!==(d=m[0].columnIndex))&&attr(e,"data-column",d)},i(m){f||(transition_in(l.$$.fragment,m),f=!0)},o(m){transition_out(l.$$.fragment,m),f=!1},d(m){m&&detach(e),destroy_component(l)}}}function create_if_block$i(o){var m;let e,t,n=o[0].getParentName(o[1])+"",r,a,s=(m=o[0].getParentNode(o[1]))==null?void 0:m.isParentFilter,l,u,d,f=s&&create_if_block_1$b();return{c(){e=element("th"),t=element("div"),r=text(n),a=space(),f&&f.c(),attr(t,"class","wrap svelte-uz4mu9"),attr(e,"colspan",l=o[0].getColSpan(o[1])),attr(e,"class","tableHeader svelte-uz4mu9"),attr(e,"data-tablenodedesignerid",u=o[0].getParentTableDesignerId(o[1]))},m(h,p){insert(h,e,p),append(e,t),append(t,r),append(t,a),f&&f.m(t,null),d=!0},p(h,p){var g;(!d||p&3)&&n!==(n=h[0].getParentName(h[1])+"")&&set_data(r,n),p&3&&(s=(g=h[0].getParentNode(h[1]))==null?void 0:g.isParentFilter),s?f?p&3&&transition_in(f,1):(f=create_if_block_1$b(),f.c(),transition_in(f,1),f.m(t,null)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),(!d||p&3&&l!==(l=h[0].getColSpan(h[1])))&&attr(e,"colspan",l),(!d||p&3&&u!==(u=h[0].getParentTableDesignerId(h[1])))&&attr(e,"data-tablenodedesignerid",u)},i(h){d||(transition_in(f),d=!0)},o(h){transition_out(f),d=!1},d(h){h&&detach(e),f&&f.d()}}}function create_if_block_1$b(o){let e,t,n;return t=new FontIcon({props:{icon:"img parent-filter"}}),{c(){e=element("span"),create_component(t.$$.fragment),attr(e,"class","icon svelte-uz4mu9")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_fragment$z(o){let e=o[0].isVisible(o[1]),t,n=o[0].showParent(o[1]),r,a,s=e&&create_if_block_2$5(o),l=n&&create_if_block$i(o);return{c(){s&&s.c(),t=space(),l&&l.c(),r=empty()},m(u,d){s&&s.m(u,d),insert(u,t,d),l&&l.m(u,d),insert(u,r,d),a=!0},p(u,[d]){d&3&&(e=u[0].isVisible(u[1])),e?s?(s.p(u,d),d&3&&transition_in(s,1)):(s=create_if_block_2$5(u),s.c(),transition_in(s,1),s.m(t.parentNode,t)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros()),d&3&&(n=u[0].showParent(u[1])),n?l?(l.p(u,d),d&3&&transition_in(l,1)):(l=create_if_block$i(u),l.c(),transition_in(l,1),l.m(r.parentNode,r)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){a||(transition_in(s),transition_in(l),a=!0)},o(u){transition_out(s),transition_out(l),a=!1},d(u){u&&(detach(t),detach(r)),s&&s.d(u),l&&l.d(u)}}}function instance$z(o,e,t){let n,r;var a,s;let{column:l}=e,{columnLevel:u}=e,{config:d}=e,{setConfig:f}=e;return o.$$set=m=>{"column"in m&&t(0,l=m.column),"columnLevel"in m&&t(1,u=m.columnLevel),"config"in m&&t(4,d=m.config),"setConfig"in m&&t(5,f=m.setConfig)},o.$$.update=()=>{o.$$.dirty&65&&t(3,n=t(6,a=l.dataNode)===null||a===void 0?void 0:a.sortOrder),o.$$.dirty&129&&t(2,r=t(7,s=l.dataNode)===null||s===void 0?void 0:s.sortOrderIndex)},[l,u,r,n,d,f,a,s]}class PerspectiveHeaderControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$z,create_fragment$z,safe_not_equal,{column:0,columnLevel:1,config:4,setConfig:5})}}const PerspectiveTable_svelte_svelte_type_style_lang="";function get_each_context$5(o,e,t){const n=o.slice();return n[31]=e[t],n[33]=t,n}function get_each_context_1$1(o,e,t){const n=o.slice();return n[34]=e[t],n}function get_each_context_2(o,e,t){const n=o.slice();return n[37]=e[t],n}function get_each_context_3(o,e,t){const n=o.slice();return n[34]=e[t],n}function create_if_block_3$3(o){let e,t,n,r,a,s=ensure_array_like(_.range(o[4].columnLevelCount)),l=[];for(let h=0;h<s.length;h+=1)l[h]=create_each_block_2(get_each_context_2(o,s,h));const u=h=>transition_out(l[h],1,1,()=>{l[h]=null});let d=ensure_array_like(o[4].rows),f=[];for(let h=0;h<d.length;h+=1)f[h]=create_each_block$5(get_each_context$5(o,d,h));const m=h=>transition_out(f[h],1,1,()=>{f[h]=null});return{c(){e=element("table"),t=element("thead");for(let h=0;h<l.length;h+=1)l[h].c();n=space(),r=element("tbody");for(let h=0;h<f.length;h+=1)f[h].c();attr(t,"class","svelte-msvx43"),attr(e,"class","svelte-msvx43")},m(h,p){insert(h,e,p),append(e,t);for(let g=0;g<l.length;g+=1)l[g]&&l[g].m(t,null);append(e,n),append(e,r);for(let g=0;g<f.length;g+=1)f[g]&&f[g].m(r,null);o[19](e),a=!0},p(h,p){if(p[0]&28){s=ensure_array_like(_.range(h[4].columnLevelCount));let g;for(g=0;g<s.length;g+=1){const b=get_each_context_2(h,s,g);l[g]?(l[g].p(b,p),transition_in(l[g],1)):(l[g]=create_each_block_2(b),l[g].c(),transition_in(l[g],1),l[g].m(t,null))}for(group_outros(),g=s.length;g<l.length;g+=1)u(g);check_outros()}if(p[0]&16){d=ensure_array_like(h[4].rows);let g;for(g=0;g<d.length;g+=1){const b=get_each_context$5(h,d,g);f[g]?(f[g].p(b,p),transition_in(f[g],1)):(f[g]=create_each_block$5(b),f[g].c(),transition_in(f[g],1),f[g].m(r,null))}for(group_outros(),g=d.length;g<f.length;g+=1)m(g);check_outros()}},i(h){if(!a){for(let p=0;p<s.length;p+=1)transition_in(l[p]);for(let p=0;p<d.length;p+=1)transition_in(f[p]);a=!0}},o(h){l=l.filter(Boolean);for(let p=0;p<l.length;p+=1)transition_out(l[p]);f=f.filter(Boolean);for(let p=0;p<f.length;p+=1)transition_out(f[p]);a=!1},d(h){h&&detach(e),destroy_each(l,h),destroy_each(f,h),o[19](null)}}}function create_each_block_3(o){let e,t;return e=new PerspectiveHeaderControl({props:{column:o[34],columnLevel:o[37],setConfig:o[3],config:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16&&(a.column=n[34]),r[0]&16&&(a.columnLevel=n[37]),r[0]&8&&(a.setConfig=n[3]),r[0]&4&&(a.config=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_2(o){let e,t,n,r=ensure_array_like(o[4].columns),a=[];for(let l=0;l<r.length;l+=1)a[l]=create_each_block_3(get_each_context_3(o,r,l));const s=l=>transition_out(a[l],1,1,()=>{a[l]=null});return{c(){e=element("tr");for(let l=0;l<a.length;l+=1)a[l].c();t=space()},m(l,u){insert(l,e,u);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);append(e,t),n=!0},p(l,u){if(u[0]&28){r=ensure_array_like(l[4].columns);let d;for(d=0;d<r.length;d+=1){const f=get_each_context_3(l,r,d);a[d]?(a[d].p(f,u),transition_in(a[d],1)):(a[d]=create_each_block_3(f),a[d].c(),transition_in(a[d],1),a[d].m(e,t))}for(group_outros(),d=r.length;d<a.length;d+=1)s(d);check_outros()}},i(l){if(!n){for(let u=0;u<r.length;u+=1)transition_in(a[u]);n=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)transition_out(a[u]);n=!1},d(l){l&&detach(e),destroy_each(a,l)}}}function create_if_block_4$3(o){let e,t;return e=new PerspectiveCell({props:{columnIndex:o[34].columnIndex,value:o[31].rowData[o[34].columnIndex],rowSpan:o[31].rowSpans[o[34].columnIndex],rowData:o[31].rowData,displayType:o[34].displayType}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&16&&(a.columnIndex=n[34].columnIndex),r[0]&16&&(a.value=n[31].rowData[n[34].columnIndex]),r[0]&16&&(a.rowSpan=n[31].rowSpans[n[34].columnIndex]),r[0]&16&&(a.rowData=n[31].rowData),r[0]&16&&(a.displayType=n[34].displayType),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_each_block_1$1(o){let e,t,n=!o[31].rowCellSkips[o[34].columnIndex]&&create_if_block_4$3(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[31].rowCellSkips[r[34].columnIndex]?n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros()):n?(n.p(r,a),a[0]&16&&transition_in(n,1)):(n=create_if_block_4$3(r),n.c(),transition_in(n,1),n.m(e.parentNode,e))},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_each_block$5(o){let e,t,n,r=ensure_array_like(o[4].columns),a=[];for(let l=0;l<r.length;l+=1)a[l]=create_each_block_1$1(get_each_context_1$1(o,r,l));const s=l=>transition_out(a[l],1,1,()=>{a[l]=null});return{c(){e=element("tr");for(let l=0;l<a.length;l+=1)a[l].c();t=space(),attr(e,"data-rowindex",o[33])},m(l,u){insert(l,e,u);for(let d=0;d<a.length;d+=1)a[d]&&a[d].m(e,null);append(e,t),n=!0},p(l,u){if(u[0]&16){r=ensure_array_like(l[4].columns);let d;for(d=0;d<r.length;d+=1){const f=get_each_context_1$1(l,r,d);a[d]?(a[d].p(f,u),transition_in(a[d],1)):(a[d]=create_each_block_1$1(f),a[d].c(),transition_in(a[d],1),a[d].m(e,t))}for(group_outros(),d=r.length;d<a.length;d+=1)s(d);check_outros()}},i(l){if(!n){for(let u=0;u<r.length;u+=1)transition_in(a[u]);n=!0}},o(l){a=a.filter(Boolean);for(let u=0;u<a.length;u+=1)transition_out(a[u]);n=!1},d(l){l&&detach(e),destroy_each(a,l)}}}function create_if_block_2$4(o){let e,t,n,r;return e=new ErrorInfo({props:{message:o[7]}}),n=new FormStyledButton({props:{value:"Reset filter"}}),n.$on("click",o[20]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s[0]&128&&(l.message=a[7]),e.$set(l)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_if_block_1$a(o){let e,t,n;return t=new PerspectiveLoadingIndicator({}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","loader svelte-msvx43")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block$h(o){var n,r;let e,t;return e=new StatusBarTabItem({props:{text:`${(r=(n=o[0])==null?void 0:n.namedObject)==null?void 0:r.pureName} rows: ${o[8].toLocaleString()}`}}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s[0]&257&&(l.text=`${(d=(u=a[0])==null?void 0:u.namedObject)==null?void 0:d.pureName} rows: ${a[8].toLocaleString()}`),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$y(o){let e,t,n,r,a,s,l,u,d=o[4]&&create_if_block_3$3(o),f=o[7]&&create_if_block_2$4(o),m=o[9]&&create_if_block_1$a(),h=o[8]!=null&&create_if_block$h(o);return{c(){e=element("div"),d&&d.c(),t=space(),f&&f.c(),n=space(),m&&m.c(),r=space(),h&&h.c(),a=empty(),attr(e,"class","wrapper svelte-msvx43")},m(p,g){insert(p,e,g),d&&d.m(e,null),append(e,t),f&&f.m(e,null),append(e,n),m&&m.m(e,null),o[21](e),insert(p,r,g),h&&h.m(p,g),insert(p,a,g),s=!0,l||(u=[action_destroyer(resizeObserver.call(null,e,!0)),action_destroyer(contextMenu.call(null,e,o[10])),listen(e,"scroll",o[11])],l=!0)},p(p,g){p[4]?d?(d.p(p,g),g[0]&16&&transition_in(d,1)):(d=create_if_block_3$3(p),d.c(),transition_in(d,1),d.m(e,t)):d&&(group_outros(),transition_out(d,1,1,()=>{d=null}),check_outros()),p[7]?f?(f.p(p,g),g[0]&128&&transition_in(f,1)):(f=create_if_block_2$4(p),f.c(),transition_in(f,1),f.m(e,n)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),p[9]?m?g[0]&512&&transition_in(m,1):(m=create_if_block_1$a(),m.c(),transition_in(m,1),m.m(e,null)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),p[8]!=null?h?(h.p(p,g),g[0]&256&&transition_in(h,1)):(h=create_if_block$h(p),h.c(),transition_in(h,1),h.m(a.parentNode,a)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros())},i(p){s||(transition_in(d),transition_in(f),transition_in(m),transition_in(h),s=!0)},o(p){transition_out(d),transition_out(f),transition_out(m),transition_out(h),s=!1},d(p){p&&(detach(e),detach(r),detach(a)),d&&d.d(),f&&f.d(),m&&m.d(),o[21](null),h&&h.d(p),l=!1,run_all(u)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$5=()=>getActiveComponent("PerspectiveTable");registerCommand({id:"perspective.openJson",category:"Perspective",name:"Open JSON",isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor$5())===null||o===void 0?void 0:o.openJsonEnabled()},onClick:()=>getCurrentEditor$5().openJson()});function instance$y(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(h,W=>t(18,r=W)),h);o.$$.on_destroy.push(()=>a());var l=this&&this.__awaiter||function(W,q,H,z){function Y(V){return V instanceof H?V:new H(function(J){J(V)})}return new(H||(H=Promise))(function(V,J){function Q(ce){try{ie(z.next(ce))}catch(de){J(de)}}function X(ce){try{ie(z.throw(ce))}catch(de){J(de)}}function ie(ce){ce.done?V(ce.value):Y(ce.value).then(Q,X)}ie((z=z.apply(W,q||[])).next())})};const u={tables:{text:"table",tabComponent:"TableDataTab",icon:"img table"},views:{text:"view",tabComponent:"ViewDataTab",icon:"img view"},collections:{text:"collection",tabComponent:"CollectionDataTab",icon:"img collection"}},d=debug("dbgate:PerspectiveTable"),f=createActivator("PerspectiveTable",!0,["Designer"]);let{root:m}=e,{loadedCounts:h}=e;s();let{config:p}=e,{setConfig:g}=e,{conid:b}=e,{database:v}=e,y,C,E,A,k,T=!1,$=!1;const S=createRef(0),I=createRef(!1);function R(W,q,H){return l(this,void 0,void 0,function*(){d("load level data",H);const z=W.getNodeLoadProps(q);let{rows:Y,incomplete:V}=yield W.dataProvider.loadData(Object.assign(Object.assign({},z),{topCount:H[W.designerId]||lib$3.PERSPECTIVE_PAGE_SIZE}));if(W.isRoot)q.push(...Y),V&&q.push({incompleteRowsIndicator:[W.designerId]});else if(W.preloadedLevelData)Y=_.compact(_.flatten(q.map(J=>J[W.fieldName])));else{let J=null;for(const Q of q){const X=Y.filter(ie=>W.matchChildRow(Q,ie));Q[W.fieldName]=X,X.length>0&&(J=Q)}V&&J&&J[W.fieldName].push({incompleteRowsIndicator:[W.designerId]})}for(const J of W.childNodes)J.isExpandable&&(J.isCheckedNode||J.preloadedLevelData)&&(yield R(J,Y,H))})}function N(W,q){return l(this,void 0,void 0,function*(){if(T){$=!0;return}else $=!1;if(!W)return;const H=[];t(9,T=!0);try{yield R(W,H,q),t(17,y=H),d("data rows",H),t(7,A=null),t(8,k=yield W.dataProvider.loadRowCount(m.getNodeLoadProps([])))}catch(z){console.error(z),t(7,A=z.message),t(17,y=null),t(8,k=null)}t(9,T=!1),$&&N(m,r)})}function M(){openJsonDocument(y)}function F(){return y!=null}onMount(()=>{});function D({targetElement:W,registerCloseHandler:q}){var H,z,Y;const V=[],J=W.closest("td")||W.closest("th"),Q=!!W.closest("th");if(J){const X=J.closest("tr"),ie=J.getAttribute("data-column"),ce=(H=n==null?void 0:n.columns)===null||H===void 0?void 0:H[ie];ce&&V.push(getPerspectiveNodeMenu({config:p,conid:b,database:v,node:ce.dataNode,root:m,setConfig:g,designerId:null})),J.classList.add("highlight"),q(()=>{J.classList.remove("highlight")});const de=J.getAttribute("data-tableNodeDesignerId"),se=m==null?void 0:m.findNodeByDesignerId(de);if(se!=null&&se.headerTableAttributes){const{pureName:he,schemaName:pe,conid:Oe,database:qe,objectTypeField:et}=se==null?void 0:se.headerTableAttributes;console.log("objectTypeField",et);const Ue=u[et];Ue&&V.push({text:`Open ${Ue.text} ${he}`,onClick:()=>{openNewTab({title:he,icon:Ue.icon,tabComponent:Ue.tabComponent,props:{schemaName:pe,pureName:he,conid:Oe,database:qe,objectTypeField:et}})}})}const me=he=>{g(pe=>Object.assign(Object.assign({},pe),{nodes:pe.nodes.map(Oe=>{var qe,et;return Oe.designerId==((et=(qe=ce==null?void 0:ce.dataNode)===null||qe===void 0?void 0:qe.parentNode)===null||et===void 0?void 0:et.designerId)?Object.assign(Object.assign({},Oe),{columnDisplays:Object.assign(Object.assign({},Oe.columnDisplays),{[ce.dataNode.columnName]:he})}):Oe})}))};if(Q&&!(se!=null&&se.headerTableAttributes)&&V.push({text:`Change display (${_.startCase(((Y=(z=p.nodes.find(he=>{var pe,Oe;return he.designerId==((Oe=(pe=ce==null?void 0:ce.dataNode)===null||pe===void 0?void 0:pe.parentNode)===null||Oe===void 0?void 0:Oe.designerId)}))===null||z===void 0?void 0:z.columnDisplays)===null||Y===void 0?void 0:Y[ce.dataNode.columnName])||"default")})`,submenu:[{text:"Default",onClick:()=>me("default")},{text:"JSON",onClick:()=>me("json")},{text:"Image",onClick:()=>me("image")},{text:"Text",onClick:()=>me("text")},{text:"Force Text",onClick:()=>me("forceText")}]}),se!=null&&se.supportsParentFilter){const he=se==null?void 0:se.isParentFilter;V.push({text:he?"Cancel filter parent rows":"Filter parent rows",onClick:()=>{g(pe=>Object.assign(Object.assign({},pe),{nodes:pe.nodes.map(Oe=>Oe.designerId==(se==null?void 0:se.designerId)?Object.assign(Object.assign({},Oe),{isParentFilter:!he}):Oe)}),!0)}})}const ue=X==null?void 0:X.getAttribute("data-rowIndex");if(ue!=null){const he=n.rows[ue].rowData[ie],{dataNode:pe}=ce;if(pe.filterInfo&&(pe instanceof lib$3.PerspectiveTableColumnNode||pe instanceof lib$3.PerspectivePatternColumnNode)){const{table:Oe}=pe,qe=u[Oe.objectTypeField],et=lib$1.getFilterValueExpression(he,pe instanceof lib$3.PerspectiveTableColumnNode?pe.column.dataType:null);qe&&V.push({text:"Open filtered grid",onClick:()=>{openNewTab({title:Oe.pureName,icon:qe.icon,tabComponent:qe.tabComponent,props:{schemaName:Oe.schemaName,pureName:Oe.pureName,conid:b,database:v,objectTypeField:Oe.objectTypeField}},{grid:{filters:{[pe.columnName]:et}}},{forceNewTab:!0})}}),V.push({text:"Filter this value",onClick:()=>{g(Ue=>Object.assign(Object.assign({},Ue),{nodes:Ue.nodes.map(fe=>{var Ie;return fe.designerId==((Ie=pe==null?void 0:pe.parentNode)===null||Ie===void 0?void 0:Ie.designerId)?Object.assign(Object.assign({},fe),{filters:Object.assign(Object.assign({},fe.filters),{[pe.columnName]:et})}):fe})}))}})}}}return V.push([{divider:!0},{command:"perspective.refresh"},{command:"perspective.openJson"},{command:"perspective.customJoin"}]),V}function x(){var W=E.querySelectorAll("tbody>tr");const q=C.getBoundingClientRect();function H(V){if(V<0||V>=W.length)return!1;const J=W[V].getBoundingClientRect();return V==W.length-1?q.bottom>=J.top:J.top<=q.bottom&&J.bottom>=q.bottom}const z=S.get();let Y=0;for(;z-Y>=0||z+Y<W.length;){if(H(z-Y))return S.set(z-Y),z-Y;if(H(z+Y))return S.set(z+Y),z+Y;Y+=1}return 0}function B(){return l(this,void 0,void 0,function*(){if(!n||(yield tick(),!E)||!n||I.get())return;const W=x(),q=_.keys(n.loadIndicatorsCounts).filter(H=>W+1>=n.loadIndicatorsCounts[H]);q.length>0&&(I.set(!0),d("load next",q),h.update(H=>{const z=Object.assign({},H);for(const Y of q)z[Y]=(z[Y]||lib$3.PERSPECTIVE_PAGE_SIZE)+lib$3.PERSPECTIVE_PAGE_SIZE;return z}))})}function K(W){binding_callbacks[W?"unshift":"push"](()=>{E=W,t(6,E)})}const U=()=>g(W=>({...W,filters:{},parentFilters:[]}),!0);function G(W){binding_callbacks[W?"unshift":"push"](()=>{C=W,t(5,C)})}return o.$$set=W=>{"root"in W&&t(0,m=W.root),"loadedCounts"in W&&s(t(1,h=W.loadedCounts)),"config"in W&&t(2,p=W.config),"setConfig"in W&&t(3,g=W.setConfig),"conid"in W&&t(13,b=W.conid),"database"in W&&t(14,v=W.database)},o.$$.update=()=>{o.$$.dirty[0]&262145&&N(m,r),o.$$.dirty[0]&131073&&t(4,n=m&&y?new lib$3.PerspectiveDisplay(m,y):null),o.$$.dirty[0]&16&&(I.set(!1),B())},[m,h,p,g,n,C,E,A,k,T,D,B,f,b,v,M,F,y,r,K,U,G]}class PerspectiveTable extends SvelteComponent{constructor(e){super(),init(this,e,instance$y,create_fragment$y,safe_not_equal,{activator:12,root:0,loadedCounts:1,config:2,setConfig:3,conid:13,database:14,openJson:15,openJsonEnabled:16},null,[-1,-1])}get activator(){return this.$$.ctx[12]}get openJson(){return this.$$.ctx[15]}get openJsonEnabled(){return this.$$.ctx[16]}}function create_default_slot$f(o){let e,t;return e=new FontIcon({props:{icon:"icon close"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$x(o){let e,t,n=o[0].columnName+"",r,a,s=o[0].pureName+"",l,u,d,f,m,h;return d=new InlineButton({props:{square:!0,narrow:!0,$$slots:{default:[create_default_slot$f]},$$scope:{ctx:o}}}),d.$on("click",function(){is_function(o[3])&&o[3].apply(this,arguments)}),m=new DataFilterControl({props:{filterType:o[0].filterType,filter:o[1],setFilter:o[2],conid:o[4],database:o[5],driver:o[6],columnName:o[0].columnName,pureName:o[0].pureName,foreignKey:o[0].foreignKey,customCommandIcon:o[7],onCustomCommand:o[7]?o[8]:null,customCommandTooltip:"Filter parent rows"}}),{c(){e=element("div"),t=element("div"),r=text(n),a=text(" ("),l=text(s),u=text(`)
    `),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment),attr(t,"class","space-between"),attr(e,"class","m-1")},m(p,g){insert(p,e,g),append(e,t),append(t,r),append(t,a),append(t,l),append(t,u),mount_component(d,t,null),append(e,f),mount_component(m,e,null),h=!0},p(p,[g]){o=p,(!h||g&1)&&n!==(n=o[0].columnName+"")&&set_data(r,n),(!h||g&1)&&s!==(s=o[0].pureName+"")&&set_data(l,s);const b={};g&4096&&(b.$$scope={dirty:g,ctx:o}),d.$set(b);const v={};g&1&&(v.filterType=o[0].filterType),g&2&&(v.filter=o[1]),g&4&&(v.setFilter=o[2]),g&16&&(v.conid=o[4]),g&32&&(v.database=o[5]),g&64&&(v.driver=o[6]),g&1&&(v.columnName=o[0].columnName),g&1&&(v.pureName=o[0].pureName),g&1&&(v.foreignKey=o[0].foreignKey),g&128&&(v.customCommandIcon=o[7]),g&128&&(v.onCustomCommand=o[7]?o[8]:null),m.$set(v)},i(p){h||(transition_in(d.$$.fragment,p),transition_in(m.$$.fragment,p),h=!0)},o(p){transition_out(d.$$.fragment,p),transition_out(m.$$.fragment,p),h=!1},d(p){p&&detach(e),destroy_component(d),destroy_component(m)}}}function instance$x(o,e,t){let n,{filterInfo:r}=e,{filter:a}=e,{onSetFilter:s}=e,{onRemoveFilter:l}=e,{conid:u}=e,{database:d}=e,{driver:f}=e,{config:m}=e,{setConfig:h}=e,{tableNode:p}=e;function g(){h(b=>Object.assign(Object.assign({},b),{nodes:b.nodes.map(v=>v.designerId==(p==null?void 0:p.designerId)?Object.assign(Object.assign({},v),{isParentFilter:!v.isParentFilter}):v)}),!0)}return o.$$set=b=>{"filterInfo"in b&&t(0,r=b.filterInfo),"filter"in b&&t(1,a=b.filter),"onSetFilter"in b&&t(2,s=b.onSetFilter),"onRemoveFilter"in b&&t(3,l=b.onRemoveFilter),"conid"in b&&t(4,u=b.conid),"database"in b&&t(5,d=b.database),"driver"in b&&t(6,f=b.driver),"config"in b&&t(9,m=b.config),"setConfig"in b&&t(10,h=b.setConfig),"tableNode"in b&&t(11,p=b.tableNode)},o.$$.update=()=>{o.$$.dirty&2048&&t(7,n=p!=null&&p.supportsParentFilter?p!=null&&p.isParentFilter?"icon parent-filter":"icon parent-filter-outline":null)},[r,a,s,l,u,d,f,n,g,m,h,p]}class PerspectiveFiltersColumn extends SvelteComponent{constructor(e){super(),init(this,e,instance$x,create_fragment$x,safe_not_equal,{filterInfo:0,filter:1,onSetFilter:2,onRemoveFilter:3,conid:4,database:5,driver:6,config:9,setConfig:10,tableNode:11})}}const PerspectiveFilters_svelte_svelte_type_style_lang="";function get_each_context$4(o,e,t){const n=o.slice();return n[11]=e[t],n}function get_each_context_1(o,e,t){var s,l,u,d;const n=o.slice();n[14]=e[t];const r=(s=n[3])==null?void 0:s.findNodeByDesignerId(n[11].designerId);n[15]=r;const a=(d=(u=(l=n[15])==null?void 0:l.childNodes)==null?void 0:u.find(function(...m){return o[10](n[14],...m)}))==null?void 0:d.filterInfo;return n[16]=a,n}function create_else_block$5(o){let e,t,n=ensure_array_like(o[1].nodes),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$4(get_each_context$4(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&126){n=ensure_array_like(s[1].nodes);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$4(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$4(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_if_block$g(o){let e,t,n,r,a,s,l;return a=new FontIcon({props:{icon:"img info"}}),{c(){e=element("div"),t=element("div"),t.textContent="No Filters defined",n=space(),r=element("div"),create_component(a.$$.fragment),s=text(' Use context menu, command "Add to filter" in table or in tree'),attr(t,"class","mb-3 bold"),attr(e,"class","msg svelte-xvsamk")},m(u,d){insert(u,e,d),append(e,t),append(e,n),append(e,r),mount_component(a,r,null),append(r,s),l=!0},p:noop$1,i(u){l||(transition_in(a.$$.fragment,u),l=!0)},o(u){transition_out(a.$$.fragment,u),l=!1},d(u){u&&detach(e),destroy_component(a)}}}function create_if_block_1$9(o){let e,t;function n(...a){return o[8](o[15],o[14],...a)}function r(...a){return o[9](o[15],o[14],...a)}return e=new PerspectiveFiltersColumn({props:{filterInfo:o[16],conid:o[4],database:o[5],driver:o[6],tableNode:o[15],config:o[1],setConfig:o[2],filter:o[11].filters[o[14]],onSetFilter:n,onRemoveFilter:r}}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){o=a;const l={};s&10&&(l.filterInfo=o[16]),s&16&&(l.conid=o[4]),s&32&&(l.database=o[5]),s&64&&(l.driver=o[6]),s&10&&(l.tableNode=o[15]),s&2&&(l.config=o[1]),s&4&&(l.setConfig=o[2]),s&2&&(l.filter=o[11].filters[o[14]]),s&14&&(l.onSetFilter=n),s&14&&(l.onRemoveFilter=r),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_each_block_1(o){let e,t,n=o[16]&&create_if_block_1$9(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[16]?n?(n.p(r,a),a&10&&transition_in(n,1)):(n=create_if_block_1$9(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_each_block$4(o){let e,t,n=ensure_array_like(_.keys(o[11].filters)),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block_1(get_each_context_1(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&126){n=ensure_array_like(_.keys(s[11].filters));let u;for(u=0;u<n.length;u+=1){const d=get_each_context_1(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block_1(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_default_slot$e(o){let e,t,n,r;const a=[create_if_block$g,create_else_block$5],s=[];function l(u,d){return u[7]==0?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_fragment$w(o){let e,t;return e=new ManagerInnerContainer({props:{width:o[0],isFlex:o[7]==0,$$slots:{default:[create_default_slot$e]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.width=n[0]),r&128&&(a.isFlex=n[7]==0),r&524542&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$w(o,e,t){let n,{managerSize:r}=e,{config:a}=e,{setConfig:s}=e,{root:l}=e,{conid:u}=e,{database:d}=e,{driver:f}=e;const m=(g,b,v)=>s(y=>({...y,nodes:y.nodes.map(C=>C.designerId==g.designerId?{...C,filters:{...C.filters,[b]:v}}:C)})),h=(g,b,v)=>s(y=>({...y,nodes:y.nodes.map(C=>C.designerId==g.designerId?{...C,filters:_.omit(C.filters,[b])}:C)})),p=(g,b)=>b.columnName==g;return o.$$set=g=>{"managerSize"in g&&t(0,r=g.managerSize),"config"in g&&t(1,a=g.config),"setConfig"in g&&t(2,s=g.setConfig),"root"in g&&t(3,l=g.root),"conid"in g&&t(4,u=g.conid),"database"in g&&t(5,d=g.database),"driver"in g&&t(6,f=g.driver)},o.$$.update=()=>{o.$$.dirty&2&&t(7,n=_.sum(a.nodes.map(g=>_.keys(g.filters).length)))},[r,a,s,l,u,d,f,n,m,h,p]}class PerspectiveFilters extends SvelteComponent{constructor(e){super(),init(this,e,instance$w,create_fragment$w,safe_not_equal,{managerSize:0,config:1,setConfig:2,root:3,conid:4,database:5,driver:6})}}function useMultipleDatabaseInfo(o){return derived(o.map(e=>useDatabaseInfo(e)),e=>{let t={};for(let n=0;n<o.length;n++){const{conid:r,database:a}=o[n],s=e[n];t={...t,[r]:{...t[r],[a]:s}}}return t})}function create_fragment$v(o){let e,t;const n=[o[10],{settings:{showTableCloseButton:!0,allowColumnOperations:!0,allowCreateRefByDrag:!0,allowScrollColumns:!0,canSelectColumns:!0,canCheckTables:!0,allowTableAlias:!0,arrangeAlg:"tree",referenceMenu:func$3,columnMenu:o[11],tableMenu:o[12],createReferenceText:func_3,isColumnChecked:o[13],setColumnChecked:o[14],isTableChecked:o[15],setTableChecked:o[16],getSortOrderProps:o[17],getColumnIconOverride:o[18],isColumnFiltered:o[19],getMainTableIcon:o[20],sortAutoLayoutReferences:o[21],referencePaintSettings:{buswi:10,extwi:10},canAddDesignerForeignKey:o[22],addDesignerForeignKey:o[23],tableSpecificDb:o[24],hasFilterParentRowsFlag:o[25],isGrayedTable:o[26],onClickTableHeader:o[7],isColumnExpandable:func_18,isColumnExpanded:func_19,columnExpandLevel:func_20,toggleExpandedColumn:func_21,getColumnDisplayName:func_22,getParentColumnName:lib$3.getPerspectiveParentColumnName,getMutliColumnFilter:o[27],setMutliColumnFilter:o[28]}},{referenceComponent:QueryDesignerReference},{value:o[8](o[0],o[1],o[2])},{onChange:o[9]}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new Designer({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s[0]&2047?get_spread_update(n,[s[0]&1024&&get_spread_object(a[10]),s[0]&253&&{settings:{showTableCloseButton:!0,allowColumnOperations:!0,allowCreateRefByDrag:!0,allowScrollColumns:!0,canSelectColumns:!0,canCheckTables:!0,allowTableAlias:!0,arrangeAlg:"tree",referenceMenu:func$3,columnMenu:a[11],tableMenu:a[12],createReferenceText:func_3,isColumnChecked:a[13],setColumnChecked:a[14],isTableChecked:a[15],setTableChecked:a[16],getSortOrderProps:a[17],getColumnIconOverride:a[18],isColumnFiltered:a[19],getMainTableIcon:a[20],sortAutoLayoutReferences:a[21],referencePaintSettings:{buswi:10,extwi:10},canAddDesignerForeignKey:a[22],addDesignerForeignKey:a[23],tableSpecificDb:a[24],hasFilterParentRowsFlag:a[25],isGrayedTable:a[26],onClickTableHeader:a[7],isColumnExpandable:func_18,isColumnExpanded:func_19,columnExpandLevel:func_20,toggleExpandedColumn:func_21,getColumnDisplayName:func_22,getParentColumnName:lib$3.getPerspectiveParentColumnName,getMutliColumnFilter:a[27],setMutliColumnFilter:a[28]}},s&0&&{referenceComponent:QueryDesignerReference},s[0]&263&&{value:a[8](a[0],a[1],a[2])},s[0]&512&&{onChange:a[9]}]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}const func$3=({designer:o,reference:e,onChangeReference:t,onRemoveReference:n})=>[{text:"Remove",onClick:()=>n(e)}],func_3=o=>o.isAutoGenerated?"FK":"Custom",func_18=o=>!!o.getChildColumns,func_19=o=>o.isExpanded,func_20=o=>o.expandLevel,func_21=(o,e)=>o.toggleExpanded(e),func_22=o=>o.shortName||o.columnName;function instance$v(o,e,t){let n;component_subscribe(o,currentDatabase,G=>t(29,n=G));var r=this&&this.__awaiter||function(G,W,q,H){function z(Y){return Y instanceof q?Y:new q(function(V){V(Y)})}return new(q||(q=Promise))(function(Y,V){function J(ie){try{X(H.next(ie))}catch(ce){V(ce)}}function Q(ie){try{X(H.throw(ie))}catch(ce){V(ce)}}function X(ie){ie.done?Y(ie.value):z(ie.value).then(J,Q)}X((H=H.apply(G,W||[])).next())})};let{config:a}=e,{dbInfos:s}=e,{dataPatterns:l}=e,{root:u}=e,{conid:d}=e,{database:f}=e,{setConfig:m}=e,{onClickTableHeader:h=null}=e;function p(G,W,q){var H;return{columnName:q+G.name,shortName:G.name,getChildColumns:((H=G.columns)===null||H===void 0?void 0:H.length)>0?()=>G.columns.map(z=>p(z,W,q+G.name+"::")):null,isExpanded:W.expandedColumns.includes(q+G.name),toggleExpanded:z=>m(Y=>Object.assign(Object.assign({},Y),{nodes:Y.nodes.map(V=>Object.assign(Object.assign({},V),{expandedColumns:z?[...V.expandedColumns||[],q+G.name]:(V.expandedColumns||[]).filter(J=>J!=q+G.name)}))}))}}function g(G,W,q){return Object.assign(Object.assign({},G),{tables:_.compact(G.nodes.map(H=>{var z,Y,V,J,Q,X;const ie=(z=W==null?void 0:W[H.conid||d])===null||z===void 0?void 0:z[H.database||f],ce=(Y=ie==null?void 0:ie.tables)===null||Y===void 0?void 0:Y.find(ue=>ue.pureName==H.pureName&&ue.schemaName==H.schemaName),de=(V=ie==null?void 0:ie.views)===null||V===void 0?void 0:V.find(ue=>ue.pureName==H.pureName&&ue.schemaName==H.schemaName);let se=(J=ie==null?void 0:ie.collections)===null||J===void 0?void 0:J.find(ue=>ue.pureName==H.pureName&&ue.schemaName==H.schemaName);if(se){const ue=q==null?void 0:q[H.designerId];if(!ue)return null;se=Object.assign(Object.assign({},se),{columns:(ue==null?void 0:ue.columns.map(he=>p(he,H,"")))||[]})}if(!ce&&!de&&!se)return null;const{designerId:me}=H;return Object.assign(Object.assign({},ce||de||se),{left:((Q=H==null?void 0:H.position)===null||Q===void 0?void 0:Q.x)||0,top:((X=H==null?void 0:H.position)===null||X===void 0?void 0:X.y)||0,alias:H.alias,designerId:me})}))})}function b(G,W,q){m(H=>{var z,Y,V;const J=_.isFunction(G)?G(g(H,s,l)):G;let Q=H.isArranged;q!=null&&q.isCalledFromArrange&&(Q=!0);const X=Object.assign(Object.assign({},H),{references:J.references,nodes:_.compact(H.nodes.map(ie=>{var ce,de,se;const me=(ce=J.tables)===null||ce===void 0?void 0:ce.find(he=>he.designerId==ie.designerId),ue=Object.assign({},ie);return q!=null&&q.isCalledFromArrange&&(ue.position={x:(me==null?void 0:me.left)||0,y:(me==null?void 0:me.top)||0}),!me&&(q!=null&&q.removeTables)?null:(me&&(me.left!=((de=ie.position)===null||de===void 0?void 0:de.x)||me.top!=((se=ie.position)===null||se===void 0?void 0:se.y))&&(q!=null&&q.isCalledFromArrange||(Q=!1),ue.position={x:me.left,y:me.top}),ue)}))});for(const ie of J.tables){if(X.nodes.find(de=>de.designerId==ie.designerId))continue;const ce=lib$3.createPerspectiveNodeConfig(ie);ce.designerId=ie.designerId,ce.position={x:ie.left,y:ie.top},(n==null?void 0:n.name)!=f&&(ce.database=n==null?void 0:n.name),((z=n==null?void 0:n.connection)===null||z===void 0?void 0:z._id)!=d&&(ce.conid=(Y=n==null?void 0:n.connection)===null||Y===void 0?void 0:Y._id),Q=!1,X.nodes.push(ce)}return X.isArranged=Q,X.nodes.find(ie=>ie.designerId==X.rootDesignerId)||(X.rootDesignerId=(V=X.nodes[0])===null||V===void 0?void 0:V.designerId),X})}function v(G,W,q,H){return r(this,void 0,void 0,function*(){H&&G.nodes.find(z=>!z.position)&&lib$3.perspectiveNodesHaveStructure(G,W,q,d,f)&&G.nodes.every(z=>H==null?void 0:H.findNodeByDesignerId(z.designerId))&&(yield tick(),runCommand("designer.arrange"))})}const y=({designer:G,designerId:W,column:q,foreignKey:H})=>{var V;const z=u==null?void 0:u.findNodeByDesignerId(W),Y=(V=z==null?void 0:z.childNodes)==null?void 0:V.find(J=>J.columnName==q.columnName);return getPerspectiveNodeMenu({config:a,setConfig:m,conid:d,database:f,root:u,node:Y,designerId:W})},C=({designer:G,designerId:W,onRemoveTable:q})=>{const H=u==null?void 0:u.findNodeByDesignerId(W);return[{text:"Remove",onClick:()=>q({designerId:W})},getPerspectiveNodeMenu({config:a,setConfig:m,conid:d,database:f,root:u,node:H,designerId:W})]},E=(G,W)=>{var q,H;return(H=(q=a.nodes.find(z=>z.designerId==G))==null?void 0:q.checkedColumns)==null?void 0:H.includes(W.columnName)},A=(G,W,q)=>{m(H=>({...H,nodes:H.nodes.map(z=>z.designerId==G?{...z,checkedColumns:q?[...z.checkedColumns||[],W.columnName]:(z.checkedColumns||[]).filter(Y=>Y!=W.columnName)}:z)}))},k=G=>{var W,q;return(q=(W=a.nodes)==null?void 0:W.find(H=>H.designerId==G))==null?void 0:q.isNodeChecked},T=(G,W)=>{m(q=>({...q,nodes:q.nodes.map(H=>H.designerId==G?{...H,isNodeChecked:W}:H)}))},$=(G,W)=>{var Y,V;const q=(Y=a.nodes.find(J=>J.designerId==G))==null?void 0:Y.sort,H=(V=q==null?void 0:q.find(J=>J.columnName==W))==null?void 0:V.order;if(!H)return null;const z=q.length>1?_.findIndex(q,J=>J.columnName==W):-1;return{order:H,orderIndex:z}},S=(G,W)=>{var z;const q=l==null?void 0:l[G],H=q==null?void 0:q.columns.find(Y=>Y.name==W);return(z=H==null?void 0:H.types)!=null&&z.includes("json")?"img json":null},I=(G,W)=>{var q,H;return!!((H=(q=a.nodes.find(z=>z.designerId==G))==null?void 0:q.filters)!=null&&H[W])},R=G=>{const W=u==null?void 0:u.findNodeByDesignerId(G);if(!W)return null;const q=(W==null?void 0:W.level)+1;return q==1?`icon num-${q}`:q<=9?`icon num-${q}-outline`:"icon num-9-plus"},N=G=>_.sortBy(G,W=>{const q=u==null?void 0:u.findNodeByDesignerId(W.sourceId),H=u==null?void 0:u.findNodeByDesignerId(W.targetId);return!q||!H?1e4:(q.level>H.level&&(W=lib$3.switchPerspectiveReferenceDirection(W)),_.findIndex(q.childNodes,Y=>Y.columnName==W.columns[0].source))}),M=(G,W)=>{var z;const q=u==null?void 0:u.findNodeByDesignerId(G),H=(z=q==null?void 0:q.childNodes)==null?void 0:z.find(Y=>Y.columnName==W);return(H==null?void 0:H.isExpandable)&&!(H!=null&&H.designerId)&&!(H!=null&&H.isCircular)},F=(G,W)=>{var z;const q=u==null?void 0:u.findNodeByDesignerId(G),H=(z=q==null?void 0:q.childNodes)==null?void 0:z.find(Y=>Y.columnName==W);H==null||H.toggleCheckedNode(!0)},D=G=>{const W=a.nodes.find(q=>q.designerId==G);if(W!=null&&W.conid||W!=null&&W.database)return{conid:W.conid,database:W.database}},x=G=>{var W;return!!((W=a.nodes.find(q=>q.designerId==G))!=null&&W.isParentFilter)},B=G=>{const W=u==null?void 0:u.findNodeByDesignerId(G);return!!(!W||W!=null&&W.hasUncheckedNodeInPath)},K=G=>a.nodes.find(W=>W.designerId==G).multiColumnFilter,U=(G,W)=>{m(q=>({...q,nodes:q.nodes.map(H=>H.designerId==G?{...H,multiColumnFilter:W}:H)}))};return o.$$set=G=>{t(10,e=assign(assign({},e),exclude_internal_props(G))),"config"in G&&t(0,a=G.config),"dbInfos"in G&&t(1,s=G.dbInfos),"dataPatterns"in G&&t(2,l=G.dataPatterns),"root"in G&&t(3,u=G.root),"conid"in G&&t(4,d=G.conid),"database"in G&&t(5,f=G.database),"setConfig"in G&&t(6,m=G.setConfig),"onClickTableHeader"in G&&t(7,h=G.onClickTableHeader)},o.$$.update=()=>{o.$$.dirty[0]&15&&v(a,s,l,u)},e=exclude_internal_props(e),[a,s,l,u,d,f,m,h,g,b,e,y,C,E,A,k,T,$,S,I,R,N,M,F,D,x,B,K,U]}class PerspectiveDesigner extends SvelteComponent{constructor(e){super(),init(this,e,instance$v,create_fragment$v,safe_not_equal,{config:0,dbInfos:1,dataPatterns:2,root:3,conid:4,database:5,setConfig:6,onClickTableHeader:7},null,[-1,-1])}}function getPerspectiveDataPatternsFromCache(o,e,t,n){const r={};for(const a of e.nodes){const s=a.conid||o.conid,l=a.database||o.database,{schemaName:u,pureName:d}=a,f=t.dataPatterns.find(m=>m.conid==s&&m.database==l&&m.schemaName==u&&m.pureName==d);f&&(r[a.designerId]=f)}return r}async function getPerspectiveDataPatterns(o,e,t,n,r){var s,l,u,d;const a={};for(const f of e.nodes){const m=f.conid||o.conid,h=f.database||o.database,{schemaName:p,pureName:g}=f,b=t.dataPatterns.find($=>$.conid==m&&$.database==h&&$.schemaName==p&&$.pureName==g);if(b){a[f.designerId]=b;continue}const v=(s=n==null?void 0:n[m])==null?void 0:s[h];if(!v)continue;const y=(l=v.tables)==null?void 0:l.find($=>$.pureName==g&&$.schemaName==p),C=(u=v.views)==null?void 0:u.find($=>$.pureName==g&&$.schemaName==p),E=(d=v.collections)==null?void 0:d.find($=>$.pureName==g&&$.schemaName==p);if(!y&&!C&&!E)continue;const A={databaseConfig:{conid:m,database:h},engineType:E?"docdb":"sqldb",schemaName:p,pureName:g,orderBy:y!=null&&y.primaryKey?y==null?void 0:y.primaryKey.columns.map($=>({columnName:$.columnName,order:"ASC"})):y||C?[{columnName:(y||C).columns[0].columnName,order:"ASC"}]:null,range:{offset:0,limit:10}},k=await r.loadData(A);if(k.errorMessage){console.error("Error loading pattern for",g,":",k.errorMessage);continue}const T=lib$3.analyseDataPattern({conid:m,database:h,pureName:g,schemaName:p},k);t.dataPatterns.push(T),a[f.designerId]=T}return a}function usePerspectiveDataPatterns(o,e,t,n,r){const a=getPerspectiveDataPatternsFromCache(o,e,t),s=getPerspectiveDataPatterns(o,e,t,n,r),l=writable(a);return s.then(u=>l.set(u)),l}const PerspectiveView_svelte_svelte_type_style_lang="";function create_if_block_1$8(o){let e,t,n,r,a=o[12].title+"",s,l,u,d;return n=new FontIcon({props:{icon:"img table"}}),u=new InlineButton({props:{$$slots:{default:[create_default_slot_5$5]},$$scope:{ctx:o}}}),u.$on("click",o[30]),{c(){e=element("div"),t=element("div"),create_component(n.$$.fragment),r=space(),s=text(a),l=space(),create_component(u.$$.fragment),attr(e,"class","temp-root svelte-cmv30q")},m(f,m){insert(f,e,m),append(e,t),mount_component(n,t,null),append(t,r),append(t,s),append(e,l),mount_component(u,e,null),d=!0},p(f,m){(!d||m[0]&4096)&&a!==(a=f[12].title+"")&&set_data(s,a);const h={};m[1]&16&&(h.$$scope={dirty:m,ctx:f}),u.$set(h)},i(f){d||(transition_in(n.$$.fragment,f),transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(n.$$.fragment,f),transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),destroy_component(n),destroy_component(u)}}}function create_default_slot_5$5(o){let e;return{c(){e=text("Go up")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_4$5(o){let e,t,n,r,a,s;function l(m){o[31](m)}let u={placeholder:"Search column or table"};o[11]!==void 0&&(u.value=o[11]),e=new SearchInput({props:u}),binding_callbacks.push(()=>bind(e,"value",l));function d(m){o[32](m)}let f={};return o[11]!==void 0&&(f.filter=o[11]),r=new CloseSearchButton({props:f}),binding_callbacks.push(()=>bind(r,"filter",d)),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment)},m(m,h){mount_component(e,m,h),insert(m,n,h),mount_component(r,m,h),s=!0},p(m,h){const p={};!t&&h[0]&2048&&(t=!0,p.value=m[11],add_flush_callback(()=>t=!1)),e.$set(p);const g={};!a&&h[0]&2048&&(a=!0,g.filter=m[11],add_flush_callback(()=>a=!1)),r.$set(g)},i(m){s||(transition_in(e.$$.fragment,m),transition_in(r.$$.fragment,m),s=!0)},o(m){transition_out(e.$$.fragment,m),transition_out(r.$$.fragment,m),s=!1},d(m){m&&detach(n),destroy_component(e,m),destroy_component(r,m)}}}function create_if_block$f(o){let e,t;return e=new PerspectiveTree({props:{root:o[8],tempRoot:o[12],config:o[3],setConfig:o[4],conid:o[0],database:o[1],filter:o[11]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&256&&(a.root=n[8]),r[0]&4096&&(a.tempRoot=n[12]),r[0]&8&&(a.config=n[3]),r[0]&16&&(a.setConfig=n[4]),r[0]&1&&(a.conid=n[0]),r[0]&2&&(a.database=n[1]),r[0]&2048&&(a.filter=n[11]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$7(o){let e,t,n=o[8]&&create_if_block$f(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[8]?n?(n.p(r,a),a[0]&256&&transition_in(n,1)):(n=create_if_block$f(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_default_slot_2$8(o){let e,t,n,r,a,s=o[12]&&o[12]!=o[8]&&create_if_block_1$8(o);return t=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_4$5]},$$scope:{ctx:o}}}),r=new ManagerInnerContainer({props:{width:o[7],$$slots:{default:[create_default_slot_3$7]},$$scope:{ctx:o}}}),{c(){s&&s.c(),e=space(),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment)},m(l,u){s&&s.m(l,u),insert(l,e,u),mount_component(t,l,u),insert(l,n,u),mount_component(r,l,u),a=!0},p(l,u){l[12]&&l[12]!=l[8]?s?(s.p(l,u),u[0]&4352&&transition_in(s,1)):(s=create_if_block_1$8(l),s.c(),transition_in(s,1),s.m(e.parentNode,e)):s&&(group_outros(),transition_out(s,1,1,()=>{s=null}),check_outros());const d={};u[0]&2048|u[1]&16&&(d.$$scope={dirty:u,ctx:l}),t.$set(d);const f={};u[0]&128&&(f.width=l[7]),u[0]&6427|u[1]&16&&(f.$$scope={dirty:u,ctx:l}),r.$set(f)},i(l){a||(transition_in(s),transition_in(t.$$.fragment,l),transition_in(r.$$.fragment,l),a=!0)},o(l){transition_out(s),transition_out(t.$$.fragment,l),transition_out(r.$$.fragment,l),a=!1},d(l){l&&(detach(e),detach(n)),s&&s.d(l),destroy_component(t,l),destroy_component(r,l)}}}function create_default_slot_1$9(o){let e,t;return e=new PerspectiveFilters({props:{managerSize:o[7],config:o[3],setConfig:o[4],conid:o[0],database:o[1],driver:o[2],root:o[8]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&128&&(a.managerSize=n[7]),r[0]&8&&(a.config=n[3]),r[0]&16&&(a.setConfig=n[4]),r[0]&1&&(a.conid=n[0]),r[0]&2&&(a.database=n[1]),r[0]&4&&(a.driver=n[2]),r[0]&256&&(a.root=n[8]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$d(o){let e,t,n,r;return e=new WidgetColumnBarItem({props:{title:"Choose data",name:"perspectiveTree",height:"70%",$$slots:{default:[create_default_slot_2$8]},$$scope:{ctx:o}}}),n=new WidgetColumnBarItem({props:{title:"Filters",name:"tableFilters",$$slots:{default:[create_default_slot_1$9]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s[0]&6619|s[1]&16&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s[0]&415|s[1]&16&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create__1_slot_1$1(o){let e,t,n;return t=new WidgetColumnBar({props:{$$slots:{default:[create_default_slot$d]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","left svelte-cmv30q"),attr(e,"slot","1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a[0]&6623|a[1]&16&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create__1_slot$5(o){let e,t;return e=new PerspectiveDesigner({props:{config:o[3],conid:o[0],database:o[1],setConfig:o[4],dbInfos:o[10],dataPatterns:o[9],root:o[8],onClickTableHeader:o[29]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&8&&(a.config=n[3]),r[0]&1&&(a.conid=n[0]),r[0]&2&&(a.database=n[1]),r[0]&16&&(a.setConfig=n[4]),r[0]&1024&&(a.dbInfos=n[10]),r[0]&512&&(a.dataPatterns=n[9]),r[0]&256&&(a.root=n[8]),r[0]&64&&(a.onClickTableHeader=n[29]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot_1$1(o){let e,t;return e=new PerspectiveTable({props:{root:o[8],loadedCounts:o[5],config:o[3],setConfig:o[4],conid:o[0],database:o[1]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&256&&(a.root=n[8]),r[0]&32&&(a.loadedCounts=n[5]),r[0]&8&&(a.config=n[3]),r[0]&16&&(a.setConfig=n[4]),r[0]&1&&(a.conid=n[0]),r[0]&2&&(a.database=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$5(o){let e,t;return e=new VerticalSplitter({props:{allowCollapseChild1:!0,allowCollapseChild2:!0,$$slots:{2:[create__2_slot_1$1],1:[create__1_slot$5]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&1915|r[1]&16&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$u(o){let e,t,n;function r(s){o[33](s)}let a={initialValue:o[15](),allowCollapseChild1:!0,$$slots:{2:[create__2_slot$5],1:[create__1_slot_1$1]},$$scope:{ctx:o}};return o[7]!==void 0&&(a.size=o[7]),e=new HorizontalSplitter({props:a}),binding_callbacks.push(()=>bind(e,"size",r)),{c(){create_component(e.$$.fragment)},m(s,l){mount_component(e,s,l),n=!0},p(s,l){const u={};l[0]&8191|l[1]&16&&(u.$$scope={dirty:l,ctx:s}),!t&&l[0]&128&&(t=!0,u.size=s[7],add_flush_callback(()=>t=!1)),e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){destroy_component(e,s)}}}const getCurrentEditor$4=()=>getActiveComponent("PerspectiveView");registerCommand({id:"perspective.customJoin",category:"Perspective",name:"Custom join",keyText:"CtrlOrCommand+J",isRelatedToTab:!0,icon:"icon custom-join",testEnabled:()=>getCurrentEditor$4()!=null,onClick:()=>getCurrentEditor$4().defineCustomJoin()});function instance$u(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b=noop$1,v=()=>(b(),b=subscribe(a,V=>t(9,g=V)),a),y,C=noop$1,E=()=>(C(),C=subscribe(n,V=>t(10,y=V)),n);o.$$.on_destroy.push(()=>b()),o.$$.on_destroy.push(()=>C());var A,k;debug("dbgate:PerspectiveView");let{conid:T}=e,{database:$}=e,{driver:S}=e,{config:I}=e,{setConfig:R}=e,N=null,{loadedCounts:M}=e,{cache:F}=e,D,x;const B=createActivator("PerspectiveView",!0);function K(){const V=getLocalStorage("perspectiveManagerWidth");return _.isNumber(V)&&V>30&&V<500?`${V}px`:"300px"}function U(){h&&showModal(CustomJoinModal,{config:I,setConfig:R,conid:T,database:$,root:h})}let G=lib$3.extractPerspectiveDatabases({conid:T,database:$},I);const W=V=>{sleep(100).then(()=>{t(6,N=V)})},q=()=>{var V;t(6,N=(V=p==null?void 0:p.parentNode)==null?void 0:V.designerId)};function H(V){x=V,t(11,x)}function z(V){x=V,t(11,x)}function Y(V){D=V,t(7,D)}return o.$$set=V=>{"conid"in V&&t(0,T=V.conid),"database"in V&&t(1,$=V.database),"driver"in V&&t(2,S=V.driver),"config"in V&&t(3,I=V.config),"setConfig"in V&&t(4,R=V.setConfig),"loadedCounts"in V&&t(5,M=V.loadedCounts),"cache"in V&&t(16,F=V.cache)},o.$$.update=()=>{if(o.$$.dirty[0]&128&&D&&setLocalStorage("perspectiveManagerWidth",D),o.$$.dirty[0]&2097163){const V=lib$3.extractPerspectiveDatabases({conid:T,database:$},I);stableStringify(V)!=stableStringify(G)&&t(21,G=V)}o.$$.dirty[0]&2097152&&E(t(14,n=useMultipleDatabaseInfo(G))),o.$$.dirty[0]&67175435&&v(t(13,a=usePerspectiveDataPatterns({conid:T,database:$},I,F,y,r))),o.$$.dirty[0]&524296&&t(27,s=t(19,A=I==null?void 0:I.nodes)===null||A===void 0?void 0:A.find(V=>V.designerId==(I==null?void 0:I.rootDesignerId))),o.$$.dirty[0]&135267331&&t(28,l=s?t(20,k=y==null?void 0:y[s.conid||T])===null||k===void 0?void 0:k[s.database||$]:null),o.$$.dirty[0]&402653184&&t(25,u=l==null?void 0:l.tables.find(V=>V.pureName==(s==null?void 0:s.pureName)&&V.schemaName==(s==null?void 0:s.schemaName))),o.$$.dirty[0]&402653184&&t(24,d=l==null?void 0:l.views.find(V=>V.pureName==(s==null?void 0:s.pureName)&&V.schemaName==(s==null?void 0:s.schemaName))),o.$$.dirty[0]&402653184&&t(23,f=l==null?void 0:l.collections.find(V=>V.pureName==(s==null?void 0:s.pureName)&&V.schemaName==(s==null?void 0:s.schemaName))),o.$$.dirty[0]&67174912&&t(22,m=new lib$3.PerspectiveDataProvider(F,r,g)),o.$$.dirty[0]&62915611&&t(8,h=u||d||f?new lib$3.PerspectiveTableNode(u||d||f,y,I,R,m,{conid:T,database:$},null,I.rootDesignerId):null),o.$$.dirty[0]&320&&t(12,p=h==null?void 0:h.findNodeByDesignerId(N)),o.$$.dirty[0]&1563&&lib$3.shouldProcessPerspectiveDefaultColunns(I,y,g,T,$)&&R(V=>lib$3.processPerspectiveDefaultColunns(V,y,g,T,$))},t(26,r=new lib$3.PerspectiveDataLoader(apiCall)),[T,$,S,I,R,M,N,D,h,g,y,x,p,a,n,K,F,B,U,A,k,G,m,f,d,u,r,s,l,W,q,H,z,Y]}class PerspectiveView extends SvelteComponent{constructor(e){super(),init(this,e,instance$u,create_fragment$u,safe_not_equal,{conid:0,database:1,driver:2,config:3,setConfig:4,loadedCounts:5,cache:16,activator:17,defineCustomJoin:18},null,[-1,-1])}get activator(){return this.$$.ctx[17]}get defineCustomJoin(){return this.$$.ctx[18]}}function create_else_block$4(o){let e,t;return e=new PerspectiveView({props:{conid:o[0],database:o[1],driver:o[5],config:o[2].value,setConfig:o[24],cache:o[4],loadedCounts:o[10]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.conid=n[0]),r&2&&(a.database=n[1]),r&32&&(a.driver=n[5]),r&4&&(a.config=n[2].value),r&16&&(a.setConfig=n[24]),r&16&&(a.cache=n[4]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$e(o){let e,t;return e=new ErrorInfo({props:{message:"Invalid perspective format, please create new perspective",alignTop:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$c(o){let e,t,n,r;const a=[create_if_block$e,create_else_block$4],s=[];function l(u,d){return u[3]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_toolstrip_slot$3(o){var p;let e,t,n,r,a,s,l,u,d,f,m,h;return e=new ToolStripCommandButton({props:{command:"designer.arrange",buttonLabel:(p=o[2].value)!=null&&p.isArranged?"(Arranged)":"Arrange"}}),n=new ToolStripCommandButton({props:{command:"perspective.refresh"}}),a=new ToolStripCommandButton({props:{command:"perspective.customJoin"}}),l=new ToolStripSaveButton({props:{idPrefix:"perspective"}}),d=new ToolStripCommandButton({props:{command:"perspective.undo"}}),m=new ToolStripCommandButton({props:{command:"perspective.redo"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment),f=space(),create_component(m.$$.fragment)},m(g,b){mount_component(e,g,b),insert(g,t,b),mount_component(n,g,b),insert(g,r,b),mount_component(a,g,b),insert(g,s,b),mount_component(l,g,b),insert(g,u,b),mount_component(d,g,b),insert(g,f,b),mount_component(m,g,b),h=!0},p(g,b){var y;const v={};b&4&&(v.buttonLabel=(y=g[2].value)!=null&&y.isArranged?"(Arranged)":"Arrange"),e.$set(v)},i(g){h||(transition_in(e.$$.fragment,g),transition_in(n.$$.fragment,g),transition_in(a.$$.fragment,g),transition_in(l.$$.fragment,g),transition_in(d.$$.fragment,g),transition_in(m.$$.fragment,g),h=!0)},o(g){transition_out(e.$$.fragment,g),transition_out(n.$$.fragment,g),transition_out(a.$$.fragment,g),transition_out(l.$$.fragment,g),transition_out(d.$$.fragment,g),transition_out(m.$$.fragment,g),h=!1},d(g){g&&(detach(t),detach(r),detach(s),detach(u),detach(f)),destroy_component(e,g),destroy_component(n,g),destroy_component(a,g),destroy_component(l,g),destroy_component(d,g),destroy_component(m,g)}}}function create_fragment$t(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$3],default:[create_default_slot$c]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&268435519&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const getCurrentEditor$3=()=>getActiveComponent("PerspectiveTab");registerCommand({id:"perspective.refresh",category:"Perspective",name:"Refresh",keyText:"F5 | CtrlOrCommand+R",toolbar:!0,isRelatedToTab:!0,icon:"icon reload",testEnabled:()=>getCurrentEditor$3()!=null,onClick:()=>getCurrentEditor$3().refresh()});registerFileCommands({idPrefix:"perspective",category:"Perspective",getCurrentEditor:getCurrentEditor$3,folder:"perspectives",format:"json",fileExtension:"perspective",undoRedo:!0});const allowAddToFavorites=o=>!0;function instance$t(o,e,t){let n,r,a,s,l,u,d=noop$1,f=()=>(d(),d=subscribe(n,K=>t(23,u=K)),n);component_subscribe(o,extensions,K=>t(22,l=K)),o.$$.on_destroy.push(()=>d());let{tabid:m}=e,{conid:h}=e,{database:p}=e,{schemaName:g}=e,{pureName:b}=e,v;const y=createActivator("PerspectiveTab",!0);function C(){return m}function E(){return s.value||""}function A(){return a.canUndo}function k(){M({type:"undo"}),invalidateCommands()}function T(){return a.canRedo}function $(){M({type:"redo"}),invalidateCommands()}const{editorState:S,editorValue:I,setEditorData:R}=useEditorData({tabid:m,onInitialData:K=>{K.nodes?M({type:"reset",value:K}):t(3,v=!0),invalidateCommands()}});component_subscribe(o,S,K=>t(25,s=K));const[N,M]=createUndoReducer(lib$3.createPerspectiveConfig(b?{schemaName:g,pureName:b}:null));component_subscribe(o,N,K=>t(2,a=K));let F=new lib$3.PerspectiveCache;const D=writable({});function x(){t(4,F=new lib$3.PerspectiveCache),D.set({})}const B=(K,U)=>{U&&F.clear(),M({type:"compute",compute:G=>_.isFunction(K)?K(G):K}),invalidateCommands()};return o.$$set=K=>{"tabid"in K&&t(11,m=K.tabid),"conid"in K&&t(0,h=K.conid),"database"in K&&t(1,p=K.database),"schemaName"in K&&t(12,g=K.schemaName),"pureName"in K&&t(13,b=K.pureName)},o.$$.update=()=>{o.$$.dirty&1&&f(t(6,n=useConnectionInfo({conid:h}))),o.$$.dirty&12582912&&t(5,r=lib.findEngineDriver(u,l)),o.$$.dirty&4&&R(a.value)},[h,p,a,v,F,r,n,S,N,M,D,m,g,b,y,C,E,A,k,T,$,x,l,u,B]}class PerspectiveTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$t,create_fragment$t,safe_not_equal,{tabid:11,conid:0,database:1,schemaName:12,pureName:13,activator:14,getTabId:15,getData:16,canUndo:17,undo:18,canRedo:19,redo:20,refresh:21})}get activator(){return this.$$.ctx[14]}get getTabId(){return this.$$.ctx[15]}get getData(){return this.$$.ctx[16]}get canUndo(){return this.$$.ctx[17]}get undo(){return this.$$.ctx[18]}get canRedo(){return this.$$.ctx[19]}get redo(){return this.$$.ctx[20]}get refresh(){return this.$$.ctx[21]}}const PerspectiveTab$1=Object.freeze(Object.defineProperty({__proto__:null,allowAddToFavorites,default:PerspectiveTab},Symbol.toStringTag,{value:"Module"})),ServerSummaryTab_svelte_svelte_type_style_lang="";function get_each_context$3(o,e,t){const n=o.slice();return n[9]=e[t],n[11]=t,n}function create_catch_block$4(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$4(o){let e,t,n;return t=new ObjectListControl({props:{collection:o[6].databases,hideDisplayName:!0,title:`Databases (${o[6].databases.length})`,emptyMessage:"No databases",columns:o[6].columns.map(func_1$2),$$slots:{2:[create__2_slot$4,({row:r,col:a})=>({7:r,8:a}),({row:r,col:a})=>(r?128:0)|(a?256:0)],1:[create__1_slot$4,({row:r,col:a})=>({7:r,8:a}),({row:r,col:a})=>(r?128:0)|(a?256:0)]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","wrapper svelte-yw1ll")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p(r,a){const s={};a&3&&(s.collection=r[6].databases),a&3&&(s.title=`Databases (${r[6].databases.length})`),a&3&&(s.columns=r[6].columns.map(func_1$2)),a&4480&&(s.$$scope={dirty:a,ctx:r}),t.$set(s)},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create__1_slot$4(o){var n;let e=formatFileSize((n=o[7])==null?void 0:n[o[8].fieldName])+"",t;return{c(){t=text(e)},m(r,a){insert(r,t,a)},p(r,a){var s;a&384&&e!==(e=formatFileSize((s=r[7])==null?void 0:s[r[8].fieldName])+"")&&set_data(t,e)},d(r){r&&detach(t)}}}function create_if_block$d(o){let e;return{c(){e=element("span"),e.textContent="|",attr(e,"class","action-separator svelte-yw1ll")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_1$8(o){let e=o[9].header+"",t;return{c(){t=text(e)},m(n,r){insert(n,t,r)},p(n,r){r&256&&e!==(e=n[9].header+"")&&set_data(t,e)},d(n){n&&detach(t)}}}function create_each_block$3(o){let e,t,n,r=o[11]>0&&create_if_block$d();function a(){return o[5](o[9],o[7])}return t=new Link$1({props:{onClick:a,$$slots:{default:[create_default_slot_1$8]},$$scope:{ctx:o}}}),{c(){r&&r.c(),e=space(),create_component(t.$$.fragment)},m(s,l){r&&r.m(s,l),insert(s,e,l),mount_component(t,s,l),n=!0},p(s,l){o=s;const u={};l&384&&(u.onClick=a),l&4352&&(u.$$scope={dirty:l,ctx:o}),t.$set(u)},i(s){n||(transition_in(t.$$.fragment,s),n=!0)},o(s){transition_out(t.$$.fragment,s),n=!1},d(s){s&&detach(e),r&&r.d(s),destroy_component(t,s)}}}function create__2_slot$4(o){let e,t,n=ensure_array_like(o[8].actions),r=[];for(let s=0;s<n.length;s+=1)r[s]=create_each_block$3(get_each_context$3(o,n,s));const a=s=>transition_out(r[s],1,1,()=>{r[s]=null});return{c(){for(let s=0;s<r.length;s+=1)r[s].c();e=empty()},m(s,l){for(let u=0;u<r.length;u+=1)r[u]&&r[u].m(s,l);insert(s,e,l),t=!0},p(s,l){if(l&388){n=ensure_array_like(s[8].actions);let u;for(u=0;u<n.length;u+=1){const d=get_each_context$3(s,n,u);r[u]?(r[u].p(d,l),transition_in(r[u],1)):(r[u]=create_each_block$3(d),r[u].c(),transition_in(r[u],1),r[u].m(e.parentNode,e))}for(group_outros(),u=n.length;u<r.length;u+=1)a(u);check_outros()}},i(s){if(!t){for(let l=0;l<n.length;l+=1)transition_in(r[l]);t=!0}},o(s){r=r.filter(Boolean);for(let l=0;l<r.length;l+=1)transition_out(r[l]);t=!1},d(s){s&&detach(e),destroy_each(r,s)}}}function create_pending_block$4(o){let e,t;return e=new LoadingInfo({props:{message:"Loading server details",wrapper:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$b(o){let e,t,n,r={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block$4,then:create_then_block$4,catch:create_catch_block$4,value:6,blocks:[,,,]};return handle_promise(t=apiCall("server-connections/server-summary",{conid:o[0],refreshToken:o[1]}),r),{c(){e=empty(),r.block.c()},m(a,s){insert(a,e,s),r.block.m(a,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(a,s){o=a,r.ctx=o,s&3&&t!==(t=apiCall("server-connections/server-summary",{conid:o[0],refreshToken:o[1]}))&&handle_promise(t,r)||update_await_block_branch(r,o,s)},i(a){n||(transition_in(r.block),n=!0)},o(a){for(let s=0;s<3;s+=1){const l=r.blocks[s];transition_out(l)}n=!1},d(a){a&&detach(e),r.block.d(a),r.token=null,r=null}}}function create_toolstrip_slot$2(o){let e,t;return e=new ToolStripCommandButton({props:{command:"serverSummary.refresh"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$s(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$2],default:[create_default_slot$b]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&4099&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$2=()=>getActiveComponent("ServerSummaryTab");registerCommand({id:"serverSummary.refresh",category:"Server sumnmary",name:"Refresh",keyText:"F5 | CtrlOrCommand+R",toolbar:!0,isRelatedToTab:!0,icon:"icon reload",onClick:()=>getCurrentEditor$2().refresh(),testEnabled:()=>getCurrentEditor$2()!=null});const func_1$2=o=>({...o,slot:o.columnType=="bytes"?1:o.columnType=="actions"?2:null});function instance$s(o,e,t){let{conid:n}=e,r=0;const a=createActivator("ServerSummaryTab",!0);function s(){t(1,r+=1)}async function l(d,f){const{command:m,openQuery:h,openTab:p,addDbProps:g}=d;if(m&&(await apiCall("server-connections/summary-command",{conid:n,refreshToken:r,command:m,row:f}),s()),h&&openNewTab({title:d.tabTitle||f.name,icon:"img query-data",tabComponent:"QueryDataTab",props:{conid:n,database:f.name,sql:h}}),p){const b={};g&&(b.conid=n,b.database=f.name),openNewTab({...p,props:{...p.props,...b}})}}const u=(d,f)=>l(d,f);return o.$$set=d=>{"conid"in d&&t(0,n=d.conid)},[n,r,l,a,s,u]}class ServerSummaryTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$s,create_fragment$s,safe_not_equal,{conid:0,activator:3,refresh:4})}get activator(){return this.$$.ctx[3]}get refresh(){return this.$$.ctx[4]}}const ServerSummaryTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ServerSummaryTab},Symbol.toStringTag,{value:"Module"}));function create_else_block_1$2(o){let e,t;return e=new ErrorInfo({props:{message:"Profiler not yet started",alignTop:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$c(o){let e,t;return e=new VerticalSplitter({props:{allowCollapseChild1:!0,allowCollapseChild2:!0,$$slots:{2:[create__2_slot$3],1:[create__1_slot$3]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16777231&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_key_block(o){var n;let e,t;return e=new JslDataGrid({props:{jslid:o[3],listenInitializeFile:!0,formatterFunction:(n=o[0])==null?void 0:n.profilerFormatterFunction}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&8&&(s.jslid=r[3]),a&1&&(s.formatterFunction=(l=r[0])==null?void 0:l.profilerFormatterFunction),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__1_slot$3(o){let e=o[3],t,n,r=create_key_block(o);return{c(){r.c(),t=empty()},m(a,s){r.m(a,s),insert(a,t,s),n=!0},p(a,s){s&8&&safe_not_equal(e,e=a[3])?(group_outros(),transition_out(r,1,1,noop$1),check_outros(),r=create_key_block(a),r.c(),transition_in(r,1),r.m(t.parentNode,t)):r.p(a,s)},i(a){n||(transition_in(r),n=!0)},o(a){transition_out(r),n=!1},d(a){a&&detach(t),r.d(a)}}}function create_else_block$3(o){let e,t;return e=new ChartCore({props:{title:"Profile data",data:o[2],options:{maintainAspectRatio:!1,scales:{x:{type:"time",distribution:"linear",time:{tooltipFormat:"D. M. YYYY HH:mm",displayFormats:{millisecond:"HH:mm:ss.SSS",second:"HH:mm:ss",minute:"HH:mm",hour:"D.M hA",day:"D. M.",week:"D. M. YYYY",month:"MM-YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}}}}}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.data=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1$7(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Loading chart"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__2_slot$3(o){let e,t,n,r;const a=[create_if_block_1$7,create_else_block$3],s=[];function l(u,d){return u[1]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_default_slot$a(o){let e,t,n,r;const a=[create_if_block$c,create_else_block_1$2],s=[];function l(u,d){return u[3]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_toolstrip_slot$1(o){let e,t,n,r,a,s;return e=new ToolStripCommandButton({props:{command:"profiler.start"}}),n=new ToolStripCommandButton({props:{command:"profiler.stop"}}),a=new ToolStripCommandButton({props:{command:"profiler.save"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment)},m(l,u){mount_component(e,l,u),insert(l,t,u),mount_component(n,l,u),insert(l,r,u),mount_component(a,l,u),s=!0},p:noop$1,i(l){s||(transition_in(e.$$.fragment,l),transition_in(n.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(n.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(t),detach(r)),destroy_component(e,l),destroy_component(n,l),destroy_component(a,l)}}}function create_fragment$r(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot$1],default:[create_default_slot$a]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&16777231&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor$1=()=>getActiveComponent("ProfilerTab");registerCommand({id:"profiler.start",category:"Profiler",name:"Start profiling",icon:"icon play",testEnabled:()=>{var o;return(o=getCurrentEditor$1())===null||o===void 0?void 0:o.startProfilingEnabled()},onClick:()=>getCurrentEditor$1().startProfiling()});registerCommand({id:"profiler.stop",category:"Profiler",name:"Stop profiling",icon:"icon play-stop",testEnabled:()=>{var o;return(o=getCurrentEditor$1())===null||o===void 0?void 0:o.stopProfilingEnabled()},onClick:()=>getCurrentEditor$1().stopProfiling()});registerCommand({id:"profiler.save",category:"Profiler",name:"Save",icon:"icon save",testEnabled:()=>{var o;return(o=getCurrentEditor$1())===null||o===void 0?void 0:o.saveEnabled()},onClick:()=>getCurrentEditor$1().save()});function instance$r(o,e,t){let n,r,a,s,l,u=noop$1,d=()=>(u(),u=subscribe(n,F=>t(18,l=F)),n);component_subscribe(o,extensions,F=>t(17,s=F)),o.$$.on_destroy.push(()=>u());const f=createActivator("ProfilerTab",!0);let{conid:m}=e,{database:h}=e,{engine:p}=e,{jslidLoad:g}=e,b,v=!1,y,C=!1,E,A;onMount(()=>{E=setInterval(()=>{y&&apiCall("sessions/ping",{sesid:y})},15*1e3)}),onDestroy(()=>{clearInterval(E)});async function k(){v=!0;let F=y;F||(F=(await apiCall("sessions/create",{conid:m,database:h})).sesid,y=F);const D=await apiCall("sessions/start-profiler",{sesid:F});t(16,b=D.jslid),invalidateCommands()}function T(){return m&&h&&!v}async function $(){t(1,C=!0);const F=randomcolor({count:r.profilerChartMeasures.length,seed:5}),D=await apiCall("jsldata/extract-timeline-chart",{jslid:a,timestampFunction:r.profilerTimestampFunction,aggregateFunction:r.profilerChartAggregateFunction,measures:r.profilerChartMeasures});t(2,A={...D,labels:D.labels.map(x=>new Date(x)),datasets:D.datasets.map((x,B)=>({...x,borderColor:F[B]}))}),t(1,C=!1)}async function S(){v=!1,await apiCall("sessions/stop-profiler",{sesid:y}),await apiCall("sessions/kill",{sesid:y}),y=null,invalidateCommands(),$()}function I(){return m&&h&&v}function R(){return!!b}async function N(F,D){await apiCall("archive/save-jsl-data",{folder:F,file:D,jslid:a}),currentArchive.set(F),selectedWidget.set("archive")}function M(){showModal(SaveArchiveModal,{onSave:N})}return o.$$set=F=>{"conid"in F&&t(6,m=F.conid),"database"in F&&t(7,h=F.database),"engine"in F&&t(8,p=F.engine),"jslidLoad"in F&&t(9,g=F.jslidLoad)},o.$$.update=()=>{o.$$.dirty&64&&d(t(4,n=useConnectionInfo({conid:m}))),o.$$.dirty&393472&&t(0,r=lib.findEngineDriver(p||l,s)),o.$$.dirty&66048&&t(3,a=b||g),o.$$.dirty&513&&g&&r&&$()},[r,C,A,a,n,f,m,h,p,g,k,T,S,I,R,M,b,s,l]}class ProfilerTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$r,create_fragment$r,safe_not_equal,{activator:5,conid:6,database:7,engine:8,jslidLoad:9,startProfiling:10,startProfilingEnabled:11,stopProfiling:12,stopProfilingEnabled:13,saveEnabled:14,save:15})}get activator(){return this.$$.ctx[5]}get startProfiling(){return this.$$.ctx[10]}get startProfilingEnabled(){return this.$$.ctx[11]}get stopProfiling(){return this.$$.ctx[12]}get stopProfilingEnabled(){return this.$$.ctx[13]}get saveEnabled(){return this.$$.ctx[14]}get save(){return this.$$.ctx[15]}}const ProfilerTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ProfilerTab},Symbol.toStringTag,{value:"Module"})),ObjectConfigurationControl_svelte_svelte_type_style_lang="";function create_fragment$q(o){let e,t,n,r,a,s,l;const u=o[2].default,d=create_slot(u,o,o[1],null);return{c(){e=element("div"),t=element("div"),n=element("span"),r=text(o[0]),a=space(),s=element("div"),d&&d.c(),attr(n,"class","title mr-1 svelte-1um34k6"),attr(t,"class","header svelte-1um34k6"),attr(s,"class","body svelte-1um34k6"),attr(e,"class","wrapper svelte-1um34k6")},m(f,m){insert(f,e,m),append(e,t),append(t,n),append(n,r),append(e,a),append(e,s),d&&d.m(s,null),l=!0},p(f,[m]){(!l||m&1)&&set_data(r,f[0]),d&&d.p&&(!l||m&2)&&update_slot_base(d,u,f,f[1],l?get_slot_changes(u,f[1],m,null):get_all_dirty_from_scope(f[1]),null)},i(f){l||(transition_in(d,f),l=!0)},o(f){transition_out(d,f),l=!1},d(f){f&&detach(e),d&&d.d(f)}}}function instance$q(o,e,t){let{$$slots:n={},$$scope:r}=e,{title:a}=e;return o.$$set=s=>{"title"in s&&t(0,a=s.title),"$$scope"in s&&t(1,r=s.$$scope)},[a,r,n]}class ObjectConfigurationControl extends SvelteComponent{constructor(e){super(),init(this,e,instance$q,create_fragment$q,safe_not_equal,{title:0})}}const DataDuplicatorTab_svelte_svelte_type_style_lang="";function create_default_slot_9(o){var n,r;let e,t;return e=new SelectField({props:{isNative:!0,value:(n=o[5].value)==null?void 0:n.archiveFolder,options:((r=o[12])==null?void 0:r.map(func$2))||[]}}),e.$on("change",o[29]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s[0]&32&&(l.value=(u=a[5].value)==null?void 0:u.archiveFolder),s[0]&4096&&(l.options=((d=a[12])==null?void 0:d.map(func$2))||[]),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot_8$1(o){var n;let e,t;return e=new CheckboxField({props:{checked:(n=o[5].value)==null?void 0:n.rollbackAfterFinish}}),e.$on("change",o[30]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a[0]&32&&(s.checked=(l=r[5].value)==null?void 0:l.rollbackAfterFinish),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_7$2(o){var n;let e,t;return e=new CheckboxField({props:{checked:(n=o[5].value)==null?void 0:n.skipRowsWithUnresolvedRefs}}),e.$on("change",o[32]),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a[0]&32&&(s.checked=(l=r[5].value)==null?void 0:l.skipRowsWithUnresolvedRefs),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_6$2(o){let e,t,n,r,a,s;return e=new FormFieldTemplateLarge({props:{label:"Source archive",type:"combo",$$slots:{default:[create_default_slot_9]},$$scope:{ctx:o}}}),n=new FormFieldTemplateLarge({props:{label:"Dry run - no changes (rollback when finished)",type:"checkbox",labelProps:{onClick:o[31]},$$slots:{default:[create_default_slot_8$1]},$$scope:{ctx:o}}}),a=new FormFieldTemplateLarge({props:{label:"Skip rows with unresolved mandatory references",type:"checkbox",labelProps:{onClick:o[33]},$$slots:{default:[create_default_slot_7$2]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment)},m(l,u){mount_component(e,l,u),insert(l,t,u),mount_component(n,l,u),insert(l,r,u),mount_component(a,l,u),s=!0},p(l,u){const d={};u[0]&4128|u[1]&131072&&(d.$$scope={dirty:u,ctx:l}),e.$set(d);const f={};u[0]&32&&(f.labelProps={onClick:l[31]}),u[0]&32|u[1]&131072&&(f.$$scope={dirty:u,ctx:l}),n.$set(f);const m={};u[0]&32&&(m.labelProps={onClick:l[33]}),u[0]&32|u[1]&131072&&(m.$$scope={dirty:u,ctx:l}),a.$set(m)},i(l){s||(transition_in(e.$$.fragment,l),transition_in(n.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(e.$$.fragment,l),transition_out(n.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(t),detach(r)),destroy_component(e,l),destroy_component(n,l),destroy_component(a,l)}}}function create_default_slot_5$4(o){let e;return{c(){e=text("Check all")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_4$4(o){let e;return{c(){e=text("Uncheck all")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create__1_slot_1(o){let e,t;function n(...r){return o[39](o[47],...r)}return e=new CheckboxField({props:{checked:o[47].isChecked}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[1]&65536&&(s.checked=o[47].isChecked),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create__2_slot_1(o){let e,t;function n(...r){return o[38](o[47],...r)}return e=new SelectField({props:{isNative:!0,value:o[47].operation,disabled:!o[47].isChecked,options:[{label:"Copy row",value:"copy"},{label:"Lookup (find matching row)",value:"lookup"},{label:"Insert if not exists",value:"insertMissing"}]}}),e.$on("change",n),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[1]&65536&&(s.value=o[47].operation),a[1]&65536&&(s.disabled=!o[47].isChecked),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_if_block$b(o){var a,s,l,u;let e,t;function n(...d){return o[36](o[47],...d)}function r(...d){return o[37](o[47],...d)}return e=new SelectField({props:{isNative:!0,value:o[47].matchColumn1,disabled:!o[47].isChecked,options:((u=(l=(s=(a=o[4])==null?void 0:a.tables)==null?void 0:s.find(n))==null?void 0:l.columns)==null?void 0:u.map(func_6$1))||[]}}),e.$on("change",r),{c(){create_component(e.$$.fragment)},m(d,f){mount_component(e,d,f),t=!0},p(d,f){var h,p,g,b;o=d;const m={};f[1]&65536&&(m.value=o[47].matchColumn1),f[1]&65536&&(m.disabled=!o[47].isChecked),f[0]&16|f[1]&65536&&(m.options=((b=(g=(p=(h=o[4])==null?void 0:h.tables)==null?void 0:p.find(n))==null?void 0:g.columns)==null?void 0:b.map(func_6$1))||[]),e.$set(m)},i(d){t||(transition_in(e.$$.fragment,d),t=!0)},o(d){transition_out(e.$$.fragment,d),t=!1},d(d){destroy_component(e,d)}}}function create__3_slot(o){let e,t,n=o[47].operation!="copy"&&create_if_block$b(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[47].operation!="copy"?n?(n.p(r,a),a[1]&65536&&transition_in(n,1)):(n=create_if_block$b(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_default_slot_3$6(o){let e,t,n=o[47].file+"",r,a;return e=new FontIcon({props:{icon:"img archive"}}),{c(){create_component(e.$$.fragment),t=space(),r=text(n)},m(s,l){mount_component(e,s,l),insert(s,t,l),insert(s,r,l),a=!0},p(s,l){(!a||l[1]&65536)&&n!==(n=s[47].file+"")&&set_data(r,n)},i(s){a||(transition_in(e.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),a=!1},d(s){s&&(detach(t),detach(r)),destroy_component(e,s)}}}function create__4_slot(o){let e,t;function n(){return o[35](o[47])}return e=new Link$1({props:{onClick:n,$$slots:{default:[create_default_slot_3$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[0]&32|a[1]&65536&&(s.onClick=n),a[1]&196608&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_2$7(o){let e,t,n=o[47].table+"",r,a;return e=new FontIcon({props:{icon:"img table"}}),{c(){create_component(e.$$.fragment),t=space(),r=text(n)},m(s,l){mount_component(e,s,l),insert(s,t,l),insert(s,r,l),a=!0},p(s,l){(!a||l[1]&65536)&&n!==(n=s[47].table+"")&&set_data(r,n)},i(s){a||(transition_in(e.$$.fragment,s),a=!0)},o(s){transition_out(e.$$.fragment,s),a=!1},d(s){s&&(detach(t),detach(r)),destroy_component(e,s)}}}function create__5_slot(o){let e,t;function n(){return o[34](o[47])}return e=new Link$1({props:{menu:appObjectTypes.DatabaseObjectAppObject.createAppObjectMenu({...o[47].tableInfo,conid:o[0],database:o[1]}),onClick:n,$$slots:{default:[create_default_slot_2$7]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){o=r;const s={};a[0]&3|a[1]&65536&&(s.menu=appObjectTypes.DatabaseObjectAppObject.createAppObjectMenu({...o[47].tableInfo,conid:o[0],database:o[1]})),a[0]&3|a[1]&65536&&(s.onClick=n),a[1]&196608&&(s.$$scope={dirty:a,ctx:o}),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_1$7(o){let e,t,n,r,a,s,l;return t=new Link$1({props:{onClick:o[16](!0),$$slots:{default:[create_default_slot_5$4]},$$scope:{ctx:o}}}),r=new Link$1({props:{onClick:o[16](!1),$$slots:{default:[create_default_slot_4$4]},$$scope:{ctx:o}}}),s=new TableControl({props:{rows:o[3],columns:[{header:"",fieldName:"isChecked",slot:1},{header:"Source file",fieldName:"file",slot:4},{header:"Target table",fieldName:"table",slot:5},{header:"Operation",fieldName:"operation",slot:2},{header:"Match column",fieldName:"matchColumn1",slot:3}],$$slots:{5:[create__5_slot,({row:u})=>({47:u}),({row:u})=>[0,u?65536:0]],4:[create__4_slot,({row:u})=>({47:u}),({row:u})=>[0,u?65536:0]],3:[create__3_slot,({row:u})=>({47:u}),({row:u})=>[0,u?65536:0]],2:[create__2_slot_1,({row:u})=>({47:u}),({row:u})=>[0,u?65536:0]],1:[create__1_slot_1,({row:u})=>({47:u}),({row:u})=>[0,u?65536:0]]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=text(`
            |
            `),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),attr(e,"class","mb-2")},m(u,d){insert(u,e,d),mount_component(t,e,null),append(e,n),mount_component(r,e,null),insert(u,a,d),mount_component(s,u,d),l=!0},p(u,d){const f={};d[1]&131072&&(f.$$scope={dirty:d,ctx:u}),t.$set(f);const m={};d[1]&131072&&(m.$$scope={dirty:d,ctx:u}),r.$set(m);const h={};d[0]&8&&(h.rows=u[3]),d[0]&51|d[1]&196608&&(h.$$scope={dirty:d,ctx:u}),s.$set(h)},i(u){l||(transition_in(t.$$.fragment,u),transition_in(r.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(t.$$.fragment,u),transition_out(r.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&(detach(e),detach(a)),destroy_component(t),destroy_component(r),destroy_component(s,u)}}}function create__1_slot$2(o){let e,t,n,r,a;return t=new ObjectConfigurationControl({props:{title:"Configuration",$$slots:{default:[create_default_slot_6$2]},$$scope:{ctx:o}}}),r=new ObjectConfigurationControl({props:{title:"Imported files",$$slots:{default:[create_default_slot_1$7]},$$scope:{ctx:o}}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),create_component(r.$$.fragment),attr(e,"class","wrapper svelte-1p2rqwm")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),mount_component(r,e,null),a=!0},p(s,l){const u={};l[0]&4128|l[1]&131072&&(u.$$scope={dirty:l,ctx:s}),t.$set(u);const d={};l[0]&59|l[1]&131072&&(d.$$scope={dirty:l,ctx:s}),r.$set(d)},i(s){a||(transition_in(t.$$.fragment,s),transition_in(r.$$.fragment,s),a=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(r.$$.fragment,s),a=!1},d(s){s&&detach(e),destroy_component(t),destroy_component(r)}}}function create__2_slot$2(o){let e,t;return e=new SocketMessageView({props:{eventName:o[2]?`runner-info-${o[2]}`:null,executeNumber:o[6],showNoMessagesAlert:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&4&&(a.eventName=n[2]?`runner-info-${n[2]}`:null),r[0]&64&&(a.executeNumber=n[6]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$9(o){let e,t;return e=new VerticalSplitter({props:{initialValue:"70%",$$slots:{2:[create__2_slot$2],1:[create__1_slot$2]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&4223|r[1]&131072&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_toolstrip_slot(o){let e,t,n,r;return e=new ToolStripCommandButton({props:{command:"dataDuplicator.run"}}),n=new ToolStripCommandButton({props:{command:"dataDuplicator.kill"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_fragment$p(o){let e,t;return e=new ToolStripContainer({props:{$$slots:{toolstrip:[create_toolstrip_slot],default:[create_default_slot$9]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[0]&4223|r[1]&131072&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}globalThis&&globalThis.__awaiter;const getCurrentEditor=()=>getActiveComponent("DataDuplicatorTab");registerCommand({id:"dataDuplicator.run",category:"Data duplicator",name:"Import into DB",keyText:"F5 | CtrlOrCommand+Enter",toolbar:!0,isRelatedToTab:!0,icon:"icon run",testEnabled:()=>{var o;return(o=getCurrentEditor())===null||o===void 0?void 0:o.canRun()},onClick:()=>getCurrentEditor().run()});registerCommand({id:"dataDuplicator.kill",category:"Data duplicator",icon:"icon close",name:"Kill",toolbar:!0,isRelatedToTab:!0,testEnabled:()=>{var o;return(o=getCurrentEditor())===null||o===void 0?void 0:o.canKill()},onClick:()=>getCurrentEditor().kill()});const func$2=o=>({label:o.name,value:o.name}),func_6$1=o=>({label:o.columnName,value:o.columnName});function instance$p(o,e,t){let n,r,a,s,l,u,d,f,m=noop$1,h=()=>(m(),m=subscribe(r,$e=>t(4,f=$e)),r),p,g,b=noop$1,v=()=>(b(),b=subscribe(u,$e=>t(27,g=$e)),u),y,C=noop$1,E=()=>(C(),C=subscribe(n,$e=>t(40,y=$e)),n),A,k=noop$1,T=()=>(k(),k=subscribe(s,$e=>t(28,A=$e)),s),$,S=noop$1,I=()=>(S(),S=subscribe(a,$e=>t(12,$=$e)),a);o.$$.on_destroy.push(()=>m()),o.$$.on_destroy.push(()=>b()),o.$$.on_destroy.push(()=>C()),o.$$.on_destroy.push(()=>k()),o.$$.on_destroy.push(()=>S());var R=this&&this.__awaiter||function($e,Le,ze,re){function ge(Be){return Be instanceof ze?Be:new ze(function(Ze){Ze(Be)})}return new(ze||(ze=Promise))(function(Be,Ze){function Pe(je){try{Ce(re.next(je))}catch(pt){Ze(pt)}}function Ee(je){try{Ce(re.throw(je))}catch(pt){Ze(pt)}}function Ce(je){je.done?Be(je.value):ge(je.value).then(Pe,Ee)}Ce((re=re.apply($e,Le||[])).next())})},N,M;let{conid:F}=e,{database:D}=e,{tabid:x}=e,B=!1,K=null,U=0;const G=createActivator("DataDuplicatorTab",!0),W=useTimerLabel(),{editorState:q,editorValue:H,setEditorData:z}=useEditorData({tabid:x,onInitialData:$e=>{invalidateCommands()}});component_subscribe(o,q,$e=>t(5,p=$e));function Y($e){z(Le=>Object.assign(Object.assign({},Le),{tables:Object.assign(Object.assign({},Le==null?void 0:Le.tables),{[$e.name]:$e})}))}function V($e=!1){var Le,ze;const ge=getCurrentConfig().allowShellScripting||$e?new lib.ScriptWriter:new lib.ScriptWriterJson;return ge.dataDuplicator({connection:extractShellConnection(y,D),archive:p.value.archiveFolder,items:d.filter(Be=>Be.isChecked).map(Be=>({name:Be.name,operation:Be.operation,matchColumns:_.compact([Be.matchColumn1])})),options:{rollbackAfterFinish:!!(!((Le=p.value)===null||Le===void 0)&&Le.rollbackAfterFinish),skipRowsWithUnresolvedRefs:!!(!((ze=p.value)===null||ze===void 0)&&ze.skipRowsWithUnresolvedRefs)}}),ge.getScript()}function J(){return!!d.find($e=>$e.isChecked)&&!B}function Q(){return R(this,void 0,void 0,function*(){if(B)return;t(6,U+=1),t(25,B=!0);const $e=yield V();let Le=K;Le=(yield apiCall("runners/start",{script:$e})).runid,t(2,K=Le),W.start()})}function X($e){return $e?(apiOn(`runner-done-${$e}`,ie),()=>{apiOff(`runner-done-${$e}`,ie)}):()=>{}}const ie=()=>{t(25,B=!1),W.stop()};function ce(){return B}function de(){apiCall("runners/cancel",{runid:K}),W.stop()}const se=$e=>()=>{z(Le=>{var ze;const re=Object.assign({},Le==null?void 0:Le.tables);for(const ge of l)re[ge]=Object.assign(Object.assign({},(ze=Le==null?void 0:Le.tables)===null||ze===void 0?void 0:ze[ge]),{isChecked:$e});return Object.assign(Object.assign({},Le),{tables:re})})},me=$e=>{z(Le=>({...Le,archiveFolder:$e.detail}))},ue=$e=>{z(Le=>({...Le,rollbackAfterFinish:$e.target.checked}))},he=()=>{z($e=>{var Le;return{...$e,rollbackAfterFinish:!((Le=p.value)!=null&&Le.rollbackAfterFinish)}})},pe=$e=>{z(Le=>({...Le,skipRowsWithUnresolvedRefs:$e.target.checked}))},Oe=()=>{z($e=>{var Le;return{...$e,skipRowsWithUnresolvedRefs:!((Le=p.value)!=null&&Le.skipRowsWithUnresolvedRefs)}})},qe=$e=>{openNewTab({title:$e.pureName,icon:"img table",tabComponent:"TableDataTab",props:{schemaName:$e.schemaName,pureName:$e.pureName,conid:F,database:D,objectTypeField:"tables"}})},et=$e=>{var Le,ze;openNewTab({title:$e.file,icon:"img archive",tooltip:`${(Le=p.value)==null?void 0:Le.archiveFolder}
${$e.file}`,tabComponent:"ArchiveFileTab",props:{archiveFile:$e.file,archiveFolder:(ze=p.value)==null?void 0:ze.archiveFolder}})},Ue=($e,Le)=>{var ze;return((ze=Le.pureName)==null?void 0:ze.toUpperCase())==$e.name.toUpperCase()},fe=($e,Le)=>{Y({...$e,matchColumn1:Le.detail})},Ie=($e,Le)=>{Y({...$e,operation:Le.detail})},We=($e,Le)=>{Y({...$e,isChecked:Le.target.checked})};return o.$$set=$e=>{"conid"in $e&&t(0,F=$e.conid),"database"in $e&&t(1,D=$e.database),"tabid"in $e&&t(17,x=$e.tabid)},o.$$.update=()=>{o.$$.dirty[0]&1&&E(t(11,n=useConnectionInfo({conid:F}))),o.$$.dirty[0]&3&&h(t(10,r=useDatabaseInfo({conid:F,database:D}))),o.$$.dirty[0]&8388640&&T(t(8,s=useArchiveFiles({folder:t(23,N=p==null?void 0:p.value)===null||N===void 0?void 0:N.archiveFolder}))),o.$$.dirty[0]&285212688&&t(26,l=_.sortBy(_.intersectionBy(t(24,M=f==null?void 0:f.tables)===null||M===void 0?void 0:M.map($e=>$e.pureName),A==null?void 0:A.map($e=>$e.name),$e=>_.toUpper($e)))),o.$$.dirty[0]&33685504&&changeTab(x,$e=>Object.assign(Object.assign({},$e),{busy:B})),o.$$.dirty[0]&67108912&&t(3,d=l.map($e=>{var Le,ze,re,ge,Be,Ze,Pe,Ee,Ce,je,pt,wt;const ut=(ze=(Le=p==null?void 0:p.value)===null||Le===void 0?void 0:Le.tables)===null||ze===void 0?void 0:ze[$e],Ct=(re=ut==null?void 0:ut.isChecked)!==null&&re!==void 0?re:!0,xt=(ge=ut==null?void 0:ut.operation)!==null&&ge!==void 0?ge:"copy",ht=(Be=f==null?void 0:f.tables)===null||Be===void 0?void 0:Be.find(Ae=>{var Me;return((Me=Ae.pureName)===null||Me===void 0?void 0:Me.toUpperCase())==$e.toUpperCase()}),Rt=(je=(Ze=ut==null?void 0:ut.matchColumn1)!==null&&Ze!==void 0?Ze:(Ce=(Ee=(Pe=ht==null?void 0:ht.primaryKey)===null||Pe===void 0?void 0:Pe.columns)===null||Ee===void 0?void 0:Ee[0])===null||Ce===void 0?void 0:Ce.columnName)!==null&&je!==void 0?je:(wt=(pt=ht==null?void 0:ht.columns)===null||pt===void 0?void 0:pt[0])===null||wt===void 0?void 0:wt.columnName;return{name:$e,isChecked:Ct,operation:xt,matchColumn1:Rt,file:$e,table:ht!=null&&ht.schemaName?`${ht==null?void 0:ht.schemaName}.${ht==null?void 0:ht.pureName}`:ht==null?void 0:ht.pureName,schemaName:ht==null?void 0:ht.schemaName,pureName:ht==null?void 0:ht.pureName,tableInfo:ht}})),o.$$.dirty[0]&33554444&&invalidateCommands(),o.$$.dirty[0]&4&&v(t(7,u=useEffect(()=>X(K)))),o.$$.dirty[0]&134217728},I(t(9,a=useArchiveFolders())),[F,D,K,d,f,p,U,u,s,a,r,n,$,q,z,Y,se,x,G,J,Q,ce,de,N,M,B,l,g,A,me,ue,he,pe,Oe,qe,et,Ue,fe,Ie,We]}class DataDuplicatorTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$p,create_fragment$p,safe_not_equal,{conid:0,database:1,tabid:17,activator:18,canRun:19,run:20,canKill:21,kill:22},null,[-1,-1])}get activator(){return this.$$.ctx[18]}get canRun(){return this.$$.ctx[19]}get run(){return this.$$.ctx[20]}get canKill(){return this.$$.ctx[21]}get kill(){return this.$$.ctx[22]}}const DataDuplicatorTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:DataDuplicatorTab},Symbol.toStringTag,{value:"Module"})),ImportExportTab_svelte_svelte_type_style_lang="";function create_if_block$a(o){let e,t;return e=new LoadingInfo({props:{wrapper:!0,message:"Processing import/export ..."}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create__1_slot$1(o){let e,t,n,r;t=new ImportExportConfigurator({props:{uploadedFile:o[1],openedFile:o[2],previewReaderStore:o[10]}});let a=o[4]&&create_if_block$a();return{c(){e=element("div"),create_component(t.$$.fragment),n=space(),a&&a.c(),attr(e,"class","content svelte-nk47x3"),attr(e,"slot","1")},m(s,l){insert(s,e,l),mount_component(t,e,null),append(e,n),a&&a.m(e,null),r=!0},p(s,l){const u={};l&2&&(u.uploadedFile=s[1]),l&4&&(u.openedFile=s[2]),t.$set(u),s[4]?a?l&16&&transition_in(a,1):(a=create_if_block$a(),a.c(),transition_in(a,1),a.m(e,null)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(t.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(t.$$.fragment,s),transition_out(a),r=!1},d(s){s&&detach(e),destroy_component(t),a&&a.d()}}}function create_default_slot_5$3(o){let e,t;return e=new RunnerOutputFiles({props:{runnerId:o[3],executeNumber:o[5]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.runnerId=n[3]),r&32&&(a.executeNumber=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_4$3(o){let e,t;return e=new SocketMessageView({props:{eventName:o[3]?`runner-info-${o[3]}`:null,executeNumber:o[5],showNoMessagesAlert:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.eventName=n[3]?`runner-info-${n[3]}`:null),r&32&&(a.executeNumber=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$5(o){let e,t;return e=new PreviewDataGrid({props:{reader:o[9]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&512&&(a.reader=n[9]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$6(o){let e,t,n,r;return e=new FormTextField({props:{label:"Schedule",name:"schedule"}}),n=new FormTextField({props:{label:"Start variable index",name:"startVariableIndex"}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot_1$6(o){let e,t,n,r,a,s,l,u;return e=new WidgetColumnBarItem({props:{title:"Output files",name:"output",height:"20%",$$slots:{default:[create_default_slot_5$3]},$$scope:{ctx:o}}}),n=new WidgetColumnBarItem({props:{title:"Messages",name:"messages",$$slots:{default:[create_default_slot_4$3]},$$scope:{ctx:o}}}),a=new WidgetColumnBarItem({props:{title:"Preview",name:"preview",skip:!o[9],$$slots:{default:[create_default_slot_3$5]},$$scope:{ctx:o}}}),l=new WidgetColumnBarItem({props:{title:"Advanced configuration",name:"config",collapsed:!0,$$slots:{default:[create_default_slot_2$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),create_component(a.$$.fragment),s=space(),create_component(l.$$.fragment)},m(d,f){mount_component(e,d,f),insert(d,t,f),mount_component(n,d,f),insert(d,r,f),mount_component(a,d,f),insert(d,s,f),mount_component(l,d,f),u=!0},p(d,f){const m={};f&268435496&&(m.$$scope={dirty:f,ctx:d}),e.$set(m);const h={};f&268435496&&(h.$$scope={dirty:f,ctx:d}),n.$set(h);const p={};f&512&&(p.skip=!d[9]),f&268435968&&(p.$$scope={dirty:f,ctx:d}),a.$set(p);const g={};f&268435456&&(g.$$scope={dirty:f,ctx:d}),l.$set(g)},i(d){u||(transition_in(e.$$.fragment,d),transition_in(n.$$.fragment,d),transition_in(a.$$.fragment,d),transition_in(l.$$.fragment,d),u=!0)},o(d){transition_out(e.$$.fragment,d),transition_out(n.$$.fragment,d),transition_out(a.$$.fragment,d),transition_out(l.$$.fragment,d),u=!1},d(d){d&&(detach(t),detach(r),detach(s)),destroy_component(e,d),destroy_component(n,d),destroy_component(a,d),destroy_component(l,d)}}}function create__2_slot$1(o){let e,t;return e=new WidgetColumnBar({props:{$$slots:{default:[create_default_slot_1$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&268436008&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$8(o){let e,t;return e=new HorizontalSplitter({props:{initialValue:"70%",$$slots:{2:[create__2_slot$1],1:[create__1_slot$1]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&268436030&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$o(o){let e,t;return e=new FormProvider({props:{initialValues:{sourceStorageType:"database",targetStorageType:getDefaultFileFormat(o[7]).storageType,targetArchiveFolder:o[8],sourceArchiveFolder:o[8],...o[11](),...o[0]},$$slots:{default:[create_default_slot$8]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&385&&(a.initialValues={sourceStorageType:"database",targetStorageType:getDefaultFileFormat(n[7]).storageType,targetArchiveFolder:n[8],sourceArchiveFolder:n[8],...n[11](),...n[0]}),r&268436030&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$o(o,e,t){let n,r,a,s,l,u,d=noop$1,f=()=>(d(),d=subscribe(n,R=>t(14,u=R)),n),m,h;component_subscribe(o,extensions,R=>t(7,r=R)),component_subscribe(o,visibleWidgetSideBar,R=>t(15,a=R)),component_subscribe(o,selectedWidget,R=>t(16,s=R)),component_subscribe(o,currentArchive,R=>t(8,l=R)),component_subscribe(o,currentDatabase,R=>t(17,m=R)),o.$$.on_destroy.push(()=>d()),this&&this.__awaiter;let p=!1,g=0,b=null;const v=writable(null);component_subscribe(o,v,R=>t(9,h=R));let{tabid:y}=e,{initialValues:C}=e,{uploadedFile:E=void 0}=e,{openedFile:A=void 0}=e,{importToCurrentTarget:k=!1}=e;const T=createRef(null);useEditorData({tabid:y});function $(){var R;return k?m&&s!="archive"?{targetStorageType:"database",targetConnectionId:(R=m==null?void 0:m.connection)===null||R===void 0?void 0:R._id,targetDatabaseName:m==null?void 0:m.name}:l=="default"?{targetStorageType:"archive",targetArchiveFolder:`import-${hooks().format("YYYY-MM-DD-hh-mm-ss")}`}:{targetStorageType:"archive",targetArchiveFolder:l}:{}}function S(R){return R?(apiOn(`runner-done-${R}`,I),()=>{apiOff(`runner-done-${R}`,I)}):()=>{}}const I=()=>{t(4,p=!1),T.get()&&(apiCall("archive/refresh-folders",{}),apiCall("archive/refresh-files",{folder:T.get()}),set_store_value(currentArchive,l=T.get(),l),set_store_value(selectedWidget,s="archive",s),set_store_value(visibleWidgetSideBar,a=!0,a))};return o.$$set=R=>{"tabid"in R&&t(12,y=R.tabid),"initialValues"in R&&t(0,C=R.initialValues),"uploadedFile"in R&&t(1,E=R.uploadedFile),"openedFile"in R&&t(2,A=R.openedFile),"importToCurrentTarget"in R&&t(13,k=R.importToCurrentTarget)},o.$$.update=()=>{o.$$.dirty&8&&f(t(6,n=useEffect(()=>S(b)))),o.$$.dirty&16384},[C,E,A,b,p,g,n,r,l,h,v,$,y,k,u]}class ImportExportTab extends SvelteComponent{constructor(e){super(),init(this,e,instance$o,create_fragment$o,safe_not_equal,{tabid:12,initialValues:0,uploadedFile:1,openedFile:2,importToCurrentTarget:13})}}const ImportExportTab$1=Object.freeze(Object.defineProperty({__proto__:null,default:ImportExportTab},Symbol.toStringTag,{value:"Module"})),tabs={TableDataTab:TableDataTab$1,CollectionDataTab:CollectionDataTab$1,ViewDataTab:ViewDataTab$1,TableStructureTab:TableStructureTab$1,QueryTab:QueryTab$1,ShellTab:ShellTab$1,ArchiveFileTab:ArchiveFileTab$1,PluginTab:PluginTab$1,ChartTab:ChartTab$1,MarkdownEditorTab:MarkdownEditorTab$1,MarkdownViewTab:MarkdownViewTab$1,MarkdownPreviewTab:MarkdownPreviewTab$1,FavoriteEditorTab:FavoriteEditorTab$1,QueryDesignTab:QueryDesignTab$1,CommandListTab:CommandListTab$1,YamlEditorTab:YamlEditorTab$1,JsonEditorTab:JsonEditorTab$1,JsonLinesEditorTab:JsonLinesEditorTab$1,CompareModelTab:CompareModelTab$1,JsonTab:JsonTab$1,ChangelogTab:ChangelogTab$1,DiagramTab:DiagramTab$1,DbKeyDetailTab:DbKeyDetailTab$1,QueryDataTab:QueryDataTab$1,ConnectionTab:ConnectionTab$1,MapTab:MapTab$1,PerspectiveTab:PerspectiveTab$1,ServerSummaryTab:ServerSummaryTab$1,ProfilerTab:ProfilerTab$1,DataDuplicatorTab:DataDuplicatorTab$1,ImportExportTab:ImportExportTab$1};function findFreeNumber(o){return o.length==0?1:_.max(o)+1}async function openNewTab(o,e=void 0,t=void 0){const n=getOpenedTabs(),r=getActiveTab();let a=null;const{savedFile:s,savedFolder:l,savedFilePath:u}=o.props||{};(s||u)&&(a=n.find(h=>h.props&&h.tabComponent==o.tabComponent&&h.closedTime==null&&h.props.savedFile==s&&h.props.savedFolder==l&&h.props.savedFilePath==u));const{forceNewTab:d}=t||{},f=tabs[o.tabComponent];if(!a&&!d&&f&&f.matchingProps){const h=stableStringify(_.pick(o.props||{},f.matchingProps));a=n.find(p=>p.props&&p.tabComponent==o.tabComponent&&p.closedTime==null&&stableStringify(_.pick(p.props||{},f.matchingProps))==h)}if(a){openedTabs.update(h=>setSelectedTabFunc(h,a.tabid));return}if(o.title.endsWith("#")){const h=n.filter(p=>p.closedTime==null&&p.title&&p.title.startsWith(o.title)).map(p=>parseInt(p.title.substring(o.title.length)));o.title=`${o.title}${findFreeNumber(h)}`}const m=uuidv1();if(e)for(const h of _.keys(e))h=="editor"||h=="rows"?await localforage.setItem(`tabdata_${h}_${m}`,e[h]):localStorage.setItem(`tabdata_${h}_${m}`,JSON.stringify(e[h]));openedTabs.update(h=>{const p=getTabDbKey(o),g=sortTabs(h.filter(v=>v.closedTime==null)),b={...o,tabid:m};if(p!=null){const v=_.findLastIndex(g,y=>getTabDbKey(y)==p);v>=0?g.splice(v+1,0,b):g.push(b)}else g.push(b);return[...(h||[]).map(v=>({...v,selected:!1,tabOrder:_.findIndex(g,y=>y.tabid==v.tabid)})),{...o,tabid:m,selected:!0,multiTabIndex:(o==null?void 0:o.multiTabIndex)??(r==null?void 0:r.multiTabIndex)??0,tabOrder:_.findIndex(g,v=>v.tabid==m)}]})}async function duplicateTab(o){await saveAllPendingEditorData();let e=o.title;const t=e.match(/^(.*#)[\d]+$/);t&&(e=t[1]);const n=/^tabdata_([^_]+)_([^_]+)$/,r={};for(let a=0;a<localStorage.length;a++){const s=localStorage.key(a),l=s.match(n);l&&l[2]==o.tabid&&(r[l[1]]=JSON.parse(localStorage.getItem(s)))}for(const a of await localforage.keys()){const s=a.match(n);s&&s[2]==o.tabid&&(r[s[1]]=await localforage.getItem(a))}openNewTab({..._.omit(o,["tabid"]),title:e},r,{forceNewTab:!0})}function getTabDbKey(o){return o.tabComponent=="ConnectionTab"?"connections.":o.props&&o.props.conid&&o.props.database?`database://${o.props.database}-${o.props.conid}`:o.props&&o.props.conid?`server://${o.props.conid}`:o.props&&o.props.archiveFolder?`archive://${o.props.archiveFolder}`:null}function sortTabs(o){return _.sortBy(o,[e=>e.tabOrder||0,e=>getTabDbKey(e),"title","tabid"])}function groupTabs(o){const e=[];for(const t of sortTabs(o)){const n=e[e.length-1];n&&t.tabDbKey&&n.tabDbKey==t.tabDbKey?n.tabs.push(t):e.push({tabDbKey:t.tabDbKey,tabDbName:t.tabDbName,tabs:[t],grpid:t.tabid})}return e}function create_fragment$n(o){var a,s;let e,t;const n=[o[12],{data:o[0]},{title:getConnectionLabel(o[0],{showUnsaved:!0})},{icon:o[0].singleDatabase?"img database":"img server"},{isBold:o[0].singleDatabase?_.get(o[8],"connection._id")==o[0]._id&&_.get(o[8],"name")==o[0].defaultDatabase:_.get(o[8],"connection._id")==o[0]._id},{statusIcon:o[2]||o[5]},{statusTitle:o[3]||o[6]},{statusIconBefore:o[0].isReadOnly?"icon lock":null},{extInfo:o[4]},{colorMark:((a=o[1])==null?void 0:a.connectionColorFactory)&&((s=o[1])==null?void 0:s.connectionColorFactory({conid:o[0]._id}))},{menu:o[11]}];let r={};for(let l=0;l<n.length;l+=1)r=assign(r,n[l]);return e=new AppObjectCore({props:r}),e.$on("click",o[10]),e.$on("click",o[15]),e.$on("expand",o[16]),e.$on("dblclick",o[9]),e.$on("middleclick",o[17]),{c(){create_component(e.$$.fragment)},m(l,u){mount_component(e,l,u),t=!0},p(l,[u]){var f,m;const d=u&6527?get_spread_update(n,[u&4096&&get_spread_object(l[12]),u&1&&{data:l[0]},u&1&&{title:getConnectionLabel(l[0],{showUnsaved:!0})},u&1&&{icon:l[0].singleDatabase?"img database":"img server"},u&257&&{isBold:l[0].singleDatabase?_.get(l[8],"connection._id")==l[0]._id&&_.get(l[8],"name")==l[0].defaultDatabase:_.get(l[8],"connection._id")==l[0]._id},u&36&&{statusIcon:l[2]||l[5]},u&72&&{statusTitle:l[3]||l[6]},u&1&&{statusIconBefore:l[0].isReadOnly?"icon lock":null},u&16&&{extInfo:l[4]},u&3&&{colorMark:((f=l[1])==null?void 0:f.connectionColorFactory)&&((m=l[1])==null?void 0:m.connectionColorFactory({conid:l[0]._id}))},u&2048&&{menu:l[11]}]):{};e.$set(d)},i(l){t||(transition_in(e.$$.fragment,l),t=!0)},o(l){transition_out(e.$$.fragment,l),t=!1},d(l){destroy_component(e,l)}}}const extractKey$2=o=>o._id,createMatcher=o=>e=>{const{_id:t,displayName:n,server:r}=o,a=getLocalStorage(`database_list_${t}`)||[];return lib.filterName(e,n,r,...a.map(s=>s.name))},createChildMatcher=o=>e=>{if(!e)return!1;const{_id:t}=o,n=getLocalStorage(`database_list_${t}`)||[];return lib.filterName(e,...n.map(r=>r.name))};function openConnection(o){o.singleDatabase?(currentDatabase.set({connection:o,name:o.defaultDatabase}),apiCall("database-connections/refresh",{conid:o._id,database:o.defaultDatabase,keepOpen:!0}),openedSingleDatabaseConnections.update(e=>_.uniq([...e,o._id]))):(openedConnections.update(e=>_.uniq([...e,o._id])),apiCall("server-connections/refresh",{conid:o._id,keepOpen:!0}),expandedConnections.update(e=>_.uniq([...e,o._id])))}function disconnectServerConnection(o,e=!0){var a;const t=s=>{var l;return((l=s.props)==null?void 0:l.conid)==o&&s.tabComponent!="ConnectionTab"&&s.closedTime==null};if(e){const s=getOpenedTabs().filter(t).length;if(s>0){showModal(ConfirmModal,{message:`Closing connection will close ${s} opened tabs, continue?`,onConfirm:()=>disconnectServerConnection(o,!1)});return}}const n=getElectron(),r=getCurrentDatabase();openedConnections.update(s=>s.filter(l=>l!=o)),removeVolatileMapping(o),n&&apiCall("server-connections/disconnect",{conid:o}),((a=r==null?void 0:r.connection)==null?void 0:a._id)==o&&(n&&apiCall("database-connections/disconnect",{conid:o,database:r.name}),currentDatabase.set(null)),closeMultipleTabs(t)}function instance$n(o,e,t){let n;const r=["data","passProps"];let a=compute_rest_props(e,r),s,l,u,d,f=noop$1,m=()=>(f(),f=subscribe(n,F=>t(19,d=F)),n),h;component_subscribe(o,openedConnections,F=>t(13,s=F)),component_subscribe(o,extensions,F=>t(14,l=F)),component_subscribe(o,openedSingleDatabaseConnections,F=>t(18,u=F)),component_subscribe(o,currentDatabase,F=>t(8,h=F)),o.$$.on_destroy.push(()=>f());var p=this&&this.__awaiter||function(F,D,x,B){function K(U){return U instanceof x?U:new x(function(G){G(U)})}return new(x||(x=Promise))(function(U,G){function W(z){try{H(B.next(z))}catch(Y){G(Y)}}function q(z){try{H(B.throw(z))}catch(Y){G(Y)}}function H(z){z.done?U(z.value):K(z.value).then(W,q)}H((B=B.apply(F,D||[])).next())})};let{data:g}=e,{passProps:b}=e,v=null,y=null,C=null,E=null,A=null;const k=()=>{openConnection(g)},T=()=>{openNewTab({title:getConnectionLabel(g),icon:"img connection",tabComponent:"ConnectionTab",props:{conid:g._id}})},$=()=>p(void 0,void 0,void 0,function*(){if(getCurrentConfig().runAsPortal){yield tick(),k();return}if(u.includes(g._id)){currentDatabase.set({connection:g,name:g.defaultDatabase});return}s.includes(g._id)||(getCurrentSettings()["defaultAction.connectionClick"]=="openDetails"?T():(yield tick(),k()))}),S=()=>{showModal(ImportDatabaseDumpModal,{connection:g})},I=()=>{var F;const D=l.drivers.find(z=>z.engine==g.engine),x=getCurrentConfig(),B=()=>{apiCall("server-connections/refresh",{conid:g._id})},K=()=>{disconnectServerConnection(g._id)},U=()=>{showModal(ConfirmModal,{message:`Really delete connection ${getConnectionLabel(g)}?`,onConfirm:()=>apiCall("connections/delete",g)})},G=()=>{apiCall("connections/save",Object.assign(Object.assign({},g),{_id:void 0,displayName:`${getConnectionLabel(g)} - copy`}))},W=()=>{showModal(InputTextModal,{header:"Create database",value:"newdb",label:"Database name",onConfirm:z=>apiCall("server-connections/create-database",{conid:g._id,name:z})})},q=()=>{openNewTab({title:getConnectionLabel(g),icon:"img server",tabComponent:"ServerSummaryTab",props:{conid:g._id}})},H=()=>{const z=`${getConnectionLabel(g)}`;openNewTab({title:"Query #",icon:"img sql-file",tooltip:z,tabComponent:"QueryTab",props:{conid:g._id}})};return[x.runAsPortal==!1&&[{text:s.includes(g._id)?"View details":"Edit",onClick:T},!s.includes(g._id)&&{text:"Delete",onClick:U},{text:"Duplicate",onClick:G}],!g.singleDatabase&&[!s.includes(g._id)&&{text:"Connect",onClick:k},{onClick:H,text:"New query",isNewQuery:!0},s.includes(g._id)&&g.status&&{text:"Refresh",onClick:B},s.includes(g._id)&&{text:"Disconnect",onClick:K},s.includes(g._id)&&(D==null?void 0:D.supportedCreateDatabase)&&!g.isReadOnly&&{text:"Create database",onClick:W},(D==null?void 0:D.supportsServerSummary)&&{text:"Server summary",onClick:q}],g.singleDatabase&&[{divider:!0},getDatabaseMenuItems(g,g.defaultDatabase,l,h,d,u)],((F=D==null?void 0:D.databaseEngineTypes)===null||F===void 0?void 0:F.includes("sql"))&&{onClick:S,text:"Restore/import SQL dump"}]};function R(F){bubble.call(this,o,F)}function N(F){bubble.call(this,o,F)}const M=()=>{_.flattenDeep(I()).find(F=>F.isNewQuery).onClick()};return o.$$set=F=>{e=assign(assign({},e),exclude_internal_props(F)),t(12,a=compute_rest_props(e,r)),"data"in F&&t(0,g=F.data),"passProps"in F&&t(1,b=F.passProps)},o.$$.update=()=>{if(o.$$.dirty&16385)if(l.drivers.find(F=>F.engine==g.engine)){const F=(g.engine||"").match(/^([^@]*)@/);t(4,C=F?F[1]:g.engine),t(5,E=null),t(6,A=null)}else t(4,C=g.engine),t(5,E="img warn"),t(6,A=`Engine driver ${g.engine} not found, review installed plugins and change engine in edit connection dialog`);if(o.$$.dirty&8193){const{_id:F,status:D}=g;s.includes(F)?(D?D.name=="pending"?t(2,v="icon loading"):D.name=="ok"?t(2,v="img ok"):t(2,v="img error"):t(2,v="icon loading"),D&&D.name=="error"&&t(3,y=D.message)):(t(2,v=null),t(3,y=null))}},m(t(7,n=useUsedApps())),[g,b,v,y,C,E,A,n,h,k,$,I,a,s,l,R,N,M]}class ConnectionAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$n,create_fragment$n,safe_not_equal,{data:0,passProps:1})}}const connectionAppObject=Object.freeze(Object.defineProperty({__proto__:null,createChildMatcher,createMatcher,default:ConnectionAppObject,disconnectServerConnection,extractKey:extractKey$2,openConnection},Symbol.toStringTag,{value:"Module"}));function create_fragment$m(o){let e,t;return e=new AppObjectList({props:{list:_.sortBy((o[4]||[]).filter(o[5]),func_1$1).map(o[6]),module:databaseAppObject,passProps:o[2]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&19&&(a.list=_.sortBy((n[4]||[]).filter(n[5]),func_1$1).map(n[6])),r&4&&(a.passProps=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func_1$1=o=>o.sortOrder??o.name;function instance$m(o,e,t){let n,r,a=noop$1,s=()=>(a(),a=subscribe(n,h=>t(4,r=h)),n);o.$$.on_destroy.push(()=>a());let{filter:l}=e,{data:u}=e,{passProps:d}=e;const f=h=>lib.filterName(l,h.name),m=h=>({...h,connection:u});return o.$$set=h=>{"filter"in h&&t(0,l=h.filter),"data"in h&&t(1,u=h.data),"passProps"in h&&t(2,d=h.passProps)},o.$$.update=()=>{o.$$.dirty&2&&s(t(3,n=useDatabaseList({conid:u._id})))},[l,u,d,n,r,f,m]}class SubDatabaseList extends SvelteComponent{constructor(e){super(),init(this,e,instance$m,create_fragment$m,safe_not_equal,{filter:0,data:1,passProps:2})}}const ConnectionList_svelte_svelte_type_style_lang="";function create_if_block_2$3(o){let e,t,n,r;return e=new InlineButton({props:{title:"Add new connection",$$slots:{default:[create_default_slot_5$2]},$$scope:{ctx:o}}}),e.$on("click",o[22]),n=new InlineButton({props:{title:"Add new connection folder",$$slots:{default:[create_default_slot_4$2]},$$scope:{ctx:o}}}),n.$on("click",o[23]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s[1]&16&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s[1]&16&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot_5$2(o){let e,t;return e=new FontIcon({props:{icon:"icon plus-thick"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_4$2(o){let e,t;return e=new FontIcon({props:{icon:"icon add-folder"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3$4(o){let e,t;return e=new FontIcon({props:{icon:"icon refresh"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$5(o){var b;let e,t,n,r,a,s,l,u,d;function f(v){o[20](v)}let m={placeholder:"Search connection or database"};o[2]!==void 0&&(m.value=o[2]),e=new SearchInput({props:m}),binding_callbacks.push(()=>bind(e,"value",f));function h(v){o[21](v)}let p={};o[2]!==void 0&&(p.filter=o[2]),r=new CloseSearchButton({props:p}),binding_callbacks.push(()=>bind(r,"filter",h));let g=((b=o[5]["new.connection"])==null?void 0:b.enabled)&&create_if_block_2$3(o);return u=new InlineButton({props:{title:"Refresh connection list",$$slots:{default:[create_default_slot_3$4]},$$scope:{ctx:o}}}),u.$on("click",o[12]),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),s=space(),g&&g.c(),l=space(),create_component(u.$$.fragment)},m(v,y){mount_component(e,v,y),insert(v,n,y),mount_component(r,v,y),insert(v,s,y),g&&g.m(v,y),insert(v,l,y),mount_component(u,v,y),d=!0},p(v,y){var k;const C={};!t&&y[0]&4&&(t=!0,C.value=v[2],add_flush_callback(()=>t=!1)),e.$set(C);const E={};!a&&y[0]&4&&(a=!0,E.filter=v[2],add_flush_callback(()=>a=!1)),r.$set(E),(k=v[5]["new.connection"])!=null&&k.enabled?g?(g.p(v,y),y[0]&32&&transition_in(g,1)):(g=create_if_block_2$3(v),g.c(),transition_in(g,1),g.m(l.parentNode,l)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros());const A={};y[1]&16&&(A.$$scope={dirty:y,ctx:v}),u.$set(A)},i(v){d||(transition_in(e.$$.fragment,v),transition_in(r.$$.fragment,v),transition_in(g),transition_in(u.$$.fragment,v),d=!0)},o(v){transition_out(e.$$.fragment,v),transition_out(r.$$.fragment,v),transition_out(g),transition_out(u.$$.fragment,v),d=!1},d(v){v&&(detach(n),detach(s),detach(l)),destroy_component(e,v),destroy_component(r,v),g&&g.d(v),destroy_component(u,v)}}}function create_if_block_1$6(o){let e;return{c(){e=element("div"),attr(e,"class","br svelte-hcq8xe")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block$9(o){let e,t;return e=new LargeButton({props:{icon:"icon new-connection",fillHorizontal:!0,$$slots:{default:[create_default_slot_1$5]},$$scope:{ctx:o}}}),e.$on("click",o[32]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r[1]&16&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$5(o){let e;return{c(){e=text("Add new connection")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot$7(o){var m,h,p,g;let e,t,n,r,a,s=o[1]&&!o[1].find(func$1)&&o[0].length==0&&((m=o[5]["new.connection"])==null?void 0:m.enabled)&&!o[9].find(func_1),l,u;e=new AppObjectList({props:{list:_.sortBy(o[4],o[24]),module:connectionAppObject,subItemsComponent:SubDatabaseList,expandOnClick:!0,isExpandable:o[25],filter:o[2],passProps:{connectionColorFactory:o[6],showPinnedInsteadOfUnpin:!0},getIsExpanded:o[26],setIsExpanded:o[27],groupIconFunc:chevronExpandIcon,groupFunc:func_6,expandIconFunc:plusExpandIcon,onDropOnGroup:o[13],emptyGroupNames:o[8],sortGroups:!0,groupContextMenu:o[15],collapsedGroupNames:collapsedConnectionGroupNames}});let d=(((h=o[4])==null?void 0:h.length)>0&&((p=o[3])==null?void 0:p.length)>0||o[8].length>0&&((g=o[3])==null?void 0:g.length)>0)&&create_if_block_1$6();r=new AppObjectList({props:{list:_.sortBy(o[3],o[28]),module:connectionAppObject,subItemsComponent:SubDatabaseList,expandOnClick:!0,isExpandable:o[29],filter:o[2],passProps:{connectionColorFactory:o[6],showPinnedInsteadOfUnpin:!0},getIsExpanded:o[30],setIsExpanded:o[31]}});let f=s&&create_if_block$9(o);return{c(){create_component(e.$$.fragment),t=space(),d&&d.c(),n=space(),create_component(r.$$.fragment),a=space(),f&&f.c(),l=empty()},m(b,v){mount_component(e,b,v),insert(b,t,v),d&&d.m(b,v),insert(b,n,v),mount_component(r,b,v),insert(b,a,v),f&&f.m(b,v),insert(b,l,v),u=!0},p(b,v){var E,A,k,T;const y={};v[0]&16&&(y.list=_.sortBy(b[4],b[24])),v[0]&1&&(y.isExpandable=b[25]),v[0]&4&&(y.filter=b[2]),v[0]&64&&(y.passProps={connectionColorFactory:b[6],showPinnedInsteadOfUnpin:!0}),v[0]&128&&(y.getIsExpanded=b[26]),v[0]&256&&(y.emptyGroupNames=b[8]),e.$set(y),((E=b[4])==null?void 0:E.length)>0&&((A=b[3])==null?void 0:A.length)>0||b[8].length>0&&((k=b[3])==null?void 0:k.length)>0?d||(d=create_if_block_1$6(),d.c(),d.m(n.parentNode,n)):d&&(d.d(1),d=null);const C={};v[0]&8&&(C.list=_.sortBy(b[3],b[28])),v[0]&1&&(C.isExpandable=b[29]),v[0]&4&&(C.filter=b[2]),v[0]&64&&(C.passProps={connectionColorFactory:b[6],showPinnedInsteadOfUnpin:!0}),v[0]&128&&(C.getIsExpanded=b[30]),r.$set(C),v[0]&547&&(s=b[1]&&!b[1].find(func$1)&&b[0].length==0&&((T=b[5]["new.connection"])==null?void 0:T.enabled)&&!b[9].find(func_1)),s?f?(f.p(b,v),v[0]&547&&transition_in(f,1)):(f=create_if_block$9(b),f.c(),transition_in(f,1),f.m(l.parentNode,l)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros())},i(b){u||(transition_in(e.$$.fragment,b),transition_in(r.$$.fragment,b),transition_in(f),u=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(r.$$.fragment,b),transition_out(f),u=!1},d(b){b&&(detach(t),detach(n),detach(a),detach(l)),destroy_component(e,b),d&&d.d(b),destroy_component(r,b),f&&f.d(b)}}}function create_fragment$l(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_2$5]},$$scope:{ctx:o}}}),n=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot$7]},$$scope:{ctx:o}}}),n.$on("drop",o[33]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s[0]&36|s[1]&16&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s[0]&1023|s[1]&16&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}const func$1=o=>!o.unsaved,func_1=o=>{var e;return!o.closedTime&&o.tabComponent=="ConnectionTab"&&!((e=o.props)!=null&&e.conid)},func_6=o=>o.parent;function instance$l(o,e,t){let n,r,a,s,l,u,d,f,m,h,p,g,b;component_subscribe(o,openedConnections,H=>t(0,l=H)),component_subscribe(o,openedSingleDatabaseConnections,H=>t(18,u=H)),component_subscribe(o,commandsCustomized,H=>t(5,m=H)),component_subscribe(o,expandedConnections,H=>t(7,p=H)),component_subscribe(o,emptyConnectionGroupNames,H=>t(8,g=H)),component_subscribe(o,openedTabs,H=>t(9,b=H));var v=this&&this.__awaiter||function(H,z,Y,V){function J(Q){return Q instanceof Y?Q:new Y(function(X){X(Q)})}return new(Y||(Y=Promise))(function(Q,X){function ie(se){try{de(V.next(se))}catch(me){X(me)}}function ce(se){try{de(V.throw(se))}catch(me){X(me)}}function de(se){se.done?Q(se.value):J(se.value).then(ie,ce)}de((V=V.apply(H,z||[])).next())})};const y=useConnectionList();component_subscribe(o,y,H=>t(1,d=H));const C=useServerStatus();component_subscribe(o,C,H=>t(19,f=H));let E="";const A=()=>{for(const H of l)apiCall("server-connections/refresh",{conid:H})},k=(H,z)=>{const Y=lib.safeJsonParse(H);Y!=null&&Y._id&&apiCall("connections/update",{_id:Y==null?void 0:Y._id,values:{parent:z}})},T=useConnectionColorFactory(3);component_subscribe(o,T,H=>t(6,h=H));function $(H){return[{text:"Rename",onClick:()=>{showModal(InputTextModal,{value:H,label:"New folder name",header:"Rename folder",onConfirm:V=>v(this,void 0,void 0,function*(){emptyConnectionGroupNames.update(J=>_.uniq(J.map(Q=>Q==H?V:Q))),apiCall("connections/batch-change-folder",{folder:H,newFolder:V})})})}},{text:"Delete",onClick:()=>{showModal(ConfirmModal,{message:`Really delete folder ${H}? Connections in folder will be moved into root folder.`,onConfirm:()=>{emptyConnectionGroupNames.update(V=>V.filter(J=>J!=H)),apiCall("connections/batch-change-folder",{folder:H,newFolder:""})}})}}]}function S(H){E=H,t(2,E)}function I(H){E=H,t(2,E)}const R=()=>runCommand("new.connection"),N=()=>runCommand("new.connection.folder"),M=H=>(getConnectionLabel(H)||"").toUpperCase(),F=H=>l.includes(H._id)&&!H.singleDatabase,D=H=>p.includes(H._id)&&!H.singleDatabase,x=(H,z)=>{expandedConnections.update(Y=>z?[...Y,H._id]:Y.filter(V=>V!=H._id))},B=H=>(getConnectionLabel(H)||"").toUpperCase(),K=H=>l.includes(H._id)&&!H.singleDatabase,U=H=>p.includes(H._id)&&!H.singleDatabase,G=(H,z)=>{expandedConnections.update(Y=>z?[...Y,H._id]:Y.filter(V=>V!=H._id))},W=()=>runCommand("new.connection"),q=H=>{var z=H.dataTransfer.getData("app_object_drag_data");z&&k(z,"")};return o.$$.update=()=>{o.$$.dirty[0]&524290&&t(17,n=d&&f?d.map(H=>Object.assign(Object.assign({},H),{status:f[getVolatileRemapping(H._id)]})):d),o.$$.dirty[0]&393217&&t(16,r=n==null?void 0:n.filter(H=>!H.unsaved||l.includes(H._id)||u.includes(H._id))),o.$$.dirty[0]&65536&&t(4,a=r?r==null?void 0:r.filter(H=>H.parent!==void 0&&H.parent!==null&&H.parent.length!==0):[]),o.$$.dirty[0]&65536&&t(3,s=r?r==null?void 0:r.filter(H=>H.parent===void 0||H.parent===null||H.parent.length===0):[])},[l,d,E,s,a,m,h,p,g,b,y,C,A,k,T,$,r,n,u,f,S,I,R,N,M,F,D,x,B,K,U,G,W,q]}class ConnectionList extends SvelteComponent{constructor(e){super(),init(this,e,instance$l,create_fragment$l,safe_not_equal,{},null,[-1,-1])}}const ConnectionList$1=Object.freeze(Object.defineProperty({__proto__:null,default:ConnectionList},Symbol.toStringTag,{value:"Module"}));function create_if_block$8(o){let e,t,n,r;const a=[create_if_block_1$5,create_else_block$2],s=[];function l(u,d){return u[0].objectTypeField?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_else_block$2(o){let e,t;const n=[o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new DatabaseAppObject({props:r}),e.$on("dragstart",o[8]),e.$on("dragenter",o[9]),e.$on("dragend",o[10]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_if_block_1$5(o){let e,t;const n=[o[4]];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new DatabaseObjectAppObject({props:r}),e.$on("dragstart",o[5]),e.$on("dragenter",o[6]),e.$on("dragend",o[7]),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&16?get_spread_update(n,[get_spread_object(a[4])]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$k(o){let e,t,n=o[0]&&create_if_block$8(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,[a]){r[0]?n?(n.p(r,a),a&1&&transition_in(n,1)):(n=create_if_block$8(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}const extractKey$1=o=>o.objectTypeField?`${o.objectTypeField}||${o.schemaName}||${o.pureName}`:o.connection._id;function dragExchange(o,e,t,n,r){if(!r(o,e)){const a=_.findIndex(t,l=>r(l,o)),s=_.findIndex(t,l=>r(l,e));if(a>=0&&s>=0&&a!=s){const l=[...t],u=l[a];l[a]=l[s],l[s]=u,n(l)}}}function instance$k(o,e,t){let n,r,a;component_subscribe(o,draggedPinnedObject,p=>t(1,n=p)),component_subscribe(o,pinnedTables,p=>t(2,r=p)),component_subscribe(o,pinnedDatabases,p=>t(3,a=p));let{data:s}=e;const l=()=>{set_store_value(draggedPinnedObject,n=s,n)},u=p=>{dragExchange(n,s,r,g=>set_store_value(pinnedTables,r=g,r),(g,b)=>(g==null?void 0:g.pureName)==(b==null?void 0:b.pureName)&&(g==null?void 0:g.schemaName)==(b==null?void 0:b.schemaName))},d=()=>{set_store_value(draggedPinnedObject,n=null,n)},f=()=>{set_store_value(draggedPinnedObject,n=s,n)},m=p=>{dragExchange(n,s,a,g=>set_store_value(pinnedDatabases,a=g,a),(g,b)=>{var v,y;return(g==null?void 0:g.name)==(b==null?void 0:b.name)&&((v=g==null?void 0:g.connection)==null?void 0:v._id)==((y=b==null?void 0:b.connection)==null?void 0:y._id)})},h=()=>{set_store_value(draggedPinnedObject,n=null,n)};return o.$$set=p=>{t(4,e=assign(assign({},e),exclude_internal_props(p))),"data"in p&&t(0,s=p.data)},e=exclude_internal_props(e),[s,n,r,a,e,l,u,d,f,m,h]}class PinnedAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$k,create_fragment$k,safe_not_equal,{data:0})}}const pinnedAppObject=Object.freeze(Object.defineProperty({__proto__:null,default:PinnedAppObject,extractKey:extractKey$1},Symbol.toStringTag,{value:"Module"}));function create_default_slot$6(o){let e,t;return e=new AppObjectList({props:{list:[..._.compact(o[1]),..._.compact(o[0])],module:pinnedAppObject,passProps:{connectionColorFactory:o[2]}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&3&&(a.list=[..._.compact(n[1]),..._.compact(n[0])]),r&4&&(a.passProps={connectionColorFactory:n[2]}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$j(o){let e,t;return e=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot$6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&71&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$j(o,e,t){let n,r,a,s,l;component_subscribe(o,currentDatabase,d=>t(4,r=d)),component_subscribe(o,pinnedTables,d=>t(5,a=d)),component_subscribe(o,pinnedDatabases,d=>t(1,s=d));const u=useConnectionColorFactory(3);return component_subscribe(o,u,d=>t(2,l=d)),o.$$.update=()=>{o.$$.dirty&48&&t(0,n=a.filter(d=>{var f;return(d==null?void 0:d.conid)==((f=r==null?void 0:r.connection)===null||f===void 0?void 0:f._id)&&(d==null?void 0:d.database)==(r==null?void 0:r.name)}))},[n,s,l,u,r,a]}class PinnedObjectsList extends SvelteComponent{constructor(e){super(),init(this,e,instance$j,create_fragment$j,safe_not_equal,{})}}const PinnedObjectsList$1=Object.freeze(Object.defineProperty({__proto__:null,default:PinnedObjectsList},Symbol.toStringTag,{value:"Module"}));function create_fragment$i(o){let e,t;const n=[o[3],{data:o[0]},{title:o[0].columnName},{extInfo:o[1]},{icon:getColumnIcon(o[0],!0)},{menu:o[2]},{disableHover:!0}];let r={};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new AppObjectCore({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,[s]){const l=s&15?get_spread_update(n,[s&8&&get_spread_object(a[3]),s&1&&{data:a[0]},s&1&&{title:a[0].columnName},s&2&&{extInfo:a[1]},s&1&&{icon:getColumnIcon(a[0],!0)},s&4&&{menu:a[2]},n[6]]):{};e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}const extractKey=({columnName:o})=>o;function instance$i(o,e,t){let n;const r=["data"];let a=compute_rest_props(e,r),{data:s}=e;function l(){renameDatabaseObjectDialog(s.conid,s.database,s.columnName,(f,m)=>{const p=f.tables.find(g=>g.schemaName==s.schemaName&&g.pureName==s.pureName).columns.find(g=>g.columnName==s.columnName);p.columnName=m})}function u(){alterDatabaseDialog(s.conid,s.database,f=>{const m=f.tables.find(h=>h.schemaName==s.schemaName&&h.pureName==s.pureName);_.remove(m.columns,h=>h.columnName==s.columnName)})}function d(){return[{text:"Rename column",onClick:l},{text:"Drop column",onClick:u}]}return o.$$set=f=>{e=assign(assign({},e),exclude_internal_props(f)),t(3,a=compute_rest_props(e,r)),"data"in f&&t(0,s=f.data)},o.$$.update=()=>{o.$$.dirty&1&&t(1,n=s.foreignKey?`${s.dataType} -> ${s.foreignKey.refTableName}`:s.dataType)},[s,n,d,a]}class ColumnAppObject extends SvelteComponent{constructor(e){super(),init(this,e,instance$i,create_fragment$i,safe_not_equal,{data:0})}}const columnAppObject=Object.freeze(Object.defineProperty({__proto__:null,default:ColumnAppObject,extractKey},Symbol.toStringTag,{value:"Module"}));function create_fragment$h(o){let e,t;return e=new AppObjectList({props:{list:(o[0].columns||[]).map(o[1]),module:columnAppObject}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.list=(n[0].columns||[]).map(n[1])),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$h(o,e,t){let{data:n}=e;const r=a=>({...n,...a,foreignKey:lib.findForeignKeyForColumn(n,a)});return o.$$set=a=>{"data"in a&&t(0,n=a.data)},[n,r]}class SubColumnParamList extends SvelteComponent{constructor(e){super(),init(this,e,instance$h,create_fragment$h,safe_not_equal,{data:0})}}function create_else_block$1(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_7$1]},$$scope:{ctx:o}}}),n=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot_6$1]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&16777232&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&16779359&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_if_block_1$4(o){let e,t;return e=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot_2$4]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16777250&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$7(o){let e,t;return e=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot$5]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&16779264&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_8(o){let e,t;return e=new FontIcon({props:{icon:"icon refresh"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_7$1(o){let e,t,n,r,a,s,l,u,d,f;function m(b){o[20](b)}let h={placeholder:"Search in tables, objects, # prefix in columns"};o[4]!==void 0&&(h.value=o[4]),e=new SearchInput({props:h}),binding_callbacks.push(()=>bind(e,"value",m));function p(b){o[21](b)}let g={};return o[4]!==void 0&&(g.filter=o[4]),r=new CloseSearchButton({props:g}),binding_callbacks.push(()=>bind(r,"filter",p)),l=new DropDownButton({props:{icon:"icon plus-thick",menu:o[13]}}),d=new InlineButton({props:{title:"Refresh database connection and object list",$$slots:{default:[create_default_slot_8]},$$scope:{ctx:o}}}),d.$on("click",o[12]),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment)},m(b,v){mount_component(e,b,v),insert(b,n,v),mount_component(r,b,v),insert(b,s,v),mount_component(l,b,v),insert(b,u,v),mount_component(d,b,v),f=!0},p(b,v){const y={};!t&&v&16&&(t=!0,y.value=b[4],add_flush_callback(()=>t=!1)),e.$set(y);const C={};!a&&v&16&&(a=!0,C.filter=b[4],add_flush_callback(()=>a=!1)),r.$set(C);const E={};v&16777216&&(E.$$scope={dirty:v,ctx:b}),d.$set(E)},i(b){f||(transition_in(e.$$.fragment,b),transition_in(r.$$.fragment,b),transition_in(l.$$.fragment,b),transition_in(d.$$.fragment,b),f=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(r.$$.fragment,b),transition_out(l.$$.fragment,b),transition_out(d.$$.fragment,b),f=!1},d(b){b&&(detach(n),detach(s),detach(u)),destroy_component(e,b),destroy_component(r,b),destroy_component(l,b),destroy_component(d,b)}}}function create_else_block_1$1(o){let e,t;return e=new AppObjectList({props:{list:o[6].map(o[22]),module:databaseObjectAppObject,groupFunc:o[23],subItemsComponent:SubColumnParamList,isExpandable:func_2,expandIconFunc:chevronExpandIcon,filter:o[4],passProps:{showPinnedInsteadOfUnpin:!0,connection:o[3]}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&67&&(a.list=n[6].map(n[22])),r&16&&(a.filter=n[4]),r&8&&(a.passProps={showPinnedInsteadOfUnpin:!0,connection:n[3]}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_4$2(o){var n,r;let e,t;return e=new LoadingInfo({props:{message:((r=(n=o[11])==null?void 0:n.feedback)==null?void 0:r.analysingMessage)||"Loading database structure"}}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){var u,d;const l={};s&2048&&(l.message=((d=(u=a[11])==null?void 0:u.feedback)==null?void 0:d.analysingMessage)||"Loading database structure"),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_default_slot_6$1(o){let e,t,n,r;const a=[create_if_block_4$2,create_else_block_1$1],s=[];function l(u,d){return u[11]&&(u[11].name=="pending"||u[11].name=="checkStructure"||u[11].name=="loadStructure")&&u[2]||!u[2]?0:1}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,d){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}function create_default_slot_5$1(o){let e;return{c(){e=text("Refresh")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_3$2(o){let e,t,n,r;return n=new InlineButton({props:{$$slots:{default:[create_default_slot_4$1]},$$scope:{ctx:o}}}),n.$on("click",o[18]),{c(){e=element("div"),t=space(),create_component(n.$$.fragment),attr(e,"class","m-1")},m(a,s){insert(a,e,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&16777216&&(l.$$scope={dirty:s,ctx:a}),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&(detach(e),detach(t)),destroy_component(n,a)}}}function create_default_slot_4$1(o){let e;return{c(){e=text("New table")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_if_block_2$2(o){let e,t,n,r;return n=new InlineButton({props:{$$slots:{default:[create_default_slot_3$3]},$$scope:{ctx:o}}}),n.$on("click",o[19]),{c(){e=element("div"),t=space(),create_component(n.$$.fragment),attr(e,"class","m-1")},m(a,s){insert(a,e,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&16777216&&(l.$$scope={dirty:s,ctx:a}),n.$set(l)},i(a){r||(transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(n.$$.fragment,a),r=!1},d(a){a&&(detach(e),detach(t)),destroy_component(n,a)}}}function create_default_slot_3$3(o){let e;return{c(){e=text("New collection")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot_2$4(o){var g,b,v,y;let e,t,n,r,a,s,l=(b=(g=o[5])==null?void 0:g.databaseEngineTypes)==null?void 0:b.includes("sql"),u,d=(y=(v=o[5])==null?void 0:v.databaseEngineTypes)==null?void 0:y.includes("document"),f,m;e=new ErrorInfo({props:{message:`Database ${o[1]} is empty or structure is not loaded, press Refresh button to reload structure`,icon:"img alert"}}),a=new InlineButton({props:{$$slots:{default:[create_default_slot_5$1]},$$scope:{ctx:o}}}),a.$on("click",o[12]);let h=l&&create_if_block_3$2(o),p=d&&create_if_block_2$2(o);return{c(){create_component(e.$$.fragment),t=space(),n=element("div"),r=space(),create_component(a.$$.fragment),s=space(),h&&h.c(),u=space(),p&&p.c(),f=empty(),attr(n,"class","m-1")},m(C,E){mount_component(e,C,E),insert(C,t,E),insert(C,n,E),insert(C,r,E),mount_component(a,C,E),insert(C,s,E),h&&h.m(C,E),insert(C,u,E),p&&p.m(C,E),insert(C,f,E),m=!0},p(C,E){var T,$,S,I;const A={};E&2&&(A.message=`Database ${C[1]} is empty or structure is not loaded, press Refresh button to reload structure`),e.$set(A);const k={};E&16777216&&(k.$$scope={dirty:E,ctx:C}),a.$set(k),E&32&&(l=($=(T=C[5])==null?void 0:T.databaseEngineTypes)==null?void 0:$.includes("sql")),l?h?(h.p(C,E),E&32&&transition_in(h,1)):(h=create_if_block_3$2(C),h.c(),transition_in(h,1),h.m(u.parentNode,u)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),E&32&&(d=(I=(S=C[5])==null?void 0:S.databaseEngineTypes)==null?void 0:I.includes("document")),d?p?(p.p(C,E),E&32&&transition_in(p,1)):(p=create_if_block_2$2(C),p.c(),transition_in(p,1),p.m(f.parentNode,f)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros())},i(C){m||(transition_in(e.$$.fragment,C),transition_in(a.$$.fragment,C),transition_in(h),transition_in(p),m=!0)},o(C){transition_out(e.$$.fragment,C),transition_out(a.$$.fragment,C),transition_out(h),transition_out(p),m=!1},d(C){C&&(detach(t),detach(n),detach(r),detach(s),detach(u),detach(f)),destroy_component(e,C),destroy_component(a,C),h&&h.d(C),p&&p.d(C)}}}function create_default_slot_1$4(o){let e;return{c(){e=text("Refresh")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_default_slot$5(o){let e,t,n,r;return e=new ErrorInfo({props:{message:o[11].message,icon:"img error"}}),n=new InlineButton({props:{$$slots:{default:[create_default_slot_1$4]},$$scope:{ctx:o}}}),n.$on("click",o[12]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,s){const l={};s&2048&&(l.message=a[11].message),e.$set(l);const u={};s&16777216&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_fragment$g(o){let e,t,n,r;const a=[create_if_block$7,create_if_block_1$4,create_else_block$1],s=[];function l(u,d){return u[11]&&u[11].name=="error"?0:u[6].length==0&&u[11]&&u[11].name!="pending"&&u[11].name!="checkStructure"&&u[11].name!="loadStructure"&&u[2]?1:2}return e=l(o),t=s[e]=a[e](o),{c(){t.c(),n=empty()},m(u,d){s[e].m(u,d),insert(u,n,d),r=!0},p(u,[d]){let f=e;e=l(u),e===f?s[e].p(u,d):(group_outros(),transition_out(s[f],1,1,()=>{s[f]=null}),check_outros(),t=s[e],t?t.p(u,d):(t=s[e]=a[e](u),t.c()),transition_in(t,1),t.m(n.parentNode,n))},i(u){r||(transition_in(t),r=!0)},o(u){transition_out(t),r=!1},d(u){u&&detach(n),s[e].d(u)}}}const func_2=o=>o.objectTypeField=="tables"||o.objectTypeField=="views"||o.objectTypeField=="matviews";function instance$g(o,e,t){let n,r,a,s,l,u,d,f,m=noop$1,h=()=>(m(),m=subscribe(n,G=>t(2,f=G)),n),p,g=noop$1,b=()=>(g(),g=subscribe(l,G=>t(15,p=G)),l),v,y,C,E=noop$1,A=()=>(E(),E=subscribe(a,G=>t(3,C=G)),a),k,T=noop$1,$=()=>(T(),T=subscribe(r,G=>t(11,k=G)),r);component_subscribe(o,currentDatabase,G=>t(16,v=G)),component_subscribe(o,extensions,G=>t(17,y=G)),o.$$.on_destroy.push(()=>m()),o.$$.on_destroy.push(()=>g()),o.$$.on_destroy.push(()=>E()),o.$$.on_destroy.push(()=>T());let{conid:S}=e,{database:I}=e,R="";const N=()=>{apiCall("database-connections/refresh",{conid:S,database:I})};function M(){var G,W;const q=[];return!((G=s==null?void 0:s.databaseEngineTypes)===null||G===void 0)&&G.includes("document")&&q.push({command:"new.collection"}),!((W=s==null?void 0:s.databaseEngineTypes)===null||W===void 0)&&W.includes("sql")&&q.push({command:"new.table"}),s&&q.push(...s.getNewObjectTemplates().map(H=>({text:H.label,onClick:()=>{newQuery({initialData:H.sql})}}))),q}const F=()=>runCommand("new.table"),D=()=>runCommand("new.collection");function x(G){R=G,t(4,R)}function B(G){R=G,t(4,R)}const K=G=>({...G,conid:S,database:I}),U=G=>getObjectTypeFieldLabel(G.objectTypeField);return o.$$set=G=>{"conid"in G&&t(0,S=G.conid),"database"in G&&t(1,I=G.database)},o.$$.update=()=>{o.$$.dirty&3&&h(t(10,n=useDatabaseInfo({conid:S,database:I}))),o.$$.dirty&3&&$(t(9,r=useDatabaseStatus({conid:S,database:I}))),o.$$.dirty&1&&A(t(8,a=useConnectionInfo({conid:S}))),o.$$.dirty&131080&&t(5,s=lib.findEngineDriver(C,y)),o.$$.dirty&98304&&t(14,u=filterAppsForDatabase(v==null?void 0:v.connection,v==null?void 0:v.name,p||[])),o.$$.dirty&16388&&t(6,d=_.flatten([...["tables","collections","views","matviews","procedures","functions"].map(G=>_.sortBy(((f||{})[G]||[]).map(W=>Object.assign(Object.assign({},W),{objectTypeField:G})),["schemaName","pureName"])),...u.map(G=>G.queries.map(W=>({objectTypeField:"queries",pureName:W.name,schemaName:G.name,sql:W.sql})))]))},b(t(7,l=useUsedApps())),[S,I,f,C,R,s,d,l,a,r,n,k,N,M,u,p,v,y,F,D,x,B,K,U]}class SqlObjectList extends SvelteComponent{constructor(e){super(),init(this,e,instance$g,create_fragment$g,safe_not_equal,{conid:0,database:1})}}const SqlObjectList$1=Object.freeze(Object.defineProperty({__proto__:null,default:SqlObjectList},Symbol.toStringTag,{value:"Module"})),AddDbKeyModal_svelte_svelte_type_style_lang="";function create_default_slot_3$2(o){let e,t;return e=new TextField({props:{value:o[2]}}),e.$on("change",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&4&&(a.value=n[2]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$3(o){let e,t;return e=new SelectField({props:{options:o[0].supportedKeyTypes.map(func),value:o[3],isNative:!0}}),e.$on("change",o[11]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.options=n[0].supportedKeyTypes.map(func)),r&8&&(a.value=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$3(o){let e,t,n,r,a,s,l,u,d;return t=new FormFieldTemplateLarge({props:{label:"Key",type:"text",noMargin:!0,$$slots:{default:[create_default_slot_3$2]},$$scope:{ctx:o}}}),s=new FormFieldTemplateLarge({props:{label:"Type",type:"combo",noMargin:!0,$$slots:{default:[create_default_slot_2$3]},$$scope:{ctx:o}}}),u=new DbKeyItemDetail({props:{dbKeyFields:o[0].supportedKeyTypes.find(o[12]).dbKeyFields,item:o[1],onChangeItem:o[13]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),attr(r,"class","m-3"),attr(e,"class","container svelte-eg2ir1")},m(f,m){insert(f,e,m),mount_component(t,e,null),append(e,n),append(e,r),append(e,a),mount_component(s,e,null),append(e,l),mount_component(u,e,null),d=!0},p(f,m){const h={};m&32772&&(h.$$scope={dirty:m,ctx:f}),t.$set(h);const p={};m&32777&&(p.$$scope={dirty:m,ctx:f}),s.$set(p);const g={};m&9&&(g.dbKeyFields=f[0].supportedKeyTypes.find(f[12]).dbKeyFields),m&2&&(g.item=f[1]),m&2&&(g.onChangeItem=f[13]),u.$set(g)},i(f){d||(transition_in(t.$$.fragment,f),transition_in(s.$$.fragment,f),transition_in(u.$$.fragment,f),d=!0)},o(f){transition_out(t.$$.fragment,f),transition_out(s.$$.fragment,f),transition_out(u.$$.fragment,f),d=!1},d(f){f&&detach(e),destroy_component(t),destroy_component(s),destroy_component(u)}}}function create_header_slot(o){let e;return{c(){e=text("Add key")},m(t,n){insert(t,e,n)},d(t){t&&detach(e)}}}function create_footer_slot(o){let e,t,n,r;return e=new FormStyledButton({props:{value:"OK"}}),e.$on("click",o[9]),n=new FormStyledButton({props:{type:"button",value:"Cancel"}}),n.$on("click",closeCurrentModal),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p:noop$1,i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function create_default_slot$4(o){let e,t;const n=[o[5]];let r={$$slots:{footer:[create_footer_slot],header:[create_header_slot],default:[create_default_slot_1$3]},$$scope:{ctx:o}};for(let a=0;a<n.length;a+=1)r=assign(r,n[a]);return e=new ModalBase({props:r}),{c(){create_component(e.$$.fragment)},m(a,s){mount_component(e,a,s),t=!0},p(a,s){const l=s&32?get_spread_update(n,[get_spread_object(a[5])]):{};s&32783&&(l.$$scope={dirty:s,ctx:a}),e.$set(l)},i(a){t||(transition_in(e.$$.fragment,a),t=!0)},o(a){transition_out(e.$$.fragment,a),t=!1},d(a){destroy_component(e,a)}}}function create_fragment$f(o){let e,t;return e=new FormProvider({props:{$$slots:{default:[create_default_slot$4]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&32815&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}const func=o=>({value:o.name,label:o.label});function instance$f(o,e,t){const n=["conid","database","driver","onConfirm"];let r=compute_rest_props(e,n);var a=this&&this.__awaiter||function(E,A,k,T){function $(S){return S instanceof k?S:new k(function(I){I(S)})}return new(k||(k=Promise))(function(S,I){function R(F){try{M(T.next(F))}catch(D){I(D)}}function N(F){try{M(T.throw(F))}catch(D){I(D)}}function M(F){F.done?S(F.value):$(F.value).then(R,N)}M((T=T.apply(E,A||[])).next())})};let{conid:s}=e,{database:l}=e,{driver:u}=e,{onConfirm:d}=e,f={},m="",h=u.supportedKeyTypes[0].name;const p=()=>a(void 0,void 0,void 0,function*(){closeCurrentModal(),d(Object.assign({type:h,keyName:m},f))}),g=E=>p(),b=E=>{t(2,m=E.target.value)},v=E=>{t(3,h=E.detail)},y=E=>E.name==h,C=E=>{t(1,f=E)};return o.$$set=E=>{e=assign(assign({},e),exclude_internal_props(E)),t(5,r=compute_rest_props(e,n)),"conid"in E&&t(6,s=E.conid),"database"in E&&t(7,l=E.database),"driver"in E&&t(0,u=E.driver),"onConfirm"in E&&t(8,d=E.onConfirm)},[u,f,m,h,p,r,s,l,d,g,b,v,y,C]}class AddDbKeyModal extends SvelteComponent{constructor(e){super(),init(this,e,instance$f,create_fragment$f,safe_not_equal,{conid:6,database:7,driver:0,onConfirm:8})}}const AddDbKeyModal$1=Object.freeze(Object.defineProperty({__proto__:null,default:AddDbKeyModal},Symbol.toStringTag,{value:"Module"}));function create_if_block$6(o){let e,t;return e=new DbKeysSubTree({props:{conid:o[0],database:o[1],root:o[3].root,indentLevel:o[4]+1,reloadToken:o[7],connection:o[2],filter:o[5]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.conid=n[0]),r&2&&(a.database=n[1]),r&8&&(a.root=n[3].root),r&16&&(a.indentLevel=n[4]+1),r&128&&(a.reloadToken=n[7]),r&4&&(a.connection=n[2]),r&32&&(a.filter=n[5]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$e(o){let e,t,n,r;e=new AppObjectCore({props:{icon:lib.getIconForRedisType(o[3].type),title:o[3].text,expandIcon:o[3].type=="dir"?plusExpandIcon(o[6]):"icon invisible-box",extInfo:o[3].count?`(${o[3].count})`:null,indentLevel:o[4],menu:o[9]}}),e.$on("expand",o[12]),e.$on("click",o[13]);let a=o[6]&&create_if_block$6(o);return{c(){create_component(e.$$.fragment),t=space(),a&&a.c(),n=empty()},m(s,l){mount_component(e,s,l),insert(s,t,l),a&&a.m(s,l),insert(s,n,l),r=!0},p(s,[l]){const u={};l&8&&(u.icon=lib.getIconForRedisType(s[3].type)),l&8&&(u.title=s[3].text),l&72&&(u.expandIcon=s[3].type=="dir"?plusExpandIcon(s[6]):"icon invisible-box"),l&8&&(u.extInfo=s[3].count?`(${s[3].count})`:null),l&16&&(u.indentLevel=s[4]),e.$set(u),s[6]?a?(a.p(s,l),l&64&&transition_in(a,1)):(a=create_if_block$6(s),a.c(),transition_in(a,1),a.m(n.parentNode,n)):a&&(group_outros(),transition_out(a,1,1,()=>{a=null}),check_outros())},i(s){r||(transition_in(e.$$.fragment,s),transition_in(a),r=!0)},o(s){transition_out(e.$$.fragment,s),transition_out(a),r=!1},d(s){s&&(detach(t),detach(n)),destroy_component(e,s),a&&a.d(s)}}}function instance$e(o,e,t){let n;component_subscribe(o,activeDbKeysStore,C=>t(8,n=C));var r=this&&this.__awaiter||function(C,E,A,k){function T($){return $ instanceof A?$:new A(function(S){S($)})}return new(A||(A=Promise))(function($,S){function I(M){try{N(k.next(M))}catch(F){S(F)}}function R(M){try{N(k.throw(M))}catch(F){S(F)}}function N(M){M.done?$(M.value):T(M.value).then(I,R)}N((k=k.apply(C,E||[])).next())})};let{conid:a}=e,{database:s}=e,{connection:l}=e,{root:u}=e,{item:d}=e,{indentLevel:f=0}=e,{filter:m}=e,{onRefreshParent:h}=e,p,g=0;function b(){return[d.key!=null&&!(l!=null&&l.isReadOnly)&&{label:"Delete key",onClick:()=>{showModal(ConfirmModal,{message:`Really delete key ${d.key}?`,onConfirm:()=>r(this,void 0,void 0,function*(){yield apiCall("database-connections/call-method",{conid:a,database:s,method:"del",args:[d.key]}),h&&h()})})}},d.key!=null&&!(l!=null&&l.isReadOnly)&&{label:"Rename key",onClick:()=>{showModal(InputTextModal,{value:d.key,label:"New name",header:"Rename key",onConfirm:C=>r(this,void 0,void 0,function*(){yield apiCall("database-connections/call-method",{conid:a,database:s,method:"rename",args:[d.key,C]}),h&&h()})})}},d.type=="dir"&&!(l!=null&&l.isReadOnly)&&{label:"Reload",onClick:()=>{t(7,g+=1)}},d.type=="dir"&&!(l!=null&&l.isReadOnly)&&{label:"Delete branch",onClick:()=>{const C=`${d.root}:*`;showModal(ConfirmModal,{message:`Really delete branch ${C} with all keys?`,onConfirm:()=>r(this,void 0,void 0,function*(){yield apiCall("database-connections/call-method",{conid:a,database:s,method:"mdel",args:[C]}),h&&h()})})}},,{label:"Generate script",onClick:()=>r(this,void 0,void 0,function*(){const C=yield apiCall("database-connections/export-keys",{conid:a,database:s,options:{keyPrefix:d.root||d.key}});if(C.errorMessage){showSnackbarError(C.errorMessage);return}newQuery({title:"Export #",initialData:C})})}]}const v=()=>{d.type=="dir"&&t(6,p=!p)},y=()=>{d.type=="dir"?t(6,p=!p):(openNewTab({tabComponent:"DbKeyDetailTab",title:d.text,icon:"img keydb",props:{isDefaultBrowser:!0,conid:a,database:s}}),set_store_value(activeDbKeysStore,n={...n,[`${a}:${s}`]:d.key},n))};return o.$$set=C=>{"conid"in C&&t(0,a=C.conid),"database"in C&&t(1,s=C.database),"connection"in C&&t(2,l=C.connection),"root"in C&&t(10,u=C.root),"item"in C&&t(3,d=C.item),"indentLevel"in C&&t(4,f=C.indentLevel),"filter"in C&&t(5,m=C.filter),"onRefreshParent"in C&&t(11,h=C.onRefreshParent)},[a,s,l,d,f,m,p,g,n,b,u,h,v,y]}class DbKeysTreeNode extends SvelteComponent{constructor(e){super(),init(this,e,instance$e,create_fragment$e,safe_not_equal,{conid:0,database:1,connection:2,root:10,item:3,indentLevel:4,filter:5,onRefreshParent:11})}}const DbKeysTreeNode$1=Object.freeze(Object.defineProperty({__proto__:null,default:DbKeysTreeNode},Symbol.toStringTag,{value:"Module"}));function get_then_context(o){const e=_.sortBy(o[11]||[],"text");o[12]=e}function get_each_context$2(o,e,t){const n=o.slice();return n[13]=e[t],n}function create_catch_block$3(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$3(o){get_then_context(o);let e,t,n,r=ensure_array_like(o[12].slice(0,o[8])),a=[];for(let u=0;u<r.length;u+=1)a[u]=create_each_block$2(get_each_context$2(o,r,u));const s=u=>transition_out(a[u],1,1,()=>{a[u]=null});let l=o[12].length>o[8]&&create_if_block$5(o);return{c(){for(let u=0;u<a.length;u+=1)a[u].c();e=space(),l&&l.c(),t=empty()},m(u,d){for(let f=0;f<a.length;f+=1)a[f]&&a[f].m(u,d);insert(u,e,d),l&&l.m(u,d),insert(u,t,d),n=!0},p(u,d){if(get_then_context(u),d&511){r=ensure_array_like(u[12].slice(0,u[8]));let f;for(f=0;f<r.length;f+=1){const m=get_each_context$2(u,r,f);a[f]?(a[f].p(m,d),transition_in(a[f],1)):(a[f]=create_each_block$2(m),a[f].c(),transition_in(a[f],1),a[f].m(e.parentNode,e))}for(group_outros(),f=r.length;f<a.length;f+=1)s(f);check_outros()}u[12].length>u[8]?l?(l.p(u,d),d&471&&transition_in(l,1)):(l=create_if_block$5(u),l.c(),transition_in(l,1),l.m(t.parentNode,t)):l&&(group_outros(),transition_out(l,1,1,()=>{l=null}),check_outros())},i(u){if(!n){for(let d=0;d<r.length;d+=1)transition_in(a[d]);transition_in(l),n=!0}},o(u){a=a.filter(Boolean);for(let d=0;d<a.length;d+=1)transition_out(a[d]);transition_out(l),n=!1},d(u){u&&(detach(e),detach(t)),destroy_each(a,u),l&&l.d(u)}}}function create_each_block$2(o){let e,t;return e=new DbKeysTreeNode({props:{conid:o[0],database:o[1],root:o[2],connection:o[5],item:o[13],filter:o[6],indentLevel:o[3],onRefreshParent:o[9]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.conid=n[0]),r&2&&(a.database=n[1]),r&4&&(a.root=n[2]),r&32&&(a.connection=n[5]),r&471&&(a.item=n[13]),r&64&&(a.filter=n[6]),r&8&&(a.indentLevel=n[3]),r&128&&(a.onRefreshParent=n[9]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$5(o){let e,t;return e=new AppObjectCore({props:{indentLevel:o[3],title:"Show more...",icon:"icon dots-horizontal",expandIcon:"icon invisible-box"}}),e.$on("click",o[10]),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&8&&(a.indentLevel=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block$3(o){let e,t;return e=new LoadingInfo({props:{message:"Loading key list",wrapper:!0}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$d(o){let e,t,n,r={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block$3,then:create_then_block$3,catch:create_catch_block$3,value:11,blocks:[,,,]};return handle_promise(t=apiCall("database-connections/load-keys",{conid:o[0],database:o[1],root:o[2],filter:o[6],reloadToken:o[4],reloadToken2:o[7]}),r),{c(){e=empty(),r.block.c()},m(a,s){insert(a,e,s),r.block.m(a,r.anchor=s),r.mount=()=>e.parentNode,r.anchor=e,n=!0},p(a,[s]){o=a,r.ctx=o,s&215&&t!==(t=apiCall("database-connections/load-keys",{conid:o[0],database:o[1],root:o[2],filter:o[6],reloadToken:o[4],reloadToken2:o[7]}))&&handle_promise(t,r)||update_await_block_branch(r,o,s)},i(a){n||(transition_in(r.block),n=!0)},o(a){for(let s=0;s<3;s+=1){const l=r.blocks[s];transition_out(l)}n=!1},d(a){a&&detach(e),r.block.d(a),r.token=null,r=null}}}const SHOW_INCREMENT=500;function instance$d(o,e,t){let{conid:n}=e,{database:r}=e,{root:a}=e,{indentLevel:s=0}=e,{reloadToken:l=0}=e,{connection:u}=e,{filter:d}=e,f=0,m=SHOW_INCREMENT;const h=()=>{t(7,f+=1)},p=()=>{t(8,m+=SHOW_INCREMENT)};return o.$$set=g=>{"conid"in g&&t(0,n=g.conid),"database"in g&&t(1,r=g.database),"root"in g&&t(2,a=g.root),"indentLevel"in g&&t(3,s=g.indentLevel),"reloadToken"in g&&t(4,l=g.reloadToken),"connection"in g&&t(5,u=g.connection),"filter"in g&&t(6,d=g.filter)},[n,r,a,s,l,u,d,f,m,h,p]}class DbKeysSubTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$d,create_fragment$d,safe_not_equal,{conid:0,database:1,root:2,indentLevel:3,reloadToken:4,connection:5,filter:6})}}const DbKeysSubTree$1=Object.freeze(Object.defineProperty({__proto__:null,default:DbKeysSubTree},Symbol.toStringTag,{value:"Module"}));function create_default_slot_3$1(o){let e,t;return e=new FontIcon({props:{icon:"icon plus-thick"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2$2(o){let e,t;return e=new FontIcon({props:{icon:"icon refresh"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$2(o){let e,t,n,r,a,s,l,u,d,f;function m(b){o[7](b)}let h={placeholder:"Search keys",isDebounced:!0};o[2]!==void 0&&(h.value=o[2]),e=new SearchInput({props:h}),binding_callbacks.push(()=>bind(e,"value",m));function p(b){o[8](b)}let g={};return o[2]!==void 0&&(g.filter=o[2]),r=new CloseSearchButton({props:g}),binding_callbacks.push(()=>bind(r,"filter",p)),l=new InlineButton({props:{title:"Add new key",$$slots:{default:[create_default_slot_3$1]},$$scope:{ctx:o}}}),l.$on("click",o[6]),d=new InlineButton({props:{title:"Refresh key list",$$slots:{default:[create_default_slot_2$2]},$$scope:{ctx:o}}}),d.$on("click",o[5]),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),s=space(),create_component(l.$$.fragment),u=space(),create_component(d.$$.fragment)},m(b,v){mount_component(e,b,v),insert(b,n,v),mount_component(r,b,v),insert(b,s,v),mount_component(l,b,v),insert(b,u,v),mount_component(d,b,v),f=!0},p(b,v){const y={};!t&&v&4&&(t=!0,y.value=b[2],add_flush_callback(()=>t=!1)),e.$set(y);const C={};!a&&v&4&&(a=!0,C.filter=b[2],add_flush_callback(()=>a=!1)),r.$set(C);const E={};v&1024&&(E.$$scope={dirty:v,ctx:b}),l.$set(E);const A={};v&1024&&(A.$$scope={dirty:v,ctx:b}),d.$set(A)},i(b){f||(transition_in(e.$$.fragment,b),transition_in(r.$$.fragment,b),transition_in(l.$$.fragment,b),transition_in(d.$$.fragment,b),f=!0)},o(b){transition_out(e.$$.fragment,b),transition_out(r.$$.fragment,b),transition_out(l.$$.fragment,b),transition_out(d.$$.fragment,b),f=!1},d(b){b&&(detach(n),detach(s),detach(u)),destroy_component(e,b),destroy_component(r,b),destroy_component(l,b),destroy_component(d,b)}}}function create_default_slot$3(o){var n;let e,t;return e=new DbKeysSubTree({props:{conid:o[0],database:o[1],root:"",reloadToken:o[3],connection:(n=o[4])==null?void 0:n.connection,filter:o[2]}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&1&&(s.conid=r[0]),a&2&&(s.database=r[1]),a&8&&(s.reloadToken=r[3]),a&16&&(s.connection=(l=r[4])==null?void 0:l.connection),a&4&&(s.filter=r[2]),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_fragment$c(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_1$2]},$$scope:{ctx:o}}}),n=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot$3]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,[s]){const l={};s&1028&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&1055&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function instance$c(o,e,t){let n;component_subscribe(o,currentDatabase,p=>t(4,n=p));var r=this&&this.__awaiter||function(p,g,b,v){function y(C){return C instanceof b?C:new b(function(E){E(C)})}return new(b||(b=Promise))(function(C,E){function A($){try{T(v.next($))}catch(S){E(S)}}function k($){try{T(v.throw($))}catch(S){E(S)}}function T($){$.done?C($.value):y($.value).then(A,k)}T((v=v.apply(p,g||[])).next())})};let{conid:a}=e,{database:s}=e,l,u=0;function d(){t(3,u+=1)}function f(){const p=n==null?void 0:n.connection,g=n==null?void 0:n.name,b=lib.findEngineDriver(p,getExtensions());showModal(AddDbKeyModal,{conid:p._id,database:g,driver:b,onConfirm:v=>r(this,void 0,void 0,function*(){const y=b.supportedKeyTypes.find(C=>C.name==v.type);yield apiCall("database-connections/call-method",{conid:p._id,database:g,method:y.addMethod,args:[v.keyName,...y.dbKeyFields.map(C=>v[C.name])]}),d()})})}function m(p){l=p,t(2,l)}function h(p){l=p,t(2,l)}return o.$$set=p=>{"conid"in p&&t(0,a=p.conid),"database"in p&&t(1,s=p.database)},[a,s,l,u,n,d,f,m,h]}class DbKeysTree extends SvelteComponent{constructor(e){super(),init(this,e,instance$c,create_fragment$c,safe_not_equal,{conid:0,database:1})}}const DbKeysTree$1=Object.freeze(Object.defineProperty({__proto__:null,default:DbKeysTree},Symbol.toStringTag,{value:"Module"}));function create_default_slot_2$1(o){let e,t;return e=new FontIcon({props:{icon:"icon refresh"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1$1(o){let e,t,n,r,a,s,l,u;function d(p){o[3](p)}let f={placeholder:"Search connection or database"};o[1]!==void 0&&(f.value=o[1]),e=new SearchInput({props:f}),binding_callbacks.push(()=>bind(e,"value",d));function m(p){o[4](p)}let h={};return o[1]!==void 0&&(h.filter=o[1]),r=new CloseSearchButton({props:h}),binding_callbacks.push(()=>bind(r,"filter",m)),l=new InlineButton({props:{title:"Refresh database list",$$slots:{default:[create_default_slot_2$1]},$$scope:{ctx:o}}}),l.$on("click",o[2]),{c(){create_component(e.$$.fragment),n=space(),create_component(r.$$.fragment),s=space(),create_component(l.$$.fragment)},m(p,g){mount_component(e,p,g),insert(p,n,g),mount_component(r,p,g),insert(p,s,g),mount_component(l,p,g),u=!0},p(p,g){const b={};!t&&g&2&&(t=!0,b.value=p[1],add_flush_callback(()=>t=!1)),e.$set(b);const v={};!a&&g&2&&(a=!0,v.filter=p[1],add_flush_callback(()=>a=!1)),r.$set(v);const y={};g&32&&(y.$$scope={dirty:g,ctx:p}),l.$set(y)},i(p){u||(transition_in(e.$$.fragment,p),transition_in(r.$$.fragment,p),transition_in(l.$$.fragment,p),u=!0)},o(p){transition_out(e.$$.fragment,p),transition_out(r.$$.fragment,p),transition_out(l.$$.fragment,p),u=!1},d(p){p&&(detach(n),detach(s)),destroy_component(e,p),destroy_component(r,p),destroy_component(l,p)}}}function create_default_slot$2(o){let e,t;return e=new SubDatabaseList({props:{data:o[0],filter:o[1],passProps:{}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&1&&(a.data=n[0]),r&2&&(a.filter=n[1]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_fragment$b(o){let e,t,n,r;return e=new SearchBoxWrapper({props:{$$slots:{default:[create_default_slot_1$1]},$$scope:{ctx:o}}}),n=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot$2]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment)},m(a,s){mount_component(e,a,s),insert(a,t,s),mount_component(n,a,s),r=!0},p(a,[s]){const l={};s&34&&(l.$$scope={dirty:s,ctx:a}),e.$set(l);const u={};s&35&&(u.$$scope={dirty:s,ctx:a}),n.$set(u)},i(a){r||(transition_in(e.$$.fragment,a),transition_in(n.$$.fragment,a),r=!0)},o(a){transition_out(e.$$.fragment,a),transition_out(n.$$.fragment,a),r=!1},d(a){a&&detach(t),destroy_component(e,a),destroy_component(n,a)}}}function instance$b(o,e,t){let{connection:n}=e,r="";const a=()=>{apiCall("server-connections/refresh",{conid:n._id})};function s(u){r=u,t(1,r)}function l(u){r=u,t(1,r)}return o.$$set=u=>{"connection"in u&&t(0,n=u.connection)},[n,r,a,s,l]}class SingleConnectionDatabaseList extends SvelteComponent{constructor(e){super(),init(this,e,instance$b,create_fragment$b,safe_not_equal,{connection:0})}}const SingleConnectionDatabaseList$1=Object.freeze(Object.defineProperty({__proto__:null,default:SingleConnectionDatabaseList},Symbol.toStringTag,{value:"Module"}));function create_if_block_1$3(o){let e,t;return e=new WidgetColumnBarItem({props:{title:"Connections",name:"connections",height:"35%",storageName:"connectionsWidget",$$slots:{default:[create_default_slot_7]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$4(o){let e,t;return e=new WidgetColumnBarItem({props:{title:"Databases",name:"databases",height:"35%",storageName:"databasesWidget",$$slots:{default:[create_default_slot_6]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&65792&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_7(o){let e,t;return e=new ConnectionList({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_6(o){var n;let e,t;return e=new SingleConnectionDatabaseList({props:{connection:(n=o[8])==null?void 0:n.singleConnection}}),{c(){create_component(e.$$.fragment)},m(r,a){mount_component(e,r,a),t=!0},p(r,a){var l;const s={};a&256&&(s.connection=(l=r[8])==null?void 0:l.singleConnection),e.$set(s)},i(r){t||(transition_in(e.$$.fragment,r),t=!0)},o(r){transition_out(e.$$.fragment,r),t=!1},d(r){destroy_component(e,r)}}}function create_default_slot_5(o){let e,t;return e=new PinnedObjectsList({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_4(o){let e,t;return e=new SqlObjectList({props:{conid:o[1],database:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.conid=n[1]),r&8&&(a.database=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_3(o){let e,t;return e=new DbKeysTree({props:{conid:o[1],database:o[3]}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.conid=n[1]),r&8&&(a.database=n[3]),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_2(o){let e,t;return e=new ErrorInfo({props:{message:"Database not selected",icon:"img alert"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot_1(o){let e,t;return e=new WidgetsInnerContainer({props:{$$slots:{default:[create_default_slot_2]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&65536&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_default_slot$1(o){var b,v,y,C,E,A,k,T;let e,t,n,r,a,s,l,u,d,f,m;const h=[create_if_block$4,create_if_block_1$3],p=[];function g($,S){var I,R;return(I=$[8])!=null&&I.singleConnection?0:(R=$[8])!=null&&R.singleDbConnection?-1:1}return~(e=g(o))&&(t=p[e]=h[e](o)),r=new WidgetColumnBarItem({props:{title:"Pinned",name:"pinned",height:"15%",storageName:"pinnedItemsWidget",skip:!_.compact(o[9]).length&&!o[10].some(o[15]),$$slots:{default:[create_default_slot_5]},$$scope:{ctx:o}}}),s=new WidgetColumnBarItem({props:{title:(v=(b=o[6])==null?void 0:b.databaseEngineTypes)!=null&&v.includes("document")?"Collections":"Tables, views, functions",name:"dbObjects",storageName:"dbObjectsWidget",skip:!(o[1]&&(o[3]||o[4])&&((C=(y=o[6])==null?void 0:y.databaseEngineTypes)!=null&&C.includes("sql")||(A=(E=o[6])==null?void 0:E.databaseEngineTypes)!=null&&A.includes("document"))),$$slots:{default:[create_default_slot_4]},$$scope:{ctx:o}}}),u=new WidgetColumnBarItem({props:{title:"Keys",name:"dbObjects",storageName:"dbObjectsWidget",skip:!(o[1]&&(o[3]||o[4])&&((T=(k=o[6])==null?void 0:k.databaseEngineTypes)!=null&&T.includes("keyvalue"))),$$slots:{default:[create_default_slot_3]},$$scope:{ctx:o}}}),f=new WidgetColumnBarItem({props:{title:"Database content",name:"dbObjects",storageName:"dbObjectsWidget",skip:o[1]&&(o[3]||o[4]),$$slots:{default:[create_default_slot_1]},$$scope:{ctx:o}}}),{c(){t&&t.c(),n=space(),create_component(r.$$.fragment),a=space(),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),d=space(),create_component(f.$$.fragment)},m($,S){~e&&p[e].m($,S),insert($,n,S),mount_component(r,$,S),insert($,a,S),mount_component(s,$,S),insert($,l,S),mount_component(u,$,S),insert($,d,S),mount_component(f,$,S),m=!0},p($,S){var D,x,B,K,U,G,W,q;let I=e;e=g($),e===I?~e&&p[e].p($,S):(t&&(group_outros(),transition_out(p[I],1,1,()=>{p[I]=null}),check_outros()),~e?(t=p[e],t?t.p($,S):(t=p[e]=h[e]($),t.c()),transition_in(t,1),t.m(n.parentNode,n)):t=null);const R={};S&1542&&(R.skip=!_.compact($[9]).length&&!$[10].some($[15])),S&65536&&(R.$$scope={dirty:S,ctx:$}),r.$set(R);const N={};S&64&&(N.title=(x=(D=$[6])==null?void 0:D.databaseEngineTypes)!=null&&x.includes("document")?"Collections":"Tables, views, functions"),S&90&&(N.skip=!($[1]&&($[3]||$[4])&&((K=(B=$[6])==null?void 0:B.databaseEngineTypes)!=null&&K.includes("sql")||(G=(U=$[6])==null?void 0:U.databaseEngineTypes)!=null&&G.includes("document")))),S&65546&&(N.$$scope={dirty:S,ctx:$}),s.$set(N);const M={};S&90&&(M.skip=!($[1]&&($[3]||$[4])&&((q=(W=$[6])==null?void 0:W.databaseEngineTypes)!=null&&q.includes("keyvalue")))),S&65546&&(M.$$scope={dirty:S,ctx:$}),u.$set(M);const F={};S&26&&(F.skip=$[1]&&($[3]||$[4])),S&65536&&(F.$$scope={dirty:S,ctx:$}),f.$set(F)},i($){m||(transition_in(t),transition_in(r.$$.fragment,$),transition_in(s.$$.fragment,$),transition_in(u.$$.fragment,$),transition_in(f.$$.fragment,$),m=!0)},o($){transition_out(t),transition_out(r.$$.fragment,$),transition_out(s.$$.fragment,$),transition_out(u.$$.fragment,$),transition_out(f.$$.fragment,$),m=!1},d($){$&&(detach(n),detach(a),detach(l),detach(d)),~e&&p[e].d($),destroy_component(r,$),destroy_component(s,$),destroy_component(u,$),destroy_component(f,$)}}}function create_fragment$a(o){let e,t;return e=new WidgetColumnBar({props:{hidden:o[0],$$slots:{default:[create_default_slot$1]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&1&&(a.hidden=n[0]),r&67422&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$a(o,e,t){let n,r,a,s,l,u,d,f,m,h=noop$1,p=()=>(h(),h=subscribe(r,$=>t(14,m=$)),r),g,b=noop$1,v=()=>(b(),b=subscribe(s,$=>t(8,g=$)),s),y,C;component_subscribe(o,currentDatabase,$=>t(2,d=$)),component_subscribe(o,extensions,$=>t(13,f=$)),component_subscribe(o,pinnedDatabases,$=>t(9,y=$)),component_subscribe(o,pinnedTables,$=>t(10,C=$)),o.$$.on_destroy.push(()=>h()),o.$$.on_destroy.push(()=>b());var E,A;let{hidden:k=!1}=e;const T=$=>$&&$.conid==n&&$.database==(d==null?void 0:d.name);return o.$$set=$=>{"hidden"in $&&t(0,k=$.hidden)},o.$$.update=()=>{o.$$.dirty&2052&&t(1,n=t(11,E=d==null?void 0:d.connection)===null||E===void 0?void 0:E._id),o.$$.dirty&2&&p(t(7,r=useConnectionInfo({conid:n}))),o.$$.dirty&24576&&t(6,a=lib.findEngineDriver(m,f)),o.$$.dirty&4100&&t(4,l=t(12,A=d==null?void 0:d.connection)===null||A===void 0?void 0:A.singleDatabase),o.$$.dirty&4&&t(3,u=d==null?void 0:d.name)},v(t(5,s=useConfig())),[k,n,d,u,l,s,a,r,g,y,C,E,A,f,m,T]}class DatabaseWidget extends SvelteComponent{constructor(e){super(),init(this,e,instance$a,create_fragment$a,safe_not_equal,{hidden:0})}}const DatabaseWidget$1=Object.freeze(Object.defineProperty({__proto__:null,default:DatabaseWidget},Symbol.toStringTag,{value:"Module"}));function create_if_block_5$1(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_5$2,then:create_then_block_5$2,catch:create_catch_block_5$2,value:6,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("FilesWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_5$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_5$2(o){let e,t;return e=new o[6]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_5$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_4$1(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_4$2,then:create_then_block_4$2,catch:create_catch_block_4$2,value:5,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("HistoryWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_4$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_4$2(o){let e,t;return e=new o[5]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_4$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_3$1(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_3$2,then:create_then_block_3$2,catch:create_catch_block_3$2,value:4,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("ArchiveWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_3$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_3$2(o){let e,t;return e=new o[4]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_3$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_2$1(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_2$2,then:create_then_block_2$2,catch:create_catch_block_2$2,value:3,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("PluginsWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_2$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_2$2(o){let e,t;return e=new o[3]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_2$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_1$2(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_1$2,then:create_then_block_1$2,catch:create_catch_block_1$2,value:2,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("CellDataWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_1$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_1$2(o){let e,t;return e=new o[2]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_1$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block$3(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block$2,then:create_then_block$2,catch:create_catch_block$2,value:1,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("AppWidget"),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$2(o){let e,t;return e=new o[1]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block$2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_fragment$9(o){let e,t,n,r,a,s,l,u,d;e=new DatabaseWidget({props:{hidden:o[0]!="database"}});let f=o[0]=="file"&&create_if_block_5$1(o),m=o[0]=="history"&&create_if_block_4$1(o),h=o[0]=="archive"&&create_if_block_3$1(o),p=o[0]=="plugins"&&create_if_block_2$1(o),g=o[0]=="cell-data"&&create_if_block_1$2(o),b=o[0]=="app"&&create_if_block$3(o);return{c(){create_component(e.$$.fragment),t=space(),f&&f.c(),n=space(),m&&m.c(),r=space(),h&&h.c(),a=space(),p&&p.c(),s=space(),g&&g.c(),l=space(),b&&b.c(),u=empty()},m(v,y){mount_component(e,v,y),insert(v,t,y),f&&f.m(v,y),insert(v,n,y),m&&m.m(v,y),insert(v,r,y),h&&h.m(v,y),insert(v,a,y),p&&p.m(v,y),insert(v,s,y),g&&g.m(v,y),insert(v,l,y),b&&b.m(v,y),insert(v,u,y),d=!0},p(v,[y]){const C={};y&1&&(C.hidden=v[0]!="database"),e.$set(C),v[0]=="file"?f?(f.p(v,y),y&1&&transition_in(f,1)):(f=create_if_block_5$1(v),f.c(),transition_in(f,1),f.m(n.parentNode,n)):f&&(group_outros(),transition_out(f,1,1,()=>{f=null}),check_outros()),v[0]=="history"?m?(m.p(v,y),y&1&&transition_in(m,1)):(m=create_if_block_4$1(v),m.c(),transition_in(m,1),m.m(r.parentNode,r)):m&&(group_outros(),transition_out(m,1,1,()=>{m=null}),check_outros()),v[0]=="archive"?h?(h.p(v,y),y&1&&transition_in(h,1)):(h=create_if_block_3$1(v),h.c(),transition_in(h,1),h.m(a.parentNode,a)):h&&(group_outros(),transition_out(h,1,1,()=>{h=null}),check_outros()),v[0]=="plugins"?p?(p.p(v,y),y&1&&transition_in(p,1)):(p=create_if_block_2$1(v),p.c(),transition_in(p,1),p.m(s.parentNode,s)):p&&(group_outros(),transition_out(p,1,1,()=>{p=null}),check_outros()),v[0]=="cell-data"?g?(g.p(v,y),y&1&&transition_in(g,1)):(g=create_if_block_1$2(v),g.c(),transition_in(g,1),g.m(l.parentNode,l)):g&&(group_outros(),transition_out(g,1,1,()=>{g=null}),check_outros()),v[0]=="app"?b?(b.p(v,y),y&1&&transition_in(b,1)):(b=create_if_block$3(v),b.c(),transition_in(b,1),b.m(u.parentNode,u)):b&&(group_outros(),transition_out(b,1,1,()=>{b=null}),check_outros())},i(v){d||(transition_in(e.$$.fragment,v),transition_in(f),transition_in(m),transition_in(h),transition_in(p),transition_in(g),transition_in(b),d=!0)},o(v){transition_out(e.$$.fragment,v),transition_out(f),transition_out(m),transition_out(h),transition_out(p),transition_out(g),transition_out(b),d=!1},d(v){v&&(detach(t),detach(n),detach(r),detach(a),detach(s),detach(l),detach(u)),destroy_component(e,v),f&&f.d(v),m&&m.d(v),h&&h.d(v),p&&p.d(v),g&&g.d(v),b&&b.d(v)}}}function instance$9(o,e,t){let n;return component_subscribe(o,visibleSelectedWidget,r=>t(0,n=r)),[n]}class WidgetContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$9,create_fragment$9,safe_not_equal,{})}}const WidgetContainer$1=Object.freeze(Object.defineProperty({__proto__:null,default:WidgetContainer},Symbol.toStringTag,{value:"Module"})),TabContent_svelte_svelte_type_style_lang="";function create_fragment$8(o){let e,t,n;const r=[o[3],{tabid:o[0]},{tabVisible:o[1]}];var a=o[2];function s(l){let u={};for(let d=0;d<r.length;d+=1)u=assign(u,r[d]);return{props:u}}return a&&(t=construct_svelte_component(a,s())),{c(){e=element("div"),t&&create_component(t.$$.fragment),attr(e,"class","svelte-3h7mlk"),toggle_class(e,"tabVisible",o[1])},m(l,u){insert(l,e,u),t&&mount_component(t,e,null),n=!0},p(l,[u]){const d=u&11?get_spread_update(r,[u&8&&get_spread_object(l[3]),u&1&&{tabid:l[0]},u&2&&{tabVisible:l[1]}]):{};if(u&4&&a!==(a=l[2])){if(t){group_outros();const f=t;transition_out(f.$$.fragment,1,0,()=>{destroy_component(f,1)}),check_outros()}a?(t=construct_svelte_component(a,s()),create_component(t.$$.fragment),transition_in(t.$$.fragment,1),mount_component(t,e,null)):t=null}else a&&t.$set(d);(!n||u&2)&&toggle_class(e,"tabVisible",l[1])},i(l){n||(t&&transition_in(t.$$.fragment,l),n=!0)},o(l){t&&transition_out(t.$$.fragment,l),n=!1},d(l){l&&detach(e),t&&destroy_component(t)}}}function instance$8(o,e,t){const n=["tabid","tabVisible","tabComponent"];let r=compute_rest_props(e,n),{tabid:a}=e,{tabVisible:s}=e,{tabComponent:l}=e;const u=writable(s);return setContext("tabid",a),setContext("tabVisible",u),o.$$set=d=>{e=assign(assign({},e),exclude_internal_props(d)),t(3,r=compute_rest_props(e,n)),"tabid"in d&&t(0,a=d.tabid),"tabVisible"in d&&t(1,s=d.tabVisible),"tabComponent"in d&&t(2,l=d.tabComponent)},o.$$.update=()=>{o.$$.dirty&2&&u.set(s)},[a,s,l,r]}class TabContent extends SvelteComponent{constructor(e){super(),init(this,e,instance$8,create_fragment$8,safe_not_equal,{tabid:0,tabVisible:1,tabComponent:2})}}function get_each_context$1(o,e,t){const n=o.slice();return n[6]=e[t],n}function create_each_block$1(o,e){var l,u;let t,n,r;const a=[{tabComponent:e[1][e[6]]},(l=e[2][e[6]])==null?void 0:l.props,{tabid:e[6]},{tabVisible:e[6]==((u=e[0])==null?void 0:u.tabid)}];let s={};for(let d=0;d<a.length;d+=1)s=assign(s,a[d]);return n=new TabContent({props:s}),{key:o,first:null,c(){t=empty(),create_component(n.$$.fragment),this.first=t},m(d,f){insert(d,t,f),mount_component(n,d,f),r=!0},p(d,f){var h,p;e=d;const m=f&7?get_spread_update(a,[f&2&&{tabComponent:e[1][e[6]]},f&6&&get_spread_object((h=e[2][e[6]])==null?void 0:h.props),f&2&&{tabid:e[6]},f&3&&{tabVisible:e[6]==((p=e[0])==null?void 0:p.tabid)}]):{};n.$set(m)},i(d){r||(transition_in(n.$$.fragment,d),r=!0)},o(d){transition_out(n.$$.fragment,d),r=!1},d(d){d&&detach(t),destroy_component(n,d)}}}function create_fragment$7(o){let e=[],t=new Map,n,r,a=ensure_array_like(_.keys(o[1]));const s=l=>l[6];for(let l=0;l<a.length;l+=1){let u=get_each_context$1(o,a,l),d=s(u);t.set(d,e[l]=create_each_block$1(d,u))}return{c(){for(let l=0;l<e.length;l+=1)e[l].c();n=empty()},m(l,u){for(let d=0;d<e.length;d+=1)e[d]&&e[d].m(l,u);insert(l,n,u),r=!0},p(l,[u]){u&7&&(a=ensure_array_like(_.keys(l[1])),group_outros(),e=update_keyed_each(e,u,s,1,l,a,t,n.parentNode,outro_and_destroy_block,create_each_block$1,n,get_each_context$1),check_outros())},i(l){if(!r){for(let u=0;u<a.length;u+=1)transition_in(e[u]);r=!0}},o(l){for(let u=0;u<e.length;u+=1)transition_out(e[u]);r=!1},d(l){l&&detach(n);for(let u=0;u<e.length;u+=1)e[u].d(l)}}}function instance$7(o,e,t){let n,r;component_subscribe(o,openedTabs,d=>t(5,r=d));var a;let{multiTabIndex:s}=e,{shownTab:l}=e,u={};return o.$$set=d=>{"multiTabIndex"in d&&t(3,s=d.multiTabIndex),"shownTab"in d&&t(0,l=d.shownTab)},o.$$.update=()=>{if(o.$$.dirty&42&&_.difference(_.keys(u),_.map(r.filter(d=>d.closedTime==null&&(d.multiTabIndex||0)==s),"tabid")).length>0&&t(1,u=_.pickBy(u,(d,f)=>r.find(m=>m.tabid==f&&m.closedTime==null&&(m.multiTabIndex||0)==s))),o.$$.dirty&19&&l){const{tabid:d}=l;if(d&&!u[d]){const f=t(4,a=tabs[l.tabComponent])===null||a===void 0?void 0:a.default;f&&t(1,u=Object.assign(Object.assign({},u),{[d]:f}))}}o.$$.dirty&32&&t(2,n=_.keyBy(r,d=>d.tabid))},[l,u,n,s,a,r]}class TabRegister extends SvelteComponent{constructor(e){super(),init(this,e,instance$7,create_fragment$7,safe_not_equal,{multiTabIndex:3,shownTab:0})}}function __awaiter(o,e,t,n){function r(a){return a instanceof t?a:new t(function(s){s(a)})}return new(t||(t=Promise))(function(a,s){function l(f){try{d(n.next(f))}catch(m){s(m)}}function u(f){try{d(n.throw(f))}catch(m){s(m)}}function d(f){f.done?a(f.value):r(f.value).then(l,u)}d((n=n.apply(o,e||[])).next())})}function __generator(o,e){var t={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},n,r,a,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(d){return function(f){return u([d,f])}}function u(d){if(n)throw new TypeError("Generator is already executing.");for(;s&&(s=0,d[0]&&(t=0)),t;)try{if(n=1,r&&(a=d[0]&2?r.return:d[0]?r.throw||((a=r.return)&&a.call(r),0):r.next)&&!(a=a.call(r,d[1])).done)return a;switch(r=0,a&&(d=[d[0]&2,a.value]),d[0]){case 0:case 1:a=d;break;case 4:return t.label++,{value:d[1],done:!1};case 5:t.label++,r=d[1],d=[0];continue;case 7:d=t.ops.pop(),t.trys.pop();continue;default:if(a=t.trys,!(a=a.length>0&&a[a.length-1])&&(d[0]===6||d[0]===2)){t=0;continue}if(d[0]===3&&(!a||d[1]>a[0]&&d[1]<a[3])){t.label=d[1];break}if(d[0]===6&&t.label<a[1]){t.label=a[1],a=d;break}if(a&&t.label<a[2]){t.label=a[2],t.ops.push(d);break}a[2]&&t.ops.pop(),t.trys.pop();continue}d=e.call(o,t)}catch(f){d=[6,f],r=0}finally{n=a=0}if(d[0]&5)throw d[1];return{value:d[0]?d[1]:void 0,done:!0}}}function __read(o,e){var t=typeof Symbol=="function"&&o[Symbol.iterator];if(!t)return o;var n=t.call(o),r,a=[],s;try{for(;(e===void 0||e-- >0)&&!(r=n.next()).done;)a.push(r.value)}catch(l){s={error:l}}finally{try{r&&!r.done&&(t=n.return)&&t.call(n)}finally{if(s)throw s.error}}return a}function __spread(){for(var o=[],e=0;e<arguments.length;e++)o=o.concat(__read(arguments[e]));return o}typeof SuppressedError=="function"&&SuppressedError;var COMMON_MIME_TYPES=new Map([["avi","video/avi"],["gif","image/gif"],["ico","image/x-icon"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["mkv","video/x-matroska"],["mov","video/quicktime"],["mp4","video/mp4"],["pdf","application/pdf"],["png","image/png"],["zip","application/zip"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"]]);function toFileWithPath(o,e){var t=withMimeType(o);if(typeof t.path!="string"){var n=o.webkitRelativePath;Object.defineProperty(t,"path",{value:typeof e=="string"?e:typeof n=="string"&&n.length>0?n:o.name,writable:!1,configurable:!1,enumerable:!0})}return t}function withMimeType(o){var e=o.name,t=e&&e.lastIndexOf(".")!==-1;if(t&&!o.type){var n=e.split(".").pop().toLowerCase(),r=COMMON_MIME_TYPES.get(n);r&&Object.defineProperty(o,"type",{value:r,writable:!1,configurable:!1,enumerable:!0})}return o}var FILES_TO_IGNORE=[".DS_Store","Thumbs.db"];function fromEvent(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,isDragEvt(o)&&o.dataTransfer?getDataTransferFiles(o.dataTransfer,o.type):getInputFiles(o)]})})}function isDragEvt(o){return!!o.dataTransfer}function getInputFiles(o){var e=isInput(o.target)?o.target.files?fromList(o.target.files):[]:[];return e.map(function(t){return toFileWithPath(t)})}function isInput(o){return o!==null}function getDataTransferFiles(o,e){return __awaiter(this,void 0,void 0,function(){var t,n;return __generator(this,function(r){switch(r.label){case 0:return o.items?(t=fromList(o.items).filter(function(a){return a.kind==="file"}),e!=="drop"?[2,t]:[4,Promise.all(t.map(toFilePromises))]):[3,2];case 1:return n=r.sent(),[2,noIgnoredFiles(flatten(n))];case 2:return[2,noIgnoredFiles(fromList(o.files).map(function(a){return toFileWithPath(a)}))]}})})}function noIgnoredFiles(o){return o.filter(function(e){return FILES_TO_IGNORE.indexOf(e.name)===-1})}function fromList(o){for(var e=[],t=0;t<o.length;t++){var n=o[t];e.push(n)}return e}function toFilePromises(o){if(typeof o.webkitGetAsEntry!="function")return fromDataTransferItem(o);var e=o.webkitGetAsEntry();return e&&e.isDirectory?fromDirEntry(e):fromDataTransferItem(o)}function flatten(o){return o.reduce(function(e,t){return __spread(e,Array.isArray(t)?flatten(t):[t])},[])}function fromDataTransferItem(o){var e=o.getAsFile();if(!e)return Promise.reject(o+" is not a File");var t=toFileWithPath(e);return Promise.resolve(t)}function fromEntry(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,o.isDirectory?fromDirEntry(o):fromFileEntry(o)]})})}function fromDirEntry(o){var e=o.createReader();return new Promise(function(t,n){var r=[];function a(){var s=this;e.readEntries(function(l){return __awaiter(s,void 0,void 0,function(){var u,d,f;return __generator(this,function(m){switch(m.label){case 0:if(l.length)return[3,5];m.label=1;case 1:return m.trys.push([1,3,,4]),[4,Promise.all(r)];case 2:return u=m.sent(),t(u),[3,4];case 3:return d=m.sent(),n(d),[3,4];case 4:return[3,6];case 5:f=Promise.all(l.map(fromEntry)),r.push(f),a(),m.label=6;case 6:return[2]}})})},function(l){n(l)})}a()})}function fromFileEntry(o){return __awaiter(this,void 0,void 0,function(){return __generator(this,function(e){return[2,new Promise(function(t,n){o.file(function(r){var a=toFileWithPath(r,o.fullPath);t(a)},function(r){n(r)})})]})})}function isEvtWithFiles(o){return o.dataTransfer?Array.prototype.some.call(o.dataTransfer.types,e=>e==="Files"||e==="application/x-moz-file"):!!o.target&&!!o.target.files}function dragDropFileTarget(o,e){let t=[];function n(l){return l.preventDefault(),l.stopPropagation(),t=[...t,l.target],isEvtWithFiles(l)&&isFileDragActive.set(!0),!1}function r(l){if(l.preventDefault(),l.stopPropagation(),l.dataTransfer)try{l.dataTransfer.dropEffect="copy"}catch{}}function a(l){l.preventDefault(),l.stopPropagation();const u=t.filter(f=>o&&o.contains(f)),d=u.indexOf(l.target);d!==-1&&u.splice(d,1),t=u,!(u.length>0)&&isFileDragActive.set(!1)}async function s(l){if(l.preventDefault(),l.stopPropagation(),isFileDragActive.set(!1),isEvtWithFiles(l)){const u=await fromEvent(l);uploadFiles(u)}}return o.addEventListener("dragenter",n),o.addEventListener("dragover",r),o.addEventListener("dragleave",a),o.addEventListener("drop",s),{destroy(){o.removeEventListener("dragenter",n),o.removeEventListener("dragover",r),o.removeEventListener("dragleave",a),o.removeEventListener("drop",s)}}}const TabsContainer_svelte_svelte_type_style_lang="";function create_fragment$6(o){let e,t,n,r,a,s;return t=new TabsPanel({props:{multiTabIndex:o[0],shownTab:o[1]}}),a=new TabRegister({props:{multiTabIndex:o[0],shownTab:o[1]}}),{c(){e=element("div"),create_component(t.$$.fragment),n=space(),r=element("div"),create_component(a.$$.fragment),attr(e,"class","tabs svelte-685oc7"),attr(r,"class","content svelte-685oc7")},m(l,u){insert(l,e,u),mount_component(t,e,null),insert(l,n,u),insert(l,r,u),mount_component(a,r,null),s=!0},p(l,[u]){const d={};u&1&&(d.multiTabIndex=l[0]),u&2&&(d.shownTab=l[1]),t.$set(d);const f={};u&1&&(f.multiTabIndex=l[0]),u&2&&(f.shownTab=l[1]),a.$set(f)},i(l){s||(transition_in(t.$$.fragment,l),transition_in(a.$$.fragment,l),s=!0)},o(l){transition_out(t.$$.fragment,l),transition_out(a.$$.fragment,l),s=!1},d(l){l&&(detach(e),detach(n),detach(r)),destroy_component(t),destroy_component(a)}}}function instance$6(o,e,t){let n,r,a,s;component_subscribe(o,currentDatabase,d=>t(2,r=d)),component_subscribe(o,lockedDatabaseMode,d=>t(3,a=d)),component_subscribe(o,openedTabs,d=>t(4,s=d));let{multiTabIndex:l}=e;function u(d,f,m,h){const p=d.find(b=>b.selected&&b.closedTime==null&&(b.multiTabIndex||0)==f&&shouldShowTab(b,m,h));if(p)return p;const g=_.findLastIndex(d,b=>(b.multiTabIndex||0)==f&&shouldShowTab(b,m,h));return d[g]}return o.$$set=d=>{"multiTabIndex"in d&&t(0,l=d.multiTabIndex)},o.$$.update=()=>{o.$$.dirty&29&&t(1,n=u(s,l,a,r))},[l,n,r,a,s]}class TabsContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$6,create_fragment$6,safe_not_equal,{multiTabIndex:0})}}function create__1_slot(o){let e,t,n;return t=new TabsContainer({props:{multiTabIndex:0}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","container"),attr(e,"slot","1")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p:noop$1,i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create__2_slot(o){let e,t,n;return t=new TabsContainer({props:{multiTabIndex:1}}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","container"),attr(e,"slot","2")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},p:noop$1,i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_fragment$5(o){let e,t;return e=new HorizontalSplitter({props:{hideFirst:!o[1]&&o[0],isSplitter:o[0],allowCollapseChild1:!0,allowCollapseChild2:!0,$$slots:{2:[create__2_slot],1:[create__1_slot]},$$scope:{ctx:o}}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,[r]){const a={};r&3&&(a.hideFirst=!n[1]&&n[0]),r&1&&(a.isSplitter=n[0]),r&64&&(a.$$scope={dirty:r,ctx:n}),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function instance$5(o,e,t){let n,r,a,s,l,u;return component_subscribe(o,currentDatabase,d=>t(3,s=d)),component_subscribe(o,lockedDatabaseMode,d=>t(4,l=d)),component_subscribe(o,openedTabs,d=>t(5,u=d)),o.$$.update=()=>{o.$$.dirty&56&&t(2,n=u.filter(d=>shouldShowTab(d,l,s))),o.$$.dirty&4&&t(1,r=!!n.find(d=>!d.multiTabIndex)),o.$$.dirty&4&&t(0,a=!!n.find(d=>d.multiTabIndex==1))},[a,r,n,s,l,u]}class MultiTabsContainer extends SvelteComponent{constructor(e){super(),init(this,e,instance$5,create_fragment$5,safe_not_equal,{})}}const Screen_svelte_svelte_type_style_lang="";function get_each_context(o,e,t){const n=o.slice();return n[14]=e[t],n}function create_if_block_6(o){let e,t;return{c(){e=new HtmlTag(!1),t=empty(),e.a=t},m(n,r){e.m(o[1],n,r),insert(n,t,r)},p(n,r){r&2&&e.p(n[1])},d(n){n&&(detach(t),e.d())}}}function create_if_block_5(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_8,then:create_then_block_8,catch:create_catch_block_8,value:25,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("TitleBar"),n),{c(){e=element("div"),n.block.c(),attr(e,"class","titlebar svelte-1fav6mz")},m(r,a){insert(r,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(),n.token=null,n=null}}}function create_catch_block_8(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_8(o){let e,t;return e=new o[25]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_8(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_7(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_7(o){let e,t;return e=new o[24]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_7(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_6(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_6(o){let e,t;return e=new o[23]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_6(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_4(o){let e,t,n;return t=new WidgetContainer({}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","leftpanel svelte-1fav6mz")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_if_block_3(o){let e,t,n;return{c(){e=element("div"),attr(e,"class","horizontal-split-handle splitter svelte-1fav6mz")},m(r,a){insert(r,e,a),t||(n=[action_destroyer(splitterDrag.call(null,e,"clientX")),listen(e,"resizeSplitter",o[13])],t=!0)},p:noop$1,d(r){r&&detach(e),t=!1,run_all(n)}}}function create_catch_block_5$1(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_5$1(o){let e,t,n=o[7]&&create_if_block_2(o);return{c(){n&&n.c(),e=empty()},m(r,a){n&&n.m(r,a),insert(r,e,a),t=!0},p(r,a){r[7]?n?a&128&&transition_in(n,1):(n=create_if_block_2(r),n.c(),transition_in(n,1),n.m(e.parentNode,e)):n&&(group_outros(),transition_out(n,1,1,()=>{n=null}),check_outros())},i(r){t||(transition_in(n),t=!0)},o(r){transition_out(n),t=!1},d(r){r&&detach(e),n&&n.d(r)}}}function create_if_block_2(o){let e,t,n;return t=new o[22]({}),{c(){e=element("div"),create_component(t.$$.fragment),attr(e,"class","commads svelte-1fav6mz")},m(r,a){insert(r,e,a),mount_component(t,e,null),n=!0},i(r){n||(transition_in(t.$$.fragment,r),n=!0)},o(r){transition_out(t.$$.fragment,r),n=!1},d(r){r&&detach(e),destroy_component(t)}}}function create_pending_block_5$1(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block_1$1(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_4$1,then:create_then_block_4$1,catch:create_catch_block_4$1,value:21,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("Toolbar"),n),{c(){e=element("div"),n.block.c(),attr(e,"class","toolbar svelte-1fav6mz")},m(r,a){insert(r,e,a),n.block.m(e,n.anchor=null),n.mount=()=>e,n.anchor=null,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(),n.token=null,n=null}}}function create_catch_block_4$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_4$1(o){let e,t;return e=new o[21]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_4$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_3$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_3$1(o){let e,t;return e=new o[20]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_3$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_2$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_2$1(o){let e,t;return e=new o[19]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_2$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_if_block$2(o){let e,t,n={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_1$1,then:create_then_block_1$1,catch:create_catch_block_1$1,value:18,blocks:[,,,]};return handle_promise(o[12](),n),{c(){e=empty(),n.block.c()},m(r,a){insert(r,e,a),n.block.m(r,n.anchor=a),n.mount=()=>e.parentNode,n.anchor=e,t=!0},p(r,a){o=r},i(r){t||(transition_in(n.block),t=!0)},o(r){for(let a=0;a<3;a+=1){const s=n.blocks[a];transition_out(s)}t=!1},d(r){r&&detach(e),n.block.d(r),n.token=null,n=null}}}function create_catch_block_1$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_1$1(o){let e,t;return e=new o[18]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_1$1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block$1(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block$1(o){let e,t,n;const r=[o[14]];let a={};for(let s=0;s<r.length;s+=1)a=assign(a,r[s]);return e=new o[17]({props:a}),{c(){create_component(e.$$.fragment),t=space()},m(s,l){mount_component(e,s,l),insert(s,t,l),n=!0},p(s,l){const u=l&1024?get_spread_update(r,[get_spread_object(s[14])]):{};e.$set(u)},i(s){n||(transition_in(e.$$.fragment,s),n=!0)},o(s){transition_out(e.$$.fragment,s),n=!1},d(s){s&&detach(t),destroy_component(e,s)}}}function create_pending_block$1(o){return{c:noop$1,m:noop$1,p:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_each_block(o,e){let t,n,r,a={ctx:e,current:null,token:null,hasCatch:!1,pending:create_pending_block$1,then:create_then_block$1,catch:create_catch_block$1,value:17,blocks:[,,,]};return handle_promise(loadWidgetsSvelte("Snackbar"),a),{key:o,first:null,c(){t=empty(),n=empty(),a.block.c(),this.first=t},m(s,l){insert(s,t,l),insert(s,n,l),a.block.m(s,a.anchor=l),a.mount=()=>n.parentNode,a.anchor=n,r=!0},p(s,l){e=s,update_await_block_branch(a,e,l)},i(s){r||(transition_in(a.block),r=!0)},o(s){for(let l=0;l<3;l+=1){const u=a.blocks[l];transition_out(u)}r=!1},d(s){s&&(detach(t),detach(n)),a.block.d(s),a.token=null,a=null}}}function create_fragment$4(o){var de;let e,t,n,r,a,s,l,u,d,f,m,h,p,g,b,v,y,C,E,A,k,T,$,S,I,R,N,M=[],F=new Map,D,x,B,K,U=((de=o[0])==null?void 0:de.themeCss)&&create_if_block_6(o);a=new FontIcon({props:{icon:"img warn"}});let G=o[4]&&create_if_block_5(o),W={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_7,then:create_then_block_7,catch:create_catch_block_7,value:24,blocks:[,,,]};handle_promise(loadWidgetsSvelte("WidgetIconPanel"),W);let q={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_6,then:create_then_block_6,catch:create_catch_block_6,value:23,blocks:[,,,]};handle_promise(loadWidgetsSvelte("StatusBar"),q);let H=o[5]&&o[6]&&create_if_block_4();E=new MultiTabsContainer({});let z=o[5]&&o[6]&&create_if_block_3(o),Y={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_5$1,then:create_then_block_5$1,catch:create_catch_block_5$1,value:22,blocks:[,,,]};handle_promise(loadCommandsSvelte("CommandPalette"),Y);let V=o[8]&&create_if_block_1$1(o),J={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_3$1,then:create_then_block_3$1,catch:create_catch_block_3$1,value:20,blocks:[,,,]};handle_promise(loadModalsSvelte("CurrentDropDownMenu"),J);let Q={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_2$1,then:create_then_block_2$1,catch:create_catch_block_2$1,value:19,blocks:[,,,]};handle_promise(loadModalsSvelte("ModalLayer"),Q);let X=o[9]&&create_if_block$2(o),ie=ensure_array_like(o[10]);const ce=se=>se[14].id;for(let se=0;se<ie.length;se+=1){let me=get_each_context(o,ie,se),ue=ce(me);F.set(ue,M[se]=create_each_block(ue,me))}return{c(){U&&U.c(),e=empty(),t=space(),n=element("div"),r=element("div"),create_component(a.$$.fragment),s=space(),l=element("div"),l.textContent="Sorry, DbGate is not supported on mobile devices.",u=space(),d=element("div"),d.innerHTML='Please visit <a href="https://dbgate.org">DbGate web</a> for more info.',f=space(),m=element("div"),G&&G.c(),h=space(),p=element("div"),W.block.c(),g=space(),b=element("div"),q.block.c(),v=space(),H&&H.c(),y=space(),C=element("div"),create_component(E.$$.fragment),A=space(),z&&z.c(),k=space(),Y.block.c(),T=space(),V&&V.c(),$=space(),J.block.c(),S=space(),Q.block.c(),I=space(),X&&X.c(),R=space(),N=element("div");for(let se=0;se<M.length;se+=1)M[se].c();attr(r,"class","m-5 big-icon svelte-1fav6mz"),attr(l,"class","m-3"),attr(d,"class","m-3"),attr(n,"class","not-supported svelte-1fav6mz"),toggle_class(n,"isElectron",o[11]),attr(p,"class","iconbar svelte-1fav6mz"),attr(b,"class","statusbar svelte-1fav6mz"),attr(C,"class","tabs-container svelte-1fav6mz"),attr(N,"class","snackbar-container svelte-1fav6mz"),attr(m,"class",D=null_to_empty(`${o[3]} ${o[2]} root dbgate-screen`)+" svelte-1fav6mz"),toggle_class(m,"isElectron",o[11])},m(se,me){U&&U.m(document.head,null),append(document.head,e),insert(se,t,me),insert(se,n,me),append(n,r),mount_component(a,r,null),append(n,s),append(n,l),append(n,u),append(n,d),insert(se,f,me),insert(se,m,me),G&&G.m(m,null),append(m,h),append(m,p),W.block.m(p,W.anchor=null),W.mount=()=>p,W.anchor=null,append(m,g),append(m,b),q.block.m(b,q.anchor=null),q.mount=()=>b,q.anchor=null,append(m,v),H&&H.m(m,null),append(m,y),append(m,C),mount_component(E,C,null),append(m,A),z&&z.m(m,null),append(m,k),Y.block.m(m,Y.anchor=null),Y.mount=()=>m,Y.anchor=T,append(m,T),V&&V.m(m,null),append(m,$),J.block.m(m,J.anchor=null),J.mount=()=>m,J.anchor=S,append(m,S),Q.block.m(m,Q.anchor=null),Q.mount=()=>m,Q.anchor=I,append(m,I),X&&X.m(m,null),append(m,R),append(m,N);for(let ue=0;ue<M.length;ue+=1)M[ue]&&M[ue].m(N,null);x=!0,B||(K=[action_destroyer(dragDropFileTarget.call(null,m)),listen(m,"contextmenu",contextmenu_handler)],B=!0)},p(se,[me]){var ue;o=se,(ue=o[0])!=null&&ue.themeCss?U?U.p(o,me):(U=create_if_block_6(o),U.c(),U.m(e.parentNode,e)):U&&(U.d(1),U=null),o[4]?G?(G.p(o,me),me&16&&transition_in(G,1)):(G=create_if_block_5(o),G.c(),transition_in(G,1),G.m(m,h)):G&&(group_outros(),transition_out(G,1,1,()=>{G=null}),check_outros()),o[5]&&o[6]?H?me&96&&transition_in(H,1):(H=create_if_block_4(),H.c(),transition_in(H,1),H.m(m,y)):H&&(group_outros(),transition_out(H,1,1,()=>{H=null}),check_outros()),o[5]&&o[6]?z?z.p(o,me):(z=create_if_block_3(o),z.c(),z.m(m,k)):z&&(z.d(1),z=null),update_await_block_branch(Y,o,me),o[8]?V?(V.p(o,me),me&256&&transition_in(V,1)):(V=create_if_block_1$1(o),V.c(),transition_in(V,1),V.m(m,$)):V&&(group_outros(),transition_out(V,1,1,()=>{V=null}),check_outros()),o[9]?X?(X.p(o,me),me&512&&transition_in(X,1)):(X=create_if_block$2(o),X.c(),transition_in(X,1),X.m(m,R)):X&&(group_outros(),transition_out(X,1,1,()=>{X=null}),check_outros()),me&1024&&(ie=ensure_array_like(o[10]),group_outros(),M=update_keyed_each(M,me,ce,1,o,ie,F,N,outro_and_destroy_block,create_each_block,null,get_each_context),check_outros()),(!x||me&12&&D!==(D=null_to_empty(`${o[3]} ${o[2]} root dbgate-screen`)+" svelte-1fav6mz"))&&attr(m,"class",D),(!x||me&2060)&&toggle_class(m,"isElectron",o[11])},i(se){if(!x){transition_in(a.$$.fragment,se),transition_in(G),transition_in(W.block),transition_in(q.block),transition_in(H),transition_in(E.$$.fragment,se),transition_in(Y.block),transition_in(V),transition_in(J.block),transition_in(Q.block),transition_in(X);for(let me=0;me<ie.length;me+=1)transition_in(M[me]);x=!0}},o(se){transition_out(a.$$.fragment,se),transition_out(G);for(let me=0;me<3;me+=1){const ue=W.blocks[me];transition_out(ue)}for(let me=0;me<3;me+=1){const ue=q.blocks[me];transition_out(ue)}transition_out(H),transition_out(E.$$.fragment,se);for(let me=0;me<3;me+=1){const ue=Y.blocks[me];transition_out(ue)}transition_out(V);for(let me=0;me<3;me+=1){const ue=J.blocks[me];transition_out(ue)}for(let me=0;me<3;me+=1){const ue=Q.blocks[me];transition_out(ue)}transition_out(X);for(let me=0;me<M.length;me+=1)transition_out(M[me]);x=!1},d(se){se&&(detach(t),detach(n),detach(f),detach(m)),U&&U.d(se),detach(e),destroy_component(a),G&&G.d(),W.block.d(),W.token=null,W=null,q.block.d(),q.token=null,q=null,H&&H.d(),destroy_component(E),z&&z.d(),Y.block.d(),Y.token=null,Y=null,V&&V.d(),J.block.d(),J.token=null,J=null,Q.block.d(),Q.token=null,Q=null,X&&X.d();for(let me=0;me<M.length;me+=1)M[me].d();B=!1,run_all(K)}}}const contextmenu_handler=o=>o.preventDefault();function instance$4(o,e,t){let n,r,a,s,l,u,d,f,m,h,p;component_subscribe(o,currentThemeDefinition,y=>t(0,a=y)),component_subscribe(o,currentTheme,y=>t(3,s=y)),component_subscribe(o,visibleTitleBar,y=>t(4,l=y)),component_subscribe(o,selectedWidget,y=>t(5,u=y)),component_subscribe(o,visibleWidgetSideBar,y=>t(6,d=y)),component_subscribe(o,visibleCommandPalette,y=>t(7,f=y)),component_subscribe(o,visibleToolbar,y=>t(8,m=y)),component_subscribe(o,isFileDragActive,y=>t(9,h=y)),component_subscribe(o,openedSnackbars,y=>t(10,p=y));const g=!!getElectron();let b=async()=>(await __vitePreload(()=>import("./DragAndDropFileTarget-cca5dc29.js"),["assets/DragAndDropFileTarget-cca5dc29.js","assets/lodash-29c9ec56.js","assets/dbgate-datalib-0d3b84db.js","assets/DragAndDropFileTarget-8dc30574.css"])).default;const v=y=>leftPanelWidth.update(C=>C+y.detail);return o.$$.update=()=>{o.$$.dirty&1&&t(2,n=(a==null?void 0:a.themeType)=="dark"?"theme-type-dark":"theme-type-light"),o.$$.dirty&1&&t(1,r=`<style id="themePlugin">${a==null?void 0:a.themeCss}</style>`)},[a,r,n,s,l,u,d,f,m,h,p,g,b,v]}class Screen extends SvelteComponent{constructor(e){super(),init(this,e,instance$4,create_fragment$4,safe_not_equal,{})}}let appIsLoaded=!1,onLoad=[];function setAppLoaded(){appIsLoaded=!0;for(const o of onLoad)o();onLoad=[]}function getAppLoaded(){return appIsLoaded}function callWhenAppLoaded(o){appIsLoaded?o():onLoad.push(o)}const doServerPing=o=>{apiCall("server-connections/ping",{conidArray:o})},doDatabasePing=o=>{const e=_.get(o,"name"),t=_.get(o,"connection._id");t&&e&&apiCall("database-connections/ping",{conid:t,database:e})};let openedConnectionsHandle=null,currentDatabaseHandle=null;function subscribeConnectionPingers(){openedConnections.subscribe(o=>{doServerPing(o),openedConnectionsHandle&&window.clearInterval(openedConnectionsHandle),openedConnectionsHandle=window.setInterval(()=>doServerPing(o),20*1e3)}),currentDatabase.subscribe(o=>{doDatabasePing(o),currentDatabaseHandle&&window.clearInterval(currentDatabaseHandle),currentDatabaseHandle=window.setInterval(()=>doDatabasePing(o),20*1e3)})}const AppStartInfo_svelte_svelte_type_style_lang="";function create_fragment$3(o){let e,t,n,r,a,s;return{c(){e=element("div"),t=element("div"),n=element("div"),n.innerHTML='<div class="svelte-45vupj"></div> <div class="svelte-45vupj"></div> <div class="svelte-45vupj"></div> <div class="svelte-45vupj"></div>',r=space(),a=element("div"),s=text(o[0]),attr(n,"class","lds-ellipsis svelte-45vupj"),attr(t,"class","inner-flex svelte-45vupj"),attr(e,"class","starting-dbgate svelte-45vupj")},m(l,u){insert(l,e,u),append(e,t),append(t,n),append(t,r),append(t,a),append(a,s)},p(l,[u]){u&1&&set_data(s,l[0])},i:noop$1,o:noop$1,d(l){l&&detach(e)}}}function instance$3(o,e,t){let{message:n}=e;return o.$$set=r=>{"message"in r&&t(0,n=r.message)},[n]}class AppStartInfo extends SvelteComponent{constructor(e){super(),init(this,e,instance$3,create_fragment$3,safe_not_equal,{message:0})}}const AppStartInfo$1=Object.freeze(Object.defineProperty({__proto__:null,default:AppStartInfo},Symbol.toStringTag,{value:"Module"}));function create_catch_block_5(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_5(o){let e,t;return e=new o[11]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_5(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_else_block_1(o){let e,t;return e=new AppStartInfo({props:{message:"Starting DbGate"}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p:noop$1,i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block$1(o){let e,t,n,r,a,s,l,u;e=new PluginsProvider({});let d={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_4,then:create_then_block_4,catch:create_catch_block_4,value:10,blocks:[,,,]};handle_promise(loadDataGridSvelte("DataGridRowHeightMeter"),d);const f=[create_if_block_1,create_else_block],m=[];function h(g,b){return g[2]?0:1}r=h(o),a=m[r]=f[r](o);let p={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block,then:create_then_block,catch:create_catch_block,value:6,blocks:[,,,]};return handle_promise(loadUtilitySvelte("AppTitleProvider"),p),{c(){create_component(e.$$.fragment),t=space(),d.block.c(),n=space(),a.c(),s=space(),l=empty(),p.block.c()},m(g,b){mount_component(e,g,b),insert(g,t,b),d.block.m(g,d.anchor=b),d.mount=()=>n.parentNode,d.anchor=n,insert(g,n,b),m[r].m(g,b),insert(g,s,b),insert(g,l,b),p.block.m(g,p.anchor=b),p.mount=()=>l.parentNode,p.anchor=l,u=!0},p(g,b){o=g;let v=r;r=h(o),r===v?m[r].p(o,b):(group_outros(),transition_out(m[v],1,1,()=>{m[v]=null}),check_outros(),a=m[r],a?a.p(o,b):(a=m[r]=f[r](o),a.c()),transition_in(a,1),a.m(s.parentNode,s))},i(g){u||(transition_in(e.$$.fragment,g),transition_in(d.block),transition_in(a),transition_in(p.block),u=!0)},o(g){transition_out(e.$$.fragment,g);for(let b=0;b<3;b+=1){const v=d.blocks[b];transition_out(v)}transition_out(a);for(let b=0;b<3;b+=1){const v=p.blocks[b];transition_out(v)}u=!1},d(g){g&&(detach(t),detach(n),detach(s),detach(l)),destroy_component(e,g),d.block.d(g),d.token=null,d=null,m[r].d(g),p.block.d(g),p.token=null,p=null}}}function create_catch_block_4(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_4(o){let e,t;return e=new o[10]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_4(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_else_block(o){let e,t;return e=new AppStartInfo({props:{message:o[1].loadingPackageName?`Loading plugin ${o[1].loadingPackageName} ...`:"Preparing plugins ..."}}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},p(n,r){const a={};r&2&&(a.message=n[1].loadingPackageName?`Loading plugin ${n[1].loadingPackageName} ...`:"Preparing plugins ..."),e.$set(a)},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_if_block_1(o){let e,t,n,r,a,s,l={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_3,then:create_then_block_3,catch:create_catch_block_3,value:9,blocks:[,,,]};handle_promise(loadUtilitySvelte("OpenTabsOnStartup"),l),t=new Screen({});let u={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_2,then:create_then_block_2,catch:create_catch_block_2,value:8,blocks:[,,,]};handle_promise(loadCommandsSvelte("CommandListener"),u);let d={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_1,then:create_then_block_1,catch:create_catch_block_1,value:7,blocks:[,,,]};return handle_promise(loadUtilitySvelte("SettingsListener"),d),{c(){l.block.c(),e=space(),create_component(t.$$.fragment),n=space(),u.block.c(),r=space(),a=empty(),d.block.c()},m(f,m){l.block.m(f,l.anchor=m),l.mount=()=>e.parentNode,l.anchor=e,insert(f,e,m),mount_component(t,f,m),insert(f,n,m),u.block.m(f,u.anchor=m),u.mount=()=>r.parentNode,u.anchor=r,insert(f,r,m),insert(f,a,m),d.block.m(f,d.anchor=m),d.mount=()=>a.parentNode,d.anchor=a,s=!0},p(f,m){o=f},i(f){s||(transition_in(l.block),transition_in(t.$$.fragment,f),transition_in(u.block),transition_in(d.block),s=!0)},o(f){for(let m=0;m<3;m+=1){const h=l.blocks[m];transition_out(h)}transition_out(t.$$.fragment,f);for(let m=0;m<3;m+=1){const h=u.blocks[m];transition_out(h)}for(let m=0;m<3;m+=1){const h=d.blocks[m];transition_out(h)}s=!1},d(f){f&&(detach(e),detach(n),detach(r),detach(a)),l.block.d(f),l.token=null,l=null,destroy_component(t,f),u.block.d(f),u.token=null,u=null,d.block.d(f),d.token=null,d=null}}}function create_catch_block_3(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_3(o){let e,t;return e=new o[9]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_3(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_2(o){let e,t;return e=new o[8]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_2(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block_1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block_1(o){let e,t;return e=new o[7]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block_1(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_catch_block(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_then_block(o){let e,t;return e=new o[6]({}),{c(){create_component(e.$$.fragment)},m(n,r){mount_component(e,n,r),t=!0},i(n){t||(transition_in(e.$$.fragment,n),t=!0)},o(n){transition_out(e.$$.fragment,n),t=!1},d(n){destroy_component(e,n)}}}function create_pending_block(o){return{c:noop$1,m:noop$1,i:noop$1,o:noop$1,d:noop$1}}function create_fragment$2(o){let e,t,n,r,a,s={ctx:o,current:null,token:null,hasCatch:!1,pending:create_pending_block_5,then:create_then_block_5,catch:create_catch_block_5,value:11,blocks:[,,,]};handle_promise(loadUtilitySvelte("ErrorHandler"),s);const l=[create_if_block$1,create_else_block_1],u=[];function d(f,m){return f[0]?0:1}return t=d(o),n=u[t]=l[t](o),{c(){s.block.c(),e=space(),n.c(),r=empty()},m(f,m){s.block.m(f,s.anchor=m),s.mount=()=>e.parentNode,s.anchor=e,insert(f,e,m),u[t].m(f,m),insert(f,r,m),a=!0},p(f,[m]){o=f;let h=t;t=d(o),t===h?u[t].p(o,m):(group_outros(),transition_out(u[h],1,1,()=>{u[h]=null}),check_outros(),n=u[t],n?n.p(o,m):(n=u[t]=l[t](o),n.c()),transition_in(n,1),n.m(r.parentNode,r))},i(f){a||(transition_in(s.block),transition_in(n),a=!0)},o(f){for(let m=0;m<3;m+=1){const h=s.blocks[m];transition_out(h)}transition_out(n),a=!1},d(f){f&&(detach(e),detach(r)),s.block.d(f),s.token=null,s=null,u[t].d(f)}}}function instance$2(o,e,t){let n;component_subscribe(o,loadingPluginStore,d=>t(1,n=d));var r=this&&this.__awaiter||function(d,f,m,h){function p(g){return g instanceof m?g:new m(function(b){b(g)})}return new(m||(m=Promise))(function(g,b){function v(E){try{C(h.next(E))}catch(A){b(A)}}function y(E){try{C(h.throw(E))}catch(A){b(A)}}function C(E){E.done?g(E.value):p(E.value).then(v,y)}C((h=h.apply(d,f||[])).next())})},a;let s=!1,l=!1;function u(){return r(this,void 0,void 0,function*(){try{const d=yield getConfig();yield handleAuthOnStartup(d);const f=yield apiCall("connections/list"),m=yield getSettings(),h=yield getUsedApps();t(0,s=m&&f&&d&&h),s&&(subscribeApiDependendStores(),subscribeConnectionPingers(),subscribePermissionCompiler()),s||(console.log("API not initialized correctly, trying again in 1s"),setTimeout(u,1e3))}catch{console.log("Error calling API, trying again in 1s"),setTimeout(u,1e3)}})}return onMount(u),onMount(()=>{const d=document.getElementById("starting_dbgate_zero");d&&d.remove()}),o.$$.update=()=>{o.$$.dirty&11&&s&&n!=null&&n.loaded&&(setAppLoaded(),t(2,l=!0),t(3,a=getElectron())===null||a===void 0||a.send("app-started"))},[s,n,l,a]}class App extends SvelteComponent{constructor(e){super(),init(this,e,instance$2,create_fragment$2,safe_not_equal,{})}}let lastCurrentTab=null;openedTabs.subscribe(o=>{var n,r;const e=(o||[]).find(a=>a.selected);if(e==lastCurrentTab||getLockedDatabaseMode()&&getCurrentDatabase())return;const t=lastCurrentTab;if(lastCurrentTab=e,e){const{conid:a,database:s}=e.props||{};a&&s&&(a!=((n=t==null?void 0:t.props)==null?void 0:n.conid)||s!=((r=t==null?void 0:t.props)==null?void 0:r.database))&&callWhenAppLoaded(async()=>{const u=await getConnectionInfo({conid:a});currentDatabase.set({connection:u,name:s})})}});currentDatabase.subscribe(o=>{getLockedDatabaseMode()&&(!o&&!getAppLoaded()||openedTabs.update(e=>{const t=e.map(r=>({...r,selected:r.selected&&shouldShowTab(r,!0,o)}));if(t.find(r=>r.selected))return t;const n=_.findLastIndex(t,r=>shouldShowTab(r));return t.map((r,a)=>({...r,selected:a==n}))}))});async function localStorageGarbageCollector(){const o=await localforage.getItem("openedTabs");let e;_.isString(o)?e=o?JSON.parse(o):[]:_.isArray(o)?e=o:e=[];const t=hooks().add(-7,"day").valueOf();e=e.filter(s=>!s.closedTime||s.closedTime>t),await localforage.setItem("openedTabs",JSON.stringify(e));const n=[];for(const s in localStorage)s.startsWith("tabdata_")&&(e.find(l=>s.endsWith("_"+l.tabid))||n.push(s));for(const s of n)localStorage.removeItem(s);const r=await localforage.keys(),a=[];for(const s in r)s.startsWith("tabdata_")&&(e.find(l=>s.endsWith("_"+l.tabid))||a.push(s));for(const s of a)await localforage.removeItem(s)}const LoginPage_svelte_svelte_type_style_lang="";function create_default_slot(o){let e,t,n,r,a,s,l;return e=new FormTextField({props:{label:"Username",name:"login",autocomplete:"username",saveOnInput:!0}}),n=new FormPasswordField({props:{label:"Password",name:"password",autocomplete:"current-password",saveOnInput:!0}}),s=new FormSubmit({props:{value:"Log In"}}),s.$on("click",o[0]),{c(){create_component(e.$$.fragment),t=space(),create_component(n.$$.fragment),r=space(),a=element("div"),create_component(s.$$.fragment),attr(a,"class","submit svelte-8utz2r")},m(u,d){mount_component(e,u,d),insert(u,t,d),mount_component(n,u,d),insert(u,r,d),insert(u,a,d),mount_component(s,a,null),l=!0},p:noop$1,i(u){l||(transition_in(e.$$.fragment,u),transition_in(n.$$.fragment,u),transition_in(s.$$.fragment,u),l=!0)},o(u){transition_out(e.$$.fragment,u),transition_out(n.$$.fragment,u),transition_out(s.$$.fragment,u),l=!1},d(u){u&&(detach(t),detach(r),detach(a)),destroy_component(e,u),destroy_component(n,u),destroy_component(s)}}}function create_fragment$1(o){let e,t,n,r,a,s,l,u,d,f,m;return f=new FormProvider({props:{$$slots:{default:[create_default_slot]},$$scope:{ctx:o}}}),{c(){e=element("div"),t=element("div"),t.textContent="DbGate",n=space(),r=element("div"),a=element("div"),a.innerHTML='<img class="img svelte-8utz2r" src="logo192.png"/>',s=space(),l=element("div"),u=element("div"),u.textContent="Log In",d=space(),create_component(f.$$.fragment),attr(t,"class","text svelte-8utz2r"),attr(a,"class","logo svelte-8utz2r"),attr(u,"class","heading svelte-8utz2r"),attr(l,"class","box svelte-8utz2r"),attr(r,"class","wrap svelte-8utz2r"),attr(e,"class","root theme-light theme-type-light svelte-8utz2r")},m(h,p){insert(h,e,p),append(e,t),append(e,n),append(e,r),append(r,a),append(r,s),append(r,l),append(l,u),append(l,d),mount_component(f,l,null),m=!0},p(h,[p]){const g={};p&2&&(g.$$scope={dirty:p,ctx:h}),f.$set(g)},i(h){m||(transition_in(f.$$.fragment,h),m=!0)},o(h){transition_out(f.$$.fragment,h),m=!1},d(h){h&&detach(e),destroy_component(f)}}}function instance$1(o){return onMount(()=>{const t=document.getElementById("starting_dbgate_zero");t&&t.remove()}),[async t=>{enableApi();const n=await apiCall("auth/login",t.detail);if(n.error){internalRedirectTo(`/?page=not-logged&error=${encodeURIComponent(n.error)}`);return}const{accessToken:r}=n;if(r){localStorage.setItem("accessToken",r),internalRedirectTo("/");return}internalRedirectTo("/?page=not-logged")}]}class LoginPage extends SvelteComponent{constructor(e){super(),init(this,e,instance$1,create_fragment$1,safe_not_equal,{})}}const NotLoggedPage_svelte_svelte_type_style_lang="";function create_if_block(o){let e;return{c(){e=element("div"),e.textContent=`${o[0]}`,attr(e,"class","error svelte-11u34pp")},m(t,n){insert(t,e,n)},p:noop$1,d(t){t&&detach(e)}}}function create_fragment(o){let e,t,n,r,a,s,l,u,d,f=o[0]&&create_if_block(o);return s=new FormStyledButton({props:{value:"Log In"}}),s.$on("click",o[1]),u=new FormStyledButton({props:{value:"Log Out"}}),u.$on("click",doLogout),{c(){e=element("div"),t=element("div"),t.textContent="Sorry, you are not authorized to run DbGate",n=space(),f&&f.c(),r=space(),a=element("div"),create_component(s.$$.fragment),l=space(),create_component(u.$$.fragment),attr(t,"class","title svelte-11u34pp"),attr(a,"class","button svelte-11u34pp"),attr(e,"class","root theme-light theme-type-light svelte-11u34pp")},m(m,h){insert(m,e,h),append(e,t),append(e,n),f&&f.m(e,null),append(e,r),append(e,a),mount_component(s,a,null),append(a,l),mount_component(u,a,null),d=!0},p(m,[h]){m[0]&&f.p(m,h)},i(m){d||(transition_in(s.$$.fragment,m),transition_in(u.$$.fragment,m),d=!0)},o(m){transition_out(s.$$.fragment,m),transition_out(u.$$.fragment,m),d=!1},d(m){m&&detach(e),f&&f.d(),destroy_component(s),destroy_component(u)}}}function instance(o){onMount(()=>{const r=document.getElementById("starting_dbgate_zero");r&&r.remove()});const t=new URLSearchParams(location.search).get("error");function n(){redirectToLogin(void 0,!0)}return[t,n]}class NotLoggedPage extends SvelteComponent{constructor(e){super(),init(this,e,instance,create_fragment,safe_not_equal,{})}}const isOauthCallback=handleOauthCallback(),params=new URLSearchParams(location.search),page=params.get("page");localStorageGarbageCollector();function createApp(){if(isOauthCallback)return null;switch(page){case"login":return new LoginPage({target:document.body,props:{}});case"not-logged":return new NotLoggedPage({target:document.body,props:{}})}return new App({target:document.body,props:{}})}createApp();export{keycodes as $,element as A,create_component as B,text as C,space as D,ErrorMessageModal as E,FontIcon as F,attr as G,toggle_class as H,insert as I,append as J,mount_component as K,set_input_value as L,action_destroyer as M,clickOutside as N,transition_in as O,check_outros as P,transition_out as Q,detach as R,SvelteComponent as S,destroy_component as T,destroy_each as U,run_all as V,useDatabaseInfo as W,useConnectionList as X,group_outros as Y,commandsCustomized as Z,set_store_value as _,currentDatabase as a,extractPluginDescription as a$,binding_callbacks as a0,formatKeyText as a1,set_data as a2,HtmlTag as a3,handleDatabaseObjectClick as a4,databaseObjectIcons as a5,getLocalStorage as a6,getConnectionLabel as a7,getCurrentConfig as a8,assign as a9,exportQuickExportFile as aA,getExtensions as aB,useArchiveFiles as aC,currentArchive as aD,useArchiveFolders as aE,empty as aF,JSONTree as aG,ErrorInfo as aH,SelectionMapView as aI,findLatPaths as aJ,findLonPaths as aK,findAllObjectPaths as aL,SelectField as aM,src_url_equal as aN,WidgetTitle as aO,selectionCouldBeShownOnMap as aP,selectedCellsCallback as aQ,construct_svelte_component as aR,hasPermission as aS,favoriteFileAppObject as aT,useFiles as aU,savedFileAppObject as aV,setSelectedTabFunc as aW,apiOn as aX,apiOff as aY,update_keyed_each as aZ,destroy_block as a_,AppObjectCore as aa,get_spread_update as ab,get_spread_object as ac,compute_rest_props as ad,exclude_internal_props as ae,apiCall as af,InputTextModal as ag,ConfirmModal as ah,SearchBoxWrapper as ai,WidgetsInnerContainer as aj,useAppFiles as ak,SearchInput as al,bind as am,CloseSearchButton as an,DropDownButton as ao,InlineButton as ap,add_flush_callback as aq,AppObjectList as ar,currentApplication as as,newQuery as at,showSnackbarError as au,useAppFolders as av,WidgetColumnBar as aw,WidgetColumnBarItem as ax,createQuickExportMenu as ay,ImportExportModal as az,activeTab as b,extractPluginAuthor as b0,extractPluginIcon as b1,useApiCall as b2,useInstalledPlugins as b3,FormStyledButton as b4,is_function as b5,openedSnackbars as b6,useDatabaseStatus as b7,useDatabaseServerVersion as b8,useConnectionColor as b9,setContext as bA,FormFieldTemplateLarge as bB,createRef as bC,extensions as bD,currentEditorTheme as bE,currentEditorFontSize as bF,FormValues as bG,TabControl as bH,FormTextField as bI,FormCheckboxField as bJ,FormSelectField as bK,SqlEditor as bL,CheckboxField as bM,EDITOR_THEMES as bN,FONT_SIZES as bO,TextField as bP,null_to_empty as bQ,currentTheme as bR,isFileDragActive as bS,activeTabId as ba,statusBarTabInfo as bb,selectedWidget as bc,findCommand as bd,ModalBase as be,ColorSelector as bf,isMac as bg,stop_propagation as bh,prevent_default as bi,prepareMenuItems as bj,currentDropDownMenu as bk,ToolbarButton as bl,visibleWidgetSideBar as bm,visibleSelectedWidget as bn,visibleHamburgerMenuWidget as bo,lockedDatabaseMode as bp,useConfig as bq,Link$1 as br,closeCurrentModal as bs,createEventDispatcher as bt,openedModals as bu,create_slot as bv,update_slot_base as bw,get_all_dirty_from_scope as bx,get_slot_changes as by,derived as bz,component_subscribe as c,localforage as d,subscribe as e,openedTabs as f,getElectron as g,openFavorite as h,init as i,showModal as j,getConnectionList as k,listen as l,openNewTab as m,noop$1 as n,onMount as o,getConfig as p,showSnackbarInfo as q,runCommand as r,safe_not_equal as s,useSettings as t,useFavorites as u,registerCommand as v,visibleCommandPalette as w,getVisibleCommandPalette as x,isElectronAvailable as y,ensure_array_like as z};
//# sourceMappingURL=index-632e4f1b.js.map
