import{S as Oe,i as Ee,s as We,z as fe,A as N,D as L,G as v,I as T,J as g,O as f,Q as p,P as M,R as D,U as je,c as Y,b7 as qe,b8 as Ge,a7 as Je,b9 as se,C as E,aF as Re,Y as O,a2 as G,F as V,B as H,K as A,l as K,T as F,H as ae,b5 as Ke,n as P,e as X,ba as Qe,bb as Ue,a as Ye,aD as Pe,bc as ue,af as Xe,j as de,w as Ze,bd as xe,_ as et}from"./index-632e4f1b.js";import{h as ie}from"./dbgate-datalib-0d3b84db.js";import me from"./ChooseConnectionColorModal-635d5fcc.js";import"./lodash-29c9ec56.js";function _e(l,t,e){const n=l.slice();return n[27]=t[e],n}function pe(l){let t,e,n,i,r,u,s,o;const c=[nt,tt],a=[];function h(_,b){var k;return(k=_[1])!=null&&k.isReadOnly?0:1}e=h(l),n=a[e]=c[e](l);let d=l[2]&&be(l);return{c(){t=N("div"),n.c(),i=L(),r=E(l[0]),u=L(),d&&d.c(),s=Re(),v(t,"class","item svelte-1yzh05e")},m(_,b){T(_,t,b),a[e].m(t,null),g(t,i),g(t,r),T(_,u,b),d&&d.m(_,b),T(_,s,b),o=!0},p(_,b){let k=e;e=h(_),e!==k&&(O(),p(a[k],1,1,()=>{a[k]=null}),M(),n=a[e],n||(n=a[e]=c[e](_),n.c()),f(n,1),n.m(t,i)),(!o||b&1)&&G(r,_[0]),_[2]?d?(d.p(_,b),b&4&&f(d,1)):(d=be(_),d.c(),f(d,1),d.m(s.parentNode,s)):d&&(O(),p(d,1,1,()=>{d=null}),M())},i(_){o||(f(n),f(d),o=!0)},o(_){p(n),p(d),o=!1},d(_){_&&(D(t),D(u),D(s)),a[e].d(),d&&d.d(_)}}}function tt(l){let t,e;return t=new V({props:{icon:"icon database",padRight:!0}}),{c(){H(t.$$.fragment)},m(n,i){A(t,n,i),e=!0},i(n){e||(f(t.$$.fragment,n),e=!0)},o(n){p(t.$$.fragment,n),e=!1},d(n){F(t,n)}}}function nt(l){let t,e;return t=new V({props:{icon:"icon lock",padRight:!0}}),{c(){H(t.$$.fragment)},m(n,i){A(t,n,i),e=!0},i(n){e||(f(t.$$.fragment,n),e=!0)},o(n){p(t.$$.fragment,n),e=!1},d(n){F(t,n)}}}function be(l){let t,e,n,i,r,u;return n=new V({props:{icon:"icon palette"}}),{c(){t=N("div"),e=N("div"),H(n.$$.fragment),v(e,"style",l[12]),v(e,"class","colorbox svelte-1yzh05e"),v(t,"class","item clickable svelte-1yzh05e"),v(t,"title","Database color. Overrides connection color")},m(s,o){T(s,t,o),g(t,e),A(n,e,null),i=!0,r||(u=K(t,"click",l[22]),r=!0)},p(s,o){(!i||o&4096)&&v(e,"style",s[12])},i(s){i||(f(n.$$.fragment,s),i=!0)},o(s){p(n.$$.fragment,s),i=!1},d(s){s&&D(t),F(n),r=!1,u()}}}function ke(l){let t,e,n,i,r,u,s;e=new V({props:{icon:"icon server",padRight:!0}});let o=l[2]&&$e(l);return{c(){t=N("div"),H(e.$$.fragment),n=L(),i=E(l[7]),r=L(),o&&o.c(),u=Re(),v(t,"class","item svelte-1yzh05e")},m(c,a){T(c,t,a),A(e,t,null),g(t,n),g(t,i),T(c,r,a),o&&o.m(c,a),T(c,u,a),s=!0},p(c,a){(!s||a&128)&&G(i,c[7]),c[2]?o?(o.p(c,a),a&4&&f(o,1)):(o=$e(c),o.c(),f(o,1),o.m(u.parentNode,u)):o&&(O(),p(o,1,1,()=>{o=null}),M())},i(c){s||(f(e.$$.fragment,c),f(o),s=!0)},o(c){p(e.$$.fragment,c),p(o),s=!1},d(c){c&&(D(t),D(r),D(u)),F(e),o&&o.d(c)}}}function $e(l){let t,e,n,i,r,u;return n=new V({props:{icon:"icon palette"}}),{c(){t=N("div"),e=N("div"),H(n.$$.fragment),v(e,"style",l[13]),v(e,"class","colorbox svelte-1yzh05e"),v(t,"class","item clickable svelte-1yzh05e"),v(t,"title","Connection color. Can be overriden by database color")},m(s,o){T(s,t,o),g(t,e),A(n,e,null),i=!0,r||(u=K(t,"click",l[23]),r=!0)},p(s,o){(!i||o&8192)&&v(e,"style",s[13])},i(s){i||(f(n.$$.fragment,s),i=!0)},o(s){p(n.$$.fragment,s),i=!1},d(s){s&&D(t),F(n),r=!1,u()}}}function ve(l){let t,e,n,i=l[1].user+"",r,u;return e=new V({props:{icon:"icon account",padRight:!0}}),{c(){t=N("div"),H(e.$$.fragment),n=L(),r=E(i),v(t,"class","item svelte-1yzh05e")},m(s,o){T(s,t,o),A(e,t,null),g(t,n),g(t,r),u=!0},p(s,o){(!u||o&2)&&i!==(i=s[1].user+"")&&G(r,i)},i(s){u||(f(e.$$.fragment,s),u=!0)},o(s){p(e.$$.fragment,s),u=!1},d(s){s&&D(t),F(e)}}}function ge(l){let t,e,n,i,r,u;const s=[st,ot,rt,lt,it],o=[];function c(a,h){return a[14].name=="pending"?0:a[14].name=="checkStructure"?1:a[14].name=="loadStructure"?2:a[14].name=="ok"?3:a[14].name=="error"?4:-1}return~(e=c(l))&&(n=o[e]=s[e](l)),{c(){t=N("div"),n&&n.c(),v(t,"class","item clickable svelte-1yzh05e")},m(a,h){T(a,t,h),~e&&o[e].m(t,null),i=!0,r||(u=K(t,"click",l[24]),r=!0)},p(a,h){let d=e;e=c(a),e!==d&&(n&&(O(),p(o[d],1,1,()=>{o[d]=null}),M()),~e?(n=o[e],n||(n=o[e]=s[e](a),n.c()),f(n,1),n.m(t,null)):n=null)},i(a){i||(f(n),i=!0)},o(a){p(n),i=!1},d(a){a&&D(t),~e&&o[e].d(),r=!1,u()}}}function it(l){let t,e,n;return t=new V({props:{icon:"img error-inv",padRight:!0}}),{c(){H(t.$$.fragment),e=E(" Error")},m(i,r){A(t,i,r),T(i,e,r),n=!0},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&D(e),F(t,i)}}}function lt(l){let t,e,n;return t=new V({props:{icon:"img ok-inv",padRight:!0}}),{c(){H(t.$$.fragment),e=E(" Connected")},m(i,r){A(t,i,r),T(i,e,r),n=!0},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&D(e),F(t,i)}}}function rt(l){let t,e,n;return t=new V({props:{icon:"icon loading",padRight:!0}}),{c(){H(t.$$.fragment),e=E(" Loading model")},m(i,r){A(t,i,r),T(i,e,r),n=!0},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&D(e),F(t,i)}}}function ot(l){let t,e,n;return t=new V({props:{icon:"icon loading",padRight:!0}}),{c(){H(t.$$.fragment),e=E(" Checking model")},m(i,r){A(t,i,r),T(i,e,r),n=!0},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&D(e),F(t,i)}}}function st(l){let t,e,n;return t=new V({props:{icon:"icon loading",padRight:!0}}),{c(){H(t.$$.fragment),e=E(" Loading")},m(i,r){A(t,i,r),T(i,e,r),n=!0},i(i){n||(f(t.$$.fragment,i),n=!0)},o(i){p(t.$$.fragment,i),n=!1},d(i){i&&D(e),F(t,i)}}}function he(l){let t,e,n,i;return e=new V({props:{icon:"icon disconnected",padRight:!0}}),{c(){t=N("div"),H(e.$$.fragment),n=E(" Not connected"),v(t,"class","item svelte-1yzh05e")},m(r,u){T(r,t,u),A(e,t,null),g(t,n),i=!0},i(r){i||(f(e.$$.fragment,r),i=!0)},o(r){p(e.$$.fragment,r),i=!1},d(r){r&&D(t),F(e)}}}function ye(l){let t,e,n,i,r=(l[15].versionText||l[15].version)+"",u,s,o;return e=new V({props:{icon:"icon version",padRight:!0}}),{c(){t=N("div"),H(e.$$.fragment),n=L(),i=N("div"),u=E(r),v(i,"class","version svelte-1yzh05e"),v(t,"class","item flex svelte-1yzh05e"),v(t,"title",s=l[15].version)},m(c,a){T(c,t,a),A(e,t,null),g(t,n),g(t,i),g(i,u),o=!0},p(c,a){(!o||a&32768)&&r!==(r=(c[15].versionText||c[15].version)+"")&&G(u,r),(!o||a&32768&&s!==(s=c[15].version))&&v(t,"title",s)},i(c){o||(f(e.$$.fragment,c),o=!0)},o(c){p(e.$$.fragment,c),o=!1},d(c){c&&D(t),F(e)}}}function Be(l){var h;let t,e,n,i,r=ie((h=l[14])==null?void 0:h.analysedTime).fromNow()+(l[3],""),u,s,o,c,a;return e=new V({props:{icon:"icon history",padRight:!0}}),{c(){var d;t=N("div"),H(e.$$.fragment),n=L(),i=N("div"),u=E(r),v(i,"class","version ml-1 svelte-1yzh05e"),v(t,"class","item flex clickable svelte-1yzh05e"),v(t,"title",s=`Last ${l[0]} model refresh: ${ie((d=l[14])==null?void 0:d.analysedTime).format("HH:mm:ss")}
Click for refresh DB model`)},m(d,_){T(d,t,_),A(e,t,null),g(t,n),g(t,i),g(i,u),o=!0,c||(a=K(t,"click",l[18]),c=!0)},p(d,_){var b,k;(!o||_&16392)&&r!==(r=ie((b=d[14])==null?void 0:b.analysedTime).fromNow()+(d[3],""))&&G(u,r),(!o||_&16385&&s!==(s=`Last ${d[0]} model refresh: ${ie((k=d[14])==null?void 0:k.analysedTime).format("HH:mm:ss")}
Click for refresh DB model`))&&v(t,"title",s)},i(d){o||(f(e.$$.fragment,d),o=!0)},o(d){p(e.$$.fragment,d),o=!1},d(d){d&&D(t),F(e),c=!1,a()}}}function we(l){let t,e,n,i,r,u,s;return e=new V({props:{icon:"icon archive",padRight:!0}}),{c(){t=N("div"),H(e.$$.fragment),n=L(),i=E(l[16]),v(t,"class","item flex clickable svelte-1yzh05e"),v(t,"title","Current archive")},m(o,c){T(o,t,c),A(e,t,null),g(t,n),g(t,i),r=!0,u||(s=K(t,"click",l[25]),u=!0)},p(o,c){(!r||c&65536)&&G(i,o[16])},i(o){r||(f(e.$$.fragment,o),r=!0)},o(o){p(e.$$.fragment,o),r=!1},d(o){o&&D(t),F(e),u=!1,s()}}}function Ce(l){let t,e;return t=new V({props:{icon:l[27].icon,padRight:!0}}),{c(){H(t.$$.fragment)},m(n,i){A(t,n,i),e=!0},p(n,i){const r={};i&256&&(r.icon=n[27].icon),t.$set(r)},i(n){e||(f(t.$$.fragment,n),e=!0)},o(n){p(t.$$.fragment,n),e=!1},d(n){F(t,n)}}}function ze(l){let t,e,n=l[27].text+"",i,r,u,s,o,c=l[27].icon&&Ce(l);return{c(){t=N("div"),c&&c.c(),e=L(),i=E(n),r=L(),v(t,"class","item svelte-1yzh05e"),ae(t,"clickable",l[27].clickable)},m(a,h){T(a,t,h),c&&c.m(t,null),g(t,e),g(t,i),g(t,r),u=!0,s||(o=K(t,"click",function(){Ke(l[27].onClick)&&l[27].onClick.apply(this,arguments)}),s=!0)},p(a,h){l=a,l[27].icon?c?(c.p(l,h),h&256&&f(c,1)):(c=Ce(l),c.c(),f(c,1),c.m(t,e)):c&&(O(),p(c,1,1,()=>{c=null}),M()),(!u||h&256)&&n!==(n=l[27].text+"")&&G(i,n),(!u||h&256)&&ae(t,"clickable",l[27].clickable)},i(a){u||(f(c),u=!0)},o(a){p(c),u=!1},d(a){a&&D(t),c&&c.d(),s=!1,o()}}}function ct(l){var Z;let t,e,n,i,r,u,s,o,c,a,h,d,_=l[0]&&pe(l),b=l[7]&&ke(l),k=l[1]&&l[1].user&&ve(l),w=l[1]&&l[14]&&ge(l),C=!l[1]&&he(),S=l[15]&&ye(l),z=((Z=l[14])==null?void 0:Z.analysedTime)&&Be(l),B=l[16]&&we(l),W=fe(l[8]||[]),y=[];for(let m=0;m<W.length;m+=1)y[m]=ze(_e(l,W,m));const Q=m=>p(y[m],1,1,()=>{y[m]=null});return{c(){t=N("div"),e=N("div"),_&&_.c(),n=L(),b&&b.c(),i=L(),k&&k.c(),r=L(),w&&w.c(),u=L(),C&&C.c(),s=L(),S&&S.c(),o=L(),z&&z.c(),c=L(),B&&B.c(),a=L(),h=N("div");for(let m=0;m<y.length;m+=1)y[m].c();v(e,"class","container svelte-1yzh05e"),v(h,"class","container svelte-1yzh05e"),v(t,"class","main svelte-1yzh05e"),v(t,"style",l[11])},m(m,$){T(m,t,$),g(t,e),_&&_.m(e,null),g(e,n),b&&b.m(e,null),g(e,i),k&&k.m(e,null),g(e,r),w&&w.m(e,null),g(e,u),C&&C.m(e,null),g(e,s),S&&S.m(e,null),g(e,o),z&&z.m(e,null),g(e,c),B&&B.m(e,null),g(t,a),g(t,h);for(let j=0;j<y.length;j+=1)y[j]&&y[j].m(h,null);d=!0},p(m,[$]){var j;if(m[0]?_?(_.p(m,$),$&1&&f(_,1)):(_=pe(m),_.c(),f(_,1),_.m(e,n)):_&&(O(),p(_,1,1,()=>{_=null}),M()),m[7]?b?(b.p(m,$),$&128&&f(b,1)):(b=ke(m),b.c(),f(b,1),b.m(e,i)):b&&(O(),p(b,1,1,()=>{b=null}),M()),m[1]&&m[1].user?k?(k.p(m,$),$&2&&f(k,1)):(k=ve(m),k.c(),f(k,1),k.m(e,r)):k&&(O(),p(k,1,1,()=>{k=null}),M()),m[1]&&m[14]?w?(w.p(m,$),$&16386&&f(w,1)):(w=ge(m),w.c(),f(w,1),w.m(e,u)):w&&(O(),p(w,1,1,()=>{w=null}),M()),m[1]?C&&(O(),p(C,1,1,()=>{C=null}),M()):C?$&2&&f(C,1):(C=he(),C.c(),f(C,1),C.m(e,s)),m[15]?S?(S.p(m,$),$&32768&&f(S,1)):(S=ye(m),S.c(),f(S,1),S.m(e,o)):S&&(O(),p(S,1,1,()=>{S=null}),M()),(j=m[14])!=null&&j.analysedTime?z?(z.p(m,$),$&16384&&f(z,1)):(z=Be(m),z.c(),f(z,1),z.m(e,c)):z&&(O(),p(z,1,1,()=>{z=null}),M()),m[16]?B?(B.p(m,$),$&65536&&f(B,1)):(B=we(m),B.c(),f(B,1),B.m(e,null)):B&&(O(),p(B,1,1,()=>{B=null}),M()),$&256){W=fe(m[8]||[]);let I;for(I=0;I<W.length;I+=1){const J=_e(m,W,I);y[I]?(y[I].p(J,$),f(y[I],1)):(y[I]=ze(J),y[I].c(),f(y[I],1),y[I].m(h,null))}for(O(),I=W.length;I<y.length;I+=1)Q(I);M()}(!d||$&2048)&&v(t,"style",m[11])},i(m){if(!d){f(_),f(b),f(k),f(w),f(C),f(S),f(z),f(B);for(let $=0;$<W.length;$+=1)f(y[$]);d=!0}},o(m){p(_),p(b),p(k),p(w),p(C),p(S),p(z),p(B),y=y.filter(Boolean);for(let $=0;$<y.length;$+=1)p(y[$]);d=!1},d(m){m&&D(t),_&&_.d(),b&&b.d(),k&&k.d(),w&&w.d(),C&&C.d(),S&&S.d(),z&&z.d(),B&&B.d(),je(y,m)}}}function ft(l,t,e){let n,i,r,u,s,o,c,a,h,d,_,b,k,w,C=P,S=()=>(C(),C=X(a,R=>e(11,w=R)),a),z,B=P,W=()=>(B(),B=X(d,R=>e(12,z=R)),d),y,Q=P,Z=()=>(Q(),Q=X(h,R=>e(13,y=R)),h),m,$=P,j=()=>($(),$=X(u,R=>e(14,m=R)),u),I,J=P,Te=()=>(J(),J=X(s,R=>e(15,I=R)),s),ce,x;Y(l,Qe,R=>e(19,_=R)),Y(l,Ue,R=>e(20,b=R)),Y(l,Ye,R=>e(21,k=R)),Y(l,Pe,R=>e(16,ce=R)),Y(l,ue,R=>e(17,x=R)),l.$$.on_destroy.push(()=>C()),l.$$.on_destroy.push(()=>B()),l.$$.on_destroy.push(()=>Q()),l.$$.on_destroy.push(()=>$()),l.$$.on_destroy.push(()=>J());var De=this&&this.__awaiter||function(R,He,ee,te){function Ae(U){return U instanceof ee?U:new ee(function(ne){ne(U)})}return new(ee||(ee=Promise))(function(U,ne){function Fe(q){try{re(te.next(q))}catch(oe){ne(oe)}}function Me(q){try{re(te.throw(q))}catch(oe){ne(oe)}}function re(q){q.done?U(q.value):Ae(q.value).then(Fe,Me)}re((te=te.apply(R,He||[])).next())})};let le=1;setInterval(()=>{e(3,le++,le)},1e4);function Se(){return De(this,void 0,void 0,function*(){i&&n&&(yield Xe("database-connections/sync-model",{conid:i._id,database:n}))})}const Ie=()=>{de(me,{...r,header:"Choose database color",text:"This color override connection color for specific database."})},Le=()=>{de(me,{conid:r.conid,header:"Choose connection color",text:"This color serves as default color for all databases in this connection."})},Ne=()=>Ze.set(xe("database.changeState")),Ve=()=>{et(ue,x="archive",x)};return l.$$.update=()=>{l.$$.dirty&2097152&&e(0,n=k&&k.name),l.$$.dirty&2097152&&e(1,i=k&&k.connection),l.$$.dirty&3&&e(2,r=i?{conid:i._id,database:n}:null),l.$$.dirty&4&&j(e(10,u=qe(r||{}))),l.$$.dirty&4&&Te(e(9,s=Ge(r||{}))),l.$$.dirty&1572864&&e(8,o=b[_]),l.$$.dirty&2&&e(7,c=Je(i,{allowExplicitDatabase:!1})),l.$$.dirty&4&&S(e(6,a=se(r,3,"dark",!0))),l.$$.dirty&4&&Z(e(5,h=se(r?{conid:r.conid}:null,6,"dark",!0))),l.$$.dirty&4&&W(e(4,d=se(r,6,"dark",!0,!1)))},[n,i,r,le,d,h,a,c,o,s,u,w,z,y,m,I,ce,x,Se,_,b,k,Ie,Le,Ne,Ve]}class _t extends Oe{constructor(t){super(),Ee(this,t,ft,ct,We,{})}}export{_t as default};
//# sourceMappingURL=StatusBar-49e84339.js.map
